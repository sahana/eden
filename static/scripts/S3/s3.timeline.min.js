S3.timeline.loadGDataCallback=function(b){for(var b=b.feed.entry,a=[],c=0;c<b.length;++c){var d=b[c];if(null!=d.gd$when){var e=d.gd$when[0],f=S3.timeline.convertFromGDataDate(e.startTime),e=S3.timeline.convertFromGDataDate(e.endTime);a.push({start:f,end:e,title:d.title.$t,description:d.content.$t,link:d.link[0].href})}}S3.timeline.data={dateTimeFormat:"iso8601",events:a};S3.timeline.eventSource.loadJSON(S3.timeline.data,".");S3.timeline.tl.hideLoadingMessage();S3.timeline.tl.layout()};
S3.timeline.zeroPad=function(b){if(0>b)throw Error("n is negative");return 10>b?"0"+b:b};S3.timeline.convertToGDataDate=function(b){return b.getFullYear()+"-"+S3.timeline.zeroPad(b.getMonth()+1)+"-"+S3.timeline.zeroPad(b.getDate())};S3.timeline.convertFromGDataDate=function(b){b=b.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10))};
S3.timeline.onLoadCalendar=function(){var b=document.getElementById("s3timeline");S3.timeline.eventSource=new Timeline.DefaultEventSource;var a=Timeline.ClassicTheme.create();a.event.bubble.width=320;a.event.bubble.height=180;var c=new Date((new Date).getTime()+2592E5),a=[Timeline.createBandInfo({eventSource:S3.timeline.eventSource,date:c,width:"40%",intervalUnit:Timeline.DateTime.WEEK,intervalPixels:300,theme:a}),Timeline.createBandInfo({eventSource:S3.timeline.eventSource,date:c,width:"60%",intervalUnit:Timeline.DateTime.MONTH,
intervalPixels:550,theme:a})];a[1].syncWith=0;a[1].highlight=!0;S3.timeline.tl=Timeline.create(b,a);S3.timeline.tl.showLoadingMessage();b=S3.timeline.calendar;a=new Date((new Date).getDate());c=new Date((new Date).getTime()+7776E6);a="?start-min="+S3.timeline.convertToGDataDate(a)+"&start-max="+S3.timeline.convertToGDataDate(c)+"&alt=json-in-script&callback=S3.timeline.loadGDataCallback&max-results=5000";b+=a;a=document.createElement("script");a.src=b;document.body.appendChild(a)};
S3.timeline.onLoad=function(){var b=document.getElementById("s3timeline");S3.timeline.eventSource=new Timeline.DefaultEventSource;var a=Timeline.ClassicTheme.create();a.timeline_start=new Date(S3.timeline.tl_start);a.timeline_stop=new Date(S3.timeline.tl_end);a.event.bubble.width=320;a.event.bubble.height=180;var c=Timeline.DateTime.parseIso8601DateTime(S3.timeline.now),a=[Timeline.createBandInfo({width:"90%",intervalUnit:Timeline.DateTime.DAY,intervalPixels:140,eventSource:S3.timeline.eventSource,
date:c,theme:a}),Timeline.createBandInfo({overview:!0,width:"10%",intervalUnit:Timeline.DateTime.MONTH,intervalPixels:200,eventSource:S3.timeline.eventSource,date:c})];a[1].syncWith=0;a[1].highlight=!0;S3.timeline.tl=Timeline.create(b,a,Timeline.HORIZONTAL);S3.timeline.eventSource.loadJSON(S3.timeline.data,".");S3.timeline.tl.layout()};S3.timeline.resizeTimerID=null;
S3.timeline.onResize=function(){null==S3.timeline.resizeTimerID&&(S3.timeline.resizeTimerID=window.setTimeout(function(){S3.timeline.resizeTimerID=null;S3.timeline.tl.layout()},500))};$(document).ready(function(){$(window).load(function(){S3.timeline.calendar?(SimileAjax.History.enabled=!1,S3.timeline.onLoadCalendar()):S3.timeline.tl_start&&(SimileAjax.History.enabled=!1,S3.timeline.onLoad())});$(window).resize(function(){if(S3.timeline.tl)S3.timeline.onResize()})});
