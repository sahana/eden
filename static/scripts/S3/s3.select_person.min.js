$(function(){function d(){$("#pr_person_first_name").removeAttr("disabled");$("#pr_person_middle_name").removeAttr("disabled");$("#pr_person_last_name").removeAttr("disabled");$("#pr_person_gender").removeAttr("disabled");$("#pr_person_date_of_birth").removeAttr("disabled");$("#pr_person_occupation").removeAttr("disabled");$("#pr_person_email").removeAttr("disabled");$("#pr_person_mobile_phone").removeAttr("disabled")}function f(){$("#pr_person_first_name").attr("disabled",!0);$("#pr_person_middle_name").attr("disabled",
!0);$("#pr_person_last_name").attr("disabled",!0);$("#pr_person_gender").attr("disabled",!0);$("#pr_person_date_of_birth").attr("disabled",!0);$("#pr_person_occupation").attr("disabled",!0);$("#pr_person_email").attr("disabled",!0);$("#pr_person_mobile_phone").attr("disabled",!0)}var h=$("#select_from_registry_row").attr("controller"),g=$("#select_from_registry_row").attr("field"),b=$("#select_from_registry_row").attr("value"),c="#"+g,a="#dummy_"+g,e=$(c).val();$(a).addClass("hide");0<e&&($("#clear_form_link").removeClass("hide"),
$("#edit_selected_person_link").removeClass("hide"),f());$("#select_from_registry").click(function(){$("#select_from_registry_row").addClass("hide");$("#person_autocomplete_row").removeClass("hide");$(a).removeClass("hide");$("#person_autocomplete_label").removeClass("hide");$(a).focus()});$(a).focusout(function(){e=$(c).val();$(a).addClass("hide");$("#person_autocomplete_label").addClass("hide");$("#select_from_registry_row").removeClass("hide");e>0&&$("#clear_form_link").removeClass("hide")});clear_person_form=
function(){d();$(c).val("");$("#pr_person_first_name").val("");$("#pr_person_middle_name").val("");$("#pr_person_last_name").val("");$("#pr_person_gender").val("");$("#pr_person_date_of_birth").val("");$("#pr_person_occupation").val("");$("#pr_person_email").val("");$("#pr_person_mobile_phone").val("");$("#clear_form_link").addClass("hide");$("#edit_selected_person_link").addClass("hide")};edit_selected_person_form=function(){d();$("#edit_selected_person_link").addClass("hide")};select_person=function(a){$("#select_from_registry").addClass("hide");
$("#clear_form_link").addClass("hide");$("#person_load_throbber").removeClass("hide");clear_person_form();a=S3.Ap.concat("/"+h+"/person/"+a+".s3json?show_ids=True");$.getJSONS3(a,function(a){try{person=a.$_pr_person[0];f();$(c).val(person["@id"]);person.hasOwnProperty("first_name")&&$("#pr_person_first_name").val(person.first_name);person.hasOwnProperty("middle_name")&&$("#pr_person_middle_name").val(person.middle_name);person.hasOwnProperty("last_name")&&$("#pr_person_last_name").val(person.last_name);
person.hasOwnProperty("gender")&&$("#pr_person_gender").val(person.gender["@value"]);person.hasOwnProperty("date_of_birth")&&$("#pr_person_date_of_birth").val(person.date_of_birth["@value"]);person.hasOwnProperty("occupation")&&$("#pr_person_occupation").val(person.occupation);try{$.each(person.$_pr_contact,function(){method=this.contact_method["@value"];b=this.value;typeof b!=="undefined"&&(method=='"EMAIL"'?$("#pr_person_email").val(b):method=='"SMS"'&&$("#pr_person_mobile_phone").val(b))})}catch(d){}}catch(e){$(c).val("")}$("#person_load_throbber").addClass("hide");
$("#select_from_registry").removeClass("hide");$("#clear_form_link").removeClass("hide");$("#edit_selected_person_link").removeClass("hide")});$("#person_autocomplete_row").addClass("hide");$("#select_from_registry_row").removeClass("hide")};"None"!=b&&($(c).val(b),select_person(b));$("form").submit(function(){S3ClearNavigateAwayConfirm();d();return true})});
