(function(){var e;S3.addPersonWidget=function(){var a=$("#select_from_registry_row").attr("field"),c=$("#dummy_"+a);c.addClass("hide");e=$("#"+a);0<e.val()&&($("#clear_form_link").removeClass("hide"),$("#edit_selected_person_link").removeClass("hide"),h());$("#select_from_registry").click(function(){$("#select_from_registry_row").addClass("hide");$("#person_autocomplete_row").removeClass("hide");$("#person_autocomplete_label").removeClass("hide");c.removeClass("hide").focus()});c.focusout(function(){var a=
e.val();c.addClass("hide");$("#person_autocomplete_label").addClass("hide");$("#select_from_registry_row").removeClass("hide");0<a&&$("#clear_form_link").removeClass("hide")});a=$("#select_from_registry_row").attr("value");"None"!=a&&""!=a&&(e.val(a),k(a));$("form").submit(function(){S3ClearNavigateAwayConfirm();f();return!0})};var l=function(){f();e.val("");$("#pr_person_first_name").val("");$("#pr_person_middle_name").val("");$("#pr_person_last_name").val("");$("#pr_person_gender").val("");$("#pr_person_date_of_birth").val("");
$("#pr_person_occupation").val("");$("#pr_person_email").val("");$("#pr_person_mobile_phone").val("");$("#clear_form_link").addClass("hide");$("#edit_selected_person_link").addClass("hide")};S3.select_person_clear_form=l;S3.select_person_edit_form=function(){f();$("#edit_selected_person_link").addClass("hide")};var k=function(a){l();if(a){var c=$("#select_from_registry_row").attr("controller");c&&($("#select_from_registry").addClass("hide"),$("#clear_form_link").addClass("hide"),$("#person_load_throbber").removeClass("hide"),
a=S3.Ap.concat("/"+c+"/person/"+a+".s3json?show_ids=True"),$.getJSONS3(a,function(a){try{var c=void 0,g=void 0,b=a.$_pr_person[0];h();e.val(b["@id"]);b.hasOwnProperty("first_name")&&$("#pr_person_first_name").val(b.first_name);b.hasOwnProperty("middle_name")&&$("#pr_person_middle_name").val(b.middle_name["@value"]);b.hasOwnProperty("last_name")&&$("#pr_person_last_name").val(b.last_name["@value"]);b.hasOwnProperty("gender")&&$("#pr_person_gender").val(b.gender["@value"]);b.hasOwnProperty("date_of_birth")&&
$("#pr_person_date_of_birth").val(b.date_of_birth["@value"]);b.hasOwnProperty("occupation")&&$("#pr_person_occupation").val(b.occupation["@value"]);if(b.hasOwnProperty("$_pr_email_contact"))var d=b.$_pr_email_contact[0],c=d.value["@value"];b.hasOwnProperty("$_pr_phone_contact")&&(d=b.$_pr_phone_contact[0],g=d.value["@value"]);if(b.hasOwnProperty("$_pr_contact")){var f=b.$_pr_contact;for(a=0;a<f.length;a++)d=f[a],void 0==c&&"EMAIL"==d.contact_method["@value"]&&(c=d.value["@value"]),void 0==g&&"SMS"==
d.contact_method["@value"]&&(g=d.value["@value"])}void 0!==c&&$("#pr_person_email").val(c);void 0!==g&&$("#pr_person_mobile_phone").val(g)}catch(m){e.val("")}$("#person_load_throbber").addClass("hide");$("#select_from_registry").removeClass("hide");$("#clear_form_link").removeClass("hide");$("#edit_selected_person_link").removeClass("hide")}),$("#person_autocomplete_row").addClass("hide"),$("#select_from_registry_row").removeClass("hide"))}};S3.select_person=k;var f=function(){$("#pr_person_first_name").prop("disabled",
!1);$("#pr_person_middle_name").prop("disabled",!1);$("#pr_person_last_name").prop("disabled",!1);$("#pr_person_gender").prop("disabled",!1);$("#pr_person_date_of_birth").prop("disabled",!1);$("#pr_person_occupation").prop("disabled",!1);$("#pr_person_email").prop("disabled",!1);$("#pr_person_mobile_phone").prop("disabled",!1)},h=function(){$("#pr_person_first_name").prop("disabled",!0);$("#pr_person_middle_name").prop("disabled",!0);$("#pr_person_last_name").prop("disabled",!0);$("#pr_person_gender").prop("disabled",
!0);$("#pr_person_date_of_birth").prop("disabled",!0);$("#pr_person_occupation").prop("disabled",!0);$("#pr_person_email").prop("disabled",!0);$("#pr_person_mobile_phone").prop("disabled",!0)}})();
