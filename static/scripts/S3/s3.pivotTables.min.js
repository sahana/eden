/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+

*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(y,u,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");y!=Array.prototype&&y!=Object.prototype&&(y[u]=a.value)};$jscomp.getGlobal=function(y){return"undefined"!=typeof window&&window===y?y:"undefined"!=typeof global&&null!=global?global:y};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(y){return $jscomp.SYMBOL_PREFIX+(y||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var y=$jscomp.global.Symbol.iterator;y||(y=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[y]&&$jscomp.defineProperty(Array.prototype,y,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(y){var u=0;return $jscomp.iteratorPrototype(function(){return u<y.length?{done:!1,value:y[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(y){$jscomp.initSymbolIterator();y={next:y};y[$jscomp.global.Symbol.iterator]=function(){return this};return y};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(y,u){$jscomp.initSymbolIterator();y instanceof String&&(y+="");var a=0,b={next:function(){if(a<y.length){var l=a++;return{value:u(l,y[l]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(y,u,a,b){if(u){a=$jscomp.global;y=y.split(".");for(b=0;b<y.length-1;b++){var l=y[b];l in a||(a[l]={});a=a[l]}y=y[y.length-1];b=a[y];u=u(b);u!=b&&null!=u&&$jscomp.defineProperty(a,y,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.keys",function(y){return y?y:function(){return $jscomp.iteratorFromArray(this,function(u){return u})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(y){return y?y:function(){return $jscomp.iteratorFromArray(this,function(u,a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(y){return y?y:function(){return $jscomp.iteratorFromArray(this,function(u,a){return[u,a]})}},"es6-impl","es3");$jscomp.findInternal=function(y,u,a){y instanceof String&&(y=String(y));for(var b=y.length,l=0;l<b;l++){var v=y[l];if(u.call(a,v,l,y))return{i:l,v:v}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(y){return y?y:function(u,a){return $jscomp.findInternal(this,u,a).v}},"es6-impl","es3");
!function(){function y(c,f){return c<f?-1:c>f?1:c>=f?0:NaN}function u(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(f,a,n,k){3>arguments.length&&(n=0);4>arguments.length&&(k=f.length);for(;n<k;){var h=n+k>>>1;0>c(f[h],a)?n=h+1:k=h}return n},right:function(f,a,n,k){3>arguments.length&&(n=0);4>arguments.length&&(k=f.length);for(;n<k;){var h=n+k>>>1;0<c(f[h],a)?k=h:n=h+1}return n}}}function b(c){return c.length}function l(c,f){try{for(var a in f)Object.defineProperty(c.prototype,a,
{value:f[a],enumerable:!1})}catch(n){c.prototype=f}}function v(){}function p(c){return eb+c in this}function e(){var c=[];this.forEach(function(f){c.push(f)});return c}function g(){var c=0,f;for(f in this)f.charCodeAt(0)===Sb&&++c;return c}function t(){for(var c in this)if(c.charCodeAt(0)===Sb)return!1;return!0}function r(){}function G(c,f,a){return function(){var h=a.apply(f,arguments);return h===f?c:h}}function D(c,f){if(f in c)return f;f=f.charAt(0).toUpperCase()+f.substring(1);for(var a=0,n=Sd.length;a<
n;++a){var k=Sd[a]+f;if(k in c)return k}}function B(){}function F(){}function E(c){function f(){for(var f=a,h=-1,n=f.length,w;++h<n;)(w=f[h].on)&&w.apply(this,arguments);return c}var a=[],n=new v;f.on=function(f,h){var k=n.get(f),q;if(2>arguments.length)return k&&k.on;k&&(k.on=null,a=a.slice(0,q=a.indexOf(k)).concat(a.slice(q+1)),n.remove(f));h&&a.push(n.set(f,{on:h}));return c};return f}function I(){x.event.preventDefault()}function M(){for(var c=x.event,f;f=c.sourceEvent;)c=f;return c}function z(c){for(var f=
new F,a=0,n=arguments.length;++a<n;)f[arguments[a]]=E(f);f.of=function(a,h){return function(n){try{var k=n.sourceEvent=x.event;n.target=c;x.event=n;f[n.type].apply(a,h)}finally{x.event=k}}};return f}function N(c){Tb(c,oa);return c}function T(c){return"function"===typeof c?c:function(){return Mc(c,this)}}function J(c){return"function"===typeof c?c:function(){return Nc(c,this)}}function W(c,f){function a(){this.removeAttribute(c)}function n(){this.removeAttributeNS(c.space,c.local)}function k(){this.setAttribute(c,
f)}function q(){this.setAttributeNS(c.space,c.local,f)}function b(){var a=f.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function w(){var a=f.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=x.ns.qualify(c);return null==f?c.local?n:a:"function"===typeof f?c.local?w:b:c.local?q:k}function Q(c){return new RegExp("(?:^|\\s+)"+x.requote(c)+"(?:\\s+|$)","g")}function P(c,f){function a(){for(var a=-1;++a<k;)c[a](this,
f)}function n(){for(var a=-1,h=f.apply(this,arguments);++a<k;)c[a](this,h)}c=(c+"").trim().split(/^|\s+/).map(A);var k=c.length;return"function"===typeof f?n:a}function A(c){var f=Q(c);return function(a,n){if(h=a.classList)return n?h.add(c):h.remove(c);var h=a.getAttribute("class")||"";n?(f.lastIndex=0,f.test(h)||a.setAttribute("class",(h+" "+c).trim().replace(/\s+/g," "))):a.setAttribute("class",h.replace(f," ").trim().replace(/\s+/g," "))}}function H(c,f,a){function h(){this.style.removeProperty(c)}
function k(){this.style.setProperty(c,f,a)}function q(){var h=f.apply(this,arguments);null==h?this.style.removeProperty(c):this.style.setProperty(c,h,a)}return null==f?h:"function"===typeof f?q:k}function K(c,f){function a(){delete this[c]}function n(){this[c]=f}function k(){var a=f.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==f?a:"function"===typeof f?k:n}function C(c){return"function"===typeof c?c:(c=x.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function V(c){return function(){return Td(this,c)}}function R(c){arguments.length||(c=y);return function(f,a){return f&&a?c(f.__data__,a.__data__):!f-!a}}function Y(c,f){for(var a=0,n=c.length;a<n;a++)for(var k=c[a],q=0,b=k.length,w;q<b;q++)(w=k[q])&&f(w,q,a);return c}function L(c){Tb(c,Qa);return c}function ea(c){var f,a;return function(h,k,q){h=c[q].update;var n=h.length;q!=a&&(a=q,f=0);for(k>=f&&(f=k+1);!(k=h[f])&&
++f<n;);return k}}function X(){var c=this.__transition__;c&&++c.active}function m(c,f,a){function h(){var f=this[b];f&&(this.removeEventListener(c,f,f.$),delete this[b])}function k(){var n=O(f,Xa(arguments));h.call(this);this.addEventListener(c,this[b]=n,n.$=a);n._=f}function q(){var f=new RegExp("^__on([^.]+)"+x.requote(c)+"$"),a,h;for(h in this)if(a=h.match(f)){var n=this[h];this.removeEventListener(a[1],n,n.$);delete this[h]}}var b="__on"+c,w=c.indexOf("."),O=S;0<w&&(c=c.substring(0,w));var U=
Oc.get(c);U&&(c=U,O=wa);return w?f?k:h:f?B:q}function S(c,f){return function(a){var h=x.event;x.event=a;f[0]=this.__data__;try{c.apply(this,f)}finally{x.event=h}}}function wa(c,f){var a=S(c,f);return function(c){var f=c.relatedTarget;f&&(f===this||f.compareDocumentPosition(this)&8)||a.call(this,c)}}function na(){var c=".dragsuppress-"+ ++kg,f="click"+c,a=x.select(Aa).on("touchmove"+c,I).on("dragstart"+c,I).on("selectstart"+c,I);if(Eb){var n=Ra.style,k=n[Eb];n[Eb]="none"}return function(h){a.on(c,
null);Eb&&(n[Eb]=k);if(h){var q=function(){a.on(f,null)};a.on(f,function(){I();q()},!0);setTimeout(q,0)}}}function la(c,f){f.changedTouches&&(f=f.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var n=a.createSVGPoint();if(0>Pc&&(Aa.scrollX||Aa.scrollY)){var a=x.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),k=a[0][0].getScreenCTM();Pc=!(k.f||k.e);a.remove()}Pc?(n.x=f.pageX,n.y=f.pageY):(n.x=f.clientX,n.y=f.clientY);
n=n.matrixTransform(c.getScreenCTM().inverse());return[n.x,n.y]}a=c.getBoundingClientRect();return[f.clientX-a.left-c.clientLeft,f.clientY-a.top-c.clientTop]}function Z(){return x.event.changedTouches[0].identifier}function ca(){return x.event.target}function ha(){return Aa}function ga(c,f,a){return(f[0]-c[0])*(a[1]-c[1])-(f[1]-c[1])*(a[0]-c[0])}function ba(c){return 1<c?0:-1>c?ja:Math.acos(c)}function ma(c){return 1<c?ya:-1>c?-ya:Math.asin(c)}function fa(c){return((c=Math.exp(c))+1/c)/2}function sa(c){return(c=
Math.sin(c/2))*c}function pa(){}function Ba(c,f,a){return this instanceof Ba?void(this.h=+c,this.s=+f,this.l=+a):2>arguments.length?c instanceof Ba?new Ba(c.h,c.s,c.l):Ud(""+c,Vd,Ba):new Ba(c,f,a)}function qb(c,f,a){function h(c){360<c?c-=360:0>c&&(c+=360);return 60>c?k+(q-k)*c/60:180>c?q:240>c?k+(q-k)*(240-c)/60:k}var k,q;c=isNaN(c)?0:0>(c%=360)?c+360:c;f=isNaN(f)?0:0>f?0:1<f?1:f;a=0>a?0:1<a?1:a;q=.5>=a?a*(1+f):a+f-a*f;k=2*a-q;return new Ca(Math.round(255*h(c+120)),Math.round(255*h(c)),Math.round(255*
h(c-120)))}function Ia(c,f,a){return this instanceof Ia?void(this.h=+c,this.c=+f,this.l=+a):2>arguments.length?c instanceof Ia?new Ia(c.h,c.c,c.l):c instanceof Ja?Wd(c.l,c.a,c.b):Wd((c=Xd((c=x.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ia(c,f,a)}function Qc(c,f,a){isNaN(c)&&(c=0);isNaN(f)&&(f=0);return new Ja(a,Math.cos(c*=ia)*f,Math.sin(c)*f)}function Ja(c,f,a){return this instanceof Ja?void(this.l=+c,this.a=+f,this.b=+a):2>arguments.length?c instanceof Ja?new Ja(c.l,c.a,c.b):c instanceof Ia?Qc(c.l,c.c,
c.h):Xd((c=Ca(c)).r,c.g,c.b):new Ja(c,f,a)}function Yd(c,f,a){c=(c+16)/116;a=c-a/200;f=Rc(c+f/500)*Zd;c=Rc(c)*$d;a=Rc(a)*ae;return new Ca(Sc(3.2404542*f-1.5371385*c-.4985314*a),Sc(-.969266*f+1.8760108*c+.041556*a),Sc(.0556434*f-.2040259*c+1.0572252*a))}function Wd(c,f,a){return 0<c?new Ia(Math.atan2(a,f)*ra,Math.sqrt(f*f+a*a),c):new Ia(NaN,NaN,c)}function Rc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Tc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Sc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Ca(c,f,a){return this instanceof Ca?void(this.r=~~c,this.g=~~f,this.b=~~a):2>arguments.length?c instanceof Ca?new Ca(c.r,c.g,c.b):Ud(""+c,Ca,qb):new Ca(c,f,a)}function Ub(c){return new Ca(c>>16,c>>8&255,c&255)+""}function rb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Ud(c,f,a){var h=0,k=0,q=0,b,w;if(b=/([a-z]+)\((.*)\)/i.exec(c))switch(w=b[2].split(","),b[1]){case "hsl":return a(parseFloat(w[0]),parseFloat(w[1])/
100,parseFloat(w[2])/100);case "rgb":return f(Uc(w[0]),Uc(w[1]),Uc(w[2]))}if(a=Vb.get(c))return f(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(h=(a&3840)>>4,h|=h>>4,k=a&240,k|=k>>4,q=a&15,q|=q<<4):7===c.length&&(h=(a&16711680)>>16,k=(a&65280)>>8,q=a&255));return f(h,k,q)}function Vd(c,a,h){var f=Math.min(c/=255,a/=255,h/=255),k=Math.max(c,a,h),q=k-f,b=(k+f)/2;q?(f=.5>b?q/(k+f):q/(2-k-f),c=60*(c==k?(a-h)/q+(a<h?6:0):a==k?(h-c)/q+2:(c-a)/q+4)):(c=NaN,
f=0<b&&1>b?0:c);return new Ba(c,f,b)}function Xd(c,a,h){c=Vc(c);a=Vc(a);h=Vc(h);var f=Tc((.4124564*c+.3575761*a+.1804375*h)/Zd),k=Tc((.2126729*c+.7151522*a+.072175*h)/$d);c=Tc((.0193339*c+.119192*a+.9503041*h)/ae);return Ja(116*k-16,500*(f-k),200*(k-c))}function Vc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Uc(c){var a=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*a):a}function qa(c){return"function"===typeof c?c:function(){return c}}function xa(c){return c}
function Wc(c){return function(a,h,n){2===arguments.length&&"function"===typeof h&&(n=h,h=null);return Wb(a,h,c,n)}}function Wb(c,a,h,n){function f(){var c=O.status,a;if(!c&&O.responseText||200<=c&&300>c||304===c){try{a=h.call(q,O)}catch(Na){b.error.call(q,Na);return}b.load.call(q,a)}else b.error.call(q,O)}var q={},b=x.dispatch("beforesend","progress","load","error"),w={},O=new XMLHttpRequest,U=null;!Aa.XDomainRequest||"withCredentials"in O||!/^(http(s)?:)?\/\//.test(c)||(O=new XDomainRequest);"onload"in
O?O.onload=O.onerror=f:O.onreadystatechange=function(){3<O.readyState&&f()};O.onprogress=function(c){var a=x.event;x.event=c;try{b.progress.call(q,O)}finally{x.event=a}};q.header=function(c,a){c=(c+"").toLowerCase();if(2>arguments.length)return w[c];null==a?delete w[c]:w[c]=a+"";return q};q.mimeType=function(c){if(!arguments.length)return a;a=null==c?null:c+"";return q};q.responseType=function(c){if(!arguments.length)return U;U=c;return q};q.response=function(c){h=c;return q};["get","post"].forEach(function(c){q[c]=
function(){return q.send.apply(q,[c].concat(Xa(arguments)))}});q.send=function(f,h,n){2===arguments.length&&"function"===typeof h&&(n=h,h=null);O.open(f,c,!0);null==a||"accept"in w||(w.accept=a+",*/*");if(O.setRequestHeader)for(var k in w)O.setRequestHeader(k,w[k]);null!=a&&O.overrideMimeType&&O.overrideMimeType(a);null!=U&&(O.responseType=U);if(null!=n)q.on("error",n).on("load",function(c){n(null,c)});b.beforesend.call(q,O);O.send(null==h?null:h);return q};q.abort=function(){O.abort();return q};
x.rebind(q,b,"on");return null==n?q:q.get(lg(n))}function lg(c){return 1===c.length?function(a,h){c(null==a?h:null)}:c}function Xc(){var c=be(),c=ce()-c;24<c?(isFinite(c)&&(clearTimeout(Xb),Xb=setTimeout(Xc,c)),Yb=0):(Yb=1,de(Xc))}function be(){var c=Date.now();for(Sa=Zb;Sa;)c>=Sa.t&&(Sa.f=Sa.c(c-Sa.t)),Sa=Sa.n;return c}function ce(){for(var c,a=Zb,h=Infinity;a;)a.f?a=c?c.n=a.n:Zb=a.n:(a.t<h&&(h=a.t),a=(c=a).n);$b=c;return h}function Yc(c,a){return a-(c?Math.ceil(Math.log(c)/Math.LN10):1)}function mg(c){var a=
c.decimal,h=c.thousands,n=c.grouping,k=c.currency,q=n?function(c){for(var a=c.length,f=[],k=0,q=n[0];0<a&&0<q;)f.push(c.substring(a-=q,a+q)),q=n[k=(k+1)%n.length];return f.reverse().join(h)}:xa;return function(c){c=ee.exec(c);var f=c[1]||" ",h=c[2]||">",n=c[3]||"",b=c[4]||"",da=c[5],m=+c[6],e=c[7],g=c[8],l=c[9],p=1,r="",v="",t=!1;g&&(g=+g.substring(1));if(da||"0"===f&&"="===h)da=f="0",h="=",e&&(m-=Math.floor((m-1)/4));switch(l){case "n":e=!0;l="g";break;case "%":p=100;v="%";l="f";break;case "p":p=
100;v="%";l="r";break;case "b":case "o":case "x":case "X":"#"===b&&(r="0"+l.toLowerCase());case "c":case "d":t=!0;g=0;break;case "s":p=-1,l="r"}"$"===b&&(r=k[0],v=k[1]);"r"!=l||g||(l="g");if(null!=g)if("g"==l)g=Math.max(1,Math.min(21,g));else if("e"==l||"f"==l)g=Math.max(0,Math.min(20,g));var l=ng.get(l)||og,C=da&&e;return function(c){var k=v;if(t&&c%1)return"";var w=0>c||0===c&&0>1/c?(c=-c,"-"):n;0>p?(k=x.formatPrefix(c,g),c=k.scale(c),k=k.symbol+v):c*=p;c=l(c,g);var b=c.lastIndexOf("."),O=0>b?c:
c.substring(0,b);c=0>b?"":a+c.substring(b+1);!da&&e&&(O=q(O));var b=r.length+O.length+c.length+(C?0:w.length),U=b<m?Array(b=m-b+1).join(f):"";C&&(O=q(U+O));w+=r;c=O+c;return("<"===h?w+c+U:">"===h?U+w+c:"^"===h?U.substring(0,b>>=1)+w+c+U.substring(b):w+(C?c:U+c))+k}}}function og(c){return c+""}function Ta(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(c,a,h){function f(a){var f=c(a),h=q(f,1);return a-f<h-a?f:h}function k(f){a(f=c(new za(f-1)),1);return f}
function q(c,f){a(c=new za(+c),f);return c}function b(c,f,n){c=k(c);var q=[];if(1<n)for(;c<f;)h(c)%n||q.push(new Date(+c)),a(c,1);else for(;c<f;)q.push(new Date(+c)),a(c,1);return q}c.floor=c;c.round=f;c.ceil=k;c.offset=q;c.range=b;var w=c.utc=ac(c);w.floor=w;w.round=ac(f);w.ceil=ac(k);w.offset=ac(q);w.range=function(c,a,f){try{za=Ta;var h=new Ta;h._=c;return b(h,a,f)}finally{za=Date}};return c}function ac(c){return function(a,h){try{za=Ta;var f=new Ta;f._=a;return c(f,h)._}finally{za=Date}}}function pg(c){function a(c){function a(a){for(var h=
[],n=-1,k=0,q,b;++n<f;)if(37===c.charCodeAt(n)){h.push(c.substring(k,n));null!=(q=fe[k=c.charAt(++n)])&&(k=c.charAt(++n));if(b=S[k])k=b(a,null==q?"e"===k?" ":"0":q);h.push(k);k=n+1}h.push(c.substring(k,n));return h.join("")}var f=c.length;a.parse=function(a){var f={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(f,c,a,0)!=a.length)return null;"p"in f&&(f.H=f.H%12+12*f.p);a=null!=f.Z&&za!==Ta;var n=new (a?Ta:za);"j"in f?n.setFullYear(f.y,0,f.j):"w"in f&&("W"in f||"U"in f)?(n.setFullYear(f.y,0,1),n.setFullYear(f.y,
0,"W"in f?(f.w+6)%7+7*f.W-(n.getDay()+5)%7:f.w+7*f.U-(n.getDay()+6)%7)):n.setFullYear(f.y,f.m,f.d);n.setHours(f.H+Math.floor(f.Z/100),f.M+f.Z%100,f.S,f.L);return a?n._:n};a.toString=function(){return c};return a}function h(c,a,f,h){for(var n,k=0,q=a.length,b=f.length;k<q;){if(h>=b)return-1;n=a.charCodeAt(k++);if(37===n){if(n=a.charAt(k++),n=z[n in fe?a.charAt(k++):n],!n||0>(h=n(c,f,h)))return-1}else if(n!=f.charCodeAt(h++))return-1}return h}var n=c.dateTime,k=c.date,q=c.time,b=c.periods,w=c.days,
O=c.shortDays,U=c.months,m=c.shortMonths;a.utc=function(c){function f(c){try{za=Ta;var a=new za;a._=c;return h(a)}finally{za=Date}}var h=a(c);f.parse=function(c){try{za=Ta;var a=h.parse(c);return a&&a._}finally{za=Date}};f.toString=h.toString;return f};a.multi=a.utc.multi=qg;var e=x.map(),g=bc(w),l=cc(w),p=bc(O),r=cc(O),v=bc(U),t=cc(U),C=bc(m),A=cc(m);b.forEach(function(c,a){e.set(c.toLowerCase(),a)});var S={a:function(c){return O[c.getDay()]},A:function(c){return w[c.getDay()]},b:function(c){return m[c.getMonth()]},
B:function(c){return U[c.getMonth()]},c:a(n),d:function(c,a){return Da(c.getDate(),a,2)},e:function(c,a){return Da(c.getDate(),a,2)},H:function(c,a){return Da(c.getHours(),a,2)},I:function(c,a){return Da(c.getHours()%12||12,a,2)},j:function(c,a){return Da(1+aa.dayOfYear(c),a,3)},L:function(c,a){return Da(c.getMilliseconds(),a,3)},m:function(c,a){return Da(c.getMonth()+1,a,2)},M:function(c,a){return Da(c.getMinutes(),a,2)},p:function(c){return b[+(12<=c.getHours())]},S:function(c,a){return Da(c.getSeconds(),
a,2)},U:function(c,a){return Da(aa.sundayOfYear(c),a,2)},w:function(c){return c.getDay()},W:function(c,a){return Da(aa.mondayOfYear(c),a,2)},x:a(k),X:a(q),y:function(c,a){return Da(c.getFullYear()%100,a,2)},Y:function(c,a){return Da(c.getFullYear()%1E4,a,4)},Z:rg,"%":function(){return"%"}},z={a:function(c,a,f){p.lastIndex=0;return(a=p.exec(a.substring(f)))?(c.w=r.get(a[0].toLowerCase()),f+a[0].length):-1},A:function(c,a,f){g.lastIndex=0;return(a=g.exec(a.substring(f)))?(c.w=l.get(a[0].toLowerCase()),
f+a[0].length):-1},b:function(c,a,f){C.lastIndex=0;return(a=C.exec(a.substring(f)))?(c.m=A.get(a[0].toLowerCase()),f+a[0].length):-1},B:function(c,a,f){v.lastIndex=0;return(a=v.exec(a.substring(f)))?(c.m=t.get(a[0].toLowerCase()),f+a[0].length):-1},c:function(c,a,f){return h(c,S.c.toString(),a,f)},d:ge,e:ge,H:he,I:he,j:sg,L:tg,m:ug,M:vg,p:function(c,a,f){a=e.get(a.substring(f,f+=2).toLowerCase());return null==a?-1:(c.p=a,f)},S:wg,U:xg,w:yg,W:zg,x:function(c,a,f){return h(c,S.x.toString(),a,f)},X:function(c,
a,f){return h(c,S.X.toString(),a,f)},y:Ag,Y:Bg,Z:Cg,"%":Dg};return a}function Da(c,a,h){var f=0>c?"-":"";c=(f?-c:c)+"";var k=c.length;return f+(k<h?Array(h-k+1).join(a)+c:c)}function bc(c){return new RegExp("^(?:"+c.map(x.requote).join("|")+")","i")}function cc(c){for(var a=new v,h=-1,n=c.length;++h<n;)a.set(c[h].toLowerCase(),h);return a}function yg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+1)))?(c.w=+a[0],h+a[0].length):-1}function xg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h)))?
(c.U=+a[0],h+a[0].length):-1}function zg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h)))?(c.W=+a[0],h+a[0].length):-1}function Bg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+4)))?(c.y=+a[0],h+a[0].length):-1}function Ag(c,a,h){ta.lastIndex=0;if(a=ta.exec(a.substring(h,h+2))){var f=+a[0];c=(c.y=f+(68<f?1900:2E3),h+a[0].length)}else c=-1;return c}function Cg(c,a,h){return/^[+-]\d{4}$/.test(a=a.substring(h,h+5))?(c.Z=-a,h+5):-1}function ug(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,
h+2)))?(c.m=a[0]-1,h+a[0].length):-1}function ge(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+2)))?(c.d=+a[0],h+a[0].length):-1}function sg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+3)))?(c.j=+a[0],h+a[0].length):-1}function he(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+2)))?(c.H=+a[0],h+a[0].length):-1}function vg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+2)))?(c.M=+a[0],h+a[0].length):-1}function wg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,
h+2)))?(c.S=+a[0],h+a[0].length):-1}function tg(c,a,h){ta.lastIndex=0;return(a=ta.exec(a.substring(h,h+3)))?(c.L=+a[0],h+a[0].length):-1}function rg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var h=~~(ka(a)/60),a=ka(a)%60;return c+Da(h,"0",2)+Da(a,"0",2)}function Dg(c,a,h){ie.lastIndex=0;return(c=ie.exec(a.substring(h,h+1)))?h+c[0].length:-1}function qg(c){for(var a=c.length,h=-1;++h<a;)c[h][0]=this(c[h][0]);return function(a){for(var f=0,h=c[f];!h[1](a);)h=c[++f];return h[0](a)}}function Zc(){}
function je(c,a,h){var f=h.s=c+a,k=f-c;h.t=c-(f-k)+(a-k)}function dc(c,a){if(c&&ke.hasOwnProperty(c.type))ke[c.type](c,a)}function $c(c,a,h){var f=-1;h=c.length-h;var k;for(a.lineStart();++f<h;)k=c[f],a.point(k[0],k[1],k[2]);a.lineEnd()}function le(c,a){var f=-1,n=c.length;for(a.polygonStart();++f<n;)$c(c[f],a,1);a.polygonEnd()}function Eg(){function c(c,a){c*=ia;a=a*ia/2+ja/4;var f=c-n,h=0<=f?1:-1,f=h*f,b=Math.cos(a),w=Math.sin(a),da=q*w;gb.add(Math.atan2(da*h*Math.sin(f),k*b+da*Math.cos(f)));n=
c;k=b;q=w}var a,h,n,k,q;Ea.point=function(f,b){Ea.point=c;n=(a=f)*ia;k=Math.cos(b=(h=b)*ia/2+ja/4);q=Math.sin(b)};Ea.lineEnd=function(){c(a,h)}}function hb(c){var a=c[0];c=c[1];var h=Math.cos(c);return[h*Math.cos(a),h*Math.sin(a),Math.sin(c)]}function ec(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function sb(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function ad(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function fc(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function gc(c){var a=Math.sqrt(c[0]*
c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function hc(c){return[Math.atan2(c[1],c[0]),ma(c[2])]}function ic(c,a){return 1E-6>ka(c[0]-a[0])&&1E-6>ka(c[1]-a[1])}function bd(c,a){c*=ia;var f=Math.cos(a*=ia);Fb(f*Math.cos(c),f*Math.sin(c),Math.sin(a))}function Fb(c,a,h){++Gb;ib+=(c-ib)/Gb;jb+=(a-jb)/Gb;Ua+=(h-Ua)/Gb}function me(){function c(c,f){c*=ia;var k=Math.cos(f*=ia),q=k*Math.cos(c),k=k*Math.sin(c),b=Math.sin(f),U=Math.atan2(Math.sqrt((U=h*b-n*k)*U+(U=n*q-a*b)*U+(U=a*k-h*q)*U),a*q+h*k+n*
b);jc+=U;Ya+=U*(a+(a=q));Za+=U*(h+(h=k));Oa+=U*(n+(n=b));Fb(a,h,n)}var a,h,n;Ka.point=function(f,q){f*=ia;var k=Math.cos(q*=ia);a=k*Math.cos(f);h=k*Math.sin(f);n=Math.sin(q);Ka.point=c;Fb(a,h,n)}}function ne(){Ka.point=bd}function Fg(){function c(c,a){c*=ia;var f=Math.cos(a*=ia),h=f*Math.cos(c),f=f*Math.sin(c),b=Math.sin(a),w=k*b-q*f,da=q*h-n*b,m=n*f-k*h,e=Math.sqrt(w*w+da*da+m*m),g=n*h+k*f+q*b,l=e&&-ba(g)/e,e=Math.atan2(e,g);tb+=l*w;ub+=l*da;$a+=l*m;jc+=e;Ya+=e*(n+(n=h));Za+=e*(k+(k=f));Oa+=e*(q+
(q=b));Fb(n,k,q)}var a,h,n,k,q;Ka.point=function(f,b){a=f;h=b;Ka.point=c;f*=ia;var w=Math.cos(b*=ia);n=w*Math.cos(f);k=w*Math.sin(f);q=Math.sin(b);Fb(n,k,q)};Ka.lineEnd=function(){c(a,h);Ka.lineEnd=ne;Ka.point=bd}}function vb(){return!0}function oe(c,a,h,n,k){var f=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,h=c[0],n=c[a];if(ic(h,n)){k.lineStart();for(n=0;n<a;++n)k.point((h=c[n])[0],h[1]);k.lineEnd()}else a=new kc(h,c,null,!0),h=new kc(h,null,a,!1),a.o=h,f.push(a),b.push(h),a=new kc(n,
c,null,!1),h=new kc(n,null,a,!0),a.o=h,f.push(a),b.push(h)}});b.sort(a);pe(f);pe(b);if(f.length){c=0;a=h;for(h=b.length;c<h;++c)b[c].e=a=!a;a=f[0];for(var w,O;;){for(var U=a,m=!0;U.v;)if((U=U.n)===a)return;w=U.z;k.lineStart();do{U.v=U.o.v=!0;if(U.e){if(m)for(c=0,h=w.length;c<h;++c)k.point((O=w[c])[0],O[1]);else n(U.x,U.n.x,1,k);U=U.n}else{if(m)for(w=U.p.z,c=w.length-1;0<=c;--c)k.point((O=w[c])[0],O[1]);else n(U.x,U.p.x,-1,k);U=U.p}U=U.o;w=U.z;m=!m}while(!U.v);k.lineEnd()}}}function pe(c){if(a=c.length){for(var a,
h=0,n=c[0],k;++h<a;)n.n=k=c[h],k.p=n,n=k;n.n=k=c[0];k.p=n}}function kc(c,a,h,n){this.x=c;this.z=a;this.o=h;this.e=n;this.v=!1;this.n=this.p=null}function qe(c,a,h,n){return function(f,q){function k(a,h){var n=f(a,h);c(a=n[0],h=n[1])&&q.point(a,h)}function b(c,a){var h=f(c,a);l.point(h[0],h[1])}function O(){r.point=b;l.lineStart()}function U(){r.point=k;l.lineEnd()}function m(c,a){z.push([c,a]);var h=f(c,a);C.point(h[0],h[1])}function e(){C.lineStart();z=[]}function g(){m(z[0][0],z[0][1]);C.lineEnd();
var c=C.clean(),a=t.buffer(),f=a.length;z.pop();S.push(z);z=null;if(f)if(c&1){var c=a[0],f=c.length-1,a=-1,h;if(0<f){A||(q.polygonStart(),A=!0);for(q.lineStart();++a<f;)q.point((h=c[a])[0],h[1]);q.lineEnd()}}else 1<f&&c&2&&a.push(a.pop().concat(a.shift())),v.push(a.filter(Gg))}var l=a(q),p=f.invert(n[0],n[1]),r={point:k,lineStart:O,lineEnd:U,polygonStart:function(){r.point=m;r.lineStart=e;r.lineEnd=g;v=[];S=[]},polygonEnd:function(){r.point=k;r.lineStart=O;r.lineEnd=U;v=x.merge(v);var c,a=p;c=S;var f=
a[0],n=a[1],b=[Math.sin(f),-Math.cos(f),0],w=0,da=0;gb.reset();for(var m=0,e=c.length;m<e;++m){var g=c[m],l=g.length;if(l)for(var ua=g[0],t=ua[0],a=ua[1]/2+ja/4,Db=Math.sin(a),C=Math.cos(a),Na=1;;){Na===l&&(Na=0);var a=g[Na],z=a[0],u=a[1]/2+ja/4,H=Math.sin(u),u=Math.cos(u),L=z-t,K=0<=L?1:-1,R=K*L,V=R>ja,Db=Db*H;gb.add(Math.atan2(Db*K*Math.sin(R),C*u+Db*Math.cos(R)));w+=V?L+K*Fa:L;V^t>=f^z>=f&&(ua=sb(hb(ua),hb(a)),gc(ua),t=sb(b,ua),gc(t),t=(V^0<=L?-1:1)*ma(t[2]),n>t||n===t&&(ua[0]||ua[1]))&&(da+=V^
0<=L?1:-1);if(!Na++)break;t=z;Db=H;C=u;ua=a}}c=(-1E-6>w||1E-6>w&&0>gb)^da&1;v.length?(A||(q.polygonStart(),A=!0),oe(v,Hg,c,h,q)):c&&(A||(q.polygonStart(),A=!0),q.lineStart(),h(null,null,1,q),q.lineEnd());A&&(q.polygonEnd(),A=!1);v=S=null},sphere:function(){q.polygonStart();q.lineStart();h(null,null,1,q);q.lineEnd();q.polygonEnd()}},v,t=re(),C=a(t),A=!1,S,z;return r}}function Gg(c){return 1<c.length}function re(){var c=[],a;return{lineStart:function(){c.push(a=[])},point:function(c,f){a.push([c,f])},
lineEnd:B,buffer:function(){var f=c;c=[];a=null;return f},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Hg(c,a){return(0>(c=c.x)[0]?c[1]-ya-1E-6:ya-c[1])-(0>(a=a.x)[0]?a[1]-ya-1E-6:ya-a[1])}function Ig(c){function a(c,a){return Math.cos(c)*Math.cos(a)>k}function h(c,a,f){var h=hb(c),n=hb(a),q=[1,0,0],n=sb(h,n),b=ec(n,n),h=n[0],w=b-h*h;if(!w)return!f&&c;b=k*b/w;w=-k*h/w;h=sb(q,n);q=fc(q,b);n=fc(n,w);ad(q,n);n=ec(q,h);b=ec(h,h);w=n*n-b*(ec(q,q)-1);if(!(0>w)){var O=Math.sqrt(w),
w=fc(h,(-n-O)/b);ad(w,q);w=hc(w);if(!f)return w;f=c[0];var da=a[0];c=c[1];a=a[1];var U;da<f&&(U=f,f=da,da=U);var m=da-f,e=1E-6>ka(m-ja);!e&&a<c&&(U=c,c=a,a=U);if(e||1E-6>m?e?0<c+a^w[1]<(1E-6>ka(w[0]-f)?c:a):c<=w[1]&&w[1]<=a:m>ja^(f<=w[0]&&w[0]<=da))return a=fc(h,(-n+O)/b),ad(a,q),[w,hc(a)]}}function n(a,f){var h=q?c:ja-c,n=0;a<-h?n|=1:a>h&&(n|=2);f<-h?n|=4:f>h&&(n|=8);return n}var k=Math.cos(c),q=0<k,b=1E-6<ka(k),w=cd(c,6*ia);return qe(a,function(c){var f,k,w,O,da;return{lineStart:function(){O=w=
!1;da=1},point:function(U,m){var e=[U,m],g,l=a(U,m),p=q?l?0:n(U,m):l?n(U+(0>U?ja:-ja),m):0;!f&&(O=w=l)&&c.lineStart();l!==w&&(g=h(f,e),ic(f,g)||ic(e,g))&&(e[0]+=1E-6,e[1]+=1E-6,l=a(e[0],e[1]));if(l!==w)da=0,l?(c.lineStart(),g=h(e,f),c.point(g[0],g[1])):(g=h(f,e),c.point(g[0],g[1]),c.lineEnd()),f=g;else if(b&&f&&q^l){var ua;p&k||!(ua=h(e,f,!0))||(da=0,q?(c.lineStart(),c.point(ua[0][0],ua[0][1]),c.point(ua[1][0],ua[1][1]),c.lineEnd()):(c.point(ua[1][0],ua[1][1]),c.lineEnd(),c.lineStart(),c.point(ua[0][0],
ua[0][1])))}!l||f&&ic(f,e)||c.point(e[0],e[1]);f=e;w=l;k=p},lineEnd:function(){w&&c.lineEnd();f=null},clean:function(){return da|(O&&w)<<1}}},w,q?[0,-c]:[-ja,c-ja])}function se(c,a,h,n){return function(f){var k=f.a,b=f.b,w=k.x,k=k.y,O=0,U=1,m=b.x-w,b=b.y-k,e;e=c-w;if(m||!(0<e)){e/=m;if(0>m){if(e<O)return;e<U&&(U=e)}else if(0<m){if(e>U)return;e>O&&(O=e)}e=h-w;if(m||!(0>e)){e/=m;if(0>m){if(e>U)return;e>O&&(O=e)}else if(0<m){if(e<O)return;e<U&&(U=e)}e=a-k;if(b||!(0<e)){e/=b;if(0>b){if(e<O)return;e<U&&
(U=e)}else if(0<b){if(e>U)return;e>O&&(O=e)}e=n-k;if(b||!(0>e)){e/=b;if(0>b){if(e>U)return;e>O&&(O=e)}else if(0<b){if(e<O)return;e<U&&(U=e)}0<O&&(f.a={x:w+O*m,y:k+O*b});1>U&&(f.b={x:w+U*m,y:k+U*b});return f}}}}}}function te(c,a,h,n){function f(f,n){return 1E-6>ka(f[0]-c)?0<n?0:3:1E-6>ka(f[0]-h)?0<n?2:1:1E-6>ka(f[1]-a)?0<n?1:0:0<n?3:2}function q(c,a){return b(c.x,a.x)}function b(c,a){var h=f(c,1),n=f(a,1);return h!==n?h-n:0===h?a[1]-c[1]:1===h?c[0]-a[0]:2===h?c[1]-a[1]:a[0]-c[0]}return function(k){function w(k,
q,w,O){var da=0,U=0;if(null==k||(da=f(k,w))!==(U=f(q,w))||0>b(k,q)^0<w){do O.point(0===da||3===da?c:h,1<da?n:a);while((da=(da+w+4)%4)!==U)}else O.point(q[0],q[1])}function da(f,q){c<=f&&f<=h&&a<=q&&q<=n&&k.point(f,q)}function m(f,q){f=Math.max(-1E9,Math.min(1E9,f));q=Math.max(-1E9,Math.min(1E9,q));var b=c<=f&&f<=h&&a<=q&&q<=n;r&&v.push([f,q]);if(H)C=f,A=q,z=b,H=!1,b&&(k.lineStart(),k.point(f,q));else if(b&&L)k.point(f,q);else{var w={a:{x:S,y:u},b:{x:f,y:q}};l(w)?(L||(k.lineStart(),k.point(w.a.x,w.a.y)),
k.point(w.b.x,w.b.y),b||k.lineEnd(),K=!1):b&&(k.lineStart(),k.point(f,q),K=!1)}S=f;u=q;L=b}var e=k,g=re(),l=se(c,a,h,n),p,r,v,t={point:da,lineStart:function(){t.point=m;r&&r.push(v=[]);H=!0;L=!1;S=u=NaN},lineEnd:function(){p&&(m(C,A),z&&L&&g.rejoin(),p.push(g.buffer()));t.point=da;L&&k.lineEnd()},polygonStart:function(){k=g;p=[];r=[];K=!0},polygonEnd:function(){k=e;p=x.merge(p);var a;a=[c,n];for(var f=0,h=r.length,b=a[1],O=0;O<h;++O)for(var da=1,U=r[O],m=U.length,g=U[0],l;da<m;++da)l=U[da],g[1]<=
b?l[1]>b&&0<ga(g,l,a)&&++f:l[1]<=b&&0>ga(g,l,a)&&--f,g=l;a=0!==f;f=K&&a;h=p.length;if(f||h)k.polygonStart(),f&&(k.lineStart(),w(null,null,1,k),k.lineEnd()),h&&oe(p,q,a,w,k),k.polygonEnd();p=r=v=null}},C,A,z,S,u,L,H,K;return t}}function ue(c,a){function f(f,h){return f=c(f,h),a(f[0],f[1])}c.invert&&a.invert&&(f.invert=function(f,h){return f=a.invert(f,h),f&&c.invert(f[0],f[1])});return f}function dd(c){var a=0,h=ja/3,n=ed(c);c=n(a,h);c.parallels=function(c){return arguments.length?n(a=c[0]*ja/180,
h=c[1]*ja/180):[a/ja*180,h/ja*180]};return c}function ve(c,a){function f(c,a){var f=Math.sqrt(q-2*k*Math.sin(a))/k;return[f*Math.sin(c*=k),b-f*Math.cos(c)]}var n=Math.sin(c),k=(n+Math.sin(a))/2,q=1+n*(2*k-n),b=Math.sqrt(q)/k;f.invert=function(c,a){var f=b-a;return[Math.atan2(c,f)/k,ma((q-(c*c+f*f)*k*k)/(2*k))]};return f}function Jg(){function c(c,a){fd+=k*c-n*a;n=c;k=a}var a,h,n,k;ab.point=function(f,b){ab.point=c;a=n=f;h=k=b};ab.lineEnd=function(){c(a,h)}}function Kg(){function c(c,a){b.push("M",
c,",",a,q)}function a(c,a){b.push("M",c,",",a);w.point=h}function h(c,a){b.push("L",c,",",a)}function n(){w.point=c}function k(){b.push("Z")}var q=we(4.5),b=[],w={point:c,lineStart:function(){w.point=a},lineEnd:n,polygonStart:function(){w.lineEnd=k},polygonEnd:function(){w.lineEnd=n;w.point=c},pointRadius:function(c){q=we(c);return w},result:function(){if(b.length){var c=b.join("");b=[];return c}}};return w}function we(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}
function kb(c,a){ib+=c;jb+=a;++Ua}function xe(){function c(c,f){var n=c-a,k=f-h,n=Math.sqrt(n*n+k*k);Ya+=n*(a+c)/2;Za+=n*(h+f)/2;Oa+=n;kb(a=c,h=f)}var a,h;La.point=function(f,k){La.point=c;kb(a=f,h=k)}}function ye(){La.point=kb}function Lg(){function c(c,a){var f=c-n,h=a-k,f=Math.sqrt(f*f+h*h);Ya+=f*(n+c)/2;Za+=f*(k+a)/2;Oa+=f;f=k*c-n*a;tb+=f*(n+c);ub+=f*(k+a);$a+=3*f;kb(n=c,k=a)}var a,h,n,k;La.point=function(f,b){La.point=c;kb(a=n=f,h=k=b)};La.lineEnd=function(){c(a,h)}}function Mg(c){function a(a,
f){c.moveTo(a,f);c.arc(a,f,b,0,Fa)}function h(a,f){c.moveTo(a,f);w.point=n}function n(a,f){c.lineTo(a,f)}function k(){w.point=a}function q(){c.closePath()}var b=4.5,w={point:a,lineStart:function(){w.point=h},lineEnd:k,polygonStart:function(){w.lineEnd=q},polygonEnd:function(){w.lineEnd=k;w.point=a},pointRadius:function(c){b=c;return w},result:B};return w}function ze(c){function a(c){return(w?n:h)(c)}function h(a){return Ae(a,function(f,h){f=c(f,h);a.point(f[0],f[1])})}function n(a){function f(f,h){f=
c(f,h);a.point(f[0],f[1])}function h(){t=NaN;u.point=n;a.lineStart()}function n(f,h){var n=hb([f,h]),q=c(f,h);k(t,C,v,A,z,S,t=q[0],C=q[1],v=f,A=n[0],z=n[1],S=n[2],w,a);a.point(t,C)}function q(){u.point=f;a.lineEnd()}function b(){h();u.point=da;u.lineEnd=O}function da(c,a){n(m=c,a);e=t;g=C;l=A;p=z;r=S;u.point=n}function O(){k(t,C,v,A,z,S,e,g,m,l,p,r,w,a);u.lineEnd=q;q()}var m,e,g,l,p,r,v,t,C,A,z,S,u={point:f,lineStart:h,lineEnd:q,polygonStart:function(){a.polygonStart();u.lineStart=b},polygonEnd:function(){a.polygonEnd();
u.lineStart=h}};return u}function k(a,f,h,n,w,da,m,e,g,l,p,r,v,t){var O=m-a,U=e-f,ua=O*O+U*U;if(ua>4*q&&v--){var C=n+l,A=w+p,z=da+r,S=Math.sqrt(C*C+A*A+z*z),u=Math.asin(z/=S),Na=1E-6>ka(ka(z)-1)||1E-6>ka(h-g)?(h+g)/2:Math.atan2(A,C),L=c(Na,u),u=L[0],L=L[1],x=u-a,H=L-f,K=U*x-O*H;if(K*K/ua>q||.3<ka((O*x+U*H)/ua-.5)||n*l+w*p+da*r<b)k(a,f,h,n,w,da,u,L,Na,C/=S,A/=S,z,v,t),t.point(u,L),k(u,L,Na,C,A,z,m,e,g,l,p,r,v,t)}}var q=.5,b=Math.cos(30*ia),w=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(q);
w=0<(q=c*c)&&16;return a};return a}function Ng(c){var a=ze(function(a,f){return c([a*ra,f*ra])});return function(c){return Be(a(c))}}function Ce(c){this.stream=c}function Ae(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function bb(c){return ed(function(){return c})()}function ed(c){function a(c){c=w(c[0]*ia,c[1]*ia);return[c[0]*U+t,C-c[1]*U]}function h(c){return(c=
w.invert((c[0]-t)/U,(C-c[1])/U))&&[c[0]*ra,c[1]*ra]}function n(){w=ue(b=gd(p,r,v),q);var c=q(g,l);t=m-c[0]*U;C=e+c[1]*U;return k()}function k(){L&&(L.valid=!1,L=null);return a}var q,b,w,O=ze(function(c,a){c=q(c,a);return[c[0]*U+t,C-c[1]*U]}),U=150,m=480,e=250,g=0,l=0,p=0,r=0,v=0,t,C,z=De,A=xa,S=null,u=null,L;a.stream=function(c){L&&(L.valid=!1);L=Be(z(b,O(A(c))));L.valid=!0;return L};a.clipAngle=function(c){if(!arguments.length)return S;z=null==c?(S=c,De):Ig((S=+c)*ia);return k()};a.clipExtent=function(c){if(!arguments.length)return u;
A=(u=c)?te(c[0][0],c[0][1],c[1][0],c[1][1]):xa;return k()};a.scale=function(c){if(!arguments.length)return U;U=+c;return n()};a.translate=function(c){if(!arguments.length)return[m,e];m=+c[0];e=+c[1];return n()};a.center=function(c){if(!arguments.length)return[g*ra,l*ra];g=c[0]%360*ia;l=c[1]%360*ia;return n()};a.rotate=function(c){if(!arguments.length)return[p*ra,r*ra,v*ra];p=c[0]%360*ia;r=c[1]%360*ia;v=2<c.length?c[2]%360*ia:0;return n()};x.rebind(a,O,"precision");return function(){q=c.apply(this,
arguments);a.invert=q.invert&&h;return n()}}function Be(c){return Ae(c,function(a,h){c.point(a*ia,h*ia)})}function Hb(c,a){return[c,a]}function Ee(c,a){return[c>ja?c-Fa:c<-ja?c+Fa:c,a]}function gd(c,a,h){return c?a||h?ue(Fe(c),Ge(a,h)):Fe(c):a||h?Ge(a,h):Ee}function He(c){return function(a,h){return a+=c,[a>ja?a-Fa:a<-ja?a+Fa:a,h]}}function Fe(c){var a=He(c);a.invert=He(-c);return a}function Ge(c,a){function f(c,a){var f=Math.cos(a),h=Math.cos(c)*f,f=Math.sin(c)*f,w=Math.sin(a),da=w*n+h*k;return[Math.atan2(f*
q-da*b,h*n-w*k),ma(da*q+f*b)]}var n=Math.cos(c),k=Math.sin(c),q=Math.cos(a),b=Math.sin(a);f.invert=function(c,a){var f=Math.cos(a),h=Math.cos(c)*f,f=Math.sin(c)*f,w=Math.sin(a),da=w*q-f*b;return[Math.atan2(f*q+w*b,h*n+da*k),ma(da*n-h*k)]};return f}function cd(c,a){var f=Math.cos(c),n=Math.sin(c);return function(h,q,b,w){var k=b*a;if(null!=h){if(h=Ie(f,h),q=Ie(f,q),0<b?h<q:h>q)h+=b*Fa}else h=c+b*Fa,q=c-.5*k;for(var da;0<b?h>q:h<q;h-=k)w.point((da=hc([f,-n*Math.cos(h),-n*Math.sin(h)]))[0],da[1])}}function Ie(c,
a){var f=hb(a);f[0]-=c;gc(f);var n=ba(-f[1]);return((0>-f[2]?-n:n)+2*Math.PI-1E-6)%(2*Math.PI)}function Je(c,a,h){var f=x.range(c,a-1E-6,h).concat(a);return function(c){return f.map(function(a){return[c,a]})}}function Ke(c,a,h){var f=x.range(c,a-1E-6,h).concat(a);return function(c){return f.map(function(a){return[a,c]})}}function hd(c){return c.source}function id(c){return c.target}function Og(c,a,h,n){var f=Math.cos(a),q=Math.sin(a),b=Math.cos(n),w=Math.sin(n),O=f*Math.cos(c),U=f*Math.sin(c),m=b*
Math.cos(h),e=b*Math.sin(h),g=2*Math.asin(Math.sqrt(sa(n-a)+f*b*sa(h-c))),l=1/Math.sin(g);h=g?function(c){var a=Math.sin(c*=g)*l;c=Math.sin(g-c)*l;var f=c*O+a*m,h=c*U+a*e;return[Math.atan2(h,f)*ra,Math.atan2(c*q+a*w,Math.sqrt(f*f+h*h))*ra]}:function(){return[c*ra,a*ra]};h.distance=g;return h}function Ib(c,a){function f(a,f){var h=Math.cos(f),n=c(Math.cos(a)*h);return[n*h*Math.sin(a),n*Math.sin(f)]}f.invert=function(c,f){var h=Math.sqrt(c*c+f*f),n=a(h),k=Math.sin(n);return[Math.atan2(c*k,h*Math.cos(n)),
Math.asin(h&&f*k/h)]};return f}function Le(c,a){function f(c,a){0<q?a<-ya+1E-6&&(a=-ya+1E-6):a>ya-1E-6&&(a=ya-1E-6);var f=q/Math.pow(Math.tan(ja/4+a/2),k);return[f*Math.sin(k*c),q-f*Math.cos(k*c)]}var n=Math.cos(c),k=c===a?Math.sin(c):Math.log(n/Math.cos(a))/Math.log(Math.tan(ja/4+a/2)/Math.tan(ja/4+c/2)),q=n*Math.pow(Math.tan(ja/4+c/2),k)/k;if(!k)return lc;f.invert=function(c,a){var f=q-a;return[Math.atan2(c,f)/k,2*Math.atan(Math.pow(q/((0<k?1:0>k?-1:0)*Math.sqrt(c*c+f*f)),1/k))-ya]};return f}function Me(c,
a){function f(c,a){var f=q-a;return[f*Math.sin(k*c),q-f*Math.cos(k*c)]}var n=Math.cos(c),k=c===a?Math.sin(c):(n-Math.cos(a))/(a-c),q=n/k+c;if(1E-6>ka(k))return Hb;f.invert=function(c,a){var f=q-a;return[Math.atan2(c,f)/k,q-(0<k?1:0>k?-1:0)*Math.sqrt(c*c+f*f)]};return f}function lc(c,a){return[c,Math.log(Math.tan(ja/4+a/2))]}function Ne(c){var a=bb(c),h=a.scale,n=a.translate,k=a.clipExtent,q;a.scale=function(){var c=h.apply(a,arguments);return c===a?q?a.clipExtent(null):a:c};a.translate=function(){var c=
n.apply(a,arguments);return c===a?q?a.clipExtent(null):a:c};a.clipExtent=function(c){var f=k.apply(a,arguments);if(f===a){if(q=null==c){var b=ja*h(),da=n();k([[da[0]-b,da[1]-b],[da[0]+b,da[1]+b]])}}else q&&(f=null);return f};return a.clipExtent(null)}function jd(c,a){return[Math.log(Math.tan(ja/4+a/2)),-c]}function wb(c){return c[0]}function Jb(c){return c[1]}function Oe(c){for(var a=c.length,h=[0,1],n=2,k=2;k<a;k++){for(;1<n&&0>=ga(c[h[n-2]],c[h[n-1]],c[k]);)--n;h[n++]=k}return h.slice(0,n)}function Pg(c,
a){return c[0]-a[0]||c[1]-a[1]}function kd(c,a,h){return(h[0]-a[0])*(c[1]-a[1])<(h[1]-a[1])*(c[0]-a[0])}function Pe(c,a,h,n){var f=c[0],q=h[0],b=a[0]-f,w=n[0]-q;c=c[1];h=h[1];a=a[1]-c;n=n[1]-h;q=(w*(c-h)-n*(f-q))/(n*b-w*a);return[f+q*b,c+q*a]}function Qe(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Qg(){mc(this);this.edge=this.site=this.circle=null}function Re(c){var a=Se.pop()||new Qg;a.site=c;return a}function ld(c){xb(c);yb.remove(c);Se.push(c);mc(c)}function Te(c,a){var f=
c.site,n=f.x,k=f.y,q=k-a;if(!q)return n;var b=c.P;if(!b)return-Infinity;var f=b.site,b=f.x,f=f.y,w=f-a;if(!w)return b;var O=b-n,U=1/q-1/w,m=O/w;return U?(-m+Math.sqrt(m*m-2*U*(O*O/(-2*w)-f+w/2+k-q/2)))/U+n:(n+b)/2}function Ue(c){this.site=c;this.edges=[]}function Ve(c,a){return a.angle-c.angle}function Rg(){mc(this);this.x=this.y=this.arc=this.site=this.cy=null}function zb(c){var a=c.P,h=c.N;if(a&&h){var n=a.site,a=c.site,k=h.site;if(n!==k){var h=a.x,q=a.y,b=n.x-h,w=n.y-q,n=k.x-h,k=k.y-q,O=2*(b*k-
w*n);if(!(-1E-12<=O)){var m=b*b+w*w,e=n*n+k*k,w=(k*m-w*e)/O,b=(b*e-n*m)/O,k=b+q,q=We.pop()||new Rg;q.arc=c;q.site=a;q.x=w+h;q.y=k+Math.sqrt(w*w+b*b);q.cy=k;c.circle=q;c=null;for(a=Kb._;a;)if(q.y<a.y||q.y===a.y&&q.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Kb.insert(c,q);c||(md=q)}}}}function xb(c){var a=c.circle;a&&(a.P||(md=a.N),Kb.remove(a),We.push(a),mc(a),c.circle=null)}function Sg(c,a){var f=c.b;if(f)return!0;var n=c.a,f=a[0][0],k=a[1][0],q=a[0][1],b=a[1][1],w=c.l,
O=c.r,m=w.x,w=w.y,e=O.x,O=O.y,g=(m+e)/2,l;if(O===w){if(g<f||g>=k)return;if(m>e){if(!n)n={x:g,y:q};else if(n.y>=b)return;f={x:g,y:b}}else{if(!n)n={x:g,y:b};else if(n.y<q)return;f={x:g,y:q}}}else if(l=(m-e)/(O-w),g=(w+O)/2-l*g,-1>l||1<l)if(m>e){if(!n)n={x:(q-g)/l,y:q};else if(n.y>=b)return;f={x:(b-g)/l,y:b}}else{if(!n)n={x:(b-g)/l,y:b};else if(n.y<q)return;f={x:(q-g)/l,y:q}}else if(w<O){if(!n)n={x:f,y:l*f+g};else if(n.x>=k)return;f={x:k,y:l*k+g}}else{if(!n)n={x:k,y:l*k+g};else if(n.x<f)return;f={x:f,
y:l*f+g}}c.a=n;c.b=f;return!0}function Xe(c,a){this.l=c;this.r=a;this.a=this.b=null}function Lb(c,a,h,n){var f=new Xe(c,a);Ab.push(f);h&&nc(f,c,a,h);n&&nc(f,a,c,n);lb[c.i].edges.push(new oc(f,c,a));lb[a.i].edges.push(new oc(f,a,c));return f}function Tg(c,a,h){c=new Xe(c,null);c.a=a;c.b=h;Ab.push(c);return c}function nc(c,a,h,n){c.a||c.b?c.l===h?c.b=n:c.a=n:(c.a=n,c.l=a,c.r=h)}function oc(c,a,h){var f=c.a,k=c.b;this.edge=c;this.site=a;this.angle=h?Math.atan2(h.y-a.y,h.x-a.x):c.l===a?Math.atan2(k.x-
f.x,f.y-k.y):Math.atan2(f.x-k.x,k.y-f.y)}function nd(){this._=null}function mc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Mb(c,a){var f=a.R,n=a.U;n?n.L===a?n.L=f:n.R=f:c._=f;f.U=n;a.U=f;a.R=f.L;a.R&&(a.R.U=a);f.L=a}function Nb(c,a){var f=a.L,n=a.U;n?n.L===a?n.L=f:n.R=f:c._=f;f.U=n;a.U=f;a.L=f.R;a.L&&(a.L.U=a);f.R=a}function Ye(c){for(;c.L;)c=c.L;return c}function od(c,a){var f=c.sort(Ug).pop(),n,k,q;Ab=[];lb=Array(c.length);yb=new nd;for(Kb=new nd;;)if(q=md,f&&(!q||f.y<q.y||f.y===q.y&&f.x<q.x)){if(f.x!==
n||f.y!==k){lb[f.i]=new Ue(f);var b,w;k=n=void 0;q=f;for(var O=q.x,m=q.y,e=yb._;e;)if(w=Te(e,m)-O,1E-6<w)e=e.L;else{var g=e;b=m;var l=g.N;l?b=Te(l,b):(g=g.site,b=g.y===b?g.x:Infinity);b=O-b;if(1E-6<b){if(!e.R){k=e;break}e=e.R}else{-1E-6<w?(k=e.P,n=e):-1E-6<b?(k=e,n=e.N):k=n=e;break}}w=Re(q);yb.insert(k,w);if(k||n)if(k===n)xb(k),n=Re(k.site),yb.insert(w,n),w.edge=n.edge=Lb(k.site,w.site),zb(k),zb(n);else if(n){xb(k);xb(n);O=k.site;e=O.x;b=O.y;var g=q.x-e,l=q.y-b,m=n.site,p=m.x-e,r=m.y-b,t=2*(g*r-l*
p),v=g*g+l*l,C=p*p+r*r,e={x:(r*v-l*C)/t+e,y:(g*C-p*v)/t+b};nc(n.edge,O,m,e);w.edge=Lb(O,q,null,e);n.edge=Lb(q,m,null,e);zb(k);zb(n)}else w.edge=Lb(k.site,w.site);n=f.x;k=f.y}f=c.pop()}else if(q){m=q.arc;q=m.circle;O=q.x;e=q.cy;q={x:O,y:e};g=m.P;b=m.N;w=[m];ld(m);for(m=g;m.circle&&1E-6>ka(O-m.circle.x)&&1E-6>ka(e-m.circle.cy);)g=m.P,w.unshift(m),ld(m),m=g;w.unshift(m);xb(m);for(g=b;g.circle&&1E-6>ka(O-g.circle.x)&&1E-6>ka(e-g.circle.cy);)b=g.N,w.push(g),ld(g),g=b;w.push(g);xb(g);e=w.length;for(O=1;O<
e;++O)g=w[O],m=w[O-1],nc(g.edge,m.site,g.site,q);m=w[0];g=w[e-1];g.edge=Lb(m.site,g.site,null,q);zb(m);zb(g)}else break;if(a){f=Ab;n=se(a[0][0],a[0][1],a[1][0],a[1][1]);for(k=f.length;k--;)if(q=f[k],!Sg(q,a)||!n(q)||1E-6>ka(q.a.x-q.b.x)&&1E-6>ka(q.a.y-q.b.y))q.a=q.b=null,f.splice(k,1);f=a[0][0];n=a[1][0];k=a[0][1];q=a[1][1];e=lb;for(b=e.length;b--;)if((g=e[b])&&g.prepare())for(p=g.edges,r=p.length,l=0;l<r;)if(t=p[l].end(),O=t.x,m=t.y,v=p[++l%r].start(),w=v.x,v=v.y,1E-6<ka(O-w)||1E-6<ka(m-v))p.splice(l,
0,new oc(Tg(g.site,t,1E-6>ka(O-f)&&1E-6<q-m?{x:f,y:1E-6>ka(w-f)?v:q}:1E-6>ka(m-q)&&1E-6<n-O?{x:1E-6>ka(v-q)?w:n,y:q}:1E-6>ka(O-n)&&1E-6<m-k?{x:n,y:1E-6>ka(w-n)?v:k}:1E-6>ka(m-k)&&1E-6<O-f?{x:1E-6>ka(v-k)?w:f,y:k}:null),g.site,null)),++r}f={cells:lb,edges:Ab};yb=Kb=Ab=lb=null;return f}function Ug(c,a){return a.y-c.y||a.x-c.x}function Vg(c){return c.x}function Wg(c){return c.y}function Ze(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(c,a,h,n,k,q){if(!c(a,h,n,k,q)){var f=.5*(h+k),b=
.5*(n+q);a=a.nodes;a[0]&&Ob(c,a[0],h,n,f,b);a[1]&&Ob(c,a[1],f,n,k,b);a[2]&&Ob(c,a[2],h,b,f,q);a[3]&&Ob(c,a[3],f,b,k,q)}}function pd(c,a){c=x.rgb(c);a=x.rgb(a);var f=c.r,n=c.g,k=c.b,q=a.r-f,b=a.g-n,w=a.b-k;return function(c){return"#"+rb(Math.round(f+q*c))+rb(Math.round(n+b*c))+rb(Math.round(k+w*c))}}function $e(c,a){var f={},n={},k;for(k in c)k in a?f[k]=mb(c[k],a[k]):n[k]=c[k];for(k in a)k in c||(n[k]=a[k]);return function(c){for(k in f)n[k]=f[k](c);return n}}function Va(c,a){a-=c=+c;return function(f){return c+
a*f}}function af(c,a){var f=qd.lastIndex=rd.lastIndex=0,n,k,b,m=-1,w=[],O=[];c+="";for(a+="";(n=qd.exec(c))&&(k=rd.exec(a));)(b=k.index)>f&&(b=a.substring(f,b),w[m]?w[m]+=b:w[++m]=b),(n=n[0])===(k=k[0])?w[m]?w[m]+=k:w[++m]=k:(w[++m]=null,O.push({i:m,x:Va(n,k)})),f=rd.lastIndex;f<a.length&&(b=a.substring(f),w[m]?w[m]+=b:w[++m]=b);return 2>w.length?O[0]?(a=O[0].x,function(c){return a(c)+""}):function(){return a}:(a=O.length,function(c){for(var f=0,h;f<a;++f)w[(h=O[f]).i]=h.x(c);return w.join("")})}
function mb(c,a){for(var f=x.interpolators.length,n;0<=--f&&!(n=x.interpolators[f](c,a)););return n}function pc(c,a){var f=[],n=[],k=c.length,b=a.length,m=Math.min(c.length,a.length),w;for(w=0;w<m;++w)f.push(mb(c[w],a[w]));for(;w<k;++w)n[w]=c[w];for(;w<b;++w)n[w]=a[w];return function(c){for(w=0;w<m;++w)n[w]=f[w](c);return n}}function Xg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function bf(c){return function(a){return 1-c(1-a)}}function cf(c){return function(a){return.5*(.5>a?c(2*a):2-c(2-
2*a))}}function Yg(c){return c*c}function Zg(c){return c*c*c}function $g(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,h=a*c;return 4*(.5>c?h:3*(c-a)+h-.75)}function ah(c){return 1-Math.cos(c*ya)}function bh(c){return Math.pow(2,10*(c-1))}function ch(c){return 1-Math.sqrt(1-c*c)}function dh(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function df(c,a){a-=c;return function(f){return Math.round(c+a*f)}}function ef(c){var a=
[c.a,c.b],h=[c.c,c.d],n=ff(a),k=a[0]*h[0]+a[1]*h[1],b=-k;h[0]+=b*a[0];h[1]+=b*a[1];b=ff(h)||0;a[0]*h[1]<h[0]*a[1]&&(a[0]*=-1,a[1]*=-1,n*=-1,k*=-1);this.rotate=(n?Math.atan2(a[1],a[0]):Math.atan2(-h[0],h[1]))*ra;this.translate=[c.e,c.f];this.scale=[n,b];this.skew=b?Math.atan2(k,b)*ra:0}function ff(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function gf(c,a){var f=[],n=[],k,b=x.transform(c),m=x.transform(a),w=b.translate,O=m.translate,e=b.rotate,g=m.rotate,l=b.skew,p=m.skew,
b=b.scale,m=m.scale;w[0]!=O[0]||w[1]!=O[1]?(f.push("translate(",null,",",null,")"),n.push({i:1,x:Va(w[0],O[0])},{i:3,x:Va(w[1],O[1])})):O[0]||O[1]?f.push("translate("+O+")"):f.push("");e!=g?(180<e-g?g+=360:180<g-e&&(e+=360),n.push({i:f.push(f.pop()+"rotate(",null,")")-2,x:Va(e,g)})):g&&f.push(f.pop()+"rotate("+g+")");l!=p?n.push({i:f.push(f.pop()+"skewX(",null,")")-2,x:Va(l,p)}):p&&f.push(f.pop()+"skewX("+p+")");b[0]!=m[0]||b[1]!=m[1]?(k=f.push(f.pop()+"scale(",null,",",null,")"),n.push({i:k-4,x:Va(b[0],
m[0])},{i:k-2,x:Va(b[1],m[1])})):1==m[0]&&1==m[1]||f.push(f.pop()+"scale("+m+")");k=n.length;return function(c){for(var a=-1,h;++a<k;)f[(h=n[a]).i]=h.x(c);return f.join("")}}function eh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return(f-c)*a}}function fh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return Math.max(0,Math.min(1,(f-c)*a))}}function gh(c){var a=c.source;c=c.target;var h;var n=c;if(a===n)h=a;else{h=hf(a);for(var n=hf(n),k=h.pop(),b=n.pop(),m=null;k===b;)m=k,k=h.pop(),b=n.pop();h=m}for(n=
[a];a!==h;)a=a.parent,n.push(a);for(a=n.length;c!==h;)n.splice(a,0,c),c=c.parent;return n}function hf(c){for(var a=[],h=c.parent;null!=h;)a.push(c),c=h,h=h.parent;a.push(c);return a}function hh(c){c.fixed|=2}function ih(c){c.fixed&=-7}function jh(c){c.fixed|=4;c.px=c.x;c.py=c.y}function kh(c){c.fixed&=-5}function jf(c,a,h){var f=0,k=0;c.charge=0;if(!c.leaf)for(var b=c.nodes,m=b.length,w=-1,e;++w<m;)e=b[w],null!=e&&(jf(e,a,h),c.charge+=e.charge,f+=e.charge*e.cx,k+=e.charge*e.cy);c.point&&(c.leaf||
(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=h[c.point.index],c.charge+=c.pointCharge=a,f+=a*c.point.x,k+=a*c.point.y);c.cx=f/c.charge;c.cy=k/c.charge}function Pb(c,a){x.rebind(c,a,"sort","children","value");c.nodes=c;c.links=lh;return c}function Qb(c,a){for(var f=[c];null!=(c=f.pop());)if(a(c),(b=c.children)&&(n=b.length))for(var n,b;0<=--n;)f.push(b[n])}function Pa(c,a){for(var f=[c],n=[];null!=(c=f.pop());)if(n.push(c),(m=c.children)&&(q=m.length))for(var b=-1,q,m;++b<q;)f.push(m[b]);
for(;null!=(c=n.pop());)a(c)}function mh(c){return c.children}function nh(c){return c.value}function oh(c,a){return a.value-c.value}function lh(c){return x.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function ph(c){return c.x}function qh(c){return c.y}function rh(c,a,h){c.y0=a;c.y=h}function sd(c){return x.range(c.length)}function td(c){var a=-1;c=c[0].length;for(var h=[];++a<c;)h[a]=0;return h}function sh(c){for(var a=1,h=0,n=c[0][1],b,q=c.length;a<
q;++a)(b=c[a][1])>n&&(h=a,n=b);return h}function th(c){return c.reduce(uh,0)}function uh(c,a){return c+a[1]}function vh(c,a){return kf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function kf(c,a){for(var f=-1,n=+c[0],b=(c[1]-n)/a,q=[];++f<=a;)q[f]=b*f+n;return q}function wh(c){return[x.min(c),x.max(c)]}function xh(c,a){return c.value-a.value}function ud(c,a){var f=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=f;f._pack_prev=a}function lf(c,a){c._pack_next=a;a._pack_prev=c}function mf(c,
a){var f=a.x-c.x,n=a.y-c.y,b=c.r+a.r;return.999*b*b>f*f+n*n}function nf(c){function a(c){n=Math.min(c.x-c.r,n);b=Math.max(c.x+c.r,b);q=Math.min(c.y-c.r,q);m=Math.max(c.y+c.r,m)}if((h=c.children)&&(v=h.length)){var h,n=Infinity,b=-Infinity,q=Infinity,m=-Infinity,w,e,g,l,p,r,v;h.forEach(yh);w=h[0];w.x=-w.r;w.y=0;a(w);if(1<v&&(e=h[1],e.x=e.r,e.y=0,a(e),2<v))for(g=h[2],of(w,e,g),a(g),ud(w,g),w._pack_prev=g,ud(g,e),e=w._pack_next,l=3;l<v;l++){of(w,e,g=h[l]);var t=0,C=1,z=1;for(p=e._pack_next;p!==e;p=p._pack_next,
C++)if(mf(p,g)){t=1;break}if(1==t)for(r=w._pack_prev;r!==p._pack_prev&&!mf(r,g);r=r._pack_prev,z++);t?(C<z||C==z&&e.r<w.r?lf(w,e=p):lf(w=r,e),l--):(ud(w,g),e=g,a(g))}w=(n+b)/2;e=(q+m)/2;for(l=p=0;l<v;l++)g=h[l],g.x-=w,g.y-=e,p=Math.max(p,g.r+Math.sqrt(g.x*g.x+g.y*g.y));c.r=p;h.forEach(zh)}}function yh(c){c._pack_next=c._pack_prev=c}function zh(c){delete c._pack_next;delete c._pack_prev}function pf(c,a,h,n){var f=c.children;c.x=a+=n*c.x;c.y=h+=n*c.y;c.r*=n;if(f){c=-1;for(var b=f.length;++c<b;)pf(f[c],
a,h,n)}}function of(c,a,h){var f=c.r+h.r,b=a.x-c.x,q=a.y-c.y;if(f&&(b||q)){var m=a.r+h.r,w=b*b+q*q,m=m*m,f=f*f;a=.5+(f-m)/(2*w);m=Math.sqrt(Math.max(0,2*m*(f+w)-(f-=w)*f-m*m))/(2*w);h.x=c.x+a*b+m*q;h.y=c.y+a*q-m*b}else h.x=c.x+f,h.y=c.y}function qf(c,a){return c.parent==a.parent?1:2}function vd(c){var a=c.children;return a.length?a[0]:c.t}function wd(c){var a=c.children,h;return(h=a.length)?a[h-1]:c.t}function Ah(c){return 1+x.max(c,function(c){return c.y})}function Bh(c){return c.reduce(function(c,
a){return c+a.x},0)/c.length}function rf(c){var a=c.children;return a&&a.length?rf(a[0]):c}function sf(c){var a=c.children,h;return a&&(h=a.length)?sf(a[h-1]):c}function xd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function tf(c,a){var f=c.x+a[3],n=c.y+a[0],b=c.dx-a[1]-a[3],q=c.dy-a[0]-a[2];0>b&&(f+=b/2,b=0);0>q&&(n+=q/2,q=0);return{x:f,y:n,dx:b,dy:q}}function Bb(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function qc(c){return c.rangeExtent?c.rangeExtent():Bb(c.range())}function Ch(c,a,h,n){var f=
h(c[0],c[1]),b=n(a[0],a[1]);return function(c){return b(f(c))}}function rc(c,a){var f=0,n=c.length-1,b=c[f],q=c[n],m;q<b&&(m=f,f=n,n=m,m=b,b=q,q=m);c[f]=a.floor(b);c[n]=a.ceil(q);return c}function uf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Dh}function Eh(c,a,h,n){var f=[],b=[],m=0,w=Math.min(c.length,a.length)-1;c[w]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++m<=w;)f.push(h(c[m-1],c[m])),b.push(n(a[m-1],a[m]));return function(a){var h=
x.bisect(c,a,1,w)-1;return b[h](f[h](a))}}function vf(c,a,h,n){function f(){var f=2<Math.min(c.length,a.length)?Eh:Ch,k=n?fh:eh;m=f(c,a,k,h);w=f(a,c,k,mb);return b}function b(c){return m(c)}var m,w;b.invert=function(c){return w(c)};b.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return f()};b.range=function(c){if(!arguments.length)return a;a=c;return f()};b.rangeRound=function(c){return b.range(c).interpolate(df)};b.clamp=function(c){if(!arguments.length)return n;n=c;return f()};
b.interpolate=function(c){if(!arguments.length)return h;h=c;return f()};b.ticks=function(a){return x.range.apply(x,cb(c,a))};b.tickFormat=function(a,f){return yd(c,a,f)};b.nice=function(a){rc(c,uf(cb(c,a)[2]));return f()};b.copy=function(){return vf(c,a,h,n)};return f()}function zd(c,a){return x.rebind(c,a,"range","rangeRound","interpolate","clamp")}function cb(c,a){null==a&&(a=10);var f=Bb(c),n=f[1]-f[0],b=Math.pow(10,Math.floor(Math.log(n/a)/Math.LN10)),n=a/n*b;.15>=n?b*=10:.35>=n?b*=5:.75>=n&&
(b*=2);f[0]=Math.ceil(f[0]/b)*b;f[1]=Math.floor(f[1]/b)*b+.5*b;f[2]=b;return f}function yd(c,a,h){c=cb(c,a);if(h){a=ee.exec(h);a.shift();if("s"===a[8]){var f=x.formatPrefix(Math.max(ka(c[0]),ka(c[1])));a[7]||(a[7]="."+sc(f.scale(c[2])));a[8]="f";h=x.format(a.join(""));return function(c){return h(f.scale(c))+f.symbol}}a[7]||(a[7]="."+Fh(a[8],c));h=a.join("")}else h=",."+sc(c[2])+"f";return x.format(h)}function sc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Fh(c,a){var f=sc(a[2]);return c in
Gh?Math.abs(f-sc(Math.max(ka(a[0]),ka(a[1]))))+ +("e"!==c):f-2*("%"===c)}function wf(c,a,h,n){function f(c){return(h?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function b(c){return h?Math.pow(a,c):-Math.pow(a,-c)}function m(a){return c(f(a))}m.invert=function(a){return b(c.invert(a))};m.domain=function(a){if(!arguments.length)return n;h=0<=a[0];c.domain((n=a.map(Number)).map(f));return m};m.base=function(h){if(!arguments.length)return a;a=+h;c.domain(n.map(f));return m};m.nice=function(){var a=
rc(n.map(f),h?Math:Hh);c.domain(a);n=a.map(b);return m};m.ticks=function(){var c=Bb(n),k=[],q=c[0],c=c[1],m=Math.floor(f(q)),e=Math.ceil(f(c)),g=a%1?2:a;if(isFinite(e-m)){if(h){for(;m<e;m++)for(var l=1;l<g;l++)k.push(b(m)*l);k.push(b(m))}else for(k.push(b(m));m++<e;)for(l=g-1;0<l;l--)k.push(b(m)*l);for(m=0;k[m]<q;m++);for(e=k.length;k[e-1]>c;e--);k=k.slice(m,e)}return k};m.tickFormat=function(c,a){if(!arguments.length)return xf;2>arguments.length?a=xf:"function"!==typeof a&&(a=x.format(a));var n=
Math.max(.1,c/m.ticks().length),k=h?(q=1E-12,Math.ceil):(q=-1E-12,Math.floor),q;return function(c){return c/b(k(f(c)+q))<=n?a(c):""}};m.copy=function(){return wf(c.copy(),a,h,n)};return zd(m,c)}function yf(c,a,h){function f(a){return c(b(a))}var b=tc(a),q=tc(1/a);f.invert=function(a){return q(c.invert(a))};f.domain=function(a){if(!arguments.length)return h;c.domain((h=a.map(Number)).map(b));return f};f.ticks=function(c){return x.range.apply(x,cb(h,c))};f.tickFormat=function(c,a){return yd(h,c,a)};
f.nice=function(c){return f.domain(rc(h,uf(cb(h,c)[2])))};f.exponent=function(n){if(!arguments.length)return a;b=tc(a=n);q=tc(1/a);c.domain(h.map(b));return f};f.copy=function(){return yf(c.copy(),a,h)};return zd(f,c)}function tc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function zf(c,a){function f(f){return q[((b.get(f)||("range"===a.t?b.set(f,c.push(f)):NaN))-1)%q.length]}function n(a,f){return x.range(c.length).map(function(c){return a+f*c})}var b,q,m;f.domain=function(h){if(!arguments.length)return c;
c=[];b=new v;for(var n=-1,k=h.length,q;++n<k;)b.has(q=h[n])||b.set(q,c.push(q));return f[a.t].apply(f,a.a)};f.range=function(c){if(!arguments.length)return q;q=c;m=0;a={t:"range",a:arguments};return f};f.rangePoints=function(h,b){2>arguments.length&&(b=0);var k=h[0],w=h[1],e=(w-k)/(Math.max(1,c.length-1)+b);q=n(2>c.length?(k+w)/2:k+e*b/2,e);m=0;a={t:"rangePoints",a:arguments};return f};f.rangeBands=function(h,b,k){2>arguments.length&&(b=0);3>arguments.length&&(k=b);var w=h[1]<h[0],e=h[w-0],g=(h[1-
w]-e)/(c.length-b+2*k);q=n(e+g*k,g);w&&q.reverse();m=g*(1-b);a={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(h,b,k){2>arguments.length&&(b=0);3>arguments.length&&(k=b);var w=h[1]<h[0],e=h[w-0],g=h[1-w],l=Math.floor((g-e)/(c.length-b+2*k));q=n(e+Math.round((g-e-(c.length-b)*l)/2),l);w&&q.reverse();m=Math.round(l*(1-b));a={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return m};f.rangeExtent=function(){return Bb(a.a[0])};f.copy=function(){return zf(c,a)};return f.domain(c)}
function Af(c,a){function f(){var f=0,h=a.length;for(k=[];++f<h;)k[f-1]=x.quantile(c,f/h);return b}function b(c){if(!isNaN(c=+c))return a[x.bisect(k,c)]}var k;b.domain=function(a){if(!arguments.length)return c;c=a.filter(u).sort(y);return f()};b.range=function(c){if(!arguments.length)return a;a=c;return f()};b.quantiles=function(){return k};b.invertExtent=function(f){f=a.indexOf(f);return 0>f?[NaN,NaN]:[0<f?k[f-1]:c[0],f<k.length?k[f]:c[c.length-1]]};b.copy=function(){return Af(c,a)};return f()}function Bf(c,
a,h){function f(a){return h[Math.max(0,Math.min(m,Math.floor(q*(a-c))))]}function b(){q=h.length/(a-c);m=h.length-1;return f}var q,m;f.domain=function(f){if(!arguments.length)return[c,a];c=+f[0];a=+f[f.length-1];return b()};f.range=function(c){if(!arguments.length)return h;h=c;return b()};f.invertExtent=function(a){a=h.indexOf(a);a=0>a?NaN:a/q+c;return[a,a+1/q]};f.copy=function(){return Bf(c,a,h)};return b()}function Cf(c,a){function f(f){if(f<=f)return a[x.bisect(c,f)]}f.domain=function(a){if(!arguments.length)return c;
c=a;return f};f.range=function(c){if(!arguments.length)return a;a=c;return f};f.invertExtent=function(f){f=a.indexOf(f);return[c[f-1],c[f]]};f.copy=function(){return Cf(c,a)};return f}function Df(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(f){if(!arguments.length)return c;c=f.map(a);return a};a.ticks=function(a){return x.range.apply(x,cb(c,a))};a.tickFormat=function(a,f){return yd(c,a,f)};a.copy=function(){return Df(c)};return a}function Ih(c){return c.innerRadius}function Jh(c){return c.outerRadius}
function Ef(c){return c.startAngle}function Ff(c){return c.endAngle}function Gf(c){function a(a){function f(){n.push("M",q(c(m),w))}for(var n=[],m=[],e=-1,g=a.length,l,O=qa(h),p=qa(b);++e<g;)k.call(this,l=a[e],e)?m.push([+O.call(this,l,e),+p.call(this,l,e)]):m.length&&(f(),m=[]);m.length&&f();return n.length?n.join(""):null}var h=wb,b=Jb,k=vb,q=Ga,m=q.key,w=.7;a.x=function(c){if(!arguments.length)return h;h=c;return a};a.y=function(c){if(!arguments.length)return b;b=c;return a};a.defined=function(c){if(!arguments.length)return k;
k=c;return a};a.interpolate=function(c){if(!arguments.length)return m;m="function"===typeof c?q=c:(q=Ad.get(c)||Ga).key;return a};a.tension=function(c){if(!arguments.length)return w;w=c;return a};return a}function Ga(c){return c.join("L")}function Bd(c){for(var a=0,h=c.length,b=c[0],k=[b[0],",",b[1]];++a<h;)k.push("V",(b=c[a])[1],"H",b[0]);return k.join("")}function Cd(c){for(var a=0,h=c.length,b=c[0],k=[b[0],",",b[1]];++a<h;)k.push("H",(b=c[a])[0],"V",b[1]);return k.join("")}function uc(c,a){if(1>
a.length||c.length!=a.length&&c.length!=a.length+2)return Ga(c);var f=c.length!=a.length,b="",k=c[0],q=c[1],m=a[0],w=m,e=1;f&&(b+="Q"+(q[0]-2*m[0]/3)+","+(q[1]-2*m[1]/3)+","+q[0]+","+q[1],k=c[1],e=2);if(1<a.length)for(w=a[1],q=c[e],e++,b+="C"+(k[0]+m[0])+","+(k[1]+m[1])+","+(q[0]-w[0])+","+(q[1]-w[1])+","+q[0]+","+q[1],k=2;k<a.length;k++,e++)q=c[e],w=a[k],b+="S"+(q[0]-w[0])+","+(q[1]-w[1])+","+q[0]+","+q[1];f&&(f=c[e],b+="Q"+(q[0]+2*w[0]/3)+","+(q[1]+2*w[1]/3)+","+f[0]+","+f[1]);return b}function Dd(c,
a){for(var f=[],b=(1-a)/2,k,q=c[0],m=c[1],w=1,e=c.length;++w<e;)k=q,q=m,m=c[w],f.push([b*(m[0]-k[0]),b*(m[1]-k[1])]);return f}function Hf(c){if(3>c.length)return Ga(c);var a=1,h=c.length,b=c[0],k=b[0],q=b[1],m=[k,k,k,(b=c[1])[0]],w=[q,q,q,b[1]],k=[k,",",q,"L",Ha(db,m),",",Ha(db,w)];for(c.push(c[h-1]);++a<=h;)b=c[a],m.shift(),m.push(b[0]),w.shift(),w.push(b[1]),Ed(k,m,w);c.pop();k.push("L",b);return k.join("")}function Ha(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Ed(c,a,h){c.push("C",
Ha(If,a),",",Ha(If,h),",",Ha(Jf,a),",",Ha(Jf,h),",",Ha(db,a),",",Ha(db,h))}function Fd(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Kf(c){for(var a,h=-1,b=c.length,k,q;++h<b;)a=c[h],k=a[0],q=a[1]+nb,a[0]=k*Math.cos(q),a[1]=k*Math.sin(q);return c}function Lf(c){function a(a){function f(){n.push("M",w(c(O),p),l,g(c(e.reverse()),p),"Z")}for(var n=[],e=[],O=[],U=-1,r=a.length,v,t=qa(h),da=qa(k),C=h===b?function(){return A}:qa(b),z=k===q?function(){return S}:qa(q),A,S;++U<r;)m.call(this,v=a[U],U)?(e.push([A=
+t.call(this,v,U),S=+da.call(this,v,U)]),O.push([+C.call(this,v,U),+z.call(this,v,U)])):e.length&&(f(),e=[],O=[]);e.length&&f();return n.length?n.join(""):null}var h=wb,b=wb,k=0,q=Jb,m=vb,w=Ga,e=w.key,g=w,l="L",p=.7;a.x=function(c){if(!arguments.length)return b;h=b=c;return a};a.x0=function(c){if(!arguments.length)return h;h=c;return a};a.x1=function(c){if(!arguments.length)return b;b=c;return a};a.y=function(c){if(!arguments.length)return q;k=q=c;return a};a.y0=function(c){if(!arguments.length)return k;
k=c;return a};a.y1=function(c){if(!arguments.length)return q;q=c;return a};a.defined=function(c){if(!arguments.length)return m;m=c;return a};a.interpolate=function(c){if(!arguments.length)return e;e="function"===typeof c?w=c:(w=Ad.get(c)||Ga).key;g=w.reverse||w;l=w.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return p;p=c;return a};return a}function Kh(c){return c.radius}function Mf(c){return[c.x,c.y]}function Lh(c){return function(){var a=c.apply(this,arguments),h=a[0],a=a[1]+
nb;return[h*Math.cos(a),h*Math.sin(a)]}}function Mh(){return 64}function Nh(){return"circle"}function Nf(c){c=Math.sqrt(c/ja);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Rb(c,a){Tb(c,va);c.id=a;return c}function Gd(c,a,h,b){var f=c.id;return Y(c,"function"===typeof h?function(c,n,k){c.__transition__[f].tween.set(a,b(h.call(c,c.__data__,n,k)))}:(h=b(h),function(c){c.__transition__[f].tween.set(a,h)}))}function Oh(c){null==c&&(c="");return function(){this.textContent=
c}}function vc(c,a,h,b){var f=c.__transition__||(c.__transition__={active:0,count:0}),n=f[h];if(!n){var m=b.time,n=f[h]={tween:new v,time:m,ease:b.ease,delay:b.delay,duration:b.duration};++f.count;x.timer(function(b){function k(b){if(f.active>h)return w();f.active=h;n.event&&n.event.start.call(c,e,a);n.tween.forEach(function(f,h){(h=h.call(c,e,a))&&v.push(h)});x.timer(function(){r.c=q(b||1)?vb:q;return 1},0,m)}function q(b){if(f.active!==h)return w();b/=p;for(var k=g(b),q=v.length;0<q;)v[--q].call(c,
k);if(1<=b)return n.event&&n.event.end.call(c,e,a),w()}function w(){--f.count?delete f[h]:delete c.__transition__;return 1}var e=c.__data__,g=n.ease,l=n.delay,p=n.duration,r=Sa,v=[];r.t=l+m;if(l<=b)return k(b-l);r.c=k},0,m)}}function Of(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Pf(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Hd(c){return c.toISOString()}function Id(c,a,h){function f(a){return c(a)}function b(c,f){var h=(c[1]-c[0])/
f,b=x.bisect(wc,h);return b==wc.length?[a.year,cb(c.map(function(c){return c/31536E6}),f)[2]]:b?a[h/wc[b-1]<wc[b]/h?b-1:b]:[Ph,cb(c,f)[2]]}f.invert=function(a){return ob(c.invert(a))};f.domain=function(a){if(!arguments.length)return c.domain().map(ob);c.domain(a);return f};f.nice=function(c,a){function h(f){return!isNaN(f)&&!c.range(f,ob(+f+1),a).length}var n=f.domain(),k=Bb(n);if(k=null==c?b(k,10):"number"===typeof c&&b(k,c))c=k[0],a=k[1];return f.domain(rc(n,1<a?{floor:function(a){for(;h(a=c.floor(a));)a=
ob(a-1);return a},ceil:function(a){for(;h(a=c.ceil(a));)a=ob(+a+1);return a}}:c))};f.ticks=function(c,a){var h=Bb(f.domain()),n=null==c?b(h,10):"number"===typeof c?b(h,c):!c.range&&[{range:c},a];n&&(c=n[0],a=n[1]);return c.range(h[0],ob(+h[1]+1),1>a?1:a)};f.tickFormat=function(){return h};f.copy=function(){return Id(c.copy(),a,h)};return zd(f,c)}function ob(c){return new Date(c)}function Qh(c){return JSON.parse(c.responseText)}function Rh(c){var a=Ma.createRange();a.selectNode(Ma.body);return a.createContextualFragment(c.responseText)}
var x={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Qf=[].slice,Xa=function(c){return Qf.call(c)},Ma=document,Ra=Ma.documentElement,Aa=window;try{Xa(Ra.childNodes)[0].nodeType}catch(c){Xa=function(c){for(var a=c.length,f=Array(a);a--;)f[a]=c[a];return f}}try{Ma.createElement("div").style.setProperty("opacity",0,"")}catch(c){var xc=Aa.Element.prototype,Sh=xc.setAttribute,Th=xc.setAttributeNS,Rf=Aa.CSSStyleDeclaration.prototype,Uh=Rf.setProperty;xc.setAttribute=function(c,a){Sh.call(this,
c,a+"")};xc.setAttributeNS=function(c,a,b){Th.call(this,c,a,b+"")};Rf.setProperty=function(c,a,b){Uh.call(this,c,a+"",b)}}x.ascending=y;x.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};x.min=function(c,a){var f=-1,b=c.length,k,q;if(1===arguments.length){for(;++f<b&&!(null!=(k=c[f])&&k<=k);)k=void 0;for(;++f<b;)null!=(q=c[f])&&k>q&&(k=q)}else{for(;++f<b&&!(null!=(k=a.call(c,c[f],f))&&k<=k);)k=void 0;for(;++f<b;)null!=(q=a.call(c,c[f],f))&&k>q&&(k=q)}return k};x.max=function(c,a){var f=-1,
b=c.length,k,q;if(1===arguments.length){for(;++f<b&&!(null!=(k=c[f])&&k<=k);)k=void 0;for(;++f<b;)null!=(q=c[f])&&q>k&&(k=q)}else{for(;++f<b&&!(null!=(k=a.call(c,c[f],f))&&k<=k);)k=void 0;for(;++f<b;)null!=(q=a.call(c,c[f],f))&&q>k&&(k=q)}return k};x.extent=function(c,a){var f=-1,b=c.length,k,q,m;if(1===arguments.length){for(;++f<b&&!(null!=(k=m=c[f])&&k<=k);)k=m=void 0;for(;++f<b;)null!=(q=c[f])&&(k>q&&(k=q),m<q&&(m=q))}else{for(;++f<b&&!(null!=(k=m=a.call(c,c[f],f))&&k<=k);)k=void 0;for(;++f<b;)null!=
(q=a.call(c,c[f],f))&&(k>q&&(k=q),m<q&&(m=q))}return[k,m]};x.sum=function(c,a){var f=0,b=c.length,k,q=-1;if(1===arguments.length)for(;++q<b;)isNaN(k=+c[q])||(f+=k);else for(;++q<b;)isNaN(k=+a.call(c,c[q],q))||(f+=k);return f};x.mean=function(c,a){var f=0,b=c.length,k,q=-1,m=b;if(1===arguments.length)for(;++q<b;)u(k=c[q])?f+=k:--m;else for(;++q<b;)u(k=a.call(c,c[q],q))?f+=k:--m;return m?f/m:void 0};x.quantile=function(c,a){var f=(c.length-1)*a+1,b=Math.floor(f),k=+c[b-1];return(f-=b)?k+f*(c[b]-k):
k};x.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(u);return c.length?x.quantile(c.sort(y),.5):void 0};var Sf=a(y);x.bisectLeft=Sf.left;x.bisect=x.bisectRight=Sf.right;x.bisector=function(c){return a(1===c.length?function(a,b){return y(c(a),b)}:c)};x.shuffle=function(c){for(var a=c.length,b,n;a;)n=Math.random()*a--|0,b=c[a],c[a]=c[n],c[n]=b;return c};x.permute=function(c,a){for(var f=a.length,b=Array(f);f--;)b[f]=c[a[f]];return b};x.pairs=function(c){for(var a=0,b=c.length-1,n=
c[0],k=Array(0>b?0:b);a<b;)k[a]=[n,n=c[++a]];return k};x.zip=function(){if(!(k=arguments.length))return[];for(var c=-1,a=x.min(arguments,b),h=Array(a);++c<a;)for(var n=-1,k,q=h[c]=Array(k);++n<k;)q[n]=arguments[n][c];return h};x.transpose=function(c){return x.zip.apply(x,c)};x.keys=function(c){var a=[],b;for(b in c)a.push(b);return a};x.values=function(c){var a=[],b;for(b in c)a.push(c[b]);return a};x.entries=function(c){var a=[],b;for(b in c)a.push({key:b,value:c[b]});return a};x.merge=function(c){var a=
c.length,b;b=-1;for(var n=0,k,q;++b<a;)n+=c[b].length;for(k=Array(n);0<=--a;)for(q=c[a],b=q.length;0<=--b;)k[--n]=q[b];return k};var ka=Math.abs;x.range=function(c,a,b){3>arguments.length&&(b=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/b)throw Error("infinite range");var f=[],h;h=ka(b);for(var q=1;h*q%1;)q*=10;h=q;var q=-1,m;c*=h;a*=h;b*=h;if(0>b)for(;(m=c+b*++q)>a;)f.push(m/h);else for(;(m=c+b*++q)<a;)f.push(m/h);return f};x.map=function(c){var a=new v;if(c instanceof v)c.forEach(function(c,
f){a.set(c,f)});else for(var b in c)a.set(b,c[b]);return a};l(v,{has:p,get:function(c){return this[eb+c]},set:function(c,a){return this[eb+c]=a},remove:function(c){c=eb+c;return c in this&&delete this[c]},keys:e,values:function(){var c=[];this.forEach(function(a,b){c.push(b)});return c},entries:function(){var c=[];this.forEach(function(a,b){c.push({key:a,value:b})});return c},size:g,empty:t,forEach:function(c){for(var a in this)a.charCodeAt(0)===Sb&&c.call(this,a.substring(1),this[a])}});var eb="\x00",
Sb=eb.charCodeAt(0);x.nest=function(){function c(a,f,h){if(h>=n.length)return m?m.call(b,f):q?f.sort(q):f;for(var k=-1,w=f.length,e=n[h++],g,l,p=new v,O;++k<w;)(O=p.get(g=e(l=f[k])))?O.push(l):p.set(g,[l]);a?(l=a(),f=function(f,b){l.set(f,c(a,b,h))}):(l={},f=function(f,b){l[f]=c(a,b,h)});p.forEach(f);return l}function a(c,f){if(f>=n.length)return c;var b=[],h=k[f++];c.forEach(function(c,h){b.push({key:c,values:a(h,f)})});return h?b.sort(function(c,a){return h(c.key,a.key)}):b}var b={},n=[],k=[],q,
m;b.map=function(a,f){return c(f,a,0)};b.entries=function(f){return a(c(x.map,f,0),0)};b.key=function(c){n.push(c);return b};b.sortKeys=function(c){k[n.length-1]=c;return b};b.sortValues=function(c){q=c;return b};b.rollup=function(c){m=c;return b};return b};x.set=function(c){var a=new r;if(c)for(var b=0,n=c.length;b<n;++b)a.add(c[b]);return a};l(r,{has:p,add:function(c){this[eb+c]=!0;return c},remove:function(c){c=eb+c;return c in this&&delete this[c]},values:e,size:g,empty:t,forEach:function(c){for(var a in this)a.charCodeAt(0)===
Sb&&c.call(this,a.substring(1))}});x.behavior={};x.rebind=function(c,a){for(var f=1,b=arguments.length,k;++f<b;)c[k=arguments[f]]=G(c,a,a[k]);return c};var Sd="webkit ms moz Moz o O".split(" ");x.dispatch=function(){for(var c=new F,a=-1,b=arguments.length;++a<b;)c[arguments[a]]=E(c);return c};F.prototype.on=function(c,a){var f=c.indexOf("."),b="";0<=f&&(b=c.substring(f+1),c=c.substring(0,f));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,
null);return this}};x.event=null;x.requote=function(c){return c.replace(Vh,"\\$&")};var Vh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Tb={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var f in a)c[f]=a[f]},Mc=function(c,a){return a.querySelector(c)},Nc=function(c,a){return a.querySelectorAll(c)},Wh=Ra.matches||Ra[D(Ra,"matchesSelector")],Td=function(c,a){return Wh.call(c,a)};"function"===typeof Sizzle&&(Mc=function(c,a){return Sizzle(c,a)[0]||null},Nc=Sizzle,Td=Sizzle.matchesSelector);x.selection=
function(){return Tf};var oa=x.selection.prototype=[];oa.select=function(c){var a=[],b,n,k,q;c=T(c);for(var m=-1,e=this.length;++m<e;){a.push(b=[]);b.parentNode=(k=this[m]).parentNode;for(var g=-1,l=k.length;++g<l;)(q=k[g])?(b.push(n=c.call(q,q.__data__,g,m)),n&&"__data__"in q&&(n.__data__=q.__data__)):b.push(null)}return N(a)};oa.selectAll=function(c){var a=[],b,n;c=J(c);for(var k=-1,q=this.length;++k<q;)for(var m=this[k],e=-1,g=m.length;++e<g;)if(n=m[e])a.push(b=Xa(c.call(n,n.__data__,e,k))),b.parentNode=
n;return N(a)};var Jd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};x.ns={prefix:Jd,qualify:function(c){var a=c.indexOf(":"),b=c;0<=a&&(b=c.substring(0,a),c=c.substring(a+1));return Jd.hasOwnProperty(b)?{space:Jd[b],local:c}:c}};oa.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node();c=x.ns.qualify(c);return c.local?f.getAttributeNS(c.space,
c.local):f.getAttribute(c)}for(a in c)this.each(W(a,c[a]));return this}return this.each(W(c,a))};oa.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,k=-1;if(a=f.classList)for(;++k<b;){if(!a.contains(c[k]))return!1}else for(a=f.getAttribute("class");++k<b;)if(!Q(c[k]).test(a))return!1;return!0}for(a in c)this.each(P(a,c[a]));return this}return this.each(P(c,a))};oa.style=function(c,a,b){var f=arguments.length;if(3>f){if("string"!==
typeof c){2>f&&(a="");for(b in c)this.each(H(b,c[b],a));return this}if(2>f)return Aa.getComputedStyle(this.node(),null).getPropertyValue(c);b=""}return this.each(H(c,a,b))};oa.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(K(a,c[a]));return this}return this.each(K(c,a))};oa.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=
""}:function(){this.textContent=c}):this.node().textContent};oa.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};oa.append=function(c){c=C(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};oa.insert=function(c,a){c=C(c);a=T(a);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),a.apply(this,arguments)||null)})};oa.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};oa.data=function(c,a){function f(c,f){var b,h=c.length,n=f.length,k=Math.min(h,n),q=Array(n),m=Array(n),w=Array(h),p,r;if(a){var k=new v,O=new v,t=[],U;for(b=-1;++b<h;)U=a.call(p=c[b],p.__data__,b),k.has(U)?w[b]=p:k.set(U,p),t.push(U);for(b=-1;++b<n;)U=a.call(f,r=f[b],b),(p=k.get(U))?(q[b]=p,p.__data__=r):O.has(U)||(m[b]={__data__:r}),O.set(U,r),k.remove(U);
for(b=-1;++b<h;)k.has(t[b])&&(w[b]=c[b])}else{for(b=-1;++b<k;)p=c[b],r=f[b],p?(p.__data__=r,q[b]=p):m[b]={__data__:r};for(;b<n;++b)m[b]={__data__:f[b]};for(;b<h;++b)w[b]=c[b]}m.update=q;m.parentNode=q.parentNode=w.parentNode=c.parentNode;e.push(m);g.push(q);l.push(w)}var b=-1,k=this.length,q,m;if(!arguments.length){for(c=Array(k=(q=this[0]).length);++b<k;)if(m=q[b])c[b]=m.__data__;return c}var e=L([]),g=N([]),l=N([]);if("function"===typeof c)for(;++b<k;)f(q=this[b],c.call(q,q.parentNode.__data__,
b));else for(;++b<k;)f(q=this[b],c);g.enter=function(){return e};g.exit=function(){return l};return g};oa.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};oa.filter=function(c){var a=[],b,n,k;"function"!==typeof c&&(c=V(c));for(var q=0,m=this.length;q<m;q++){a.push(b=[]);b.parentNode=(n=this[q]).parentNode;for(var e=0,g=n.length;e<g;e++)(k=n[e])&&c.call(k,k.__data__,e,q)&&b.push(k)}return N(a)};oa.order=function(){for(var c=-1,a=this.length;++c<a;)for(var b=
this[c],n=b.length-1,k=b[n],q;0<=--n;)if(q=b[n])k&&k!==q.nextSibling&&k.parentNode.insertBefore(q,k),k=q;return this};oa.sort=function(c){c=R.apply(this,arguments);for(var a=-1,b=this.length;++a<b;)this[a].sort(c);return this.order()};oa.each=function(c){return Y(this,function(a,b,n){c.call(a,a.__data__,b,n)})};oa.call=function(c){var a=Xa(arguments);c.apply(a[0]=this,a);return this};oa.empty=function(){return!this.node()};oa.node=function(){for(var c=0,a=this.length;c<a;c++)for(var b=this[c],n=0,
k=b.length;n<k;n++){var q=b[n];if(q)return q}return null};oa.size=function(){var c=0;this.each(function(){++c});return c};var Qa=[];x.selection.enter=L;x.selection.enter.prototype=Qa;Qa.append=oa.append;Qa.empty=oa.empty;Qa.node=oa.node;Qa.call=oa.call;Qa.size=oa.size;Qa.select=function(c){for(var a=[],b,n,k,q,m,e=-1,g=this.length;++e<g;){k=(q=this[e]).update;a.push(b=[]);b.parentNode=q.parentNode;for(var l=-1,p=q.length;++l<p;)(m=q[l])?(b.push(k[l]=n=c.call(q.parentNode,m.__data__,l,e)),n.__data__=
m.__data__):b.push(null)}return N(a)};Qa.insert=function(c,a){2>arguments.length&&(a=ea(this));return oa.insert.call(this,c,a)};oa.transition=function(){for(var c=pb||++Uf,a=[],b,n,k=yc||{time:Date.now(),ease:$g,delay:0,duration:250},q=-1,m=this.length;++q<m;){a.push(b=[]);for(var e=this[q],g=-1,l=e.length;++g<l;)(n=e[g])&&vc(n,g,c,k),b.push(n)}return Rb(a,c)};oa.interrupt=function(){return this.each(X)};x.select=function(c){c=["string"===typeof c?Mc(c,Ma):c];c.parentNode=Ra;return N([c])};x.selectAll=
function(c){c=Xa("string"===typeof c?Nc(c,Ma):c);c.parentNode=Ra;return N([c])};var Tf=x.select(Ra);oa.on=function(c,a,b){var f=arguments.length;if(3>f){if("string"!==typeof c){2>f&&(a=!1);for(b in c)this.each(m(b,c[b],a));return this}if(2>f)return(f=this.node()["__on"+c])&&f._;b=!1}return this.each(m(c,a,b))};var Oc=x.map({mouseenter:"mouseover",mouseleave:"mouseout"});Oc.forEach(function(c){"on"+c in Ma&&Oc.remove(c)});var Eb="onselectstart"in Ma?null:D(Ra.style,"userSelect"),kg=0;x.mouse=function(c){return la(c,
M())};var Pc=/WebKit/.test(Aa.navigator.userAgent)?-1:0;x.touches=function(c,a){2>arguments.length&&(a=M().touches);return a?Xa(a).map(function(a){var f=la(c,a);f.identifier=a.identifier;return f}):[]};x.behavior.drag=function(){function c(){this.on("mousedown.drag",k).on("touchstart.drag",q)}function a(c,a,f,h,k){return function(){var q=x.event.target,m=this.parentNode,e=b.of(this,arguments),w=0,g=c(),l=".drag"+(null==g?"":"-"+g),p,r=x.select(f()).on(h+l,function(){var c=a(m,g),f,b;c&&(f=c[0]-O[0],
b=c[1]-O[1],w|=f|b,O=c,e({type:"drag",x:c[0]+p[0],y:c[1]+p[1],dx:f,dy:b}))}).on(k+l,function(){a(m,g)&&(r.on(h+l,null).on(k+l,null),v(w&&x.event.target===q),e({type:"dragend"}))}),v=na(),O=a(m,g);n?(p=n.apply(this,arguments),p=[p.x-O[0],p.y-O[1]]):p=[0,0];e({type:"dragstart"})}}var b=z(c,"drag","dragstart","dragend"),n=null,k=a(B,x.mouse,ha,"mousemove","mouseup"),q=a(Z,x.touch,ca,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return n;n=a;return c};return x.rebind(c,b,"on")};var ja=
Math.PI,Fa=2*ja,ya=ja/2,ia=ja/180,ra=180/ja,zc=Math.SQRT2;x.interpolateZoom=function(c,a){function f(c){var a=c*C;if(t){c=fa(v);var f,h=zc*a+v;f=((h=Math.exp(2*h))-1)/(h+1);var n=v,h=((n=Math.exp(n))-1/n)/2;f=q/(2*p)*(c*f-h);return[b+f*e,k+f*g,q*c/fa(zc*a+v)]}return[b+c*e,k+c*g,q*Math.exp(zc*a)]}var b=c[0],k=c[1],q=c[2],m=a[2],e=a[0]-b,g=a[1]-k,l=e*e+g*g,p=Math.sqrt(l),r=(m*m-q*q+4*l)/(4*q*p),l=(m*m-q*q-4*l)/(4*m*p),v=Math.log(Math.sqrt(r*r+1)-r),t=Math.log(Math.sqrt(l*l+1)-l)-v,C=(t||Math.log(m/
q))/zc;f.duration=1E3*C;return f};x.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",g).on(Xh+".zoom",p).on("mousemove.zoom",r).on("dblclick.zoom",v).on("touchstart.zoom",l)}function a(c){return[(c[0]-t.x)/t.k,(c[1]-t.y)/t.k]}function b(c){t.k=Math.max(u[0],Math.min(u[1],c))}function n(c,a){a=[a[0]*t.k+t.x,a[1]*t.k+t.y];t.x+=c[0]-a[0];t.y+=c[1]-a[1]}function k(){V&&V.domain(R.range().map(function(c){return(c-t.x)/t.k}).map(R.invert));J&&J.domain(Y.range().map(function(c){return(c-t.y)/
t.k}).map(Y.invert))}function q(c){c({type:"zoomstart"})}function m(c){k();c({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function e(c){c({type:"zoomend"})}function g(){var c=this,f=x.event.target,b=K.of(c,arguments),h=0,k=x.select(Aa).on("mousemove.zoom",function(){h=1;n(x.mouse(c),g);m(b)}).on("mouseup.zoom",function(){k.on("mousemove.zoom",Aa===c?r:null).on("mouseup.zoom",null);w(h&&x.event.target===f);e(b)}),g=a(x.mouse(c)),w=na();X.call(c);q(b)}function l(){function c(){var c=x.touches(w);O=
t.k;c.forEach(function(c){c.identifier in r&&(r[c.identifier]=a(c))});return c}function f(){var a=x.event.target;x.select(a).on(C,h).on(A,k);z.push(a);for(var a=x.event.changedTouches,f=0,q=a.length;f<q;++f)r[a[f].identifier]=null;q=c();f=Date.now();1===q.length?(500>f-H&&(a=q[0],q=r[a.identifier],b(2*t.k),n(a,q),I(),m(p)),H=f):1<q.length&&(a=q[0],q=q[1],f=a[0]-q[0],a=a[1]-q[1],v=f*f+a*a)}function h(){for(var c=x.touches(w),a,f,h,k,q=0,e=c.length;q<e;++q,k=null)if(h=c[q],k=r[h.identifier]){if(f)break;
a=h;f=k}if(k){var g=(g=h[0]-a[0])*g+(g=h[1]-a[1])*g,c=v&&Math.sqrt(g/v);a=[(a[0]+h[0])/2,(a[1]+h[1])/2];f=[(f[0]+k[0])/2,(f[1]+k[1])/2];b(c*O)}H=null;n(a,f);m(p)}function k(){if(x.event.touches.length){for(var a=x.event.changedTouches,f=0,b=a.length;f<b;++f)delete r[a[f].identifier];for(var h in r)return void c()}x.selectAll(z).on(U,null);S.on("mousedown.zoom",g).on("touchstart.zoom",l);u();e(p)}var w=this,p=K.of(w,arguments),r={},v=0,O,U=".zoom-"+x.event.changedTouches[0].identifier,C="touchmove"+
U,A="touchend"+U,z=[],S=x.select(w).on("mousedown.zoom",null).on("touchstart.zoom",f),u=na();X.call(w);f();q(p)}function p(){var c=K.of(this,arguments);L?clearTimeout(L):(X.call(this),q(c));L=setTimeout(function(){L=null;e(c)},50);I();var f=A||x.mouse(this);C||(C=a(f));b(Math.pow(2,.002*Ac())*t.k);n(f,C);m(c)}function r(){C=null}function v(){var c=K.of(this,arguments),f=x.mouse(this),h=a(f),k=Math.log(t.k)/Math.LN2;q(c);b(Math.pow(2,x.event.shiftKey?Math.ceil(k)-1:Math.floor(k)+1));n(f,h);m(c);e(c)}
var t={x:0,y:0,k:1},C,A,S=[960,500],u=Vf,L,H,K=z(c,"zoomstart","zoom","zoomend"),R,V,Y,J;c.event=function(c){c.each(function(){var c=K.of(this,arguments),a=t;pb?x.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};q(c)}).tween("zoom:zoom",function(){var f=S[0],b=f/2,h=S[1]/2,n=x.interpolateZoom([(b-t.x)/t.k,(h-t.y)/t.k,f/t.k],[(b-a.x)/a.k,(h-a.y)/a.k,f/a.k]);return function(a){a=n(a);var k=f/a[2];this.__chart__=t={x:b-a[0]*k,y:h-a[1]*k,k:k};m(c)}}).each("end.zoom",
function(){e(c)}):(this.__chart__=t,q(c),m(c),e(c))})};c.translate=function(a){if(!arguments.length)return[t.x,t.y];t={x:+a[0],y:+a[1],k:t.k};k();return c};c.scale=function(a){if(!arguments.length)return t.k;t={x:t.x,y:t.y,k:+a};k();return c};c.scaleExtent=function(a){if(!arguments.length)return u;u=null==a?Vf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return A;A=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return S;S=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return V;
V=a;R=a.copy();t={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return J;J=a;Y=a.copy();t={x:0,y:0,k:1};return c};return x.rebind(c,K,"on")};var Vf=[0,Infinity],Ac,Xh="onwheel"in Ma?(Ac=function(){return-x.event.deltaY*(x.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(Ac=function(){return x.event.wheelDelta},"mousewheel"):(Ac=function(){return-x.event.detail},"MozMousePixelScroll");x.color=pa;pa.prototype.toString=function(){return this.rgb()+""};x.hsl=Ba;var Kd=Ba.prototype=
new pa;Kd.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ba(this.h,this.s,this.l/a)};Kd.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ba(this.h,this.s,a*this.l)};Kd.rgb=function(){return qb(this.h,this.s,this.l)};x.hcl=Ia;var Ld=Ia.prototype=new pa;Ld.brighter=function(a){return new Ia(this.h,this.c,Math.min(100,this.l+Bc*(arguments.length?a:1)))};Ld.darker=function(a){return new Ia(this.h,this.c,Math.max(0,this.l-Bc*(arguments.length?a:1)))};Ld.rgb=function(){return Qc(this.h,
this.c,this.l).rgb()};x.lab=Ja;var Bc=18,Zd=.95047,$d=1,ae=1.08883,Md=Ja.prototype=new pa;Md.brighter=function(a){return new Ja(Math.min(100,this.l+Bc*(arguments.length?a:1)),this.a,this.b)};Md.darker=function(a){return new Ja(Math.max(0,this.l-Bc*(arguments.length?a:1)),this.a,this.b)};Md.rgb=function(){return Yd(this.l,this.a,this.b)};x.rgb=Ca;var Cc=Ca.prototype=new pa;Cc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var c=this.r,b=this.g,n=this.b;if(!c&&!b&&!n)return new Ca(30,30,30);
c&&30>c&&(c=30);b&&30>b&&(b=30);n&&30>n&&(n=30);return new Ca(Math.min(255,c/a),Math.min(255,b/a),Math.min(255,n/a))};Cc.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ca(a*this.r,a*this.g,a*this.b)};Cc.hsl=function(){return Vd(this.r,this.g,this.b)};Cc.toString=function(){return"#"+rb(this.r)+rb(this.g)+rb(this.b)};var Vb=x.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,
blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vb.forEach(function(a,f){Vb.set(a,
new Ca(f>>16,f>>8&255,f&255))});x.functor=qa;x.xhr=Wc(xa);x.dsv=function(a,f){function c(a,c,h){3>arguments.length&&(h=c,c=null);var n=Wb(a,f,null==c?b:k(c),h);n.row=function(a){return arguments.length?n.response(null==(c=a)?b:k(a)):c};return n}function b(a){return c.parse(a.responseText)}function k(a){return function(f){return c.parse(f.responseText,a)}}function q(c){return c.map(m).join(a)}function m(a){return e.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n]"),g=a.charCodeAt(0);
c.parse=function(a,f){var b;return c.parseRows(a,function(a,c){if(b)return b(a,c-1);var h=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");b=f?function(a,c){return f(h(a),c)}:h})};c.parseRows=function(a,c){function f(){if(q>=k)return h;if(w)return w=!1,b;var c=q;if(34===a.charCodeAt(c)){for(var f=c;f++<k;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}q=f+2;var n=a.charCodeAt(f+1);13===n?(w=!0,10===a.charCodeAt(f+2)&&++q):10===n&&
(w=!0);return a.substring(c+1,f).replace(/""/g,'"')}for(;q<k;){n=a.charCodeAt(q++);f=1;if(10===n)w=!0;else if(13===n)w=!0,10===a.charCodeAt(q)&&(++q,++f);else if(n!==g)continue;return a.substring(c,q-f)}return a.substring(c)}for(var b={},h={},n=[],k=a.length,q=0,m=0,e,w;(e=f())!==h;){for(var l=[];e!==b&&e!==h;)l.push(e),e=f();c&&!(l=c(l,m++))||n.push(l)}return n};c.format=function(f){if(Array.isArray(f[0]))return c.formatRows(f);var b=new r,h=[];f.forEach(function(a){for(var c in a)b.has(c)||h.push(b.add(c))});
return[h.map(m).join(a)].concat(f.map(function(c){return h.map(function(a){return m(c[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(q).join("\n")};return c};x.csv=x.dsv(",","text/csv");x.tsv=x.dsv("\t","text/tab-separated-values");x.touch=function(a,f,b){3>arguments.length&&(b=f,f=M().changedTouches);if(f)for(var c=0,h=f.length,q;c<h;++c)if((q=f[c]).identifier===b)return la(a,q)};var Zb,$b,Yb,Xb,Sa,de=Aa[D(Aa,"requestAnimationFrame")]||function(a){setTimeout(a,17)};x.timer=function(a,
f,b){var c=arguments.length;2>c&&(f=0);3>c&&(b=Date.now());c={c:a,t:b+f,f:!1,n:null};$b?$b.n=c:Zb=c;$b=c;Yb||(Xb=clearTimeout(Xb),Yb=1,de(Xc))};x.timer.flush=function(){be();ce()};x.round=function(a,f){return f?Math.round(a*(f=Math.pow(10,f)))/f:Math.round(a)};var Yh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,f){var c=Math.pow(10,3*ka(8-f));return{scale:8<f?function(a){return a/c}:function(a){return a*c},symbol:a}});x.formatPrefix=function(a,f){var c=0;a&&(0>a&&(a*=-1),f&&(a=
x.round(a,Yc(a,f))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3))));return Yh[8+c/3]};var ee=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ng=x.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,f){return a.toPrecision(f)},e:function(a,f){return a.toExponential(f)},
f:function(a,f){return a.toFixed(f)},r:function(a,f){return(a=x.round(a,Yc(a,f))).toFixed(Math.max(0,Math.min(20,Yc(a*(1+1E-15),f))))}}),aa=x.time={},za=Date;Ta.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Wa.setUTCDate.apply(this._,arguments)},setDay:function(){Wa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Wa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Wa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Wa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Wa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Wa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Wa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Wa.setTime.apply(this._,arguments)}};var Wa=Date.prototype;aa.year=fb(function(a){a=aa.day(a);a.setMonth(0,1);return a},function(a,f){a.setFullYear(a.getFullYear()+f)},function(a){return a.getFullYear()});aa.years=aa.year.range;aa.years.utc=aa.year.utc.range;aa.day=fb(function(a){var c=new za(2E3,0);c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());
return c},function(a,f){a.setDate(a.getDate()+f)},function(a){return a.getDate()-1});aa.days=aa.day.range;aa.days.utc=aa.day.utc.range;aa.dayOfYear=function(a){var c=aa.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,f){f=7-f;var c=aa[a]=fb(function(a){(a=aa.day(a)).setDate(a.getDate()-(a.getDay()+f)%7);return a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var c=
aa.year(a).getDay();return Math.floor((aa.dayOfYear(a)+(c+f)%7)/7)-(c!==f)});aa[a+"s"]=c.range;aa[a+"s"].utc=c.utc.range;aa[a+"OfYear"]=function(a){var c=aa.year(a).getDay();return Math.floor((aa.dayOfYear(a)+(c+f)%7)/7)}});aa.week=aa.sunday;aa.weeks=aa.sunday.range;aa.weeks.utc=aa.sunday.utc.range;aa.weekOfYear=aa.sundayOfYear;var fe={"-":"",_:" ",0:"0"},ta=/^\s*\d+/,ie=/^%/;x.locale=function(a){return{numberFormat:mg(a),timeFormat:pg(a)}};var Wf=x.locale({decimal:".",thousands:",",grouping:[3],
currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});x.format=Wf.numberFormat;x.geo={};Zc.prototype={s:0,t:0,add:function(a){je(a,this.t,Dc);je(Dc.s,this.s,
this);this.s?this.t+=Dc.t:this.s=Dc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Dc=new Zc;x.geo.stream=function(a,f){if(a&&Xf.hasOwnProperty(a.type))Xf[a.type](a,f);else dc(a,f)};var Xf={Feature:function(a,f){dc(a.geometry,f)},FeatureCollection:function(a,f){for(var c=a.features,b=-1,k=c.length;++b<k;)dc(c[b].geometry,f)}},ke={Sphere:function(a,f){f.sphere()},Point:function(a,f){a=a.coordinates;f.point(a[0],a[1],a[2])},MultiPoint:function(a,f){for(var c=a.coordinates,
b=-1,k=c.length;++b<k;)a=c[b],f.point(a[0],a[1],a[2])},LineString:function(a,f){$c(a.coordinates,f,0)},MultiLineString:function(a,f){for(var c=a.coordinates,b=-1,k=c.length;++b<k;)$c(c[b],f,0)},Polygon:function(a,f){le(a.coordinates,f)},MultiPolygon:function(a,f){for(var c=a.coordinates,b=-1,k=c.length;++b<k;)le(c[b],f)},GeometryCollection:function(a,f){for(var c=a.geometries,b=-1,k=c.length;++b<k;)dc(c[b],f)}};x.geo.area=function(a){Ec=0;x.geo.stream(a,Ea);return Ec};var Ec,gb=new Zc,Ea={sphere:function(){Ec+=
4*ja},point:B,lineStart:B,lineEnd:B,polygonStart:function(){gb.reset();Ea.lineStart=Eg},polygonEnd:function(){var a=2*gb;Ec+=0>a?4*ja+a:a;Ea.lineStart=Ea.lineEnd=Ea.point=B}};x.geo.bounds=function(){function a(a,c){L.push(H=[p=a,r=a]);c<t&&(t=c);c>v&&(v=c)}function f(c,f){var b=hb([c*ia,f*ia]);if(S){var h=sb(S,b),h=sb([h[1],-h[0],0],h);gc(h);var h=hc(h),k=c-C,n=0<k?1:-1,q=h[0]*ra*n,k=180<ka(k);k^(n*C<q&&q<n*c)?(h=h[1]*ra,h>v&&(v=h)):(q=(q+360)%360-180,k^(n*C<q&&q<n*c))?(h=-h[1]*ra,h<t&&(t=h)):(f<
t&&(t=f),f>v&&(v=f));k?c<C?e(p,c)>e(p,r)&&(r=c):e(c,r)>e(p,r)&&(p=c):r>=p?(c<p&&(p=c),c>r&&(r=c)):c>C?e(p,c)>e(p,r)&&(r=c):e(c,r)>e(p,r)&&(p=c)}else a(c,f);S=b;C=c}function b(){K.point=f}function n(){H[0]=p;H[1]=r;K.point=a;S=null}function k(a,c){if(S){var b=a-C;u+=180<ka(b)?b+(0<b?360:-360):b}else z=a,A=c;Ea.point(a,c);f(a,c)}function q(){Ea.lineStart()}function m(){k(z,A);Ea.lineEnd();1E-6<ka(u)&&(p=-(r=180));H[0]=p;H[1]=r;S=null}function e(a,c){return 0>(c-=a)?c+360:c}function g(a,c){return a[0]-
c[0]}function l(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var p,t,r,v,C,z,A,S,u,L,H,K={point:a,lineStart:b,lineEnd:n,polygonStart:function(){K.point=k;K.lineStart=q;K.lineEnd=m;u=0;Ea.polygonStart()},polygonEnd:function(){Ea.polygonEnd();K.point=a;K.lineStart=b;K.lineEnd=n;0>gb?(p=-(r=180),t=-(v=90)):1E-6<u?v=90:-1E-6>u&&(t=-90);H[0]=p;H[1]=r}};return function(a){v=r=-(p=t=Infinity);L=[];x.geo.stream(a,K);if(a=L.length){L.sort(g);for(var c=1,f=L[0],b,h=[f];c<a;++c)b=L[c],l(b[0],f)||l(b[1],
f)?(e(f[0],b[1])>e(f[0],f[1])&&(f[1]=b[1]),e(b[0],f[1])>e(f[0],f[1])&&(f[0]=b[0])):h.push(f=b);var k=-Infinity,n;a=h.length-1;c=0;for(f=h[a];c<=a;f=b,++c)b=h[c],(n=e(f[1],b[0]))>k&&(k=n,p=b[0],r=f[1])}L=H=null;return Infinity===p||Infinity===t?[[NaN,NaN],[NaN,NaN]]:[[p,t],[r,v]]}}();x.geo.centroid=function(a){Gb=jc=ib=jb=Ua=Ya=Za=Oa=tb=ub=$a=0;x.geo.stream(a,Ka);a=tb;var c=ub,b=$a,n=a*a+c*c+b*b;return 1E-12>n&&(a=Ya,c=Za,b=Oa,1E-6>jc&&(a=ib,c=jb,b=Ua),n=a*a+c*c+b*b,1E-12>n)?[NaN,NaN]:[Math.atan2(c,
a)*ra,ma(b/Math.sqrt(n))*ra]};var Gb,jc,ib,jb,Ua,Ya,Za,Oa,tb,ub,$a,Ka={sphere:B,point:bd,lineStart:me,lineEnd:ne,polygonStart:function(){Ka.lineStart=Fg},polygonEnd:function(){Ka.lineStart=me}},De=qe(vb,function(a){var c=NaN,b=NaN,n=NaN,k;return{lineStart:function(){a.lineStart();k=1},point:function(f,h){var q=0<f?ja:-ja,m=ka(f-c);if(1E-6>ka(m-ja))a.point(c,b=0<(b+h)/2?ya:-ya),a.point(n,b),a.lineEnd(),a.lineStart(),a.point(q,b),a.point(f,b),k=0;else if(n!==q&&m>=ja){1E-6>ka(c-n)&&(c-=1E-6*n);1E-6>
ka(f-q)&&(f-=1E-6*q);var m=c,e=b,g=f,l,p,r=Math.sin(m-g);b=1E-6<ka(r)?Math.atan((Math.sin(e)*(p=Math.cos(h))*Math.sin(g)-Math.sin(h)*(l=Math.cos(e))*Math.sin(m))/(l*p*r)):(e+h)/2;a.point(n,b);a.lineEnd();a.lineStart();a.point(q,b);k=0}a.point(c=f,b=h);n=q},lineEnd:function(){a.lineEnd();c=b=NaN},clean:function(){return 2-k}}},function(a,f,b,n){null==a?(b*=ya,n.point(-ja,b),n.point(0,b),n.point(ja,b),n.point(ja,0),n.point(ja,-b),n.point(0,-b),n.point(-ja,-b),n.point(-ja,0),n.point(-ja,b)):1E-6<ka(a[0]-
f[0])?(a=a[0]<f[0]?ja:-ja,b=b*a/2,n.point(-a,b),n.point(0,b),n.point(a,b)):n.point(f[0],f[1])},[-ja,-ja/2]);x.geo.clipExtent=function(){var a,f,b,n,k,q,m={stream:function(a){k&&(k.valid=!1);k=q(a);k.valid=!0;return k},extent:function(c){if(!arguments.length)return[[a,f],[b,n]];q=te(a=+c[0][0],f=+c[0][1],b=+c[1][0],n=+c[1][1]);k&&(k.valid=!1,k=null);return m}};return m.extent([[0,0],[960,500]])};(x.geo.conicEqualArea=function(){return dd(ve)}).raw=ve;x.geo.albers=function(){return x.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};x.geo.albersUsa=function(){function a(a){var c=a[0];a=a[1];k=null;(m(c,a),k)||(e(c,a),k)||g(c,a);return k}var f=x.geo.albers(),b=x.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n=x.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k,q={point:function(a,c){k=[a,c]}},m,e,g;a.invert=function(a){var c=f.scale(),h=f.translate(),k=(a[0]-h[0])/c,c=(a[1]-h[1])/c;return(.12<=c&&.234>c&&-.425<=k&&-.214>
k?b:.166<=c&&.234>c&&-.214<=k&&-.115>k?n:f).invert(a)};a.stream=function(a){var c=f.stream(a),h=b.stream(a),k=n.stream(a);return{point:function(a,f){c.point(a,f);h.point(a,f);k.point(a,f)},sphere:function(){c.sphere();h.sphere();k.sphere()},lineStart:function(){c.lineStart();h.lineStart();k.lineStart()},lineEnd:function(){c.lineEnd();h.lineEnd();k.lineEnd()},polygonStart:function(){c.polygonStart();h.polygonStart();k.polygonStart()},polygonEnd:function(){c.polygonEnd();h.polygonEnd();k.polygonEnd()}}};
a.precision=function(c){if(!arguments.length)return f.precision();f.precision(c);b.precision(c);n.precision(c);return a};a.scale=function(c){if(!arguments.length)return f.scale();f.scale(c);b.scale(.35*c);n.scale(c);return a.translate(f.translate())};a.translate=function(c){if(!arguments.length)return f.translate();var h=f.scale(),k=+c[0],w=+c[1];m=f.translate(c).clipExtent([[k-.455*h,w-.238*h],[k+.455*h,w+.238*h]]).stream(q).point;e=b.translate([k-.307*h,w+.201*h]).clipExtent([[k-.425*h+1E-6,w+.12*
h+1E-6],[k-.214*h-1E-6,w+.234*h-1E-6]]).stream(q).point;g=n.translate([k-.205*h,w+.212*h]).clipExtent([[k-.214*h+1E-6,w+.166*h+1E-6],[k-.115*h-1E-6,w+.234*h-1E-6]]).stream(q).point;return a};return a.scale(1070)};var Nd,fd,ab={point:B,lineStart:B,lineEnd:B,polygonStart:function(){fd=0;ab.lineStart=Jg},polygonEnd:function(){ab.lineStart=ab.lineEnd=ab.point=B;Nd+=ka(fd/2)}},Fc,Gc,Hc,Ic,Zh={point:function(a,f){a<Fc&&(Fc=a);a>Hc&&(Hc=a);f<Gc&&(Gc=f);f>Ic&&(Ic=f)},lineStart:B,lineEnd:B,polygonStart:B,
polygonEnd:B},La={point:kb,lineStart:xe,lineEnd:ye,polygonStart:function(){La.lineStart=Lg},polygonEnd:function(){La.point=kb;La.lineStart=xe;La.lineEnd=ye}};x.geo.path=function(){function a(a){a&&("function"===typeof b&&m.pointRadius(+b.apply(this,arguments)),e&&e.valid||(e=q(m)),x.geo.stream(a,e));return m.result()}function f(){e=null;return a}var b=4.5,n,k,q,m,e;a.area=function(a){Nd=0;x.geo.stream(a,q(ab));return Nd};a.centroid=function(a){ib=jb=Ua=Ya=Za=Oa=tb=ub=$a=0;x.geo.stream(a,q(La));return $a?
[tb/$a,ub/$a]:Oa?[Ya/Oa,Za/Oa]:Ua?[ib/Ua,jb/Ua]:[NaN,NaN]};a.bounds=function(a){Hc=Ic=-(Fc=Gc=Infinity);x.geo.stream(a,q(Zh));return[[Fc,Gc],[Hc,Ic]]};a.projection=function(a){if(!arguments.length)return n;q=(n=a)?a.stream||Ng(a):xa;return f()};a.context=function(a){if(!arguments.length)return k;m=null==(k=a)?new Kg:new Mg(a);"function"!==typeof b&&m.pointRadius(b);return f()};a.pointRadius=function(c){if(!arguments.length)return b;b="function"===typeof c?c:(m.pointRadius(+c),+c);return a};return a.projection(x.geo.albersUsa()).context(null)};
x.geo.transform=function(a){return{stream:function(c){c=new Ce(c);for(var f in a)c[f]=a[f];return c}}};Ce.prototype={point:function(a,f){this.stream.point(a,f)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};x.geo.projection=bb;x.geo.projectionMutator=ed;(x.geo.equirectangular=function(){return bb(Hb)}).raw=Hb.invert=
Hb;x.geo.rotation=function(a){function c(c){c=a(c[0]*ia,c[1]*ia);return c[0]*=ra,c[1]*=ra,c}a=gd(a[0]%360*ia,a[1]*ia,2<a.length?a[2]*ia:0);c.invert=function(c){c=a.invert(c[0]*ia,c[1]*ia);return c[0]*=ra,c[1]*=ra,c};return c};Ee.invert=Hb;x.geo.circle=function(){function a(){var a="function"===typeof f?f.apply(this,arguments):f,c=gd(-a[0]*ia,-a[1]*ia,0).invert,b=[];k(null,null,1,{point:function(a,f){b.push(a=c(a,f));a[0]*=ra;a[1]*=ra}});return{type:"Polygon",coordinates:[b]}}var f=[0,0],b,n=6,k;a.origin=
function(c){if(!arguments.length)return f;f=c;return a};a.angle=function(c){if(!arguments.length)return b;k=cd((b=+c)*ia,n*ia);return a};a.precision=function(c){if(!arguments.length)return n;k=cd(b*ia,(n=+c)*ia);return a};return a.angle(90)};x.geo.distance=function(a,f){var c=(f[0]-a[0])*ia,b=a[1]*ia,k=f[1]*ia,q=Math.cos(c),m=Math.sin(b),b=Math.cos(b),e=Math.sin(k),k=Math.cos(k),g;return Math.atan2(Math.sqrt((g=k*Math.sin(c))*g+(g=b*e-m*k*q)*g),m*e+b*k*q)};x.geo.graticule=function(){function a(){return{type:"MultiLineString",
coordinates:f()}}function f(){return x.range(Math.ceil(q/t)*t,k,t).map(z).concat(x.range(Math.ceil(l/v)*v,g,v).map(A)).concat(x.range(Math.ceil(n/p)*p,b,p).filter(function(a){return 1E-6<ka(a%t)}).map(C)).concat(x.range(Math.ceil(e/r)*r,m,r).filter(function(a){return 1E-6<ka(a%v)}).map(S))}var b,n,k,q,m,e,g,l,p=10,r=p,t=90,v=360,C,S,z,A,u=2.5;a.lines=function(){return f().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[z(q).concat(A(g).slice(1),
z(k).reverse().slice(1),A(l).reverse().slice(1))]}};a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()};a.majorExtent=function(c){if(!arguments.length)return[[q,l],[k,g]];q=+c[0][0];k=+c[1][0];l=+c[0][1];g=+c[1][1];q>k&&(c=q,q=k,k=c);l>g&&(c=l,l=g,g=c);return a.precision(u)};a.minorExtent=function(c){if(!arguments.length)return[[n,e],[b,m]];n=+c[0][0];b=+c[1][0];e=+c[0][1];m=+c[1][1];n>b&&(c=n,n=b,b=c);e>m&&(c=e,e=m,m=c);return a.precision(u)};a.step=function(c){return arguments.length?
a.majorStep(c).minorStep(c):a.minorStep()};a.majorStep=function(c){if(!arguments.length)return[t,v];t=+c[0];v=+c[1];return a};a.minorStep=function(c){if(!arguments.length)return[p,r];p=+c[0];r=+c[1];return a};a.precision=function(c){if(!arguments.length)return u;u=+c;C=Je(e,m,90);S=Ke(n,b,u);z=Je(l,g,90);A=Ke(q,k,u);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};x.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||
f.apply(this,arguments),k||n.apply(this,arguments)]}}var f=hd,b,n=id,k;a.distance=function(){return x.geo.distance(b||f.apply(this,arguments),k||n.apply(this,arguments))};a.source=function(c){if(!arguments.length)return f;f=c;b="function"===typeof c?null:c;return a};a.target=function(c){if(!arguments.length)return n;n=c;k="function"===typeof c?null:c;return a};a.precision=function(){return arguments.length?a:0};return a};x.geo.interpolate=function(a,f){return Og(a[0]*ia,a[1]*ia,f[0]*ia,f[1]*ia)};
x.geo.length=function(a){Od=0;x.geo.stream(a,Cb);return Od};var Od,Cb={sphere:B,point:B,lineStart:function(){function a(a,c){var h=Math.sin(c*=ia),k=Math.cos(c),q=ka((a*=ia)-f),m=Math.cos(q);Od+=Math.atan2(Math.sqrt((q=k*Math.sin(q))*q+(q=n*h-b*k*m)*q),b*h+n*k*m);f=a;b=h;n=k}var f,b,n;Cb.point=function(c,h){f=c*ia;b=Math.sin(h*=ia);n=Math.cos(h);Cb.point=a};Cb.lineEnd=function(){Cb.point=Cb.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B},Yf=Ib(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*
Math.asin(a/2)});(x.geo.azimuthalEqualArea=function(){return bb(Yf)}).raw=Yf;var Zf=Ib(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},xa);(x.geo.azimuthalEquidistant=function(){return bb(Zf)}).raw=Zf;(x.geo.conicConformal=function(){return dd(Le)}).raw=Le;(x.geo.conicEquidistant=function(){return dd(Me)}).raw=Me;var $f=Ib(function(a){return 1/a},Math.atan);(x.geo.gnomonic=function(){return bb($f)}).raw=$f;lc.invert=function(a,f){return[a,2*Math.atan(Math.exp(f))-ya]};(x.geo.mercator=function(){return Ne(lc)}).raw=
lc;var ag=Ib(function(){return 1},Math.asin);(x.geo.orthographic=function(){return bb(ag)}).raw=ag;var bg=Ib(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(x.geo.stereographic=function(){return bb(bg)}).raw=bg;jd.invert=function(a,f){return[-f,2*Math.atan(Math.exp(a))-ya]};(x.geo.transverseMercator=function(){var a=Ne(jd),f=a.center,b=a.rotate;a.center=function(a){return a?f([-a[1],a[0]]):(a=f(),[-a[1],a[0]])};a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=
b(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=jd;x.geom={};x.geom.hull=function(a){function c(a){if(3>a.length)return[];var c=qa(b),f=qa(n),h,k=a.length,m=[],e=[];for(h=0;h<k;h++)m.push([+c.call(this,a[h],h),+f.call(this,a[h],h),h]);m.sort(Pg);for(h=0;h<k;h++)e.push([m[h][0],-m[h][1]]);var c=Oe(m),e=Oe(e),f=e[0]===c[0],k=e[e.length-1]===c[c.length-1],g=[];for(h=c.length-1;0<=h;--h)g.push(a[m[c[h]][2]]);for(h=+f;h<e.length-k;++h)g.push(a[m[e[h]][2]]);return g}var b=wb,n=Jb;if(arguments.length)return c(a);
c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(n=a,c):n};return c};x.geom.polygon=function(a){Tb(a,Jc);return a};var Jc=x.geom.polygon.prototype=[];Jc.area=function(){for(var a=-1,f=this.length,b,n=this[f-1],k=0;++a<f;)b=n,n=this[a],k+=b[1]*n[0]-b[0]*n[1];return.5*k};Jc.centroid=function(a){var c=-1,b=this.length,n=0,k=0,q,m=this[b-1],e;for(arguments.length||(a=-1/(6*this.area()));++c<b;)q=m,m=this[c],e=q[0]*m[1]-m[0]*q[1],n+=(q[0]+m[0])*e,k+=(q[1]+m[1])*
e;return[n*a,k*a]};Jc.clip=function(a){for(var c,b=Qe(a),n=-1,k=this.length-Qe(this),q,m,e=this[k-1],g,l,p;++n<k;){c=a.slice();a.length=0;g=this[n];l=c[(m=c.length-b)-1];for(q=-1;++q<m;)p=c[q],kd(p,e,g)?(kd(l,e,g)||a.push(Pe(l,p,e,g)),a.push(p)):kd(l,e,g)&&a.push(Pe(l,p,e,g)),l=p;b&&a.push(a[0]);e=g}return a};var Ab,lb,yb,Se=[],md,Kb,We=[];Ue.prototype.prepare=function(){for(var a=this.edges,b=a.length,h;b--;)h=a[b].edge,h.b&&h.a||a.splice(b,1);a.sort(Ve);return a.length};oc.prototype={start:function(){return this.edge.l===
this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nd.prototype={insert:function(a,b){var c,f,k;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=Ye(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)f=c.U,c===f.L?(k=f.R)&&k.C?(c.C=k.C=!1,f.C=!0,a=f):(a===c.R&&(Mb(this,c),a=c,c=a.U),c.C=!1,f.C=!0,Nb(this,f)):(k=f.L)&&k.C?(c.C=k.C=!1,
f.C=!0,a=f):(a===c.L&&(Nb(this,c),a=c,c=a.U),c.C=!1,f.C=!0,Mb(this,f)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var c=a.U,b=a.L,n=a.R,k,q;k=b?n?Ye(n):b:n;c?c.L===a?c.L=k:c.R=k:this._=k;b&&n?(q=k.C,k.C=a.C,k.L=b,b.U=k,k!==n?(c=k.U,k.U=a.U,a=k.R,c.L=a,k.R=n,n.U=k):(k.U=c,c=k,a=k.R)):(q=a.C,a=k);a&&(a.U=c);if(!q)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===c.L){if(a=c.R,a.C&&(a.C=!1,c.C=!0,Mb(this,c),a=c.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=
!1,a.C=!0,Nb(this,a),a=c.R);a.C=c.C;c.C=a.R.C=!1;Mb(this,c);a=this._;break}}else if(a=c.L,a.C&&(a.C=!1,c.C=!0,Nb(this,c),a=c.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Mb(this,a),a=c.L);a.C=c.C;c.C=a.L.C=!1;Nb(this,c);a=this._;break}a.C=!0;a=c;c=c.U}while(!a.C);a&&(a.C=!1)}}};x.geom.voronoi=function(a){function c(a){var c=Array(a.length),f=e[0][0],h=e[0][1],k=e[1][0],n=e[1][1];od(b(a),e).cells.forEach(function(b,q){var m=b.edges,e=b.site;(c[q]=m.length?m.map(function(a){a=a.start();return[a.x,
a.y]}):e.x>=f&&e.x<=k&&e.y>=h&&e.y<=n?[[f,n],[k,n],[k,h],[f,h]]:[]).point=a[q]});return c}function b(a){return a.map(function(a,c){return{x:1E-6*Math.round(q(a,c)/1E-6),y:1E-6*Math.round(m(a,c)/1E-6),i:c}})}var n=wb,k=Jb,q=n,m=k,e=Kc;if(a)return c(a);c.links=function(a){return od(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};c.triangles=function(a){var c=[];od(b(a)).cells.forEach(function(b,f){for(var h=b.site,k=b.edges.sort(Ve),n=-1,q=
k.length,m,e=k[q-1].edge,e=e.l===h?e.r:e.l;++n<q;)m=e,e=k[n].edge,e=e.l===h?e.r:e.l,f<m.i&&f<e.i&&0>(h.x-e.x)*(m.y-h.y)-(h.x-m.x)*(e.y-h.y)&&c.push([a[f],a[m.i],a[e.i]])});return c};c.x=function(a){return arguments.length?(q=qa(n=a),c):n};c.y=function(a){return arguments.length?(m=qa(k=a),c):k};c.clipExtent=function(a){if(!arguments.length)return e===Kc?null:e;e=null==a?Kc:a;return c};c.size=function(a){return arguments.length?c.clipExtent(a&&[[0,0],a]):e===Kc?null:e&&e[1]};return c};var Kc=[[-1E6,
-1E6],[1E6,1E6]];x.geom.delaunay=function(a){return x.geom.voronoi().triangles(a)};x.geom.quadtree=function(a,b,h,n,k){function c(a){function c(a,c,b,f,h,k,n,m){if(!isNaN(b)&&!isNaN(f))if(a.leaf){var e=a.x,g=a.y;if(null!=e){if(!(.01>ka(e-b)+ka(g-f))){var l=a.point;a.x=a.y=a.point=null;q(a,l,e,g,h,k,n,m)}q(a,c,b,f,h,k,n,m)}else a.x=b,a.y=f,a.point=c}else q(a,c,b,f,h,k,n,m)}function q(a,b,f,h,k,n,m,q){var e=.5*(k+m),g=.5*(n+q),l=f>=e,p=h>=g,w=(p<<1)+l;a.leaf=!1;a=a.nodes[w]||(a.nodes[w]=Ze());l?k=e:
m=e;p?n=g:q=g;c(a,b,f,h,k,n,m,q)}var g,l=qa(f),w=qa(m),p,r,t,v,C,z,A,S;if(null!=b)C=b,z=h,A=n,S=k;else if(A=S=-(C=z=Infinity),p=[],r=[],v=a.length,e)for(t=0;t<v;++t)g=a[t],g.x<C&&(C=g.x),g.y<z&&(z=g.y),g.x>A&&(A=g.x),g.y>S&&(S=g.y),p.push(g.x),r.push(g.y);else for(t=0;t<v;++t){var u=+l(g=a[t],t);g=+w(g,t);u<C&&(C=u);g<z&&(z=g);u>A&&(A=u);g>S&&(S=g);p.push(u);r.push(g)}u=A-C;g=S-z;u>g?S=z+u:A=C+g;var L=Ze();L.add=function(a){c(L,a,+l(a,++t),+w(a,t),C,z,A,S)};L.visit=function(a){Ob(a,L,C,z,A,S)};t=
-1;if(null==b){for(;++t<v;)c(L,a[t],p[t],r[t],C,z,A,S);--t}else a.forEach(L.add);p=r=a=g=null;return L}var f=wb,m=Jb,e;if(e=arguments.length)return f=Vg,m=Wg,3===e&&(k=h,n=b,h=b=0),c(a);c.x=function(a){return arguments.length?(f=a,c):f};c.y=function(a){return arguments.length?(m=a,c):m};c.extent=function(a){if(!arguments.length)return null==b?null:[[b,h],[n,k]];null==a?b=h=n=k=null:(b=+a[0][0],h=+a[0][1],n=+a[1][0],k=+a[1][1]);return c};c.size=function(a){if(!arguments.length)return null==b?null:
[n-b,k-h];null==a?b=h=n=k=null:(b=h=0,n=+a[0],k=+a[1]);return c};return c};x.interpolateRgb=pd;x.interpolateObject=$e;x.interpolateNumber=Va;x.interpolateString=af;var qd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rd=new RegExp(qd.source,"g");x.interpolate=mb;x.interpolators=[function(a,b){var c=typeof b;return("string"===c?Vb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?pd:af:b instanceof pa?pd:Array.isArray(b)?pc:"object"===c&&isNaN(b)?$e:Va)(a,b)}];x.interpolateArray=pc;var cg=function(){return xa},$h=
x.map({linear:cg,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Yg},cubic:function(){return Zg},sin:function(){return ah},exp:function(){return bh},circle:function(){return ch},elastic:function(a,b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/Fa*Math.asin(1/a):(a=1,c=b/4);return function(f){return 1+a*Math.pow(2,-10*f)*Math.sin((f-c)*Fa/b)}},back:function(a){a||(a=1.70158);return function(c){return c*c*((a+1)*c-a)}},bounce:function(){return dh}}),ai=x.map({"in":xa,
out:bf,"in-out":cf,"out-in":function(a){return cf(bf(a))}});x.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in",b=$h.get(b)||cg,c=ai.get(c)||xa;return Xg(c(b.apply(null,Qf.call(arguments,1))))};x.interpolateHcl=function(a,b){a=x.hcl(a);b=x.hcl(b);var c=a.h,f=a.c,k=a.l,m=b.h-c,e=b.c-f,g=b.l-k;isNaN(e)&&(e=0,f=isNaN(f)?b.c:f);isNaN(m)?(m=0,c=isNaN(c)?b.h:c):180<m?m-=360:-180>m&&(m+=360);return function(a){return Qc(c+m*a,f+e*a,k+g*a)+""}};x.interpolateHsl=
function(a,b){a=x.hsl(a);b=x.hsl(b);var c=a.h,f=a.s,k=a.l,m=b.h-c,e=b.s-f,g=b.l-k;isNaN(e)&&(e=0,f=isNaN(f)?b.s:f);isNaN(m)?(m=0,c=isNaN(c)?b.h:c):180<m?m-=360:-180>m&&(m+=360);return function(a){return qb(c+m*a,f+e*a,k+g*a)+""}};x.interpolateLab=function(a,b){a=x.lab(a);b=x.lab(b);var c=a.l,f=a.a,k=a.b,m=b.l-c,e=b.a-f,g=b.b-k;return function(a){return Yd(c+m*a,f+e*a,k+g*a)+""}};x.interpolateRound=df;x.transform=function(a){var c=Ma.createElementNS(x.ns.prefix.svg,"g");return(x.transform=function(a){if(null!=
a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new ef(b?b.matrix:bi)})(a)};ef.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bi={a:1,b:0,c:0,d:1,e:0,f:0};x.interpolateTransform=gf;x.layout={};x.layout.bundle=function(){return function(a){for(var c=[],b=-1,m=a.length;++b<m;)c.push(gh(a[b]));return c}};x.layout.chord=function(){function a(){var a={},c=[],f=x.range(e),h=[],n,w,r,
v,C;m=[];k=[];n=0;for(v=-1;++v<e;){w=0;for(C=-1;++C<e;)w+=q[v][C];c.push(w);h.push(x.range(e));n+=w}l&&f.sort(function(a,b){return l(c[a],c[b])});p&&h.forEach(function(a,c){a.sort(function(a,b){return p(q[c][a],q[c][b])})});n=(Fa-g*e)/n;w=0;for(v=-1;++v<e;){r=w;for(C=-1;++C<e;){var z=f[v],A=h[z][C],S=q[z][A],u=w,L=w+=S*n;a[z+"-"+A]={index:z,subindex:A,startAngle:u,endAngle:L,value:S}}k[z]={index:z,startAngle:r,endAngle:w,value:(w-r)/n};w+=g}for(v=-1;++v<e;)for(C=v-1;++C<e;)f=a[v+"-"+C],h=a[C+"-"+
v],(f.value||h.value)&&m.push(f.value<h.value?{source:h,target:f}:{source:f,target:h});t&&b()}function b(){m.sort(function(a,c){return t((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var h={},m,k,q,e,g=0,l,p,t;h.matrix=function(a){if(!arguments.length)return q;e=(q=a)&&q.length;m=k=null;return h};h.padding=function(a){if(!arguments.length)return g;g=a;m=k=null;return h};h.sortGroups=function(a){if(!arguments.length)return l;l=a;m=k=null;return h};h.sortSubgroups=function(a){if(!arguments.length)return p;
p=a;m=null;return h};h.sortChords=function(a){if(!arguments.length)return t;t=a;m&&b();return h};h.chords=function(){m||a();return m};h.groups=function(){k||a();return k};return h};x.layout.force=function(){function a(a){return function(c,b,f,h){if(c.point!==a){f=c.cx-a.x;var k=c.cy-a.y;b=h-b;h=f*f+k*k;if(b*b/C<h)return h<r&&(b=c.charge/h,a.px-=f*b,a.py-=k*b),!0;c.point&&h&&h<r&&(b=c.pointCharge/h,a.px-=f*b,a.py-=k*b)}return!c.charge}}function b(a){a.px=x.event.x;a.py=x.event.y;h.resume()}var h={},
m=x.dispatch("start","tick","end"),k=[1,1],q,e,g=.9,l=ci,p=di,t=-30,r=ei,v=.1,C=.64,z=[],A=[],S,u,L;h.tick=function(){if(.005>(e*=.99))return m.end({type:"end",alpha:e=0}),!0;var c=z.length,b=A.length,f,h,n,q,l,p,w;for(f=0;f<b;++f)if(h=A[f],n=h.source,q=h.target,p=q.x-n.x,w=q.y-n.y,l=p*p+w*w)l=e*u[f]*((l=Math.sqrt(l))-S[f])/l,p*=l,w*=l,q.x-=p*(l=n.weight/(q.weight+n.weight)),q.y-=w*l,n.x+=p*(l=1-l),n.y+=w*l;if(l=e*v)if(p=k[0]/2,w=k[1]/2,f=-1,l)for(;++f<c;)h=z[f],h.x+=(p-h.x)*l,h.y+=(w-h.y)*l;if(t)for(jf(b=
x.geom.quadtree(z),e,L),f=-1;++f<c;)(h=z[f]).fixed||b.visit(a(h));for(f=-1;++f<c;)h=z[f],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*g,h.y-=(h.py-(h.py=h.y))*g);m.tick({type:"tick",alpha:e})};h.nodes=function(a){if(!arguments.length)return z;z=a;return h};h.links=function(a){if(!arguments.length)return A;A=a;return h};h.size=function(a){if(!arguments.length)return k;k=a;return h};h.linkDistance=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return h};h.distance=h.linkDistance;
h.linkStrength=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return h};h.friction=function(a){if(!arguments.length)return g;g=+a;return h};h.charge=function(a){if(!arguments.length)return t;t="function"===typeof a?a:+a;return h};h.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(r);r=a*a;return h};h.gravity=function(a){if(!arguments.length)return v;v=+a;return h};h.theta=function(a){if(!arguments.length)return Math.sqrt(C);C=a*a;return h};h.alpha=function(a){if(!arguments.length)return e;
a=+a;e?e=0<a?a:0:0<a&&(m.start({type:"start",alpha:e=a}),x.timer(h.tick));return h};h.start=function(){function a(a,f){if(!q){q=Array(b);for(k=0;k<b;++k)q[k]=[];for(k=0;k<m;++k){var h=A[k];q[h.source.index].push(h.target);q[h.target.index].push(h.source)}}for(var h=q[c],k=-1,m=h.length,n;++k<m;)if(!isNaN(n=h[k][a]))return n;return Math.random()*f}var c,b=z.length,f=A.length,m=k[0],n=k[1],q,e;for(c=0;c<b;++c)(e=z[c]).index=c,e.weight=0;for(c=0;c<f;++c)e=A[c],"number"==typeof e.source&&(e.source=z[e.source]),
"number"==typeof e.target&&(e.target=z[e.target]),++e.source.weight,++e.target.weight;for(c=0;c<b;++c)e=z[c],isNaN(e.x)&&(e.x=a("x",m)),isNaN(e.y)&&(e.y=a("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);S=[];if("function"===typeof l)for(c=0;c<f;++c)S[c]=+l.call(this,A[c],c);else for(c=0;c<f;++c)S[c]=l;u=[];if("function"===typeof p)for(c=0;c<f;++c)u[c]=+p.call(this,A[c],c);else for(c=0;c<f;++c)u[c]=p;L=[];if("function"===typeof t)for(c=0;c<b;++c)L[c]=+t.call(this,z[c],c);else for(c=0;c<b;++c)L[c]=
t;return h.resume()};h.resume=function(){return h.alpha(.1)};h.stop=function(){return h.alpha(0)};h.drag=function(){q||(q=x.behavior.drag().origin(xa).on("dragstart.force",hh).on("drag.force",b).on("dragend.force",ih));if(!arguments.length)return q;this.on("mouseover.force",jh).on("mouseout.force",kh).call(q)};return x.rebind(h,m,"on")};var ci=20,di=1,ei=Infinity;x.layout.hierarchy=function(){function a(c){var f=[c],k=[],n;for(c.depth=0;null!=(n=f.pop());)if(k.push(n),(g=h.call(a,n,n.depth))&&(e=
g.length)){for(var e,g,l;0<=--e;)f.push(l=g[e]),l.parent=n,l.depth=n.depth+1;m&&(n.value=0);n.children=g}else m&&(n.value=+m.call(a,n,n.depth)||0),delete n.children;Pa(c,function(a){var c,f;b&&(c=a.children)&&c.sort(b);m&&(f=a.parent)&&(f.value+=a.value)});return k}var b=oh,h=mh,m=nh;a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.children=function(c){if(!arguments.length)return h;h=c;return a};a.value=function(c){if(!arguments.length)return m;m=c;return a};a.revalue=function(c){m&&
(Qb(c,function(a){a.children&&(a.value=0)}),Pa(c,function(c){var b;c.children||(c.value=+m.call(a,c,c.depth)||0);if(b=c.parent)b.value+=c.value}));return c};return a};x.layout.partition=function(){function a(c,b,f,h){var k=c.children;c.x=b;c.y=c.depth*h;c.dx=f;c.dy=h;if(k&&(n=k.length)){var m=-1,n,e;for(f=c.value?f/c.value:0;++m<n;)a(e=k[m],b,c=e.value*f,h),b+=c}}function b(a){a=a.children;var c=0;if(a&&(h=a.length))for(var f=-1,h;++f<h;)c=Math.max(c,b(a[f]));return 1+c}function h(c,f){var h=m.call(this,
c,f);a(h[0],0,k[0],k[1]/b(h[0]));return h}var m=x.layout.hierarchy(),k=[1,1];h.size=function(a){if(!arguments.length)return k;k=a;return h};return Pb(h,m)};x.layout.pie=function(){function a(c){var f=c.map(function(c,f){return+b.call(a,c,f)}),n=+("function"===typeof m?m.apply(this,arguments):m),e=(("function"===typeof k?k.apply(this,arguments):k)-n)/x.sum(f),q=x.range(c.length);null!=h&&q.sort(h===dg?function(a,c){return f[c]-f[a]}:function(a,b){return h(c[a],c[b])});var g=[];q.forEach(function(a){var b;
g[a]={data:c[a],value:b=f[a],startAngle:n,endAngle:n+=b*e}});return g}var b=Number,h=dg,m=0,k=Fa;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(c){if(!arguments.length)return h;h=c;return a};a.startAngle=function(c){if(!arguments.length)return m;m=c;return a};a.endAngle=function(c){if(!arguments.length)return k;k=c;return a};return a};var dg={};x.layout.stack=function(){function a(c,f){var n=c.map(function(c,f){return b.call(a,c,f)}),q=n.map(function(c){return c.map(function(c,
b){return[e.call(a,c,b),g.call(a,c,b)]})}),l=h.call(a,q,f),n=x.permute(n,l),q=x.permute(q,l),l=m.call(a,q,f),p=n.length,t=n[0].length,w,r,v;for(r=0;r<t;++r)for(k.call(a,n[0][r],v=l[r],q[0][r][1]),w=1;w<p;++w)k.call(a,n[w][r],v+=q[w-1][r][1],q[w][r][1]);return c}var b=xa,h=sd,m=td,k=rh,e=ph,g=qh;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(c){if(!arguments.length)return h;h="function"===typeof c?c:fi.get(c)||sd;return a};a.offset=function(c){if(!arguments.length)return m;
m="function"===typeof c?c:gi.get(c)||td;return a};a.x=function(c){if(!arguments.length)return e;e=c;return a};a.y=function(c){if(!arguments.length)return g;g=c;return a};a.out=function(c){if(!arguments.length)return k;k=c;return a};return a};var fi=x.map({"inside-out":function(a){var c=a.length,b,m=a.map(sh),k=a.map(th),e=x.range(c).sort(function(a,c){return m[a]-m[c]}),g=0,l=0,p=[],t=[];for(a=0;a<c;++a)b=e[a],g<l?(g+=k[b],p.push(b)):(l+=k[b],t.push(b));return t.reverse().concat(p)},reverse:function(a){return x.range(a.length).reverse()},
"default":sd}),gi=x.map({silhouette:function(a){var c=a.length,b=a[0].length,m=[],k=0,e,g,l,p=[];for(g=0;g<b;++g){for(l=e=0;e<c;e++)l+=a[e][g][1];l>k&&(k=l);m.push(l)}for(g=0;g<b;++g)p[g]=(k-m[g])/2;return p},wiggle:function(a){var c=a.length,b=a[0],m=b.length,k,e,g,l,p,t,r,v,C,z=[];z[0]=v=C=0;for(e=1;e<m;++e){for(l=k=0;k<c;++k)l+=a[k][e][1];p=k=0;for(r=b[e][0]-b[e-1][0];k<c;++k){g=0;for(t=(a[k][e][1]-a[k][e-1][1])/(2*r);g<k;++g)t+=(a[g][e][1]-a[g][e-1][1])/r;p+=t*a[k][e][1]}z[e]=v-=l?p/l*r:0;v<C&&
(C=v)}for(e=0;e<m;++e)z[e]-=C;return z},expand:function(a){var c=a.length,b=a[0].length,m=1/c,k,e,g,l=[];for(e=0;e<b;++e){for(g=k=0;k<c;k++)g+=a[k][e][1];if(g)for(k=0;k<c;k++)a[k][e][1]/=g;else for(k=0;k<c;k++)a[k][e][1]=m}for(e=0;e<b;++e)l[e]=0;return l},zero:td});x.layout.histogram=function(){function a(a,c){var f=[],e=a.map(h,this),n=m.call(this,e,c),q=k.call(this,n,e,c),g;c=-1;for(var l=e.length,p=q.length-1,t=b?1:1/l;++c<p;)g=f[c]=[],g.dx=q[c+1]-(g.x=q[c]),g.y=0;if(0<p)for(c=-1;++c<l;)g=e[c],
g>=n[0]&&g<=n[1]&&(g=f[x.bisect(q,g,1,p)-1],g.y+=t,g.push(a[c]));return f}var b=!0,h=Number,m=wh,k=vh;a.value=function(c){if(!arguments.length)return h;h=c;return a};a.range=function(c){if(!arguments.length)return m;m=qa(c);return a};a.bins=function(c){if(!arguments.length)return k;k="number"===typeof c?function(a){return kf(a,c)}:qa(c);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};x.layout.pack=function(){function a(a,c){var f=b.call(this,a,c),e=f[0],n=
m[0],q=m[1],g=null==k?Math.sqrt:"function"===typeof k?k:function(){return k};e.x=e.y=0;Pa(e,function(a){a.r=+g(a.value)});Pa(e,nf);if(h){var l=h*(k?1:Math.max(2*e.r/n,2*e.r/q))/2;Pa(e,function(a){a.r+=l});Pa(e,nf);Pa(e,function(a){a.r-=l})}pf(e,n/2,q/2,k?1:1/Math.max(2*e.r/n,2*e.r/q));return f}var b=x.layout.hierarchy().sort(xh),h=0,m=[1,1],k;a.size=function(c){if(!arguments.length)return m;m=c;return a};a.radius=function(c){if(!arguments.length)return k;k=null==c||"function"===typeof c?c:+c;return a};
a.padding=function(c){if(!arguments.length)return h;h=+c;return a};return Pb(a,b)};x.layout.tree=function(){function a(a,c){var f=e.call(this,a,c),n=f[0],q=b(n);Pa(q,h);q.parent.m=-q.z;Qb(q,m);if(p)Qb(n,k);else{var t=n,r=n,v=n;Qb(n,function(a){a.x<t.x&&(t=a);a.x>r.x&&(r=a);a.depth>v.depth&&(v=a)});var w=g(t,r)/2-t.x,C=l[0]/(r.x+g(r,t)/2+w),z=l[1]/(v.depth||1);Qb(n,function(a){a.x=(a.x+w)*C;a.y=a.depth*z})}return f}function b(a){a={A:null,children:[a]};for(var c=[a],b;null!=(b=c.pop());)for(var f=
b.children,h,k=0,m=f.length;k<m;++k)c.push((f[k]=h={_:f[k],parent:b,children:(h=f[k].children)&&h.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:k}).a=h);return a.children[0]}function h(a){var c=a.children,b=a.parent.children,f=a.i?b[a.i-1]:null;if(c.length){for(var h=0,k=0,m=a.children,e=m.length,n;0<=--e;)n=m[e],n.z+=h,n.m+=h,h+=n.s+(k+=n.c);c=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+g(a._,f._),a.m=a.z-c):a.z=c}else f&&(a.z=f.z+g(a._,f._));c=a.parent;b=a.parent.A||b[0];if(f){k=h=a;m=h.parent.children[0];
e=h.m;n=k.m;for(var q=f.m,l=m.m,p;f=wd(f),h=vd(h),f&&h;){m=vd(m);k=wd(k);k.a=a;p=f.z+q-h.z-e+g(f._,h._);if(0<p){var t=f.a.parent===a.parent?f.a:b,r=a,v=p,w=v/(r.i-t.i);r.c-=w;r.s+=v;t.c+=w;r.z+=v;r.m+=v;e+=p;n+=p}q+=f.m;e+=h.m;l+=m.m;n+=k.m}f&&!wd(k)&&(k.t=f,k.m+=q-n);h&&!vd(m)&&(m.t=h,m.m+=e-l,b=a)}c.A=b}function m(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function k(a){a.x*=l[0];a.y=a.depth*l[1]}var e=x.layout.hierarchy().sort(null).value(null),g=qf,l=[1,1],p=null;a.separation=function(c){if(!arguments.length)return g;
g=c;return a};a.size=function(c){if(!arguments.length)return p?null:l;p=null==(l=c)?k:null;return a};a.nodeSize=function(c){if(!arguments.length)return p?l:null;p=null==(l=c)?null:k;return a};return Pb(a,e)};x.layout.cluster=function(){function a(a,c){var f=b.call(this,a,c),e=f[0],n,q=0;Pa(e,function(a){var c=a.children;c&&c.length?(a.x=Bh(c),a.y=Ah(c)):(a.x=n?q+=h(a,n):0,a.y=0,n=a)});var g=rf(e),l=sf(e),p=g.x-h(g,l)/2,r=l.x+h(l,g)/2;Pa(e,k?function(a){a.x=(a.x-e.x)*m[0];a.y=(e.y-a.y)*m[1]}:function(a){a.x=
(a.x-p)/(r-p)*m[0];a.y=(1-(e.y?a.y/e.y:1))*m[1]});return f}var b=x.layout.hierarchy().sort(null).value(null),h=qf,m=[1,1],k=!1;a.separation=function(c){if(!arguments.length)return h;h=c;return a};a.size=function(c){if(!arguments.length)return k?null:m;k=null==(m=c);return a};a.nodeSize=function(c){if(!arguments.length)return k?m:null;k=null!=(m=c);return a};return Pb(a,b)};x.layout.treemap=function(){function a(a,c){for(var b=-1,f=a.length,h,k;++b<f;)k=(h=a[b]).value*(0>c?0:c),h.area=isNaN(k)||0>=
k?0:k}function b(c){var f=c.children;if(f&&f.length){var h=r(c),k=[],e=f.slice(),n=Infinity,g,q="slice"===C?h.dx:"dice"===C?h.dy:"slice-dice"===C?c.depth&1?h.dy:h.dx:Math.min(h.dx,h.dy);a(e,h.dx*h.dy/c.value);for(k.area=0;0<(c=e.length);){k.push(c=e[c-1]);k.area+=c.area;if(!(c="squarify"!==C)){c=q;for(var l=k.area,p=0,t=Infinity,v=-1,w=k.length;++v<w;)if(g=k[v].area)g<t&&(t=g),g>p&&(p=g);l*=l;c*=c;c=(g=l?Math.max(c*p*z/l,l/(c*t*z)):Infinity)<=n}c?(e.pop(),n=g):(k.area-=k.pop().area,m(k,q,h,!1),q=
Math.min(h.dx,h.dy),k.length=k.area=0,n=Infinity)}k.length&&(m(k,q,h,!0),k.length=k.area=0);f.forEach(b)}}function h(c){var b=c.children;if(b&&b.length){var f=r(c),k=b.slice(),e=[];a(k,f.dx*f.dy/c.value);for(e.area=0;c=k.pop();)e.push(c),e.area+=c.area,null!=c.z&&(m(e,c.z?f.dx:f.dy,f,!k.length),e.length=e.area=0);b.forEach(h)}}function m(a,c,b,f){var h=-1,k=a.length,m=b.x,e=b.y,n=c?g(a.area/c):0,q;if(c==b.dx){if(f||n>b.dy)n=b.dy;for(;++h<k;)q=a[h],q.x=m,q.y=e,q.dy=n,m+=q.dx=Math.min(b.x+b.dx-m,n?
g(q.area/n):0);q.z=!0;q.dx+=b.x+b.dx-m;b.y+=n;b.dy-=n}else{if(f||n>b.dx)n=b.dx;for(;++h<k;)q=a[h],q.x=m,q.y=e,q.dx=n,e+=q.dy=Math.min(b.y+b.dy-e,n?g(q.area/n):0);q.z=!1;q.dy+=b.y+b.dy-e;b.x+=n;b.dx-=n}}function k(c){c=v||e(c);var f=c[0];f.x=0;f.y=0;f.dx=l[0];f.dy=l[1];v&&e.revalue(f);a([f],f.dx*f.dy/f.value);(v?h:b)(f);t&&(v=c);return c}var e=x.layout.hierarchy(),g=Math.round,l=[1,1],p=null,r=xd,t=!1,v,C="squarify",z=.5*(1+Math.sqrt(5));k.size=function(a){if(!arguments.length)return l;l=a;return k};
k.padding=function(a){function c(c){var b=a.call(k,c,c.depth);return null==b?xd(c):tf(c,"number"===typeof b?[b,b,b,b]:b)}function b(c){return tf(c,a)}if(!arguments.length)return p;var f;r=null==(p=a)?xd:"function"===(f=typeof a)?c:"number"===f?(a=[a,a,a,a],b):b;return k};k.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return k};k.sticky=function(a){if(!arguments.length)return t;t=a;v=null;return k};k.ratio=function(a){if(!arguments.length)return z;z=a;return k};k.mode=
function(a){if(!arguments.length)return C;C=a+"";return k};return Pb(k,e)};x.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,f;do c=2*Math.random()-1,f=2*Math.random()-1,f=c*c+f*f;while(!f||1<f);return a+b*c*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(){var a=x.random.normal.apply(x,arguments);return function(){return Math.exp(a())}},bates:function(a){var c=x.random.irwinHall(a);return function(){return c()/a}},irwinHall:function(a){return function(){for(var c=
0,b=0;b<a;b++)c+=Math.random();return c}}};x.scale={};var Dh={floor:xa,ceil:xa};x.scale.linear=function(){return vf([0,1],[0,1],mb,!1)};var Gh={s:1,g:1,p:1,r:1,e:1};x.scale.log=function(){return wf(x.scale.linear().domain([0,1]),10,!0,[1,10])};var xf=x.format(".0e"),Hh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};x.scale.pow=function(){return yf(x.scale.linear(),1,[0,1])};x.scale.sqrt=function(){return x.scale.pow().exponent(.5)};x.scale.ordinal=function(){return zf([],
{t:"range",a:[[]]})};x.scale.category10=function(){return x.scale.ordinal().range(hi)};x.scale.category20=function(){return x.scale.ordinal().range(ii)};x.scale.category20b=function(){return x.scale.ordinal().range(ji)};x.scale.category20c=function(){return x.scale.ordinal().range(ki)};var hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ub),ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ub),ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ub),ki=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ub);x.scale.quantile=function(){return Af([],[])};x.scale.quantize=
function(){return Bf(0,1,[0,1])};x.scale.threshold=function(){return Cf([.5],[0,1])};x.scale.identity=function(){return Df([0,1])};x.svg={};x.svg.arc=function(){function a(){var a=b.apply(this,arguments),c=h.apply(this,arguments),f=m.apply(this,arguments)+nb,e=k.apply(this,arguments)+nb,n=(e<f&&(n=f,f=e,e=n),e-f),g=n<ja?"0":"1",l=Math.cos(f),f=Math.sin(f),p=Math.cos(e),e=Math.sin(e);return n>=li?a?"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+
a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z":a?"M"+c*l+","+c*f+"A"+c+","+c+" 0 "+g+",1 "+c*p+","+c*e+"L"+a*p+","+a*e+"A"+a+","+a+" 0 "+g+",0 "+a*l+","+a*f+"Z":"M"+c*l+","+c*f+"A"+c+","+c+" 0 "+g+",1 "+c*p+","+c*e+"L0,0Z"}var b=Ih,h=Jh,m=Ef,k=Ff;a.innerRadius=function(c){if(!arguments.length)return b;b=qa(c);return a};a.outerRadius=function(c){if(!arguments.length)return h;h=qa(c);return a};a.startAngle=function(c){if(!arguments.length)return m;m=qa(c);
return a};a.endAngle=function(c){if(!arguments.length)return k;k=qa(c);return a};a.centroid=function(){var a=(b.apply(this,arguments)+h.apply(this,arguments))/2,c=(m.apply(this,arguments)+k.apply(this,arguments))/2+nb;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var nb=-ya,li=Fa-1E-6;x.svg.line=function(){return Gf(xa)};var Ad=x.map({linear:Ga,"linear-closed":function(a){return Ga(a)+"Z"},step:function(a){for(var c=0,b=a.length,m=a[0],k=[m[0],",",m[1]];++c<b;)k.push("H",(m[0]+(m=a[c])[0])/2,"V",
m[1]);1<b&&k.push("H",m[0]);return k.join("")},"step-before":Bd,"step-after":Cd,basis:Hf,"basis-open":function(a){if(4>a.length)return Ga(a);for(var c=[],b=-1,m=a.length,k,e=[0],g=[0];3>++b;)k=a[b],e.push(k[0]),g.push(k[1]);c.push(Ha(db,e)+","+Ha(db,g));for(--b;++b<m;)k=a[b],e.shift(),e.push(k[0]),g.shift(),g.push(k[1]),Ed(c,e,g);return c.join("")},"basis-closed":function(a){for(var c,b=-1,m=a.length,k=m+4,e,g=[],l=[];4>++b;)e=a[b%m],g.push(e[0]),l.push(e[1]);c=[Ha(db,g),",",Ha(db,l)];for(--b;++b<
k;)e=a[b%m],g.shift(),g.push(e[0]),l.shift(),l.push(e[1]),Ed(c,g,l);return c.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var f=a[0][0],k=a[0][1],m=a[c][0]-f,e=a[c][1]-k,g=-1,l,p;++g<=c;)l=a[g],p=g/c,l[0]=b*l[0]+(1-b)*(f+p*m),l[1]=b*l[1]+(1-b)*(k+p*e);return Hf(a)},cardinal:function(a,b){return 3>a.length?Ga(a):a[0]+uc(a,Dd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ga(a):a[1]+uc(a.slice(1,a.length-1),Dd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ga(a):a[0]+uc((a.push(a[0]),
a),Dd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Ga(a);else{var c=a[0],b=[],m,k,e,g;m=0;k=a.length-1;var l=[];e=a[1];for(g=l[0]=Fd(a[0],e);++m<k;)l[m]=(g+(g=Fd(e,e=a[m+1])))/2;l[m]=g;for(var p=-1,t=a.length-1;++p<t;)m=Fd(a[p],a[p+1]),1E-6>ka(m)?l[p]=l[p+1]=0:(k=l[p]/m,e=l[p+1]/m,g=k*k+e*e,9<g&&(g=3*m/Math.sqrt(g),l[p]=g*k,l[p+1]=g*e));for(p=-1;++p<=t;)g=(a[Math.min(t,p+1)][0]-a[Math.max(0,p-1)][0])/(6*(1+l[p]*l[p])),b.push([g||0,l[p]*g||0]);a=c+uc(a,b)}return a}});
Ad.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var If=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],db=[0,1/6,2/3,1/6];x.svg.line.radial=function(){var a=Gf(Kf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Bd.reverse=Cd;Cd.reverse=Bd;x.svg.area=function(){return Lf(xa)};x.svg.area.radial=function(){var a=Lf(Kf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};
x.svg.chord=function(){function a(a,c){var f=b(this,m,a,c),e=b(this,k,a,c);return"M"+f.p0+h(f.r,f.p1,f.a1-f.a0)+(f.a0==e.a0&&f.a1==e.a1?"Q 0,0 "+f.p0:"Q 0,0 "+e.p0+h(e.r,e.p1,e.a1-e.a0)+("Q 0,0 "+f.p0))+"Z"}function b(a,c,b,f){var h=c.call(a,b,f);c=e.call(a,h,f);b=g.call(a,h,f)+nb;a=l.call(a,h,f)+nb;return{r:c,a0:b,a1:a,p0:[c*Math.cos(b),c*Math.sin(b)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function h(a,c,b){return"A"+a+","+a+" 0 "+ +(b>ja)+",1 "+c}var m=hd,k=id,e=Kh,g=Ef,l=Ff;a.radius=function(c){if(!arguments.length)return e;
e=qa(c);return a};a.source=function(c){if(!arguments.length)return m;m=qa(c);return a};a.target=function(c){if(!arguments.length)return k;k=qa(c);return a};a.startAngle=function(c){if(!arguments.length)return g;g=qa(c);return a};a.endAngle=function(c){if(!arguments.length)return l;l=qa(c);return a};return a};x.svg.diagonal=function(){function a(a,c){var f=b.call(this,a,c),k=h.call(this,a,c),e=(f.y+k.y)/2,f=[f,{x:f.x,y:e},{x:k.x,y:e},k],f=f.map(m);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=hd,
h=id,m=Mf;a.source=function(c){if(!arguments.length)return b;b=qa(c);return a};a.target=function(c){if(!arguments.length)return h;h=qa(c);return a};a.projection=function(c){if(!arguments.length)return m;m=c;return a};return a};x.svg.diagonal.radial=function(){var a=x.svg.diagonal(),b=Mf,h=a.projection;a.projection=function(a){return arguments.length?h(Lh(b=a)):b};return a};x.svg.symbol=function(){function a(a,c){return(eg.get(b.call(this,a,c))||Nf)(h.call(this,a,c))}var b=Nh,h=Mh;a.type=function(c){if(!arguments.length)return b;
b=qa(c);return a};a.size=function(c){if(!arguments.length)return h;h=qa(c);return a};return a};var eg=x.map({circle:Nf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*fg));var c=a*fg;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Lc);var c=a*Lc/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Lc);var c=a*Lc/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});x.svg.symbolTypes=eg.keys();var Lc=Math.sqrt(3),fg=Math.tan(30*ia),va=[],Uf=0,pb,yc;va.call=oa.call;va.empty=oa.empty;va.node=oa.node;va.size=oa.size;x.transition=function(a){return arguments.length?pb?a.transition():a:Tf.transition()};x.transition.prototype=va;va.select=function(a){var c=this.id,b=[],m,k,e;a=T(a);for(var g=-1,l=this.length;++g<
l;){b.push(m=[]);for(var p=this[g],t=-1,r=p.length;++t<r;)(e=p[t])&&(k=a.call(e,e.__data__,t,g))?("__data__"in e&&(k.__data__=e.__data__),vc(k,t,c,e.__transition__[c]),m.push(k)):m.push(null)}return Rb(b,c)};va.selectAll=function(a){var c=this.id,b=[],m,k,e,g;a=J(a);for(var l=-1,p=this.length;++l<p;)for(var t=this[l],r=-1,v=t.length;++r<v;)if(m=t[r]){g=m.__transition__[c];k=a.call(m,m.__data__,r,l);b.push(m=[]);for(var C=-1,z=k.length;++C<z;)(e=k[C])&&vc(e,C,c,g),m.push(e)}return Rb(b,c)};va.filter=
function(a){var c=[],b,m,e;"function"!==typeof a&&(a=V(a));for(var g=0,l=this.length;g<l;g++){c.push(b=[]);m=this[g];for(var p=0,t=m.length;p<t;p++)(e=m[p])&&a.call(e,e.__data__,p,g)&&b.push(e)}return Rb(c,this.id)};va.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):Y(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(f){f.__transition__[c].tween.set(a,b)})};va.attr=function(a,b){function c(){this.removeAttribute(l)}function f(){this.removeAttributeNS(l.space,
l.local)}function m(a){return null==a?c:(a+="",function(){var c=this.getAttribute(l),b;return c!==a&&(b=g(c,a),function(a){this.setAttribute(l,b(a))})})}function e(a){return null==a?f:(a+="",function(){var c=this.getAttributeNS(l.space,l.local),b;return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(l.space,l.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?gf:mb,l=x.ns.qualify(a);return Gd(this,"attr."+a,b,l.local?e:m)};va.attrTween=function(a,
b){function c(a,c){var f=b.call(this,a,c,this.getAttribute(m));return f&&function(a){this.setAttribute(m,f(a))}}function f(a,c){var f=b.call(this,a,c,this.getAttributeNS(m.space,m.local));return f&&function(a){this.setAttributeNS(m.space,m.local,f(a))}}var m=x.ns.qualify(a);return this.tween("attr."+a,m.local?f:c)};va.style=function(a,b,m){function c(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!==typeof a){2>f&&(b="");for(m in a)this.style(m,a[m],b);return this}m=""}return Gd(this,
"style."+a,b,function(b){return null==b?c:(b+="",function(){var c=Aa.getComputedStyle(this,null).getPropertyValue(a),f;return c!==b&&(f=mb(c,b),function(c){this.style.setProperty(a,f(c),m)})})})};va.styleTween=function(a,b,m){3>arguments.length&&(m="");return this.tween("style."+a,function(c,f){var h=b.call(this,c,f,Aa.getComputedStyle(this,null).getPropertyValue(a));return h&&function(c){this.style.setProperty(a,h(c),m)}})};va.text=function(a){return Gd(this,"text",a,Oh)};va.remove=function(){return this.each("end.transition",
function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};va.ease=function(a){var c=this.id;if(1>arguments.length)return this.node().__transition__[c].ease;"function"!==typeof a&&(a=x.ease.apply(x,arguments));return Y(this,function(b){b.__transition__[c].ease=a})};va.delay=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].delay:Y(this,"function"===typeof a?function(b,f,m){b.__transition__[c].delay=+a.call(b,b.__data__,f,m)}:(a=+a,function(b){b.__transition__[c].delay=
a}))};va.duration=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].duration:Y(this,"function"===typeof a?function(b,f,m){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,f,m))}:(a=Math.max(1,a),function(b){b.__transition__[c].duration=a}))};va.each=function(a,b){var c=this.id;if(2>arguments.length){var f=yc,m=pb;pb=c;Y(this,function(b,f,m){yc=b.__transition__[c];a.call(b,b.__data__,f,m)});yc=f;pb=m}else Y(this,function(f){f=f.__transition__[c];(f.event||
(f.event=x.dispatch("start","end"))).on(a,b)});return this};va.transition=function(){for(var a=this.id,b=++Uf,m=[],e,k,g,l,p=0,t=this.length;p<t;p++){m.push(e=[]);k=this[p];for(var r=0,v=k.length;r<v;r++){if(g=k[r])l=Object.create(g.__transition__[a]),l.delay+=l.duration,vc(g,r,b,l);e.push(g)}}return Rb(m,b)};x.svg.axis=function(){function a(a){a.each(function(){var a=x.select(this),c=this.__chart__||b,f=this.__chart__=b.copy(),h=null==p?f.ticks?f.ticks.apply(f,l):f.domain():p,n=null==t?f.tickFormat?
f.tickFormat.apply(f,l):xa:t,q=a.selectAll(".tick").data(h,f),h=q.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),r=x.transition(q.exit()).style("opacity",1E-6).remove(),v=x.transition(q.order()).style("opacity",1),C,z=qc(f),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),x.transition(a));h.append("line");h.append("text");var A=h.select("line"),S=v.select("line"),n=q.select("text").text(n),q=h.select("text"),w=v.select("text");switch(m){case "bottom":C=
Of;A.attr("y2",e);q.attr("y",Math.max(e,0)+g);S.attr("x2",0).attr("y2",e);w.attr("x",0).attr("y",Math.max(e,0)+g);n.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+z[0]+","+k+"V0H"+z[1]+"V"+k);break;case "top":C=Of;A.attr("y2",-e);q.attr("y",-(Math.max(e,0)+g));S.attr("x2",0).attr("y2",-e);w.attr("x",0).attr("y",-(Math.max(e,0)+g));n.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+z[0]+","+-k+"V0H"+z[1]+"V"+-k);break;case "left":C=Pf;A.attr("x2",-e);q.attr("x",-(Math.max(e,
0)+g));S.attr("x2",-e).attr("y2",0);w.attr("x",-(Math.max(e,0)+g)).attr("y",0);n.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-k+","+z[0]+"H0V"+z[1]+"H"+-k);break;case "right":C=Pf,A.attr("x2",e),q.attr("x",Math.max(e,0)+g),S.attr("x2",e).attr("y2",0),w.attr("x",Math.max(e,0)+g).attr("y",0),n.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+k+","+z[0]+"H0V"+z[1]+"H"+k)}if(f.rangeBand)var u=f,L=u.rangeBand()/2,c=f=function(a){return u(a)+L};else c.rangeBand?c=f:r.call(C,
f);h.call(C,c);v.call(C,f)})}var b=x.scale.linear(),m=gg,e=6,k=6,g=3,l=[10],p=null,t;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(c){if(!arguments.length)return m;m=c in mi?c+"":gg;return a};a.ticks=function(){if(!arguments.length)return l;l=arguments;return a};a.tickValues=function(c){if(!arguments.length)return p;p=c;return a};a.tickFormat=function(c){if(!arguments.length)return t;t=c;return a};a.tickSize=function(c){var b=arguments.length;if(!b)return e;e=+c;
k=+arguments[b-1];return a};a.innerTickSize=function(c){if(!arguments.length)return e;e=+c;return a};a.outerTickSize=function(c){if(!arguments.length)return k;k=+c;return a};a.tickPadding=function(c){if(!arguments.length)return g;g=+c;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var gg="bottom",mi={top:1,right:1,bottom:1,left:1};x.svg.brush=function(){function a(c){c.each(function(){var c=x.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",k).on("touchstart.brush",k),f=c.selectAll(".background").data([0]);f.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=c.selectAll(".resize").data(u,xa);h.exit().remove();h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ni[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",a.empty()?"none":null);c=x.transition(c);f=x.transition(f);l&&(h=qc(l),f.attr("x",h[0]).attr("width",h[1]-h[0]),m(c));p&&(h=qc(p),f.attr("y",h[0]).attr("height",h[1]-h[0]),e(c));b(c)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+t[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function m(a){a.select(".extent").attr("x",
t[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function e(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function k(){function c(){var a=x.mouse(k),c=!1;Y&&(a[0]+=Y[0],a[1]+=Y[1]);H||(x.event.altKey?(R||(R=[(t[0]+t[1])/2,(r[0]+r[1])/2]),V[0]=t[+(a[0]<R[0])],V[1]=r[+(a[1]<R[1])]):R=null);w&&f(a,l,0)&&(m(z),c=!0);L&&f(a,p,1)&&(e(z),c=!0);c&&(b(z),q({type:"brush",mode:H?"move":"resize"}))}function f(a,c,b){var f=qc(c);c=f[0];
var m=f[1],f=V[b],e=b?r:t,h=e[1]-e[0];H&&(c-=f,m-=h+f);a=(b?S:A)?Math.max(c,Math.min(m,a[b])):a[b];H?c=(a+=f)+h:(R&&(f=Math.max(c,Math.min(m,2*R[b]-a))),f<a?(c=a,a=f):c=f);if(e[0]!=a||e[1]!=c)return b?C=null:v=null,e[0]=a,e[1]=c,!0}function h(){c();z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);x.select("body").style("cursor",null);J.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);K();q({type:"brushend"})}var k=this,n=x.select(x.event.target),q=g.of(k,arguments),z=x.select(k),u=n.datum(),w=!/^(n|s)$/.test(u)&&l,L=!/^(e|w)$/.test(u)&&p,H=n.classed("extent"),K=na(),R,V=x.mouse(k),Y,J=x.select(Aa).on("keydown.brush",function(){32==x.event.keyCode&&(H||(R=null,V[0]-=t[1],V[1]-=r[1],H=2),I())}).on("keyup.brush",function(){32==x.event.keyCode&&2==H&&(V[0]+=t[1],V[1]+=r[1],H=0,I())});if(x.event.changedTouches)J.on("touchmove.brush",c).on("touchend.brush",
h);else J.on("mousemove.brush",c).on("mouseup.brush",h);z.interrupt().selectAll("*").interrupt();if(H)V[0]=t[0]-V[0],V[1]=r[0]-V[1];else if(u){var E=+/w$/.test(u),u=+/^n/.test(u);Y=[t[1-E]-V[0],r[1-u]-V[1]];V[0]=t[E];V[1]=r[u]}else x.event.altKey&&(R=V.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null);x.select("body").style("cursor",n.style("cursor"));q({type:"brushstart"});c()}var g=z(a,"brushstart","brush","brushend"),l=null,p=null,t=[0,0],r=[0,0],v,C,A=!0,S=!0,
u=Pd[0];a.event=function(a){a.each(function(){var a=g.of(this,arguments),c={x:t,y:r,i:v,j:C},b=this.__chart__||c;this.__chart__=c;pb?x.select(this).transition().each("start.brush",function(){v=b.i;C=b.j;t=b.x;r=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=pc(t,c.x),f=pc(r,c.y);v=C=null;return function(m){t=c.x=b(m);r=c.y=f(m);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=c.i;C=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(c){if(!arguments.length)return l;l=c;u=Pd[!l<<1|!p];return a};a.y=function(c){if(!arguments.length)return p;p=c;u=Pd[!l<<1|!p];return a};a.clamp=function(c){if(!arguments.length)return l&&p?[A,S]:l?A:p?S:null;l&&p?(A=!!c[0],S=!!c[1]):l?A=!!c:p&&(S=!!c);return a};a.extent=function(c){var b,f,m,e,h;if(!arguments.length)return l&&(v?(b=v[0],f=v[1]):(b=t[0],f=t[1],l.invert&&(b=l.invert(b),f=l.invert(f)),f<b&&(h=b,b=f,f=h))),p&&(C?(m=
C[0],e=C[1]):(m=r[0],e=r[1],p.invert&&(m=p.invert(m),e=p.invert(e)),e<m&&(h=m,m=e,e=h))),l&&p?[[b,m],[f,e]]:l?[b,f]:p&&[m,e];l&&(b=c[0],f=c[1],p&&(b=b[0],f=f[0]),v=[b,f],l.invert&&(b=l(b),f=l(f)),f<b&&(h=b,b=f,f=h),b!=t[0]||f!=t[1])&&(t=[b,f]);p&&(m=c[0],e=c[1],l&&(m=m[1],e=e[1]),C=[m,e],p.invert&&(m=p(m),e=p(e)),e<m&&(h=m,m=e,e=h),m!=r[0]||e!=r[1])&&(r=[m,e]);return a};a.clear=function(){a.empty()||(t=[0,0],r=[0,0],v=C=null);return a};a.empty=function(){return!!l&&t[0]==t[1]||!!p&&r[0]==r[1]};return x.rebind(a,
g,"on")};var ni={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Qd=aa.format=Wf.timeFormat,hg=Qd.utc,ig=hg("%Y-%m-%dT%H:%M:%S.%LZ");Qd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Hd:ig;Hd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Hd.toString=ig.toString;aa.second=fb(function(a){return new za(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});aa.seconds=aa.second.range;aa.seconds.utc=aa.second.utc.range;aa.minute=fb(function(a){return new za(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});aa.minutes=aa.minute.range;aa.minutes.utc=aa.minute.utc.range;aa.hour=fb(function(a){var c=a.getTimezoneOffset()/60;return new za(36E5*(Math.floor(a/36E5-c)+c))},function(a,b){a.setTime(a.getTime()+36E5*
Math.floor(b))},function(a){return a.getHours()});aa.hours=aa.hour.range;aa.hours.utc=aa.hour.utc.range;aa.month=fb(function(a){a=aa.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});aa.months=aa.month.range;aa.months.utc=aa.month.utc.range;var wc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Rd=[[aa.second,1],[aa.second,5],[aa.second,15],[aa.second,30],[aa.minute,1],[aa.minute,5],[aa.minute,
15],[aa.minute,30],[aa.hour,1],[aa.hour,3],[aa.hour,6],[aa.hour,12],[aa.day,1],[aa.day,2],[aa.week,1],[aa.month,1],[aa.month,3],[aa.year,1]],oi=Qd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",vb]]),Ph={range:function(a,
b,m){return x.range(Math.ceil(a/m)*m,+b,m).map(ob)},floor:xa,ceil:xa};Rd.year=aa.year;aa.scale=function(){return Id(x.scale.linear(),Rd,oi)};var jg=Rd.map(function(a){return[a[0].utc,a[1]]}),pi=hg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],
["%B",function(a){return a.getUTCMonth()}],["%Y",vb]]);jg.year=aa.year.utc;aa.scale.utc=function(){return Id(x.scale.linear(),jg,pi)};x.text=Wc(function(a){return a.responseText});x.json=function(a,b){return Wb(a,"application/json",Qh,b)};x.html=function(a,b){return Wb(a,"text/html",Rh,b)};x.xml=Wc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(x):"object"===typeof module&&module.exports?module.exports=x:this.d3=x}();
(function(){function y(a,b){return(new Date(b,a+1,0)).getDate()}var u=window.nv||{};u.version="1.1.15b";u.dev=!0;window.nv=u;u.tooltip=u.tooltip||{};u.utils=u.utils||{};u.models=u.models||{};u.charts={};u.graphs=[];u.logs={};u.dispatch=d3.dispatch("render_start","render_end");u.dev&&(u.dispatch.on("render_start",function(a){u.logs.startTime=+new Date}),u.dispatch.on("render_end",function(a){u.logs.endTime=+new Date;u.logs.totalTime=u.logs.endTime-u.logs.startTime;u.log("total",u.logs.totalTime)}));
u.log=function(){u.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):u.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};u.render=function(a){a=a||1;u.render.active=!0;u.dispatch.render_start();setTimeout(function(){for(var b,l,v=0;v<a&&(l=u.render.queue[v]);v++)b=l.generate(),typeof l.callback==typeof Function&&l.callback(b),u.graphs.push(b);u.render.queue.splice(0,
v);u.render.queue.length?setTimeout(arguments.callee,0):(u.dispatch.render_end(),u.render.active=!1)},0)};u.render.active=!1;u.render.queue=[];u.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});u.render.queue.push(a);u.render.active||u.render()};u.identity=function(a){return a};u.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,l){return function(v,p,e){var g=
a(v),t=[];g<v&&b(g);if(1<e)for(;g<p;)v=new Date(+g),0===l(v)%e&&t.push(v),b(g);else for(;g<p;)t.push(new Date(+g)),b(g);return t}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(y(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});u.interactiveGuideline=function(){function a(D){D.each(function(B){function D(){var l=d3.mouse(this),t=l[0],l=l[1],r=!0,v=!1;G&&(t=d3.event.offsetX,l=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(v=!0));r&&(t-=p.left,l-=p.top);0>t||0>l||t>I||l>M||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||v?G&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(g.elementMouseout({mouseX:t,mouseY:l}),a.renderGuideLine(null)):(r=e.invert(t),g.elementMousemove({mouseX:t,mouseY:l,pointXValue:r}),"dblclick"===d3.event.type&&g.elementDblclick({mouseX:t,mouseY:l,pointXValue:r}))}var E=d3.select(this),
I=l||960,M=v||400,z=E.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([B]);z.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");r&&(r.on("mousemove",D,!0).on("mouseout",D,!0).on("dblclick",D),a.renderGuideLine=function(a){t&&(a=z.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[u.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",M).attr("y2",0),a.exit().remove())})})}var b=u.models.tooltip(),l=null,v=null,p={left:0,top:0},e=d3.scale.linear();d3.scale.linear();var g=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),t=!0,r=null,G=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=g;a.tooltip=b;a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return l;
l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.showGuideLine=function(b){if(!arguments.length)return t;t=b;return a};a.svgContainer=function(b){if(!arguments.length)return r;r=b;return a};return a};u.interactiveBisect=function(a,b,l){if(!a instanceof Array)return null;"function"!==typeof l&&(l=function(a,b){return a.x});var v=d3.bisector(l).left,v=d3.max([0,v(a,b)-1]),p=l(a[v],v);"undefined"===typeof p&&
(p=v);if(p===b)return v;var e=d3.min([v+1,a.length-1]);a=l(a[e],e);"undefined"===typeof a&&(a=e);return Math.abs(a-b)>=Math.abs(p-b)?v:e};u.nearestValueIndex=function(a,b,l){var v=Infinity,p=null;a.forEach(function(a,g){var e=Math.abs(b-a);e<=v&&e<l&&(v=e,p=g)});return p};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(B){var b;b=l&&l.series&&0<l.series.length?!0:!1;if(b){if(r){b=d3.select(r);"svg"!==b.node().tagName&&(b=b.select("svg"));var E=b.node()?b.attr("viewBox"):
null;E&&(E=E.split(" "),b=parseInt(b.style("width"))/E[2],D.left*=b,D.top*=b)}b=D.left;var E=null!=g?g:D.top,I;I=M(l);var J;J=r?d3.select(r):d3.select("body");var W=J.select(".nvtooltip");null===W.node()&&(W=J.append("div").attr("class","nvtooltip "+(t?t:"xy-tooltip")).attr("id",F));W.node().innerHTML=I;W.style("top",0).style("left",0).style("opacity",0);W.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);W.classed("nv-pointer-events-none",!0);G=I=W.node();if(r){(W=r.getElementsByTagName("svg")[0])?
W.getBoundingClientRect():r.getBoundingClientRect();var Q=0;J=0;if(W){W=W.getBoundingClientRect();Q=r.getBoundingClientRect();J=W.top;if(0>J){var P=r.getBoundingClientRect();J=Math.abs(J)>P.height?0:J}J=Math.abs(J-Q.top);Q=Math.abs(W.left-Q.left)}b+=r.offsetLeft+Q-2*r.scrollLeft;E+=r.offsetTop+J-2*r.scrollTop}e&&0<e&&(E=Math.floor(E/e)*e);u.tooltip.calcTooltipPosition([b,E],v,p,I);return a}}}var b=null,l=null,v="w",p=50,e=25,g=null,t=null,r=null,G=null,D={left:null,top:null},B=!0,F="nvtooltip-"+Math.floor(1E5*
Math.random()),E=function(a,b){return a},I=function(a){return a},M=function(a){if(null!=b)return b;if(null==a)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(I(a.value));var g=e.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});g.append("td").classed("key",!0).html(function(a){return a.key});g.append("td").classed("value",!0).html(function(a,b){return E(a.value,b)});g.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});e=e.node().outerHTML;void 0!==a.footer&&(e+="<div class='footer'>"+
a.footer+"</div>");return e};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(e){if(!arguments.length)return b;b=e;return a};a.tooltipElem=function(){return G};a.contentGenerator=function(b){if(!arguments.length)return M;"function"===typeof b&&(M=b);return a};a.data=function(b){if(!arguments.length)return l;l=b;return a};a.gravity=function(b){if(!arguments.length)return v;v=b;return a};a.distance=function(b){if(!arguments.length)return p;p=b;return a};a.snapDistance=function(b){if(!arguments.length)return e;
e=b;return a};a.classes=function(b){if(!arguments.length)return t;t=b;return a};a.chartContainer=function(b){if(!arguments.length)return r;r=b;return a};a.position=function(b){if(!arguments.length)return D;D.left="undefined"!==typeof b.left?b.left:D.left;D.top="undefined"!==typeof b.top?b.top:D.top;return a};a.fixedTop=function(b){if(!arguments.length)return g;g=b;return a};a.enabled=function(b){if(!arguments.length)return B;B=b;return a};a.valueFormatter=function(b){if(!arguments.length)return E;
"function"===typeof b&&(E=b);return a};a.headerFormatter=function(b){if(!arguments.length)return I;"function"===typeof b&&(I=b);return a};a.id=function(){return F};return a};u.tooltip.show=function(a,b,l,v,p,e){var g=document.createElement("div");g.className="nvtooltip "+(e?e:"xy-tooltip");e=p;if(!p||p.tagName.match(/g|svg/i))e=document.getElementsByTagName("body")[0];g.style.left=0;g.style.top=0;g.style.opacity=0;g.innerHTML=b;e.appendChild(g);p&&(a[0]-=p.scrollLeft,a[1]-=p.scrollTop);u.tooltip.calcTooltipPosition(a,
l,v,g)};u.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};u.tooltip.findTotalOffsetTop=function(a,b){var l=b;do isNaN(a.offsetTop)||(l+=a.offsetTop);while(a=a.offsetParent);return l};u.tooltip.findTotalOffsetLeft=function(a,b){var l=b;do isNaN(a.offsetLeft)||(l+=a.offsetLeft);while(a=a.offsetParent);return l};u.tooltip.calcTooltipPosition=function(a,b,l,v){var p=parseInt(v.offsetHeight),e=parseInt(v.offsetWidth),g=u.utils.windowSize().width,
t=u.utils.windowSize().height,r=window.pageYOffset,G=window.pageXOffset,D,B,t=window.innerWidth>=document.body.scrollWidth?t:t-16,g=window.innerHeight>=document.body.scrollHeight?g:g-16;l=l||20;var F=function(a){return u.tooltip.findTotalOffsetTop(a,B)},E=function(a){return u.tooltip.findTotalOffsetLeft(a,D)};switch(b||"s"){case "e":D=a[0]-e-l;B=a[1]-p/2;b=E(v);F=F(v);b<G&&(D=a[0]+l>G?a[0]+l:G-b+D);F<r&&(B=r-F+B);F+p>r+t&&(B=r+t-F+B-p);break;case "w":D=a[0]+l;B=a[1]-p/2;b=E(v);F=F(v);b+e>g&&(D=a[0]-
e-l);F<r&&(B=r+5);F+p>r+t&&(B=r+t-F+B-p);break;case "n":D=a[0]-e/2-5;B=a[1]+l;b=E(v);F=F(v);b<G&&(D=G+5);b+e>g&&(D=D-e/2+5);F+p>r+t&&(B=r+t-F+B-p);break;case "s":D=a[0]-e/2;B=a[1]-p-l;b=E(v);F=F(v);b<G&&(D=G+5);b+e>g&&(D=D-e/2+5);r>F&&(B=r);break;case "none":D=a[0],B=a[1]-l,b=E(v),F=F(v)}v.style.left=D+"px";v.style.top=B+"px";v.style.opacity=1;v.style.position="absolute";return v};u.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();u.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};u.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(l){"function"==typeof b&&b(l);a(l)}}};u.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,l){return b.color||a[l%a.length]}:a:u.utils.defaultColor()};u.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
l){return b.color||a[l%a.length]}};u.utils.customTheme=function(a,b,l){b=b||function(a){return a.key};l=l||d3.scale.category20().range();var v=l.length;return function(p,e){var g=b(p);v||(v=l.length);return"undefined"!==typeof a[g]?"function"===typeof a[g]?a[g]():a[g]:l[--v]}};u.utils.pjax=function(a,b){function l(l){d3.html(l,function(l){var e=d3.select(b).node();e.parentNode.replaceChild(d3.select(l).select(b).node(),e);u.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);l(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&l(d3.event.state)})};u.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};u.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};u.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,l){if("function"===
typeof this[a])this[a](l)}.bind(this));return this};u.models.axis=function(){function a(p){p.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var p=a.select("g");null!==E?b.ticks(E):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(e.range()[1]-e.range()[0])/100);p.transition().call(b);M=M||b.scale();var u=b.tickFormat();null==u&&(u=M.tickFormat());var z=p.selectAll("text.nv-axislabel").data([g||
null]);z.exit().remove();switch(b.orient()){case "top":z.enter().append("text").attr("class","nv-axislabel");var Q=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);z.attr("text-anchor","middle").attr("y",0).attr("x",Q/2);t&&(Q=a.selectAll("g.nv-axisMaxMin").data(e.domain()),Q.enter().append("g").attr("class","nv-axisMaxMin").append("text"),Q.exit().remove(),Q.attr("transform",function(a,b){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),Q.transition().attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case "bottom":var P=36,A=30,H=p.selectAll("g").select("text");G%360&&(H.each(function(a,b){var e=this.getBBox().width;e>A&&(A=e)}),Q=Math.abs(Math.sin(G*Math.PI/180)),P=(Q?Q*A:A)+30,H.attr("transform",function(a,b,e){return"rotate("+G+" 0,0)"}).style("text-anchor",0<G%360?"start":"end"));z.enter().append("text").attr("class",
"nv-axislabel");Q=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);z.attr("text-anchor","middle").attr("y",P).attr("x",Q/2);t&&(Q=a.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),Q.enter().append("g").attr("class","nv-axisMaxMin").append("text"),Q.exit().remove(),Q.attr("transform",function(a,b){return"translate("+(e(a)+(F?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,e){return"rotate("+G+" 0,0)"}).style("text-anchor",G?0<G%360?"start":"end":"middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),Q.transition().attr("transform",function(a,b){return"translate("+(e(a)+(F?e.rangeBand()/2:0))+",0)"}));B&&H.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":z.enter().append("text").attr("class","nv-axislabel");z.style("text-anchor",D?"middle":"begin").attr("transform",D?"rotate(90)":"").attr("y",
D?-Math.max(l.right,v)+12:-10).attr("x",D?e.range()[0]/2:b.tickPadding());t&&(Q=a.selectAll("g.nv-axisMaxMin").data(e.domain()),Q.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),Q.exit().remove(),Q.attr("transform",function(a,b){return"translate(0,"+e(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),Q.transition().attr("transform",function(a,
b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case "left":z.enter().append("text").attr("class","nv-axislabel"),z.style("text-anchor",D?"middle":"end").attr("transform",D?"rotate(-90)":"").attr("y",D?-Math.max(l.left,v)+I:-10).attr("x",D?-e.range()[0]/2:-b.tickPadding()),t&&(Q=a.selectAll("g.nv-axisMaxMin").data(e.domain()),Q.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),Q.exit().remove(),Q.attr("transform",function(a,b){return"translate(0,"+
M(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),Q.transition().attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}z.text(function(a){return a});!t||"left"!==b.orient()&&"right"!==b.orient()||(p.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(t&&("top"===b.orient()||"bottom"===b.orient())){var K=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?K.push(e(a)-this.getBBox().width-4):K.push(e(a)+this.getBBox().width+4)}catch(R){b?K.push(e(a)-4):K.push(e(a)+4)}});p.selectAll("g").each(function(a,b){if(e(a)<K[0]||
e(a)>K[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}r&&p.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);M=e.copy()});return a}var b=d3.svg.axis(),l={top:0,right:0,bottom:0,left:0},v=75,p=60,e=d3.scale.linear(),g=null,t=!0,r=!0,G=0,D=!0,B=!1,F=!1,E=null,I=12;b.scale(e).orient("bottom").tickFormat(function(a){return a});var M;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,e,"domain","range","rangeBand","rangeBands");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:l.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.ticks=function(b){if(!arguments.length)return E;
E=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.axisLabel=function(b){if(!arguments.length)return g;g=b;return a};a.showMaxMin=function(b){if(!arguments.length)return t;t=b;return a};a.highlightZero=function(b){if(!arguments.length)return r;r=b;return a};a.scale=function(g){if(!arguments.length)return e;e=g;b.scale(e);F="function"===typeof e.rangeBands;d3.rebind(a,e,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return D;
D=b;return a};a.rotateLabels=function(b){if(!arguments.length)return G;G=b;return a};a.staggerLabels=function(b){if(!arguments.length)return B;B=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return I;I=b;return a};return a};u.models.historicalBar=function(){function a(W){W.each(function(a){var W=l-b.left-b.right,A=v-b.top-b.bottom,H=d3.select(this);e.domain(I||d3.extent(a[0].values.map(t).concat(G)));B?e.range(z||[.5*W/a[0].values.length,W*(a[0].values.length-.5)/a[0].values.length]):
e.range(z||[0,W]);g.domain(M||d3.extent(a[0].values.map(r).concat(D))).range(N||[A,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]+.01*g.domain()[0],g.domain()[1]-.01*g.domain()[1]]):g.domain([-1,1]));var K=H.selectAll("g.nv-wrap.nv-historicalBar-"+p).data([a[0].values]),C=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
p),V=C.append("defs"),C=C.append("g"),R=K.select("g");C.append("g").attr("class","nv-bars");K.attr("transform","translate("+b.left+","+b.top+")");H.on("click",function(a,b){T.chartClick({data:a,index:b,pos:d3.event,id:p})});V.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");K.select("#nv-chart-clip-path-"+p+" rect").attr("width",W).attr("height",A);R.attr("clip-path",F?"url(#nv-chart-clip-path-"+p+")":"");A=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return t(a,b)});A.exit().remove();A.enter().append("rect").attr("x",0).attr("y",function(a,b){return u.utils.NaNtoZero(g(Math.max(0,r(a,b))))}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.abs(g(r(a,b))-g(0)))}).attr("transform",function(b,g){return"translate("+(e(t(b,g))-W/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,l){J&&(d3.select(this).classed("hover",!0),T.elementMouseover({point:b,series:a[0],pos:[e(t(b,l)),g(r(b,l))],pointIndex:l,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,e){J&&(d3.select(this).classed("hover",!1),T.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){J&&(T.elementClick({value:r(a,b),data:a,index:b,pos:[e(t(a,b)),g(r(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())}).on("dblclick",function(a,b){J&&(T.elementDblClick({value:r(a,b),data:a,index:b,pos:[e(t(a,b)),g(r(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())});A.attr("fill",function(a,b){return E(a,b)}).attr("class",function(a,
b,e){return(0>r(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+b}).transition().attr("transform",function(b,g){return"translate("+(e(t(b,g))-W/a[0].values.length*.45)+",0)"}).attr("width",W/a[0].values.length*.9);A.transition().attr("y",function(a,b){var e=0>r(a,b)?g(0):1>g(0)-g(r(a,b))?g(0)-1:g(r(a,b));return u.utils.NaNtoZero(e)}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.max(Math.abs(g(r(a,b))-g(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,
p=Math.floor(1E4*Math.random()),e=d3.scale.linear(),g=d3.scale.linear(),t=function(a){return a.x},r=function(a){return a.y},G=[],D=[0],B=!1,F=!0,E=u.utils.defaultColor(),I,M,z,N,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),J=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=T;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return r;r=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};
a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return I;I=b;return a};a.yDomain=function(b){if(!arguments.length)return M;M=b;return a};a.xRange=function(b){if(!arguments.length)return z;z=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceX=function(b){if(!arguments.length)return G;
G=b;return a};a.forceY=function(b){if(!arguments.length)return D;D=b;return a};a.padData=function(b){if(!arguments.length)return B;B=b;return a};a.clipEdge=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return E;E=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.interactive=function(b){if(!arguments.length)return J;J=!1;return a};return a};u.models.bullet=function(){function a(l){l.each(function(a,l){var u=
r-b.left-b.right,E=G-b.top-b.bottom,I=d3.select(this),J=p.call(this,a,l).slice().sort(d3.descending),D=e.call(this,a,l).slice().sort(d3.descending),Q=g.call(this,a,l).slice().sort(d3.descending),P=(a.rangeLabels?a.rangeLabels:[]).slice(),A=(a.markerLabels?a.markerLabels:[]).slice(),H=(a.measureLabels?a.measureLabels:[]).slice(),K=d3.scale.linear().domain(d3.extent(d3.merge([t,J]))).range(v?[u,0]:[0,u]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(K.range());this.__chart__=K;var u=
d3.min(J),C=d3.max(J),J=J[1],I=I.selectAll("g.nv-wrap.nv-bullet").data([a]),V=I.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),R=I.select("g");V.append("rect").attr("class","nv-range nv-rangeMax");V.append("rect").attr("class","nv-range nv-rangeAvg");V.append("rect").attr("class","nv-range nv-rangeMin");V.append("rect").attr("class","nv-measure");V.append("path").attr("class","nv-markerTriangle");I.attr("transform","translate("+b.left+","+b.top+")");var V=function(a){return Math.abs(K(a)-
K(0))},Y=function(a){return 0>a?K(a):K(0)};R.select("rect.nv-rangeMax").attr("height",E).attr("width",V(0<C?C:u)).attr("x",Y(0<C?C:u)).datum(0<C?C:u);R.select("rect.nv-rangeAvg").attr("height",E).attr("width",V(J)).attr("x",Y(J)).datum(J);R.select("rect.nv-rangeMin").attr("height",E).attr("width",V(C)).attr("x",Y(C)).attr("width",V(0<C?u:C)).attr("x",Y(0<C?u:C)).datum(0<C?u:C);R.select("rect.nv-measure").style("fill",B).attr("height",E/3).attr("y",E/3).attr("width",0>Q?K(0)-K(Q[0]):K(Q[0])-K(0)).attr("x",
Y(Q)).on("mouseover",function(){F.elementMouseover({value:Q[0],label:H[0]||"Current",pos:[K(Q[0]),E/2]})}).on("mouseout",function(){F.elementMouseout({value:Q[0],label:H[0]||"Current"})});u=E/6;if(D[0])R.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+K(D[0])+","+E/2+")"}).attr("d","M0,"+u+"L"+u+","+-u+" "+-u+","+-u+"Z").on("mouseover",function(){F.elementMouseover({value:D[0],label:A[0]||"Previous",pos:[K(D[0]),E/2]})}).on("mouseout",function(){F.elementMouseout({value:D[0],
label:A[0]||"Previous"})});else R.selectAll("path.nv-markerTriangle").remove();I.selectAll(".nv-range").on("mouseover",function(a,b){F.elementMouseover({value:a,label:P[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[K(a),E/2]})}).on("mouseout",function(a,b){F.elementMouseout({value:a,label:P[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},l="left",v=!1,p=function(a){return a.ranges},e=function(a){return a.markers},g=function(a){return a.measures},t=[0],r=
380,G=30,D=null,B=u.utils.getColor(["#1f77b4"]),F=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=F;a.options=u.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return l;l=b;v="right"==l||"bottom"==l;return a};a.ranges=function(b){if(!arguments.length)return p;p=b;return a};a.markers=function(b){if(!arguments.length)return e;e=b;return a};a.measures=function(b){if(!arguments.length)return g;g=b;return a};a.forceX=function(b){if(!arguments.length)return t;t=b;return a};
a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return B;
B=u.utils.getColor(b);return a};return a};u.models.bulletChart=function(){function a(l){l.each(function(z,M){var N=d3.select(this),J=(r||parseInt(N.style("width"))||960)-p.left-p.right,W=G-p.top-p.bottom,Q=this;a.update=function(){a(l)};a.container=this;if(z&&e.call(this,z,M))N.selectAll(".nv-noData").remove();else return N=N.selectAll(".nv-noData").data([E]),N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",p.left+J/2).attr("y",18+
p.top+W/2).text(function(a){return a}),a;var P=e.call(this,z,M).slice().sort(d3.descending),A=g.call(this,z,M).slice().sort(d3.descending),H=t.call(this,z,M).slice().sort(d3.descending),K=N.selectAll("g.nv-wrap.nv-bulletChart").data([z]),C=K.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),N=K.select("g");C.append("g").attr("class","nv-bulletWrap");C.append("g").attr("class","nv-titles");K.attr("transform","translate("+p.left+","+p.top+")");var V=d3.scale.linear().domain([0,
Math.max(P[0],A[0],H[0])]).range(v?[J,0]:[0,J]),R=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(V.range());this.__chart__=V;P=C.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(G-p.top-p.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(a){return a.title});P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(J).height(W);P=N.select(".nv-bulletWrap");d3.transition(P).call(b);
var Y=D||V.tickFormat(J/100),J=N.selectAll("g.nv-tick").data(V.ticks(J/50),function(a){return this.textContent||Y(a)}),N=J.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+R(a)+",0)"}).style("opacity",1E-6);N.append("line").attr("y1",W).attr("y2",7*W/6);N.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*W/6).text(Y);N=d3.transition(J).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1);N.select("line").attr("y1",
W).attr("y2",7*W/6);N.select("text").attr("y",7*W/6);d3.transition(J.exit()).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1E-6).remove();I.on("tooltipShow",function(b){b.key=z.title;if(B){var e=Q.parentNode,g=b.pos[0]+(e.offsetLeft||0)+p.left,m=b.pos[1]+(e.offsetTop||0)+p.top,l=F(b.key,b.label,b.value,b,a);u.tooltip.show([g,m],l,0>b.value?"e":"w",null,e)}})});d3.timer.flush();return a}var b=u.models.bullet(),l="left",v=!1,p={top:5,right:40,bottom:20,left:120},e=function(a){return a.ranges},
g=function(a){return a.markers},t=function(a){return a.measures},r=null,G=55,D=null,B=!0,F=function(a,b,e,g,l){return"<h3>"+b+"</h3><p>"+e+"</p>"},E="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){I.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){I.tooltipHide(a)});I.on("tooltipHide",function(){B&&u.tooltip.cleanup()});a.dispatch=I;a.bullet=b;d3.rebind(a,b,"color");a.options=u.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return l;l=b;v="right"==l||"bottom"==l;return a};a.ranges=function(b){if(!arguments.length)return e;e=b;return a};a.markers=function(b){if(!arguments.length)return g;g=b;return a};a.measures=function(b){if(!arguments.length)return t;t=b;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;
p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.tickFormat=function(b){if(!arguments.length)return D;D=b;return a};a.tooltips=function(b){if(!arguments.length)return B;B=b;return a};a.tooltipContent=function(b){if(!arguments.length)return F;F=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};return a};u.models.cumulativeLineChart=function(){function a(m){m.each(function(m){function S(){sa.data([X]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var L=d3.select(this).classed("nv-chart-"+A,!0),y=this,Z=(D||parseInt(L.style("width"))||960)-r.left-r.right,ca=(B||parseInt(L.style("height"))||400)-r.top-r.bottom;a.update=function(){L.transition().duration(Y).call(a)};a.container=this;H.disabled=m.map(function(a){return!!a.disabled});if(!K){var ha;K={};for(ha in H)K[ha]=H[ha]instanceof Array?H[ha].slice(0):H[ha]}ha=d3.behavior.drag().on("dragstart",function(b,
e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){X.x=d3.event.x;X.i=Math.round(ea.invert(X.x));S()}).on("dragend",function(b,e){d3.select(a.container).style("cursor","auto");H.index=X.i;R.stateChange(H)});if(m&&m.length&&m.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return ha=L.selectAll(".nv-noData").data([C]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",
r.left+Z/2).attr("y",r.top+ca/2).text(function(a){return a}),a;Q=l.xScale();P=l.yScale();if(J)l.yDomain(null);else{var ga=m.filter(function(a){return!a.disabled}).map(function(a,b){var e=d3.extent(a.values,l.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),ga=[d3.min(ga,function(a){return a[0]}),d3.max(ga,function(a){return a[1]})];l.yDomain(ga)}ea.domain([0,m[0].values.length-1]).range([0,Z]).clamp(!0);m=b(X.i,m);var ba=T?"none":"all",ma=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([m]),
fa=ma.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ga=ma.select("g");fa.append("g").attr("class","nv-interactive");fa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-background");fa.append("g").attr("class","nv-linesWrap").style("pointer-events",ba);fa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");fa.append("g").attr("class","nv-legendWrap");
fa.append("g").attr("class","nv-controlsWrap");F&&(e.width(Z),ga.select(".nv-legendWrap").datum(m).call(e),r.top!=e.height()&&(r.top=e.height(),ca=(B||parseInt(L.style("height"))||400)-r.top-r.bottom),ga.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"));N&&(ba=[{key:"Re-scale y-axis",disabled:!J}],g.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ga.select(".nv-controlsWrap").datum(ba).attr("transform","translate(0,"+-r.top+")").call(g));
ma.attr("transform","translate("+r.left+","+r.top+")");M&&ga.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)");ba=m.filter(function(a){return a.tempDisabled});ma.select(".tempDisabled").remove();ba.length&&ma.append("text").attr("class","tempDisabled").attr("x",Z/2).attr("y","-.71em").style("text-anchor","end").text(ba.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");T&&(t.width(Z).height(ca).margin({left:r.left,top:r.top}).svgContainer(L).xScale(Q),
ma.select(".nv-interactive").call(t));fa.select(".nv-background").append("rect");ga.select(".nv-background rect").attr("width",Z).attr("height",ca);l.y(function(a){return a.display.y}).width(Z).height(ca).color(m.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!m[b].disabled&&!m[b].tempDisabled}));ma=ga.select(".nv-linesWrap").datum(m.filter(function(a){return!a.disabled&&!a.tempDisabled}));ma.call(l);m.forEach(function(a,b){a.seriesIndex=b});fa=m.filter(function(a){return!a.disabled&&
!!V(a)});fa=ga.select(".nv-avgLinesWrap").selectAll("line").data(fa,function(a){return a.key});ba=function(a){a=P(V(a));return 0>a?0:a>ca?ca:a};fa.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return l.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",Z).attr("y1",ba).attr("y2",ba);fa.style("stroke-opacity",function(a){a=P(V(a));return 0>a||a>ca?0:1}).attr("x1",0).attr("x2",Z).attr("y1",ba).attr("y2",ba);fa.exit().remove();var sa=ma.selectAll(".nv-indexLine").data([X]);
sa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ha);sa.attr("transform",function(a){return"translate("+ea(a.i)+",0)"}).attr("height",ca);E&&(v.scale(Q).ticks(Math.min(m[0].values.length,Z/70)).tickSize(-ca,0),ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")"),d3.transition(ga.select(".nv-x.nv-axis")).call(v));I&&(p.scale(P).ticks(ca/36).tickSize(-Z,0),d3.transition(ga.select(".nv-y.nv-axis")).call(p));
ga.select(".nv-background rect").on("click",function(){X.x=d3.mouse(this)[0];X.i=Math.round(ea.invert(X.x));H.index=X.i;R.stateChange(H);S()});l.dispatch.on("elementClick",function(a){X.i=a.pointIndex;X.x=ea(X.i);H.index=X.i;R.stateChange(H);S()});g.dispatch.on("legendClick",function(b,e){b.disabled=!b.disabled;J=!b.disabled;H.rescaleY=J;R.stateChange(H);a.update()});e.dispatch.on("stateChange",function(b){H.disabled=b.disabled;R.stateChange(H);a.update()});t.dispatch.on("elementMousemove",function(b){l.clearHighlights();
var e,g,C,A=[];m.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(m,p){g=u.interactiveBisect(m.values,b.pointXValue,a.x());l.highlightPoint(p,g,!0);var t=m.values[g];"undefined"!==typeof t&&("undefined"===typeof e&&(e=t),"undefined"===typeof C&&(C=a.xScale()(a.x()(t,g))),A.push({key:m.key,value:a.y()(t,g),color:G(m,m.seriesIndex)}))});if(2<A.length){var S=a.yScale().invert(b.mouseY),H=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),S=u.nearestValueIndex(A.map(function(a){return a.value}),
S,H);null!==S&&(A[S].highlight=!0)}S=v.tickFormat()(a.x()(e,g),g);t.tooltip.position({left:C+r.left,top:b.mouseY+r.top}).chartContainer(y.parentNode).enabled(z).valueFormatter(function(a,b){return p.tickFormat()(a)}).data({value:S,series:A})();t.renderGuideLine(C)});t.dispatch.on("elementMouseout",function(a){R.tooltipHide();l.clearHighlights()});R.on("tooltipShow",function(b){if(z){var e=y.parentNode,m=b.pos[0]+(e.offsetLeft||0),g=b.pos[1]+(e.offsetTop||0),t=v.tickFormat()(l.x()(b.point,b.pointIndex)),
r=p.tickFormat()(l.y()(b.point,b.pointIndex));b=W(b.series.key,t,r,b,a);u.tooltip.show([m,g],b,null,null,e)}});R.on("changeState",function(b){"undefined"!==typeof b.disabled&&(m.forEach(function(a,e){a.disabled=b.disabled[e]}),H.disabled=b.disabled);"undefined"!==typeof b.index&&(X.i=b.index,X.x=ea(X.i),H.index=b.index,sa.data([X]));"undefined"!==typeof b.rescaleY&&(J=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,e){if(!b.values)return b;var m=b.values[a];if(null==m)return b;
var g=l.y()(m,a);if(-.95>g&&!L)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(l.y()(a,b)-g)/(1+g)};return a});return b})}var l=u.models.line(),v=u.models.axis(),p=u.models.axis(),e=u.models.legend(),g=u.models.legend(),t=u.interactiveGuideline(),r={top:30,right:30,bottom:50,left:60},G=u.utils.defaultColor(),D=null,B=null,F=!0,E=!0,I=!0,M=!1,z=!0,N=!0,T=!1,J=!0,W=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},Q,P,A=l.id(),H={index:0,
rescaleY:J},K=null,C="No Data Available.",V=function(a){return a.average},R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),Y=250,L=!1;v.orient("bottom").tickPadding(7);p.orient(M?"right":"left");g.updateState(!1);var ea=d3.scale.linear(),X={i:0,x:0};l.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];R.tooltipShow(a)});l.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){z&&u.tooltip.cleanup()});
a.dispatch=R;a.lines=l;a.legend=e;a.xAxis=v;a.yAxis=p;a.interactiveLayer=t;d3.rebind(a,l,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left=
"undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return D;D=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);e.color(G);return a};a.rescaleY=function(b){if(!arguments.length)return J;J=b;return a};a.showControls=function(b){if(!arguments.length)return N;N=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return T;T=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return F;F=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;p.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipContent=function(b){if(!arguments.length)return W;W=b;return a};a.state=function(b){if(!arguments.length)return H;
H=b;return a};a.defaultState=function(b){if(!arguments.length)return K;K=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};a.average=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Y;Y=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return L;L=b;return a};return a};u.models.discreteBar=function(){function a(p){p.each(function(a){var p=l-b.left-b.right,u=v-b.top-b.bottom,H=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var K=E&&I?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:r(a,b),y0:a.y0}})});e.domain(E||d3.merge(K).map(function(a){return a.x})).rangeBands(M||[0,p],.1);g.domain(I||d3.extent(d3.merge(K).map(function(a){return a.y}).concat(G)));B?g.range(z||[u-(0>g.domain()[0]?12:0),0<g.domain()[1]?12:0]):g.range(z||[u,0]);J=J||g.copy().range([g(0),g(0)]);p=H.selectAll("g.nv-wrap.nv-discretebar").data([a]);u=p.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");p.select("g");u.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
p.transition().style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();u=p.enter().append("g").attr("transform",function(a,b,l){return"translate("+(e(t(a,b))+.05*e.rangeBand())+", "+g(0)+")"}).on("mouseover",function(b,l){d3.select(this).classed("hover",!0);N.elementMouseover({value:r(b,l),point:b,series:a[b.series],pos:[e(t(b,l))+e.rangeBand()*(b.series+.5)/a.length,g(r(b,l))],pointIndex:l,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,e){d3.select(this).classed("hover",!1);N.elementMouseout({value:r(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,l){N.elementClick({value:r(b,l),point:b,series:a[b.series],pos:[e(t(b,l))+e.rangeBand()*(b.series+.5)/a.length,g(r(b,l))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,l){N.elementDblClick({value:r(b,l),point:b,series:a[b.series],pos:[e(t(b,l))+e.rangeBand()*(b.series+
.5)/a.length,g(r(b,l))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.append("rect").attr("height",0).attr("width",.9*e.rangeBand()/a.length);B?(u.append("text").attr("text-anchor","middle"),p.select("text").text(function(a,b){return F(r(a,b))}).transition().attr("x",.9*e.rangeBand()/2).attr("y",function(a,b){return 0>r(a,b)?g(r(a,b))-g(0)+12:-4})):p.selectAll("text").remove();p.attr("class",function(a,b){return 0>r(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||D(a,b)}).style("stroke",function(a,b){return a.color||D(a,b)}).select("rect").attr("class",T).transition().attr("width",.9*e.rangeBand()/a.length);p.transition().attr("transform",function(a,b){var l=e(t(a,b))+.05*e.rangeBand(),p=0>r(a,b)?g(0):1>g(0)-g(r(a,b))?g(0)-1:g(r(a,b));return"translate("+l+", "+p+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(g(r(a,b))-g(I&&I[0]||0))||1)});e.copy();J=g.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},l=960,v=500,p=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),g=d3.scale.linear(),t=function(a){return a.x},r=function(a){return a.y},G=[0],D=u.utils.defaultColor(),B=!1,F=d3.format(",.2f"),E,I,M,z,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),T="discreteBar",J;a.dispatch=N;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return r;r=b;return a};a.margin=
function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;
return a};a.xDomain=function(b){if(!arguments.length)return E;E=b;return a};a.yDomain=function(b){if(!arguments.length)return I;I=b;return a};a.xRange=function(b){if(!arguments.length)return M;M=b;return a};a.yRange=function(b){if(!arguments.length)return z;z=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return D;D=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.showValues=function(b){if(!arguments.length)return B;
B=b;return a};a.valueFormat=function(b){if(!arguments.length)return F;F=b;return a};a.rectClass=function(b){if(!arguments.length)return T;T=b;return a};return a};u.models.discreteBarChart=function(){function a(t){t.each(function(t){var J=d3.select(this),P=this,A=(e||parseInt(J.style("width"))||960)-p.left-p.right,H=(g||parseInt(J.style("height"))||400)-p.top-p.bottom;a.update=function(){N.beforeUpdate();J.transition().duration(T).call(a)};a.container=this;if(t&&t.length&&t.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();
else return t=J.selectAll(".nv-noData").data([z]),t.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),t.attr("x",p.left+A/2).attr("y",p.top+H/2).text(function(a){return a}),a;I=b.xScale();M=b.yScale().clamp(!0);var K=J.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([t]),C=K.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),V=C.append("defs"),K=K.select("g");C.append("g").attr("class","nv-x nv-axis");C.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");C.append("g").attr("class","nv-barsWrap");K.attr("transform","translate("+p.left+","+p.top+")");D&&K.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)");b.width(A).height(H);K.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled})).transition().call(b);V.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");K.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",I.rangeBand()*(B?2:1)).attr("height",
16).attr("x",-I.rangeBand()/(B?1:2));r&&(l.scale(I).ticks(A/100).tickSize(-H,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+(M.range()[0]+(b.showValues()&&0>M.domain()[0]?16:0))+")"),K.select(".nv-x.nv-axis").transition().call(l),t=K.select(".nv-x.nv-axis").selectAll("g"),B&&t.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));G&&(v.scale(M).ticks(H/36).tickSize(-A,0),K.select(".nv-y.nv-axis").transition().call(v));K.select(".nv-zeroLine line").attr("x1",
0).attr("x2",A).attr("y1",M(0)).attr("y2",M(0));N.on("tooltipShow",function(e){if(F){var g=P.parentNode,p=e.pos[0]+(g.offsetLeft||0),t=e.pos[1]+(g.offsetTop||0),r=l.tickFormat()(b.x()(e.point,e.pointIndex)),m=v.tickFormat()(b.y()(e.point,e.pointIndex)),r=E(e.series.key,r,m,e,a);u.tooltip.show([p,t],r,0>e.value?"n":"s",null,g)}})});return a}var b=u.models.discreteBar(),l=u.models.axis(),v=u.models.axis(),p={top:15,right:10,bottom:50,left:60},e=null,g=null,t=u.utils.getColor(),r=!0,G=!0,D=!1,B=!1,F=
!0,E=function(a,b,e,g,l){return"<h3>"+b+"</h3><p>"+e+"</p>"},I,M,z="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),T=250;l.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});v.orient(D?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+p.left,a.pos[1]+p.top];N.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){F&&
u.tooltip.cleanup()});a.dispatch=N;a.discretebar=b;a.xAxis=l;a.yAxis=v;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return e;
e=b;return a};a.height=function(b){if(!arguments.length)return g;g=b;return a};a.color=function(e){if(!arguments.length)return t;t=u.utils.getColor(e);b.color(t);return a};a.showXAxis=function(b){if(!arguments.length)return r;r=b;return a};a.showYAxis=function(b){if(!arguments.length)return G;G=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return D;D=b;v.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return B;B=b;return a};a.tooltips=function(b){if(!arguments.length)return F;
F=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return z;z=b;return a};a.transitionDuration=function(b){if(!arguments.length)return T;T=b;return a};return a};u.models.distribution=function(){function a(l){l.each(function(a){var l="x"==p?"y":"x",u=d3.select(this);r=r||t;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return g(a,b)});u=a.selectAll("line.nv-dist"+p).data(function(a){return a.values});u.enter().append("line").attr(p+"1",function(a,b){return r(e(a,b))}).attr(p+"2",function(a,b){return r(e(a,b))});a.exit().selectAll("line.nv-dist"+p).transition().attr(p+"1",function(a,b){return t(e(a,
b))}).attr(p+"2",function(a,b){return t(e(a,b))}).style("stroke-opacity",0).remove();u.attr("class",function(a,b){return"nv-dist"+p+" nv-dist"+p+"-"+b}).attr(l+"1",0).attr(l+"2",v);u.transition().attr(p+"1",function(a,b){return t(e(a,b))}).attr(p+"2",function(a,b){return t(e(a,b))});r=t.copy()});return a}var b={top:0,right:0,bottom:0,left:0},l=400,v=8,p="x",e=function(a){return a[p]},g=u.utils.defaultColor(),t=d3.scale.linear(),r;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.axis=function(b){if(!arguments.length)return p;p=b;return a};a.size=function(b){if(!arguments.length)return v;v=b;return a};a.getData=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return t;
t=b;return a};a.color=function(b){if(!arguments.length)return g;g=u.utils.getColor(b);return a};return a};u.models.historicalBarChart=function(){function a(P){P.each(function(A){var H=d3.select(this),K=this,C=(t||parseInt(H.style("width"))||960)-e.left-e.right,V=(r||parseInt(H.style("height"))||400)-e.top-e.bottom;a.update=function(){H.transition().duration(Q).call(a)};a.container=this;N.disabled=A.map(function(a){return!!a.disabled});if(!T){var R;T={};for(R in N)T[R]=N[R]instanceof Array?N[R].slice(0):
N[R]}if(A&&A.length&&A.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return R=H.selectAll(".nv-noData").data([J]),R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",e.left+C/2).attr("y",e.top+V/2).text(function(a){return a}),a;M=b.xScale();z=b.yScale();var Y=H.selectAll("g.nv-wrap.nv-historicalBarChart").data([A]);R=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var L=Y.select("g");R.append("g").attr("class","nv-x nv-axis");R.append("g").attr("class","nv-y nv-axis");R.append("g").attr("class","nv-barsWrap");R.append("g").attr("class","nv-legendWrap");G&&(p.width(C),L.select(".nv-legendWrap").datum(A).call(p),e.top!=p.height()&&(e.top=p.height(),V=(r||parseInt(H.style("height"))||400)-e.top-e.bottom),Y.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")"));Y.attr("transform","translate("+e.left+","+e.top+")");F&&L.select(".nv-y.nv-axis").attr("transform",
"translate("+C+",0)");b.width(C).height(V).color(A.map(function(a,b){return a.color||g(a,b)}).filter(function(a,b){return!A[b].disabled}));L.select(".nv-barsWrap").datum(A.filter(function(a){return!a.disabled})).transition().call(b);D&&(l.scale(M).tickSize(-V,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+z.range()[0]+")"),L.select(".nv-x.nv-axis").transition().call(l));B&&(v.scale(z).ticks(V/36).tickSize(-C,0),L.select(".nv-y.nv-axis").transition().call(v));p.dispatch.on("legendClick",
function(b,e){b.disabled=!b.disabled;A.filter(function(a){return!a.disabled}).length||A.map(function(a){a.disabled=!1;Y.selectAll(".nv-series").classed("disabled",!1);return a});N.disabled=A.map(function(a){return!!a.disabled});y.stateChange(N);P.transition().call(a)});p.dispatch.on("legendDblclick",function(b){A.forEach(function(a){a.disabled=!0});b.disabled=!1;N.disabled=A.map(function(a){return!!a.disabled});y.stateChange(N);a.update()});y.on("tooltipShow",function(e){if(E){var g=K.parentNode;
if(g){var m=d3.select(g).select("svg"),p=m.node()?m.attr("viewBox"):null;p&&(p=p.split(" "),m=parseInt(m.style("width"))/p[2],e.pos[0]*=m,e.pos[1]*=m)}var m=e.pos[0]+(g.offsetLeft||0),p=e.pos[1]+(g.offsetTop||0),t=l.tickFormat()(b.x()(e.point,e.pointIndex)),r=v.tickFormat()(b.y()(e.point,e.pointIndex));e=I(e.series.key,t,r,e,a);u.tooltip.show([m,p],e,null,null,g)}});y.on("changeState",function(b){"undefined"!==typeof b.disabled&&(A.forEach(function(a,e){a.disabled=b.disabled[e]}),N.disabled=b.disabled);
a.update()})});return a}var b=u.models.historicalBar(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e={top:30,right:90,bottom:50,left:90},g=u.utils.defaultColor(),t=null,r=null,G=!1,D=!0,B=!0,F=!1,E=!0,I=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},M,z,N={},T=null,J="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),Q=250;l.orient("bottom").tickPadding(7);v.orient(F?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+e.left,a.pos[1]+e.top];y.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});y.on("tooltipHide",function(){E&&u.tooltip.cleanup()});a.dispatch=y;a.bars=b;a.legend=p;a.xAxis=l;a.yAxis=v;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=u.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return e;e.top="undefined"!=typeof b.top?b.top:e.top;e.right="undefined"!=typeof b.right?b.right:e.right;e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom;e.left="undefined"!=typeof b.left?b.left:e.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return g;g=u.utils.getColor(b);p.color(g);return a};a.showLegend=function(b){if(!arguments.length)return G;
G=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return B;B=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return F;F=b;v.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=function(b){if(!arguments.length)return N;N=b;return a};a.defaultState=function(b){if(!arguments.length)return T;
T=b;return a};a.noData=function(b){if(!arguments.length)return J;J=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Q;Q=b;return a};return a};u.models.indentedTree=function(){function a(b){b.each(function(b){function e(b,g,l){d3.event.stopPropagation();if(d3.event.shiftKey&&!l)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&e(a,0,!0)}),!0;if(!u(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function l(a){return a._values&&a._values.length?B:a.values&&a.values.length?F:""}function p(a){return a._values&&a._values.length}function u(a){return(a=a.values||a._values)&&a.length}var z=1,A=d3.select(this),H=d3.layout.tree().children(function(a){return a.values}).size([v,20]);a.update=function(){A.transition().duration(600).call(a)};b[0]||(b[0]={key:r});var z=H.nodes(b[0]),K=d3.select(this).selectAll("div").data([[z]]);b=K.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
K=K.select("table").attr("width","100%").attr("class",D);if(g){var C=b.append("thead").append("tr");G.forEach(function(a){C.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=K.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");z=d3.max(z,function(a){return a.depth});H.size([v,20*z]);var V=b.selectAll("tr").data(function(a){return a.filter(function(a){return t&&!a.children?t(a):!0})},function(a,
b){return a.id||a.id||++M});V.exit().remove();V.select("img.nv-treeicon").attr("src",l).classed("folded",p);var R=V.enter().append("tr");G.forEach(function(a,b){var g=R.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(l(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)g.append("img").classed("nv-treeicon",!0).classed("nv-folded",p).attr("src",l).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return l(a)?
"inline-block":"none"}).on("click",e);g.each(function(e){!b&&I(e)?d3.select(this).append("a").attr("href",I).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(g.append("span").attr("class","nv-childrenCount"),V.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return t?t(a):!0}).length||a._values&&a._values.filter(function(a){return t?t(a):!0}).length||0)+")":""}))});V.order().on("click",function(a){E.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){E.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){E.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){E.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=u.utils.defaultColor(),e=Math.floor(1E4*Math.random()),g=!0,t=!1,r="No Data Available.",G=[{key:"key",label:"Name",type:"text"}],D=null,B="images/grey-plus.png",F="images/grey-minus.png",E=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),I=function(a){return a.url},M=0;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.color=function(b){if(!arguments.length)return p;p=u.utils.getColor(b);scatter.color(p);return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.header=function(b){if(!arguments.length)return g;g=b;return a};a.noData=
function(b){if(!arguments.length)return r;r=b;return a};a.filterZero=function(b){if(!arguments.length)return t;t=b;return a};a.columns=function(b){if(!arguments.length)return G;G=b;return a};a.tableClass=function(b){if(!arguments.length)return D;D=b;return a};a.iconOpen=function(b){if(!arguments.length)return B;B=b;return a};a.iconClose=function(b){if(!arguments.length)return F;F=b;return a};a.getUrl=function(b){if(!arguments.length)return I;I=b;return a};return a};u.models.legend=function(){function a(B){B.each(function(a){var B=
l-b.left-b.right,I=d3.select(this).selectAll("g.nv-legend").data([a]);I.enter().append("g").attr("class","nvd3 nv-legend").append("g");var F=I.select("g");I.attr("transform","translate("+b.left+","+b.top+")");var I=F.selectAll(".nv-series").data(function(a){return a}),z=I.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){D.legendMouseover(a,b)}).on("mouseout",function(a,b){D.legendMouseout(a,b)}).on("click",function(b,e){D.legendClick(b,e);r&&(G?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),D.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,e){D.legendDblclick(b,e);r&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,D.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});z.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);z.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");I.classed("disabled",function(a){return a.disabled});I.exit().remove();I.select("circle").style("fill",function(a,b){return a.color||e(a,b)}).style("stroke",function(a,b){return a.color||e(a,b)});I.select("text").text(p);if(g){var N=[];I.each(function(a,b){var e=d3.select(this).select("text"),g;try{if(g=e.getComputedTextLength(),0>=g)throw Error();}catch(L){g=u.utils.calcApproxTextWidth(e)}N.push(g+28)});for(var T=0,J=0,z=[];J<B&&T<N.length;)z[T]=
N[T],J+=N[T++];for(0===T&&(T=1);J>B&&1<T;){z=[];T--;for(J=0;J<N.length;J++)N[J]>(z[J%T]||0)&&(z[J%T]=N[J]);J=z.reduce(function(a,b,e,g){return a+b})}for(var y=[],Q=B=0;B<T;B++)y[B]=Q,Q+=z[B];I.attr("transform",function(a,b){return"translate("+y[b%T]+","+(5+20*Math.floor(b/T))+")"});t?F.attr("transform","translate("+(l-b.right-J)+","+b.top+")"):F.attr("transform","translate(0,"+b.top+")");v=b.top+b.bottom+20*Math.ceil(N.length/T)}else{var P=5,A=5,H=0,K;I.attr("transform",function(a,e){var g=d3.select(this).select("text").node().getComputedTextLength()+
28;K=A;l<b.left+b.right+K+g&&(A=K=5,P+=20);A+=g;A>H&&(H=A);return"translate("+K+","+P+")"});F.attr("transform","translate("+(l-b.right-H)+","+b.top+")");v=b.top+b.bottom+P+15}});return a}var b={top:5,right:0,bottom:5,left:0},l=400,v=20,p=function(a){return a.key},e=u.utils.defaultColor(),g=!0,t=!0,r=!0,G=!1,D=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=D;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.key=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return e;e=u.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return g;
g=b;return a};a.rightAlign=function(b){if(!arguments.length)return t;t=b;return a};a.updateState=function(b){if(!arguments.length)return r;r=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return G;G=b;return a};return a};u.models.line=function(){function a(z){z.each(function(a){var z=v-l.left-l.right,J=p-l.top-l.bottom,N=d3.select(this);B=b.xScale();F=b.yScale();I=I||B;M=M||F;a=N.selectAll("g.nv-wrap.nv-line").data([a]);var Q=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
N=Q.append("defs"),y=Q.append("g"),Q=a.select("g");y.append("g").attr("class","nv-groups");y.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+l.left+","+l.top+")");b.width(z).height(J);y=a.select(".nv-scatterWrap");y.transition().call(b);N.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",z).attr("height",0<J?J:0);Q.attr("clip-path",D?"url(#nv-edge-clip-"+b.id()+")":"");y.attr("clip-path",D?"url(#nv-edge-clip-"+
b.id()+")":"");z=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});z.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);z.exit().remove();z.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return e(a,b)}).style("stroke",function(a,b){return e(a,b)});z.transition().style("stroke-opacity",1).style("fill-opacity",.5);J=z.selectAll("path.nv-area").data(function(a){return G(a)?
[a]:[]});J.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(r).x(function(a,b){return u.utils.NaNtoZero(I(g(a,b)))}).y0(function(a,b){return u.utils.NaNtoZero(M(t(a,b)))}).y1(function(a,b){return M(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,[a.values])});z.exit().selectAll("path.nv-area").remove();J.transition().attr("d",function(a){return d3.svg.area().interpolate(E).defined(r).x(function(a,b){return u.utils.NaNtoZero(B(g(a,
b)))}).y0(function(a,b){return u.utils.NaNtoZero(F(t(a,b)))}).y1(function(a,b){return F(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,[a.values])});z=z.selectAll("path.nv-line").data(function(a){return[a.values]});z.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(r).x(function(a,b){return u.utils.NaNtoZero(I(g(a,b)))}).y(function(a,b){return u.utils.NaNtoZero(M(t(a,b)))}));z.transition().attr("d",d3.svg.line().interpolate(E).defined(r).x(function(a,
b){return u.utils.NaNtoZero(B(g(a,b)))}).y(function(a,b){return u.utils.NaNtoZero(F(t(a,b)))}));I=B.copy();M=F.copy()});return a}var b=u.models.scatter(),l={top:0,right:0,bottom:0,left:0},v=960,p=500,e=u.utils.defaultColor(),g=function(a){return a.x},t=function(a){return a.y},r=function(a,b){return!isNaN(t(a,b))&&null!==t(a,b)},G=function(a){return a.area},D=!1,B,F,E="linear";b.size(16).sizeDomain([16,256]);var I,M;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:l.left;return a};a.width=function(b){if(!arguments.length)return v;
v=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.x=function(e){if(!arguments.length)return g;g=e;b.x(e);return a};a.y=function(e){if(!arguments.length)return t;t=e;b.y(e);return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(g){if(!arguments.length)return e;e=u.utils.getColor(g);b.color(e);return a};a.interpolate=function(b){if(!arguments.length)return E;E=b;return a};a.defined=function(b){if(!arguments.length)return r;r=b;return a};
a.isArea=function(b){if(!arguments.length)return G;G=d3.functor(b);return a};return a};u.models.lineChart=function(){function a(H){H.each(function(K){var C=d3.select(this),H=this,R=(r||parseInt(C.style("width"))||960)-g.left-g.right,Y=(G||parseInt(C.style("height"))||400)-g.top-g.bottom;a.update=function(){C.transition().duration(A).call(a)};a.container=this;J.disabled=K.map(function(a){return!!a.disabled});if(!W){var L;W={};for(L in J)W[L]=J[L]instanceof Array?J[L].slice(0):J[L]}if(K&&K.length&&
K.filter(function(a){return a.values.length}).length)C.selectAll(".nv-noData").remove();else return L=C.selectAll(".nv-noData").data([Q]),L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",g.left+R/2).attr("y",g.top+Y/2).text(function(a){return a}),a;N=b.xScale();y=b.yScale();L=C.selectAll("g.nv-wrap.nv-lineChart").data([K]);var ea=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),X=L.select("g");ea.append("rect").style("opacity",
0);ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y nv-axis");ea.append("g").attr("class","nv-linesWrap");ea.append("g").attr("class","nv-legendWrap");ea.append("g").attr("class","nv-interactive");X.select("rect").attr("width",R).attr("height",0<Y?Y:0);D&&(p.width(R),X.select(".nv-legendWrap").datum(K).call(p),g.top!=p.height()&&(g.top=p.height(),Y=(G||parseInt(C.style("height"))||400)-g.top-g.bottom),L.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")"));
L.attr("transform","translate("+g.left+","+g.top+")");E&&X.select(".nv-y.nv-axis").attr("transform","translate("+R+",0)");I&&(e.width(R).height(Y).margin({left:g.left,top:g.top}).svgContainer(C).xScale(N),L.select(".nv-interactive").call(e));b.width(R).height(Y).color(K.map(function(a,b){return a.color||t(a,b)}).filter(function(a,b){return!K[b].disabled}));X.select(".nv-linesWrap").datum(K.filter(function(a){return!a.disabled})).transition().call(b);B&&(l.scale(N).ticks(R/100).tickSize(-Y,0),X.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+y.range()[0]+")"),X.select(".nv-x.nv-axis").transition().call(l));F&&(v.scale(y).ticks(Y/36).tickSize(-R,0),X.select(".nv-y.nv-axis").transition().call(v));p.dispatch.on("stateChange",function(b){J=b;P.stateChange(J);a.update()});e.dispatch.on("elementMousemove",function(m){b.clearHighlights();var p,r,A,C=[];K.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(e,g){r=u.interactiveBisect(e.values,m.pointXValue,a.x());b.highlightPoint(g,r,!0);var l=e.values[r];
"undefined"!==typeof l&&("undefined"===typeof p&&(p=l),"undefined"===typeof A&&(A=a.xScale()(a.x()(l,r))),C.push({key:e.key,value:a.y()(l,r),color:t(e,e.seriesIndex)}))});if(2<C.length){var L=a.yScale().invert(m.mouseY),z=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),L=u.nearestValueIndex(C.map(function(a){return a.value}),L,z);null!==L&&(C[L].highlight=!0)}L=l.tickFormat()(a.x()(p,r));e.tooltip.position({left:A+g.left,top:m.mouseY+g.top}).chartContainer(H.parentNode).enabled(M).valueFormatter(function(a,
b){return v.tickFormat()(a)}).data({value:L,series:C})();e.renderGuideLine(A)});e.dispatch.on("elementMouseout",function(a){P.tooltipHide();b.clearHighlights()});P.on("tooltipShow",function(e){if(M){var m=H.parentNode,g=e.pos[0]+(m.offsetLeft||0),p=e.pos[1]+(m.offsetTop||0),t=l.tickFormat()(b.x()(e.point,e.pointIndex)),r=v.tickFormat()(b.y()(e.point,e.pointIndex));e=z(e.series.key,t,r,e,a);u.tooltip.show([g,p],e,null,null,m)}});P.on("changeState",function(b){"undefined"!==typeof b.disabled&&K.length===
b.disabled.length&&(K.forEach(function(a,e){a.disabled=b.disabled[e]}),J.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e=u.interactiveGuideline(),g={top:30,right:20,bottom:50,left:60},t=u.utils.defaultColor(),r=null,G=null,D=!0,B=!0,F=!0,E=!1,I=!1,M=!0,z=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},N,y,J={},W=null,Q="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
A=250;l.orient("bottom").tickPadding(7);v.orient(E?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){M&&u.tooltip.cleanup()});a.dispatch=P;a.lines=b;a.legend=p;a.xAxis=l;a.yAxis=v;a.interactiveLayer=e;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=
function(b){if(!arguments.length)return t;t=u.utils.getColor(b);p.color(t);return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return F;F=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return E;E=b;v.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return I;I=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return M;M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return z;z=b;return a};a.state=function(b){if(!arguments.length)return J;J=b;return a};a.defaultState=function(b){if(!arguments.length)return W;W=b;return a};a.noData=function(b){if(!arguments.length)return Q;Q=b;return a};a.transitionDuration=function(b){if(!arguments.length)return A;A=b;return a};return a};u.models.linePlusBarChart=function(){function a(A){A.each(function(A){var K=
d3.select(this),C=this,H=(r||parseInt(K.style("width"))||960)-t.left-t.right,R=(G||parseInt(K.style("height"))||400)-t.top-t.bottom;a.update=function(){K.transition().call(a)};J.disabled=A.map(function(a){return!!a.disabled});if(!W){var D;W={};for(D in J)W[D]=J[D]instanceof Array?J[D].slice(0):J[D]}if(A&&A.length&&A.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return D=K.selectAll(".nv-noData").data([Q]),D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),D.attr("x",t.left+H/2).attr("y",t.top+R/2).text(function(a){return a}),a;D=A.filter(function(a){return!a.disabled&&a.bar});var L=A.filter(function(a){return!a.bar});z=L.filter(function(a){return!a.disabled}).length&&L.filter(function(a){return!a.disabled})[0].values.length?b.xScale():l.xScale();N=l.yScale();y=b.yScale();var B=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([A]),X=B.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
m=B.select("g");X.append("g").attr("class","nv-x nv-axis");X.append("g").attr("class","nv-y1 nv-axis");X.append("g").attr("class","nv-y2 nv-axis");X.append("g").attr("class","nv-barsWrap");X.append("g").attr("class","nv-linesWrap");X.append("g").attr("class","nv-legendWrap");E&&(g.width(H/2),m.select(".nv-legendWrap").datum(A.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(g),t.top!=g.height()&&(t.top=
g.height(),R=(G||parseInt(K.style("height"))||400)-t.top-t.bottom),m.select(".nv-legendWrap").attr("transform","translate("+H/2+","+-t.top+")"));B.attr("transform","translate("+t.left+","+t.top+")");b.width(H).height(R).color(A.map(function(a,b){return a.color||F(a,b)}).filter(function(a,b){return!A[b].disabled&&!A[b].bar}));l.width(H).height(R).color(A.map(function(a,b){return a.color||F(a,b)}).filter(function(a,b){return!A[b].disabled&&A[b].bar}));B=m.select(".nv-barsWrap").datum(D.length?D:[{values:[]}]);
X=m.select(".nv-linesWrap").datum(L[0]&&!L[0].disabled?L:[{values:[]}]);d3.transition(B).call(l);d3.transition(X).call(b);v.scale(z).ticks(H/100).tickSize(-R,0);m.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");d3.transition(m.select(".nv-x.nv-axis")).call(v);p.scale(N).ticks(R/36).tickSize(-H,0);d3.transition(m.select(".nv-y1.nv-axis")).style("opacity",D.length?1:0).call(p);e.scale(y).ticks(R/36).tickSize(D.length?0:-H,0);m.select(".nv-y2.nv-axis").style("opacity",L.length?
1:0).attr("transform","translate("+H+",0)");d3.transition(m.select(".nv-y2.nv-axis")).call(e);g.dispatch.on("stateChange",function(b){J=b;P.stateChange(J);a.update()});P.on("tooltipShow",function(m){if(I){var g=C.parentNode,l=m.pos[0]+(g.offsetLeft||0),t=m.pos[1]+(g.offsetTop||0),r=v.tickFormat()(b.x()(m.point,m.pointIndex)),A=(m.series.bar?p:e).tickFormat()(b.y()(m.point,m.pointIndex)),r=M(m.series.key,r,A,m,a);u.tooltip.show([l,t],r,0>m.value?"n":"s",null,g)}});P.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(A.forEach(function(a,e){a.disabled=b.disabled[e]}),J.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),l=u.models.historicalBar(),v=u.models.axis(),p=u.models.axis(),e=u.models.axis(),g=u.models.legend(),t={top:30,right:60,bottom:50,left:60},r=null,G=null,D=function(a){return a.x},B=function(a){return a.y},F=u.utils.defaultColor(),E=!0,I=!0,M=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},z,N,y,J={},W=null,Q="No Data Available.",P=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");l.padData(!0);b.clipEdge(!1).padData(!0);v.orient("bottom").tickPadding(7).highlightZero(!1);p.orient("left");e.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});l.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];P.tooltipShow(a)});l.dispatch.on("elementMouseout.tooltip",
function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){I&&u.tooltip.cleanup()});a.dispatch=P;a.legend=g;a.lines=b;a.bars=l;a.xAxis=v;a.y1Axis=p;a.y2Axis=e;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return D;D=e;b.x(e);l.x(e);return a};a.y=function(e){if(!arguments.length)return B;B=e;b.y(e);l.y(e);return a};a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;
t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return F;F=u.utils.getColor(b);g.color(F);return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.tooltips=function(b){if(!arguments.length)return I;
I=b;return a};a.tooltipContent=function(b){if(!arguments.length)return M;M=b;return a};a.state=function(b){if(!arguments.length)return J;J=b;return a};a.defaultState=function(b){if(!arguments.length)return W;W=b;return a};a.noData=function(b){if(!arguments.length)return Q;Q=b;return a};return a};u.models.lineWithFocusChart=function(){function a(C){C.each(function(C){function R(){r.empty()||r.extent(W);ca.data([r.empty()?N.domain():W]).each(function(a,b){var e=N(a[0])-M.range()[0],m=M.range()[1]-N(a[1]);
d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",N(a[1])).attr("width",0>m?0:m)})}function V(){W=r.empty()?null:r.extent();var a=r.empty()?N.domain():r.extent();1>=Math.abs(a[0]-a[1])||(H.brush({extent:a,brush:r}),R(),la.select(".nv-focus .nv-linesWrap").datum(C.filter(function(a){return!a.disabled}).map(function(e,m){return{key:e.key,values:e.values.filter(function(e,m){return b.x()(e,m)>=a[0]&&b.x()(e,m)<=a[1]})}})).transition().duration(K).call(b),
la.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(v),la.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(p))}var L=d3.select(this),ea=this,X=(F||parseInt(L.style("width"))||960)-G.left-G.right,m=(E||parseInt(L.style("height"))||400)-G.top-G.bottom-I,S=I-D.top-D.bottom;a.update=function(){L.transition().duration(K).call(a)};a.container=this;if(C&&C.length&&C.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else{var T=L.selectAll(".nv-noData").data([A]);
T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");T.attr("x",G.left+X/2).attr("y",G.top+m/2).text(function(a){return a});return a}M=b.xScale();z=b.yScale();N=l.xScale();y=l.yScale();var T=L.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([C]),na=T.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),la=T.select("g");na.append("g").attr("class","nv-legendWrap");var Z=na.append("g").attr("class","nv-focus");Z.append("g").attr("class",
"nv-x nv-axis");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-linesWrap");na=na.append("g").attr("class","nv-context");na.append("g").attr("class","nv-x nv-axis");na.append("g").attr("class","nv-y nv-axis");na.append("g").attr("class","nv-linesWrap");na.append("g").attr("class","nv-brushBackground");na.append("g").attr("class","nv-x nv-brush");J&&(t.width(X),la.select(".nv-legendWrap").datum(C).call(t),G.top!=t.height()&&(G.top=t.height(),m=(E||parseInt(L.style("height"))||
400)-G.top-G.bottom-I),la.select(".nv-legendWrap").attr("transform","translate(0,"+-G.top+")"));T.attr("transform","translate("+G.left+","+G.top+")");b.width(X).height(m).color(C.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!C[b].disabled}));l.defined(b.defined()).width(X).height(S).color(C.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!C[b].disabled}));la.select(".nv-context").attr("transform","translate(0,"+(m+G.bottom+D.top)+")");T=la.select(".nv-context .nv-linesWrap").datum(C.filter(function(a){return!a.disabled}));
d3.transition(T).call(l);v.scale(M).ticks(X/100).tickSize(-m,0);p.scale(z).ticks(m/36).tickSize(-X,0);la.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+m+")");r.x(N).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);V();a.transitionDuration(b)});W&&r.extent(W);var ca=la.select(".nv-brushBackground").selectAll("g").data([W||r.extent()]),m=ca.enter().append("g");m.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",S);m.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",S);m=la.select(".nv-x.nv-brush").call(r);m.selectAll("rect").attr("height",S);m.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=S/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});V();e.scale(N).ticks(X/100).tickSize(-S,0);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+
")");d3.transition(la.select(".nv-context .nv-x.nv-axis")).call(e);g.scale(y).ticks(S/36).tickSize(-X,0);d3.transition(la.select(".nv-context .nv-y.nv-axis")).call(g);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")");t.dispatch.on("stateChange",function(b){a.update()});H.on("tooltipShow",function(e){if(Q){var m=ea.parentNode,g=e.pos[0]+(m.offsetLeft||0),l=e.pos[1]+(m.offsetTop||0),t=v.tickFormat()(b.x()(e.point,e.pointIndex)),r=p.tickFormat()(b.y()(e.point,e.pointIndex));
e=P(e.series.key,t,r,e,a);u.tooltip.show([g,l],e,null,null,m)}})});return a}var b=u.models.line(),l=u.models.line(),v=u.models.axis(),p=u.models.axis(),e=u.models.axis(),g=u.models.axis(),t=u.models.legend(),r=d3.svg.brush(),G={top:30,right:30,bottom:30,left:60},D={top:0,right:30,bottom:20,left:60},B=u.utils.defaultColor(),F=null,E=null,I=100,M,z,N,y,J=!0,W=null,Q=!0,P=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},A="No Data Available.",H=d3.dispatch("tooltipShow","tooltipHide",
"brush"),K=250;b.clipEdge(!0);l.interactive(!1);v.orient("bottom").tickPadding(5);p.orient("left");e.orient("bottom").tickPadding(5);g.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+G.left,a.pos[1]+G.top];H.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){H.tooltipHide(a)});H.on("tooltipHide",function(){Q&&u.tooltip.cleanup()});a.dispatch=H;a.legend=t;a.lines=b;a.lines2=l;a.xAxis=v;a.yAxis=p;a.x2Axis=e;a.y2Axis=g;d3.rebind(a,b,"defined","isArea",
"size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return b.x;b.x(e);l.x(e);return a};a.y=function(e){if(!arguments.length)return b.y;b.y(e);l.y(e);return a};a.margin=function(b){if(!arguments.length)return G;G.top="undefined"!=typeof b.top?b.top:G.top;G.right="undefined"!=typeof b.right?b.right:G.right;G.bottom="undefined"!=typeof b.bottom?b.bottom:G.bottom;G.left="undefined"!=
typeof b.left?b.left:G.left;return a};a.margin2=function(b){if(!arguments.length)return D;D=b;return a};a.width=function(b){if(!arguments.length)return F;F=b;return a};a.height=function(b){if(!arguments.length)return E;E=b;return a};a.height2=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);t.color(B);return a};a.showLegend=function(b){if(!arguments.length)return J;J=b;return a};a.tooltips=function(b){if(!arguments.length)return Q;
Q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.interpolate=function(e){if(!arguments.length)return b.interpolate();b.interpolate(e);l.interpolate(e);return a};a.noData=function(b){if(!arguments.length)return A;A=b;return a};a.xTickFormat=function(b){if(!arguments.length)return v.tickFormat();v.tickFormat(b);e.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return p.tickFormat();p.tickFormat(b);g.tickFormat(b);return a};a.brushExtent=
function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return K;K=b;return a};return a};u.models.linePlusBarWithFocusChart=function(){function a(m){m.each(function(m){function S(){F.empty()||F.extent(P);qb.data([F.empty()?C.domain():P]).each(function(a,b){var e=C(a[0])-C.range()[0],m=C.range()[1]-C(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",C(a[1])).attr("width",0>m?0:m)})}function T(){P=
F.empty()?null:F.extent();Q=F.empty()?C.domain():F.extent();X.brush({extent:Q,brush:F});S();v.width(ca).height(ha).color(m.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!m[b].disabled&&m[b].bar}));b.width(ca).height(ha).color(m.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!m[b].disabled&&!m[b].bar}));var a=pa.select(".nv-focus .nv-barsWrap").datum(ma.length?ma.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return v.x()(a,b)>=
Q[0]&&v.x()(a,b)<=Q[1]})}}):[{values:[]}]),g=pa.select(".nv-focus .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa.map(function(a,e){return{key:a.key,values:a.values.filter(function(a,e){return b.x()(a,e)>=Q[0]&&b.x()(a,e)<=Q[1]})}}));K=ma.length?v.xScale():b.xScale();e.scale(K).ticks(ca/100).tickSize(-ha,0);e.domain([Math.ceil(Q[0]),Math.floor(Q[1])]);pa.select(".nv-x.nv-axis").transition().duration(0).call(e);a.transition().duration(0).call(v);g.transition().duration(0).call(b);pa.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");t.scale(V).ticks(ha/36).tickSize(-ca,0);pa.select(".nv-focus .nv-y1.nv-axis").style("opacity",ma.length?1:0);r.scale(R).ticks(ha/36).tickSize(ma.length?0:-ca,0);pa.select(".nv-focus .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+K.range()[1]+",0)");pa.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(t);pa.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(r)}var la=d3.select(this),Z=this,ca=(M||parseInt(la.style("width"))||
960)-E.left-E.right,ha=(z||parseInt(la.style("height"))||400)-E.top-E.bottom-100,ga=100-I.top-I.bottom;a.update=function(){la.transition().duration(0).call(a)};a.container=this;if(m&&m.length&&m.filter(function(a){return a.values.length}).length)la.selectAll(".nv-noData").remove();else{var ba=la.selectAll(".nv-noData").data([ea]);ba.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ba.attr("x",E.left+ca/2).attr("y",E.top+ha/2).text(function(a){return a});
return a}var ma=m.filter(function(a){return!a.disabled&&a.bar}),fa=m.filter(function(a){return!a.bar});K=v.xScale();C=g.scale();V=v.yScale();R=b.yScale();Y=p.yScale();L=l.yScale();var ba=m.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:N(a,b),y:y(a,b)}})}),sa=m.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:N(a,b),y:y(a,b)}})});K.range([0,ca]);C.domain(d3.extent(d3.merge(ba.concat(sa)),
function(a){return a.x})).range([0,ca]);var ba=la.selectAll("g.nv-wrap.nv-linePlusBar").data([m]),sa=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),pa=ba.select("g");sa.append("g").attr("class","nv-legendWrap");var Ba=sa.append("g").attr("class","nv-focus");Ba.append("g").attr("class","nv-x nv-axis");Ba.append("g").attr("class","nv-y1 nv-axis");Ba.append("g").attr("class","nv-y2 nv-axis");Ba.append("g").attr("class","nv-barsWrap");Ba.append("g").attr("class","nv-linesWrap");
sa=sa.append("g").attr("class","nv-context");sa.append("g").attr("class","nv-x nv-axis");sa.append("g").attr("class","nv-y1 nv-axis");sa.append("g").attr("class","nv-y2 nv-axis");sa.append("g").attr("class","nv-barsWrap");sa.append("g").attr("class","nv-linesWrap");sa.append("g").attr("class","nv-brushBackground");sa.append("g").attr("class","nv-x nv-brush");W&&(B.width(ca/2),pa.select(".nv-legendWrap").datum(m.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(B),E.top!=B.height()&&(E.top=B.height(),ha=(z||parseInt(la.style("height"))||400)-E.top-E.bottom-100),pa.select(".nv-legendWrap").attr("transform","translate("+ca/2+","+-E.top+")"));ba.attr("transform","translate("+E.left+","+E.top+")");p.width(ca).height(ga).color(m.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!m[b].disabled&&m[b].bar}));l.width(ca).height(ga).color(m.map(function(a,b){return a.color||J(a,b)}).filter(function(a,
b){return!m[b].disabled&&!m[b].bar}));ba=pa.select(".nv-context .nv-barsWrap").datum(ma.length?ma:[{values:[]}]);sa=pa.select(".nv-context .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa);pa.select(".nv-context").attr("transform","translate(0,"+(ha+E.bottom+I.top)+")");ba.transition().call(p);sa.transition().call(l);F.x(C).on("brush",T);P&&F.extent(P);var qb=pa.select(".nv-brushBackground").selectAll("g").data([P||F.extent()]),ba=qb.enter().append("g");ba.append("rect").attr("class","left").attr("x",
0).attr("y",0).attr("height",ga);ba.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ga);ba=pa.select(".nv-x.nv-brush").call(F);ba.selectAll("rect").attr("height",ga);ba.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=ga/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});g.ticks(ca/100).tickSize(-ga,0);pa.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+Y.range()[0]+")");pa.select(".nv-context .nv-x.nv-axis").transition().call(g);G.scale(Y).ticks(ga/36).tickSize(-ca,0);pa.select(".nv-context .nv-y1.nv-axis").style("opacity",ma.length?1:0).attr("transform","translate(0,"+C.range()[0]+")");pa.select(".nv-context .nv-y1.nv-axis").transition().call(G);D.scale(L).ticks(ga/36).tickSize(ma.length?0:-ca,0);pa.select(".nv-context .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+C.range()[1]+",0)");pa.select(".nv-context .nv-y2.nv-axis").transition().call(D);
B.dispatch.on("stateChange",function(b){a.update()});X.on("tooltipShow",function(m){if(A){var g=Z.parentNode;Q&&(m.pointIndex+=Math.ceil(Q[0]));var l=m.pos[0]+(g.offsetLeft||0),p=m.pos[1]+(g.offsetTop||0),v=e.tickFormat()(b.x()(m.point,m.pointIndex)),K=(m.series.bar?t:r).tickFormat()(b.y()(m.point,m.pointIndex)),v=H(m.series.key,v,K,m,a);u.tooltip.show([l,p],v,0>m.value?"n":"s",null,g)}});T()});return a}var b=u.models.line(),l=u.models.line(),v=u.models.historicalBar(),p=u.models.historicalBar(),
e=u.models.axis(),g=u.models.axis(),t=u.models.axis(),r=u.models.axis(),G=u.models.axis(),D=u.models.axis(),B=u.models.legend(),F=d3.svg.brush(),E={top:30,right:30,bottom:30,left:60},I={top:0,right:30,bottom:20,left:60},M=null,z=null,N=function(a){return a.x},y=function(a){return a.y},J=u.utils.defaultColor(),W=!0,Q,P=null,A=!0,H=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},K,C,V,R,Y,L,ea="No Data Available.",X=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);l.interactive(!1);
e.orient("bottom").tickPadding(5);t.orient("left");r.orient("right");g.orient("bottom").tickPadding(5);G.orient("left");D.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];X.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){X.tooltipHide(a)});v.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];X.tooltipShow(a)});v.dispatch.on("elementMouseout.tooltip",function(a){X.tooltipHide(a)});
X.on("tooltipHide",function(){A&&u.tooltip.cleanup()});a.dispatch=X;a.legend=B;a.lines=b;a.lines2=l;a.bars=v;a.bars2=p;a.xAxis=e;a.x2Axis=g;a.y1Axis=t;a.y2Axis=r;a.y3Axis=G;a.y4Axis=D;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return N;N=e;b.x(e);v.x(e);return a};a.y=function(e){if(!arguments.length)return y;y=e;b.y(e);v.y(e);return a};a.margin=function(b){if(!arguments.length)return E;E.top="undefined"!=typeof b.top?
b.top:E.top;E.right="undefined"!=typeof b.right?b.right:E.right;E.bottom="undefined"!=typeof b.bottom?b.bottom:E.bottom;E.left="undefined"!=typeof b.left?b.left:E.left;return a};a.width=function(b){if(!arguments.length)return M;M=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.color=function(b){if(!arguments.length)return J;J=u.utils.getColor(b);B.color(J);return a};a.showLegend=function(b){if(!arguments.length)return W;W=b;return a};a.tooltips=function(b){if(!arguments.length)return A;
A=b;return a};a.tooltipContent=function(b){if(!arguments.length)return H;H=b;return a};a.noData=function(b){if(!arguments.length)return ea;ea=b;return a};a.brushExtent=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.multiBar=function(){function a(u){u.each(function(a){var u=l-b.left-b.right,K=v-b.top-b.bottom,C=d3.select(this);I&&a.length&&(I=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);B&&(a=d3.layout.stack().offset(F).values(function(a){return a.values}).y(r)(!a.length&&
I?I:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});B&&a[0].values.map(function(b,e){var m=0,g=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=g,g-=a.size):(a.y1=a.size+m,m+=a.size)})});var L=T&&J?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:r(a,b),y0:a.y0,y1:a.y1}})});p.domain(T||d3.merge(L).map(function(a){return a.x})).rangeBands(W||[0,u],P);e.domain(J||d3.extent(d3.merge(L).map(function(a){return B?0<a.y?a.y1:a.y1+a.y:a.y}).concat(G))).range(Q||
[K,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]+.01*e.domain()[0],e.domain()[1]-.01*e.domain()[1]]):e.domain([-1,1]));H=H||e;var C=C.selectAll("g.nv-wrap.nv-multibar").data([a]),M=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),L=M.append("defs"),M=M.append("g"),X=C.select("g");M.append("g").attr("class","nv-groups");
C.attr("transform","translate("+b.left+","+b.top+")");L.append("clipPath").attr("id","nv-edge-clip-"+g).append("rect");C.select("#nv-edge-clip-"+g+" rect").attr("width",u).attr("height",K);X.attr("clip-path",D?"url(#nv-edge-clip-"+g+")":"");u=C.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});u.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);u.exit().transition().selectAll("rect.nv-bar").delay(function(b,e){return e*N/a[0].values.length}).attr("y",
function(a){return B?H(a.y0):H(0)}).attr("height",0).remove();u.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return E(a,b)}).style("stroke",function(a,b){return E(a,b)});u.transition().style("stroke-opacity",1).style("fill-opacity",.75);u=u.selectAll("rect.nv-bar").data(function(b){return I&&!a.length?I.values:b.values});u.exit().remove();u.enter().append("rect").attr("class",function(a,b){return 0>r(a,b)?"nv-bar negative":
"nv-bar positive"}).attr("x",function(b,e,g){return B?0:g*p.rangeBand()/a.length}).attr("y",function(a){return H(B?a.y0:0)}).attr("height",0).attr("width",p.rangeBand()/(B?1:a.length)).attr("transform",function(a,b){return"translate("+p(t(a,b))+",0)"});u.style("fill",function(a,b,e){return E(a,e,b)}).style("stroke",function(a,b,e){return E(a,e,b)}).on("mouseover",function(b,g){d3.select(this).classed("hover",!0);A.elementMouseover({value:r(b,g),point:b,series:a[b.series],pos:[p(t(b,g))+p.rangeBand()*
(B?a.length/2:b.series+.5)/a.length,e(r(b,g)+(B?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);A.elementMouseout({value:r(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,g){A.elementClick({value:r(b,g),point:b,series:a[b.series],pos:[p(t(b,g))+p.rangeBand()*(B?a.length/2:b.series+.5)/a.length,e(r(b,g)+(B?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,g){A.elementDblClick({value:r(b,g),point:b,series:a[b.series],pos:[p(t(b,g))+p.rangeBand()*(B?a.length/2:b.series+.5)/a.length,e(r(b,g)+(B?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.attr("class",function(a,b){return 0>r(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+p(t(a,b))+",0)"});y&&(z||(z=a.map(function(){return!0})),u.style("fill",function(a,b,e){return d3.rgb(y(a,b)).darker(z.map(function(a,
b){return b}).filter(function(a,b){return!z[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(y(a,b)).darker(z.map(function(a,b){return b}).filter(function(a,b){return!z[b]})[e]).toString()}));B?u.transition().delay(function(b,e){return e*N/a[0].values.length}).attr("y",function(a,b){return e(B?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(e(a.y+(B?a.y0:0))-e(B?a.y0:0)),1)}).attr("x",function(b,e){return B?0:b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/
(B?1:a.length)):u.transition().delay(function(b,e){return e*N/a[0].values.length}).attr("x",function(b,e){return b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/a.length).attr("y",function(a,b){return 0>r(a,b)?e(0):1>e(0)-e(r(a,b))?e(0)-1:e(r(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(e(r(a,b))-e(0)),1)||0});p.copy();H=e.copy()});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=d3.scale.ordinal(),e=d3.scale.linear(),g=Math.floor(1E4*Math.random()),t=function(a){return a.x},
r=function(a){return a.y},G=[0],D=!0,B=!1,F="zero",E=u.utils.defaultColor(),I=!1,y=null,z,N=1200,T,J,W,Q,P=.1,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),H;a.dispatch=A;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return r;r=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?
e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return p;p=b;return a};a.yScale=function(b){if(!arguments.length)return e;e=b;return a};a.xDomain=function(b){if(!arguments.length)return T;T=b;return a};a.yDomain=function(b){if(!arguments.length)return J;
J=b;return a};a.xRange=function(b){if(!arguments.length)return W;W=b;return a};a.yRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.stacked=function(b){if(!arguments.length)return B;B=b;return a};a.stackOffset=function(b){if(!arguments.length)return F;F=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return E;E=u.utils.getColor(b);return a};a.barColor=
function(b){if(!arguments.length)return y;y=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return z;z=b;return a};a.id=function(b){if(!arguments.length)return g;g=b;return a};a.hideable=function(b){if(!arguments.length)return I;I=b;return a};a.delay=function(b){if(!arguments.length)return N;N=b;return a};a.groupSpacing=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.multiBarChart=function(){function a(V){V.each(function(R){var V=d3.select(this),
L=this,M=(t||parseInt(V.style("width"))||960)-g.left-g.right,X=(r||parseInt(V.style("height"))||400)-g.top-g.bottom;a.update=function(){V.transition().duration(C).call(a)};a.container=this;P.disabled=R.map(function(a){return!!a.disabled});if(!A){var m;A={};for(m in P)A[m]=P[m]instanceof Array?P[m].slice(0):P[m]}if(R&&R.length&&R.filter(function(a){return a.values.length}).length)V.selectAll(".nv-noData").remove();else return m=V.selectAll(".nv-noData").data([H]),m.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",g.left+M/2).attr("y",g.top+X/2).text(function(a){return a}),a;W=b.xScale();Q=b.yScale();var S=V.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([R]),wa=S.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");m=S.select("g");wa.append("g").attr("class","nv-x nv-axis");wa.append("g").attr("class","nv-y nv-axis");wa.append("g").attr("class","nv-barsWrap");wa.append("g").attr("class","nv-legendWrap");
wa.append("g").attr("class","nv-controlsWrap");B&&(p.width(M-(D?180:0)),b.barColor()&&R.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),m.select(".nv-legendWrap").datum(R).call(p),g.top!=p.height()&&(g.top=p.height(),X=(r||parseInt(V.style("height"))||400)-g.top-g.bottom),m.select(".nv-legendWrap").attr("transform","translate("+(D?180:0)+","+-g.top+")"));if(D){var na=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];e.width(D?180:0).color(["#444",
"#444","#444"]);m.select(".nv-controlsWrap").datum(na).attr("transform","translate(0,"+-g.top+")").call(e)}S.attr("transform","translate("+g.left+","+g.top+")");I&&m.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)");b.disabled(R.map(function(a){return a.disabled})).width(M).height(X).color(R.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!R[b].disabled}));m.select(".nv-barsWrap").datum(R.filter(function(a){return!a.disabled})).transition().call(b);if(F){l.scale(W).ticks(M/
100).tickSize(-X,0);m.select(".nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")");m.select(".nv-x.nv-axis").transition().call(l);S=m.select(".nv-x.nv-axis > g").selectAll("g");S.selectAll("line, text").style("opacity",1);if(z){S.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?5:17)+")"});var la=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;m.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+
(0===b||0!==la%2?17:5)+")"})}y&&S.filter(function(a,b){return 0!==b%Math.ceil(R[0].values.length/(M/100))}).selectAll("text, line").style("opacity",0);N&&S.selectAll(".tick text").attr("transform","rotate("+N+" 0,0)").style("text-anchor",0<N?"start":"end");m.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}E&&(v.scale(Q).ticks(X/36).tickSize(-M,0),m.select(".nv-y.nv-axis").transition().call(v));p.dispatch.on("stateChange",function(b){P=b;K.stateChange(P);a.update()});e.dispatch.on("legendClick",
function(e,g){if(e.disabled){na=na.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}P.stacked=b.stacked();K.stateChange(P);a.update()}});K.on("tooltipShow",function(e){if(T){var g=L.parentNode,m=e.pos[0]+(g.offsetLeft||0),p=e.pos[1]+(g.offsetTop||0),t=l.tickFormat()(b.x()(e.point,e.pointIndex)),r=v.tickFormat()(b.y()(e.point,e.pointIndex)),t=J(e.series.key,t,r,e,a);u.tooltip.show([m,p],t,0>e.value?"n":"s",null,g)}});
K.on("changeState",function(e){"undefined"!==typeof e.disabled&&(R.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),P.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBar(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e=u.models.legend(),g={top:30,right:20,bottom:50,left:60},t=null,r=null,G=u.utils.defaultColor(),D=!0,B=!0,F=!0,E=!0,I=!1,y=!0,z=!1,N=0,T=!0,J=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+
e+" on "+b+"</p>"},W,Q,P={stacked:!1},A=null,H="No Data Available.",K=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),C=250;b.stacked(!1);l.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});v.orient(I?"right":"left").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];K.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){K.tooltipHide(a)});
K.on("tooltipHide",function(){T&&u.tooltip.cleanup()});a.dispatch=K;a.multibar=b;a.legend=p;a.xAxis=l;a.yAxis=v;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;
g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);p.color(G);return a};a.showControls=function(b){if(!arguments.length)return D;D=b;return a};a.showLegend=function(b){if(!arguments.length)return B;B=b;return a};a.showXAxis=function(b){if(!arguments.length)return F;F=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;
E=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return I;I=b;v.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return y;y=b;return a};a.rotateLabels=function(b){if(!arguments.length)return N;N=b;return a};a.staggerLabels=function(b){if(!arguments.length)return z;z=b;return a};a.tooltip=function(b){if(!arguments.length)return J;J=b;return a};a.tooltips=function(b){if(!arguments.length)return T;T=b;return a};a.tooltipContent=function(b){if(!arguments.length)return J;
J=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};a.transitionDuration=function(b){if(!arguments.length)return C;C=b;return a};return a};u.models.multiBarHorizontal=function(){function a(p){p.each(function(a){var p=l-b.left-b.right,u=v-b.top-b.bottom;d3.select(this);E&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(r)(a));
a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});E&&a[0].values.map(function(b,e){var g=0,m=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=m-a.size,m-=a.size):(a.y1=g,g+=a.size)})});var K=J&&W?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:r(a,b),y0:a.y0,y1:a.y1}})});e.domain(J||d3.merge(K).map(function(a){return a.x})).rangeBands(Q||[0,u],.1);g.domain(W||d3.extent(d3.merge(K).map(function(a){return E?0<a.y?a.y1+a.y:a.y1:a.y}).concat(G)));
I&&!E?g.range(P||[0>g.domain()[0]?z:0,p-(0<g.domain()[1]?z:0)]):g.range(P||[0,p]);H=H||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);p=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);u=p.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");u.append("defs");u=u.append("g");p.select("g");u.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a,b){return b});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return D(a,b)}).style("stroke",function(a,b){return D(a,b)});p.transition().style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});
p.exit().remove();u=p.enter().append("g").attr("transform",function(b,g,l){return"translate("+H(E?b.y0:0)+","+(E?0:l*e.rangeBand()/a.length+e(t(b,g)))+")"});u.append("rect").attr("width",0).attr("height",e.rangeBand()/(E?1:a.length));p.on("mouseover",function(b,l){d3.select(this).classed("hover",!0);A.elementMouseover({value:r(b,l),point:b,series:a[b.series],pos:[g(r(b,l)+(E?b.y0:0)),e(t(b,l))+e.rangeBand()*(E?a.length/2:b.series+.5)/a.length],pointIndex:l,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,e){d3.select(this).classed("hover",!1);A.elementMouseout({value:r(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,l){A.elementClick({value:r(b,l),point:b,series:a[b.series],pos:[e(t(b,l))+e.rangeBand()*(E?a.length/2:b.series+.5)/a.length,g(r(b,l)+(E?b.y0:0))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,l){A.elementDblClick({value:r(b,l),point:b,series:a[b.series],pos:[e(t(b,l))+
e.rangeBand()*(E?a.length/2:b.series+.5)/a.length,g(r(b,l)+(E?b.y0:0))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.append("text");I&&!E?(p.select("text").attr("text-anchor",function(a,b){return 0>r(a,b)?"end":"start"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return N(r(a,b))}),p.transition().select("text").attr("x",function(a,b){return 0>r(a,b)?-4:g(r(a,b))-g(0)+4})):p.selectAll("text").text("");y&&!E?(u.append("text").classed("nv-bar-label",
!0),p.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>r(a,b)?"start":"end"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return t(a,b)}),p.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>r(a,b)?g(0)-g(r(a,b))+4:-4})):p.selectAll("text.nv-bar-label").text("");p.attr("class",function(a,b){return 0>r(a,b)?"nv-bar negative":"nv-bar positive"});B&&(F||(F=a.map(function(){return!0})),p.style("fill",function(a,b,e){return d3.rgb(B(a,
b)).darker(F.map(function(a,b){return b}).filter(function(a,b){return!F[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(B(a,b)).darker(F.map(function(a,b){return b}).filter(function(a,b){return!F[b]})[e]).toString()}));E?p.transition().attr("transform",function(a,b){return"translate("+g(a.y1)+","+e(t(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(g(r(a,b)+a.y0)-g(a.y0))}).attr("height",e.rangeBand()):p.transition().attr("transform",function(b,l){return"translate("+
(0>r(b,l)?g(r(b,l)):g(0))+","+(b.series*e.rangeBand()/a.length+e(t(b,l)))+")"}).select("rect").attr("height",e.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(g(r(a,b))-g(0)),1)});e.copy();H=g.copy()});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),g=d3.scale.linear(),t=function(a){return a.x},r=function(a){return a.y},G=[0],D=u.utils.defaultColor(),B=null,F,E=!1,I=!1,y=!1,z=60,N=d3.format(",.2f"),T=1200,J,
W,Q,P,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),H;a.dispatch=A;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return r;r=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?
e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return J;J=b;return a};a.yDomain=function(b){if(!arguments.length)return W;W=b;return a};a.xRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.yRange=function(b){if(!arguments.length)return P;
P=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.stacked=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return D;D=u.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return F;F=b;return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.delay=function(b){if(!arguments.length)return T;T=b;return a};
a.showValues=function(b){if(!arguments.length)return I;I=b;return a};a.showBarLabels=function(b){if(!arguments.length)return y;y=b;return a};a.valueFormat=function(b){if(!arguments.length)return N;N=b;return a};a.valuePadding=function(b){if(!arguments.length)return z;z=b;return a};return a};u.models.multiBarHorizontalChart=function(){function a(A){A.each(function(A){var H=d3.select(this),C=this,M=(t||parseInt(H.style("width"))||960)-g.left-g.right,R=(r||parseInt(H.style("height"))||400)-g.top-g.bottom;
a.update=function(){H.transition().duration(P).call(a)};a.container=this;T.disabled=A.map(function(a){return!!a.disabled});if(!J){var Y;J={};for(Y in T)J[Y]=T[Y]instanceof Array?T[Y].slice(0):T[Y]}if(A&&A.length&&A.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return Y=H.selectAll(".nv-noData").data([W]),Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Y.attr("x",g.left+M/2).attr("y",g.top+R/2).text(function(a){return a}),
a;z=b.xScale();N=b.yScale();Y=H.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([A]);var L=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),ea=Y.select("g");L.append("g").attr("class","nv-x nv-axis");L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");L.append("g").attr("class","nv-barsWrap");L.append("g").attr("class","nv-legendWrap");L.append("g").attr("class","nv-controlsWrap");B&&(p.width(M-(D?180:0)),
b.barColor()&&A.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),ea.select(".nv-legendWrap").datum(A).call(p),g.top!=p.height()&&(g.top=p.height(),R=(r||parseInt(H.style("height"))||400)-g.top-g.bottom),ea.select(".nv-legendWrap").attr("transform","translate("+(D?180:0)+","+-g.top+")"));if(D){var X=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];e.width(D?180:0).color(["#444","#444","#444"]);ea.select(".nv-controlsWrap").datum(X).attr("transform",
"translate(0,"+-g.top+")").call(e)}Y.attr("transform","translate("+g.left+","+g.top+")");b.disabled(A.map(function(a){return a.disabled})).width(M).height(R).color(A.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!A[b].disabled}));ea.select(".nv-barsWrap").datum(A.filter(function(a){return!a.disabled})).transition().call(b);F&&(l.scale(z).ticks(R/24).tickSize(-M,0),ea.select(".nv-x.nv-axis").transition().call(l),ea.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));
E&&(v.scale(N).ticks(M/100).tickSize(-R,0),ea.select(".nv-y.nv-axis").attr("transform","translate(0,"+R+")"),ea.select(".nv-y.nv-axis").transition().call(v));ea.select(".nv-zeroLine line").attr("x1",N(0)).attr("x2",N(0)).attr("y1",0).attr("y2",-R);p.dispatch.on("stateChange",function(b){T=b;Q.stateChange(T);a.update()});e.dispatch.on("legendClick",function(e,g){if(e.disabled){X=X.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}T.stacked=
b.stacked();Q.stateChange(T);a.update()}});Q.on("tooltipShow",function(e){if(I){var g=C.parentNode,m=e.pos[0]+(g.offsetLeft||0),p=e.pos[1]+(g.offsetTop||0),t=l.tickFormat()(b.x()(e.point,e.pointIndex)),r=v.tickFormat()(b.y()(e.point,e.pointIndex)),t=y(e.series.key,t,r,e,a);u.tooltip.show([m,p],t,0>e.value?"e":"w",null,g)}});Q.on("changeState",function(e){"undefined"!==typeof e.disabled&&(A.forEach(function(a,b){a.disabled=e.disabled[b]}),T.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),
T.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBarHorizontal(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend().height(30),e=u.models.legend().height(30),g={top:30,right:20,bottom:50,left:60},t=null,r=null,G=u.utils.defaultColor(),D=!0,B=!0,F=!0,E=!0,I=!0,y=function(a,b,e,g,l){return"<h3>"+a+" - "+b+"</h3><p>"+e+"</p>"},z,N,T={stacked:!1},J=null,W="No Data Available.",Q=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),P=250;b.stacked(!1);l.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});
v.orient("bottom").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];Q.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){Q.tooltipHide(a)});Q.on("tooltipHide",function(){I&&u.tooltip.cleanup()});a.dispatch=Q;a.multibar=b;a.legend=p;a.xAxis=l;a.yAxis=v;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat",
"stacked","barColor");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return G;G=
u.utils.getColor(b);p.color(G);return a};a.showControls=function(b){if(!arguments.length)return D;D=b;return a};a.showLegend=function(b){if(!arguments.length)return B;B=b;return a};a.showXAxis=function(b){if(!arguments.length)return F;F=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;E=b;return a};a.tooltip=function(b){if(!arguments.length)return y;y=b;return a};a.tooltips=function(b){if(!arguments.length)return I;I=b;return a};a.tooltipContent=function(b){if(!arguments.length)return y;
y=b;return a};a.state=function(b){if(!arguments.length)return T;T=b;return a};a.defaultState=function(b){if(!arguments.length)return J;J=b;return a};a.noData=function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.multiChart=function(){function a(H){H.each(function(H){var C=d3.select(this),K=this;a.update=function(){C.transition().call(a)};a.container=this;var R=(v||parseInt(C.style("width"))||960)-b.left-
b.right,M=(p||parseInt(C.style("height"))||400)-b.top-b.bottom,L=H.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),ea=H.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),X=H.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),m=H.filter(function(a){return!a.disabled&&"bar"==a.type&&2==a.yAxis}),S=H.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),wa=H.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),na=H.filter(function(a){return!a.disabled&&
1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),la=H.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});r.domain(d3.extent(d3.merge(na.concat(la)),function(a){return a.x})).range([0,R]);var Z=C.selectAll("g.wrap.multiChart").data([H]),ca=Z.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ca.append("g").attr("class","x axis");ca.append("g").attr("class","y1 axis");ca.append("g").attr("class",
"y2 axis");ca.append("g").attr("class","lines1Wrap");ca.append("g").attr("class","lines2Wrap");ca.append("g").attr("class","bars1Wrap");ca.append("g").attr("class","bars2Wrap");ca.append("g").attr("class","stack1Wrap");ca.append("g").attr("class","stack2Wrap");ca.append("g").attr("class","legendWrap");Z=Z.select("g");e&&(P.width(R/2),Z.select(".legendWrap").datum(H.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(P),
b.top!=P.height()&&(b.top=P.height(),M=(p||parseInt(C.style("height"))||400)-b.top-b.bottom),Z.select(".legendWrap").attr("transform","translate("+R/2+","+-b.top+")"));E.width(R).height(M).interpolate("monotone").color(H.map(function(a,b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&1==H[b].yAxis&&"line"==H[b].type}));I.width(R).height(M).interpolate("monotone").color(H.map(function(a,b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&2==H[b].yAxis&&
"line"==H[b].type}));y.width(R).height(M).color(H.map(function(a,b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&1==H[b].yAxis&&"bar"==H[b].type}));z.width(R).height(M).color(H.map(function(a,b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&2==H[b].yAxis&&"bar"==H[b].type}));N.width(R).height(M).color(H.map(function(a,b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&1==H[b].yAxis&&"area"==H[b].type}));T.width(R).height(M).color(H.map(function(a,
b){return a.color||l[b%l.length]}).filter(function(a,b){return!H[b].disabled&&2==H[b].yAxis&&"area"==H[b].type}));Z.attr("transform","translate("+b.left+","+b.top+")");var ca=Z.select(".lines1Wrap").datum(L),ha=Z.select(".bars1Wrap").datum(X),ga=Z.select(".stack1Wrap").datum(S),ba=Z.select(".lines2Wrap").datum(ea),ma=Z.select(".bars2Wrap").datum(m),fa=Z.select(".stack2Wrap").datum(wa),sa=S.length?S.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+
b[e].y}})}).concat([{x:0,y:0}]):[],pa=wa.length?wa.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[];B.domain(G||d3.extent(d3.merge(na).concat(sa),function(a){return a.y})).range([0,M]);F.domain(D||d3.extent(d3.merge(la).concat(pa),function(a){return a.y})).range([0,M]);E.yDomain(B.domain());y.yDomain(B.domain());N.yDomain(B.domain());I.yDomain(F.domain());z.yDomain(F.domain());T.yDomain(F.domain());S.length&&d3.transition(ga).call(N);
wa.length&&d3.transition(fa).call(T);X.length&&d3.transition(ha).call(y);m.length&&d3.transition(ma).call(z);L.length&&d3.transition(ca).call(E);ea.length&&d3.transition(ba).call(I);J.ticks(R/100).tickSize(-M,0);Z.select(".x.axis").attr("transform","translate(0,"+M+")");d3.transition(Z.select(".x.axis")).call(J);W.ticks(M/36).tickSize(-R,0);d3.transition(Z.select(".y1.axis")).call(W);Q.ticks(M/36).tickSize(-R,0);d3.transition(Z.select(".y2.axis")).call(Q);Z.select(".y2.axis").style("opacity",la.length?
1:0).attr("transform","translate("+r.range()[1]+",0)");P.dispatch.on("stateChange",function(b){a.update()});A.on("tooltipShow",function(b){if(g){var e=K.parentNode,m=b.pos[0]+(e.offsetLeft||0),l=b.pos[1]+(e.offsetTop||0),p=J.tickFormat()(E.x()(b.point,b.pointIndex)),r=(2==b.series.yAxis?Q:W).tickFormat()(E.y()(b.point,b.pointIndex));b=t(b.series.key,p,r,b,a);u.tooltip.show([m,l],b,void 0,void 0,e.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},l=d3.scale.category20().range(),
v=null,p=null,e=!0,g=!0,t=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},r,G,D;r=d3.scale.linear();var B=d3.scale.linear(),F=d3.scale.linear(),E=u.models.line().yScale(B),I=u.models.line().yScale(F),y=u.models.multiBar().stacked(!1).yScale(B),z=u.models.multiBar().stacked(!1).yScale(F),N=u.models.stackedArea().yScale(B),T=u.models.stackedArea().yScale(F),J=u.models.axis().scale(r).orient("bottom").tickPadding(5),W=u.models.axis().scale(B).orient("left"),Q=u.models.axis().scale(F).orient("right"),
P=u.models.legend().height(30),A=d3.dispatch("tooltipShow","tooltipHide");E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});I.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});I.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});y.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+
b.left,a.pos[1]+b.top];A.tooltipShow(a)});y.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});z.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});z.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});N.dispatch.on("tooltipShow",function(a){if(!Math.round(100*N.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});
N.dispatch.on("tooltipHide",function(a){A.tooltipHide(a)});T.dispatch.on("tooltipShow",function(a){if(!Math.round(100*T.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});T.dispatch.on("tooltipHide",function(a){A.tooltipHide(a)});E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});
I.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];A.tooltipShow(a)});I.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});A.on("tooltipHide",function(){g&&u.tooltip.cleanup()});a.dispatch=A;a.lines1=E;a.lines2=I;a.bars1=y;a.bars2=z;a.stack1=N;a.stack2=T;a.xAxis=J;a.yAxis1=W;a.yAxis2=Q;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;E.x(b);y.x(b);return a};a.y=function(b){if(!arguments.length)return getY;
getY=b;E.y(b);y.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return G;G=b;return a};a.yDomain2=function(b){if(!arguments.length)return D;D=b;return a};a.margin=function(e){if(!arguments.length)return b;b=e;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return l;l=b;P.color(b);return a};a.showLegend=function(b){if(!arguments.length)return e;e=b;return a};
a.tooltips=function(b){if(!arguments.length)return g;g=b;return a};a.tooltipContent=function(b){if(!arguments.length)return t;t=b;return a};return a};u.models.ohlcBar=function(){function a(u){u.each(function(a){var u=l-b.left-b.right,A=v-b.top-b.bottom,H=d3.select(this);e.domain(T||d3.extent(a[0].values.map(t).concat(E)));M?e.range(W||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):e.range(W||[0,u]);g.domain(J||[d3.min(a[0].values.map(F).concat(I)),d3.max(a[0].values.map(B).concat(I))]).range(Q||
[A,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]+.01*g.domain()[0],g.domain()[1]-.01*g.domain()[1]]):g.domain([-1,1]));var R=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),G=R.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),L=G.append("defs"),G=G.append("g"),N=R.select("g");G.append("g").attr("class",
"nv-ticks");R.attr("transform","translate("+b.left+","+b.top+")");H.on("click",function(a,b){P.chartClick({data:a,index:b,pos:d3.event,id:p})});L.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");R.select("#nv-chart-clip-path-"+p+" rect").attr("width",u).attr("height",A);N.attr("clip-path",z?"url(#nv-chart-clip-path-"+p+")":"");A=R.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});A.exit().remove();A.enter().append("path").attr("class",function(a,b,e){return(y(a,
b)>D(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b}).attr("d",function(b,e){var m=u/a[0].values.length*.9;return"m0,0l0,"+(g(y(b,e))-g(B(b,e)))+"l"+-m/2+",0l"+m/2+",0l0,"+(g(F(b,e))-g(y(b,e)))+"l0,"+(g(D(b,e))-g(F(b,e)))+"l"+m/2+",0l"+-m/2+",0z"}).attr("transform",function(a,b){return"translate("+e(t(a,b))+","+g(B(a,b))+")"}).on("mouseover",function(b,m){d3.select(this).classed("hover",!0);P.elementMouseover({point:b,series:a[0],pos:[e(t(b,m)),g(r(b,m))],pointIndex:m,seriesIndex:0,
e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);P.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event})}).on("click",function(a,b){P.elementClick({value:r(a,b),data:a,index:b,pos:[e(t(a,b)),g(r(a,b))],e:d3.event,id:p});d3.event.stopPropagation()}).on("dblclick",function(a,b){P.elementDblClick({value:r(a,b),data:a,index:b,pos:[e(t(a,b)),g(r(a,b))],e:d3.event,id:p});d3.event.stopPropagation()});A.attr("class",function(a,b,e){return(y(a,b)>D(a,b)?
"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b});d3.transition(A).attr("transform",function(a,b){return"translate("+e(t(a,b))+","+g(B(a,b))+")"}).attr("d",function(b,e){var l=u/a[0].values.length*.9;return"m0,0l0,"+(g(y(b,e))-g(B(b,e)))+"l"+-l/2+",0l"+l/2+",0l0,"+(g(F(b,e))-g(y(b,e)))+"l0,"+(g(D(b,e))-g(F(b,e)))+"l"+l/2+",0l"+-l/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=Math.floor(1E4*Math.random()),e=d3.scale.linear(),g=d3.scale.linear(),t=function(a){return a.x},
r=function(a){return a.y},y=function(a){return a.open},D=function(a){return a.close},B=function(a){return a.high},F=function(a){return a.low},E=[],I=[],M=!1,z=!0,N=u.utils.defaultColor(),T,J,W,Q,P=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=P;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return r;r=b;return a};a.open=function(b){if(!arguments.length)return y;
y=b;return a};a.close=function(b){if(!arguments.length)return D;D=b;return a};a.high=function(b){if(!arguments.length)return B;B=b;return a};a.low=function(b){if(!arguments.length)return F;F=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;
l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return T;T=b;return a};a.yDomain=function(b){if(!arguments.length)return J;J=b;return a};a.xRange=function(b){if(!arguments.length)return W;W=b;return a};a.yRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.forceX=function(b){if(!arguments.length)return E;
E=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.padData=function(b){if(!arguments.length)return M;M=b;return a};a.clipEdge=function(b){if(!arguments.length)return z;z=b;return a};a.color=function(b){if(!arguments.length)return N;N=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};return a};u.models.pie=function(){function a(g){g.each(function(a){var g=l-b.left-b.right,u=v-b.top-b.bottom,y=Math.min(g,u)/2,C=y-y/5,Q=d3.select(this);
a=Q.selectAll(".nv-wrap.nv-pie").data(a);var R=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+t).append("g"),G=a.select("g");R.append("g").attr("class","nv-pie");R.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+b.left+","+b.top+")");G.select(".nv-pie").attr("transform","translate("+g/2+","+u/2+")");G.select(".nv-pieLabels").attr("transform","translate("+g/2+","+u/2+")");Q.on("click",function(a,b){W.chartClick({data:a,index:b,pos:d3.event,id:t})});var L=
d3.svg.arc().outerRadius(C);N&&L.startAngle(N);T&&L.endAngle(T);M&&L.innerRadius(y*J);u=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:e(a)});g=a.select(".nv-pie").selectAll(".nv-slice").data(u);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(u);g.exit().remove();a.exit().remove();u=g.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);W.elementMouseover({label:p(a.data),value:e(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,
d3.event.pageY],id:t})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);W.elementMouseout({label:p(a.data),value:e(a.data),point:a.data,index:b,id:t})}).on("click",function(a,b){W.elementClick({label:p(a.data),value:e(a.data),point:a.data,index:b,pos:d3.event,id:t});d3.event.stopPropagation()}).on("dblclick",function(a,b){W.elementDblClick({label:p(a.data),value:e(a.data),point:a.data,index:b,pos:d3.event,id:t});d3.event.stopPropagation()});g.attr("fill",function(a,b){return r(a,
b)}).attr("stroke",function(a,b){return r(a,b)});u.append("path").each(function(a){this._current=a});g.select("path").transition().attr("d",L).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;M||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return L(b(a))}});if(D){var P=d3.svg.arc().innerRadius(0);B&&(P=L);F&&(P=d3.svg.arc().outerRadius(L.outerRadius()));a.enter().append("g").classed("nv-label",
!0).each(function(a,b){var e=d3.select(this);e.attr("transform",function(a){if(z){a.outerRadius=C+10;a.innerRadius=C+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+P.centroid(a)+") rotate("+b+")"}a.outerRadius=y+10;a.innerRadius=y+15;return"translate("+P.centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",z?(a.startAngle+a.endAngle)/2<Math.PI?
"start":"end":"middle").style("fill","#000")});var X={},m=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(z){a.outerRadius=C+10;a.innerRadius=C+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+P.centroid(a)+") rotate("+b+")"}a.outerRadius=y+10;a.innerRadius=y+15;a=P.centroid(a);b=m(a);X[b]&&(a[1]-=14);X[m(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",
z?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var g=(a.endAngle-a.startAngle)/(2*Math.PI),l={key:p(a.data),value:e(a.data),percent:d3.format("%")(g)};return a.value&&g>I?l[E]:""})}});return a}var b={top:0,right:0,bottom:0,left:0},l=500,v=500,p=function(a){return a.x},e=function(a){return a.y},g=function(a){return a.description},t=Math.floor(1E4*Math.random()),r=u.utils.defaultColor(),y=d3.format(",.2f"),D=!0,B=!0,F=!1,E="key",I=.02,M=!1,z=!1,N=!1,T=!1,J=.5,W=d3.dispatch("chartClick",
"elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=W;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;
return a};a.values=function(b){u.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return p;p=b;return a};a.y=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};a.description=function(b){if(!arguments.length)return g;g=b;return a};a.showLabels=function(b){if(!arguments.length)return D;D=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return z;z=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return F;F=b;
return a};a.pieLabelsOutside=function(b){if(!arguments.length)return B;B=b;return a};a.labelType=function(b){if(!arguments.length)return E;E=(E=b)||"key";return a};a.donut=function(b){if(!arguments.length)return M;M=b;return a};a.donutRatio=function(b){if(!arguments.length)return J;J=b;return a};a.startAngle=function(b){if(!arguments.length)return N;N=b;return a};a.endAngle=function(b){if(!arguments.length)return T;T=b;return a};a.id=function(b){if(!arguments.length)return t;t=b;return a};a.color=
function(b){if(!arguments.length)return r;r=u.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return y;y=b;return a};a.labelThreshold=function(b){if(!arguments.length)return I;I=b;return a};return a};u.models.pieChart=function(){function a(t){t.each(function(t){var r=d3.select(this),u=(p||parseInt(r.style("width"))||960)-v.left-v.right,I=(e||parseInt(r.style("height"))||400)-v.top-v.bottom;a.update=function(){r.transition().call(a)};a.container=this;D.disabled=t.map(function(a){return!!a.disabled});
if(!B){var y;B={};for(y in D)B[y]=D[y]instanceof Array?D[y].slice(0):D[y]}if(t&&t.length)r.selectAll(".nv-noData").remove();else return y=r.selectAll(".nv-noData").data([F]),y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),y.attr("x",v.left+u/2).attr("y",v.top+I/2).text(function(a){return a}),a;y=r.selectAll("g.nv-wrap.nv-pieChart").data([t]);var G=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),M=y.select("g");G.append("g").attr("class",
"nv-pieWrap");G.append("g").attr("class","nv-legendWrap");g&&(l.width(u).key(b.x()),y.select(".nv-legendWrap").datum(t).call(l),v.top!=l.height()&&(v.top=l.height(),I=(e||parseInt(r.style("height"))||400)-v.top-v.bottom),y.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")"));y.attr("transform","translate("+v.left+","+v.top+")");b.width(u).height(I);u=M.select(".nv-pieWrap").datum([t]);d3.transition(u).call(b);l.dispatch.on("stateChange",function(b){D=b;E.stateChange(D);a.update()});
b.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a)});E.on("changeState",function(b){"undefined"!==typeof b.disabled&&(t.forEach(function(a,e){a.disabled=b.disabled[e]}),D.disabled=b.disabled);a.update()})});return a}var b=u.models.pie(),l=u.models.legend(),v={top:30,right:20,bottom:20,left:20},p=null,e=null,g=!0,t=u.utils.defaultColor(),r=!0,y=function(a,b,e,g){return"<h3>"+a+"</h3><p>"+b+"</p>"},D={},B=null,F="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange",
"changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];E.tooltipShow(a)});E.on("tooltipShow",function(e){if(r){var g=b.description()(e.point)||b.x()(e.point),l=e.pos[0]+0,p=e.pos[1]+0,t=b.valueFormat()(b.y()(e.point)),g=y(g,t,e,a);u.tooltip.show([l,p],g,0>e.value?"n":"s",null,void 0)}});E.on("tooltipHide",function(){r&&u.tooltip.cleanup()});a.legend=l;a.dispatch=E;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels",
"donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return v;v.top="undefined"!=typeof b.top?b.top:v.top;v.right="undefined"!=typeof b.right?b.right:v.right;v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom;v.left="undefined"!=typeof b.left?b.left:v.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return e;
e=b;return a};a.color=function(e){if(!arguments.length)return t;t=u.utils.getColor(e);l.color(t);b.color(t);return a};a.showLegend=function(b){if(!arguments.length)return g;g=b;return a};a.tooltips=function(b){if(!arguments.length)return r;r=b;return a};a.tooltipContent=function(b){if(!arguments.length)return y;y=b;return a};a.state=function(b){if(!arguments.length)return D;D=b;return a};a.defaultState=function(b){if(!arguments.length)return B;B=b;return a};a.noData=function(b){if(!arguments.length)return F;
F=b;return a};return a};u.models.scatter=function(){function a(G){G.each(function(a){var G=l-b.left-b.right,Z=v-b.top-b.bottom,ba=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var ma=K&&C&&Y?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:y(a,b),y:D(a,b),size:B(a,b)}})}));g.domain(K||d3.extent(ma.map(function(a){return a.x}).concat(I)));W&&a[0]?g.range(V||[(G*Q+G)/(2*a[0].values.length),G-G*(1+Q)/(2*a[0].values.length)]):g.range(V||[0,
G]);t.domain(C||d3.extent(ma.map(function(a){return a.y}).concat(M))).range(R||[Z,0]);r.domain(Y||d3.extent(ma.map(function(a){return a.size}).concat(z))).range(L||[16,256]);if(g.domain()[0]===g.domain()[1]||t.domain()[0]===t.domain()[1])ea=!0;g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-.01*t.domain()[0],t.domain()[1]+.01*t.domain()[1]]):
t.domain([-1,1]));isNaN(g.domain()[0])&&g.domain([-1,1]);isNaN(t.domain()[0])&&t.domain([-1,1]);S=S||g;wa=wa||t;var fa=ba.selectAll("g.nv-wrap.nv-scatter").data([a]),ma=fa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+e+(ea?" nv-single-point":"")),ba=ma.append("defs"),ma=ma.append("g"),ca=fa.select("g");ma.append("g").attr("class","nv-groups");ma.append("g").attr("class","nv-point-paths");fa.attr("transform","translate("+b.left+","+b.top+")");ba.append("clipPath").attr("id",
"nv-edge-clip-"+e).append("rect");fa.select("#nv-edge-clip-"+e+" rect").attr("width",G).attr("height",0<Z?Z:0);ca.attr("clip-path",P?"url(#nv-edge-clip-"+e+")":"");la=!0;G=fa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);G.exit().remove();G.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});G.transition().style("fill",
function(a,b){return p(a,b)}).style("stroke",function(a,b){return p(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);E?(Z=G.selectAll("circle.nv-point").data(function(a){return a.values},T),Z.enter().append("circle").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return u.utils.NaNtoZero(S(y(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(wa(D(a,b)))}).attr("r",function(a,b){return Math.sqrt(r(B(a,b))/Math.PI)}),
Z.exit().remove(),G.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return u.utils.NaNtoZero(g(y(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(t(D(a,b)))}).remove(),Z.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Z.transition().attr("cx",function(a,b){return u.utils.NaNtoZero(g(y(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(t(D(a,b)))}).attr("r",function(a,b){return Math.sqrt(r(B(a,b))/Math.PI)})):
(Z=G.selectAll("path.nv-point").data(function(a){return a.values}),Z.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+S(y(a,b))+","+wa(D(a,b))+")"}).attr("d",d3.svg.symbol().type(F).size(function(a,b){return r(B(a,b))})),Z.exit().remove(),G.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+g(y(a,b))+","+t(D(a,b))+")"}).remove(),Z.each(function(a,
b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Z.transition().attr("transform",function(a,b){return"translate("+g(y(a,b))+","+t(D(a,b))+")"}).attr("d",d3.svg.symbol().type(F).size(function(a,b){return r(B(a,b))})));clearTimeout(na);na=setTimeout(function(){if(!N)return!1;var p=d3.merge(a.map(function(a,b){return a.values.map(function(a,e){var l=y(a,e),m=D(a,e);return[g(l)+1E-7*Math.random(),t(m)+1E-7*Math.random(),b,e,a]}).filter(function(a,b){return J(a[4],
b)})}));if(!0===m){if(A){fa.select("defs").selectAll(".nv-point-clips").data([e]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+e);var r=fa.select("#nv-points-clip-"+e).selectAll("circle").data(p);r.enter().append("circle").attr("r",H);r.exit().remove();r.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});fa.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+e+")")}p.length&&(p.push([g.range()[0]-20,t.range()[0]-20,null,null]),
p.push([g.range()[1]+20,t.range()[1]+20,null,null]),p.push([g.range()[0]-20,t.range()[0]+20,null,null]),p.push([g.range()[1]+20,t.range()[1]-20,null,null]));var u=d3.geom.polygon([[-10,-10],[-10,v+10],[l+10,v+10],[l+10,-10]]),r=d3.geom.voronoi(p).map(function(a,b){return{data:u.clip(a),series:p[b][2],point:p[b][3]}}),r=fa.select(".nv-point-paths").selectAll("path").data(r);r.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});r.exit().remove();r.attr("d",function(a){return 0===
a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var z=function(e,l){if(la)return 0;var m=a[e.series];if("undefined"!==typeof m){var p=m.values[e.point];l({point:p,series:m,pos:[g(y(p,e.point))+b.left,t(D(p,e.point))+b.top],seriesIndex:e.series,pointIndex:e.point})}};r.on("click",function(a){z(a,X.elementClick)}).on("mouseover",function(a){z(a,X.elementMouseover)}).on("mouseout",function(a,b){z(a,X.elementMouseout)})}else fa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",
function(e,l){if(la||!a[e.series])return 0;var m=a[e.series],p=m.values[l];X.elementClick({point:p,series:m,pos:[g(y(p,l))+b.left,t(D(p,l))+b.top],seriesIndex:e.series,pointIndex:l})}).on("mouseover",function(e,l){if(la||!a[e.series])return 0;var m=a[e.series],p=m.values[l];X.elementMouseover({point:p,series:m,pos:[g(y(p,l))+b.left,t(D(p,l))+b.top],seriesIndex:e.series,pointIndex:l})}).on("mouseout",function(b,e){if(la||!a[b.series])return 0;var g=a[b.series];X.elementMouseout({point:g.values[e],
series:g,seriesIndex:b.series,pointIndex:e})});la=!1},300);S=g.copy();wa=t.copy();r.copy()});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=u.utils.defaultColor(),e=Math.floor(1E5*Math.random()),g=d3.scale.linear(),t=d3.scale.linear(),r=d3.scale.linear(),y=function(a){return a.x},D=function(a){return a.y},B=function(a){return a.size||1},F=function(a){return a.shape||"circle"},E=!0,I=[],M=[],z=[],N=!0,T=null,J=function(a){return!a.notActive},W=!1,Q=.1,P=!1,A=!0,H=function(){return 25},
K=null,C=null,V=null,R=null,Y=null,L=null,ea=!1,X=d3.dispatch("elementClick","elementMouseover","elementMouseout"),m=!0,S,wa,na,la=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+e+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,g){d3.select(".nv-chart-"+e+" .nv-series-"+a+" .nv-point-"+b).classed("hover",g)};X.on("elementMouseover.point",function(b){N&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});X.on("elementMouseout.point",function(b){N&&a.highlightPoint(b.seriesIndex,
b.pointIndex,!1)});a.dispatch=X;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return y;y=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return D;D=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return B;B=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=
typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.xScale=function(b){if(!arguments.length)return g;g=b;return a};a.yScale=function(b){if(!arguments.length)return t;t=b;return a};a.zScale=function(b){if(!arguments.length)return r;r=b;return a};a.xDomain=function(b){if(!arguments.length)return K;K=b;return a};a.yDomain=function(b){if(!arguments.length)return C;C=b;return a};a.sizeDomain=
function(b){if(!arguments.length)return Y;Y=b;return a};a.xRange=function(b){if(!arguments.length)return V;V=b;return a};a.yRange=function(b){if(!arguments.length)return R;R=b;return a};a.sizeRange=function(b){if(!arguments.length)return L;L=b;return a};a.forceX=function(b){if(!arguments.length)return I;I=b;return a};a.forceY=function(b){if(!arguments.length)return M;M=b;return a};a.forceSize=function(b){if(!arguments.length)return z;z=b;return a};a.interactive=function(b){if(!arguments.length)return N;
N=b;return a};a.pointKey=function(b){if(!arguments.length)return T;T=b;return a};a.pointActive=function(b){if(!arguments.length)return J;J=b;return a};a.padData=function(b){if(!arguments.length)return W;W=b;return a};a.padDataOuter=function(b){if(!arguments.length)return Q;Q=b;return a};a.clipEdge=function(b){if(!arguments.length)return P;P=b;return a};a.clipVoronoi=function(b){if(!arguments.length)return A;A=b;return a};a.useVoronoi=function(b){if(!arguments.length)return m;m=b;!1===m&&(A=!1);return a};
a.clipRadius=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return p;p=u.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return F;F=b;return a};a.onlyCircles=function(b){if(!arguments.length)return E;E=b;return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.singlePoint=function(b){if(!arguments.length)return ea;ea=b;return a};return a};u.models.scatterChart=function(){function a(G){G.each(function(G){function wa(){if(H)return fa.select(".nv-point-paths").style("pointer-events",
"all"),!1;fa.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);F.distortion(A).focus(a[0]);E.distortion(A).focus(a[1]);fa.select(".nv-scatterWrap").call(b);J&&fa.select(".nv-x.nv-axis").call(l);W&&fa.select(".nv-y.nv-axis").call(v);fa.select(".nv-distributionX").datum(G.filter(function(a){return!a.disabled})).call(g);fa.select(".nv-distributionY").datum(G.filter(function(a){return!a.disabled})).call(t)}var Z=d3.select(this),ca=this,ha=(y||parseInt(Z.style("width"))||960)-
r.left-r.right,ga=(D||parseInt(Z.style("height"))||400)-r.top-r.bottom;a.update=function(){Z.transition().duration(m).call(a)};a.container=this;Y.disabled=G.map(function(a){return!!a.disabled});if(!L){var ba;L={};for(ba in Y)L[ba]=Y[ba]instanceof Array?Y[ba].slice(0):Y[ba]}if(G&&G.length&&G.filter(function(a){return a.values.length}).length)Z.selectAll(".nv-noData").remove();else return ba=Z.selectAll(".nv-noData").data([X]),ba.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor",
"middle"),ba.attr("x",r.left+ha/2).attr("y",r.top+ga/2).text(function(a){return a}),a;ba=Z.selectAll("g.nv-wrap.nv-scatterChart").data([G]);var ma=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),fa=ba.select("g");ma.append("rect").attr("class","nvd3 nv-background");ma.append("g").attr("class","nv-x nv-axis");ma.append("g").attr("class","nv-y nv-axis");ma.append("g").attr("class","nv-scatterWrap");ma.append("g").attr("class","nv-distWrap");ma.append("g").attr("class",
"nv-legendWrap");ma.append("g").attr("class","nv-controlsWrap");if(T){var na=P?ha/2:ha;p.width(na);ba.select(".nv-legendWrap").datum(G).call(p);r.top!=p.height()&&(r.top=p.height(),ga=(D||parseInt(Z.style("height"))||400)-r.top-r.bottom);ba.select(".nv-legendWrap").attr("transform","translate("+(ha-na)+","+-r.top+")")}P&&(e.width(180).color(["#444"]),fa.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+-r.top+")").call(e));ba.attr("transform","translate("+r.left+","+r.top+")");Q&&
fa.select(".nv-y.nv-axis").attr("transform","translate("+ha+",0)");b.width(ha).height(ga).color(G.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!G[b].disabled}));0!==I&&b.xDomain(null);0!==M&&b.yDomain(null);ba.select(".nv-scatterWrap").datum(G.filter(function(a){return!a.disabled})).call(b);0!==I&&(na=F.domain()[1]-F.domain()[0],b.xDomain([F.domain()[0]-I*na,F.domain()[1]+I*na]));0!==M&&(na=E.domain()[1]-E.domain()[0],b.yDomain([E.domain()[0]-M*na,E.domain()[1]+M*na]));0===
M&&0===I||ba.select(".nv-scatterWrap").datum(G.filter(function(a){return!a.disabled})).call(b);J&&(l.scale(F).ticks(l.ticks()&&l.ticks().length?l.ticks():ha/100).tickSize(-ga,0),fa.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(l));W&&(v.scale(E).ticks(v.ticks()&&v.ticks().length?v.ticks():ga/36).tickSize(-ha,0),fa.select(".nv-y.nv-axis").call(v));z&&(g.getData(b.x()).scale(F).width(ha).color(G.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!G[b].disabled})),
ma.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),fa.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(G.filter(function(a){return!a.disabled})).call(g));N&&(t.getData(b.y()).scale(E).width(ga).color(G.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!G[b].disabled})),ma.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),fa.select(".nv-distributionY").attr("transform","translate("+(Q?ha:-t.size())+",0)").datum(G.filter(function(a){return!a.disabled})).call(t));
d3.fisheye&&(fa.select(".nv-background").attr("width",ha).attr("height",ga),fa.select(".nv-background").on("mousemove",wa),fa.select(".nv-background").on("click",function(){H=!H}),b.dispatch.on("elementClick.freezeFisheye",function(){H=!H}));e.dispatch.on("legendClick",function(e,g){e.disabled=!e.disabled;A=e.disabled?0:2.5;fa.select(".nv-background").style("pointer-events",e.disabled?"none":"all");fa.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(F.distortion(A).focus(0),
E.distortion(A).focus(0),fa.select(".nv-scatterWrap").call(b),fa.select(".nv-x.nv-axis").call(l),fa.select(".nv-y.nv-axis").call(v)):H=!1;a.update()});p.dispatch.on("stateChange",function(b){Y.disabled=b.disabled;ea.stateChange(Y);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",function(b,e){return a.pos[1]-ga});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+
a.pointIndex).attr("x2",a.pos[0]+g.size());a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];ea.tooltipShow(a)});ea.on("tooltipShow",function(e){if(K){var g=ca.parentNode,m=e.pos[0]+(g.offsetLeft||0),p=e.pos[1]+(g.offsetTop||0),t=e.pos[0]+(g.offsetLeft||0),z=E.range()[0]+r.top+(g.offsetTop||0),y=F.range()[0]+r.left+(g.offsetLeft||0),D=e.pos[1]+(g.offsetTop||0),A=l.tickFormat()(b.x()(e.point,e.pointIndex)),B=v.tickFormat()(b.y()(e.point,e.pointIndex));null!=C&&u.tooltip.show([t,z],C(e.series.key,A,B,e,a),"n",
1,g,"x-nvtooltip");null!=V&&u.tooltip.show([y,D],V(e.series.key,A,B,e,a),"e",1,g,"y-nvtooltip");null!=R&&u.tooltip.show([m,p],R(e.series.key,A,B,e,a),0>e.value?"n":"s",null,g)}});ea.on("changeState",function(b){"undefined"!==typeof b.disabled&&(G.forEach(function(a,e){a.disabled=b.disabled[e]}),Y.disabled=b.disabled);a.update()});F.copy();E.copy()});return a}var b=u.models.scatter(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e=u.models.legend(),g=u.models.distribution(),t=u.models.distribution(),
r={top:30,right:20,bottom:50,left:75},y=null,D=null,B=u.utils.defaultColor(),F=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),I=0,M=0,z=!1,N=!1,T=!0,J=!0,W=!0,Q=!1,P=!!d3.fisheye,A=0,H=!1,K=!0,C=function(a,b,e){return"<strong>"+b+"</strong>"},V=function(a,b,e){return"<strong>"+e+"</strong>"},R=null,Y={},L=null,ea=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),X="No Data Available.",
m=250;b.xScale(F).yScale(E);l.orient("bottom").tickPadding(10);v.orient(Q?"right":"left").tickPadding(10);g.axis("x");t.axis("y");e.updateState(!1);var S=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){ea.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",t.size())});ea.on("tooltipHide",function(){K&&u.tooltip.cleanup()});
a.dispatch=ea;a.scatter=b;a.legend=p;a.controls=e;a.xAxis=l;a.yAxis=v;a.distX=g;a.distY=t;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;
r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return y;y=b;return a};a.height=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);p.color(B);g.color(B);t.color(B);return a};a.showDistX=function(b){if(!arguments.length)return z;z=b;return a};a.showDistY=function(b){if(!arguments.length)return N;N=b;return a};a.showControls=
function(b){if(!arguments.length)return P;P=b;return a};a.showLegend=function(b){if(!arguments.length)return T;T=b;return a};a.showXAxis=function(b){if(!arguments.length)return J;J=b;return a};a.showYAxis=function(b){if(!arguments.length)return W;W=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return Q;Q=b;v.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return A;A=b;return a};a.xPadding=function(b){if(!arguments.length)return I;I=b;return a};a.yPadding=
function(b){if(!arguments.length)return M;M=b;return a};a.tooltips=function(b){if(!arguments.length)return K;K=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return C;C=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return V;V=b;return a};a.state=function(b){if(!arguments.length)return Y;Y=b;return a};a.defaultState=function(b){if(!arguments.length)return L;L=b;return a};a.noData=function(b){if(!arguments.length)return X;
X=b;return a};a.transitionDuration=function(b){if(!arguments.length)return m;m=b;return a};return a};u.models.scatterPlusLineChart=function(){function a(m){m.each(function(m){function G(){if(P)return ba.select(".nv-point-paths").style("pointer-events","all"),!1;ba.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);F.distortion(Q).focus(a[0]);E.distortion(Q).focus(a[1]);ba.select(".nv-scatterWrap").datum(m.filter(function(a){return!a.disabled})).call(b);N&&ba.select(".nv-x.nv-axis").call(l);
T&&ba.select(".nv-y.nv-axis").call(v);ba.select(".nv-distributionX").datum(m.filter(function(a){return!a.disabled})).call(g);ba.select(".nv-distributionY").datum(m.filter(function(a){return!a.disabled})).call(t)}var S=d3.select(this),la=this,Z=(y||parseInt(S.style("width"))||960)-r.left-r.right,ca=(D||parseInt(S.style("height"))||400)-r.top-r.bottom;a.update=function(){S.transition().duration(ea).call(a)};a.container=this;V.disabled=m.map(function(a){return!!a.disabled});if(!R){var ha;R={};for(ha in V)R[ha]=
V[ha]instanceof Array?V[ha].slice(0):V[ha]}if(m&&m.length&&m.filter(function(a){return a.values.length}).length)S.selectAll(".nv-noData").remove();else return ha=S.selectAll(".nv-noData").data([L]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",r.left+Z/2).attr("y",r.top+ca/2).text(function(a){return a}),a;F=b.xScale();E=b.yScale();var ga=S.selectAll("g.nv-wrap.nv-scatterChart").data([m]);ha=ga.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var ba=ga.select("g");ha.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-scatterWrap");ha.append("g").attr("class","nv-regressionLinesWrap");ha.append("g").attr("class","nv-distWrap");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");ga.attr("transform",
"translate("+r.left+","+r.top+")");J&&ba.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)");z&&(p.width(Z/2),ga.select(".nv-legendWrap").datum(m).call(p),r.top!=p.height()&&(r.top=p.height(),ca=(D||parseInt(S.style("height"))||400)-r.top-r.bottom),ga.select(".nv-legendWrap").attr("transform","translate("+Z/2+","+-r.top+")"));W&&(e.width(180).color(["#444"]),ba.select(".nv-controlsWrap").datum(X).attr("transform","translate(0,"+-r.top+")").call(e));b.width(Z).height(ca).color(m.map(function(a,
b){return a.color||B(a,b)}).filter(function(a,b){return!m[b].disabled}));ga.select(".nv-scatterWrap").datum(m.filter(function(a){return!a.disabled})).call(b);ga.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");ga=ga.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});ga.enter().append("g").attr("class","nv-regLines");ga=ga.selectAll(".nv-regLine").data(function(a){return[a]});ga.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",
0);ga.transition().attr("x1",F.range()[0]).attr("x2",F.range()[1]).attr("y1",function(a,b){return E(F.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return E(F.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,e){return B(a,e)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});N&&(l.scale(F).ticks(l.ticks()?l.ticks():Z/100).tickSize(-ca,0),ba.select(".nv-x.nv-axis").attr("transform","translate(0,"+
E.range()[0]+")").call(l));T&&(v.scale(E).ticks(v.ticks()?v.ticks():ca/36).tickSize(-Z,0),ba.select(".nv-y.nv-axis").call(v));I&&(g.getData(b.x()).scale(F).width(Z).color(m.map(function(a,b){return a.color||B(a,b)}).filter(function(a,b){return!m[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ba.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(m.filter(function(a){return!a.disabled})).call(g));M&&(t.getData(b.y()).scale(E).width(ca).color(m.map(function(a,
b){return a.color||B(a,b)}).filter(function(a,b){return!m[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),ba.select(".nv-distributionY").attr("transform","translate("+(J?Z:-t.size())+",0)").datum(m.filter(function(a){return!a.disabled})).call(t));d3.fisheye&&(ba.select(".nv-background").attr("width",Z).attr("height",ca),ba.select(".nv-background").on("mousemove",G),ba.select(".nv-background").on("click",function(){P=!P}),b.dispatch.on("elementClick.freezeFisheye",
function(){P=!P}));e.dispatch.on("legendClick",function(e,g){e.disabled=!e.disabled;Q=e.disabled?0:2.5;ba.select(".nv-background").style("pointer-events",e.disabled?"none":"all");ba.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(F.distortion(Q).focus(0),E.distortion(Q).focus(0),ba.select(".nv-scatterWrap").call(b),ba.select(".nv-x.nv-axis").call(l),ba.select(".nv-y.nv-axis").call(v)):P=!1;a.update()});p.dispatch.on("stateChange",function(b){V=b;Y.stateChange(V);
a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-ca);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+g.size());a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];Y.tooltipShow(a)});Y.on("tooltipShow",function(e){if(A){var g=la.parentNode,m=e.pos[0]+(g.offsetLeft||0),p=e.pos[1]+(g.offsetTop||0),t=e.pos[0]+(g.offsetLeft||0),z=E.range()[0]+
r.top+(g.offsetTop||0),y=F.range()[0]+r.left+(g.offsetLeft||0),D=e.pos[1]+(g.offsetTop||0),B=l.tickFormat()(b.x()(e.point,e.pointIndex)),R=v.tickFormat()(b.y()(e.point,e.pointIndex));null!=H&&u.tooltip.show([t,z],H(e.series.key,B,R,e,a),"n",1,g,"x-nvtooltip");null!=K&&u.tooltip.show([y,D],K(e.series.key,B,R,e,a),"e",1,g,"y-nvtooltip");null!=C&&u.tooltip.show([m,p],C(e.series.key,B,R,e.point.tooltip,e,a),0>e.value?"n":"s",null,g)}});Y.on("changeState",function(b){"undefined"!==typeof b.disabled&&(m.forEach(function(a,
e){a.disabled=b.disabled[e]}),V.disabled=b.disabled);a.update()});F.copy();E.copy()});return a}var b=u.models.scatter(),l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e=u.models.legend(),g=u.models.distribution(),t=u.models.distribution(),r={top:30,right:20,bottom:50,left:75},y=null,D=null,B=u.utils.defaultColor(),F=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),I=!1,M=!1,z=!0,N=!0,T=!0,J=!1,W=
!!d3.fisheye,Q=0,P=!1,A=!0,H=function(a,b,e){return"<strong>"+b+"</strong>"},K=function(a,b,e){return"<strong>"+e+"</strong>"},C=function(a,b,e,g){return"<h3>"+a+"</h3><p>"+g+"</p>"},V={},R=null,Y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),L="No Data Available.",ea=250;b.xScale(F).yScale(E);l.orient("bottom").tickPadding(10);v.orient(J?"right":"left").tickPadding(10);g.axis("x");t.axis("y");e.updateState(!1);var X=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",
function(a){Y.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",t.size())});Y.on("tooltipHide",function(){A&&u.tooltip.cleanup()});a.dispatch=Y;a.scatter=b;a.legend=p;a.controls=e;a.xAxis=l;a.yAxis=v;a.distX=g;a.distY=t;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return y;y=b;return a};a.height=function(b){if(!arguments.length)return D;
D=b;return a};a.color=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);p.color(B);g.color(B);t.color(B);return a};a.showDistX=function(b){if(!arguments.length)return I;I=b;return a};a.showDistY=function(b){if(!arguments.length)return M;M=b;return a};a.showControls=function(b){if(!arguments.length)return W;W=b;return a};a.showLegend=function(b){if(!arguments.length)return z;z=b;return a};a.showXAxis=function(b){if(!arguments.length)return N;N=b;return a};a.showYAxis=function(b){if(!arguments.length)return T;
T=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return J;J=b;v.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltips=function(b){if(!arguments.length)return A;A=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return H;H=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return K;K=b;return a};a.state=function(b){if(!arguments.length)return V;
V=b;return a};a.defaultState=function(b){if(!arguments.length)return R;R=b;return a};a.noData=function(b){if(!arguments.length)return L;L=b;return a};a.transitionDuration=function(b){if(!arguments.length)return ea;ea=b;return a};return a};u.models.sparkline=function(){function a(p){p.each(function(a){var p=l-b.left-b.right,u=v-b.top-b.bottom,G=d3.select(this);e.domain(D||d3.extent(a,t)).range(F||[0,p]);g.domain(B||d3.extent(a,r)).range(E||[u,0]);a=G.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");p=a.selectAll("path").data(function(a){return[a]});p.enter().append("path");p.exit().remove();p.style("stroke",function(a,b){return a.color||y(a,b)}).attr("d",d3.svg.line().x(function(a,b){return e(t(a,b))}).y(function(a,b){return g(r(a,b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var e=a[b];e.pointIndex=b;return e}return null}var e=a.map(function(a,b){return r(a,
b)}),l=b(e.lastIndexOf(g.domain()[1])),p=b(e.indexOf(g.domain()[0])),e=b(e.length-1);return[p,l,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return e(t(a,a.pointIndex))}).attr("cy",function(a,b){return g(r(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return t(a,a.pointIndex)==e.domain()[1]?"nv-point nv-currentValue":r(a,a.pointIndex)==g.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,
right:0,bottom:2,left:0},l=400,v=32,p=!0,e=d3.scale.linear(),g=d3.scale.linear(),t=function(a){return a.x},r=function(a){return a.y},y=u.utils.getColor(["#000"]),D,B,F,E;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return l;
l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.x=function(b){if(!arguments.length)return t;t=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return r;r=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return D;D=b;return a};a.yDomain=function(b){if(!arguments.length)return B;B=b;return a};a.xRange=function(b){if(!arguments.length)return F;
F=b;return a};a.yRange=function(b){if(!arguments.length)return E;E=b;return a};a.animate=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return y;y=u.utils.getColor(b);return a};return a};u.models.sparklinePlus=function(){function a(u){u.each(function(z){function B(){if(!r){var a=A.selectAll(".nv-hoverValue").data(t),g=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+e(b.x()(z[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);t.length&&(g.append("line").attr("x1",0).attr("y1",-l.top).attr("x2",0).attr("y2",M),g.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-l.top).attr("text-anchor","end").attr("dy",".9em"),A.select(".nv-hoverValue .nv-xValue").text(y(b.x()(z[t[0]],t[0]))),g.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-l.top).attr("text-anchor","start").attr("dy",".9em"),A.select(".nv-hoverValue .nv-yValue").text(D(b.y()(z[t[0]],t[0]))))}}var G=d3.select(this),J=(v||parseInt(G.style("width"))||960)-l.left-l.right,M=(p||parseInt(G.style("height"))||400)-l.top-l.bottom;a.update=function(){a(u)};a.container=this;if(z&&z.length)G.selectAll(".nv-noData").remove();else{var Q=G.selectAll(".nv-noData").data([I]);Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor",
"middle");Q.attr("x",l.left+J/2).attr("y",l.top+M/2).text(function(a){return a});return a}Q=b.y()(z[z.length-1],z.length-1);e=b.xScale();g=b.yScale();var P=G.selectAll("g.nv-wrap.nv-sparklineplus").data([z]),G=P.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),A=P.select("g");G.append("g").attr("class","nv-sparklineWrap");G.append("g").attr("class","nv-valueWrap");G.append("g").attr("class","nv-hoverArea");P.attr("transform","translate("+l.left+","+l.top+")");P=A.select(".nv-sparklineWrap");
b.width(J).height(M);P.call(b);P=A.select(".nv-valueWrap").selectAll(".nv-currentValue").data([Q]);P.enter().append("text").attr("class","nv-currentValue").attr("dx",E?-8:8).attr("dy",".9em").style("text-anchor",E?"end":"start");P.attr("x",J+(E?l.right:0)).attr("y",F?function(a){return g(a)}:0).style("fill",b.color()(z[z.length-1],z.length-1)).text(D(Q));G.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!r){for(var a=d3.mouse(this)[0]-l.left,a=Math.round(e.invert(a)),g=Math.abs(b.x()(z[0],
0)-a),p=0,v=0;v<z.length;v++)Math.abs(b.x()(z[v],v)-a)<g&&(g=Math.abs(b.x()(z[v],v)-a),p=v);t=[p];B()}}).on("click",function(){r=!r}).on("mouseout",function(){t=[];B()});A.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-l.left+","+-l.top+")"}).attr("width",J+l.left+l.right).attr("height",M+l.top)});return a}var b=u.models.sparkline(),l={top:15,right:100,bottom:10,left:50},v=null,p=null,e,g,t=[],r=!1,y=d3.format(",r"),D=d3.format(",.2f"),B=!0,F=!0,E=!1,I="No Data Available.";
a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:l.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.xTickFormat=
function(b){if(!arguments.length)return y;y=b;return a};a.yTickFormat=function(b){if(!arguments.length)return D;D=b;return a};a.showValue=function(b){if(!arguments.length)return B;B=b;return a};a.alignValue=function(b){if(!arguments.length)return F;F=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return I;I=b;return a};return a};u.models.stackedArea=function(){function a(r){r.each(function(r){var u=l-b.left-b.right,G=
v-b.top-b.bottom,N=d3.select(this);E=M.xScale();I=M.yScale();var P=r;r.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=b;return a})});r=r.filter(function(a){return!a.disabled});r=d3.layout.stack().order(D).offset(y).values(function(a){return a.values}).x(g).y(t).out(function(a,b,e){e=0===t(a)?0:e;a.display={y:e,y0:b}})(r);var N=N.selectAll("g.nv-wrap.nv-stackedarea").data([r]),A=N.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),H=A.append("defs"),
A=A.append("g"),K=N.select("g");A.append("g").attr("class","nv-areaWrap");A.append("g").attr("class","nv-scatterWrap");N.attr("transform","translate("+b.left+","+b.top+")");M.width(u).height(G).x(g).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(r.map(function(a,b){return a.color||p(a,a.seriesIndex)}));K.select(".nv-scatterWrap").datum(r).call(M);H.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");N.select("#nv-edge-clip-"+e+" rect").attr("width",u).attr("height",G);
K.attr("clip-path",F?"url(#nv-edge-clip-"+e+")":"");var C=d3.svg.area().x(function(a,b){return E(g(a,b))}).y0(function(a){return I(a.display.y0)}).y1(function(a){return I(a.display.y+a.display.y0)}).interpolate(B),T=d3.svg.area().x(function(a,b){return E(g(a,b))}).y0(function(a){return I(a.display.y0)}).y1(function(a){return I(a.display.y0)}),u=K.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});u.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+
b}).attr("d",function(a,b){return T(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);z.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);z.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);z.areaClick({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})});u.exit().remove();u.style("fill",function(a,b){return a.color||p(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||p(a,a.seriesIndex)});u.transition().attr("d",function(a,b){return C(a.values,b)});M.dispatch.on("elementMouseover.area",function(a){K.select(".nv-chart-"+e+" .nv-area-"+a.seriesIndex).classed("hover",!0)});M.dispatch.on("elementMouseout.area",function(a){K.select(".nv-chart-"+e+" .nv-area-"+a.seriesIndex).classed("hover",!1)});
a.d3_stackedOffset_stackPercent=function(a){var b=a.length,e=a[0].length,g=1/b,l,m,p,r=[];for(m=0;m<e;++m){for(p=l=0;l<P.length;l++)p+=t(P[l].values[m]);if(p)for(l=0;l<b;l++)a[l][m][1]/=p;else for(l=0;l<b;l++)a[l][m][1]=g}for(m=0;m<e;++m)r[m]=0;return r}});return a}var b={top:0,right:0,bottom:0,left:0},l=960,v=500,p=u.utils.defaultColor(),e=Math.floor(1E5*Math.random()),g=function(a){return a.x},t=function(a){return a.y},r="stack",y="zero",D="default",B="linear",F=!1,E,I,M=u.models.scatter(),z=d3.dispatch("tooltipShow",
"tooltipHide","areaClick","areaMouseover","areaMouseout");M.size(2.2).sizeDomain([2.2,2.2]);M.dispatch.on("elementClick.area",function(a){z.areaClick(a)});M.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];z.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){z.tooltipHide(a)});a.dispatch=z;a.scatter=M;d3.rebind(a,M,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize",
"clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return g;g=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return t;t=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:
b.left;return a};a.width=function(b){if(!arguments.length)return l;l=b;return a};a.height=function(b){if(!arguments.length)return v;v=b;return a};a.clipEdge=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return p;p=u.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return y;y=b;return a};a.order=function(b){if(!arguments.length)return D;D=b;return a};a.style=function(b){if(!arguments.length)return r;r=b;switch(r){case "stack":a.offset("zero");
a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return B;B=b;return a};return a};u.models.stackedAreaChart=function(){function a(G){G.each(function(G){var L=d3.select(this),m=this,S=(r||parseInt(L.style("width"))||
960)-t.left-t.right,ea=(y||parseInt(L.style("height"))||400)-t.top-t.bottom;a.update=function(){L.transition().duration(Y).call(a)};a.container=this;P.disabled=G.map(function(a){return!!a.disabled});if(!A){var na;A={};for(na in P)A[na]=P[na]instanceof Array?P[na].slice(0):P[na]}if(G&&G.length&&G.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return na=L.selectAll(".nv-noData").data([H]),na.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),na.attr("x",t.left+S/2).attr("y",t.top+ea/2).text(function(a){return a}),a;J=b.xScale();W=b.yScale();na=L.selectAll("g.nv-wrap.nv-stackedAreaChart").data([G]);var la=na.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Z=na.select("g");la.append("rect").style("opacity",0);la.append("g").attr("class","nv-x nv-axis");la.append("g").attr("class","nv-y nv-axis");la.append("g").attr("class","nv-stackedWrap");la.append("g").attr("class",
"nv-legendWrap");la.append("g").attr("class","nv-controlsWrap");la.append("g").attr("class","nv-interactive");Z.select("rect").attr("width",S).attr("height",ea);F&&(la=B?S-C:S,p.width(la),Z.select(".nv-legendWrap").datum(G).call(p),t.top!=p.height()&&(t.top=p.height(),ea=(y||parseInt(L.style("height"))||400)-t.top-t.bottom),Z.select(".nv-legendWrap").attr("transform","translate("+(S-la)+","+-t.top+")"));if(B){var ca=[{key:R.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},
{key:R.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:R.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:R.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];C=V.length/3*260;ca=ca.filter(function(a){return-1!==V.indexOf(a.metaKey)});e.width(C).color(["#444","#444","#444"]);Z.select(".nv-controlsWrap").datum(ca).call(e);t.top!=Math.max(e.height(),p.height())&&(t.top=
Math.max(e.height(),p.height()),ea=(y||parseInt(L.style("height"))||400)-t.top-t.bottom);Z.select(".nv-controlsWrap").attr("transform","translate(0,"+-t.top+")")}na.attr("transform","translate("+t.left+","+t.top+")");M&&Z.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)");z&&(g.width(S).height(ea).margin({left:t.left,top:t.top}).svgContainer(L).xScale(J),na.select(".nv-interactive").call(g));b.width(S).height(ea);Z.select(".nv-stackedWrap").datum(G).transition().call(b);E&&(l.scale(J).ticks(S/
100).tickSize(-ea,0),Z.select(".nv-x.nv-axis").attr("transform","translate(0,"+ea+")"),Z.select(".nv-x.nv-axis").transition().duration(0).call(l));I&&(v.scale(W).ticks("wiggle"==b.offset()?0:ea/36).tickSize(-S,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):Q),Z.select(".nv-y.nv-axis").transition().duration(0).call(v));b.dispatch.on("areaClick.toggle",function(b){1===G.filter(function(a){return!a.disabled}).length?G.forEach(function(a){a.disabled=!1}):G.forEach(function(a,
e){a.disabled=e!=b.seriesIndex});P.disabled=G.map(function(a){return!!a.disabled});K.stateChange(P);a.update()});p.dispatch.on("stateChange",function(b){P.disabled=b.disabled;K.stateChange(P);a.update()});e.dispatch.on("legendClick",function(e,g){e.disabled&&(ca=ca.map(function(a){a.disabled=!0;return a}),e.disabled=!1,b.style(e.style),P.style=b.style(),K.stateChange(P),a.update())});g.dispatch.on("elementMousemove",function(e){b.clearHighlights();var p,r,y,z=[];G.filter(function(a,b){a.seriesIndex=
b;return!a.disabled}).forEach(function(g,l){r=u.interactiveBisect(g.values,e.pointXValue,a.x());b.highlightPoint(l,r,!0);var m=g.values[r];if("undefined"!==typeof m){"undefined"===typeof p&&(p=m);"undefined"===typeof y&&(y=a.xScale()(a.x()(m,r)));var t="expand"==b.style()?m.display.y:a.y()(m,r);z.push({key:g.key,value:t,color:D(g,g.seriesIndex),stackedValue:m.display})}});z.reverse();if(2<z.length){var B=a.yScale().invert(e.mouseY),A=null;z.forEach(function(a,b){B=Math.abs(B);var e=Math.abs(a.stackedValue.y0),
g=Math.abs(a.stackedValue.y);B>=e&&B<=g+e&&(A=b)});null!=A&&(z[A].highlight=!0)}var C=l.tickFormat()(a.x()(p,r)),E="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return v.tickFormat()(a)};g.tooltip.position({left:y+t.left,top:e.mouseY+t.top}).chartContainer(m.parentNode).enabled(N).valueFormatter(E).data({value:C,series:z})();g.renderGuideLine(y)});g.dispatch.on("elementMouseout",function(a){K.tooltipHide();b.clearHighlights()});K.on("tooltipShow",function(e){if(N){var g=
m.parentNode,p=e.pos[0]+(g.offsetLeft||0),r=e.pos[1]+(g.offsetTop||0),t=l.tickFormat()(b.x()(e.point,e.pointIndex)),y=v.tickFormat()(b.y()(e.point,e.pointIndex)),t=T(e.series.key,t,y,e,a);u.tooltip.show([p,r],t,0>e.value?"n":"s",null,g)}});K.on("changeState",function(e){"undefined"!==typeof e.disabled&&G.length===e.disabled.length&&(G.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.style&&b.style(e.style);a.update()})});return a}var b=u.models.stackedArea(),
l=u.models.axis(),v=u.models.axis(),p=u.models.legend(),e=u.models.legend(),g=u.interactiveGuideline(),t={top:30,right:25,bottom:50,left:60},r=null,y=null,D=u.utils.defaultColor(),B=!0,F=!0,E=!0,I=!0,M=!1,z=!1,N=!0,T=function(a,b,e,g,l){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},J,W,Q=d3.format(",.2f"),P={style:b.style()},A=null,H="No Data Available.",K=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),C=250,V=["Stacked","Stream","Expanded"],R={},Y=250;l.orient("bottom").tickPadding(7);
v.orient(M?"right":"left");e.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];K.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){K.tooltipHide(a)});K.on("tooltipHide",function(){N&&u.tooltip.cleanup()});a.dispatch=K;a.stacked=b;a.legend=p;a.controls=e;a.xAxis=l;a.yAxis=v;a.interactiveLayer=g;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge",
"forceX","forceY","forceSize","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return y;y=b;return a};a.color=function(e){if(!arguments.length)return D;
D=u.utils.getColor(e);p.color(D);b.color(D);return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.showLegend=function(b){if(!arguments.length)return F;F=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;v.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return z;z=
b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return N;N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Y;
Y=b;return a};a.controlsData=function(b){if(!arguments.length)return V;V=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return R;R=b;return a};v.setTickFormat=v.tickFormat;v.tickFormat=function(a){if(!arguments.length)return Q;Q=a;return v};return a}})();
(function(y,u){var a=0;y.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=a;a+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=y(this.element),l=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var v=a.find(".pt-chart");this.chart=v.length?v.first():null;l.renderFilter||l.renderOptions?(v="#"+a.attr("id"),l.renderOptions?(y(v+"-options").show(),l.collapseOptions&&(y(v+"-options legend").siblings().toggle(),y(v+"-options legend").children().toggle())):y(v+
"-options").hide(),l.renderFilter?(y(v+"-filters").show(),l.collapseFilter&&(y(v+"-filters legend").siblings().toggle(),y(v+"-filters legend").children().toggle())):y(v+"-options").hide()):a.find(".pt-form-container").hide();l.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());l.numberFormatter=function(a){var b=l.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");
a=b[0];b=1<b.length?"."+b[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+l.thousandGrouping+"})+(?!\\d))","g"),l.thousandSeparator);return a+b};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=y(this.element),l=null;this._unbindEvents();var v=a.find('input[type="hidden"][name="pivotdata"]');v.length&&(l=JSON.parse(y(v).first().val()));l?"count"==l.method&&(this.options.precision=0,this.options.minTickSize=1):(l={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=l;l.nodata?(a.find(".pt-table").first().empty().append(y('<div class="pt-no-data">'+l.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();l.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
y(this.element),l=a.find(".pt-table").first().empty();this.table=null;var v=this.data;if(!v.empty)if(this.options.renderTable){var p=v.cells,e=v.cols,g=v.rows,t=v.total,r=v.labels,u=this.options,D=u.showTotals,B=!1;1==e.length&&null===e[0][4]&&(B=!0);p=v.cells.slice(0);if(B&&D)for(e=[],v=0;v<g.length;v++)p[v]=[];else{for(v=0;v<g.length;v++)p[v]=p[v].filter(function(a,b){return"__other__"!=e[b][0]});e=e.filter(function(a){return"__other__"!=a[0]})}v=!1;1==e.length&&null===e[0][4]&&(v=!0);v&&D?(g=[],
p=[]):(p=p.filter(function(a,b){return"__other__"!=g[b][0]}),g=g.filter(function(a){return"__other__"!=a[0]}));l=d3.select(l.get(0)).append("table").attr("class","dataTable display report");l.append("thead").call(this._renderHeader,e,r,u).call(this._renderColumns,e,r,u);l.append("tbody").call(this._renderRows,this,g,e,r,p,u);u.showTotals&&l.append("tfoot").call(this._renderFooter,g,e,r,t);this.table=y(l.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,l,v,p){a=a.append("tr");a.append("th").attr("scope","col").text(v.layer);l.length&&a.append("th").attr({scope:"col",colspan:l.length}).text(v.cols);p.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(v.total);return a},_renderColumns:function(a,l,v,p){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(v.rows);var b=!1;1==l.length&&null===l[0][4]&&(b=!0);a.selectAll("th.pt-data").data(l).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return b?"":a[4]});return a},_renderRows:function(a,l,v,p,e,g,t){v=a.selectAll("tr.pt-row").data(v).enter().append("tr").attr("class",function(a,b){return b%2?"odd":"even"});var b=!1;1==v.length&&null===v[0][4]&&(b=!0);v.append("td").text(function(a){return b?"":a[4]});v.selectAll("td.pt-cell").data(function(a,
b){return g[b]}).enter().append("td").attr("class","pt-cell").each(l._renderCell,e);t.showTotals&&v.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return v},_renderCell:function(a,l,v){l=d3.select(this);for(var b=a.items,e,g=0,t=b.length;g<t;g++){e=b[g];var r=l.append("div").attr("class","pt-cell-value");null===e?r.text(v.none):y.isArray(e)?r.append("ul").selectAll("li").data(e).enter().append("li").html(function(a){return a}):r.text(e);e=a.keys[g];b&&e&&e.length&&(y(r.node()).data("keys",
e).data("fact",g),r.append("div").attr("class","pt-cell-zoom"));1<t-g&&r.append("span").text(" / ")}},_renderFooter:function(a,l,v,p,e){l=l.length%2?"odd":"even";a=a.append("tr").attr("class",l+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(p.total);a.selectAll("td.pt-col-total").data(v).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(e);return a},_renderChartOptions:function(){var a=
y(this.element),l=a.find(".pt-chart-controls").first().empty(),v=this.data;if(!v.empty&&this.options.renderChart){var v=v.labels,p=a.attr("id"),a=v.layer,e=v.rows,g=v.cols,t=v.per,r=y('<div class="pt-chart-opts">'),u=p+"-pchart-rows",D=p+"-vchart-rows",B=p+"-hchart-rows",F=p+"-schart-rows",E=p+"-pchart-cols",I=p+"-vchart-cols",M=p+"-hchart-cols",p=p+"-schart-cols";a&&y(r).append(y('<span class="pt-chart-label">'+a+": </span>"));e&&y(r).append(y('<div id="'+u+'" class="pt-chart-icon pt-pchart"/><div id="'+
D+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+e+"</span>"));g&&y(r).append(y('<div id="'+E+'" class="pt-chart-icon pt-pchart"/><div id="'+I+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+g+"</span>"));e&&g&&y(r).append(y('<span class="pt-chart-label">| '+v.breakdown+': </span><div id="'+F+'" class="pt-chart-icon pt-schart"/><div id="'+B+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+t+" "+e+'</span><div id="'+p+'"  class="pt-chart-icon pt-schart"/><div id="'+
M+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+t+" "+g+"</span>"));y(l).append(r)}},_truncateLabel:function(a,l){return a&&a.length>l?a.substring(0,l-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var b=y(this.element),v=this.data;b.find(".pt-chart-contents").hide();if(b=this.chart)if(y(b).unbind("plothover").unbind("plotclick").empty(),!v.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{b=this.options.collapseChart;if("undefined"==typeof a||
!a){if(b)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(b)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;b=a.type;a=a.axis;var p=v.labels,e=p.per,g=p.layer+" "+e+" "+p.rows,p=p.layer+" "+e+" "+p.cols,e=v.filter,t=e[0],r=e[1];"piechart"==b?"rows"==a?this._renderPieChart(v.rows,g,t):this._renderPieChart(v.cols,p,r):"barchart"==b?"rows"==a?this._renderBarChart(v.rows,v.facts,g,t):this._renderBarChart(v.cols,
v.facts,p,r):"breakdown"==b?"rows"==a?this._renderBreakDown(v,0,g,e):this._renderBreakDown(v,1,p,e):"spectrum"==b&&this._renderSpectrum(v,a,e)}}},_renderPieChart:function(a,l,v){var b=this.chart;if(b){y(b).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});l?y(b).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):y(b).siblings(".pt-chart-title").empty();var e=[],g=0;for(l=0;l<a.length;l++){var t=a[l];!t[1]&&0<=t[2][0]&&(e.push({index:t[0],label:t[4],value:t[2][0],key:t[3]}),
g+=t[2][0])}var r=this;r.chartOptions.currentDataIndex=null;var u=function(a){if(r.chartOptions.currentDataIndex!=a.pointIndex){r._removeChartTooltip();r.chartOptions.currentDataIndex=a.pointIndex;var b=a.value;r._renderChartTooltip(a.pos[0],a.pos[1],'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+b+" ("+Math.round(b/g*100)+"%)</div>"));y(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).pieLabelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0).tooltips(!1);
a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",u).on("elementMouseout",function(a){y(".pt-tooltip").remove();r.chartOptions.currentDataIndex=null;r.chartOptions.currentSeriesIndex=null});if(r.options.exploreChart&&v)a.pie.dispatch.on("elementClick",function(a){a=a.point;r._chartExplore([["__other__"==a.index?v+"__belongs":v,a.key]])});d3.select(y(b).get(0)).append("svg").attr("class","nv").datum(e).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},
_renderBarChart:function(a,l,v,p){var b=this.chart;if(b){y(b).closest(".pt-chart-contents").show().css({width:"96%"});for(var g=[],t=this._truncateLabel,r,u,D,B=0;B<l.length;B++){r={key:l[B][2]};u=[];for(var F=0;F<a.length;F++)D=a[F],u.push({label:D[4],value:D[2][B],filterIndex:D[0],filterKey:D[3]});r.values=u;g.push(r)}y(b).css({height:"360px"});v?y(b).siblings(".pt-chart-title").html("<h4>"+v+"</h4>"):y(b).siblings(".pt-chart-title").empty();var E=function(a,b,e,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},g.pointIndex)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},I=this,M=this.options.numberFormatter;nv.addGraph(function(){var a,e;1<g.length?(a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(E).showControls(!1),e=a.multibar):(a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(E).showValues(!0),
a.valueFormat(M),e=a.discretebar);a.yAxis.tickFormat(M);a.xAxis.tickFormat(function(a){return t(a,18)});d3.select(y(b).get(0)).append("svg").attr("class","nv").datum(g).transition().duration(500).call(a);if(I.options.exploreChart&&p)e.dispatch.on("elementClick",function(a){var b=a.point.filterKey;null===b&&(b="None");var e=p;"__other__"==a.point.filterIndex&&(e+="__belongs");I._chartExplore([[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,l,v,p){var b=this.chart;
if(b){y(b).closest(".pt-chart-contents").show().css({width:"96%"});var g=a.cells,t,r,u=[],D=[],B,F;0===l?(t=a.rows,r=a.cols,a=function(a,b){return g[u[a]][D[b]].values[0]},B=p[0],F=p[1]):(t=a.cols,r=a.rows,a=function(a,b){return g[D[b]][u[a]].values[0]},B=p[1],F=p[0]);var E,I;p=[];l=[];E=0;for(I=t.length;E<I;E++)t[E][1]||(p.push(t[E]),u.push(E));E=0;for(I=r.length;E<I;E++)r[E][1]||(l.push(r[E]),D.push(E));var M=[];for(t=0;t<l.length;t++){r={key:l[t][4],filterIndex:l[t][0],filterKey:l[t][3]};E=[];
for(I=0;I<p.length;I++)E.push({label:p[I][4],filterIndex:p[I][0],filterKey:p[I][3],value:a(I,t)});r.values=E;M.push(r)}a=Math.max(p.length*Math.max(16*(l.length+1),50)+70,360);y(b).css({height:a+"px"});v?y(b).siblings(".pt-chart-title").html("<h4>"+v+"</h4>"):y(b).siblings(".pt-chart-title").empty();var z=function(a,b,e,g){b=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},g.seriesIndex)+'">'+a+'</div><div class="pt-tooltip-text">'+b.label+
': <span class="pt-tooltip-value">'+b.value+"</span></div></div>"},N=this,T=this.options.numberFormatter,J=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).tooltips(!0).tooltipContent(z).transitionDuration(350).showControls(!0);a.valueFormat(T);a.yAxis.tickFormat(T);a.xAxis.tickFormat(function(a){return J(a,24)});d3.select(y(b).get(0)).append("svg").attr("class",
"nv").datum(M).call(a);if(N.options.exploreChart&&B&&F)a.multibar.dispatch.on("elementClick",function(a){var b=a.series.filterKey,e;null===b&&(b="None");e="__other__"==a.series.filterIndex?F+"__belongs":F;var g=a.point.filterKey;null===g&&(g="None");N._chartExplore([["__other__"==a.point.filterIndex?B+"__belongs":B,g],[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(a,l,v){var b=this.chart;if(b){var e=this,g=a.cells,t=a.labels,r,G,D,B,F,E;"rows"==l?(r=a.rows,G=a.cols,
l=t.rows,D=t.cols,B=v[0],F=v[1],E=function(a,b){return g[a][b]}):(r=a.cols,G=a.rows,l=t.cols,D=t.rows,B=v[1],F=v[0],E=function(a,b){return g[b][a]});var I=function(a,b){return null===a?G[b]:null===b?r[a]:E(a,b)},M=function(a,b){b===u&&(b="silver");for(var e=[],g,l,m=0;m<G.length;m++)g=I(null,m),l=null===a?g[2][0]:I(a,m).values[0],!g[1]&&0<=g[2][0]&&e.push({filterIndex:g[0],filterKey:g[3],label:g[4],value:l,color:b});return e},z=[],N=0;for(v=0;v<r.length;v++){var T=I(v,null);!T[1]&&0<=T[2][0]&&(z.push({position:v,
filterIndex:T[0],filterKey:T[3],label:T[4],value:T[2][0]}),N+=T[2][0])}e.chartOptions.currentDataIndex=null;y(b).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();y(b).siblings(".pt-chart-title").empty();v=y('<div class="pt-spectrum-pie">').appendTo(b);var b=y('<div class="pt-spectrum-bar">').appendTo(b),J=this.options.numberFormatter,W=this._truncateLabel,Q=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!0).tooltipContent(function(a,
b,e,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+J(a.value)+"</div></div>"}).showValues(!0);Q.valueFormat(J);Q.yAxis.tickFormat(J);Q.xAxis.tickFormat(function(a){return W(a,18)});var P=d3.select(y(b).get(0)).append("svg").attr("class","nv"),b=Math.floor(v.width()/2)-30,A=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(b).margin({top:-20,
left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35).tooltips(!1);A.legend.align(!0).rightAlign(!1);A.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});A.pie.dispatch.on("elementMouseover",function(a){if(e.chartOptions.currentDataIndex!=a.pointIndex){e._removeChartTooltip();e.chartOptions.currentDataIndex=a.pointIndex;var b=a.value;e._renderChartTooltip(a.pos[0],a.pos[1],'<div class="pt-tooltip-label">'+
a.label+"</div>"+('<div class="pt-tooltip-text">'+b+" ("+Math.round(b/N*100)+"%)</div>"));y(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}}).on("elementMouseout",function(a){y(".pt-tooltip").remove();e.chartOptions.currentDataIndex=null;e.chartOptions.currentSeriesIndex=null});var H=d3.select(y(v).get(0)).append("svg").attr("class","nv").style({"min-width":b-30+"px"}),b=d3.select(y(v).get(0)).append("div").attr("class","pt-spectrum-form");b.append("h4").html(t.layer+" "+
t.per+" "+D);b.append("label").html(l+":");var K=b.append("select");K.append("option").attr("value","null").style("font-weight","bold").html(e.options.textAll);K.selectAll(".pt-series-item").data(z).enter().append("option").attr("class","pt-series-item").attr("value",function(a,b){return b}).html(function(a){return a.label});b.append("label").html(t.total+":");var C=b.append("span").text(a.total),V=function(b){var g;if(null===b||e.chartOptions.currentSpectrumIndex==b)g=function(a,b){return nv.utils.defaultColor()({},
b)},H.selectAll(".nv-slice").style("fill",g).style("stroke",g),g=M(null),P.datum([{key:null,filterIndex:null,filterKey:null,values:g}]),Q.update(),e.chartOptions.currentSpectrumIndex=null,K.property("value","null"),C.text(a.total);else{var l=z[b],p=nv.utils.defaultColor()({},b);g=function(a,e){return e==b?p:"silver"};H.selectAll(".nv-slice").style("fill",g).style("stroke",g);g=M(l.position,p);P.datum([{key:l.position,filterIndex:l.filterIndex,filterKey:l.filterKey,values:g}]);Q.update();e.chartOptions.currentSpectrumIndex=
b;K.property("value",b);C.text(z[b].value)}};A.pie.dispatch.on("elementClick",function(a){V(a.index)});K.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?V(null):V(a)});nv.addGraph(function(){H.datum(z).transition().duration(1200).call(A);nv.utils.windowResize(A.update);return A});nv.addGraph(function(){P.datum([{key:null,filterIndex:null,filterKey:null,values:M(null)}]).transition().duration(500).call(Q);if(e.options.exploreChart&&B&&F)Q.discretebar.dispatch.on("elementClick",
function(a){var b=a.series.filterIndex,g=a.series.filterKey,l=a.point.filterIndex;a=a.point.filterKey;var p=[];null!==b&&p.push(["__other__"==b?B+"__belongs":B,g||"None"]);null!==l&&p.push(["__other__"==l?F+"__belongs":F,a||"None"]);e._chartExplore(p)});nv.utils.windowResize(Q.update);return Q})}},_chartExplore:function(a){var b=this.options,v=y(this.element).closest(".ui-tabs"),p=b.filterTab;if(v.length&&!1!==p)b=(b=b.filterForm)?y("#"+b):u,S3.search.setCurrentFilters(b,a),a=p?y("#"+p).index():0,
v.tabs("option","active",a);else if(v=b.filterURL)a=this._updateURL(v,a),window.open(a,"_blank")},_renderChartTooltip:function(a,l,v){y('<div class="pt-tooltip">'+v+"</div>").css({position:"absolute",display:"none",top:l-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){y(".pt-tooltip").remove();this.chartOptions.currentDataIndex=
null;this.chartOptions.currentSeriesIndex=null},_getOptions:function(){var a="#"+y(this.element).attr("id");return{rows:y(a+"-rows").val(),cols:y(a+"-cols").val(),fact:y(a+"-fact").val(),totals:y(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+y(this.element).attr("id"),l=null,a=y(a+"-filters");if(a.length)try{l=S3.search.getCurrentFilters(a.first())}catch(v){}return l},_updateURL:function(a,l){var b,p,e=[],g={},t,r,u,y;if(l)for(t=0,r=l.length;t<r;t++)b=l[t],y=b[0],g[y]=!0,e.push(y+
"="+b[1]);b=this.options.ajaxURL.split("?");if(1<b.length){p=b[1].split("&");b={};t=0;for(r=p.length;t<r;t++)u=p[t].split("="),1<u.length&&(y=decodeURIComponent(u[0]),g[y]||(e.push(y+"="+decodeURIComponent(u[1])),b[y]=!0));for(y in b)g[y]=!0}b=a.split("?");if(1<b.length)for(p=b[1].split("&"),t=0,r=p.length;t<r;t++)u=p[t].split("="),1<u.length&&(y=decodeURIComponent(u[0]),g[y]||e.push(y+"="+decodeURIComponent(u[1])));e=e.join("&");g=b[0];e&&(g=g+"?"+e);return g},_updateAjaxURL:function(a,l){var b=
this.options.ajaxURL.split("?"),p=[],e=!1,g;1<b.length?(g=b[1],g=g.split("&")):g=[];var t,r,u;if(a)for(t in a)u=a[t],r=t+"="+u,"totals"==t?this.options.showTotals=u?!0:!1:e||-1!=y.inArray(r,g)||(e=!0),p.push(r);t={};u={};var D,B,F;if(l)for(D=0,B=l.length;D<B;D++)r=l[D],F=r[0],r=r[1],null===r?t[F]||(u[F]=!0):(u[F]&&(u[F]=!1),r=F+"="+encodeURIComponent(r),t[F]?t[F].push(r):t[F]=[r]);D=0;for(B=g.length;D<B;D++)r=g[D].split("="),1<r.length&&(F=decodeURIComponent(r[0]),r=decodeURIComponent(r[1]),u[F]?
e=!0:t[F]?e||-1!=y.inArray(F+"="+r,t[F])||(e=!0):"aggregate"!=F&&(a&&a.hasOwnProperty(F)||p.push(g[D])));for(F in t)for(D=0,B=t[F].length;D<B;D++)e||-1!=y.inArray(t[F][D],g)||(e=!0),p.push(t[F][D]);p=p.join("&");b=b[0];p&&(b=b+"?"+p);this.options.ajaxURL=b;return e},reload:function(a,l,v){v="undefined"!=typeof v?v:!0;"undefined"==typeof l&&(l=this._getFilters());var b=this,e=this.element,g,t=e.find('input[type="hidden"][name="pivotdata"]');if(t.length){e.find(".pt-throbber").show();if(a||l)g=this._updateAjaxURL(a,
l);g||v?(a=this.options.ajaxURL,l=this.options.timeout,v=y.ajaxS3,y.searchS3!==u&&(v=y.searchS3),e.find(".pt-empty").hide(),b.openRequest&&(b.openRequest.onreadystatechange=null,b.openRequest.abort()),b.openRequest=v({timeout:l,url:a,dataType:"json",type:"GET",success:function(a){b.openRequest=null;t.first().val(JSON.stringify(a));b.refresh()},error:function(a,b,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):b.refresh()}},_bindEvents:function(){var a=this,l=y(this.element),
u=this.data,p="#"+l.attr("id");y(p+"-options legend").click(function(){y(this).siblings().toggle();y(this).children().toggle()});y(p+"-filters legend").click(function(){y(this).siblings().toggle();y(this).children().toggle()});l.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;l.find(".pt-table").hide();y(this).siblings(".pt-show-table").show();y(this).hide()});l.find(".pt-show-table").click(function(){a.table_options.hidden=!1;l.find(".pt-table").show();y(this).siblings(".pt-hide-table").show();
y(this).hide()});y(p+"-totals").click(function(){var b=y(this).is(":checked");a.options.showTotals!=b&&a.reload({totals:b},null,!1)});y(p+"-rows,"+p+"-cols,"+p+"-fact").on("change.autosubmit",function(){y(p+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var e=this.options.autoSubmit;y(p+"-pt-form").on("optionChanged",function(){var b=y(this);if(!b.data("noAutoSubmit")){var l=b.data("autoSubmitTimeout");l&&clearTimeout(l);l=setTimeout(function(){var b=a._getOptions(),e=a._getFilters();
a.reload(b,e,!1)},e);b.data("autoSubmitTimeout",l)}})}else y(p+"-pt-form input.pt-submit").click(function(){var b=a._getOptions(),e=a._getFilters();a.reload(b,e,!1)});y(p+" div.pt-table div.pt-cell-zoom").click(function(a){a=y(a.currentTarget);var b=a.closest(".pt-cell-value"),e=b.find(".pt-cell-records");if(0<e.length)e.remove(),a.removeClass("opened");else{for(var g=b.data("keys"),e=b.data("fact"),b=u.lookups[u.facts[e][0]],e=y("<div/>").addClass("pt-cell-records"),l=y("<ul/>"),p=0;p<g.length;p++)l.append("<li>"+
b[g[p]]+"</li>");e.append(l);a.addClass("opened").after(e)}});y(p+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});y(p+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});y(p+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});y(p+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});y(p+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});y(p+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});y(p+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});y(p+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});l.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=y(this.element),l="#"+a.attr("id");y(l+" div.pt-table div.pt-cell-zoom").unbind("click");y(l+"-options legend").unbind("click");y(l+"-filters legend").unbind("click");y(l+"-totals").unbind("click");y(l+"-rows,"+l+"-cols,"+
l+"-fact").unbind("change.autosubmit");y(l+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");y(l+"-pchart-rows,"+l+"-vchart-rows,"+l+"-schart-rows,"+l+"-hchart-rows,"+l+"-pchart-cols,"+l+"-vchart-cols,"+l+"-schart-cols,"+l+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
