/*
 2013-2017 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,f={next:function(){if(e<c.length){var l=e++;return{value:a(l,c[l]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(c,a,e,f){if(a){e=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var l=c[f];l in e||(e[l]={});e=e[l]}c=c[c.length-1];f=e[c];a=a(f);a!=f&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var a=c[Symbol.iterator];return a?a.call(c):$jscomp.arrayIterator(c)};$jscomp.owns=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)};
$jscomp.polyfill("WeakMap",function(c){function a(a){$jscomp.owns(a,f)||$jscomp.defineProperty(a,f,{value:{}})}function e(c){var e=Object[c];e&&(Object[c]=function(c){a(c);return e(c)})}if(function(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),e=Object.seal({}),f=new c([[a,2],[e,3]]);if(2!=f.get(a)||3!=f.get(e))return!1;f["delete"](a);f.set(e,4);return!f.has(a)&&4==f.get(e)}catch(r){return!1}}())return c;var f="$jscomp_hidden_"+Math.random().toString().substring(2);e("freeze");e("preventExtensions");
e("seal");var l=0,h=function(a){this.id_=(l+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};h.prototype.set=function(c,e){a(c);if(!$jscomp.owns(c,f))throw Error("WeakMap key fail: "+c);c[f][this.id_]=e;return this};h.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};h.prototype.has=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};h.prototype["delete"]=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return h},"es6-impl","es3");$jscomp.MapEntry=function(){};$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(c){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),e=new c($jscomp.makeIterator([[a,"s"]]));if("s"!=e.get(a)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var f=e.entries(),h=f.next();if(h.done||h.value[0]!=a||"s"!=h.value[1])return!1;h=f.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!f.next().done?!1:!0}catch(A){return!1}}())return c;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var a=new WeakMap,e=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};e.prototype.set=function(a,c){var e=f(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};e.prototype["delete"]=
function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};e.prototype.has=function(a){return!!f(this,a).entry};e.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};e.prototype.entries=function(){return l(this,function(a){return[a.key,
a.value]})};e.prototype.keys=function(){return l(this,function(a){return a.key})};e.prototype.values=function(){return l(this,function(a){return a.value})};e.prototype.forEach=function(a,c){for(var e=this.entries(),f;!(f=e.next()).done;)f=f.value,a.call(c,f[1],f[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var f=function(c,e){var f=e&&typeof e;"object"==f||"function"==f?a.has(e)?f=a.get(e):(f=""+ ++m,a.set(e,f)):f="p_"+e;var h=c.data_[f];if(h&&$jscomp.owns(c.data_,f))for(var l=0;l<h.length;l++){var k=
h[l];if(e!==e&&k.key!==k.key||e===k.key)return{id:f,list:h,index:l,entry:k}}return{id:f,list:h,index:-1,entry:void 0}},l=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=a.next=a.head=a},m=0;return e},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(c){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),f=new c($jscomp.makeIterator([a]));if(!f.has(a)||1!=f.size||f.add(a)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var l=f.entries(),h=l.next();if(h.done||h.value[0]!=a||h.value[1]!=a)return!1;h=l.next();return h.done||h.value[0]==a||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:l.next().done}catch(m){return!1}}())return c;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=
function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(a,c){var e=this;this.map_.forEach(function(f){return a.call(c,f,f,e)})};return a},"es6-impl","es3");$jscomp.polyfill("Array.prototype.entries",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6-impl","es3");
$jscomp.findInternal=function(c,a,e){c instanceof String&&(c=String(c));for(var f=c.length,l=0;l<f;l++){var h=c[l];if(a.call(e,h,l,c))return{i:l,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function c(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function e(b){return null===b?NaN:+b}function f(b){return!isNaN(b)}function l(b){return{left:function(d,g,p,v){3>arguments.length&&(p=0);4>arguments.length&&(v=d.length);for(;p<v;){var a=p+v>>>1;0>b(d[a],g)?p=a+1:v=a}return p},right:function(d,g,p,v){3>arguments.length&&(p=0);4>arguments.length&&(v=d.length);for(;p<v;){var a=p+v>>>1;0<b(d[a],
g)?v=a:p=a+1}return p}}}function h(b){return b.length}function m(b,d){for(var g in d)Object.defineProperty(b.prototype,g,{value:d[g],enumerable:!1})}function q(){this._=Object.create(null)}function k(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function r(b){return"\x00"===(b+="")[0]?b.slice(1):b}function x(b){return k(b)in this._}function A(b){return(b=k(b))in this._&&delete this._[b]}function C(){var b=[],d;for(d in this._)b.push(r(d));return b}function E(){var b=0,d;for(d in this._)++b;
return b}function F(){for(var b in this._)return!1;return!0}function H(){this._=Object.create(null)}function B(b){return b}function N(b,d,g){return function(){var p=g.apply(d,arguments);return p===d?b:p}}function G(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var g=0,p=ce.length;g<p;++g){var v=ce[g]+d;if(v in b)return v}}function L(){}function z(){}function t(b){function d(){for(var d=g,p=-1,a=d.length,c;++p<a;)(c=d[p].on)&&c.apply(this,arguments);return b}var g=[],p=new q;d.on=
function(d,a){var v=p.get(d),P;if(2>arguments.length)return v&&v.on;v&&(v.on=null,g=g.slice(0,P=g.indexOf(v)).concat(g.slice(P+1)),p.remove(d));a&&g.push(p.set(d,{on:a}));return b};return d}function Q(){y.event.preventDefault()}function O(){for(var b=y.event,d;d=b.sourceEvent;)b=d;return b}function J(b){for(var d=new z,g=0,p=arguments.length;++g<p;)d[arguments[g]]=t(d);d.of=function(g,p){return function(v){try{var a=v.sourceEvent=y.event;v.target=b;y.event=v;d[v.type].apply(g,p)}finally{y.event=a}}};
return d}function D(b){Yb(b,sa);return b}function u(b){return"function"===typeof b?b:function(){return Yc(b,this)}}function K(b){return"function"===typeof b?b:function(){return Zc(b,this)}}function R(b,d){function g(){this.removeAttribute(b)}function p(){this.removeAttributeNS(b.space,b.local)}function v(){this.setAttribute(b,d)}function a(){this.setAttributeNS(b.space,b.local,d)}function c(){var g=d.apply(this,arguments);null==g?this.removeAttribute(b):this.setAttribute(b,g)}function e(){var g=d.apply(this,
arguments);null==g?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,g)}b=y.ns.qualify(b);return null==d?b.local?p:g:"function"===typeof d?b.local?e:c:b.local?a:v}function M(b){return new RegExp("(?:^|\\s+)"+y.requote(b)+"(?:\\s+|$)","g")}function n(b,d){function g(){for(var g=-1;++g<v;)b[g](this,d)}function p(){for(var g=-1,p=d.apply(this,arguments);++g<v;)b[g](this,p)}b=(b+"").trim().split(/^|\s+/).map(w);var v=b.length;return"function"===typeof d?p:g}function w(b){var d=
M(b);return function(g,p){if(v=g.classList)return p?v.add(b):v.remove(b);var v=g.getAttribute("class")||"";p?(d.lastIndex=0,d.test(v)||g.setAttribute("class",(v+" "+b).trim().replace(/\s+/g," "))):g.setAttribute("class",v.replace(d," ").trim().replace(/\s+/g," "))}}function V(b,d,g){function p(){this.style.removeProperty(b)}function v(){this.style.setProperty(b,d,g)}function a(){var p=d.apply(this,arguments);null==p?this.style.removeProperty(b):this.style.setProperty(b,p,g)}return null==d?p:"function"===
typeof d?a:v}function Z(b,d){function g(){delete this[b]}function p(){this[b]=d}function v(){var g=d.apply(this,arguments);null==g?delete this[b]:this[b]=g}return null==d?g:"function"===typeof d?v:p}function X(b){function d(){var d=this.ownerDocument,g=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===g&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(g,b)}function g(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=y.ns.qualify(b)).local?g:d}function Y(){var b=this.parentNode;b&&b.removeChild(this)}function I(b){return function(){return Zb(this,b)}}function S(b){arguments.length||(b=a);return function(d,g){return d&&g?b(d.__data__,g.__data__):!d-!g}}function W(b,d){for(var g=0,p=b.length;g<p;g++)for(var v=b[g],a=0,c=v.length,e;a<c;a++)(e=v[a])&&d(e,a,g);return b}function pa(b){Yb(b,Xa);return b}function ma(b){var d,g;return function(p,v,a){p=b[a].update;var P=p.length;a!=g&&(g=a,d=0);for(v>=d&&
(d=v+1);!(v=p[d])&&++d<P;);return v}}function aa(b,d,g){function p(){var d=this[c];d&&(this.removeEventListener(b,d,d.$),delete this[c])}function v(){var v=U(d,Ua(arguments));p.call(this);this.addEventListener(b,this[c]=v,v.$=g);v._=d}function a(){var d=new RegExp("^__on([^.]+)"+y.requote(b)+"$"),g,p;for(p in this)if(g=p.match(d)){var v=this[p];this.removeEventListener(g[1],v,v.$);delete this[p]}}var c="__on"+b,e=b.indexOf("."),U=fa;0<e&&(b=b.slice(0,e));var f=bd.get(b);f&&(b=f,U=ka);return e?d?v:
p:d?L:a}function fa(b,d){return function(g){var p=y.event;y.event=g;d[0]=this.__data__;try{b.apply(this,d)}finally{y.event=p}}}function ka(b,d){var g=fa(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||g.call(this,b)}}function ya(b){var d=".dragsuppress-"+ ++pg,g="click"+d,p=y.select(c(b)).on("touchmove"+d,Q).on("dragstart"+d,Q).on("selectstart"+d,Q);null==jb&&(jb="onselectstart"in b?!1:G(b.style,"userSelect"));if(jb){var v=(b&&(b.ownerDocument||b.document||
b).documentElement).style;var a=v[jb];v[jb]="none"}return function(b){p.on(d,null);jb&&(v[jb]=a);if(b){var P=function(){p.on(g,null)};p.on(g,function(){Q();P()},!0);setTimeout(P,0)}}}function za(b,d){d.changedTouches&&(d=d.changedTouches[0]);var g=b.ownerSVGElement||b;if(g.createSVGPoint){var p=g.createSVGPoint();if(0>cd&&(g=c(b),g.scrollX||g.scrollY)){var g=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),v=g[0][0].getScreenCTM();
cd=!(v.f||v.e);g.remove()}cd?(p.x=d.pageX,p.y=d.pageY):(p.x=d.clientX,p.y=d.clientY);p=p.matrixTransform(b.getScreenCTM().inverse());return[p.x,p.y]}p=b.getBoundingClientRect();return[d.clientX-p.left-b.clientLeft,d.clientY-p.top-b.clientTop]}function la(){return y.event.changedTouches[0].identifier}function ca(b,d,g){return(d[0]-b[0])*(g[1]-b[1])-(d[1]-b[1])*(g[0]-b[0])}function ea(b){return 1<b?0:-1>b?ha:Math.acos(b)}function qa(b){return 1<b?Ca:-1>b?-Ca:Math.asin(b)}function xa(b){return((b=Math.exp(b))+
1/b)/2}function va(b){return(b=Math.sin(b/2))*b}function ta(){}function Ia(b,d,g){return this instanceof Ia?void(this.h=+b,this.s=+d,this.l=+g):2>arguments.length?b instanceof Ia?new Ia(b.h,b.s,b.l):$b(""+b,ac,Ia):new Ia(b,d,g)}function ua(b,d,g){function p(b){360<b?b-=360:0>b&&(b+=360);return 60>b?a+(v-a)*b/60:180>b?v:240>b?a+(v-a)*(240-b)/60:a}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;g=0>g?0:1<g?1:g;var v=.5>=g?g*(1+d):g+d-g*d;var a=2*g-v;return new Ja(Math.round(255*p(b+120)),
Math.round(255*p(b)),Math.round(255*p(b-120)))}function na(b,d,g){return this instanceof na?void(this.h=+b,this.c=+d,this.l=+g):2>arguments.length?b instanceof na?new na(b.h,b.c,b.l):b instanceof oa?da(b.l,b.a,b.b):da((b=bc((b=y.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new na(b,d,g)}function Ga(b,d,g){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new oa(g,Math.cos(b*=ia)*d,Math.sin(b)*d)}function oa(b,d,g){return this instanceof oa?void(this.l=+b,this.a=+d,this.b=+g):2>arguments.length?b instanceof oa?new oa(b.l,
b.a,b.b):b instanceof na?Ga(b.h,b.c,b.l):bc((b=Ja(b)).r,b.g,b.b):new oa(b,d,g)}function Aa(b,d,g){b=(b+16)/116;g=b-g/200;d=Ea(b+d/500)*de;b=Ea(b)*ee;g=Ea(g)*fe;return new Ja(kb(3.2404542*d-1.5371385*b-.4985314*g),kb(-.969266*d+1.8760108*b+.041556*g),kb(.0556434*d-.2040259*b+1.0572252*g))}function da(b,d,g){return 0<b?new na(Math.atan2(g,d)*Ba,Math.sqrt(d*d+g*g),b):new na(NaN,NaN,b)}function Ea(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Fa(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function kb(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ja(b,d,g){return this instanceof Ja?void(this.r=~~b,this.g=~~d,this.b=~~g):2>arguments.length?b instanceof Ja?new Ja(b.r,b.g,b.b):$b(""+b,Ja,ua):new Ja(b,d,g)}function vb(b){return new Ja(b>>16,b>>8&255,b&255)+""}function bb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function $b(b,d,g){var p=0,v=0,a=0,c;if(c=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var e=c[2].split(",");
switch(c[1]){case "hsl":return g(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return d(dd(e[0]),dd(e[1]),dd(e[2]))}}if(g=cc.get(b))return d(g.r,g.g,g.b);null==b||"#"!==b.charAt(0)||isNaN(g=parseInt(b.slice(1),16))||(4===b.length?(p=(g&3840)>>4,p|=p>>4,v=g&240,v|=v>>4,a=g&15,a|=a<<4):7===b.length&&(p=(g&16711680)>>16,v=(g&65280)>>8,a=g&255));return d(p,v,a)}function ac(b,d,g){var p=Math.min(b/=255,d/=255,g/=255),v=Math.max(b,d,g),a=v-p,c=(v+p)/2;a?(p=.5>c?a/(v+p):a/(2-v-p),
b=60*(b==v?(d-g)/a+(d<g?6:0):d==v?(g-b)/a+2:(b-d)/a+4)):(b=NaN,p=0<c&&1>c?0:b);return new Ia(b,p,c)}function bc(b,d,g){b=Hb(b);d=Hb(d);g=Hb(g);var p=Fa((.4124564*b+.3575761*d+.1804375*g)/de),v=Fa((.2126729*b+.7151522*d+.072175*g)/ee);b=Fa((.0193339*b+.119192*d+.9503041*g)/fe);return oa(116*v-16,500*(p-v),200*(v-b))}function Hb(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function dd(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function wa(b){return"function"===
typeof b?b:function(){return b}}function ed(b){return function(d,g,p){2===arguments.length&&"function"===typeof g&&(p=g,g=null);return Ib(d,g,b,p)}}function Ib(b,d,g,p){function v(){var b=U.status,d;if(d=!b)d=(d=U.responseType)&&"text"!==d?U.response:U.responseText;if(d||200<=b&&300>b||304===b){try{var p=g.call(a,U)}catch(og){c.error.call(a,og);return}c.load.call(a,p)}else c.error.call(a,U)}var a={},c=y.dispatch("beforesend","progress","load","error"),e={},U=new XMLHttpRequest,f=null;!this.XDomainRequest||
"withCredentials"in U||!/^(http(s)?:)?\/\//.test(b)||(U=new XDomainRequest);"onload"in U?U.onload=U.onerror=v:U.onreadystatechange=function(){3<U.readyState&&v()};U.onprogress=function(b){var d=y.event;y.event=b;try{c.progress.call(a,U)}finally{y.event=d}};a.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return e[b];null==d?delete e[b]:e[b]=d+"";return a};a.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return a};a.responseType=function(b){if(!arguments.length)return f;
f=b;return a};a.response=function(b){g=b;return a};["get","post"].forEach(function(b){a[b]=function(){return a.send.apply(a,[b].concat(Ua(arguments)))}});a.send=function(g,p,v){2===arguments.length&&"function"===typeof p&&(v=p,p=null);U.open(g,b,!0);null==d||"accept"in e||(e.accept=d+",*/*");if(U.setRequestHeader)for(var P in e)U.setRequestHeader(P,e[P]);null!=d&&U.overrideMimeType&&U.overrideMimeType(d);null!=f&&(U.responseType=f);if(null!=v)a.on("error",v).on("load",function(b){v(null,b)});c.beforesend.call(a,
U);U.send(null==p?null:p);return a};a.abort=function(){U.abort();return a};y.rebind(a,c,"on");return null==p?a:a.get(qg(p))}function qg(b){return 1===b.length?function(d,g){b(null==d?g:null)}:b}function dc(b,d,g){var p=arguments.length;2>p&&(d=0);3>p&&(g=Date.now());p={c:b,t:g+d,n:null};ec?ec.n=p:fc=p;ec=p;gc||(hc=clearTimeout(hc),gc=1,ge(ic));return p}function ic(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(hc),hc=setTimeout(ic,b)),gc=0):(gc=1,ge(ic))}function he(){for(var b=Date.now(),
d=fc;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=fc,g=Infinity;d;)d.c?(d.t<g&&(g=d.t),d=(b=d).n):d=b?b.n=d.n:fc=d.n;ec=b;return g}function fd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,g=b.thousands,p=b.grouping,v=b.currency,a=p&&g?function(b,d){for(var v=b.length,a=[],c=0,P=p[0],e=0;0<v&&0<P;){e+P+1>d&&(P=Math.max(1,d-e));a.push(b.substring(v-=P,v+P));if((e+=P+1)>d)break;P=p[c=(c+1)%p.length]}return a.reverse().join(g)}:B;return function(b){b=
je.exec(b);var g=b[1]||" ",p=b[2]||">",c=b[3]||"-",P=b[4]||"",e=b[5],f=+b[6],ra=b[7],h=b[8],n=b[9],l=1,k="",m="",w=!1,t=!0;h&&(h=+h.substring(1));if(e||"0"===g&&"="===p)e=g="0",p="=";switch(n){case "n":ra=!0;n="g";break;case "%":l=100;m="%";n="f";break;case "p":l=100;m="%";n="r";break;case "b":case "o":case "x":case "X":"#"===P&&(k="0"+n.toLowerCase());case "c":t=!1;case "d":w=!0;h=0;break;case "s":l=-1,n="r"}"$"===P&&(k=v[0],m=v[1]);"r"!=n||h||(n="g");if(null!=h)if("g"==n)h=Math.max(1,Math.min(21,
h));else if("e"==n||"f"==n)h=Math.max(0,Math.min(20,h));var n=sg.get(n)||tg,q=e&&ra;return function(b){var v=m;if(w&&b%1)return"";var P=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===c?"":c;0>l?(v=y.formatPrefix(b,h),b=v.scale(b),v=v.symbol+m):b*=l;b=n(b,h);var U=b.lastIndexOf(".");if(0>U)if(U=t?b.lastIndexOf("e"):-1,0>U){var T=b;b=""}else T=b.substring(0,U),b=b.substring(U);else T=b.substring(0,U),b=d+b.substring(U+1);!e&&ra&&(T=a(T,Infinity));var U=k.length+T.length+b.length+(q?0:P.length),ga=U<f?Array(U=f-
U+1).join(g):"";q&&(T=a(ga+T,ga.length?f-b.length:Infinity));P+=k;b=T+b;return("<"===p?P+b+ga:">"===p?ga+P+b:"^"===p?ga.substring(0,U>>=1)+P+b+ga.substring(U):P+(q?b:ga+b))+v}}}function tg(b){return b+""}function Ya(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function lb(b,d,g){function p(d){var g=b(d),p=a(g,1);return d-g<p-d?g:p}function v(g){d(g=b(new Ka(g-1)),1);return g}function a(b,g){d(b=new Ka(+b),g);return b}function c(b,p,a){b=v(b);var c=[];if(1<a)for(;b<
p;)g(b)%a||c.push(new Date(+b)),d(b,1);else for(;b<p;)c.push(new Date(+b)),d(b,1);return c}b.floor=b;b.round=p;b.ceil=v;b.offset=a;b.range=c;var e=b.utc=jc(b);e.floor=e;e.round=jc(p);e.ceil=jc(v);e.offset=jc(a);e.range=function(b,d,g){try{Ka=Ya;var p=new Ya;p._=b;return c(p,d,g)}finally{Ka=Date}};return b}function jc(b){return function(d,g){try{Ka=Ya;var p=new Ya;p._=d;return b(p,g)._}finally{Ka=Date}}}function ug(b){function d(b){function d(d){for(var g=[],v=-1,a=0,c,P;++v<p;)if(37===b.charCodeAt(v)){g.push(b.slice(a,
v));null!=(c=ke[a=b.charAt(++v)])&&(a=b.charAt(++v));if(P=I[a])a=P(d,null==c?"e"===a?" ":"0":c);g.push(a);a=v+1}g.push(b.slice(a,v));return g.join("")}var p=b.length;d.parse=function(d){var p={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(g(p,b,d,0)!=d.length)return null;"p"in p&&(p.H=p.H%12+12*p.p);d=null!=p.Z&&Ka!==Ya;var v=new (d?Ya:Ka);"j"in p?v.setFullYear(p.y,0,p.j):"W"in p||"U"in p?("w"in p||(p.w="W"in p?1:0),v.setFullYear(p.y,0,1),v.setFullYear(p.y,0,"W"in p?(p.w+6)%7+7*p.W-(v.getDay()+5)%7:p.w+
7*p.U-(v.getDay()+6)%7)):v.setFullYear(p.y,p.m,p.d);v.setHours(p.H+(p.Z/100|0),p.M+p.Z%100,p.S,p.L);return d?v._:v};d.toString=function(){return b};return d}function g(b,d,g,p){for(var v,a=0,c=d.length,P=g.length;a<c;){if(p>=P)return-1;v=d.charCodeAt(a++);if(37===v){if(v=d.charAt(a++),v=r[v in ke?d.charAt(a++):v],!v||0>(p=v(b,g,p)))return-1}else if(v!=g.charCodeAt(p++))return-1}return p}var p=b.dateTime,v=b.date,a=b.time,c=b.periods,e=b.days,U=b.shortDays,f=b.months,h=b.shortMonths;d.utc=function(b){function g(b){try{Ka=
Ya;var d=new Ka;d._=b;return p(d)}finally{Ka=Date}}var p=d(b);g.parse=function(b){try{Ka=Ya;var d=p.parse(b);return d&&d._}finally{Ka=Date}};g.toString=p.toString;return g};d.multi=d.utc.multi=vg;var n=y.map(),l=kc(e),k=lc(e),m=kc(U),w=lc(U),t=kc(f),q=lc(f),u=kc(h),z=lc(h);c.forEach(function(b,d){n.set(b.toLowerCase(),d)});var I={a:function(b){return U[b.getDay()]},A:function(b){return e[b.getDay()]},b:function(b){return h[b.getMonth()]},B:function(b){return f[b.getMonth()]},c:d(p),d:function(b,d){return Na(b.getDate(),
d,2)},e:function(b,d){return Na(b.getDate(),d,2)},H:function(b,d){return Na(b.getHours(),d,2)},I:function(b,d){return Na(b.getHours()%12||12,d,2)},j:function(b,d){return Na(1+ba.dayOfYear(b),d,3)},L:function(b,d){return Na(b.getMilliseconds(),d,3)},m:function(b,d){return Na(b.getMonth()+1,d,2)},M:function(b,d){return Na(b.getMinutes(),d,2)},p:function(b){return c[+(12<=b.getHours())]},S:function(b,d){return Na(b.getSeconds(),d,2)},U:function(b,d){return Na(ba.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Na(ba.mondayOfYear(b),d,2)},x:d(v),X:d(a),y:function(b,d){return Na(b.getFullYear()%100,d,2)},Y:function(b,d){return Na(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},r={a:function(b,d,g){m.lastIndex=0;return(d=m.exec(d.slice(g)))?(b.w=w.get(d[0].toLowerCase()),g+d[0].length):-1},A:function(b,d,g){l.lastIndex=0;return(d=l.exec(d.slice(g)))?(b.w=k.get(d[0].toLowerCase()),g+d[0].length):-1},b:function(b,d,g){u.lastIndex=0;return(d=u.exec(d.slice(g)))?(b.m=z.get(d[0].toLowerCase()),
g+d[0].length):-1},B:function(b,d,g){t.lastIndex=0;return(d=t.exec(d.slice(g)))?(b.m=q.get(d[0].toLowerCase()),g+d[0].length):-1},c:function(b,d,p){return g(b,I.c.toString(),d,p)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,g){d=n.get(d.slice(g,g+=2).toLowerCase());return null==d?-1:(b.p=d,g)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,p){return g(b,I.x.toString(),d,p)},X:function(b,d,p){return g(b,I.X.toString(),d,p)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Na(b,d,g){var p=0>b?"-":"";b=(p?-b:
b)+"";var v=b.length;return p+(v<g?Array(g-v+1).join(d)+b:b)}function kc(b){return new RegExp("^(?:"+b.map(y.requote).join("|")+")","i")}function lc(b){for(var d=new q,g=-1,p=b.length;++g<p;)d.set(b[g].toLowerCase(),g);return d}function Dg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+1)))?(b.w=+d[0],g+d[0].length):-1}function Cg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g)))?(b.U=+d[0],g+d[0].length):-1}function Eg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g)))?(b.W=+d[0],g+d[0].length):
-1}function Gg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+4)))?(b.y=+d[0],g+d[0].length):-1}function Fg(b,d,g){Da.lastIndex=0;if(d=Da.exec(d.slice(g,g+2))){var p=+d[0];b=(b.y=p+(68<p?1900:2E3),g+d[0].length)}else b=-1;return b}function Hg(b,d,g){return/^[+-]\d{4}$/.test(d=d.slice(g,g+5))?(b.Z=-d,g+5):-1}function zg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.m=d[0]-1,g+d[0].length):-1}function le(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.d=+d[0],g+d[0].length):
-1}function xg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+3)))?(b.j=+d[0],g+d[0].length):-1}function me(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.H=+d[0],g+d[0].length):-1}function Ag(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.M=+d[0],g+d[0].length):-1}function Bg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.S=+d[0],g+d[0].length):-1}function yg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+3)))?(b.L=+d[0],g+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var g=ja(d)/60|0,d=ja(d)%60;return b+Na(g,"0",2)+Na(d,"0",2)}function Ig(b,d,g){ne.lastIndex=0;return(b=ne.exec(d.slice(g,g+1)))?g+b[0].length:-1}function vg(b){for(var d=b.length,g=-1;++g<d;)b[g][0]=this(b[g][0]);return function(d){for(var g=0,p=b[g];!p[1](d);)p=b[++g];return p[0](d)}}function gd(){}function oe(b,d,g){var p=g.s=b+d,v=p-b;g.t=b-(p-v)+(d-v)}function mc(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function hd(b,d,g){var p=-1;g=b.length-g;
for(d.lineStart();++p<g;){var v=b[p];d.point(v[0],v[1],v[2])}d.lineEnd()}function qe(b,d){var g=-1,p=b.length;for(d.polygonStart();++g<p;)hd(b[g],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ia;d=d*ia/2+ha/4;var g=b-p,c=0<=g?1:-1,g=c*g,P=Math.cos(d),e=Math.sin(d),T=a*e;mb.add(Math.atan2(T*c*Math.sin(g),v*P+T*Math.cos(g)));p=b;v=P;a=e}var d,g,p,v,a;Oa.point=function(c,P){Oa.point=b;p=(d=c)*ia;v=Math.cos(P=(g=P)*ia/2+ha/4);a=Math.sin(P)};Oa.lineEnd=function(){b(d,g)}}function nb(b){var d=b[0];
b=b[1];var g=Math.cos(b);return[g*Math.cos(d),g*Math.sin(d),Math.sin(b)]}function nc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function wb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function id(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function oc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function pc(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function qc(b){return[Math.atan2(b[1],b[0]),qa(b[2])]}function rc(b,d){return 1E-6>ja(b[0]-d[0])&&1E-6>ja(b[1]-
d[1])}function jd(b,d){b*=ia;var g=Math.cos(d*=ia);Jb(g*Math.cos(b),g*Math.sin(b),Math.sin(d))}function Jb(b,d,g){++Kb;ob+=(b-ob)/Kb;pb+=(d-pb)/Kb;Za+=(g-Za)/Kb}function re(){function b(b,a){b*=ia;var v=Math.cos(a*=ia),c=v*Math.cos(b),v=v*Math.sin(b),P=Math.sin(a),e=Math.atan2(Math.sqrt((e=g*P-p*v)*e+(e=p*c-d*P)*e+(e=d*v-g*c)*e),d*c+g*v+p*P);sc+=e;cb+=e*(d+(d=c));db+=e*(g+(g=v));Va+=e*(p+(p=P));Jb(d,g,p)}var d,g,p;Ra.point=function(v,a){v*=ia;var c=Math.cos(a*=ia);d=c*Math.cos(v);g=c*Math.sin(v);
p=Math.sin(a);Ra.point=b;Jb(d,g,p)}}function se(){Ra.point=jd}function Kg(){function b(b,d){b*=ia;var g=Math.cos(d*=ia),c=g*Math.cos(b),g=g*Math.sin(b),e=Math.sin(d),P=v*e-a*g,T=a*c-p*e,f=p*g-v*c,ra=Math.sqrt(P*P+T*T+f*f),h=p*c+v*g+a*e,n=ra&&-ea(h)/ra,ra=Math.atan2(ra,h);xb+=n*P;yb+=n*T;eb+=n*f;sc+=ra;cb+=ra*(p+(p=c));db+=ra*(v+(v=g));Va+=ra*(a+(a=e));Jb(p,v,a)}var d,g,p,v,a;Ra.point=function(c,e){d=c;g=e;Ra.point=b;c*=ia;var P=Math.cos(e*=ia);p=P*Math.cos(c);v=P*Math.sin(c);a=Math.sin(e);Jb(p,v,
a)};Ra.lineEnd=function(){b(d,g);Ra.lineEnd=se;Ra.point=jd}}function te(b,d){function g(g,a){return g=b(g,a),d(g[0],g[1])}b.invert&&d.invert&&(g.invert=function(g,a){return g=d.invert(g,a),g&&b.invert(g[0],g[1])});return g}function Lb(){return!0}function ue(b,d,g,p,a){var v=[],c=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,g=b[0],p=b[d];if(rc(g,p)){a.lineStart();for(p=0;p<d;++p)a.point((g=b[p])[0],g[1]);a.lineEnd()}else d=new tc(g,b,null,!0),g=new tc(g,null,d,!1),d.o=g,v.push(d),c.push(g),
d=new tc(p,b,null,!1),g=new tc(p,null,d,!0),d.o=g,v.push(d),c.push(g)}});c.sort(d);ve(v);ve(c);if(v.length){b=0;d=g;for(g=c.length;b<g;++b)c[b].e=d=!d;d=v[0];for(var e,U;;){for(var f=d,h=!0;f.v;)if((f=f.n)===d)return;e=f.z;a.lineStart();do{f.v=f.o.v=!0;if(f.e){if(h)for(b=0,g=e.length;b<g;++b)a.point((U=e[b])[0],U[1]);else p(f.x,f.n.x,1,a);f=f.n}else{if(h)for(e=f.p.z,b=e.length-1;0<=b;--b)a.point((U=e[b])[0],U[1]);else p(f.x,f.p.x,-1,a);f=f.p}f=f.o;e=f.z;h=!h}while(!f.v);a.lineEnd()}}}function ve(b){if(d=
b.length){for(var d,g=0,p=b[0],a;++g<d;)p.n=a=b[g],a.p=p,p=a;p.n=a=b[0];a.p=p}}function tc(b,d,g,p){this.x=b;this.z=d;this.o=g;this.e=p;this.v=!1;this.n=this.p=null}function we(b,d,g,p){return function(a,c){function v(d,g){var p=a(d,g);b(d=p[0],g=p[1])&&c.point(d,g)}function e(b,d){var g=a(b,d);k.point(g[0],g[1])}function P(){w.point=e;k.lineStart()}function f(){w.point=v;k.lineEnd()}function h(b,d){r.push([b,d]);var g=a(b,d);u.point(g[0],g[1])}function n(){u.lineStart();r=[]}function l(){h(r[0][0],
r[0][1]);u.lineEnd();var b=u.clean(),d=q.buffer();var g=d.length;r.pop();I.push(r);r=null;if(g)if(b&1){b=d[0];g=b.length-1;var d=-1,p;if(0<g){z||(c.polygonStart(),z=!0);for(c.lineStart();++d<g;)c.point((p=b[d])[0],p[1]);c.lineEnd()}}else 1<g&&b&2&&d.push(d.pop().concat(d.shift())),t.push(d.filter(Lg))}var k=d(c),m=a.invert(p[0],p[1]),w={point:v,lineStart:P,lineEnd:f,polygonStart:function(){w.point=h;w.lineStart=n;w.lineEnd=l;t=[];I=[]},polygonEnd:function(){w.point=v;w.lineStart=P;w.lineEnd=f;t=y.merge(t);
var b=m;var d=I;var p=b[0],a=b[1],e=[Math.sin(p),-Math.cos(p),0],U=0,T=0;mb.reset();for(var ra=0,ga=d.length;ra<ga;++ra){var h=d[ra],n=h.length;if(n)for(var l=h[0],k=l[0],b=l[1]/2+ha/4,La=Math.sin(b),q=Math.cos(b),u=1;;){u===n&&(u=0);var b=h[u],$c=b[0],r=b[1]/2+ha/4,G=Math.sin(r),r=Math.cos(r),J=$c-k,M=0<=J?1:-1,ad=M*J,D=ad>ha,La=La*G;mb.add(Math.atan2(La*M*Math.sin(ad),q*r+La*Math.cos(ad)));U+=D?J+M*Pa:J;D^k>=p^$c>=p&&(l=wb(nb(l),nb(b)),pc(l),k=wb(e,l),pc(k),k=(D^0<=J?-1:1)*qa(k[2]),a>k||a===k&&
(l[0]||l[1]))&&(T+=D^0<=J?1:-1);if(!u++)break;k=$c;La=G;q=r;l=b}}d=(-1E-6>U||1E-6>U&&-1E-6>mb)^T&1;t.length?(z||(c.polygonStart(),z=!0),ue(t,Mg,d,g,c)):d&&(z||(c.polygonStart(),z=!0),c.lineStart(),g(null,null,1,c),c.lineEnd());z&&(c.polygonEnd(),z=!1);t=I=null},sphere:function(){c.polygonStart();c.lineStart();g(null,null,1,c);c.lineEnd();c.polygonEnd()}},t,q=xe(),u=d(q),z=!1,I,r;return w}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,
p){d.push([b,p])},lineEnd:L,buffer:function(){var g=b;b=[];d=null;return g},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-Ca-1E-6:Ca-b[1])-(0>(d=d.x)[0]?d[1]-Ca-1E-6:Ca-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>a}function g(b,d,g){var p=nb(b),v=nb(d),c=[1,0,0],v=wb(p,v),e=nc(v,v),p=v[0],P=e-p*p;if(!P)return!g&&b;e=a*e/P;P=-a*p/P;p=wb(c,v);c=oc(c,e);v=oc(v,P);id(c,v);v=nc(c,p);e=nc(p,p);P=v*v-e*(nc(c,c)-1);if(!(0>
P)){var f=Math.sqrt(P),P=oc(p,(-v-f)/e);id(P,c);P=qc(P);if(!g)return P;g=b[0];var T=d[0];b=b[1];d=d[1];if(T<g){var U=g;g=T;T=U}var ra=T-g,ga=1E-6>ja(ra-ha);!ga&&d<b&&(U=b,b=d,d=U);if(ga||1E-6>ra?ga?0<b+d^P[1]<(1E-6>ja(P[0]-g)?b:d):b<=P[1]&&P[1]<=d:ra>ha^(g<=P[0]&&P[0]<=T))return d=oc(p,(-v+f)/e),id(d,c),[P,qc(d)]}}function p(d,g){var p=c?b:ha-b,a=0;d<-p?a|=1:d>p&&(a|=2);g<-p?a|=4:g>p&&(a|=8);return a}var a=Math.cos(b),c=0<a,e=1E-6<ja(a),f=kd(b,6*ia);return we(d,function(b){var a,v,P,f,T;return{lineStart:function(){f=
P=!1;T=1},point:function(U,ra){var ga=[U,ra],h=d(U,ra),n=c?h?0:p(U,ra):h?p(U+(0>U?ha:-ha),ra):0;!a&&(f=P=h)&&b.lineStart();if(h!==P){var l=g(a,ga);if(rc(a,l)||rc(ga,l))ga[0]+=1E-6,ga[1]+=1E-6,h=d(ga[0],ga[1])}if(h!==P)T=0,h?(b.lineStart(),l=g(ga,a),b.point(l[0],l[1])):(l=g(a,ga),b.point(l[0],l[1]),b.lineEnd()),a=l;else if(e&&a&&c^h){var k;n&v||!(k=g(ga,a,!0))||(T=0,c?(b.lineStart(),b.point(k[0][0],k[0][1]),b.point(k[1][0],k[1][1]),b.lineEnd()):(b.point(k[1][0],k[1][1]),b.lineEnd(),b.lineStart(),b.point(k[0][0],
k[0][1])))}!h||a&&rc(a,ga)||b.point(ga[0],ga[1]);a=ga;P=h;v=n},lineEnd:function(){P&&b.lineEnd();a=null},clean:function(){return T|(f&&P)<<1}}},f,c?[0,-b]:[-ha,b-ha])}function ye(b,d,g,p){return function(a){var v=a.a,c=a.b,e=v.x,v=v.y,f=0,ga=1,h=c.x-e,c=c.y-v;var n=b-e;if(h||!(0<n)){n/=h;if(0>h){if(n<f)return;n<ga&&(ga=n)}else if(0<h){if(n>ga)return;n>f&&(f=n)}n=g-e;if(h||!(0>n)){n/=h;if(0>h){if(n>ga)return;n>f&&(f=n)}else if(0<h){if(n<f)return;n<ga&&(ga=n)}n=d-v;if(c||!(0<n)){n/=c;if(0>c){if(n<f)return;
n<ga&&(ga=n)}else if(0<c){if(n>ga)return;n>f&&(f=n)}n=p-v;if(c||!(0>n)){n/=c;if(0>c){if(n>ga)return;n>f&&(f=n)}else if(0<c){if(n<f)return;n<ga&&(ga=n)}0<f&&(a.a={x:e+f*h,y:v+f*c});1>ga&&(a.b={x:e+ga*h,y:v+ga*c});return a}}}}}}function ze(b,d,g,p){function a(p,a){return 1E-6>ja(p[0]-b)?0<a?0:3:1E-6>ja(p[0]-g)?0<a?2:1:1E-6>ja(p[1]-d)?0<a?1:0:0<a?3:2}function c(b,d){return e(b.x,d.x)}function e(b,d){var g=a(b,1),p=a(d,1);return g!==p?g-p:0===g?d[1]-b[1]:1===g?b[0]-d[0]:2===g?b[1]-d[1]:d[0]-b[0]}return function(v){function P(v,
c,P,f){var T=0,U=0;if(null==v||(T=a(v,P))!==(U=a(c,P))||0>e(v,c)^0<P){do f.point(0===T||3===T?b:g,1<T?p:d);while((T=(T+P+4)%4)!==U)}else f.point(c[0],c[1])}function f(a,c){b<=a&&a<=g&&d<=c&&c<=p&&v.point(a,c)}function T(a,c){a=Math.max(-1E9,Math.min(1E9,a));c=Math.max(-1E9,Math.min(1E9,c));var e=b<=a&&a<=g&&d<=c&&c<=p;k&&w.push([a,c]);if(J)t=a,q=c,u=e,J=!1,e&&(v.lineStart(),v.point(a,c));else if(e&&r)v.point(a,c);else{var P={a:{x:z,y:I},b:{x:a,y:c}};n(P)?(r||(v.lineStart(),v.point(P.a.x,P.a.y)),v.point(P.b.x,
P.b.y),e||v.lineEnd(),M=!1):e&&(v.lineStart(),v.point(a,c),M=!1)}z=a;I=c;r=e}var ra=v,h=xe(),n=ye(b,d,g,p),l,k,w,m={point:f,lineStart:function(){m.point=T;k&&k.push(w=[]);J=!0;r=!1;z=I=NaN},lineEnd:function(){l&&(T(t,q),u&&r&&h.rejoin(),l.push(h.buffer()));m.point=f;r&&v.lineEnd()},polygonStart:function(){v=h;l=[];k=[];M=!0},polygonEnd:function(){v=ra;l=y.merge(l);var d=[b,p];for(var g=0,a=k.length,e=d[1],f=0;f<a;++f)for(var T=1,U=k[f],ga=U.length,h=U[0],n;T<ga;++T)n=U[T],h[1]<=e?n[1]>e&&0<ca(h,n,
d)&&++g:n[1]<=e&&0>ca(h,n,d)&&--g,h=n;d=0!==g;g=M&&d;a=l.length;if(g||a)v.polygonStart(),g&&(v.lineStart(),P(null,null,1,v),v.lineEnd()),a&&ue(l,c,d,P,v),v.polygonEnd();l=k=w=null}},t,q,u,z,I,r,J,M;return m}}function ld(b){var d=0,g=ha/3,p=md(b);b=p(d,g);b.parallels=function(b){return arguments.length?p(d=b[0]*ha/180,g=b[1]*ha/180):[d/ha*180,g/ha*180]};return b}function Ae(b,d){function g(b,d){var g=Math.sqrt(c-2*a*Math.sin(d))/a;return[g*Math.sin(b*=a),e-g*Math.cos(b)]}var p=Math.sin(b),a=(p+Math.sin(d))/
2,c=1+p*(2*a-p),e=Math.sqrt(c)/a;g.invert=function(b,d){var g=e-d;return[Math.atan2(b,g)/a,qa((c-(b*b+g*g)*a*a)/(2*a))]};return g}function Og(){function b(b,d){nd+=a*b-p*d;p=b;a=d}var d,g,p,a;fb.point=function(v,c){fb.point=b;d=p=v;g=a=c};fb.lineEnd=function(){b(d,g)}}function Pg(){function b(b,d){e.push("M",b,",",d,c)}function d(b,d){e.push("M",b,",",d);f.point=g}function g(b,d){e.push("L",b,",",d)}function p(){f.point=b}function a(){e.push("Z")}var c=Be(4.5),e=[],f={point:b,lineStart:function(){f.point=
d},lineEnd:p,polygonStart:function(){f.lineEnd=a},polygonEnd:function(){f.lineEnd=p;f.point=b},pointRadius:function(b){c=Be(b);return f},result:function(){if(e.length){var b=e.join("");e=[];return b}}};return f}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function qb(b,d){ob+=b;pb+=d;++Za}function Ce(){function b(b,a){var p=b-d,v=a-g,p=Math.sqrt(p*p+v*v);cb+=p*(d+b)/2;db+=p*(g+a)/2;Va+=p;qb(d=b,g=a)}var d,g;Sa.point=function(p,a){Sa.point=b;qb(d=p,g=a)}}
function De(){Sa.point=qb}function Qg(){function b(b,d){var g=b-p,v=d-a,g=Math.sqrt(g*g+v*v);cb+=g*(p+b)/2;db+=g*(a+d)/2;Va+=g;g=a*b-p*d;xb+=g*(p+b);yb+=g*(a+d);eb+=3*g;qb(p=b,a=d)}var d,g,p,a;Sa.point=function(v,c){Sa.point=b;qb(d=p=v,g=a=c)};Sa.lineEnd=function(){b(d,g)}}function Rg(b){function d(d,g){b.moveTo(d+e,g);b.arc(d,g,e,0,Pa)}function g(d,g){b.moveTo(d,g);f.point=p}function p(d,g){b.lineTo(d,g)}function a(){f.point=d}function c(){b.closePath()}var e=4.5,f={point:d,lineStart:function(){f.point=
g},lineEnd:a,polygonStart:function(){f.lineEnd=c},polygonEnd:function(){f.lineEnd=a;f.point=d},pointRadius:function(b){e=b;return f},result:L};return f}function Ee(b){function d(b){return(f?p:g)(b)}function g(d){return Fe(d,function(g,p){g=b(g,p);d.point(g[0],g[1])})}function p(d){function g(g,p){g=b(g,p);d.point(g[0],g[1])}function p(){m=NaN;I.point=v;d.lineStart()}function v(g,p){var v=nb([g,p]),c=b(g,p);a(m,t,w,q,u,z,m=c[0],t=c[1],w=g,q=v[0],u=v[1],z=v[2],f,d);d.point(m,t)}function c(){I.point=
g;d.lineEnd()}function e(){p();I.point=P;I.lineEnd=T}function P(b,d){v(U=b,d);ra=m;h=t;n=q;l=u;k=z;I.point=v}function T(){a(m,t,w,q,u,z,ra,h,U,n,l,k,f,d);I.lineEnd=c;c()}var U,ra,h,n,l,k,w,m,t,q,u,z,I={point:g,lineStart:p,lineEnd:c,polygonStart:function(){d.polygonStart();I.lineStart=e},polygonEnd:function(){d.polygonEnd();I.lineStart=p}};return I}function a(d,g,p,v,P,f,T,ra,h,n,l,k,m,w){var U=T-d,ga=ra-g,t=U*U+ga*ga;if(t>4*c&&m--){var q=v+n,La=P+l,u=f+k,z=Math.sqrt(q*q+La*La+u*u),I=Math.asin(u/=
z),r=1E-6>ja(ja(u)-1)||1E-6>ja(p-h)?(p+h)/2:Math.atan2(La,q),J=b(r,I),I=J[0],J=J[1],M=I-d,G=J-g,D=ga*M-U*G;if(D*D/t>c||.3<ja((U*M+ga*G)/t-.5)||v*n+P*l+f*k<e)a(d,g,p,v,P,f,I,J,r,q/=z,La/=z,u,m,w),w.point(I,J),a(I,J,r,q,La,u,T,ra,h,n,l,k,m,w)}}var c=.5,e=Math.cos(30*ia),f=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(c);f=0<(c=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,p){return b([d*Ba,p*Ba])});return function(b){return Ge(d(b))}}function He(b){this.stream=b}
function Fe(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function gb(b){return md(function(){return b})()}function md(b){function d(b){b=f(b[0]*ia,b[1]*ia);return[b[0]*h+u,z-b[1]*h]}function g(b){return(b=f.invert((b[0]-u)/h,(z-b[1])/h))&&[b[0]*Ba,b[1]*Ba]}function p(){f=te(e=od(w,t,q),c);var b=c(k,m);u=n-b[0]*h;z=l+b[1]*h;return a()}function a(){G&&
(G.valid=!1,G=null);return d}var c,e,f,U=Ee(function(b,d){b=c(b,d);return[b[0]*h+u,z-b[1]*h]}),h=150,n=480,l=250,k=0,m=0,w=0,t=0,q=0,u,z,I=Ie,r=B,J=null,M=null,G;d.stream=function(b){G&&(G.valid=!1);G=Ge(I(e,U(r(b))));G.valid=!0;return G};d.clipAngle=function(b){if(!arguments.length)return J;I=null==b?(J=b,Ie):Ng((J=+b)*ia);return a()};d.clipExtent=function(b){if(!arguments.length)return M;r=(M=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):B;return a()};d.scale=function(b){if(!arguments.length)return h;
h=+b;return p()};d.translate=function(b){if(!arguments.length)return[n,l];n=+b[0];l=+b[1];return p()};d.center=function(b){if(!arguments.length)return[k*Ba,m*Ba];k=b[0]%360*ia;m=b[1]%360*ia;return p()};d.rotate=function(b){if(!arguments.length)return[w*Ba,t*Ba,q*Ba];w=b[0]%360*ia;t=b[1]%360*ia;q=2<b.length?b[2]%360*ia:0;return p()};y.rebind(d,U,"precision");return function(){c=b.apply(this,arguments);d.invert=c.invert&&g;return p()}}function Ge(b){return Fe(b,function(d,g){b.point(d*ia,g*ia)})}function Mb(b,
d){return[b,d]}function Je(b,d){return[b>ha?b-Pa:b<-ha?b+Pa:b,d]}function od(b,d,g){return b?d||g?te(Ke(b),Le(d,g)):Ke(b):d||g?Le(d,g):Je}function Me(b){return function(d,g){return d+=b,[d>ha?d-Pa:d<-ha?d+Pa:d,g]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function g(b,d){var g=Math.cos(d),v=Math.cos(b)*g,g=Math.sin(b)*g,P=Math.sin(d),f=P*p+v*a;return[Math.atan2(g*c-f*e,v*p-P*a),qa(f*c+g*e)]}var p=Math.cos(b),a=Math.sin(b),c=Math.cos(d),e=Math.sin(d);g.invert=function(b,
d){var g=Math.cos(d),v=Math.cos(b)*g,g=Math.sin(b)*g,P=Math.sin(d),f=P*c-g*e;return[Math.atan2(g*c+P*e,v*p+f*a),qa(f*p-v*a)]};return g}function kd(b,d){var g=Math.cos(b),p=Math.sin(b);return function(a,c,e,f){var v=e*d;if(null!=a){if(a=Ne(g,a),c=Ne(g,c),0<e?a<c:a>c)a+=e*Pa}else a=b+e*Pa,c=b-.5*v;for(var P;0<e?a>c:a<c;a-=v)f.point((P=qc([g,-p*Math.cos(a),-p*Math.sin(a)]))[0],P[1])}}function Ne(b,d){var g=nb(d);g[0]-=b;pc(g);var p=ea(-g[1]);return((0>-g[2]?-p:p)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,
d,g){var p=y.range(b,d-1E-6,g).concat(d);return function(b){return p.map(function(d){return[b,d]})}}function Pe(b,d,g){var p=y.range(b,d-1E-6,g).concat(d);return function(b){return p.map(function(d){return[d,b]})}}function pd(b){return b.source}function qd(b){return b.target}function Tg(b,d,g,p){var a=Math.cos(d),c=Math.sin(d),e=Math.cos(p),f=Math.sin(p),U=a*Math.cos(b),h=a*Math.sin(b),n=e*Math.cos(g),l=e*Math.sin(g),k=2*Math.asin(Math.sqrt(va(p-d)+a*e*va(g-b))),m=1/Math.sin(k);g=k?function(b){var d=
Math.sin(b*=k)*m;b=Math.sin(k-b)*m;var g=b*U+d*n,p=b*h+d*l;return[Math.atan2(p,g)*Ba,Math.atan2(b*c+d*f,Math.sqrt(g*g+p*p))*Ba]}:function(){return[b*Ba,d*Ba]};g.distance=k;return g}function Nb(b,d){function g(d,g){var p=Math.cos(g),a=b(Math.cos(d)*p);return[a*p*Math.sin(d),a*Math.sin(g)]}g.invert=function(b,g){var p=Math.sqrt(b*b+g*g),a=d(p),v=Math.sin(a);return[Math.atan2(b*v,p*Math.cos(a)),Math.asin(p&&g*v/p)]};return g}function Qe(b,d){function g(b,d){0<c?d<-Ca+1E-6&&(d=-Ca+1E-6):d>Ca-1E-6&&(d=
Ca-1E-6);var g=c/Math.pow(Math.tan(ha/4+d/2),a);return[g*Math.sin(a*b),c-g*Math.cos(a*b)]}var p=Math.cos(b),a=b===d?Math.sin(b):Math.log(p/Math.cos(d))/Math.log(Math.tan(ha/4+d/2)/Math.tan(ha/4+b/2)),c=p*Math.pow(Math.tan(ha/4+b/2),a)/a;if(!a)return uc;g.invert=function(b,d){var g=c-d;return[Math.atan2(b,g)/a,2*Math.atan(Math.pow(c/((0<a?1:0>a?-1:0)*Math.sqrt(b*b+g*g)),1/a))-Ca]};return g}function Re(b,d){function g(b,d){var g=c-d;return[g*Math.sin(a*b),c-g*Math.cos(a*b)]}var p=Math.cos(b),a=b===
d?Math.sin(b):(p-Math.cos(d))/(d-b),c=p/a+b;if(1E-6>ja(a))return Mb;g.invert=function(b,d){var g=c-d;return[Math.atan2(b,g)/a,c-(0<a?1:0>a?-1:0)*Math.sqrt(b*b+g*g)]};return g}function uc(b,d){return[b,Math.log(Math.tan(ha/4+d/2))]}function Se(b){var d=gb(b),g=d.scale,a=d.translate,c=d.clipExtent,e;d.scale=function(){var b=g.apply(d,arguments);return b===d?e?d.clipExtent(null):d:b};d.translate=function(){var b=a.apply(d,arguments);return b===d?e?d.clipExtent(null):d:b};d.clipExtent=function(b){var p=
c.apply(d,arguments);if(p===d){if(e=null==b){var v=ha*g(),f=a();c([[f[0]-v,f[1]-v],[f[0]+v,f[1]+v]])}}else e&&(p=null);return p};return d.clipExtent(null)}function rd(b,d){return[Math.log(Math.tan(ha/4+d/2)),-b]}function zb(b){return b[0]}function Ob(b){return b[1]}function Te(b){for(var d=b.length,g=[0,1],a=2,c=2;c<d;c++){for(;1<a&&0>=ca(b[g[a-2]],b[g[a-1]],b[c]);)--a;g[a++]=c}return g.slice(0,a)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function sd(b,d,g){return(g[0]-d[0])*(b[1]-d[1])<(g[1]-
d[1])*(b[0]-d[0])}function td(b,d,g,a){var p=b[0],c=g[0],e=d[0]-p,f=a[0]-c;b=b[1];g=g[1];d=d[1]-b;a=a[1]-g;c=(f*(b-g)-a*(p-c))/(a*e-f*d);return[p+c*e,b+c*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){vc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function ud(b){Ab(b);Bb.remove(b);We.push(b);vc(b)}function Xe(b,d){var g=b.site,a=g.x,c=g.y,e=c-d;if(!e)return a;var f=b.P;if(!f)return-Infinity;var g=f.site,
f=g.x,g=g.y,T=g-d;if(!T)return f;var U=f-a,h=1/e-1/T,n=U/T;return h?(-n+Math.sqrt(n*n-2*h*(U*U/(-2*T)-g+T/2+c-e/2)))/h+a:(a+f)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){vc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Cb(b){var d=b.P,g=b.N;if(d&&g){var a=d.site,d=b.site,c=g.site;if(a!==c){var g=d.x,e=d.y,f=a.x-g,T=a.y-e,a=c.x-g,c=c.y-e,U=2*(f*c-T*a);if(!(-1E-12<=U)){var h=f*f+T*T,n=a*a+c*c,T=(c*h-T*n)/U,f=(f*n-a*h)/U,c=f+e,e=$e.pop()||
new Wg;e.arc=b;e.site=d;e.x=T+g;e.y=c+Math.sqrt(T*T+f*f);e.cy=c;b.circle=e;b=null;for(d=Pb._;d;)if(e.y<d.y||e.y===d.y&&e.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Pb.insert(b,e);b||(vd=e)}}}}function Ab(b){var d=b.circle;d&&(d.P||(vd=d.N),Pb.remove(d),$e.push(d),vc(d),b.circle=null)}function Xg(b,d){var g=b.b;if(g)return!0;var a=b.a,g=d[0][0],c=d[1][0],e=d[0][1],f=d[1][1],T=b.l,h=b.r,n=T.x,T=T.y,l=h.x,h=h.y,k=(n+l)/2;if(h===T){if(k<g||k>=c)return;if(n>l){if(!a)a={x:k,y:e};
else if(a.y>=f)return;g={x:k,y:f}}else{if(!a)a={x:k,y:f};else if(a.y<e)return;g={x:k,y:e}}}else{var m=(n-l)/(h-T);k=(T+h)/2-m*k;if(-1>m||1<m)if(n>l){if(!a)a={x:(e-k)/m,y:e};else if(a.y>=f)return;g={x:(f-k)/m,y:f}}else{if(!a)a={x:(f-k)/m,y:f};else if(a.y<e)return;g={x:(e-k)/m,y:e}}else if(T<h){if(!a)a={x:g,y:m*g+k};else if(a.x>=c)return;g={x:c,y:m*c+k}}else{if(!a)a={x:c,y:m*c+k};else if(a.x<g)return;g={x:g,y:m*g+k}}}b.a=a;b.b=g;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Qb(b,
d,g,a){var p=new af(b,d);Db.push(p);g&&wc(p,b,d,g);a&&wc(p,d,b,a);rb[b.i].edges.push(new xc(p,b,d));rb[d.i].edges.push(new xc(p,d,b));return p}function Yg(b,d,g){b=new af(b,null);b.a=d;b.b=g;Db.push(b);return b}function wc(b,d,g,a){b.a||b.b?b.l===g?b.b=a:b.a=a:(b.a=a,b.l=d,b.r=g)}function xc(b,d,g){var a=b.a,c=b.b;this.edge=b;this.site=d;this.angle=g?Math.atan2(g.y-d.y,g.x-d.x):b.l===d?Math.atan2(c.x-a.x,a.y-c.y):Math.atan2(a.x-c.x,c.y-a.y)}function wd(){this._=null}function vc(b){b.U=b.C=b.L=b.R=
b.P=b.N=null}function Rb(b,d){var g=d.R,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.R=g.L;d.R&&(d.R.U=d);g.L=d}function Sb(b,d){var g=d.L,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.L=g.R;d.L&&(d.L.U=d);g.R=d}function bf(b){for(;b.L;)b=b.L;return b}function xd(b,d){var g=b.sort(Zg).pop(),a;Db=[];rb=Array(b.length);Bb=new wd;for(Pb=new wd;;){var c=vd;if(g&&(!c||g.y<c.y||g.y===c.y&&g.x<c.x)){if(g.x!==a||g.y!==e){rb[g.i]=new Ye(g);var e=a=void 0;c=g;for(var f=c.x,T=c.y,h=Bb._;h;){var n=Xe(h,
T)-f;if(1E-6<n)h=h.L;else{var l=h;var k=T;var m=l.N;m?k=Xe(m,k):(l=l.site,k=l.y===k?l.x:Infinity);k=f-k;if(1E-6<k){if(!h.R){e=h;break}h=h.R}else{-1E-6<n?(e=h.P,a=h):-1E-6<k?(e=h,a=h.N):e=a=h;break}}}n=Ve(c);Bb.insert(e,n);if(e||a)if(e===a)Ab(e),a=Ve(e.site),Bb.insert(n,a),n.edge=a.edge=Qb(e.site,n.site),Cb(e),Cb(a);else if(a){Ab(e);Ab(a);f=e.site;h=f.x;k=f.y;var l=c.x-h,m=c.y-k,T=a.site,w=T.x-h,t=T.y-k,q=2*(l*t-m*w),u=l*l+m*m,z=w*w+t*t,h={x:(t*u-m*z)/q+h,y:(l*z-w*u)/q+k};wc(a.edge,f,T,h);n.edge=Qb(f,
c,null,h);a.edge=Qb(c,T,null,h);Cb(e);Cb(a)}else n.edge=Qb(e.site,n.site);a=g.x;e=g.y}g=b.pop()}else if(c){T=c.arc;c=T.circle;f=c.x;h=c.cy;c={x:f,y:h};l=T.P;k=T.N;n=[T];ud(T);for(T=l;T.circle&&1E-6>ja(f-T.circle.x)&&1E-6>ja(h-T.circle.cy);)l=T.P,n.unshift(T),ud(T),T=l;n.unshift(T);Ab(T);for(l=k;l.circle&&1E-6>ja(f-l.circle.x)&&1E-6>ja(h-l.circle.cy);)k=l.N,n.push(l),ud(l),l=k;n.push(l);Ab(l);h=n.length;for(f=1;f<h;++f)l=n[f],T=n[f-1],wc(l.edge,T.site,l.site,c);T=n[0];l=n[h-1];l.edge=Qb(T.site,l.site,
null,c);Cb(T);Cb(l)}else break}if(d){g=Db;a=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(e=g.length;e--;)if(c=g[e],!Xg(c,d)||!a(c)||1E-6>ja(c.a.x-c.b.x)&&1E-6>ja(c.a.y-c.b.y))c.a=c.b=null,g.splice(e,1);g=d[0][0];a=d[1][0];e=d[0][1];c=d[1][1];h=rb;for(k=h.length;k--;)if((l=h[k])&&l.prepare())for(w=l.edges,t=w.length,m=0;m<t;)if(q=w[m].end(),f=q.x,T=q.y,u=w[++m%t].start(),n=u.x,u=u.y,1E-6<ja(f-n)||1E-6<ja(T-u))w.splice(m,0,new xc(Yg(l.site,q,1E-6>ja(f-g)&&1E-6<c-T?{x:g,y:1E-6>ja(n-g)?u:c}:1E-6>ja(T-c)&&
1E-6<a-f?{x:1E-6>ja(u-c)?n:a,y:c}:1E-6>ja(f-a)&&1E-6<T-e?{x:a,y:1E-6>ja(n-a)?u:e}:1E-6>ja(T-e)&&1E-6<f-g?{x:1E-6>ja(u-e)?n:g,y:e}:null),l.site,null)),++t}g={cells:rb,edges:Db};Bb=Pb=Db=rb=null;return g}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Tb(b,d,g,a,c,e){if(!b(d,g,a,c,e)){var p=.5*(g+c),v=.5*(a+e);d=d.nodes;d[0]&&Tb(b,d[0],g,a,p,v);d[1]&&Tb(b,d[1],p,a,c,v);d[2]&&Tb(b,d[2],
g,v,p,e);d[3]&&Tb(b,d[3],p,v,c,e)}}function bh(b,d,g,a,c,e,f){var p=Infinity,v;(function La(b,P,h,T,n){var l;if(!(P>e||h>f||T<a||n<c)){if(l=b.point){var U=d-b.x,k=g-b.y,U=U*U+k*k;U<p&&(U=Math.sqrt(p=U),a=d-U,c=g-U,e=d+U,f=g+U,v=l)}l=b.nodes;for(var U=.5*(P+T),k=.5*(h+n),m=(g>=k)<<1|d>=U,ra=m+4;m<ra;++m)if(b=l[m&3])switch(m&3){case 0:La(b,P,h,U,k);break;case 1:La(b,U,h,T,k);break;case 2:La(b,P,k,U,n);break;case 3:La(b,U,k,T,n)}}})(b,a,c,e,f);return v}function yd(b,d){b=y.rgb(b);d=y.rgb(d);var g=b.r,
a=b.g,c=b.b,e=d.r-g,f=d.g-a,h=d.b-c;return function(b){return"#"+bb(Math.round(g+e*b))+bb(Math.round(a+f*b))+bb(Math.round(c+h*b))}}function df(b,d){var g={},a={},c;for(c in b)c in d?g[c]=sb(b[c],d[c]):a[c]=b[c];for(c in d)c in b||(a[c]=d[c]);return function(b){for(c in g)a[c]=g[c](b);return a}}function $a(b,d){b=+b;d=+d;return function(g){return b*(1-g)+d*g}}function ef(b,d){var g=zd.lastIndex=Ad.lastIndex=0,a,c,e,f=-1,h=[],n=[];b+="";for(d+="";(a=zd.exec(b))&&(c=Ad.exec(d));)(e=c.index)>g&&(e=d.slice(g,
e),h[f]?h[f]+=e:h[++f]=e),(a=a[0])===(c=c[0])?h[f]?h[f]+=c:h[++f]=c:(h[++f]=null,n.push({i:f,x:$a(a,c)})),g=Ad.lastIndex;g<d.length&&(e=d.slice(g),h[f]?h[f]+=e:h[++f]=e);return 2>h.length?n[0]?(d=n[0].x,function(b){return d(b)+""}):function(){return d}:(d=n.length,function(b){for(var g=0,a;g<d;++g)h[(a=n[g]).i]=a.x(b);return h.join("")})}function sb(b,d){for(var g=y.interpolators.length,a;0<=--g&&!(a=y.interpolators[g](b,d)););return a}function yc(b,d){var g=[],a=[],c=b.length,e=d.length,f=Math.min(b.length,
d.length),h;for(h=0;h<f;++h)g.push(sb(b[h],d[h]));for(;h<c;++h)a[h]=b[h];for(;h<e;++h)a[h]=d[h];return function(b){for(h=0;h<f;++h)a[h]=g[h](b);return a}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,g=d*b;return 4*(.5>b?g:3*(b-d)+g-.75)}function gh(b){return 1-
Math.cos(b*Ca)}function hh(b){return Math.pow(2,10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(g){return Math.round(b+d*g)}}function jf(b){var d=[b.a,b.b],g=[b.c,b.d],a=kf(d),c=d[0]*g[0]+d[1]*g[1],e=-c;g[0]+=e*d[0];g[1]+=e*d[1];e=kf(g)||0;d[0]*g[1]<g[0]*d[1]&&(d[0]*=-1,d[1]*=-1,a*=-1,c*=-1);this.rotate=(a?
Math.atan2(d[1],d[0]):Math.atan2(-g[0],g[1]))*Ba;this.translate=[b.e,b.f];this.scale=[a,e];this.skew=e?Math.atan2(c,e)*Ba:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function Eb(b){return b.length?b.pop()+",":""}function kh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push("translate(",null,",",null,")"),a.push({i:g-4,x:$a(b[0],d[0])},{i:g-2,x:$a(b[1],d[1])})):(d[0]||d[1])&&g.push("translate("+d+")")}function lh(b,d,g,a){b!==d?(180<b-d?d+=360:180<d-b&&(b+=360),a.push({i:g.push(Eb(g)+
"rotate(",null,")")-2,x:$a(b,d)})):d&&g.push(Eb(g)+"rotate("+d+")")}function mh(b,d,g,a){b!==d?a.push({i:g.push(Eb(g)+"skewX(",null,")")-2,x:$a(b,d)}):d&&g.push(Eb(g)+"skewX("+d+")")}function nh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push(Eb(g)+"scale(",null,",",null,")"),a.push({i:g-4,x:$a(b[0],d[0])},{i:g-2,x:$a(b[1],d[1])})):1===d[0]&&1===d[1]||g.push(Eb(g)+"scale("+d+")")}function lf(b,d){var g=[],a=[];b=y.transform(b);d=y.transform(d);kh(b.translate,d.translate,g,a);lh(b.rotate,d.rotate,g,a);
mh(b.skew,d.skew,g,a);nh(b.scale,d.scale,g,a);b=d=null;return function(b){for(var d=-1,c=a.length,p;++d<c;)g[(p=a[d]).i]=p.x(b);return g.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(g){return(g-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(g){return Math.max(0,Math.min(1,(g-b)/d))}}function qh(b){var d=b.source;b=b.target;var g=b;if(d===g)var a=d;else{a=mf(d);for(var g=mf(g),c=a.pop(),e=g.pop(),f=null;c===e;)f=c,c=a.pop(),e=g.pop();a=f}for(g=[d];d!==a;)d=d.parent,g.push(d);
for(d=g.length;b!==a;)g.splice(d,0,b),b=b.parent;return g}function mf(b){for(var d=[],g=b.parent;null!=g;)d.push(b),b=g,g=g.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,g){var a=0,c=0;b.charge=0;if(!b.leaf)for(var e=b.nodes,f=e.length,h=-1,n;++h<f;)n=e[h],null!=n&&(nf(n,d,g),b.charge+=n.charge,a+=n.charge*n.cx,c+=n.charge*n.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=
Math.random()-.5),d*=g[b.point.index],b.charge+=b.pointCharge=d,a+=d*b.point.x,c+=d*b.point.y);b.cx=a/b.charge;b.cy=c/b.charge}function Ub(b,d){y.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Vb(b,d){for(var g,a,c=[b];null!=(b=c.pop());)if(d(b),(g=b.children)&&(a=g.length))for(;0<=--a;)c.push(g[a])}function Wa(b,d){for(var g,a,c=[b],e=[];null!=(b=c.pop());)if(e.push(b),(g=b.children)&&(a=g.length))for(var f=-1;++f<a;)c.push(g[f]);for(;null!=(b=e.pop());)d(b)}function wh(b){return b.children}
function xh(b){return b.value}function yh(b,d){return d.value-b.value}function vh(b){return y.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,g){b.y0=d;b.y=g}function Bd(b){return y.range(b.length)}function Cd(b){var d=-1;b=b[0].length;for(var g=[];++d<b;)g[d]=0;return g}function Ch(b){for(var d=1,g=0,a=b[0][1],c,e=b.length;d<e;++d)(c=b[d][1])>a&&(g=d,a=c);return g}function Dh(b){return b.reduce(Eh,
0)}function Eh(b,d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var g=-1,a=+b[0],c=(b[1]-a)/d,e=[];++g<=d;)e[g]=c*g+a;return e}function Gh(b){return[y.min(b),y.max(b)]}function Hh(b,d){return b.value-d.value}function Dd(b,d){var g=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=g;g._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}function qf(b,d){var g=d.x-b.x,a=d.y-b.y,c=b.r+d.r;return.999*c*c>g*g+a*a}function rf(b){function d(b){a=
Math.min(b.x-b.r,a);c=Math.max(b.x+b.r,c);e=Math.min(b.y-b.r,e);f=Math.max(b.y+b.r,f)}if((g=b.children)&&(k=g.length)){var g,a=Infinity,c=-Infinity,e=Infinity,f=-Infinity,h,n,l,k;g.forEach(Ih);var m=g[0];m.x=-m.r;m.y=0;d(m);if(1<k){var w=g[1];w.x=w.r;w.y=0;d(w);if(2<k){var t=g[2];sf(m,w,t);d(t);Dd(m,t);m._pack_prev=t;Dd(t,w);w=m._pack_next;for(h=3;h<k;h++){sf(m,w,t=g[h]);var q=0,u=1,z=1;for(n=w._pack_next;n!==w;n=n._pack_next,u++)if(qf(n,t)){q=1;break}if(1==q)for(l=m._pack_prev;l!==n._pack_prev&&
!qf(l,t);l=l._pack_prev,z++);q?(u<z||u==z&&w.r<m.r?pf(m,w=n):pf(m=l,w),h--):(Dd(m,t),w=t,d(t))}}}m=(a+c)/2;w=(e+f)/2;for(h=n=0;h<k;h++)t=g[h],t.x-=m,t.y-=w,n=Math.max(n,t.r+Math.sqrt(t.x*t.x+t.y*t.y));b.r=n;g.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,g,a){var c=b.children;b.x=d+=a*b.x;b.y=g+=a*b.y;b.r*=a;if(c){b=-1;for(var p=c.length;++b<p;)tf(c[b],d,g,a)}}function sf(b,d,g){var a=b.r+g.r,c=d.x-b.x,e=d.y-b.y;if(a&&
(c||e)){var f=d.r+g.r,h=c*c+e*e,f=f*f,a=a*a;d=.5+(a-f)/(2*h);f=Math.sqrt(Math.max(0,2*f*(a+h)-(a-=h)*a-f*f))/(2*h);g.x=b.x+d*c+f*e;g.y=b.y+d*e-f*c}else g.x=b.x+a,g.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ed(b){var d=b.children;return d.length?d[0]:b.t}function Fd(b){var d=b.children,g;return(g=d.length)?d[g-1]:b.t}function Kh(b){return 1+y.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,g){return b+g.x},0)/b.length}function vf(b){var d=b.children;return d&&
d.length?vf(d[0]):b}function wf(b){var d=b.children,g;return d&&(g=d.length)?wf(d[g-1]):b}function Gd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var g=b.x+d[3],a=b.y+d[0],c=b.dx-d[1]-d[3],e=b.dy-d[0]-d[2];0>c&&(g+=c/2,c=0);0>e&&(a+=e/2,e=0);return{x:g,y:a,dx:c,dy:e}}function Fb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function zc(b){return b.rangeExtent?b.rangeExtent():Fb(b.range())}function Mh(b,d,g,a){var c=g(b[0],b[1]),p=a(d[0],d[1]);return function(b){return p(c(b))}}
function Ac(b,d){var g=0,a=b.length-1,c=b[g],e=b[a];if(e<c){var f=g;g=a;a=f;f=c;c=e;e=f}b[g]=d.floor(c);b[a]=d.ceil(e);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,g,a){var c=[],p=[],e=0,f=Math.min(b.length,d.length)-1;b[f]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++e<=f;)c.push(g(b[e-1],b[e])),p.push(a(d[e-1],d[e]));return function(d){var g=y.bisect(b,d,1,f)-1;return p[g](c[g](d))}}function zf(b,
d,g,a){function c(){var c=2<Math.min(b.length,d.length)?Oh:Mh,v=a?ph:oh;e=c(b,d,v,g);f=c(d,b,v,sb);return p}function p(b){return e(b)}var e,f;p.invert=function(b){return f(b)};p.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return c()};p.range=function(b){if(!arguments.length)return d;d=b;return c()};p.rangeRound=function(b){return p.range(b).interpolate(hf)};p.clamp=function(b){if(!arguments.length)return a;a=b;return c()};p.interpolate=function(b){if(!arguments.length)return g;
g=b;return c()};p.ticks=function(d){return y.range.apply(y,hb(b,d))};p.tickFormat=function(d,g){return Hd(b,d,g)};p.nice=function(d){Af(b,d);return c()};p.copy=function(){return zf(b,d,g,a)};return c()}function Id(b,d){return y.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){Ac(b,yf(hb(b,d)[2]));Ac(b,yf(hb(b,d)[2]));return b}function hb(b,d){null==d&&(d=10);var g=Fb(b),a=g[1]-g[0],c=Math.pow(10,Math.floor(Math.log(a/d)/Math.LN10)),a=d/a*c;.15>=a?c*=10:.35>=a?c*=5:.75>=a&&(c*=
2);g[0]=Math.ceil(g[0]/c)*c;g[1]=Math.floor(g[1]/c)*c+.5*c;g[2]=c;return g}function Hd(b,d,g){b=hb(b,d);if(g){d=je.exec(g);d.shift();if("s"===d[8]){var a=y.formatPrefix(Math.max(ja(b[0]),ja(b[1])));d[7]||(d[7]="."+Bc(a.scale(b[2])));d[8]="f";g=y.format(d.join(""));return function(b){return g(a.scale(b))+a.symbol}}d[7]||(d[7]="."+Ph(d[8],b));g=d.join("")}else g=",."+Bc(b[2])+"f";return y.format(g)}function Bc(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Ph(b,d){var g=Bc(d[2]);return b in
Qh?Math.abs(g-Bc(Math.max(ja(d[0]),ja(d[1]))))+ +("e"!==b):g-2*("%"===b)}function Bf(b,d,g,a){function c(b){return(g?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function e(b){return g?Math.pow(d,b):-Math.pow(d,-b)}function p(d){return b(c(d))}p.invert=function(d){return e(b.invert(d))};p.domain=function(d){if(!arguments.length)return a;g=0<=d[0];b.domain((a=d.map(Number)).map(c));return p};p.base=function(g){if(!arguments.length)return d;d=+g;b.domain(a.map(c));return p};p.nice=function(){var d=
Ac(a.map(c),g?Math:Rh);b.domain(d);a=d.map(e);return p};p.ticks=function(){var b=Fb(a),p=[],f=b[0],b=b[1],v=Math.floor(c(f)),h=Math.ceil(c(b)),n=d%1?2:d;if(isFinite(h-v)){if(g){for(;v<h;v++)for(var P=1;P<n;P++)p.push(e(v)*P);p.push(e(v))}else for(p.push(e(v));v++<h;)for(P=n-1;0<P;P--)p.push(e(v)*P);for(v=0;p[v]<f;v++);for(h=p.length;p[h-1]>b;h--);p=p.slice(v,h)}return p};p.tickFormat=function(b,g){if(!arguments.length)return Cf;2>arguments.length?g=Cf:"function"!==typeof g&&(g=y.format(g));var a=
Math.max(1,d*b/p.ticks().length);return function(b){var p=b/e(Math.round(c(b)));p*d<d-.5&&(p*=d);return p<=a?g(b):""}};p.copy=function(){return Bf(b.copy(),d,g,a)};return Id(p,b)}function Df(b,d,g){function a(d){return b(c(d))}var c=Cc(d),e=Cc(1/d);a.invert=function(d){return e(b.invert(d))};a.domain=function(d){if(!arguments.length)return g;b.domain((g=d.map(Number)).map(c));return a};a.ticks=function(b){return y.range.apply(y,hb(g,b))};a.tickFormat=function(b,d){return Hd(g,b,d)};a.nice=function(b){return a.domain(Af(g,
b))};a.exponent=function(p){if(!arguments.length)return d;c=Cc(d=p);e=Cc(1/d);b.domain(g.map(c));return a};a.copy=function(){return Df(b.copy(),d,g)};return Id(a,b)}function Cc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function g(g){return e[((c.get(g)||("range"===d.t?c.set(g,b.push(g)):NaN))-1)%e.length]}function a(d,g){return y.range(b.length).map(function(b){return d+g*b})}var c,e,f;g.domain=function(a){if(!arguments.length)return b;b=[];c=new q;for(var e=
-1,p=a.length,f;++e<p;)c.has(f=a[e])||c.set(f,b.push(f));return g[d.t].apply(g,d.a)};g.range=function(b){if(!arguments.length)return e;e=b;f=0;d={t:"range",a:arguments};return g};g.rangePoints=function(c,p){2>arguments.length&&(p=0);var v=c[0],h=c[1],h=2>b.length?(v=(v+h)/2,0):(h-v)/(b.length-1+p);e=a(v+h*p/2,h);f=0;d={t:"rangePoints",a:arguments};return g};g.rangeRoundPoints=function(c,p){2>arguments.length&&(p=0);var v=c[0],h=c[1],n=2>b.length?(v=h=Math.round((v+h)/2),0):(h-v)/(b.length-1+p)|0;
e=a(v+Math.round(n*p/2+(h-v-(b.length-1+p)*n)/2),n);f=0;d={t:"rangeRoundPoints",a:arguments};return g};g.rangeBands=function(c,p,v){2>arguments.length&&(p=0);3>arguments.length&&(v=p);var h=c[1]<c[0],n=c[h-0],P=(c[1-h]-n)/(b.length-p+2*v);e=a(n+P*v,P);h&&e.reverse();f=P*(1-p);d={t:"rangeBands",a:arguments};return g};g.rangeRoundBands=function(c,p,v){2>arguments.length&&(p=0);3>arguments.length&&(v=p);var h=c[1]<c[0],n=c[h-0],P=c[1-h],l=Math.floor((P-n)/(b.length-p+2*v));e=a(n+Math.round((P-n-(b.length-
p)*l)/2),l);h&&e.reverse();f=Math.round(l*(1-p));d={t:"rangeRoundBands",a:arguments};return g};g.rangeBand=function(){return f};g.rangeExtent=function(){return Fb(d.a[0])};g.copy=function(){return Ef(b,d)};return g.domain(b)}function Ff(b,d){function g(){var g=0,a=d.length;for(v=[];++g<a;)v[g-1]=y.quantile(b,g/a);return c}function c(b){if(!isNaN(b=+b))return d[y.bisect(v,b)]}var v;c.domain=function(d){if(!arguments.length)return b;b=d.map(e).filter(f).sort(a);return g()};c.range=function(b){if(!arguments.length)return d;
d=b;return g()};c.quantiles=function(){return v};c.invertExtent=function(g){g=d.indexOf(g);return 0>g?[NaN,NaN]:[0<g?v[g-1]:b[0],g<v.length?v[g]:b[b.length-1]]};c.copy=function(){return Ff(b,d)};return g()}function Gf(b,d,g){function a(d){return g[Math.max(0,Math.min(f,Math.floor(e*(d-b))))]}function c(){e=g.length/(d-b);f=g.length-1;return a}var e,f;a.domain=function(g){if(!arguments.length)return[b,d];b=+g[0];d=+g[g.length-1];return c()};a.range=function(b){if(!arguments.length)return g;g=b;return c()};
a.invertExtent=function(d){d=g.indexOf(d);d=0>d?NaN:d/e+b;return[d,d+1/e]};a.copy=function(){return Gf(b,d,g)};return c()}function Hf(b,d){function g(g){if(g<=g)return d[y.bisect(b,g)]}g.domain=function(d){if(!arguments.length)return b;b=d;return g};g.range=function(b){if(!arguments.length)return d;d=b;return g};g.invertExtent=function(g){g=d.indexOf(g);return[b[g-1],b[g]]};g.copy=function(){return Hf(b,d)};return g}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(g){if(!arguments.length)return b;
b=g.map(d);return d};d.ticks=function(d){return y.range.apply(y,hb(b,d))};d.tickFormat=function(d,a){return Hd(b,d,a)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function Dc(b,d,g,a){return 0<(b-g)*d-(d-a)*b?0:1}function Ec(b,d,g,a,c){var e=b[0]-d[0],p=b[1]-d[1];c=(c?a:-a)/Math.sqrt(e*e+p*p);var p=c*p,e=
-c*e,f=b[0]+p,v=b[1]+e,h=d[0]+p,n=d[1]+e;b=(f+h)/2;d=(v+n)/2;c=h-f;var l=n-v,k=c*c+l*l;a=g-a;var n=f*n-h*v,m=(0>l?-1:1)*Math.sqrt(Math.max(0,a*a*k-n*n)),f=(n*l-c*m)/k,v=(-n*c-l*m)/k,h=(n*l+c*m)/k;c=(-n*c+l*m)/k;l=f-b;k=v-d;b=h-b;d=c-d;l*l+k*k>b*b+d*d&&(f=h,v=c);return[[f-p,v-e],[f*g/a,v*g/a]]}function Lf(b){function d(d){function p(){f.push("M",e(b(v),h))}for(var f=[],v=[],n=-1,l=d.length,P,k=wa(g),m=wa(a);++n<l;)c.call(this,P=d[n],n)?v.push([+k.call(this,P,n),+m.call(this,P,n)]):v.length&&(p(),v=
[]);v.length&&p();return f.length?f.join(""):null}var g=zb,a=Ob,c=Lb,e=Ta,f=e.key,h=.7;d.x=function(b){if(!arguments.length)return g;g=b;return d};d.y=function(b){if(!arguments.length)return a;a=b;return d};d.defined=function(b){if(!arguments.length)return c;c=b;return d};d.interpolate=function(b){if(!arguments.length)return f;f="function"===typeof b?e=b:(e=Jd.get(b)||Ta).key;return d};d.tension=function(b){if(!arguments.length)return h;h=b;return d};return d}function Ta(b){return 1<b.length?b.join("L"):
b+"Z"}function Mf(b){return b.join("L")+"Z"}function Kd(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("V",(a=b[d])[1],"H",a[0]);return c.join("")}function Ld(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("H",(a=b[d])[0],"V",a[1]);return c.join("")}function Fc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Ta(b);var g=b.length!=d.length,a="",c=b[0],e=b[1],f=d[0],h=f,n=1;g&&(a+="Q"+(e[0]-2*f[0]/3)+","+(e[1]-2*f[1]/3)+","+e[0]+","+e[1],c=b[1],
n=2);if(1<d.length)for(h=d[1],e=b[n],n++,a+="C"+(c[0]+f[0])+","+(c[1]+f[1])+","+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1],c=2;c<d.length;c++,n++)e=b[n],h=d[c],a+="S"+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1];g&&(g=b[n],a+="Q"+(e[0]+2*h[0]/3)+","+(e[1]+2*h[1]/3)+","+g[0]+","+g[1]);return a}function Md(b,d){for(var g=[],a=(1-d)/2,c,e=b[0],f=b[1],h=1,n=b.length;++h<n;)c=e,e=f,f=b[h],g.push([a*(f[0]-c[0]),a*(f[1]-c[1])]);return g}function Nf(b){if(3>b.length)return Ta(b);var d=1,g=b.length,a=
b[0],c=a[0],e=a[1],f=[c,c,c,(a=b[1])[0]],h=[e,e,e,a[1]],c=[c,",",e,"L",Qa(ib,f),",",Qa(ib,h)];for(b.push(b[g-1]);++d<=g;)a=b[d],f.shift(),f.push(a[0]),h.shift(),h.push(a[1]),Nd(c,f,h);b.pop();c.push("L",a);return c.join("")}function Qa(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Nd(b,d,g){b.push("C",Qa(Of,d),",",Qa(Of,g),",",Qa(Pf,d),",",Qa(Pf,g),",",Qa(ib,d),",",Qa(ib,g))}function Od(b,d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,g=-1,a=b.length,c,e;++g<a;)d=b[g],c=
d[0],e=d[1]-Ca,d[0]=c*Math.cos(e),d[1]=c*Math.sin(e);return b}function Rf(b){function d(d){function p(){v.push("M",h(b(P),m),k,l(b(n.reverse()),m),"Z")}for(var v=[],n=[],P=[],w=-1,t=d.length,T,q=wa(g),U=wa(c),u=g===a?function(){return z}:wa(a),ga=c===e?function(){return I}:wa(e),z,I;++w<t;)f.call(this,T=d[w],w)?(n.push([z=+q.call(this,T,w),I=+U.call(this,T,w)]),P.push([+u.call(this,T,w),+ga.call(this,T,w)])):n.length&&(p(),n=[],P=[]);n.length&&p();return v.length?v.join(""):null}var g=zb,a=zb,c=0,
e=Ob,f=Lb,h=Ta,n=h.key,l=h,k="L",m=.7;d.x=function(b){if(!arguments.length)return a;g=a=b;return d};d.x0=function(b){if(!arguments.length)return g;g=b;return d};d.x1=function(b){if(!arguments.length)return a;a=b;return d};d.y=function(b){if(!arguments.length)return e;c=e=b;return d};d.y0=function(b){if(!arguments.length)return c;c=b;return d};d.y1=function(b){if(!arguments.length)return e;e=b;return d};d.defined=function(b){if(!arguments.length)return f;f=b;return d};d.interpolate=function(b){if(!arguments.length)return n;
n="function"===typeof b?h=b:(h=Jd.get(b)||Ta).key;l=h.reverse||h;k=h.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return m;m=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),g=d[0],d=d[1]-Ca;return[g*Math.cos(d),g*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}function Tf(b){b=Math.sqrt(b/ha);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+
"Z"}function Uf(b){return function(){var d,g,a;(d=this[b])&&(a=d[g=d.active])&&(a.timer.c=null,a.timer.t=NaN,--d.count?delete d[g]:delete this[b],d.active+=.5,a.event&&a.event.interrupt.call(this,this.__data__,a.index))}}function Wb(b,d,g){Yb(b,Ha);b.namespace=d;b.id=g;return b}function Pd(b,d,g,a){var c=b.id,e=b.namespace;return W(b,"function"===typeof g?function(b,p,f){b[e][c].tween.set(d,a(g.call(b,b.__data__,p,f)))}:(g=a(g),function(b){b[e][c].tween.set(d,g)}))}function $h(b){null==b&&(b="");
return function(){this.textContent=b}}function Qd(b){return null==b?"__transition__":"__transition_"+b+"__"}function Gc(b,d,g,a,c){function e(b){var d=h.delay;w.t=d+m;if(d<=b)return p(b-d);w.c=p}function p(g){var c=v.active,e=v[c];e&&(e.timer.c=null,e.timer.t=NaN,--v.count,delete v[c],e.event&&e.event.interrupt.call(b,b.__data__,e.index));for(var p in v)+p<a&&(c=v[p],c.timer.c=null,c.timer.t=NaN,--v.count,delete v[p]);w.c=f;dc(function(){w.c&&f(g||1)&&(w.c=null,w.t=NaN);return 1},0,m);v.active=a;
h.event&&h.event.start.call(b,b.__data__,d);k=[];h.tween.forEach(function(g,a){(a=a.call(b,b.__data__,d))&&k.push(a)});l=h.ease;n=h.duration}function f(c){c/=n;for(var e=l(c),p=k.length;0<p;)k[--p].call(b,e);if(1<=c)return h.event&&h.event.end.call(b,b.__data__,d),--v.count?delete v[a]:delete b[g],1}var v=b[g]||(b[g]={active:0,count:0}),h=v[a],n,l,k;if(!h){var m=c.time;var w=dc(e,0,m);h=v[a]={tween:new q,time:m,timer:w,delay:c.delay,duration:c.duration,ease:c.ease,index:d};c=null;++v.count}}function ai(b,
d,g){b.attr("transform",function(b){var a=d(b);return"translate("+(isFinite(a)?a:g(b))+",0)"})}function bi(b,d,g){b.attr("transform",function(b){var a=d(b);return"translate(0,"+(isFinite(a)?a:g(b))+")"})}function Rd(b){return b.toISOString()}function Sd(b,d,g){function a(d){return b(d)}function c(b,g){var a=(b[1]-b[0])/g,c=y.bisect(Hc,a);return c==Hc.length?[d.year,hb(b.map(function(b){return b/31536E6}),g)[2]]:c?d[a/Hc[c-1]<Hc[c]/a?c-1:c]:[ci,hb(b,g)[2]]}a.invert=function(d){return tb(b.invert(d))};
a.domain=function(d){if(!arguments.length)return b.domain().map(tb);b.domain(d);return a};a.nice=function(b,d){function g(g){return!isNaN(g)&&!b.range(g,tb(+g+1),d).length}var e=a.domain(),p=Fb(e);if(p=null==b?c(p,10):"number"===typeof b&&c(p,b))b=p[0],d=p[1];return a.domain(Ac(e,1<d?{floor:function(d){for(;g(d=b.floor(d));)d=tb(d-1);return d},ceil:function(d){for(;g(d=b.ceil(d));)d=tb(+d+1);return d}}:b))};a.ticks=function(b,d){var g=Fb(a.domain()),e=null==b?c(g,10):"number"===typeof b?c(g,b):!b.range&&
[{range:b},d];e&&(b=e[0],d=e[1]);return b.range(g[0],tb(+g[1]+1),1>d?1:d)};a.tickFormat=function(){return g};a.copy=function(){return Sd(b.copy(),d,g)};return Id(a,b)}function tb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Ma.createRange();d.selectNode(Ma.body);return d.createContextualFragment(b.responseText)}var y={version:"3.5.17"},Vf=[].slice,Ua=function(b){return Vf.call(b)},Ma=this.document;if(Ma)try{Ua(Ma.documentElement.childNodes)[0].nodeType}catch(b){Ua=
function(b){for(var d=b.length,a=Array(d);d--;)a[d]=b[d];return a}}Date.now||(Date.now=function(){return+new Date});if(Ma)try{Ma.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Ic=this.Element.prototype,fi=Ic.setAttribute,gi=Ic.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Ic.setAttribute=function(b,g){fi.call(this,b,g+"")};Ic.setAttributeNS=function(b,g,a){gi.call(this,b,g,a+"")};Wf.setProperty=function(b,g,a){hi.call(this,b,g+"",a)}}y.ascending=a;y.descending=
function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};y.min=function(b,d){var g=-1,a=b.length,c;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var e=c;break}for(;++g<a;)null!=(c=b[g])&&e>c&&(e=c)}else{for(;++g<a;)if(null!=(c=d.call(b,b[g],g))&&c>=c){e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&e>c&&(e=c)}return e};y.max=function(b,d){var g=-1,a=b.length,c;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var e=c;break}for(;++g<a;)null!=(c=b[g])&&c>e&&(e=c)}else{for(;++g<a;)if(null!=
(c=d.call(b,b[g],g))&&c>=c){e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&c>e&&(e=c)}return e};y.extent=function(b,d){var g=-1,a=b.length,c,e;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var f=e=c;break}for(;++g<a;)null!=(c=b[g])&&(f>c&&(f=c),e<c&&(e=c))}else{for(;++g<a;)if(null!=(c=d.call(b,b[g],g))&&c>=c){f=e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&(f>c&&(f=c),e<c&&(e=c))}return[f,e]};y.sum=function(b,d){var g=0,a=b.length,c,e=-1;if(1===arguments.length)for(;++e<a;)isNaN(c=
+b[e])||(g+=c);else for(;++e<a;)isNaN(c=+d.call(b,b[e],e))||(g+=c);return g};y.mean=function(b,d){var g=0,a=b.length,c,f=-1,h=a;if(1===arguments.length)for(;++f<a;)isNaN(c=e(b[f]))?--h:g+=c;else for(;++f<a;)isNaN(c=e(d.call(b,b[f],f)))?--h:g+=c;if(h)return g/h};y.quantile=function(b,d){var g=(b.length-1)*d+1,a=Math.floor(g),c=+b[a-1];return(g-=a)?c+g*(b[a]-c):c};y.median=function(b,d){var g=[],c=b.length,f,h=-1;if(1===arguments.length)for(;++h<c;)isNaN(f=e(b[h]))||g.push(f);else for(;++h<c;)isNaN(f=
e(d.call(b,b[h],h)))||g.push(f);if(g.length)return y.quantile(g.sort(a),.5)};y.variance=function(b,d){var a=b.length,c=0,f,h=0,n=-1,l=0;if(1===arguments.length)for(;++n<a;){if(!isNaN(f=e(b[n]))){var k=f-c;c+=k/++l;h+=k*(f-c)}}else for(;++n<a;)isNaN(f=e(d.call(b,b[n],n)))||(k=f-c,c+=k/++l,h+=k*(f-c));if(1<l)return h/(l-1)};y.deviation=function(){var b=y.variance.apply(this,arguments);return b?Math.sqrt(b):b};var Xf=l(a);y.bisectLeft=Xf.left;y.bisect=y.bisectRight=Xf.right;y.bisector=function(b){return l(1===
b.length?function(d,g){return a(b(d),g)}:b)};y.shuffle=function(b,d,a){3>(g=arguments.length)&&(a=b.length,2>g&&(d=0));for(var g=a-d,c,e;g;)e=Math.random()*g--|0,c=b[g+d],b[g+d]=b[e+d],b[e+d]=c;return b};y.permute=function(b,d){for(var a=d.length,c=Array(a);a--;)c[a]=b[d[a]];return c};y.pairs=function(b){for(var d=0,a=b.length-1,c=b[0],e=Array(0>a?0:a);d<a;)e[d]=[c,c=b[++d]];return e};y.transpose=function(b){if(!(f=b.length))return[];for(var d=-1,a=y.min(b,h),c=Array(a);++d<a;)for(var e=-1,f,n=c[d]=
Array(f);++e<f;)n[e]=b[e][d];return c};y.zip=function(){return y.transpose(arguments)};y.keys=function(b){var d=[],a;for(a in b)d.push(a);return d};y.values=function(b){var d=[],a;for(a in b)d.push(b[a]);return d};y.entries=function(b){var d=[],a;for(a in b)d.push({key:a,value:b[a]});return d};y.merge=function(b){var d=b.length;var a=-1;for(var c=0,e,f;++a<d;)c+=b[a].length;for(e=Array(c);0<=--d;)for(f=b[d],a=f.length;0<=--a;)e[--c]=f[a];return e};var ja=Math.abs;y.range=function(b,d,a){3>arguments.length&&
(a=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/a)throw Error("infinite range");var g=[];var c=ja(a);for(var e=1;c*e%1;)e*=10;c=e;var e=-1,f;b*=c;d*=c;a*=c;if(0>a)for(;(f=b+a*++e)>d;)g.push(f/c);else for(;(f=b+a*++e)<d;)g.push(f/c);return g};y.map=function(b,d){var a=new q;if(b instanceof q)b.forEach(function(b,d){a.set(b,d)});else if(Array.isArray(b)){var c=-1,e=b.length,f;if(1===arguments.length)for(;++c<e;)a.set(c,b[c]);else for(;++c<e;)a.set(d.call(b,f=b[c],c),f)}else for(c in b)a.set(c,
b[c]);return a};m(q,{has:x,get:function(b){return this._[k(b)]},set:function(b,d){return this._[k(b)]=d},remove:A,keys:C,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:r(d),value:this._[d]});return b},size:E,empty:F,forEach:function(b){for(var d in this._)b.call(this,r(d),this._[d])}});y.nest=function(){function b(d,g,e){if(e>=c.length)return h?h.call(a,g):f?g.sort(f):g;for(var p=-1,v=g.length,n=c[e++],l,k,m=new q,
w;++p<v;)(w=m.get(l=n(k=g[p])))?w.push(k):m.set(l,[k]);d?(k=d(),g=function(a,g){k.set(a,b(d,g,e))}):(k={},g=function(a,g){k[a]=b(d,g,e)});m.forEach(g);return k}function d(b,a){if(a>=c.length)return b;var g=[],f=e[a++];b.forEach(function(b,c){g.push({key:b,values:d(c,a)})});return f?g.sort(function(b,d){return f(b.key,d.key)}):g}var a={},c=[],e=[],f,h;a.map=function(d,a){return b(a,d,0)};a.entries=function(a){return d(b(y.map,a,0),0)};a.key=function(b){c.push(b);return a};a.sortKeys=function(b){e[c.length-
1]=b;return a};a.sortValues=function(b){f=b;return a};a.rollup=function(b){h=b;return a};return a};y.set=function(b){var d=new H;if(b)for(var a=0,c=b.length;a<c;++a)d.add(b[a]);return d};m(H,{has:x,add:function(b){this._[k(b+="")]=!0;return b},remove:A,values:C,size:E,empty:F,forEach:function(b){for(var d in this._)b.call(this,r(d))}});y.behavior={};y.rebind=function(b,d){for(var a=1,c=arguments.length,e;++a<c;)b[e=arguments[a]]=N(b,d,d[e]);return b};var ce="webkit ms moz Moz o O".split(" ");y.dispatch=
function(){for(var b=new z,d=-1,a=arguments.length;++d<a;)b[arguments[d]]=t(b);return b};z.prototype.on=function(b,d){var a=b.indexOf("."),c="";0<=a&&(c=b.slice(a+1),b=b.slice(0,a));if(b)return 2>arguments.length?this[b].on(c):this[b].on(c,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(c,null);return this}};y.event=null;y.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Yb={}.__proto__?function(b,d){b.__proto__=d}:
function(b,d){for(var a in d)b[a]=d[a]},Yc=function(b,d){return d.querySelector(b)},Zc=function(b,d){return d.querySelectorAll(b)},Zb=function(b,d){var a=b.matches||b[G(b,"matchesSelector")];Zb=function(b,d){return a.call(b,d)};return Zb(b,d)};"function"===typeof Sizzle&&(Yc=function(b,d){return Sizzle(b,d)[0]||null},Zc=Sizzle,Zb=Sizzle.matchesSelector);y.selection=function(){return y.select(Ma.documentElement)};var sa=y.selection.prototype=[];sa.select=function(b){var d=[],a,c,e,f;b=u(b);for(var h=
-1,n=this.length;++h<n;){d.push(a=[]);a.parentNode=(e=this[h]).parentNode;for(var l=-1,k=e.length;++l<k;)(f=e[l])?(a.push(c=b.call(f,f.__data__,l,h)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return D(d)};sa.selectAll=function(b){var d=[],a,c;b=K(b);for(var e=-1,f=this.length;++e<f;)for(var h=this[e],n=-1,l=h.length;++n<l;)if(c=h[n])d.push(a=Ua(b.call(c,c.__data__,n,e))),a.parentNode=c;return D(d)};var Td={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:Td,qualify:function(b){var d=b.indexOf(":"),a=b;0<=d&&"xmlns"!==(a=b.slice(0,d))&&(b=b.slice(d+1));return Td.hasOwnProperty(a)?{space:Td[a],local:b}:b}};sa.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node();b=y.ns.qualify(b);return b.local?a.getAttributeNS(b.space,b.local):a.getAttribute(b)}for(d in b)this.each(R(d,b[d]));return this}return this.each(R(b,d))};sa.classed=
function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node(),c=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(d=a.classList)for(;++e<c;){if(!d.contains(b[e]))return!1}else for(d=a.getAttribute("class");++e<c;)if(!M(b[e]).test(d))return!1;return!0}for(d in b)this.each(n(d,b[d]));return this}return this.each(n(b,d))};sa.style=function(b,d,a){var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.each(V(a,b[a],d));return this}if(2>g)return g=this.node(),
c(g).getComputedStyle(g,null).getPropertyValue(b);a=""}return this.each(V(b,d,a))};sa.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(Z(d,b[d]));return this}return this.each(Z(b,d))};sa.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};sa.html=function(b){return arguments.length?
this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};sa.append=function(b){b=X(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};sa.insert=function(b,d){b=X(b);d=u(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};sa.remove=function(){return this.each(Y)};sa.data=
function(b,d){function a(b,a){var g,c=b.length,e=a.length,f=Math.min(c,e),p=Array(e),h=Array(e),v=Array(c),m,w;if(d){var f=new q,t=Array(c),P;for(g=-1;++g<c;)if(m=b[g])f.has(P=d.call(m,m.__data__,g))?v[g]=m:f.set(P,m),t[g]=P;for(g=-1;++g<e;)(m=f.get(P=d.call(a,w=a[g],g)))?!0!==m&&(p[g]=m,m.__data__=w):h[g]={__data__:w},f.set(P,!0);for(g=-1;++g<c;)g in t&&!0!==f.get(t[g])&&(v[g]=b[g])}else{for(g=-1;++g<f;)m=b[g],w=a[g],m?(m.__data__=w,p[g]=m):h[g]={__data__:w};for(;g<e;++g)h[g]={__data__:a[g]};for(;g<
c;++g)v[g]=b[g]}h.update=p;h.parentNode=p.parentNode=v.parentNode=b.parentNode;n.push(h);l.push(p);k.push(v)}var c=-1,e=this.length,f,h;if(!arguments.length){for(b=Array(e=(f=this[0]).length);++c<e;)if(h=f[c])b[c]=h.__data__;return b}var n=pa([]),l=D([]),k=D([]);if("function"===typeof b)for(;++c<e;)a(f=this[c],b.call(f,f.parentNode.__data__,c));else for(;++c<e;)a(f=this[c],b);l.enter=function(){return n};l.exit=function(){return k};return l};sa.datum=function(b){return arguments.length?this.property("__data__",
b):this.property("__data__")};sa.filter=function(b){var d=[],a,c,e;"function"!==typeof b&&(b=I(b));for(var f=0,h=this.length;f<h;f++){d.push(a=[]);a.parentNode=(c=this[f]).parentNode;for(var n=0,l=c.length;n<l;n++)(e=c[n])&&b.call(e,e.__data__,n,f)&&a.push(e)}return D(d)};sa.order=function(){for(var b=-1,d=this.length;++b<d;)for(var a=this[b],c=a.length-1,e=a[c],f;0<=--c;)if(f=a[c])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};sa.sort=function(b){b=S.apply(this,arguments);
for(var d=-1,a=this.length;++d<a;)this[d].sort(b);return this.order()};sa.each=function(b){return W(this,function(d,a,c){b.call(d,d.__data__,a,c)})};sa.call=function(b){var d=Ua(arguments);b.apply(d[0]=this,d);return this};sa.empty=function(){return!this.node()};sa.node=function(){for(var b=0,d=this.length;b<d;b++)for(var a=this[b],c=0,e=a.length;c<e;c++){var f=a[c];if(f)return f}return null};sa.size=function(){var b=0;W(this,function(){++b});return b};var Xa=[];y.selection.enter=pa;y.selection.enter.prototype=
Xa;Xa.append=sa.append;Xa.empty=sa.empty;Xa.node=sa.node;Xa.call=sa.call;Xa.size=sa.size;Xa.select=function(b){for(var d=[],a,c,e,f,h,n=-1,l=this.length;++n<l;){e=(f=this[n]).update;d.push(a=[]);a.parentNode=f.parentNode;for(var k=-1,m=f.length;++k<m;)(h=f[k])?(a.push(e[k]=c=b.call(f.parentNode,h.__data__,k,n)),c.__data__=h.__data__):a.push(null)}return D(d)};Xa.insert=function(b,d){2>arguments.length&&(d=ma(this));return sa.insert.call(this,b,d)};y.select=function(b){if("string"===typeof b){var d=
[Yc(b,Ma)];d.parentNode=Ma.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return D([d])};y.selectAll=function(b){"string"===typeof b?(b=Ua(Zc(b,Ma)),b.parentNode=Ma.documentElement):(b=Ua(b),b.parentNode=null);return D([b])};sa.on=function(b,d,a){var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d=!1);for(a in b)this.each(aa(a,b[a],d));return this}if(2>g)return(g=this.node()["__on"+b])&&g._;a=!1}return this.each(aa(b,d,a))};var bd=y.map({mouseenter:"mouseover",
mouseleave:"mouseout"});Ma&&bd.forEach(function(b){"on"+b in Ma&&bd.remove(b)});var jb,pg=0;y.mouse=function(b){return za(b,O())};var cd=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;y.touch=function(b,d,a){3>arguments.length&&(a=d,d=O().changedTouches);if(d)for(var g=0,c=d.length,e;g<c;++g)if((e=d[g]).identifier===a)return za(b,e)};y.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",h)}function d(b,d,g,c,f){return function(){var p=y.event.target.correspondingElement||
y.event.target,h=this.parentNode,n=a.of(this,arguments),v=0,l=b(),k=".drag"+(null==l?"":"-"+l),m=y.select(g(p)).on(c+k,function(){var b=d(h,l);if(b){var a=b[0]-t[0];var g=b[1]-t[1];v|=a|g;t=b;n({type:"drag",x:b[0]+q[0],y:b[1]+q[1],dx:a,dy:g})}}).on(f+k,function(){d(h,l)&&(m.on(c+k,null).on(f+k,null),w(v),n({type:"dragend"}))}),w=ya(p),t=d(h,l);if(e){var q=e.apply(this,arguments);q=[q.x-t[0],q.y-t[1]]}else q=[0,0];n({type:"dragstart"})}}var a=J(b,"drag","dragstart","dragend"),e=null,f=d(L,y.mouse,
c,"mousemove","mouseup"),h=d(la,y.touch,B,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return e;e=d;return b};return y.rebind(b,a,"on")};y.touches=function(b,d){2>arguments.length&&(d=O().touches);return d?Ua(d).map(function(d){var a=za(b,d);a.identifier=d.identifier;return a}):[]};var ha=Math.PI,Pa=2*ha,ji=Pa-1E-6,Ca=ha/2,ia=ha/180,Ba=180/ha,Xb=Math.SQRT2;y.interpolateZoom=function(b,d){var a=b[0],c=b[1],e=b[2],f=d[2],h=d[0]-a,n=d[1]-c,l=h*h+n*n;if(1E-12>l){var k=Math.log(f/
e)/Xb;var m=function(b){return[a+b*h,c+b*n,e*Math.exp(Xb*b*k)]}}else{var w=Math.sqrt(l);m=(f*f-e*e+4*l)/(4*e*w);var f=(f*f-e*e-4*l)/(4*f*w),t=Math.log(Math.sqrt(m*m+1)-m);k=(Math.log(Math.sqrt(f*f+1)-f)-t)/Xb;m=function(b){b*=k;var d=xa(t),g=e/(2*w),f=Xb*b+t;var p=((f=Math.exp(2*f))-1)/(f+1);var v=t,f=((v=Math.exp(v))-1/v)/2,g=g*(d*p-f);return[a+g*h,c+g*n,e*d/xa(Xb*b+t)]}}m.duration=1E3*k;return m};y.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",m).on(Ud+".zoom",t).on("dblclick.zoom",
q).on("touchstart.zoom",w)}function d(b){return[(b[0]-u.x)/u.k,(b[1]-u.y)/u.k]}function a(b){u.k=Math.max(M[0],Math.min(M[1],b))}function e(b,d){d=[d[0]*u.k+u.x,d[1]*u.k+u.y];u.x+=b[0]-d[0];u.y+=b[1]-d[1]}function f(d,g,c,f){d.__chart__={x:u.x,y:u.y,k:u.k};a(Math.pow(2,f));e(I=g,c);d=y.select(d);0<D&&(d=d.transition().duration(D));d.call(b.event)}function h(){Y&&Y.domain(W.range().map(function(b){return(b-u.x)/u.k}).map(W.invert));V&&V.domain(O.range().map(function(b){return(b-u.y)/u.k}).map(O.invert))}
function n(b){x++||b({type:"zoomstart"})}function l(b){h();b({type:"zoom",scale:u.k,translate:[u.x,u.y]})}function k(b){--x||(b({type:"zoomend"}),I=null)}function m(){var b=this,a=S.of(b,arguments),g=0,f=y.select(c(b)).on("mousemove.zoom",function(){g=1;e(y.mouse(b),p);l(a)}).on("mouseup.zoom",function(){f.on("mousemove.zoom",null).on("mouseup.zoom",null);h(g);k(a)}),p=d(y.mouse(b)),h=ya(b);Jc.call(b);n(a)}function w(){function b(){var b=y.touches(h);z=u.k;b.forEach(function(b){b.identifier in t&&
(t[b.identifier]=d(b))});return b}function g(){var d=y.event.target;y.select(d).on(I,c).on(r,p);T.push(d);d=y.event.changedTouches;for(var a=0,g=d.length;a<g;++a)t[d[a].identifier]=null;a=b();g=Date.now();1===a.length?(500>g-aa&&(d=a[0],f(h,d,t[d.identifier],Math.floor(Math.log(u.k)/Math.LN2)+1),Q()),aa=g):1<a.length&&(d=a[0],g=a[1],a=d[0]-g[0],d=d[1]-g[1],q=a*a+d*d)}function c(){var b=y.touches(h),d;Jc.call(h);for(var g=0,c=b.length;g<c;++g,d=null){var f=b[g];if(d=t[f.identifier]){if(n)break;var p=
f;var n=d}}if(d){var k=(k=f[0]-p[0])*k+(k=f[1]-p[1])*k,b=q&&Math.sqrt(k/q);p=[(p[0]+f[0])/2,(p[1]+f[1])/2];n=[(n[0]+d[0])/2,(n[1]+d[1])/2];a(b*z)}aa=null;e(p,n);l(v)}function p(){if(y.event.touches.length){for(var d=y.event.changedTouches,a=0,g=d.length;a<g;++a)delete t[d[a].identifier];for(var c in t)return void b()}y.selectAll(T).on(P,null);ga.on("mousedown.zoom",m).on("touchstart.zoom",w);J();k(v)}var h=this,v=S.of(h,arguments),t={},q=0,z,P=".zoom-"+y.event.changedTouches[0].identifier,I="touchmove"+
P,r="touchend"+P,T=[],ga=y.select(h),J=ya(h);g();n(v);ga.on("mousedown.zoom",null).on("touchstart.zoom",g)}function t(){var b=S.of(this,arguments);K?clearTimeout(K):(Jc.call(this),z=d(I=r||y.mouse(this)),n(b));K=setTimeout(function(){K=null;k(b)},50);Q();a(Math.pow(2,.002*Kc())*u.k);e(I,z);l(b)}function q(){var b=y.mouse(this),a=Math.log(u.k)/Math.LN2;f(this,b,d(b),y.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var u={x:0,y:0,k:1},z,I,r,G=[960,500],M=Yf,D=250,x=0,K,aa,S=J(b,"zoomstart","zoom","zoomend"),
W,Y,O,V;Ud||(Ud="onwheel"in Ma?(Kc=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(Kc=function(){return y.event.wheelDelta},"mousewheel"):(Kc=function(){return-y.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=S.of(this,arguments),d=u;ub?y.select(this).transition().each("start.zoom",function(){u=this.__chart__||{x:0,y:0,k:1};n(b)}).tween("zoom:zoom",function(){var a=G[0],g=G[1],c=I?I[0]:a/2,e=I?I[1]:g/2,f=y.interpolateZoom([(c-
u.x)/u.k,(e-u.y)/u.k,a/u.k],[(c-d.x)/d.k,(e-d.y)/d.k,a/d.k]);return function(d){d=f(d);var g=a/d[2];this.__chart__=u={x:c-d[0]*g,y:e-d[1]*g,k:g};l(b)}}).each("interrupt.zoom",function(){k(b)}).each("end.zoom",function(){k(b)}):(this.__chart__=u,n(b),l(b),k(b))})};b.translate=function(d){if(!arguments.length)return[u.x,u.y];u={x:+d[0],y:+d[1],k:u.k};h();return b};b.scale=function(d){if(!arguments.length)return u.k;u={x:u.x,y:u.y,k:null};a(+d);h();return b};b.scaleExtent=function(d){if(!arguments.length)return M;
M=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return r;r=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return G;G=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return D;D=+d;return b};b.x=function(d){if(!arguments.length)return Y;Y=d;W=d.copy();u={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return V;V=d;O=d.copy();u={x:0,y:0,k:1};return b};return y.rebind(b,S,"on")};var Yf=[0,Infinity],Kc,Ud;y.color=ta;
ta.prototype.toString=function(){return this.rgb()+""};y.hsl=Ia;var Vd=Ia.prototype=new ta;Vd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ia(this.h,this.s,this.l/b)};Vd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ia(this.h,this.s,b*this.l)};Vd.rgb=function(){return ua(this.h,this.s,this.l)};y.hcl=na;var Wd=na.prototype=new ta;Wd.brighter=function(b){return new na(this.h,this.c,Math.min(100,this.l+Lc*(arguments.length?b:1)))};Wd.darker=function(b){return new na(this.h,
this.c,Math.max(0,this.l-Lc*(arguments.length?b:1)))};Wd.rgb=function(){return Ga(this.h,this.c,this.l).rgb()};y.lab=oa;var Lc=18,de=.95047,ee=1,fe=1.08883,Xd=oa.prototype=new ta;Xd.brighter=function(b){return new oa(Math.min(100,this.l+Lc*(arguments.length?b:1)),this.a,this.b)};Xd.darker=function(b){return new oa(Math.max(0,this.l-Lc*(arguments.length?b:1)),this.a,this.b)};Xd.rgb=function(){return Aa(this.l,this.a,this.b)};y.rgb=Ja;var Mc=Ja.prototype=new ta;Mc.brighter=function(b){b=Math.pow(.7,
arguments.length?b:1);var d=this.r,a=this.g,c=this.b;if(!d&&!a&&!c)return new Ja(30,30,30);d&&30>d&&(d=30);a&&30>a&&(a=30);c&&30>c&&(c=30);return new Ja(Math.min(255,d/b),Math.min(255,a/b),Math.min(255,c/b))};Mc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ja(b*this.r,b*this.g,b*this.b)};Mc.hsl=function(){return ac(this.r,this.g,this.b)};Mc.toString=function(){return"#"+bb(this.r)+bb(this.g)+bb(this.b)};var cc=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cc.forEach(function(b,d){cc.set(b,new Ja(d>>16,d>>8&255,d&255))});y.functor=wa;y.xhr=ed(B);y.dsv=function(b,d){function a(b,a,g){3>arguments.length&&(g=a,a=null);var f=Ib(b,d,null==a?c:e(a),g);f.row=function(b){return arguments.length?f.response(null==(a=b)?c:e(b)):a};return f}function c(b){return a.parse(b.responseText)}function e(b){return function(d){return a.parse(d.responseText,b)}}function f(d){return d.map(h).join(b)}
function h(b){return n.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var n=new RegExp('["'+b+"\n]"),l=b.charCodeAt(0);a.parse=function(b,d){var g;return a.parseRows(b,function(b,a){if(g)return g(b,a-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");g=d?function(b,a){return d(c(b),a)}:c})};a.parseRows=function(b,d){function a(){var d;if(p>=f)return c;if(v)return v=!1,g;var a=p;if(34===b.charCodeAt(a)){for(d=a;d++<f;)if(34===b.charCodeAt(d)){if(34!==
b.charCodeAt(d+1))break;++d}p=d+2;var e=b.charCodeAt(d+1);13===e?(v=!0,10===b.charCodeAt(d+2)&&++p):10===e&&(v=!0);return b.slice(a+1,d).replace(/""/g,'"')}for(;p<f;){e=b.charCodeAt(p++);d=1;if(10===e)v=!0;else if(13===e)v=!0,10===b.charCodeAt(p)&&(++p,++d);else if(e!==l)continue;return b.slice(a,p-d)}return b.slice(a)}for(var g={},c={},e=[],f=b.length,p=0,h=0,n,v;(n=a())!==c;){for(var k=[];n!==g&&n!==c;)k.push(n),n=a();d&&null==(k=d(k,h++))||e.push(k)}return e};a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);
var g=new H,c=[];d.forEach(function(b){for(var d in b)g.has(d)||c.push(g.add(d))});return[c.map(h).join(b)].concat(d.map(function(d){return c.map(function(b){return h(d[b])}).join(b)})).join("\n")};a.formatRows=function(b){return b.map(f).join("\n")};return a};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var fc,ec,gc,hc,ge=this[G(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};y.timer=function(){dc.apply(this,arguments)};y.timer.flush=function(){he();ie()};
y.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var a=Math.pow(10,3*ja(8-d));return{scale:8<d?function(b){return b/a}:function(b){return b*a},symbol:b}});y.formatPrefix=function(b,d){var a=0;if(b=+b)0>b&&(b*=-1),d&&(b=y.round(b,fd(b,d))),a=1+Math.floor(1E-12+Math.log(b)/Math.LN10),a=Math.max(-24,Math.min(24,3*Math.floor((a-1)/3)));return ki[8+a/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
sg=y.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=y.round(b,fd(b,d))).toFixed(Math.max(0,Math.min(20,fd(b*(1+1E-15),d))))}}),ba=y.time={},Ka=Date;Ya.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ab.setUTCDate.apply(this._,
arguments)},setDay:function(){ab.setUTCDay.apply(this._,arguments)},setFullYear:function(){ab.setUTCFullYear.apply(this._,arguments)},setHours:function(){ab.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ab.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ab.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ab.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ab.setUTCSeconds.apply(this._,arguments)},setTime:function(){ab.setTime.apply(this._,arguments)}};
var ab=Date.prototype;ba.year=lb(function(b){b=ba.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});ba.years=ba.year.range;ba.years.utc=ba.year.utc.range;ba.day=lb(function(b){var d=new Ka(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});ba.days=ba.day.range;ba.days.utc=ba.day.utc.range;ba.dayOfYear=function(b){var d=ba.year(b);return Math.floor((b-
d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var a=ba[b]=lb(function(b){(b=ba.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+(a+d)%7)/7)-(a!==d)});ba[b+"s"]=a.range;ba[b+"s"].utc=a.utc.range;ba[b+"OfYear"]=function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+
(a+d)%7)/7)}});ba.week=ba.sunday;ba.weeks=ba.sunday.range;ba.weeks.utc=ba.sunday.utc.range;ba.weekOfYear=ba.sundayOfYear;var ke={"-":"",_:" ",0:"0"},Da=/^\s*\d+/,ne=/^%/;y.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});y.format=Zf.numberFormat;y.geo={};gd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Nc);oe(Nc.s,this.s,this);this.s?this.t+=Nc.t:this.s=Nc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Nc=new gd;y.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else mc(b,d)};var $f=
{Feature:function(b,d){mc(b.geometry,d)},FeatureCollection:function(b,d){for(var a=b.features,c=-1,e=a.length;++c<e;)mc(a[c].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)b=a[c],d.point(b[0],b[1],b[2])},LineString:function(b,d){hd(b.coordinates,d,0)},MultiLineString:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)hd(a[c],d,0)},Polygon:function(b,d){qe(b.coordinates,
d)},MultiPolygon:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)qe(a[c],d)},GeometryCollection:function(b,d){for(var a=b.geometries,c=-1,e=a.length;++c<e;)mc(a[c],d)}};y.geo.area=function(b){Oc=0;y.geo.stream(b,Oa);return Oc};var Oc,mb=new gd,Oa={sphere:function(){Oc+=4*ha},point:L,lineStart:L,lineEnd:L,polygonStart:function(){mb.reset();Oa.lineStart=Jg},polygonEnd:function(){var b=2*mb;Oc+=0>b?4*ha+b:b;Oa.lineStart=Oa.lineEnd=Oa.point=L}};y.geo.bounds=function(){function b(b,d){G.push(M=
[m=b,t=b]);d<w&&(w=d);d>u&&(u=d)}function d(d,a){var c=nb([d*ia,a*ia]);if(r){var g=wb(r,c);var e=[g[1],-g[0],0];e=wb(e,g);pc(e);e=qc(e);var f=d-q;g=0<f?1:-1;var h=e[0]*Ba*g,f=180<ja(f);f^(g*q<h&&h<g*d)?(e=e[1]*Ba,e>u&&(u=e)):(h=(h+360)%360-180,f^(g*q<h&&h<g*d))?(e=-e[1]*Ba,e<w&&(w=e)):(a<w&&(w=a),a>u&&(u=a));f?d<q?n(m,d)>n(m,t)&&(t=d):n(d,t)>n(m,t)&&(m=d):t>=m?(d<m&&(m=d),d>t&&(t=d)):d>q?n(m,d)>n(m,t)&&(t=d):n(d,t)>n(m,t)&&(m=d)}else b(d,a);r=c;q=d}function a(){D.point=d}function c(){M[0]=m;M[1]=
t;D.point=b;r=null}function e(b,a){if(r){var c=b-q;J+=180<ja(c)?c+(0<c?360:-360):c}else z=b,I=a;Oa.point(b,a);d(b,a)}function f(){Oa.lineStart()}function h(){e(z,I);Oa.lineEnd();1E-6<ja(J)&&(m=-(t=180));M[0]=m;M[1]=t;r=null}function n(b,d){return 0>(d-=b)?d+360:d}function l(b,d){return b[0]-d[0]}function k(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var m,w,t,u,q,z,I,r,J,G,M,D={point:b,lineStart:a,lineEnd:c,polygonStart:function(){D.point=e;D.lineStart=f;D.lineEnd=h;J=0;Oa.polygonStart()},
polygonEnd:function(){Oa.polygonEnd();D.point=b;D.lineStart=a;D.lineEnd=c;0>mb?(m=-(t=180),w=-(u=90)):1E-6<J?u=90:-1E-6>J&&(w=-90);M[0]=m;M[1]=t}};return function(b){u=t=-(m=w=Infinity);G=[];y.geo.stream(b,D);if(b=G.length){G.sort(l);for(var d=1,a=G[0],c,g=[a];d<b;++d)c=G[d],k(c[0],a)||k(c[1],a)?(n(a[0],c[1])>n(a[0],a[1])&&(a[1]=c[1]),n(c[0],a[1])>n(a[0],a[1])&&(a[0]=c[0])):g.push(a=c);var e=-Infinity,f;b=g.length-1;d=0;for(a=g[b];d<=b;a=c,++d)c=g[d],(f=n(a[1],c[0]))>e&&(e=f,m=c[0],t=a[1])}G=M=null;
return Infinity===m||Infinity===w?[[NaN,NaN],[NaN,NaN]]:[[m,w],[t,u]]}}();y.geo.centroid=function(b){Kb=sc=ob=pb=Za=cb=db=Va=xb=yb=eb=0;y.geo.stream(b,Ra);b=xb;var d=yb,a=eb,c=b*b+d*d+a*a;return 1E-12>c&&(b=cb,d=db,a=Va,1E-6>sc&&(b=ob,d=pb,a=Za),c=b*b+d*d+a*a,1E-12>c)?[NaN,NaN]:[Math.atan2(d,b)*Ba,qa(a/Math.sqrt(c))*Ba]};var Kb,sc,ob,pb,Za,cb,db,Va,xb,yb,eb,Ra={sphere:L,point:jd,lineStart:re,lineEnd:se,polygonStart:function(){Ra.lineStart=Kg},polygonEnd:function(){Ra.lineStart=re}},Ie=we(Lb,function(b){var d=
NaN,a=NaN,c=NaN,e;return{lineStart:function(){b.lineStart();e=1},point:function(g,f){var h=0<g?ha:-ha,p=ja(g-d);if(1E-6>ja(p-ha))b.point(d,a=0<(a+f)/2?Ca:-Ca),b.point(c,a),b.lineEnd(),b.lineStart(),b.point(h,a),b.point(g,a),e=0;else if(c!==h&&p>=ha){1E-6>ja(d-c)&&(d-=1E-6*c);1E-6>ja(g-h)&&(g-=1E-6*h);var p=d,n=a,v=g,l,k,m=Math.sin(p-v);a=1E-6<ja(m)?Math.atan((Math.sin(n)*(k=Math.cos(f))*Math.sin(v)-Math.sin(f)*(l=Math.cos(n))*Math.sin(p))/(l*k*m)):(n+f)/2;b.point(c,a);b.lineEnd();b.lineStart();b.point(h,
a);e=0}b.point(d=g,a=f);c=h},lineEnd:function(){b.lineEnd();d=a=NaN},clean:function(){return 2-e}}},function(b,d,a,c){null==b?(a*=Ca,c.point(-ha,a),c.point(0,a),c.point(ha,a),c.point(ha,0),c.point(ha,-a),c.point(0,-a),c.point(-ha,-a),c.point(-ha,0),c.point(-ha,a)):1E-6<ja(b[0]-d[0])?(b=b[0]<d[0]?ha:-ha,a=a*b/2,c.point(-b,a),c.point(0,a),c.point(b,a)):c.point(d[0],d[1])},[-ha,-ha/2]);y.geo.clipExtent=function(){var b,d,a,c,e,f,h={stream:function(b){e&&(e.valid=!1);e=f(b);e.valid=!0;return e},extent:function(g){if(!arguments.length)return[[b,
d],[a,c]];f=ze(b=+g[0][0],d=+g[0][1],a=+g[1][0],c=+g[1][1]);e&&(e.valid=!1,e=null);return h}};return h.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return ld(Ae)}).raw=Ae;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];e=null;(h(d,b),e)||(n(d,b),e)||l(d,b);return e}var d=y.geo.albers(),a=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,
65]),c=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(b,d){e=[b,d]}},h,n,l;b.invert=function(b){var g=d.scale(),e=d.translate(),f=(b[0]-e[0])/g,g=(b[1]-e[1])/g;return(.12<=g&&.234>g&&-.425<=f&&-.214>f?a:.166<=g&&.234>g&&-.214<=f&&-.115>f?c:d).invert(b)};b.stream=function(b){var g=d.stream(b),e=a.stream(b),f=c.stream(b);return{point:function(b,d){g.point(b,d);e.point(b,d);f.point(b,d)},sphere:function(){g.sphere();e.sphere();f.sphere()},lineStart:function(){g.lineStart();
e.lineStart();f.lineStart()},lineEnd:function(){g.lineEnd();e.lineEnd();f.lineEnd()},polygonStart:function(){g.polygonStart();e.polygonStart();f.polygonStart()},polygonEnd:function(){g.polygonEnd();e.polygonEnd();f.polygonEnd()}}};b.precision=function(g){if(!arguments.length)return d.precision();d.precision(g);a.precision(g);c.precision(g);return b};b.scale=function(g){if(!arguments.length)return d.scale();d.scale(g);a.scale(.35*g);c.scale(g);return b.translate(d.translate())};b.translate=function(g){if(!arguments.length)return d.translate();
var e=d.scale(),p=+g[0],v=+g[1];h=d.translate(g).clipExtent([[p-.455*e,v-.238*e],[p+.455*e,v+.238*e]]).stream(f).point;n=a.translate([p-.307*e,v+.201*e]).clipExtent([[p-.425*e+1E-6,v+.12*e+1E-6],[p-.214*e-1E-6,v+.234*e-1E-6]]).stream(f).point;l=c.translate([p-.205*e,v+.212*e]).clipExtent([[p-.214*e+1E-6,v+.166*e+1E-6],[p-.115*e-1E-6,v+.234*e-1E-6]]).stream(f).point;return b};return b.scale(1070)};var Yd,nd,fb={point:L,lineStart:L,lineEnd:L,polygonStart:function(){nd=0;fb.lineStart=Og},polygonEnd:function(){fb.lineStart=
fb.lineEnd=fb.point=L;Yd+=ja(nd/2)}},Pc,Qc,Rc,Sc,li={point:function(b,d){b<Pc&&(Pc=b);b>Rc&&(Rc=b);d<Qc&&(Qc=d);d>Sc&&(Sc=d)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L},Sa={point:qb,lineStart:Ce,lineEnd:De,polygonStart:function(){Sa.lineStart=Qg},polygonEnd:function(){Sa.point=qb;Sa.lineStart=Ce;Sa.lineEnd=De}};y.geo.path=function(){function b(b){b&&("function"===typeof a&&h.pointRadius(+a.apply(this,arguments)),n&&n.valid||(n=f(h)),y.geo.stream(b,n));return h.result()}function d(){n=null;
return b}var a=4.5,c,e,f,h,n;b.area=function(b){Yd=0;y.geo.stream(b,f(fb));return Yd};b.centroid=function(b){ob=pb=Za=cb=db=Va=xb=yb=eb=0;y.geo.stream(b,f(Sa));return eb?[xb/eb,yb/eb]:Va?[cb/Va,db/Va]:Za?[ob/Za,pb/Za]:[NaN,NaN]};b.bounds=function(b){Rc=Sc=-(Pc=Qc=Infinity);y.geo.stream(b,f(li));return[[Pc,Qc],[Rc,Sc]]};b.projection=function(b){if(!arguments.length)return c;f=(c=b)?b.stream||Sg(b):B;return d()};b.context=function(b){if(!arguments.length)return e;h=null==(e=b)?new Pg:new Rg(b);"function"!==
typeof a&&h.pointRadius(a);return d()};b.pointRadius=function(d){if(!arguments.length)return a;a="function"===typeof d?d:(h.pointRadius(+d),+d);return b};return b.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var a in b)d[a]=b[a];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};y.geo.projection=gb;y.geo.projectionMutator=md;(y.geo.equirectangular=function(){return gb(Mb)}).raw=Mb.invert=Mb;y.geo.rotation=function(b){function d(d){d=b(d[0]*ia,d[1]*ia);return d[0]*=Ba,d[1]*=Ba,d}b=od(b[0]%360*ia,b[1]*ia,2<b.length?b[2]*ia:0);d.invert=function(d){d=b.invert(d[0]*ia,d[1]*ia);return d[0]*=Ba,d[1]*=Ba,d};return d};Je.invert=Mb;y.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,a=od(-b[0]*
ia,-b[1]*ia,0).invert,c=[];e(null,null,1,{point:function(b,d){c.push(b=a(b,d));b[0]*=Ba;b[1]*=Ba}});return{type:"Polygon",coordinates:[c]}}var d=[0,0],a,c=6,e;b.origin=function(a){if(!arguments.length)return d;d=a;return b};b.angle=function(d){if(!arguments.length)return a;e=kd((a=+d)*ia,c*ia);return b};b.precision=function(d){if(!arguments.length)return c;e=kd(a*ia,(c=+d)*ia);return b};return b.angle(90)};y.geo.distance=function(b,d){var a=(d[0]-b[0])*ia,c=b[1]*ia,e=d[1]*ia,f=Math.cos(a),h=Math.sin(c),
c=Math.cos(c),n=Math.sin(e),e=Math.cos(e),l;return Math.atan2(Math.sqrt((l=e*Math.sin(a))*l+(l=c*n-h*e*f)*l),h*n+c*e*f)};y.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return y.range(Math.ceil(f/t)*t,e,t).map(I).concat(y.range(Math.ceil(k/u)*u,l,u).map(r)).concat(y.range(Math.ceil(c/m)*m,a,m).filter(function(b){return 1E-6<ja(b%t)}).map(q)).concat(y.range(Math.ceil(n/w)*w,h,w).filter(function(b){return 1E-6<ja(b%u)}).map(z))}var a,c,e,f,h,n,l,k,
m=10,w=m,t=90,u=360,q,z,I,r,J=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[I(f).concat(r(l).slice(1),I(e).reverse().slice(1),r(k).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[f,k],[e,l]];f=+d[0][0];e=+d[1][0];k=+d[0][1];l=+d[1][1];f>e&&(d=f,f=e,e=d);k>l&&(d=k,k=l,l=d);return b.precision(J)};
b.minorExtent=function(d){if(!arguments.length)return[[c,n],[a,h]];c=+d[0][0];a=+d[1][0];n=+d[0][1];h=+d[1][1];c>a&&(d=c,c=a,a=d);n>h&&(d=n,n=h,h=d);return b.precision(J)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[t,u];t=+d[0];u=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[m,w];m=+d[0];w=+d[1];return b};b.precision=function(d){if(!arguments.length)return J;J=+d;q=Oe(n,h,90);z=Pe(c,
a,J);I=Oe(k,l,90);r=Pe(f,e,J);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};y.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[a||d.apply(this,arguments),e||c.apply(this,arguments)]}}var d=pd,a,c=qd,e;b.distance=function(){return y.geo.distance(a||d.apply(this,arguments),e||c.apply(this,arguments))};b.source=function(c){if(!arguments.length)return d;d=c;a="function"===typeof c?null:c;return b};b.target=
function(d){if(!arguments.length)return c;c=d;e="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};y.geo.interpolate=function(b,d){return Tg(b[0]*ia,b[1]*ia,d[0]*ia,d[1]*ia)};y.geo.length=function(b){Zd=0;y.geo.stream(b,Gb);return Zd};var Zd,Gb={sphere:L,point:L,lineStart:function(){function b(b,g){var e=Math.sin(g*=ia),f=Math.cos(g),h=ja((b*=ia)-d),p=Math.cos(h);Zd+=Math.atan2(Math.sqrt((h=f*Math.sin(h))*h+(h=c*e-a*f*p)*h),a*e+c*f*p);d=b;a=e;c=f}
var d,a,c;Gb.point=function(g,e){d=g*ia;a=Math.sin(e*=ia);c=Math.cos(e);Gb.point=b};Gb.lineEnd=function(){Gb.point=Gb.lineEnd=L}},lineEnd:L,polygonStart:L,polygonEnd:L},ag=Nb(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(y.geo.azimuthalEqualArea=function(){return gb(ag)}).raw=ag;var bg=Nb(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},B);(y.geo.azimuthalEquidistant=function(){return gb(bg)}).raw=bg;(y.geo.conicConformal=function(){return ld(Qe)}).raw=Qe;(y.geo.conicEquidistant=
function(){return ld(Re)}).raw=Re;var cg=Nb(function(b){return 1/b},Math.atan);(y.geo.gnomonic=function(){return gb(cg)}).raw=cg;uc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-Ca]};(y.geo.mercator=function(){return Se(uc)}).raw=uc;var dg=Nb(function(){return 1},Math.asin);(y.geo.orthographic=function(){return gb(dg)}).raw=dg;var eg=Nb(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(y.geo.stereographic=function(){return gb(eg)}).raw=eg;rd.invert=function(b,d){return[-d,
2*Math.atan(Math.exp(b))-Ca]};(y.geo.transverseMercator=function(){var b=Se(rd),d=b.center,a=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?a([b[0],b[1],2<b.length?b[2]+90:90]):(b=a(),[b[0],b[1],b[2]-90])};return a([0,0,90])}).raw=rd;y.geom={};y.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=wa(a),g=wa(c),e,f=b.length,h=[],p=[];for(e=0;e<f;e++)h.push([+d.call(this,b[e],e),+g.call(this,b[e],e),e]);h.sort(Ug);for(e=0;e<f;e++)p.push([h[e][0],
-h[e][1]]);var d=Te(h),p=Te(p),g=p[0]===d[0],f=p[p.length-1]===d[d.length-1],n=[];for(e=d.length-1;0<=e;--e)n.push(b[h[d[e]][2]]);for(e=+g;e<p.length-f;++e)n.push(b[h[p[e]][2]]);return n}var a=zb,c=Ob;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(a=b,d):a};d.y=function(b){return arguments.length?(c=b,d):c};return d};y.geom.polygon=function(b){Yb(b,Tc);return b};var Tc=y.geom.polygon.prototype=[];Tc.area=function(){for(var b=-1,d=this.length,a,c=this[d-1],e=0;++b<d;)a=c,
c=this[b],e+=a[1]*c[0]-a[0]*c[1];return.5*e};Tc.centroid=function(b){var d=-1,a=this.length,c=0,e=0,f=this[a-1];for(arguments.length||(b=-1/(6*this.area()));++d<a;){var h=f;f=this[d];var n=h[0]*f[1]-f[0]*h[1];c+=(h[0]+f[0])*n;e+=(h[1]+f[1])*n}return[c*b,e*b]};Tc.clip=function(b){for(var d,a=Ue(b),c=-1,e=this.length-Ue(this),f,h,n=this[e-1],l,k,m;++c<e;){d=b.slice();b.length=0;l=this[c];k=d[(h=d.length-a)-1];for(f=-1;++f<h;)m=d[f],sd(m,n,l)?(sd(k,n,l)||b.push(td(k,m,n,l)),b.push(m)):sd(k,n,l)&&b.push(td(k,
m,n,l)),k=m;a&&b.push(b[0]);n=l}return b};var Db,rb,Bb,We=[],vd,Pb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,a;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);b.sort(Ze);return b.length};xc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};wd.prototype={insert:function(b,d){var a;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var c=b}else this._?
(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,c=b):(d.P=d.N=null,this._=d,c=null);d.L=d.R=null;d.U=c;d.C=!0;for(b=d;c&&c.C;){var e=c.U;c===e.L?(a=e.R)&&a.C?(c.C=a.C=!1,e.C=!0,b=e):(b===c.R&&(Rb(this,c),b=c,c=b.U),c.C=!1,e.C=!0,Sb(this,e)):(a=e.L)&&a.C?(c.C=a.C=!1,e.C=!0,b=e):(b===c.L&&(Sb(this,c),b=c,c=b.U),c.C=!1,e.C=!0,Rb(this,e));c=b.U}this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,a=b.L,c=b.R;var e=a?c?bf(c):a:c;d?d.L===b?d.L=e:d.R=e:this._=e;if(a&&c){var f=
e.C;e.C=b.C;e.L=a;a.U=e;e!==c?(d=e.U,e.U=b.U,b=e.R,d.L=b,e.R=c,c.U=e):(e.U=d,d=e,b=e.R)}else f=b.C,b=e;b&&(b.U=d);if(!f)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Rb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Sb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Rb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Sb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Rb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Sb(this,d);b=this._;
break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};y.geom.voronoi=function(b){function d(b){var d=Array(b.length),c=n[0][0],g=n[0][1],e=n[1][0],f=n[1][1];xd(a(b),n).cells.forEach(function(a,h){var n=a.edges,p=a.site;(d[h]=n.length?n.map(function(b){b=b.start();return[b.x,b.y]}):p.x>=c&&p.x<=e&&p.y>=g&&p.y<=f?[[c,f],[e,f],[e,g],[c,g]]:[]).point=b[h]});return d}function a(b){return b.map(function(b,d){return{x:1E-6*Math.round(f(b,d)/1E-6),y:1E-6*Math.round(h(b,d)/1E-6),i:d}})}var c=zb,e=Ob,f=c,h=e,n=
Uc;if(b)return d(b);d.links=function(b){return xd(a(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];xd(a(b)).cells.forEach(function(a,c){for(var g=a.site,e=a.edges.sort(Ze),f=-1,h=e.length,n,p=e[h-1].edge,p=p.l===g?p.r:p.l;++f<h;)n=p,p=e[f].edge,p=p.l===g?p.r:p.l,c<n.i&&c<p.i&&0>(g.x-p.x)*(n.y-g.y)-(g.x-n.x)*(p.y-g.y)&&d.push([b[c],b[n.i],b[p.i]])});return d};d.x=function(b){return arguments.length?(f=wa(c=
b),d):c};d.y=function(b){return arguments.length?(h=wa(e=b),d):e};d.clipExtent=function(b){if(!arguments.length)return n===Uc?null:n;n=null==b?Uc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):n===Uc?null:n&&n[1]};return d};var Uc=[[-1E6,-1E6],[1E6,1E6]];y.geom.delaunay=function(b){return y.geom.voronoi().triangles(b)};y.geom.quadtree=function(b,d,a,c,e){function g(b){function g(b,d,a,c,g,e,f,h){if(!isNaN(a)&&!isNaN(c))if(b.leaf){var n=b.x,l=b.y;if(null!=n){if(!(.01>
ja(n-a)+ja(l-c))){var k=b.point;b.x=b.y=b.point=null;p(b,k,n,l,g,e,f,h)}p(b,d,a,c,g,e,f,h)}else b.x=a,b.y=c,b.point=d}else p(b,d,a,c,g,e,f,h)}function p(b,d,a,c,e,f,h,n){var p=.5*(e+h),l=.5*(f+n),k=a>=p,m=c>=l,v=m<<1|k;b.leaf=!1;b=b.nodes[v]||(b.nodes[v]=cf());k?e=p:h=p;m?f=l:n=l;g(b,d,a,c,e,f,h,n)}var l=wa(f),k=wa(h),m;if(null!=d){var v=d;var w=a;var t=c;var u=e}else{t=u=-(v=w=Infinity);var q=[];var z=[];var I=b.length;if(n)for(m=0;m<I;++m){var r=b[m];r.x<v&&(v=r.x);r.y<w&&(w=r.y);r.x>t&&(t=r.x);
r.y>u&&(u=r.y);q.push(r.x);z.push(r.y)}else for(m=0;m<I;++m){var J=+l(r=b[m],m);r=+k(r,m);J<v&&(v=J);r<w&&(w=r);J>t&&(t=J);r>u&&(u=r);q.push(J);z.push(r)}}J=t-v;r=u-w;J>r?u=w+J:t=v+r;var M=cf();M.add=function(b){g(M,b,+l(b,++m),+k(b,m),v,w,t,u)};M.visit=function(b){Tb(b,M,v,w,t,u)};M.find=function(b){return bh(M,b[0],b[1],v,w,t,u)};m=-1;if(null==d){for(;++m<I;)g(M,b[m],q[m],z[m],v,w,t,u);--m}else b.forEach(M.add);q=z=b=r=null;return M}var f=zb,h=Ob,n;if(n=arguments.length)return f=$g,h=ah,3===n&&
(e=a,c=d,a=d=0),g(b);g.x=function(b){return arguments.length?(f=b,g):f};g.y=function(b){return arguments.length?(h=b,g):h};g.extent=function(b){if(!arguments.length)return null==d?null:[[d,a],[c,e]];null==b?d=a=c=e=null:(d=+b[0][0],a=+b[0][1],c=+b[1][0],e=+b[1][1]);return g};g.size=function(b){if(!arguments.length)return null==d?null:[c-d,e-a];null==b?d=a=c=e=null:(d=a=0,c=+b[0],e=+b[1]);return g};return g};y.interpolateRgb=yd;y.interpolateObject=df;y.interpolateNumber=$a;y.interpolateString=ef;var zd=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ad=new RegExp(zd.source,"g");y.interpolate=sb;y.interpolators=[function(b,d){var a=typeof d;return("string"===a?cc.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?yd:ef:d instanceof ta?yd:Array.isArray(d)?yc:"object"===a&&isNaN(d)?df:$a)(b,d)}];y.interpolateArray=yc;var fg=function(){return B},mi=y.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},
exp:function(){return hh},circle:function(){return ih},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var a=d/Pa*Math.asin(1/b);else b=1,a=d/4;return function(c){return 1+b*Math.pow(2,-10*c)*Math.sin((c-a)*Pa/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=y.map({"in":B,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});y.ease=function(b){var d=b.indexOf("-"),a=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):
"in",a=mi.get(a)||fg,d=ni.get(d)||B;return ch(d(a.apply(null,Vf.call(arguments,1))))};y.interpolateHcl=function(b,d){b=y.hcl(b);d=y.hcl(d);var a=b.h,c=b.c,e=b.l,f=d.h-a,h=d.c-c,n=d.l-e;isNaN(h)&&(h=0,c=isNaN(c)?d.c:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return Ga(a+f*b,c+h*b,e+n*b)+""}};y.interpolateHsl=function(b,d){b=y.hsl(b);d=y.hsl(d);var a=b.h,c=b.s,e=b.l,f=d.h-a,h=d.s-c,n=d.l-e;isNaN(h)&&(h=0,c=isNaN(c)?d.s:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<
f?f-=360:-180>f&&(f+=360);return function(b){return ua(a+f*b,c+h*b,e+n*b)+""}};y.interpolateLab=function(b,d){b=y.lab(b);d=y.lab(d);var a=b.l,c=b.a,e=b.b,f=d.l-a,h=d.a-c,n=d.b-e;return function(b){return Aa(a+f*b,c+h*b,e+n*b)+""}};y.interpolateRound=hf;y.transform=function(b){var d=Ma.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(b){if(null!=b){d.setAttribute("transform",b);var a=d.transform.baseVal.consolidate()}return new jf(a?a.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=lf;y.layout={};y.layout.bundle=function(){return function(b){for(var d=[],a=-1,c=b.length;++a<c;)d.push(qh(b[a]));return d}};y.layout.chord=function(){function b(){var b={},a=[],g=y.range(h),p=[],v,w;c=[];e=[];var t=0;for(v=-1;++v<h;){var u=0;for(w=-1;++w<h;)u+=f[v][w];a.push(u);p.push(y.range(h));t+=u}l&&g.sort(function(b,d){return l(a[b],a[d])});k&&p.forEach(function(b,
d){b.sort(function(b,a){return k(f[d][b],f[d][a])})});t=(Pa-n*h)/t;u=0;for(v=-1;++v<h;){var q=u;for(w=-1;++w<h;){var z=g[v];var r=p[z][w],I=f[z][r],J=u,M=u+=I*t;b[z+"-"+r]={index:z,subindex:r,startAngle:J,endAngle:M,value:I}}e[z]={index:z,startAngle:q,endAngle:u,value:a[z]};u+=n}for(v=-1;++v<h;)for(w=v-1;++w<h;)z=b[v+"-"+w],g=b[w+"-"+v],(z.value||g.value)&&c.push(z.value<g.value?{source:g,target:z}:{source:z,target:g});m&&d()}function d(){c.sort(function(b,d){return m((b.source.value+b.target.value)/
2,(d.source.value+d.target.value)/2)})}var a={},c,e,f,h,n=0,l,k,m;a.matrix=function(b){if(!arguments.length)return f;h=(f=b)&&f.length;c=e=null;return a};a.padding=function(b){if(!arguments.length)return n;n=b;c=e=null;return a};a.sortGroups=function(b){if(!arguments.length)return l;l=b;c=e=null;return a};a.sortSubgroups=function(b){if(!arguments.length)return k;k=b;c=null;return a};a.sortChords=function(b){if(!arguments.length)return m;m=b;c&&d();return a};a.chords=function(){c||b();return c};a.groups=
function(){e||b();return e};return a};y.layout.force=function(){function b(b){return function(d,a,c,e){if(d.point!==b){var g=d.cx-b.x;c=d.cy-b.y;e-=a;a=g*g+c*c;if(e*e/q<a)return a<t&&(a=d.charge/a,b.px-=g*a,b.py-=c*a),!0;d.point&&a&&a<t&&(a=d.pointCharge/a,b.px-=g*a,b.py-=c*a)}return!d.charge}}function d(b){b.px=y.event.x;b.py=y.event.y;a.resume()}var a={},c=y.dispatch("start","tick","end"),e,f=[1,1],h,n,l=.9,k=pi,m=qi,w=-30,t=ri,u=.1,q=.64,z=[],r=[],I,J,M;a.tick=function(){if(.005>(n*=.99))return e=
null,c.end({type:"end",alpha:n=0}),!0;var d=z.length,a=r.length,g,h;for(g=0;g<a;++g){var p=r[g];var k=p.source;var m=p.target;var v=m.x-k.x;var t=m.y-k.y;if(h=v*v+t*t)h=n*J[g]*((h=Math.sqrt(h))-I[g])/h,v*=h,t*=h,m.x-=v*(h=k.weight+m.weight?k.weight/(k.weight+m.weight):.5),m.y-=t*h,k.x+=v*(h=1-h),k.y+=t*h}if(h=n*u)if(v=f[0]/2,t=f[1]/2,g=-1,h)for(;++g<d;)p=z[g],p.x+=(v-p.x)*h,p.y+=(t-p.y)*h;if(w)for(nf(a=y.geom.quadtree(z),n,M),g=-1;++g<d;)(p=z[g]).fixed||a.visit(b(p));for(g=-1;++g<d;)p=z[g],p.fixed?
(p.x=p.px,p.y=p.py):(p.x-=(p.px-(p.px=p.x))*l,p.y-=(p.py-(p.py=p.y))*l);c.tick({type:"tick",alpha:n})};a.nodes=function(b){if(!arguments.length)return z;z=b;return a};a.links=function(b){if(!arguments.length)return r;r=b;return a};a.size=function(b){if(!arguments.length)return f;f=b;return a};a.linkDistance=function(b){if(!arguments.length)return k;k="function"===typeof b?b:+b;return a};a.distance=a.linkDistance;a.linkStrength=function(b){if(!arguments.length)return m;m="function"===typeof b?b:+b;
return a};a.friction=function(b){if(!arguments.length)return l;l=+b;return a};a.charge=function(b){if(!arguments.length)return w;w="function"===typeof b?b:+b;return a};a.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(t);t=b*b;return a};a.gravity=function(b){if(!arguments.length)return u;u=+b;return a};a.theta=function(b){if(!arguments.length)return Math.sqrt(q);q=b*b;return a};a.alpha=function(b){if(!arguments.length)return n;b=+b;n?0<b?n=b:(e.c=null,e.t=NaN,e=null,c.end({type:"end",
alpha:n=0})):0<b&&(c.start({type:"start",alpha:n=b}),e=dc(a.tick));return a};a.start=function(){function b(b,a){if(!n){n=Array(c);for(f=0;f<c;++f)n[f]=[];for(f=0;f<e;++f){var g=r[f];n[g.source.index].push(g.target);n[g.target.index].push(g.source)}}for(var g=n[d],f=-1,h=g.length,p;++f<h;)if(!isNaN(p=g[f][b]))return p;return Math.random()*a}var d,c=z.length,e=r.length,g=f[0],h=f[1],n,p;for(d=0;d<c;++d)(p=z[d]).index=d,p.weight=0;for(d=0;d<e;++d)p=r[d],"number"==typeof p.source&&(p.source=z[p.source]),
"number"==typeof p.target&&(p.target=z[p.target]),++p.source.weight,++p.target.weight;for(d=0;d<c;++d)p=z[d],isNaN(p.x)&&(p.x=b("x",g)),isNaN(p.y)&&(p.y=b("y",h)),isNaN(p.px)&&(p.px=p.x),isNaN(p.py)&&(p.py=p.y);I=[];if("function"===typeof k)for(d=0;d<e;++d)I[d]=+k.call(this,r[d],d);else for(d=0;d<e;++d)I[d]=k;J=[];if("function"===typeof m)for(d=0;d<e;++d)J[d]=+m.call(this,r[d],d);else for(d=0;d<e;++d)J[d]=m;M=[];if("function"===typeof w)for(d=0;d<c;++d)M[d]=+w.call(this,z[d],d);else for(d=0;d<c;++d)M[d]=
w;return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){h||(h=y.behavior.drag().origin(B).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return h;this.on("mouseover.force",th).on("mouseout.force",uh).call(h)};return y.rebind(a,c,"on")};var pi=20,qi=1,ri=Infinity;y.layout.hierarchy=function(){function b(e){var g,f,h=[e],n=[],p;for(e.depth=0;null!=(p=h.pop());)if(n.push(p),(g=a.call(b,p,p.depth))&&
(f=g.length)){for(var l;0<=--f;)h.push(l=g[f]),l.parent=p,l.depth=p.depth+1;c&&(p.value=0);p.children=g}else c&&(p.value=+c.call(b,p,p.depth)||0),delete p.children;Wa(e,function(b){var a,e;d&&(a=b.children)&&a.sort(d);c&&(e=b.parent)&&(e.value+=b.value)});return n}var d=yh,a=wh,c=xh;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(d){if(!arguments.length)return a;a=d;return b};b.value=function(d){if(!arguments.length)return c;c=d;return b};b.revalue=function(d){c&&
(Vb(d,function(b){b.children&&(b.value=0)}),Wa(d,function(d){var a;d.children||(d.value=+c.call(b,d,d.depth)||0);if(a=d.parent)a.value+=d.value}));return d};return b};y.layout.partition=function(){function b(d,a,c,e){var g,f=d.children;d.x=a;d.y=d.depth*e;d.dx=c;d.dy=e;if(f&&(g=f.length)){var h=-1,n;for(c=d.value?c/d.value:0;++h<g;)b(n=f[h],a,d=n.value*c,e),a+=d}}function d(b){var a;b=b.children;var c=0;if(b&&(a=b.length))for(var e=-1;++e<a;)c=Math.max(c,d(b[e]));return 1+c}function a(a,g){var f=
c.call(this,a,g);b(f[0],0,e[0],e[1]/d(f[0]));return f}var c=y.layout.hierarchy(),e=[1,1];a.size=function(b){if(!arguments.length)return e;e=b;return a};return Ub(a,c)};y.layout.pie=function(){function b(g){var h=g.length,n=g.map(function(a,c){return+d.call(b,a,c)}),p=+("function"===typeof c?c.apply(this,arguments):c),l=("function"===typeof e?e.apply(this,arguments):e)-p,k=Math.min(Math.abs(l)/h,+("function"===typeof f?f.apply(this,arguments):f)),m=k*(0>l?-1:1),w=y.sum(n),t=w?(l-h*m)/w:0,h=y.range(h),
v=[],u;null!=a&&h.sort(a===gg?function(b,d){return n[d]-n[b]}:function(b,d){return a(g[b],g[d])});h.forEach(function(b){v[b]={data:g[b],value:u=n[b],startAngle:p,endAngle:p+=u*t+m,padAngle:k}});return v}var d=Number,a=gg,c=0,e=Pa,f=0;b.value=function(a){if(!arguments.length)return d;d=a;return b};b.sort=function(d){if(!arguments.length)return a;a=d;return b};b.startAngle=function(d){if(!arguments.length)return c;c=d;return b};b.endAngle=function(d){if(!arguments.length)return e;e=d;return b};b.padAngle=
function(d){if(!arguments.length)return f;f=d;return b};return b};var gg={};y.layout.stack=function(){function b(g,n){if(!(w=g.length))return g;var p=g.map(function(a,c){return d.call(b,a,c)}),l=p.map(function(d){return d.map(function(d,a){return[f.call(b,d,a),h.call(b,d,a)]})}),k=a.call(b,l,n),p=y.permute(p,k),l=y.permute(l,k),k=c.call(b,l,n),m=p[0].length,w,t,v,u;for(v=0;v<m;++v)for(e.call(b,p[0][v],u=k[v],l[0][v][1]),t=1;t<w;++t)e.call(b,p[t][v],u+=l[t-1][v][1],l[t][v][1]);return g}var d=B,a=Bd,
c=Cd,e=Bh,f=zh,h=Ah;b.values=function(a){if(!arguments.length)return d;d=a;return b};b.order=function(d){if(!arguments.length)return a;a="function"===typeof d?d:si.get(d)||Bd;return b};b.offset=function(d){if(!arguments.length)return c;c="function"===typeof d?d:ti.get(d)||Cd;return b};b.x=function(d){if(!arguments.length)return f;f=d;return b};b.y=function(d){if(!arguments.length)return h;h=d;return b};b.out=function(d){if(!arguments.length)return e;e=d;return b};return b};var si=y.map({"inside-out":function(b){var d=
b.length,a=b.map(Ch),c=b.map(Dh),e=y.range(d).sort(function(b,d){return a[b]-a[d]}),f=0,h=0,n=[],l=[];for(b=0;b<d;++b){var k=e[b];f<h?(f+=c[k],n.push(k)):(h+=c[k],l.push(k))}return l.reverse().concat(n)},reverse:function(b){return y.range(b.length).reverse()},"default":Bd}),ti=y.map({silhouette:function(b){var d=b.length,a=b[0].length,c=[],e=0,f,h,n,l=[];for(h=0;h<a;++h){for(n=f=0;f<d;f++)n+=b[f][h][1];n>e&&(e=n);c.push(n)}for(h=0;h<a;++h)l[h]=(e-c[h])/2;return l},wiggle:function(b){var d=b.length,
a=b[0],c=a.length,e,f,h,n,l,k,m,w=[];w[0]=k=m=0;for(f=1;f<c;++f){for(h=e=0;e<d;++e)h+=b[e][f][1];var t=e=0;for(l=a[f][0]-a[f-1][0];e<d;++e){var u=0;for(n=(b[e][f][1]-b[e][f-1][1])/(2*l);u<e;++u)n+=(b[u][f][1]-b[u][f-1][1])/l;t+=n*b[e][f][1]}w[f]=k-=h?t/h*l:0;k<m&&(m=k)}for(f=0;f<c;++f)w[f]-=m;return w},expand:function(b){var d=b.length,a=b[0].length,c=1/d,e,f,h,n=[];for(f=0;f<a;++f){for(h=e=0;e<d;e++)h+=b[e][f][1];if(h)for(e=0;e<d;e++)b[e][f][1]/=h;else for(e=0;e<d;e++)b[e][f][1]=c}for(f=0;f<a;++f)n[f]=
0;return n},zero:Cd});y.layout.histogram=function(){function b(b,g){var f=[],h=b.map(a,this),n=c.call(this,h,g),p=e.call(this,n,h,g);g=-1;for(var l=h.length,k=p.length-1,m=d?1:1/l;++g<k;){var w=f[g]=[];w.dx=p[g+1]-(w.x=p[g]);w.y=0}if(0<k)for(g=-1;++g<l;)w=h[g],w>=n[0]&&w<=n[1]&&(w=f[y.bisect(p,w,1,k)-1],w.y+=m,w.push(b[g]));return f}var d=!0,a=Number,c=Gh,e=Fh;b.value=function(d){if(!arguments.length)return a;a=d;return b};b.range=function(d){if(!arguments.length)return c;c=wa(d);return b};b.bins=
function(d){if(!arguments.length)return e;e="number"===typeof d?function(b){return of(b,d)}:wa(d);return b};b.frequency=function(a){if(!arguments.length)return d;d=!!a;return b};return b};y.layout.pack=function(){function b(b,g){var f=d.call(this,b,g),h=f[0],n=c[0],p=c[1],l=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};h.x=h.y=0;Wa(h,function(b){b.r=+l(b.value)});Wa(h,rf);if(a){var k=a*(e?1:Math.max(2*h.r/n,2*h.r/p))/2;Wa(h,function(b){b.r+=k});Wa(h,rf);Wa(h,function(b){b.r-=k})}tf(h,
n/2,p/2,e?1:1/Math.max(2*h.r/n,2*h.r/p));return f}var d=y.layout.hierarchy().sort(Hh),a=0,c=[1,1],e;b.size=function(d){if(!arguments.length)return c;c=d;return b};b.radius=function(d){if(!arguments.length)return e;e=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return a;a=+d;return b};return Ub(b,d)};y.layout.tree=function(){function b(b,g){var p=f.call(this,b,g),k=p[0],m=d(k);Wa(m,a);m.parent.m=-m.z;Vb(m,c);if(l)Vb(k,e);else{var w=k,t=k,u=k;Vb(k,function(b){b.x<
w.x&&(w=b);b.x>t.x&&(t=b);b.depth>u.depth&&(u=b)});var v=h(w,t)/2-w.x,q=n[0]/(t.x+h(t,w)/2+v),z=n[1]/(u.depth||1);Vb(k,function(b){b.x=(b.x+v)*q;b.y=b.depth*z})}return p}function d(b){b={A:null,children:[b]};for(var d=[b],a;null!=(a=d.pop());)for(var c=a.children,e,g=0,f=c.length;g<f;++g)d.push((c[g]=e={_:c[g],parent:a,children:(e=c[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return b.children[0]}function a(b){var d=b.children,a=b.parent.children,c=b.i?a[b.i-1]:null;
if(d.length){for(var e=0,g=0,f=b.children,n=f.length,p;0<=--n;)p=f[n],p.z+=e,p.m+=e,e+=p.s+(g+=p.c);d=(d[0].z+d[d.length-1].z)/2;c?(b.z=c.z+h(b._,c._),b.m=b.z-d):b.z=d}else c&&(b.z=c.z+h(b._,c._));d=b.parent;a=b.parent.A||a[0];if(c){g=e=b;f=e.parent.children[0];n=e.m;p=g.m;for(var l=c.m,k=f.m,m;c=Fd(c),e=Ed(e),c&&e;){f=Ed(f);g=Fd(g);g.a=b;m=c.z+l-e.z-n+h(c._,e._);if(0<m){var w=c.a.parent===b.parent?c.a:a,t=b,u=m,v=u/(t.i-w.i);t.c-=v;t.s+=u;w.c+=v;t.z+=u;t.m+=u;n+=m;p+=m}l+=c.m;n+=e.m;k+=f.m;p+=g.m}c&&
!Fd(g)&&(g.t=c,g.m+=l-p);e&&!Ed(f)&&(f.t=e,f.m+=n-k,a=b)}d.A=a}function c(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=n[0];b.y=b.depth*n[1]}var f=y.layout.hierarchy().sort(null).value(null),h=uf,n=[1,1],l=null;b.separation=function(d){if(!arguments.length)return h;h=d;return b};b.size=function(d){if(!arguments.length)return l?null:n;l=null==(n=d)?e:null;return b};b.nodeSize=function(d){if(!arguments.length)return l?n:null;l=null==(n=d)?null:e;return b};return Ub(b,f)};y.layout.cluster=
function(){function b(b,g){var f=d.call(this,b,g),h=f[0],n,p=0;Wa(h,function(b){var d=b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=n?p+=a(b,n):0,b.y=0,n=b)});var l=vf(h),k=wf(h),m=l.x-a(l,k)/2,w=k.x+a(k,l)/2;Wa(h,e?function(b){b.x=(b.x-h.x)*c[0];b.y=(h.y-b.y)*c[1]}:function(b){b.x=(b.x-m)/(w-m)*c[0];b.y=(1-(h.y?b.y/h.y:1))*c[1]});return f}var d=y.layout.hierarchy().sort(null).value(null),a=uf,c=[1,1],e=!1;b.separation=function(d){if(!arguments.length)return a;a=d;return b};b.size=function(d){if(!arguments.length)return e?
null:c;e=null==(c=d);return b};b.nodeSize=function(d){if(!arguments.length)return e?c:null;e=null!=(c=d);return b};return Ub(b,d)};y.layout.treemap=function(){function b(b,d){for(var a=-1,c=b.length,e,g;++a<c;)g=(e=b[a]).value*(0>d?0:d),e.area=isNaN(g)||0>=g?0:g}function d(a){var e=a.children;if(e&&e.length){var g=k(a),f=[],h=e.slice(),n=Infinity,p,l="slice"===t?g.dx:"dice"===t?g.dy:"slice-dice"===t?a.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);b(h,g.dx*g.dy/a.value);for(f.area=0;0<(a=h.length);){f.push(a=
h[a-1]);f.area+=a.area;if(!(a="squarify"!==t)){a=l;for(var m=f.area,w=0,v=Infinity,q=-1,z=f.length;++q<z;)if(p=f[q].area)p<v&&(v=p),p>w&&(w=p);m*=m;a*=a;a=(p=m?Math.max(a*w*u/m,m/(a*v*u)):Infinity)<=n}a?(h.pop(),n=p):(f.area-=f.pop().area,c(f,l,g,!1),l=Math.min(g.dx,g.dy),f.length=f.area=0,n=Infinity)}f.length&&(c(f,l,g,!0),f.length=f.area=0);e.forEach(d)}}function a(d){var e=d.children;if(e&&e.length){var g=k(d),f=e.slice(),h=[];b(f,g.dx*g.dy/d.value);for(h.area=0;d=f.pop();)h.push(d),h.area+=d.area,
null!=d.z&&(c(h,d.z?g.dx:g.dy,g,!f.length),h.length=h.area=0);e.forEach(a)}}function c(b,d,a,c){var e=-1,g=b.length,f=a.x,n=a.y,p=d?h(b.area/d):0;if(d==a.dx){if(c||p>a.dy)p=a.dy;for(;++e<g;){var l=b[e];l.x=f;l.y=n;l.dy=p;f+=l.dx=Math.min(a.x+a.dx-f,p?h(l.area/p):0)}l.z=!0;l.dx+=a.x+a.dx-f;a.y+=p;a.dy-=p}else{if(c||p>a.dx)p=a.dx;for(;++e<g;)l=b[e],l.x=f,l.y=n,l.dx=p,n+=l.dy=Math.min(a.y+a.dy-n,p?h(l.area/p):0);l.z=!1;l.dy+=a.y+a.dy-n;a.x+=p;a.dx-=p}}function e(c){c=w||f(c);var e=c[0];e.x=e.y=0;e.value?
(e.dx=n[0],e.dy=n[1]):e.dx=e.dy=0;w&&f.revalue(e);b([e],e.dx*e.dy/e.value);(w?a:d)(e);m&&(w=c);return c}var f=y.layout.hierarchy(),h=Math.round,n=[1,1],l=null,k=Gd,m=!1,w,t="squarify",u=.5*(1+Math.sqrt(5));e.size=function(b){if(!arguments.length)return n;n=b;return e};e.padding=function(b){function d(d){var a=b.call(e,d,d.depth);return null==a?Gd(d):xf(d,"number"===typeof a?[a,a,a,a]:a)}function a(d){return xf(d,b)}if(!arguments.length)return l;var c;k=null==(l=b)?Gd:"function"===(c=typeof b)?d:"number"===
c?(b=[b,b,b,b],a):a;return e};e.round=function(b){if(!arguments.length)return h!=Number;h=b?Math.round:Number;return e};e.sticky=function(b){if(!arguments.length)return m;m=b;w=null;return e};e.ratio=function(b){if(!arguments.length)return u;u=b;return e};e.mode=function(b){if(!arguments.length)return t;t=b+"";return e};return Ub(e,f)};y.random={normal:function(b,d){var a=arguments.length;2>a&&(d=1);1>a&&(b=0);return function(){do{var a=2*Math.random()-1;var c=2*Math.random()-1;c=a*a+c*c}while(!c||
1<c);return b+d*a*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var b=y.random.normal.apply(y,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=y.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,a=0;a<b;a++)d+=Math.random();return d}}};y.scale={};var Nh={floor:B,ceil:B};y.scale.linear=function(){return zf([0,1],[0,1],sb,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return Bf(y.scale.linear().domain([0,
1]),10,!0,[1,10])};var Cf=y.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};y.scale.pow=function(){return Df(y.scale.linear(),1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};y.scale.category10=function(){return y.scale.ordinal().range(ui)};y.scale.category20=function(){return y.scale.ordinal().range(vi)};y.scale.category20b=function(){return y.scale.ordinal().range(wi)};
y.scale.category20c=function(){return y.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(vb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vb);y.scale.quantile=function(){return Ff([],[])};y.scale.quantize=function(){return Gf(0,1,[0,1])};y.scale.threshold=function(){return Hf([.5],[0,1])};y.scale.identity=function(){return If([0,1])};y.svg={};y.svg.arc=function(){function b(){var b=Math.max(0,+a.apply(this,arguments)),
g=Math.max(0,+c.apply(this,arguments)),p=h.apply(this,arguments)-Ca,k=n.apply(this,arguments)-Ca,m=Math.abs(k-p),w=p>k?0:1;if(g<b){var t=g;g=b;b=t}if(m>=ji)return d(g,w)+(b?d(b,1-w):"")+"Z";var u,v=0,q=0,z=[];if(u=(+l.apply(this,arguments)||0)/2){var r=f===Vc?Math.sqrt(b*b+g*g):+f.apply(this,arguments);w||(q*=-1);g&&(q=qa(r/g*Math.sin(u)));b&&(v=qa(r/b*Math.sin(u)))}if(g){r=g*Math.cos(p+q);u=g*Math.sin(p+q);var I=g*Math.cos(k-q);var J=g*Math.sin(k-q);var M=Math.abs(k-p-2*q)<=ha?0:1;q&&Dc(r,u,I,J)===
w^M&&(I=(p+k)/2,r=g*Math.cos(I),u=g*Math.sin(I),I=J=null)}else r=u=0;if(b){q=b*Math.cos(k-v);var G=b*Math.sin(k-v);var D=b*Math.cos(p+v);var x=b*Math.sin(p+v);var K=Math.abs(p-k+2*v)<=ha?0:1;v&&Dc(q,G,D,x)===1-w^K&&(D=(p+k)/2,q=b*Math.cos(D),G=b*Math.sin(D),D=x=null)}else q=G=0;1E-6<m&&.001<(t=Math.min(Math.abs(g-b)/2,+e.apply(this,arguments)))?(K=b<g^w?0:1,M=p=t,m<ha&&(m=null==D?[q,G]:null==I?[r,u]:td([r,u],[D,x],[I,J],[q,G]),M=r-m[0],p=u-m[1],k=I-m[0],v=J-m[1],p=1/Math.sin(Math.acos((M*k+p*v)/(Math.sqrt(M*
M+p*p)*Math.sqrt(k*k+v*v)))/2),m=Math.sqrt(m[0]*m[0]+m[1]*m[1]),M=Math.min(t,(b-m)/(p-1)),p=Math.min(t,(g-m)/(p+1))),null!=I?(m=Ec(null==D?[q,G]:[D,x],[r,u],g,p,w),k=Ec([I,J],[q,G],g,p,w),t===p?z.push("M",m[0],"A",p,",",p," 0 0,",K," ",m[1],"A",g,",",g," 0 ",1-w^Dc(m[1][0],m[1][1],k[1][0],k[1][1]),",",w," ",k[1],"A",p,",",p," 0 0,",K," ",k[0]):z.push("M",m[0],"A",p,",",p," 0 1,",K," ",k[0])):z.push("M",r,",",u),null!=D?(g=Ec([r,u],[D,x],b,-M,w),I=Ec([q,G],null==I?[r,u]:[I,J],b,-M,w),t===M?z.push("L",
I[0],"A",M,",",M," 0 0,",K," ",I[1],"A",b,",",b," 0 ",w^Dc(I[1][0],I[1][1],g[1][0],g[1][1]),",",1-w," ",g[1],"A",M,",",M," 0 0,",K," ",g[0]):z.push("L",I[0],"A",M,",",M," 0 0,",K," ",g[0])):z.push("L",q,",",G)):(z.push("M",r,",",u),null!=I&&z.push("A",g,",",g," 0 ",M,",",w," ",I,",",J),z.push("L",q,",",G),null!=D&&z.push("A",b,",",b," 0 ",K,",",1-w," ",D,",",x));z.push("Z");return z.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var a=Th,c=Uh,e=
Sh,f=Vc,h=Jf,n=Kf,l=Vh;b.innerRadius=function(d){if(!arguments.length)return a;a=wa(d);return b};b.outerRadius=function(d){if(!arguments.length)return c;c=wa(d);return b};b.cornerRadius=function(d){if(!arguments.length)return e;e=wa(d);return b};b.padRadius=function(d){if(!arguments.length)return f;f=d==Vc?Vc:wa(d);return b};b.startAngle=function(d){if(!arguments.length)return h;h=wa(d);return b};b.endAngle=function(d){if(!arguments.length)return n;n=wa(d);return b};b.padAngle=function(d){if(!arguments.length)return l;
l=wa(d);return b};b.centroid=function(){var b=(+a.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+h.apply(this,arguments)+ +n.apply(this,arguments))/2-Ca;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Vc="auto";y.svg.line=function(){return Lf(B)};var Jd=y.map({linear:Ta,"linear-closed":Mf,step:function(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c[0]+(c=b[d])[0])/2,"V",c[1]);1<a&&e.push("H",c[0]);return e.join("")},"step-before":Kd,"step-after":Ld,basis:Nf,"basis-open":function(b){if(4>
b.length)return Ta(b);for(var d=[],a=-1,c=b.length,e,f=[0],h=[0];3>++a;)e=b[a],f.push(e[0]),h.push(e[1]);d.push(Qa(ib,f)+","+Qa(ib,h));for(--a;++a<c;)e=b[a],f.shift(),f.push(e[0]),h.shift(),h.push(e[1]),Nd(d,f,h);return d.join("")},"basis-closed":function(b){for(var d,a=-1,c=b.length,e=c+4,f,h=[],n=[];4>++a;)f=b[a%c],h.push(f[0]),n.push(f[1]);d=[Qa(ib,h),",",Qa(ib,n)];for(--a;++a<e;)f=b[a%c],h.shift(),h.push(f[0]),n.shift(),n.push(f[1]),Nd(d,h,n);return d.join("")},bundle:function(b,d){var a=b.length-
1;if(a)for(var c=b[0][0],e=b[0][1],f=b[a][0]-c,h=b[a][1]-e,n=-1,l,k;++n<=a;)l=b[n],k=n/a,l[0]=d*l[0]+(1-d)*(c+k*f),l[1]=d*l[1]+(1-d)*(e+k*h);return Nf(b)},cardinal:function(b,d){return 3>b.length?Ta(b):b[0]+Fc(b,Md(b,d))},"cardinal-open":function(b,d){return 4>b.length?Ta(b):b[1]+Fc(b.slice(1,-1),Md(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+Fc((b.push(b[0]),b),Md([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Ta(b);else{var d=b[0],a=[],c;var e=
0;var f=b.length-1;var h=[];var n=b[1];for(c=h[0]=Od(b[0],n);++e<f;)h[e]=(c+(c=Od(n,n=b[e+1])))/2;h[e]=c;for(var l=-1,k=b.length-1;++l<k;)e=Od(b[l],b[l+1]),1E-6>ja(e)?h[l]=h[l+1]=0:(f=h[l]/e,n=h[l+1]/e,c=f*f+n*n,9<c&&(c=3*e/Math.sqrt(c),h[l]=c*f,h[l+1]=c*n));for(l=-1;++l<=k;)c=(b[Math.min(k,l+1)][0]-b[Math.max(0,l-1)][0])/(6*(1+h[l]*h[l])),a.push([c||0,h[l]*c||0]);b=d+Fc(b,a)}return b}});Jd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],ib=[0,1/6,
2/3,1/6];y.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Kd.reverse=Ld;Ld.reverse=Kd;y.svg.area=function(){return Rf(B)};y.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};y.svg.chord=function(){function b(b,g){var f=d(this,c,b,g),h=d(this,e,b,g);return"M"+f.p0+a(f.r,f.p1,f.a1-f.a0)+
(f.a0==h.a0&&f.a1==h.a1?"Q 0,0 "+f.p0:"Q 0,0 "+h.p0+a(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+f.p0))+"Z"}function d(b,d,a,c){var e=d.call(b,a,c);d=f.call(b,e,c);a=h.call(b,e,c)-Ca;b=n.call(b,e,c)-Ca;return{r:d,a0:a,a1:b,p0:[d*Math.cos(a),d*Math.sin(a)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function a(b,d,a){return"A"+b+","+b+" 0 "+ +(a>ha)+",1 "+d}var c=pd,e=qd,f=Wh,h=Jf,n=Kf;b.radius=function(d){if(!arguments.length)return f;f=wa(d);return b};b.source=function(d){if(!arguments.length)return c;c=wa(d);return b};
b.target=function(d){if(!arguments.length)return e;e=wa(d);return b};b.startAngle=function(d){if(!arguments.length)return h;h=wa(d);return b};b.endAngle=function(d){if(!arguments.length)return n;n=wa(d);return b};return b};y.svg.diagonal=function(){function b(b,e){var g=d.call(this,b,e),f=a.call(this,b,e),h=(g.y+f.y)/2,g=[g,{x:g.x,y:h},{x:f.x,y:h},f],g=g.map(c);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var d=pd,a=qd,c=Sf;b.source=function(a){if(!arguments.length)return d;d=wa(a);return b};b.target=
function(d){if(!arguments.length)return a;a=wa(d);return b};b.projection=function(d){if(!arguments.length)return c;c=d;return b};return b};y.svg.diagonal.radial=function(){var b=y.svg.diagonal(),d=Sf,a=b.projection;b.projection=function(b){return arguments.length?a(Xh(d=b)):d};return b};y.svg.symbol=function(){function b(b,c){return(hg.get(d.call(this,b,c))||Tf)(a.call(this,b,c))}var d=Zh,a=Yh;b.type=function(a){if(!arguments.length)return d;d=wa(a);return b};b.size=function(d){if(!arguments.length)return a;
a=wa(d);return b};return b};var hg=y.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Wc);var d=b*Wc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=
Math.sqrt(b/Wc);var d=b*Wc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});y.svg.symbolTypes=hg.keys();var Wc=Math.sqrt(3),ig=Math.tan(30*ia);sa.transition=function(b){var d=ub||++jg;b=Qd(b);for(var a=[],c,e,f=Xc||{time:Date.now(),ease:fh,delay:0,duration:250},h=-1,n=this.length;++h<n;){a.push(c=[]);for(var l=this[h],k=-1,m=l.length;++k<m;)(e=l[k])&&Gc(e,k,b,d,f),c.push(e)}return Wb(a,b,d)};sa.interrupt=function(b){return this.each(null==b?Jc:Uf(Qd(b)))};var Jc=Uf(Qd()),Ha=[],jg=0,ub,Xc;Ha.call=
sa.call;Ha.empty=sa.empty;Ha.node=sa.node;Ha.size=sa.size;y.transition=function(b,d){return b&&b.transition?ub?b.transition(d):b:y.selection().transition(b)};y.transition.prototype=Ha;Ha.select=function(b){var d=this.id,a=this.namespace,c=[],e,f,h;b=u(b);for(var n=-1,l=this.length;++n<l;){c.push(e=[]);for(var k=this[n],m=-1,w=k.length;++m<w;)(h=k[m])&&(f=b.call(h,h.__data__,m,n))?("__data__"in h&&(f.__data__=h.__data__),Gc(f,m,a,d,h[a][d]),e.push(f)):e.push(null)}return Wb(c,a,d)};Ha.selectAll=function(b){var d=
this.id,a=this.namespace,c=[],e,f;b=K(b);for(var h=-1,n=this.length;++h<n;)for(var l=this[h],k=-1,m=l.length;++k<m;)if(e=l[k]){var w=e[a][d];var t=b.call(e,e.__data__,k,h);c.push(e=[]);for(var u=-1,q=t.length;++u<q;)(f=t[u])&&Gc(f,u,a,d,w),e.push(f)}return Wb(c,a,d)};Ha.filter=function(b){var d=[],a,c;"function"!==typeof b&&(b=I(b));for(var e=0,f=this.length;e<f;e++){d.push(a=[]);var h=this[e];for(var n=0,l=h.length;n<l;n++)(c=h[n])&&b.call(c,c.__data__,n,e)&&a.push(c)}return Wb(d,this.namespace,
this.id)};Ha.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):W(this,null==d?function(d){d[c][a].tween.remove(b)}:function(e){e[c][a].tween.set(b,d)})};Ha.attr=function(b,d){function a(){this.removeAttribute(n)}function c(){this.removeAttributeNS(n.space,n.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(n),a;return d!==b&&(a=h(d,b),function(b){this.setAttribute(n,a(b))})})}function f(b){return null==b?c:(b+=
"",function(){var d=this.getAttributeNS(n.space,n.local),a;return d!==b&&(a=h(d,b),function(b){this.setAttributeNS(n.space,n.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var h="transform"==b?lf:sb,n=y.ns.qualify(b);return Pd(this,"attr."+b,d,n.local?f:e)};Ha.attrTween=function(b,d){function a(b,a){var c=d.call(this,b,a,this.getAttribute(e));return c&&function(b){this.setAttribute(e,c(b))}}function c(b,a){var c=d.call(this,b,a,this.getAttributeNS(e.space,e.local));
return c&&function(b){this.setAttributeNS(e.space,e.local,c(b))}}var e=y.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};Ha.style=function(b,d,a){function e(){this.style.removeProperty(b)}var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Pd(this,"style."+b,d,function(d){return null==d?e:(d+="",function(){var e=c(this).getComputedStyle(this,null).getPropertyValue(b),g;return e!==d&&(g=sb(e,d),function(d){this.style.setProperty(b,
g(d),a)})})})};Ha.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(e,g){var f=d.call(this,e,g,c(this).getComputedStyle(this,null).getPropertyValue(b));return f&&function(d){this.style.setProperty(b,f(d),a)}})};Ha.text=function(b){return Pd(this,"text",b,$h)};Ha.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Ha.ease=function(b){var d=this.id,a=this.namespace;
if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=y.ease.apply(y,arguments));return W(this,function(c){c[a][d].ease=b})};Ha.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:W(this,"function"===typeof b?function(c,e,g){c[a][d].delay=+b.call(c,c.__data__,e,g)}:(b=+b,function(c){c[a][d].delay=b}))};Ha.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:W(this,"function"===
typeof b?function(c,e,g){c[a][d].duration=Math.max(1,b.call(c,c.__data__,e,g))}:(b=Math.max(1,b),function(c){c[a][d].duration=b}))};Ha.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Xc,f=ub;try{ub=a,W(this,function(d,e,g){Xc=d[c][a];b.call(d,d.__data__,e,g)})}finally{Xc=e,ub=f}}else W(this,function(e){e=e[c][a];(e.event||(e.event=y.dispatch("start","end","interrupt"))).on(b,d)});return this};Ha.transition=function(){for(var b=this.id,d=++jg,a=this.namespace,c=[],e,
f,h,n,l=0,k=this.length;l<k;l++){c.push(e=[]);f=this[l];for(var m=0,w=f.length;m<w;m++){if(h=f[m])n=h[a][b],Gc(h,m,a,d,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration});e.push(h)}}return Wb(c,a,d)};y.svg.axis=function(){function b(b){b.each(function(){var b=y.select(this),g=this.__chart__||d,k=this.__chart__=d.copy(),m=null==n?k.ticks?k.ticks.apply(k,h):k.domain():n,p=null==l?k.tickFormat?k.tickFormat.apply(k,h):B:l,w=b.selectAll(".tick").data(m,k),m=w.enter().insert("g",".domain").attr("class",
"tick").style("opacity",1E-6),t=y.transition(w.exit()).style("opacity",1E-6).remove(),u=y.transition(w.order()).style("opacity",1),q=Math.max(c,0)+f,z=zc(k),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),y.transition(b));m.append("line");m.append("text");var r=m.select("line"),I=u.select("line"),w=w.select("text").text(p),M=m.select("text"),v=u.select("text"),J="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){p=ai;var G="x";var D="y";var x="x2";var K="y2";
w.attr("dy",0>J?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+z[0]+","+J*e+"V0H"+z[1]+"V"+J*e)}else p=bi,G="y",D="x",x="y2",K="x2",w.attr("dy",".32em").style("text-anchor",0>J?"end":"start"),b.attr("d","M"+J*e+","+z[0]+"H0V"+z[1]+"H"+J*e);r.attr(K,J*c);M.attr(D,J*q);I.attr(x,0).attr(K,J*c);v.attr(G,0).attr(D,J*q);if(k.rangeBand)var aa=k,S=aa.rangeBand()/2,g=k=function(b){return aa(b)+S};else g.rangeBand?g=k:t.call(p,k,g);m.call(p,g,k);u.call(p,k,k)})}var d=y.scale.linear(),a=kg,c=6,
e=6,f=3,h=[10],n=null,l;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;a=d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return h;h=Ua(arguments);return b};b.tickValues=function(d){if(!arguments.length)return n;n=d;return b};b.tickFormat=function(d){if(!arguments.length)return l;l=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;
c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return f;f=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function b(c){c.each(function(){var c=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=c.selectAll(".background").data([0]);
g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=c.selectAll(".resize").data(z,B);h.exit().remove();h.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");h.style("display",b.empty()?"none":null);c=y.transition(c);g=y.transition(g);n&&(h=zc(n),g.attr("x",h[0]).attr("width",h[1]-h[0]),a(c));l&&(h=zc(l),g.attr("y",h[0]).attr("height",h[1]-h[0]),e(c));d(c)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+k[+/e$/.test(b)]+","+m[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",k[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function e(b){b.select(".extent").attr("y",
m[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function g(){var b=y.mouse(z),c=!1;Y&&(b[0]+=Y[0],b[1]+=Y[1]);D||(y.event.altKey?(K||(K=[(k[0]+k[1])/2,(m[0]+m[1])/2]),aa[0]=k[+(b[0]<K[0])],aa[1]=m[+(b[1]<K[1])]):K=null);v&&f(b,n,0)&&(a(J),c=!0);G&&f(b,l,1)&&(e(J),c=!0);c&&(d(J),I({type:"brush",mode:D?"move":"resize"}))}function f(b,d,a){var c=zc(d);d=c[0];var e=c[1],c=aa[a],g=a?m:k,f=g[1]-g[0];D&&(d-=c,e-=f+c);b=(a?q:u)?Math.max(d,Math.min(e,b[a])):b[a];D?d=(b+=
c)+f:(K&&(c=Math.max(d,Math.min(e,2*K[a]-b))),c<b?(d=b,b=c):d=c);if(g[0]!=b||g[1]!=d)return a?t=null:w=null,g[0]=b,g[1]=d,!0}function p(){g();J.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);y.select("body").style("cursor",null);S.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);x();I({type:"brushend"})}var z=this,r=y.select(y.event.target),I=h.of(z,arguments),
J=y.select(z),M=r.datum(),v=!/^(n|s)$/.test(M)&&n,G=!/^(e|w)$/.test(M)&&l,D=r.classed("extent"),x=ya(z),K,aa=y.mouse(z),S=y.select(c(z)).on("keydown.brush",function(){32==y.event.keyCode&&(D||(K=null,aa[0]-=k[1],aa[1]-=m[1],D=2),Q())}).on("keyup.brush",function(){32==y.event.keyCode&&2==D&&(aa[0]+=k[1],aa[1]+=m[1],D=0,Q())});if(y.event.changedTouches)S.on("touchmove.brush",g).on("touchend.brush",p);else S.on("mousemove.brush",g).on("mouseup.brush",p);J.interrupt().selectAll("*").interrupt();if(D)aa[0]=
k[0]-aa[0],aa[1]=m[0]-aa[1];else if(M){var W=+/w$/.test(M),M=+/^n/.test(M);var Y=[k[1-W]-aa[0],m[1-M]-aa[1]];aa[0]=k[W];aa[1]=m[M]}else y.event.altKey&&(K=aa.slice());J.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",r.style("cursor"));I({type:"brushstart"});g()}var h=J(b,"brushstart","brush","brushend"),n=null,l=null,k=[0,0],m=[0,0],w,t,u=!0,q=!0,z=$d[0];b.event=function(b){b.each(function(){var b=h.of(this,arguments),d={x:k,y:m,i:w,j:t},
a=this.__chart__||d;this.__chart__=d;ub?y.select(this).transition().each("start.brush",function(){w=a.i;t=a.j;k=a.x;m=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=yc(k,d.x),c=yc(m,d.y);w=t=null;return function(e){k=d.x=a(e);m=d.y=c(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){w=d.i;t=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return n;
n=d;z=$d[!n<<1|!l];return b};b.y=function(d){if(!arguments.length)return l;l=d;z=$d[!n<<1|!l];return b};b.clamp=function(d){if(!arguments.length)return n&&l?[u,q]:n?u:l?q:null;n&&l?(u=!!d[0],q=!!d[1]):n?u=!!d:l&&(q=!!d);return b};b.extent=function(d){if(!arguments.length){if(n)if(w){var a=w[0];var c=w[1]}else if(a=k[0],c=k[1],n.invert&&(a=n.invert(a),c=n.invert(c)),c<a){var e=a;a=c;c=e}if(l)if(t){var g=t[0];var f=t[1]}else g=m[0],f=m[1],l.invert&&(g=l.invert(g),f=l.invert(f)),f<g&&(e=g,g=f,f=e);return n&&
l?[[a,g],[c,f]]:n?[a,c]:l&&[g,f]}n&&(a=d[0],c=d[1],l&&(a=a[0],c=c[0]),w=[a,c],n.invert&&(a=n(a),c=n(c)),c<a&&(e=a,a=c,c=e),a!=k[0]||c!=k[1])&&(k=[a,c]);l&&(g=d[0],f=d[1],n&&(g=g[1],f=f[1]),t=[g,f],l.invert&&(g=l(g),f=l(f)),f<g&&(e=g,g=f,f=e),g!=m[0]||f!=m[1])&&(m=[g,f]);return b};b.clear=function(){b.empty()||(k=[0,0],m=[0,0],w=t=null);return b};b.empty=function(){return!!n&&k[0]==k[1]||!!l&&m[0]==m[1]};return y.rebind(b,h,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",
ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$d=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],ae=ba.format=Zf.timeFormat,lg=ae.utc,mg=lg("%Y-%m-%dT%H:%M:%S.%LZ");ae.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rd:mg;Rd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Rd.toString=mg.toString;ba.second=lb(function(b){return new Ka(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});ba.seconds=
ba.second.range;ba.seconds.utc=ba.second.utc.range;ba.minute=lb(function(b){return new Ka(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});ba.minutes=ba.minute.range;ba.minutes.utc=ba.minute.utc.range;ba.hour=lb(function(b){var d=b.getTimezoneOffset()/60;return new Ka(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});ba.hours=ba.hour.range;ba.hours.utc=ba.hour.utc.range;
ba.month=lb(function(b){b=ba.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});ba.months=ba.month.range;ba.months.utc=ba.month.utc.range;var Hc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],be=[[ba.second,1],[ba.second,5],[ba.second,15],[ba.second,30],[ba.minute,1],[ba.minute,5],[ba.minute,15],[ba.minute,30],[ba.hour,1],[ba.hour,3],[ba.hour,6],[ba.hour,12],[ba.day,1],[ba.day,2],[ba.week,
1],[ba.month,1],[ba.month,3],[ba.year,1]],Ai=ae.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Lb]]),ci={range:function(b,d,a){return y.range(Math.ceil(b/a)*a,+d,a).map(tb)},floor:B,ceil:B};be.year=ba.year;ba.scale=
function(){return Sd(y.scale.linear(),be,Ai)};var ng=be.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Lb]]);ng.year=ba.year.utc;ba.scale.utc=function(){return Sd(y.scale.linear(),
ng,Bi)};y.text=ed(function(b){return b.responseText});y.json=function(b,d){return Ib(b,"application/json",di,d)};y.html=function(b,d){return Ib(b,"text/html",ei,d)};y.xml=ed(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=y,define(y)):"object"===typeof module&&module.exports?module.exports=y:this.d3=y}();
(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};"undefined"!==typeof module&&"undefined"!==typeof exports&&"undefined"==typeof d3&&(d3=require("d3"));c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,
1),f=this,l=function(){},h=function(){return f.apply(this instanceof l&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};l.prototype=this.prototype;h.prototype=new l;return h});c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,
arguments):c.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};c.render=function(a){a=a||1;c.render.active=!0;c.dispatch.render_start();var e=function(){for(var f,l,h=0;h<a&&(l=c.render.queue[h]);h++)f=l.generate(),typeof l.callback==typeof Function&&
l.callback(f);c.render.queue.splice(0,h);c.render.queue.length?setTimeout(e):(c.dispatch.render_end(),c.render.active=!1)};setTimeout(e)};c.render.active=!1;c.render.queue=[];c.addGraph=function(a,e){typeof a===typeof Function&&(a={generate:a,callback:e});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):
a()};c.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()};c.interactiveGuideline=function(){function a(A){A.each(function(C){function E(){var c=d3.mouse(this),f=c[0],c=c[1],l=!0,k=!1;x&&(f=d3.event.offsetX,c=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(k=!0));l&&(f-=e.left,c-=e.top);if("mouseout"===d3.event.type||0>f||0>c||f>H||c>B||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||k)x&&
d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(r.nvPointerEventsClass))||(m.elementMouseout({mouseX:f,mouseY:c}),a.renderGuideLine(null),r.hidden(!0));else{r.hidden(!1);if("function"===typeof h.rangeBands)if(l=d3.bisect(h.range(),f)-1,h.range()[l]+h.rangeBand()>=f)l=h.domain()[d3.bisect(h.range(),f)-1];else{m.elementMouseout({mouseX:f,mouseY:c});a.renderGuideLine(null);r.hidden(!0);return}else l=
h.invert(f);m.elementMousemove({mouseX:f,mouseY:c,pointXValue:l});"dblclick"===d3.event.type&&m.elementDblclick({mouseX:f,mouseY:c,pointXValue:l});"click"===d3.event.type&&m.elementClick({mouseX:f,mouseY:c,pointXValue:l});"mousedown"===d3.event.type&&m.elementMouseDown({mouseX:f,mouseY:c,pointXValue:l});"mouseup"===d3.event.type&&m.elementMouseUp({mouseX:f,mouseY:c,pointXValue:l})}}var A=d3.select(this),H=f||960,B=l||400,N=A.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([C]);N.enter().append("g").attr("class",
" nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");k&&(k.on("touchmove",E).on("mousemove",E,!0).on("mouseout",E,!0).on("mousedown",E,!0).on("mouseup",E,!0).on("dblclick",E).on("click",E),a.guideLine=null,a.renderGuideLine=function(e){q&&(a.guideLine&&a.guideLine.attr("x1")===e||c.dom.write(function(){var a=N.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[c.utils.NaNtoZero(e)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",
function(a){return a}).attr("x2",function(a){return a}).attr("y1",B).attr("y2",0);a.exit().remove()}))})})}var e={left:0,top:0},f=null,l=null,h=d3.scale.linear(),m=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),q=!0,k=null,r=c.models.tooltip(),x=window.ActiveXObject;r.duration(0).hideDelay(0).hidden(!1);a.dispatch=m;a.tooltip=r;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.left=
"undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.height=function(c){if(!arguments.length)return l;l=c;return a};a.xScale=function(c){if(!arguments.length)return h;h=c;return a};a.showGuideLine=function(c){if(!arguments.length)return q;q=c;return a};a.svgContainer=function(c){if(!arguments.length)return k;k=c;return a};return a};c.interactiveBisect=function(a,c,f){if(!(a instanceof Array))return null;var e="function"!==typeof f?function(a){return a.x}:
f;f=d3.bisector(function(a,c){return e(a)-c}).left;f=d3.max([0,f(a,c)-1]);var h=e(a[f]);"undefined"===typeof h&&(h=f);if(h===c)return f;var m=d3.min([f+1,a.length-1]);a=e(a[m]);"undefined"===typeof a&&(a=m);return Math.abs(a-c)>=Math.abs(h-c)?f:m};c.nearestValueIndex=function(a,c,f){var e=Infinity,h=null;a.forEach(function(a,l){var k=Math.abs(c-a);null!=a&&k<=e&&k<f&&(e=k,h=l)});return h};c.models.tooltip=function(){function a(){if(E&&t(f))return c.dom.write(function(){x&&x.node()||(x=d3.select(document.body).select("#"+
e).data([1]),x.enter().append("div").attr("class","nvtooltip "+(q?q:"xy-tooltip")).attr("id",e).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0).classed("nv-pointer-events-none",!0),x.exit().remove());var a=L(f);a&&(x.node().innerHTML=a);O()}),a}var e="nvtooltip-"+Math.floor(1E5*Math.random()),f=null,l="w",h=25,m=0,q=null,k=!0,r=200,x=null,A=null,C=null,E=!0,F=100,H=!0,B=function(a,c){return a},N=function(a){return a},
G=function(a,c){return a},L=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));H&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(N(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",
function(a){return a.color});e.append("td").classed("key",!0).classed("total",function(a){return!!a.total}).html(function(a,c){return G(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return B(a.value,c)});e.filter(function(a,c){return void 0!==a.percent}).append("td").classed("percent",!0).html(function(a,c){return"("+d3.format("%")(a.percent)+")"});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",
a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},z=function(){var a={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var c=document.body.getBoundingClientRect();a.left-=c.left;a.top-=c.top}return a},t=function(a){if(a&&a.series){if(c.utils.isArray(a.series))return!0;if(c.utils.isObject(a.series))return a.series=[a.series],!0}return!1},
Q=function(a){var c=x.node().offsetHeight,e=x.node().offsetWidth,f=document.documentElement.clientWidth,k=document.documentElement.clientHeight,m;switch(l){case "e":var n=-e-h;var w=-(c/2);0>a.left+n&&(n=h);0>(m=a.top+w)&&(w-=m);(m=a.top+w+c)>k&&(w-=m-k);break;case "w":n=h;w=-(c/2);a.left+n+e>f&&(n=-e-h);0>(m=a.top+w)&&(w-=m);(m=a.top+w+c)>k&&(w-=m-k);break;case "n":n=-(e/2)-5;w=h;a.top+w+c>k&&(w=-c-h);0>(m=a.left+n)&&(n-=m);(m=a.left+n+e)>f&&(n-=m-f);break;case "s":n=-(e/2);w=-c-h;0>a.top+w&&(w=
h);0>(m=a.left+n)&&(n-=m);(m=a.left+n+e)>f&&(n-=m-f);break;case "center":n=-(e/2);w=-(c/2);break;default:w=n=0}return{left:n,top:w}},O=function(){c.dom.read(function(){var a=z(),c=Q(a),e=a.left+c.left,a=a.top+c.top;if(k)x.interrupt().transition().delay(r).duration(0).style("opacity",0);else{var c="translate("+Math.round(e)+"px, "+Math.round(a)+"px)",f=d3.interpolateString("translate("+A+"px, "+C+"px)",c),h=.1>x.style("opacity");x.interrupt().transition().duration(h?0:F).styleTween("transform",function(a){return f},
"important").styleTween("-webkit-transform",function(a){return f}).style("-ms-transform",c).style("opacity",1)}A=e;C=a})};a.nvPointerEventsClass="nv-pointer-events-none";a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{duration:{get:function(){return F},set:function(a){F=a}},gravity:{get:function(){return l},set:function(a){l=a}},distance:{get:function(){return h},set:function(a){h=a}},snapDistance:{get:function(){return m},set:function(a){m=a}},classes:{get:function(){return q},
set:function(a){q=a}},enabled:{get:function(){return E},set:function(a){E=a}},hideDelay:{get:function(){return r},set:function(a){r=a}},contentGenerator:{get:function(){return L},set:function(a){L=a}},valueFormatter:{get:function(){return B},set:function(a){B=a}},headerFormatter:{get:function(){return N},set:function(a){N=a}},keyFormatter:{get:function(){return G},set:function(a){G=a}},headerEnabled:{get:function(){return H},set:function(a){H=a}},position:{get:function(){return z},set:function(a){z=
a}},chartContainer:{get:function(){return document.body},set:function(a){c.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(a){c.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(a){c.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return k},set:function(c){k!=c&&(k=!!c,a())}},data:{get:function(){return f},set:function(a){a.point&&(a.value=
a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color);f=a}},node:{get:function(){return x.node()},set:function(a){}},id:{get:function(){return e},set:function(a){}}});c.utils.initOptions(a);return a};c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=
document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};c.utils.isArray=Array.isArray;c.utils.isObject=function(a){return null!==a&&"object"===typeof a};c.utils.isFunction=function(a){return"function"===typeof a};c.utils.isDate=function(a){return"[object Date]"===toString.call(a)};c.utils.isNumber=function(a){return!isNaN(a)&&"number"===typeof a};
c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(void 0===a)return c.utils.defaultColor();if(c.utils.isArray(a)){var e=d3.scale.ordinal().range(a);return function(a,c){return a.color||e(void 0===c?a:c)}}return a};c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};
c.utils.customTheme=function(a,e,f){e=e||function(a){return a.key};f=f||d3.scale.category20().range();var l=f.length;return function(h,m){var q=e(h);if(c.utils.isFunction(a[q]))return a[q]();if(void 0!==a[q])return a[q];l||(l=f.length);--l;return f[l]}};c.utils.pjax=function(a,e){var f=function(f){d3.html(f,function(f){var h=d3.select(e).node();h.parentNode.replaceChild(d3.select(f).select(e).node(),h);c.utils.pjax(a,e)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,
this.href);f(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&f(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if(c.utils.isFunction(a.style)&&c.utils.isFunction(a.text)){var e=parseInt(a.style("font-size").replace("px",""),10);a=a.text().length;return c.utils.NaNtoZero(a*e*.5)}return 0};c.utils.NaNtoZero=function(a){return!c.utils.isNumber(a)||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=
[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};c.utils.renderWatch=function(a,e){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,e);var f=void 0!==e?e:250,l=[],h=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=!0;h.renderEnd("model")})})(a);0>l.indexOf(a)&&l.push(a)});return this};this.reset=function(a){void 0!==a&&(f=a);l=[]};this.transition=
function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==f?f:250;a.__rendered=!1;0>l.indexOf(a)&&l.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var k=0;return a.transition().duration(e).each(function(){++k}).each("end",function(e,f){0===--k&&(a.__rendered=!0,h.renderEnd.apply(this,c))})};this.renderEnd=
function(){l.every(function(a){return a.__rendered})&&(l.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};c.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(e){for(var f in e){var l=c.utils.isArray(a[f]),h=c.utils.isObject(a[f]),m=c.utils.isObject(e[f]);h&&!l&&m?c.utils.deepExtend(a[f],e[f]):a[f]=e[f]}})};c.utils.state=function(){if(!(this instanceof c.utils.state))return new c.utils.state;var a={},e=function(){},f=function(){return{}},
l=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){e(a,!0)});this.getter=function(a){f=a;return this};this.setter=function(a,c){c||(c=function(){});e=function(e,f){a(e);f&&c()};return this};this.init=function(a){l=l||{};c.utils.deepExtend(l,a)};this.update=function(){l&&(e(l,!1),l=null);var c=f();if(JSON.stringify(c)===JSON.stringify(a))c=!1;else{for(var m in c)void 0===a[m]&&(a[m]={}),a[m]=c[m];c=!0}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&
d3.map(a).forEach(function(a,f){if(c.utils.isFunction(this[a]))this[a](f)}.bind(this));return this};c.utils.calcTicksX=function(a,e){for(var f=1,l=0;l<e.length;l+=1)var h=e[l]&&e[l].values?e[l].values.length:0,f=h>f?h:f;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.calcTicksY=function(a,e){for(var f=1,l=0;l<e.length;l+=1)for(var h=e[l]&&e[l].values?e[l].values:[],m,q=0;q<
h.length;q+=1)m=h[q]&&h[q].value?h[q].value:0,f=m>f?m:f;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]||(a._options[c]=e);return a})};
c.utils.initOptions=function(a){a._overrides=a._overrides||{};var e=Object.getOwnPropertyNames(a._options||{}),f=Object.getOwnPropertyNames(a._calls||{}),e=e.concat(f),l;for(l in e)c.utils.initOption(a,e[l])};c.utils.inheritOptionsD3=function(a,c,f){a._d3options=f.concat(a._d3options||[]);f.unshift(c);f.unshift(a);d3.rebind.apply(this,f)};c.utils.arrayUnique=function(a){return a.sort().filter(function(c,f){return!f||c!=a[f-1]})};c.utils.symbolMap=d3.map();c.utils.symbol=function(){function a(a,h){var l=
e.call(this,a,h),q=f.call(this,a,h);return-1!==d3.svg.symbolTypes.indexOf(l)?d3.svg.symbol().type(l).size(q)():c.utils.symbolMap.get(l)(q)}var e,f=64;a.type=function(c){if(!arguments.length)return e;e=d3.functor(c);return a};a.size=function(c){if(!arguments.length)return f;f=d3.functor(c);return a};return a};c.utils.inheritOptions=function(a,e){var f=Object.getOwnPropertyNames(e._options||{}),l=Object.getOwnPropertyNames(e._calls||{}),h=e._inherited||[],m=e._d3options||[],q=f.concat(l).concat(h).concat(m);
q.unshift(e);q.unshift(a);d3.rebind.apply(this,q);a._inherited=c.utils.arrayUnique(f.concat(l).concat(h).concat(f).concat(a._inherited||[]));a._d3options=c.utils.arrayUnique(m.concat(a._d3options||[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};c.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};c.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};c.utils.availableHeight=function(a,e,f){return Math.max(0,c.utils.sanitizeHeight(a,
e)-f.top-f.bottom)};c.utils.availableWidth=function(a,e,f){return Math.max(0,c.utils.sanitizeWidth(a,e)-f.left-f.right)};c.utils.noData=function(a,e){var f=a.options(),l=f.margin(),f=f.noData(),f=null==f?["No Data Available."]:[f],h=c.utils.availableHeight(null,e,l),m=c.utils.availableWidth(null,e,l),m=l.left+m/2,l=l.top+h/2;e.selectAll("g").remove();f=e.selectAll(".nv-noData").data(f);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");f.attr("x",
m).attr("y",l).text(function(a){return a})};c.utils.wrapTicks=function(a,c){a.each(function(){for(var a=d3.select(this),e=a.text().split(/\s+/).reverse(),h,m=[],q=0,k=a.attr("y"),r=parseFloat(a.attr("dy")),x=a.text(null).append("tspan").attr("x",0).attr("y",k).attr("dy",r+"em");h=e.pop();)m.push(h),x.text(m.join(" ")),x.node().getComputedTextLength()>c&&(m.pop(),x.text(m.join(" ")),m=[h],x=a.append("tspan").attr("x",0).attr("y",k).attr("dy",1.1*++q+r+"em").text(h))})};c.utils.arrayEquals=function(a,
e){if(a===e)return!0;if(!a||!e||a.length!=e.length)return!1;for(var f=0,l=a.length;f<l;f++)if(a[f]instanceof Array&&e[f]instanceof Array){if(!c.arrayEquals(a[f],e[f]))return!1}else if(a[f]!=e[f])return!1;return!0};c.models.axis=function(){function a(m){L.reset();m.each(function(a){var m=d3.select(this);c.utils.initSVG(m);a=m.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");m=a.select("g");null!==E?e.ticks(E):"top"!=e.orient()&&"bottom"!=
e.orient()||e.ticks(Math.abs(f.range()[1]-f.range()[0])/100);m.watchTransition(L,"axis").call(e);G=G||e.scale();var t=e.tickFormat();null==t&&(t=G.tickFormat());var z=m.selectAll("text.nv-axislabel").data([q||null]);z.exit().remove();void 0!==H&&m.selectAll("g").select("text").style("font-size",H);switch(e.orient()){case "top":z.enter().append("text").attr("class","nv-axislabel");var D=0;1===f.range().length?D=C?2*f.range()[0]+f.rangeBand():0:2===f.range().length?D=C?f.range()[0]+f.range()[1]+f.rangeBand():
f.range()[1]:2<f.range().length&&(D=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));z.attr("text-anchor","middle").attr("y",0).attr("x",D/2);if(k){var u=a.selectAll("g.nv-axisMaxMin").data(f.domain());u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");u.exit().remove();u.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-e.tickPadding()).attr("text-anchor","middle").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e});u.watchTransition(L,"min-max top").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f.range()[e])+",0)"})}break;case "bottom":u=F+36;var K=30,B=0;D=m.selectAll("g").select("text");var M="";r%360?(D.attr("transform",""),D.each(function(a,c){var e=this.getBoundingClientRect(),f=e.width;B=e.height;f>K&&(K=f)}),M="rotate("+r+" 0,"+(B/2+e.tickPadding())+")",u=Math.abs(Math.sin(r*
Math.PI/180)),u=(u?u*K:K)+30,D.attr("transform",M).style("text-anchor",0<r%360?"start":"end")):A?D.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"}):D.attr("transform","translate(0,0)");z.enter().append("text").attr("class","nv-axislabel");D=0;1===f.range().length?D=C?2*f.range()[0]+f.rangeBand():0:2===f.range().length?D=C?f.range()[0]+f.range()[1]+f.rangeBand():f.range()[1]:2<f.range().length&&(D=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));z.attr("text-anchor",
"middle").attr("y",u).attr("x",D/2);k&&(u=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),u.exit().remove(),u.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a)+(C?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",M).style("text-anchor",
r?0<r%360?"start":"end":"middle").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e}),u.watchTransition(L,"min-max bottom").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a)+(C?f.rangeBand()/2:0))+",0)"}));break;case "right":z.enter().append("text").attr("class","nv-axislabel");z.style("text-anchor",x?"middle":"begin").attr("transform",x?"rotate(90)":"").attr("y",x?-Math.max(l.right,h)+12-(F||0):-10).attr("x",x?d3.max(f.range())/2:e.tickPadding());k&&(u=a.selectAll("g.nv-axisMaxMin").data(f.domain()),
u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),u.exit().remove(),u.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(f(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e}),u.watchTransition(L,"min-max right").attr("transform",function(a,
e){return"translate(0,"+c.utils.NaNtoZero(f.range()[e])+")"}).select("text").style("opacity",1));break;case "left":z.enter().append("text").attr("class","nv-axislabel"),z.style("text-anchor",x?"middle":"end").attr("transform",x?"rotate(-90)":"").attr("y",x?-Math.max(l.left,h)+25-(F||0):-10).attr("x",x?-d3.max(f.range())/2:-e.tickPadding()),k&&(u=a.selectAll("g.nv-axisMaxMin").data(f.domain()),u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":
"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),u.exit().remove(),u.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(G(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e}),u.watchTransition(L,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(f.range()[e])+")"}).select("text").style("opacity",1))}z.text(function(a){return a});
!k||"left"!==e.orient()&&"right"!==e.orient()||(m.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(k&&("top"===e.orient()||"bottom"===e.orient())){var n=[];a.selectAll("g.nv-axisMaxMin").each(function(a,
c){try{c?n.push(f(a)-this.getBoundingClientRect().width-4):n.push(f(a)+this.getBoundingClientRect().width+4)}catch(Z){c?n.push(f(a)-4):n.push(f(a)+4)}});m.selectAll("g").each(function(a,c){if(f(a)<n[0]||f(a)>n[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}m.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);G=f.copy()});L.renderEnd("axis immediate");return a}var e=d3.svg.axis(),f=d3.scale.linear(),
l={top:0,right:0,bottom:0,left:0},h=75,m=60,q=null,k=!0,r=0,x=!0,A=!1,C=!1,E=null,F=0,H=void 0,B=250,N=d3.dispatch("renderEnd");e.scale(f).orient("bottom").tickFormat(function(a){return a});var G,L=c.utils.renderWatch(N,B);a.axis=e;a.dispatch=N;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return F},set:function(a){F=a}},staggerLabels:{get:function(){return A},set:function(a){A=a}},rotateLabels:{get:function(){return r},set:function(a){r=a}},
rotateYLabel:{get:function(){return x},set:function(a){x=a}},showMaxMin:{get:function(){return k},set:function(a){k=a}},axisLabel:{get:function(){return q},set:function(a){q=a}},height:{get:function(){return m},set:function(a){m=a}},ticks:{get:function(){return E},set:function(a){E=a}},width:{get:function(){return h},set:function(a){h=a}},fontSize:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?
a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return B},set:function(a){B=a;L.reset(B)}},scale:{get:function(){return f},set:function(h){f=h;e.scale(f);C="function"===typeof f.rangeBands;c.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,e,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));c.utils.inheritOptionsD3(a,
f,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=function(){function a(h){M.reset();h.each(function(a){var h=f-e.left-e.right,n=l-e.top-e.bottom;z=d3.select(this);c.utils.initSVG(z);m.domain(t||a.map(function(a,c){return k(a,c)})).rangeBands(Q||[0,h],.1);h=[];if(!O){var w=[];a.forEach(function(a,c){var e=r(a),f=A(a),h=C(a),n=E(a),l=H(a);l&&l.forEach(function(a,c){w.push(B(a,c,void 0))});h&&w.push(h);e&&w.push(e);f&&w.push(f);n&&w.push(n)});h=d3.min(w);var Y=d3.max(w);h=[h,
Y]}q.domain(O||h);q.range(J||[n,0]);R=R||q.copy().range([q(0),q(0)]);n=z.selectAll("g.nv-wrap").data([a]);n.enter().append("g").attr("class","nvd3 nv-wrap");n.attr("transform","translate("+e.left+","+e.top+")");var I=n.selectAll(".nv-boxplot").data(function(a){return a}),S=I.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);I.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(m(k(a,c))+.05*m.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});
I.watchTransition(M,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*u/a.length}).attr("transform",function(a,c){return"translate("+(m(k(a,c))+.05*m.rangeBand())+", 0)"});I.exit().remove();S.each(function(a,c){var e=d3.select(this);[C,E].forEach(function(f){void 0!==f(a)&&null!==f(a)&&(f=f===C?"low":"high",e.append("line").style("stroke",F(a)||L(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+f),e.append("line").style("stroke",F(a)||L(a,
c)).attr("class","nv-boxplot-tick nv-boxplot-"+f))})});var W=function(){return null===K?.9*m.rangeBand():Math.min(75,.9*m.rangeBand())},pa=function(){return.45*m.rangeBand()-W()/2},ma=function(){return.45*m.rangeBand()+W()/2};[C,E].forEach(function(a){var c=a===C?"low":"high",e=a===C?r:A;I.select("line.nv-boxplot-whisker.nv-boxplot-"+c).watchTransition(M,"nv-boxplot: boxplots").attr("x1",.45*m.rangeBand()).attr("y1",function(c,e){return q(a(c))}).attr("x2",.45*m.rangeBand()).attr("y2",function(a,
c){return q(e(a))});I.select("line.nv-boxplot-tick.nv-boxplot-"+c).watchTransition(M,"nv-boxplot: boxplots").attr("x1",pa).attr("y1",function(c,e){return q(a(c))}).attr("x2",ma).attr("y2",function(c,e){return q(a(c))})});[C,E].forEach(function(a){S.selectAll(".nv-boxplot-"+(a===C?"low":"high")).on("mouseover",function(c,e,f){d3.select(this).classed("hover",!0);D.elementMouseover({series:{key:a(c),color:F(c)||L(c,f)},e:d3.event})}).on("mouseout",function(c,e,f){d3.select(this).classed("hover",!1);
D.elementMouseout({series:{key:a(c),color:F(c)||L(c,f)},e:d3.event})}).on("mousemove",function(a,c){D.elementMousemove({e:d3.event})})});S.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);D.elementMouseover({key:k(a),value:k(a),series:[{key:"Q3",value:A(a),color:F(a)||L(a,c)},{key:"Q2",value:x(a),color:F(a)||L(a,c)},{key:"Q1",value:r(a),color:F(a)||L(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);D.elementMouseout({key:k(a),value:k(a),series:[{key:"Q3",value:A(a),color:F(a)||L(a,c)},{key:"Q2",value:x(a),color:F(a)||L(a,c)},{key:"Q1",value:r(a),color:F(a)||L(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){D.elementMousemove({e:d3.event})});I.select("rect.nv-boxplot-box").watchTransition(M,"nv-boxplot: boxes").attr("y",function(a,c){return q(A(a))}).attr("width",W).attr("x",pa).attr("height",function(a,c){return Math.abs(q(A(a))-q(r(a)))||1}).style("fill",function(a,c){return F(a)||
L(a,c)}).style("stroke",function(a,c){return F(a)||L(a,c)});S.append("line").attr("class","nv-boxplot-median");I.select("line.nv-boxplot-median").watchTransition(M,"nv-boxplot: boxplots line").attr("x1",pa).attr("y1",function(a,c){return q(x(a))}).attr("x2",ma).attr("y2",function(a,c){return q(x(a))});n=I.selectAll(".nv-boxplot-outlier").data(function(a){return H(a)||[]});n.enter().append("circle").style("fill",function(a,c,e){return G(a,c,e)||L(a,e)}).style("stroke",function(a,c,e){return G(a,c,
e)||L(a,e)}).style("z-index",9E3).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);D.elementMouseover({series:{key:N(a,c,e),color:G(a,c,e)||L(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);D.elementMouseout({series:{key:N(a,c,e),color:G(a,c,e)||L(a,e)},e:d3.event})}).on("mousemove",function(a,c){D.elementMousemove({e:d3.event})});n.attr("class","nv-boxplot-outlier");n.watchTransition(M,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*m.rangeBand()).attr("cy",
function(a,c,e){return q(B(a,c,e))}).attr("r","3");n.exit().remove();m.copy();R=q.copy()});M.renderEnd("nv-boxplot immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,l=500,h=Math.floor(1E4*Math.random()),m=d3.scale.ordinal(),q=d3.scale.linear(),k=function(a){return a.label},r=function(a){return a.values.Q1},x=function(a){return a.values.Q2},A=function(a){return a.values.Q3},C=function(a){return a.values.whisker_low},E=function(a){return a.values.whisker_high},F=function(a){return a.color},
H=function(a){return a.values.outliers},B=function(a,c,e){return a},N=function(a,c,e){return a},G=function(a,c,e){},L=c.utils.defaultColor(),z=null,t,Q,O,J,D=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),u=250,K=null,R,M=c.utils.renderWatch(D,u);a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},maxBoxWidth:{get:function(){return K},
set:function(a){K=a}},x:{get:function(){return k},set:function(a){k=a}},q1:{get:function(){return r},set:function(a){r=a}},q2:{get:function(){return x},set:function(a){x=a}},q3:{get:function(){return A},set:function(a){A=a}},wl:{get:function(){return C},set:function(a){C=a}},wh:{get:function(){return E},set:function(a){E=a}},itemColor:{get:function(){return F},set:function(a){F=a}},outliers:{get:function(){return H},set:function(a){H=a}},outlierValue:{get:function(){return B},set:function(a){B=a}},
outlierLabel:{get:function(){return N},set:function(a){N=a}},outlierColor:{get:function(){return G},set:function(a){G=a}},xScale:{get:function(){return m},set:function(a){m=a}},yScale:{get:function(){return q},set:function(a){q=a}},xDomain:{get:function(){return t},set:function(a){t=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return J},set:function(a){J=a}},id:{get:function(){return h},set:function(a){h=
a}},y:{get:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");return{}},set:function(a){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}},
duration:{get:function(){return u},set:function(a){u=a;M.reset(u)}}});c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(k){L.reset();L.models(e);r&&L.models(f);x&&L.models(l);k.each(function(k){var t=d3.select(this);c.utils.initSVG(t);var z=(m||parseInt(t.style("width"))||960)-h.left-h.right,J=(q||parseInt(t.style("height"))||400)-h.top-h.bottom;a.update=function(){N.beforeUpdate();t.transition().duration(G).call(a)};a.container=this;if(k&&k.length)t.selectAll(".nv-noData").remove();
else return k=t.selectAll(".nv-noData").data([B]),k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",h.left+z/2).attr("y",h.top+J/2).text(function(a){return a}),a;F=e.xScale();H=e.yScale().clamp(!0);var D=t.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([k]),u=D.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),K=u.append("defs"),D=D.select("g");u.append("g").attr("class","nv-x nv-axis");u.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");u.append("g").attr("class","nv-barsWrap");D.attr("transform","translate("+h.left+","+h.top+")");A&&D.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)");e.width(z).height(J);D.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled})).transition().call(e);K.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");D.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",F.rangeBand()*(C?2:1)).attr("height",
16).attr("x",-F.rangeBand()/(C?1:2));r&&(f.scale(F).ticks(c.utils.calcTicksX(z/100,k)).tickSize(-J,0),D.select(".nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")"),D.select(".nv-x.nv-axis").call(f),k=D.select(".nv-x.nv-axis").selectAll("g"),C&&k.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0===e%2?"5":"17")+")"}));x&&(l.scale(H).ticks(Math.floor(J/36)).tickSize(-z,0),D.select(".nv-y.nv-axis").call(l));D.select(".nv-zeroLine line").attr("x1",0).attr("x2",z).attr("y1",
H(0)).attr("y2",H(0))});L.renderEnd("nv-boxplot chart immediate");return a}var e=c.models.boxPlot(),f=c.models.axis(),l=c.models.axis(),h={top:15,right:10,bottom:50,left:60},m=null,q=null,k=c.utils.getColor(),r=!0,x=!0,A=!1,C=!1,E=c.models.tooltip(),F,H,B="No Data Available.",N=d3.dispatch("beforeUpdate","renderEnd"),G=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});l.orient(A?"right":"left").tickFormat(d3.format(",.1f"));E.duration(0);var L=c.utils.renderWatch(N,G);e.dispatch.on("elementMouseover.tooltip",
function(a){E.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){E.data(a).hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){E()});a.dispatch=N;a.boxplot=e;a.xAxis=f;a.yAxis=l;a.tooltip=E;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return m},set:function(a){m=a}},height:{get:function(){return q},set:function(a){q=a}},staggerLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return r},set:function(a){r=
a}},showYAxis:{get:function(){return x},set:function(a){x=a}},tooltipContent:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return G},set:function(a){G=a;L.reset(G);e.duration(G);f.duration(G);l.duration(G)}},color:{get:function(){return k},
set:function(a){k=c.utils.getColor(a);e.color(k)}},rightAlignYAxis:{get:function(){return A},set:function(a){A=a;l.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.bullet=function(){function a(a,c){var e=a.slice();a.sort(function(a,f){var h=e.indexOf(a),l=e.indexOf(f);return d3.descending(c[h],c[l])})}function e(l){l.each(function(e,l){var t=x-f.left-f.right,z=A-f.top-f.bottom;C=d3.select(this);c.utils.initSVG(C);var J=m.call(this,e,l).slice(),D=q.call(this,
e,l).slice(),u=(e.markerLines?e.markerLines:[0]).slice(),K=k.call(this,e,l).slice(),E=(e.rangeLabels?e.rangeLabels:[]).slice(),M=(e.markerLabels?e.markerLabels:[]).slice(),n=(e.markerLineLabels?e.markerLineLabels:[]).slice(),w=(e.measureLabels?e.measureLabels:[]).slice();a(E,J);a(M,D);a(n,u);a(w,K);J.sort(d3.descending);D.sort(d3.descending);u.sort(d3.descending);K.sort(d3.descending);var L=d3.scale.linear().domain(d3.extent(d3.merge([r,J]))).range(h?[t,0]:[0,t]);this.__chart__||d3.scale.linear().domain([0,
Infinity]).range(L.range());this.__chart__=L;d3.min(J);d3.max(J);var t=C.selectAll("g.nv-wrap.nv-bullet").data([e]),Z=t.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),X=t.select("g");l=0;for(var Y=J.length;l<Y;l++){var I="nv-range nv-range"+l;2>=l&&(I=I+" nv-range"+N[l]);Z.append("rect").attr("class",I)}Z.append("rect").attr("class","nv-measure");t.attr("transform","translate("+f.left+","+f.top+")");l=0;for(Y=J.length;l<Y;l++)I=J[l],X.select("rect.nv-range"+l).datum(I).attr("height",
z).transition().duration(G).attr("width",Math.abs(L(I)-L(0))).attr("x",0>I?L(I):L(0));X.select("rect.nv-measure").style("fill",F).attr("height",z/3).attr("y",z/3).on("mouseover",function(){H.elementMouseover({value:K[0],label:w[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){H.elementMousemove({value:K[0],label:w[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){H.elementMouseout({value:K[0],label:w[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(G).attr("width",
0>K?L(0)-L(K[0]):L(K[0])-L(0)).attr("x",0>K?L(K):L(0));J=z/6;D=D.map(function(a,c){return{value:a,label:M[c]}});Z.selectAll("path.nv-markerTriangle").data(D).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+J+"L"+J+","+-J+" "+-J+","+-J+"Z").on("mouseover",function(a){H.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[L(a.value),z/2]})}).on("mousemove",function(a){H.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",
function(a,c){H.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});X.selectAll("path.nv-markerTriangle").data(D).transition().duration(G).attr("transform",function(a){return"translate("+L(a.value)+","+z/2+")"});u=u.map(function(a,c){return{value:a,label:n[c]}});Z.selectAll("line.nv-markerLine").data(u).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(a){return L(a.value)}).attr("y1","2").attr("x2",function(a){return L(a.value)}).attr("y2",
z-2).on("mouseover",function(a){H.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[L(a.value),z/2]})}).on("mousemove",function(a){H.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});X.selectAll("line.nv-markerLine").data(u).transition().duration(G).attr("x1",function(a){return L(a.value)}).attr("x2",
function(a){return L(a.value)});t.selectAll(".nv-range").on("mouseover",function(a,c){H.elementMouseover({value:a,label:E[c]||B[c],color:d3.select(this).style("fill")})}).on("mousemove",function(){H.elementMousemove({value:K[0],label:w[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a,label:E[c]||B[c],color:d3.select(this).style("fill")})})});return e}var f={top:0,right:0,bottom:0,left:0},l="left",h=!1,m=function(a){return a.ranges},q=function(a){return a.markers?
a.markers:[]},k=function(a){return a.measures},r=[0],x=380,A=30,C=null,E=null,F=c.utils.getColor(["#1f77b4"]),H=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),B=["Maximum","Mean","Minimum"],N=["Max","Avg","Min"],G=1E3;e.dispatch=H;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{ranges:{get:function(){return m},set:function(a){m=a}},markers:{get:function(){return q},set:function(a){q=a}},measures:{get:function(){return k},set:function(a){k=a}},forceX:{get:function(){return r},
set:function(a){r=a}},width:{get:function(){return x},set:function(a){x=a}},height:{get:function(){return A},set:function(a){A=a}},tickFormat:{get:function(){return E},set:function(a){E=a}},duration:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},orient:{get:function(){return l},set:function(a){l=
a;h="right"==l||"bottom"==l}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a)}}});c.utils.initOptions(e);return e};c.models.bulletChart=function(){function a(f){f.each(function(l,G){var B=d3.select(this);c.utils.initSVG(B);var z=c.utils.availableWidth(x,B,m),t=A-m.top-m.bottom;a.update=function(){a(f)};a.container=this;if(l&&q.call(this,l,G))B.selectAll(".nv-noData").remove();else return c.utils.noData(a,B),a;var Q=q.call(this,l,G).slice().sort(d3.descending),O=k.call(this,l,
G).slice().sort(d3.descending),J=r.call(this,l,G).slice().sort(d3.descending),D=B.selectAll("g.nv-wrap.nv-bulletChart").data([l]),u=D.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),B=D.select("g");u.append("g").attr("class","nv-bulletWrap");u.append("g").attr("class","nv-titles");D.attr("transform","translate("+m.left+","+m.top+")");var K=d3.scale.linear().domain([0,Math.max(Q[0],O[0]||0,J[0])]).range(h?[z,0]:[0,z]),R=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(K.range());
this.__chart__=K;Q=u.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(A-m.top-m.bottom)/2+")");Q.append("text").attr("class","nv-title").text(function(a){return a.title});Q.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});e.width(z).height(t);Q=B.select(".nv-bulletWrap");d3.transition(Q).call(e);var M=C||K.tickFormat(z/100),z=B.selectAll("g.nv-tick").data(K.ticks(E?E:z/50),function(a){return this.textContent||
M(a)}),B=z.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+R(a)+",0)"}).style("opacity",1E-6);B.append("line").attr("y1",t).attr("y2",7*t/6);B.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*t/6).text(M);B=d3.transition(z).transition().duration(e.duration()).attr("transform",function(a){return"translate("+K(a)+",0)"}).style("opacity",1);B.select("line").attr("y1",t).attr("y2",7*t/6);B.select("text").attr("y",7*t/6);d3.transition(z.exit()).transition().duration(e.duration()).attr("transform",
function(a){return"translate("+K(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var e=c.models.bullet(),f=c.models.tooltip(),l="left",h=!1,m={top:5,right:40,bottom:20,left:120},q=function(a){return a.ranges},k=function(a){return a.markers?a.markers:[]},r=function(a){return a.measures},x=null,A=55,C=null,E=null,F=null,H=d3.dispatch();f.duration(0).headerEnabled(!1);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};f.data(a).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){f()});a.bullet=e;a.dispatch=H;a.tooltip=f;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return q},set:function(a){q=a}},markers:{get:function(){return k},set:function(a){k=a}},measures:{get:function(){return r},set:function(a){r=a}},width:{get:function(){return x},set:function(a){x=a}},height:{get:function(){return A},set:function(a){A=
a}},tickFormat:{get:function(){return C},set:function(a){C=a}},ticks:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return F},set:function(a){F=a}},margin:{get:function(){return m},set:function(a){m.top=void 0!==a.top?a.top:m.top;m.right=void 0!==a.right?a.right:m.right;m.bottom=void 0!==a.bottom?a.bottom:m.bottom;m.left=void 0!==a.left?a.left:m.left}},orient:{get:function(){return l},set:function(a){l=a;h="right"==l||"bottom"==l}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);
return a};c.models.candlestickBar=function(){function a(u){u.each(function(a){m=d3.select(this);var u=c.utils.availableWidth(f,m,e),z=c.utils.availableHeight(l,m,e);c.utils.initSVG(m);var n=u/a[0].values.length*.45;q.domain(t||d3.extent(a[0].values.map(r).concat(H)));N?q.range(O||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):q.range(O||[5+n/2,u-n/2-5]);k.domain(Q||[d3.min(a[0].values.map(F).concat(B)),d3.max(a[0].values.map(E).concat(B))]).range(J||[z,0]);q.domain()[0]===
q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+.01*q.domain()[1]]):q.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var w=a.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),K=w.append("defs"),w=w.append("g"),L=a.select("g");w.append("g").attr("class","nv-ticks");
a.attr("transform","translate("+e.left+","+e.top+")");m.on("click",function(a,c){D.chartClick({data:a,index:c,pos:d3.event,id:h})});K.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");a.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",z);L.attr("clip-path",G?"url(#nv-chart-clip-path-"+h+")":"");u=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});u.exit().remove();z=u.enter().append("g");u.attr("class",function(a,c,e){return(A(a,c)>C(a,
c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});z.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+q(r(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(E(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(F(a,c))});z.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(q(r(a,c))-n/2)+","+(k(x(a,c))-(A(a,c)>C(a,c)?k(C(a,c))-k(A(a,c)):0))+")"}).attr("x",0).attr("y",
0).attr("width",n).attr("height",function(a,c){var e=A(a,c),f=C(a,c);return e>f?k(f)-k(e):k(e)-k(f)});u.select(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+q(r(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(E(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(F(a,c))});u.select(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+(q(r(a,c))-n/2)+","+(k(x(a,c))-(A(a,c)>C(a,c)?k(C(a,c))-k(A(a,c)):0))+")"}).attr("x",
0).attr("y",0).attr("width",n).attr("height",function(a,c){var e=A(a,c),f=C(a,c);return e>f?k(f)-k(e):k(e)-k(f)})});return a}var e={top:0,right:0,bottom:0,left:0},f=null,l=null,h=Math.floor(1E4*Math.random()),m,q=d3.scale.linear(),k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},A=function(a){return a.open},C=function(a){return a.close},E=function(a){return a.high},F=function(a){return a.low},H=[],B=[],N=!1,G=!0,L=c.utils.defaultColor(),z=!1,t,Q,O,J,D=d3.dispatch("stateChange",
"changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();m.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){m.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},
set:function(a){l=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return t},set:function(a){t=a}},yDomain:{get:function(){return Q},set:function(a){Q=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return J},set:function(a){J=a}},forceX:{get:function(){return H},set:function(a){H=a}},forceY:{get:function(){return B},set:function(a){B=a}},padData:{get:function(){return N},set:function(a){N=
a}},clipEdge:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return z},set:function(a){z=a}},x:{get:function(){return r},set:function(a){r=a}},y:{get:function(){return x},set:function(a){x=a}},open:{get:function(){return A()},set:function(a){A=a}},close:{get:function(){return C()},set:function(a){C=a}},high:{get:function(){return E},set:function(a){E=a}},low:{get:function(){return F},set:function(a){F=a}},margin:{get:function(){return e},
set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(w){X.reset();X.models(f);B&&X.models(l);N&&X.models(h);w.each(function(w){function r(){qa.data([Z]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var K=d3.select(this);
c.utils.initSVG(K);K.classed("nv-chart-"+J,!0);var W=c.utils.availableWidth(E,K,x),S=c.utils.availableHeight(F,K,x);a.update=function(){0===n?K.call(a):K.transition().duration(n).call(a)};a.container=this;D.setter(I(w),a.update).getter(Y(w)).update();D.disabled=w.map(function(a){return!!a.disabled});if(!u)for(pa in u={},D)u[pa]=D[pa]instanceof Array?D[pa].slice(0):D[pa];var pa=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,
c){Z.x=d3.event.x;Z.i=Math.round(V.invert(Z.x));r()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");D.index=Z.i;M.stateChange(D)});if(w&&w.length&&w.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return c.utils.noData(a,K),a;Q=f.xScale();O=f.yScale();if(t)f.yDomain(null);else{var X=w.filter(function(a){return!a.disabled}).map(function(a,c){var e=d3.extent(a.values,f.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-
e[0])/(1+e[0])]}),X=[d3.min(X,function(a){return a[0]}),d3.max(X,function(a){return a[1]})];f.yDomain(X)}V.domain([0,w[0].values.length-1]).range([0,W]).clamp(!0);w=e(Z.i,w);var la=z?"none":"all",ca=K.selectAll("g.nv-wrap.nv-cumulativeLine").data([w]),ea=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),X=ca.select("g");ea.append("g").attr("class","nv-interactive");ea.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ea.append("g").attr("class",
"nv-y nv-axis");ea.append("g").attr("class","nv-background");ea.append("g").attr("class","nv-linesWrap").style("pointer-events",la);ea.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ea.append("g").attr("class","nv-legendWrap");ea.append("g").attr("class","nv-controlsWrap");H?(m.width(W),X.select(".nv-legendWrap").datum(w).call(m),A||m.height()===x.top||(x.top=m.height(),S=c.utils.availableHeight(F,K,x)),X.select(".nv-legendWrap").attr("transform","translate(0,"+-x.top+
")")):X.select(".nv-legendWrap").selectAll("*").remove();L?(la=[{key:"Re-scale y-axis",disabled:!t}],q.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),X.select(".nv-controlsWrap").datum(la).attr("transform","translate(0,"+-x.top+")").call(q)):X.select(".nv-controlsWrap").selectAll("*").remove();ca.attr("transform","translate("+x.left+","+x.top+")");G&&X.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)");la=w.filter(function(a){return a.tempDisabled});
ca.select(".tempDisabled").remove();la.length&&ca.append("text").attr("class","tempDisabled").attr("x",W/2).attr("y","-.71em").style("text-anchor","end").text(la.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");z&&(k.width(W).height(S).margin({left:x.left,top:x.top}).svgContainer(K).xScale(Q),ca.select(".nv-interactive").call(k));ea.select(".nv-background").append("rect");X.select(".nv-background rect").attr("width",W).attr("height",S);f.y(function(a){return a.display.y}).width(W).height(S).color(w.map(function(a,
c){return a.color||C(a,c)}).filter(function(a,c){return!w[c].disabled&&!w[c].tempDisabled}));ca=X.select(".nv-linesWrap").datum(w.filter(function(a){return!a.disabled&&!a.tempDisabled}));ca.call(f);w.forEach(function(a,c){a.seriesIndex=c});ea=w.filter(function(a){return!a.disabled&&!!R(a)});ea=X.select(".nv-avgLinesWrap").selectAll("line").data(ea,function(a){return a.key});la=function(a){a=O(R(a));return 0>a?0:a>S?S:a};ea.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",
function(a,c){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",W).attr("y1",la).attr("y2",la);ea.style("stroke-opacity",function(a){a=O(R(a));return 0>a||a>S?0:1}).attr("x1",0).attr("x2",W).attr("y1",la).attr("y2",la);ea.exit().remove();var qa=ca.selectAll(".nv-indexLine").data([Z]);qa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(pa);qa.attr("transform",function(a){return"translate("+
V(a.i)+",0)"}).attr("height",S);B&&(l.scale(Q)._ticks(c.utils.calcTicksX(W/70,w)).tickSize(-S,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")"),X.select(".nv-x.nv-axis").call(l));N&&(h.scale(O)._ticks(c.utils.calcTicksY(S/36,w)).tickSize(-W,0),X.select(".nv-y.nv-axis").call(h));X.select(".nv-background rect").on("click",function(){Z.x=d3.mouse(this)[0];Z.i=Math.round(V.invert(Z.x));D.index=Z.i;M.stateChange(D);r()});f.dispatch.on("elementClick",function(a){Z.i=a.pointIndex;
Z.x=V(Z.i);D.index=Z.i;M.stateChange(D);r()});q.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;t=!c.disabled;D.rescaleY=t;M.stateChange(D);a.update()});m.dispatch.on("stateChange",function(c){for(var e in c)D[e]=c[e];M.stateChange(D);a.update()});k.dispatch.on("elementMousemove",function(e){f.clearHighlights();var n,m,t,u=[];w.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){m=c.interactiveBisect(h.values,e.pointXValue,a.x());f.highlightPoint(l,m,!0);
var k=h.values[m];"undefined"!==typeof k&&("undefined"===typeof n&&(n=k),"undefined"===typeof t&&(t=a.xScale()(a.x()(k,m))),u.push({key:h.key,value:a.y()(k,m),color:C(h,h.seriesIndex)}))});if(2<u.length){var q=a.yScale().invert(e.mouseY),r=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),q=c.nearestValueIndex(u.map(function(a){return a.value}),q,r);null!==q&&(u[q].highlight=!0)}q=l.tickFormat()(a.x()(n,m),m);k.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:q,
series:u})();k.renderGuideLine(t)});k.dispatch.on("elementMouseout",function(a){f.clearHighlights()});M.on("changeState",function(c){"undefined"!==typeof c.disabled&&(w.forEach(function(a,e){a.disabled=c.disabled[e]}),D.disabled=c.disabled);"undefined"!==typeof c.index&&(Z.i=c.index,Z.x=V(Z.i),D.index=c.index,qa.data([Z]));"undefined"!==typeof c.rescaleY&&(t=c.rescaleY);a.update()})});X.renderEnd("cumulativeLineChart immediate");return a}function e(a,c){S||(S=f.y());return c.map(function(c,e){if(!c.values)return c;
var f=c.values[a];if(null==f)return c;var h=S(f,a);if(-.95>h&&!w)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(S(a,c)-h)/(1+h)};return a});return c})}var f=c.models.line(),l=c.models.axis(),h=c.models.axis(),m=c.models.legend(),q=c.models.legend(),k=c.interactiveGuideline(),r=c.models.tooltip(),x={top:30,right:30,bottom:50,left:60},A=null,C=c.utils.defaultColor(),E=null,F=null,H=!0,B=!0,N=!0,G=!1,L=!0,z=!1,t=!0,Q,O,J=f.id(),D=c.utils.state(),u=null,
K=null,R=function(a){return a.average},M=d3.dispatch("stateChange","changeState","renderEnd"),n=250,w=!1;D.index=0;D.rescaleY=t;l.orient("bottom").tickPadding(7);h.orient(G?"right":"left");r.valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,c){return l.tickFormat()(a,c)});q.updateState(!1);var V=d3.scale.linear(),Z={i:0,x:0},X=c.utils.renderWatch(M,n),Y=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:Z.i,rescaleY:t}}},I=function(a){return function(c){void 0!==
c.index&&(Z.i=c.index);void 0!==c.rescaleY&&(t=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};f.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;r.data(c).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){r.hidden(!0)});var S=null;a.dispatch=M;a.lines=f;a.legend=m;a.controls=q;a.xAxis=l;a.yAxis=h;a.interactiveLayer=k;a.state=D;a.tooltip=r;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return F},set:function(a){F=a}},rescaleY:{get:function(){return t},set:function(a){t=a}},showControls:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return H},set:function(a){H=a}},average:{get:function(){return R},set:function(a){R=a}},defaultState:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return K},set:function(a){K=a}},showXAxis:{get:function(){return B},
set:function(a){B=a}},showYAxis:{get:function(){return N},set:function(a){N=a}},noErrorCheck:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return x},set:function(a){void 0!==a.top&&(A=x.top=a.top);x.right=void 0!==a.right?a.right:x.right;x.bottom=void 0!==a.bottom?a.bottom:x.bottom;x.left=void 0!==a.left?a.left:x.left}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a);m.color(C)}},useInteractiveGuideline:{get:function(){return z},set:function(c){z=c;!0===
c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return G},set:function(a){G=a;h.orient(a?"right":"left")}},duration:{get:function(){return n},set:function(a){n=a;f.duration(n);l.duration(n);h.duration(n);X.reset(n)}}});c.utils.inheritOptions(a,f);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(h){O.reset();h.each(function(a){var h=f-e.left-e.right,t=l-e.top-e.bottom;m=d3.select(this);c.utils.initSVG(m);a.forEach(function(a,c){a.values.forEach(function(a){a.series=
c})});var D=H&&B?[]:a.map(function(a){return a.values.map(function(a,c){return{x:r(a,c),y:x(a,c),y0:a.y0}})});q.domain(H||d3.merge(D).map(function(a){return a.x})).rangeBands(N||[0,h],.1);k.domain(B||d3.extent(d3.merge(D).map(function(a){return a.y}).concat(A)));E?k.range(G||[t-(0>k.domain()[0]?12:0),0<k.domain()[1]?12:0]):k.range(G||[t,0]);Q=Q||k.copy().range([k(0),k(0)]);h=m.selectAll("g.nv-wrap.nv-discretebar").data([a]);t=h.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");
h.select("g");t.append("g").attr("class","nv-groups");h.attr("transform","translate("+e.left+","+e.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(O,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});
h.watchTransition(O,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();t=h.enter().append("g").attr("transform",function(a,c,e){return"translate("+(q(r(a,c))+.05*q.rangeBand())+", "+k(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L.elementMouseout({data:a,
index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){L.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){L.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){L.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});t.append("rect").attr("height",0).attr("width",.9*q.rangeBand()/a.length);
E?(t.append("text").attr("text-anchor","middle"),h.select("text").text(function(a,c){return F(x(a,c))}).watchTransition(O,"discreteBar: bars text").attr("x",.9*q.rangeBand()/2).attr("y",function(a,c){return 0>x(a,c)?k(x(a,c))-k(0)+12:-4})):h.selectAll("text").remove();h.attr("class",function(a,c){return 0>x(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||C(a,c)}).style("stroke",function(a,c){return a.color||C(a,c)}).select("rect").attr("class",z).watchTransition(O,
"discreteBar: bars rect").attr("width",.9*q.rangeBand()/a.length);h.watchTransition(O,"discreteBar: bars").attr("transform",function(a,c){var e=q(r(a,c))+.05*q.rangeBand(),f=0>x(a,c)?k(0):1>k(0)-k(x(a,c))?k(0)-1:k(x(a,c));return"translate("+e+", "+f+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(k(x(a,c))-k(0)),1)});q.copy();Q=k.copy()});O.renderEnd("discreteBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,l=500,h=Math.floor(1E4*Math.random()),m,q=d3.scale.ordinal(),
k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},A=[0],C=c.utils.defaultColor(),E=!1,F=d3.format(",.2f"),H,B,N,G,L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),z="discreteBar",t=250,Q,O=c.utils.renderWatch(L,t);a.dispatch=L;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=
a}},forceY:{get:function(){return A},set:function(a){A=a}},showValues:{get:function(){return E},set:function(a){E=a}},x:{get:function(){return r},set:function(a){r=a}},y:{get:function(){return x},set:function(a){x=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return H},set:function(a){H=a}},yDomain:{get:function(){return B},set:function(a){B=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return G},
set:function(a){G=a}},valueFormat:{get:function(){return F},set:function(a){F=a}},id:{get:function(){return h},set:function(a){h=a}},rectClass:{get:function(){return z},set:function(a){z=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a)}},duration:{get:function(){return t},
set:function(a){t=a;O.reset(t)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=function(){function a(m){J.reset();J.models(e);E&&J.models(f);F&&J.models(l);m.each(function(m){var t=d3.select(this);c.utils.initSVG(t);var u=c.utils.availableWidth(r,t,q),D=c.utils.availableHeight(x,t,q);a.update=function(){Q.beforeUpdate();t.transition().duration(O).call(a)};a.container=this;if(m&&m.length&&m.filter(function(a){return a.values.length}).length)t.selectAll(".nv-noData").remove();else return c.utils.noData(a,
t),a;L=e.xScale();z=e.yScale().clamp(!0);var n=t.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([m]),w=n.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),J=w.append("defs"),A=n.select("g");w.append("g").attr("class","nv-x nv-axis");w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");w.append("g").attr("class","nv-barsWrap");w.append("g").attr("class","nv-legendWrap");A.attr("transform","translate("+q.left+","+q.top+
")");C?(h.width(u),A.select(".nv-legendWrap").datum(m).call(h),k||h.height()===q.top||(q.top=h.height(),D=c.utils.availableHeight(x,t,q)),n.select(".nv-legendWrap").attr("transform","translate(0,"+-q.top+")")):A.select(".nv-legendWrap").selectAll("*").remove();H&&A.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)");e.width(u).height(D);A.select(".nv-barsWrap").datum(m.filter(function(a){return!a.disabled})).transition().call(e);J.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");
A.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",L.rangeBand()*(B?2:1)).attr("height",16).attr("x",-L.rangeBand()/(B?1:2));E&&(f.scale(L)._ticks(c.utils.calcTicksX(u/100,m)).tickSize(-D,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+(z.range()[0]+(e.showValues()&&0>z.domain()[0]?16:0))+")"),A.select(".nv-x.nv-axis").call(f),n=A.select(".nv-x.nv-axis").selectAll("g"),B&&n.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}),G&&n.selectAll(".tick text").attr("transform",
"rotate("+G+" 0,0)").style("text-anchor",0<G?"start":"end"),N&&A.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand()));F&&(l.scale(z)._ticks(c.utils.calcTicksY(D/36,m)).tickSize(-u,0),A.select(".nv-y.nv-axis").call(l));A.select(".nv-zeroLine line").attr("x1",0).attr("x2",H?-u:u).attr("y1",z(0)).attr("y2",z(0))});J.renderEnd("discreteBar chart immediate");return a}var e=c.models.discreteBar(),f=c.models.axis(),l=c.models.axis(),h=c.models.legend(),m=c.models.tooltip(),q={top:15,right:10,
bottom:50,left:60},k=null,r=null,x=null,A=c.utils.getColor(),C=!1,E=!0,F=!0,H=!1,B=!1,N=!1,G=0,L,z,t=null,Q=d3.dispatch("beforeUpdate","renderEnd"),O=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});l.orient(H?"right":"left").tickFormat(d3.format(",.1f"));m.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).keyFormatter(function(a,c){return f.tickFormat()(a,c)});var J=c.utils.renderWatch(Q,O);e.dispatch.on("elementMouseover.tooltip",function(c){c.series=
{key:a.x()(c.data),value:a.y()(c.data),color:c.color};m.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){m.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){m()});a.dispatch=Q;a.discretebar=e;a.legend=h;a.xAxis=f;a.yAxis=l;a.tooltip=m;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return x},set:function(a){x=a}},showLegend:{get:function(){return C},set:function(a){C=
a}},staggerLabels:{get:function(){return B},set:function(a){B=a}},rotateLabels:{get:function(){return G},set:function(a){G=a}},wrapLabels:{get:function(){return N},set:function(a){N=!!a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return t},set:function(a){t=a}},margin:{get:function(){return q},set:function(a){void 0!==a.top&&(k=q.top=a.top);q.right=void 0!==a.right?a.right:q.right;q.bottom=void 0!==a.bottom?
a.bottom:q.bottom;q.left=void 0!==a.left?a.left:q.left}},duration:{get:function(){return O},set:function(a){O=a;J.reset(O);e.duration(O);f.duration(O);l.duration(O)}},color:{get:function(){return A},set:function(a){A=c.utils.getColor(a);e.color(A);h.color(A)}},rightAlignYAxis:{get:function(){return H},set:function(a){H=a;l.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.distribution=function(){function a(f){C.reset();f.each(function(a){var f="x"==
h?"y":"x",r=d3.select(this);c.utils.initSVG(r);A=A||k;a=r.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");r=a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");a=r.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return q(a,c)});r=a.selectAll("line.nv-dist"+h).data(function(a){return a.values});
r.enter().append("line").attr(h+"1",function(a,c){return A(m(a,c))}).attr(h+"2",function(a,c){return A(m(a,c))});C.transition(a.exit().selectAll("line.nv-dist"+h),"dist exit").attr(h+"1",function(a,c){return k(m(a,c))}).attr(h+"2",function(a,c){return k(m(a,c))}).style("stroke-opacity",0).remove();r.attr("class",function(a,c){return"nv-dist"+h+" nv-dist"+h+"-"+c}).attr(f+"1",0).attr(f+"2",l);C.transition(r,"dist").attr(h+"1",function(a,c){return k(m(a,c))}).attr(h+"2",function(a,c){return k(m(a,c))});
A=k.copy()});C.renderEnd("distribution immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=400,l=8,h="x",m=function(a){return a[h]},q=c.utils.defaultColor(),k=d3.scale.linear(),r=250,x=d3.dispatch("renderEnd"),A,C=c.utils.renderWatch(x,r);a.options=c.utils.optionsFunc.bind(a);a.dispatch=x;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.right="undefined"!=typeof c.right?c.right:e.right;e.bottom="undefined"!=typeof c.bottom?c.bottom:e.bottom;
e.left="undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.axis=function(c){if(!arguments.length)return h;h=c;return a};a.size=function(c){if(!arguments.length)return l;l=c;return a};a.getData=function(c){if(!arguments.length)return m;m=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return k;k=c;return a};a.color=function(e){if(!arguments.length)return q;q=c.utils.getColor(e);return a};a.duration=function(c){if(!arguments.length)return r;
r=c;C.reset(r);return a};return a};c.models.focus=function(a){function e(z){L.reset();L.models(a);x&&L.models(f);A&&L.models(l);z.each(function(t){function z(){h.empty()||h.extent(H);n.data([h.empty()?E.domain():H]).each(function(a,c){var e=E(a[0])-E.range()[0],f=D-E(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",E(a[1])).attr("width",0>f?0:f)})}function O(a){H=h.empty()?null:h.extent();var c=h.empty()?E.domain():h.extent();N.brush({extent:c,
brush:h});z();if(a)N.onBrush(c)}var J=d3.select(this);c.utils.initSVG(J);var D=c.utils.availableWidth(k,J,m),u=r-m.top-m.bottom;e.update=function(){0===B?J.call(e):J.transition().duration(B).call(e)};e.container=this;E=a.xScale();F=a.yScale();var K=J.selectAll("g.nv-focus").data([t]),R=K.enter().append("g").attr("class","nvd3 nv-focus").append("g"),M=K.select("g");K.attr("transform","translate("+m.left+","+m.top+")");R.append("g").attr("class","nv-background").append("rect");R.append("g").attr("class",
"nv-x nv-axis");R.append("g").attr("class","nv-y nv-axis");R.append("g").attr("class","nv-contentWrap");R.append("g").attr("class","nv-brushBackground");R.append("g").attr("class","nv-x nv-brush");C&&M.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)");M.select(".nv-background rect").attr("width",D).attr("height",u);a.width(D).height(u).color(t.map(function(a,c){return a.color||q(a,c)}).filter(function(a,c){return!t[c].disabled}));K=M.select(".nv-contentWrap").datum(t.filter(function(a){return!a.disabled}));
d3.transition(K).call(a);h.x(E).on("brush",function(){O(G)});h.on("brushend",function(){if(!G)N.onBrush(h.empty()?E.domain():h.extent())});H&&h.extent(H);var n=M.select(".nv-brushBackground").selectAll("g").data([H||h.extent()]),K=n.enter().append("g");K.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",u);K.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",u);K=M.select(".nv-x.nv-brush").call(h);K.selectAll("rect").attr("height",u);K.selectAll(".resize").append("path").attr("d",
function(a){var c=(a=+("e"==a))?1:-1,e=u/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});O(!0);M.select(".nv-background rect").attr("width",D).attr("height",u);x&&(f.scale(E)._ticks(c.utils.calcTicksX(D/100,t)).tickSize(-u,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+F.range()[0]+")"),d3.transition(M.select(".nv-x.nv-axis")).call(f));A&&(l.scale(F)._ticks(c.utils.calcTicksY(u/
36,t)).tickSize(-D,0),d3.transition(M.select(".nv-y.nv-axis")).call(l));M.select(".nv-x.nv-axis").attr("transform","translate(0,"+F.range()[0]+")")});L.renderEnd("focus immediate");return e}a=a||c.models.line();var f=c.models.axis(),l=c.models.axis(),h=d3.svg.brush(),m={top:10,right:0,bottom:30,left:0},q=c.utils.defaultColor(),k=null,r=70,x=!0,A=!1,C=!1,E,F,H=null,B=250,N=d3.dispatch("brush","onBrush","renderEnd"),G=!0;a.interactive(!1);a.pointActive(function(a){return!1});var L=c.utils.renderWatch(N,
B);e.dispatch=N;e.content=a;e.brush=h;e.xAxis=f;e.yAxis=l;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return r},set:function(a){r=a}},showXAxis:{get:function(){return x},set:function(a){x=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},brushExtent:{get:function(){return H},set:function(a){H=a}},syncBrushing:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return m},
set:function(a){m.top=void 0!==a.top?a.top:m.top;m.right=void 0!==a.right?a.right:m.right;m.bottom=void 0!==a.bottom?a.bottom:m.bottom;m.left=void 0!==a.left?a.left:m.left}},duration:{get:function(){return B},set:function(c){B=c;L.reset(B);a.duration(B);f.duration(B);l.duration(B)}},color:{get:function(){return q},set:function(e){q=c.utils.getColor(e);a.color(q)}},interpolate:{get:function(){return a.interpolate()},set:function(c){a.interpolate(c)}},xTickFormat:{get:function(){return f.tickFormat()},
set:function(a){f.tickFormat(a)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(a){l.tickFormat(a)}},x:{get:function(){return a.x()},set:function(c){a.x(c)}},y:{get:function(){return a.y()},set:function(c){a.y(c)}},rightAlignYAxis:{get:function(){return C},set:function(a){C=a;l.orient(C?"right":"left")}}});c.utils.inheritOptions(e,a);c.utils.initOptions(e);return e};c.models.forceDirectedGraph=function(){function a(m){z.reset();m.each(function(m){h=d3.select(this);c.utils.initSVG(h);
var t=c.utils.availableWidth(f,h,e),r=c.utils.availableHeight(l,h,e);h.attr("width",t).attr("height",r);if(m&&m.links&&m.nodes)h.selectAll(".nv-noData").remove();else return c.utils.noData(a,h),a;h.selectAll("*").remove();var z=new Set;m.nodes.forEach(function(a){Object.keys(a).forEach(function(a){z.add(a)})});var t=d3.layout.force().nodes(m.nodes).links(m.links).size([t,r]).linkStrength(x).friction(A).linkDistance(C).charge(E).gravity(F).theta(H).alpha(B).start(),u=h.selectAll(".link").data(m.links).enter().append("line").attr("class",
"nv-force-link").style("stroke-width",function(a){return Math.sqrt(a.value)}),K=h.selectAll(".node").data(m.nodes).enter().append("g").attr("class","nv-force-node").call(t.drag);K.append("circle").attr("r",N).style("fill",function(a){return q(a)}).on("mouseover",function(a){h.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.py);h.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.px);var c=q(a);a.series=[];z.forEach(function(e){a.series.push({color:c,
key:e,value:a[e]})});k.data(a).hidden(!1)}).on("mouseout",function(a){k.hidden(!0)});k.headerFormatter(function(a){return"Node"});L(u);G(K);t.on("tick",function(){u.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y});K.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"})})});return a}var e={top:2,right:0,bottom:2,left:0},f=400,l=32,h=null,m=d3.dispatch("renderEnd"),q=c.utils.getColor(["#000"]),
k=c.models.tooltip(),r=null,x=.1,A=.9,C=30,E=-120,F=.1,H=.8,B=.1,N=5,G=function(a){},L=function(a){},z=c.utils.renderWatch(m);a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},linkStrength:{get:function(){return x},set:function(a){x=a}},friction:{get:function(){return A},set:function(a){A=a}},linkDist:{get:function(){return C},set:function(a){C=a}},charge:{get:function(){return E},
set:function(a){E=a}},gravity:{get:function(){return F},set:function(a){F=a}},theta:{get:function(){return H},set:function(a){H=a}},alpha:{get:function(){return B},set:function(a){B=a}},radius:{get:function(){return N},set:function(a){N=a}},x:{get:function(){return getX},set:function(a){getX=d3.functor(a)}},y:{get:function(){return getY},set:function(a){getY=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return q},set:function(a){q=c.utils.getColor(a)}},noData:{get:function(){return r},set:function(a){r=a}},nodeExtras:{get:function(){return G},set:function(a){G=a}},linkExtras:{get:function(){return L},set:function(a){L=a}}});a.dispatch=m;a.tooltip=k;c.utils.initOptions(a);return a};c.models.furiousLegend=function(){function a(N){function G(a,c){if("furious"!=B)return"#000";if(F)return a.disengaged?q(a,
c):"#fff";if(!F)return a.disabled?q(a,c):"#fff"}function L(a,c){return F&&"furious"==B?a.disengaged?"#fff":q(a,c):a.disabled?"#fff":q(a,c)}N.each(function(a){var t=f-e.left-e.right,z=d3.select(this);c.utils.initSVG(z);z=z.selectAll("g.nv-legend").data([a]);z.enter().append("g").attr("class","nvd3 nv-legend").append("g");a=z.select("g");z.attr("transform","translate("+e.left+","+e.top+")");var O=a.selectAll(".nv-series").data(function(a){return"furious"!=B?a:a.filter(function(a){return F?!0:!a.disengaged})}),
z=O.enter().append("g").attr("class","nv-series");if("classic"==B){z.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var J=O.select("circle")}else"furious"==B&&(z.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),J=O.select("rect"),z.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),O.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",G(a,c))}));z.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var D=O.select("text.nv-legend-text");O.on("mouseover",function(a,c){H.legendMouseover(a,c)}).on("mouseout",function(a,c){H.legendMouseout(a,c)}).on("click",function(a,c){H.legendClick(a,c);var e=O.data();C&&("classic"==B?E?(e.forEach(function(a){a.disabled=
!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==B&&(F?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):F||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),H.stateChange({disabled:e.map(function(a){return!!a.disabled}),
disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=B||!F)if(H.legendDblclick(a,c),C){var e=O.data();e.forEach(function(a){a.disabled=!0;"furious"==B&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==B&&(a.userDisabled=a.disabled);H.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});O.classed("nv-disabled",function(a){return a.userDisabled});O.exit().remove();D.attr("fill",G).text(function(a){return m(h(a))});switch(B){case "furious":var u=
23;break;case "classic":u=20}if(r){var K=[];O.each(function(a,e){if(m(h(a))&&m(h(a)).length>k){var f=m(h(a)).substring(0,k);f=d3.select(this).select("text").text(f+"...");d3.select(this).append("svg:title").text(m(h(a)))}else f=d3.select(this).select("text");try{var n=f.node().getComputedTextLength();if(0>=n)throw Error();}catch(ma){n=c.utils.calcApproxTextWidth(f)}K.push(n+x)});for(var N=0,M=0,z=[];M<t&&N<K.length;)z[N]=K[N],M+=K[N++];for(0===N&&(N=1);M>t&&1<N;){z=[];N--;for(M=0;M<K.length;M++)K[M]>
(z[M%N]||0)&&(z[M%N]=K[M]);M=z.reduce(function(a,c,e,f){return a+c})}for(var n=[],w=t=0;t<N;t++)n[t]=w,w+=z[t];O.attr("transform",function(a,c){return"translate("+n[c%N]+","+(5+Math.floor(c/N)*u)+")"});A?a.attr("transform","translate("+(f-e.right-M)+","+e.top+")"):a.attr("transform","translate(0,"+e.top+")");l=e.top+e.bottom+Math.ceil(K.length/N)*u}else{var V=5,Z=5,X=0,Y;O.attr("transform",function(a,c){var h=d3.select(this).select("text").node().getComputedTextLength()+x;Y=Z;f<e.left+e.right+Y+h&&
(Z=Y=5,V+=u);Z+=h;Z>X&&(X=Z);return"translate("+Y+","+V+")"});a.attr("transform","translate("+(f-e.right-X)+","+e.top+")");l=e.top+e.bottom+V+15}"furious"==B&&J.attr("width",function(a,c){return D[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);J.style("fill",L).style("stroke",function(a,c){return a.color||q(a,c)})});return a}var e={top:5,right:0,bottom:5,left:0},f=400,l=20,h=function(a){return a.key},m=function(a){return a},q=c.utils.getColor(),k=20,r=!0,x=28,A=!0,
C=!0,E=!1,F=!1,H=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),B="classic";a.dispatch=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},key:{get:function(){return h},set:function(a){h=a}},keyFormatter:{get:function(){return m},set:function(a){m=a}},align:{get:function(){return r},set:function(a){r=a}},rightAlign:{get:function(){return A},
set:function(a){A=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},padding:{get:function(){return x},set:function(a){x=a}},updateState:{get:function(){return C},set:function(a){C=a}},radioButtonMode:{get:function(){return E},set:function(a){E=a}},expanded:{get:function(){return F},set:function(a){F=a}},vers:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return q},set:function(a){q=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(O){O.each(function(a){Q.reset();m=d3.select(this);var D=c.utils.availableWidth(f,m,e),u=c.utils.availableHeight(l,m,e);c.utils.initSVG(m);q.domain(B||d3.extent(a[0].values.map(r).concat(A)));E?q.range(G||[.5*D/a[0].values.length,D*(a[0].values.length-.5)/a[0].values.length]):
q.range(G||[0,D]);k.domain(N||d3.extent(a[0].values.map(x).concat(C))).range(L||[u,0]);q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+.01*q.domain()[1]]):q.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var K=m.selectAll("g.nv-wrap.nv-historicalBar-"+h).data([a[0].values]),O=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
h),M=O.append("defs"),O=O.append("g"),n=K.select("g");O.append("g").attr("class","nv-bars");K.attr("transform","translate("+e.left+","+e.top+")");m.on("click",function(a,c){z.chartClick({data:a,index:c,pos:d3.event,id:h})});M.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");K.select("#nv-chart-clip-path-"+h+" rect").attr("width",D).attr("height",u);n.attr("clip-path",F?"url(#nv-chart-clip-path-"+h+")":"");u=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
c){return r(a,c)});u.exit().remove();u.enter().append("rect").attr("x",0).attr("y",function(a,e){return c.utils.NaNtoZero(k(Math.max(0,x(a,e))))}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.abs(k(x(a,e))-k(0)))}).attr("transform",function(c,e){return"translate("+(q(r(c,e))-D/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){t&&(d3.select(this).classed("hover",!0),z.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){t&&(d3.select(this).classed("hover",
!1),z.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){t&&z.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){t&&(z.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(a,c){t&&(z.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});u.attr("fill",function(a,
c){return H(a,c)}).attr("class",function(a,c,e){return(0>x(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(Q,"bars").attr("transform",function(c,e){return"translate("+(q(r(c,e))-D/a[0].values.length*.45)+",0)"}).attr("width",D/a[0].values.length*.9);u.watchTransition(Q,"bars").attr("y",function(a,e){var f=0>x(a,e)?k(0):1>k(0)-k(x(a,e))?k(0)-1:k(x(a,e));return c.utils.NaNtoZero(f)}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.max(Math.abs(k(x(a,e))-k(0)),
1))})});Q.renderEnd("historicalBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=null,l=null,h=Math.floor(1E4*Math.random()),m=null,q=d3.scale.linear(),k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},A=[],C=[0],E=!1,F=!0,H=c.utils.defaultColor(),B,N,G,L,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),t=!0,Q=c.utils.renderWatch(z,0);a.highlightPoint=function(a,c){m.select(".nv-bars .nv-bar-0-"+
a).classed("hover",c)};a.clearHighlights=function(){m.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=z;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},forceX:{get:function(){return A},set:function(a){A=a}},forceY:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return E},set:function(a){E=a}},x:{get:function(){return r},set:function(a){r=
a}},y:{get:function(){return x},set:function(a){x=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return B},set:function(a){B=a}},yDomain:{get:function(){return N},set:function(a){N=a}},xRange:{get:function(){return G},set:function(a){G=a}},yRange:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return F},set:function(a){F=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return t},
set:function(a){t=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBarChart=function(a){function e(a){a.each(function(k){u.reset();u.models(f);H&&u.models(l);B&&u.models(h);var M=d3.select(this);c.utils.initSVG(M);
var n=c.utils.availableWidth(C,M,r),w=c.utils.availableHeight(E,M,r);e.update=function(){M.transition().duration(D).call(e)};e.container=this;t.disabled=k.map(function(a){return!!a.disabled});if(!Q)for(O in Q={},t)Q[O]=t[O]instanceof Array?t[O].slice(0):t[O];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)M.selectAll(".nv-noData").remove();else return c.utils.noData(e,M),e;L=f.xScale();z=f.yScale();var K=M.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]);var O=K.enter().append("g").attr("class",
"nvd3 nv-wrap nv-historicalBarChart").append("g");var R=K.select("g");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-barsWrap");O.append("g").attr("class","nv-legendWrap");O.append("g").attr("class","nv-interactive");F?(m.width(n),R.select(".nv-legendWrap").datum(k).call(m),x||m.height()===r.top||(r.top=m.height(),w=c.utils.availableHeight(E,M,r)),K.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")):R.select(".nv-legendWrap").selectAll("*").remove();
K.attr("transform","translate("+r.left+","+r.top+")");N&&R.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)");G&&(q.width(n).height(w).margin({left:r.left,top:r.top}).svgContainer(M).xScale(L),K.select(".nv-interactive").call(q));f.width(n).height(w).color(k.map(function(a,c){return a.color||A(a,c)}).filter(function(a,c){return!k[c].disabled}));R.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled})).transition().call(f);H&&(l.scale(L)._ticks(c.utils.calcTicksX(n/100,k)).tickSize(-w,
0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+z.range()[0]+")"),R.select(".nv-x.nv-axis").transition().call(l));B&&(h.scale(z)._ticks(c.utils.calcTicksY(w/36,k)).tickSize(-n,0),R.select(".nv-y.nv-axis").transition().call(h));q.dispatch.on("elementMousemove",function(a){f.clearHighlights();var n,m,w,t=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){m=c.interactiveBisect(h.values,a.pointXValue,e.x());f.highlightPoint(m,!0);var k=h.values[m];void 0!==
k&&(void 0===n&&(n=k),void 0===w&&(w=e.xScale()(e.x()(k,m))),t.push({key:h.key,value:e.y()(k,m),color:A(h,h.seriesIndex),data:h.values[m]}))});var u=l.tickFormat()(e.x()(n,m));q.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:u,index:m,series:t})();q.renderGuideLine(w)});q.dispatch.on("elementMouseout",function(a){J.tooltipHide();f.clearHighlights()});m.dispatch.on("legendClick",function(c,f){c.disabled=!c.disabled;k.filter(function(a){return!a.disabled}).length||k.map(function(a){a.disabled=
!1;K.selectAll(".nv-series").classed("disabled",!1);return a});t.disabled=k.map(function(a){return!!a.disabled});J.stateChange(t);a.transition().call(e)});m.dispatch.on("legendDblclick",function(a){k.forEach(function(a){a.disabled=!0});a.disabled=!1;t.disabled=k.map(function(a){return!!a.disabled});J.stateChange(t);e.update()});J.on("changeState",function(a){"undefined"!==typeof a.disabled&&(k.forEach(function(c,e){c.disabled=a.disabled[e]}),t.disabled=a.disabled);e.update()})});u.renderEnd("historicalBarChart immediate");
return e}var f=a||c.models.historicalBar(),l=c.models.axis(),h=c.models.axis(),m=c.models.legend(),q=c.interactiveGuideline(),k=c.models.tooltip(),r={top:30,right:90,bottom:50,left:90},x=null,A=c.utils.defaultColor(),C=null,E=null,F=!1,H=!0,B=!0,N=!1,G=!1,L,z,t={},Q=null,O=null,J=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),D=250;l.orient("bottom").tickPadding(7);h.orient(N?"right":"left");k.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,
c){return l.tickFormat()(a,c)});var u=c.utils.renderWatch(J,0);f.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:e.x()(a.data),value:e.y()(a.data),color:a.color};k.data(a).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});f.dispatch.on("elementMousemove.tooltip",function(a){k()});e.dispatch=J;e.bars=f;e.legend=m;e.xAxis=l;e.yAxis=h;e.interactiveLayer=q;e.tooltip=k;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return C},
set:function(a){C=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return O},set:function(a){O=a}},margin:{get:function(){return r},set:function(a){void 0!==a.top&&(x=r.top=a.top);r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==
a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},color:{get:function(){return A},set:function(a){A=c.utils.getColor(a);m.color(A);f.color(A)}},duration:{get:function(){return D},set:function(a){D=a;u.reset(D);h.duration(D);l.duration(D)}},rightAlignYAxis:{get:function(){return N},set:function(a){N=a;h.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return G},set:function(a){G=a;!0===a&&e.interactive(!1)}}});c.utils.inheritOptions(e,f);c.utils.initOptions(e);return e};
c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+
a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+
a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(N){function G(a,c){if("furious"!=B)return"#000";if(F)return a.disengaged?"#000":"#fff";if(!F)return a.color||(a.color=q(a,c)),a.disabled?a.color:"#fff"}function L(a,c){return F&&"furious"==B?a.disengaged?"#eee":a.color||q(a,c):a.color||q(a,c)}function z(a,c){return F&&"furious"==B?1:a.disabled?0:1}N.each(function(a){var t=f-e.left-e.right,
q=d3.select(this);c.utils.initSVG(q);var J=q.selectAll("g.nv-legend").data([a]);a=J.enter().append("g").attr("class","nvd3 nv-legend").append("g");q=J.select("g");A?J.attr("transform","translate("+-e.right+","+e.top+")"):J.attr("transform","translate("+e.left+","+e.top+")");var D=q.selectAll(".nv-series").data(function(a){return"furious"!=B?a:a.filter(function(a){return F?!0:!a.disengaged})}),J=D.enter().append("g").attr("class","nv-series");switch(B){case "furious":var u=23;break;case "classic":u=
20}if("classic"==B){J.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var K=D.select(".nv-legend-symbol")}else"furious"==B&&(J.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),K=D.select(".nv-legend-symbol"),J.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),D.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",G(a,c))}));J.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var N=D.select("text.nv-legend-text");D.on("mouseover",function(a,c){H.legendMouseover(a,c)}).on("mouseout",function(a,c){H.legendMouseout(a,c)}).on("click",function(a,c){H.legendClick(a,c);var e=D.data();C&&("classic"==B?E?(e.forEach(function(a){a.disabled=
!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==B&&(F?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):F||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),H.stateChange({disabled:e.map(function(a){return!!a.disabled}),
disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=B||!F)if(H.legendDblclick(a,c),C){var e=D.data();e.forEach(function(a){a.disabled=!0;"furious"==B&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==B&&(a.userDisabled=a.disabled);H.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});D.classed("nv-disabled",function(a){return a.userDisabled});D.exit().remove();N.attr("fill",G).text(function(a){return m(h(a))});var M=0;if(r){var n=
[];D.each(function(a,e){if(m(h(a))&&m(h(a)).length>k){var f=m(h(a)).substring(0,k);f=d3.select(this).select("text").text(f+"...");d3.select(this).append("svg:title").text(m(h(a)))}else f=d3.select(this).select("text");try{var l=f.node().getComputedTextLength();if(0>=l)throw Error();}catch(fa){l=c.utils.calcApproxTextWidth(f)}n.push(l+x)});for(var w=0,J=[],M=0;M<t&&w<n.length;)J[w]=n[w],M+=n[w++];for(0===w&&(w=1);M>t&&1<w;){J=[];w--;for(var V=0;V<n.length;V++)n[V]>(J[V%w]||0)&&(J[V%w]=n[V]);M=J.reduce(function(a,
c,e,f){return a+c})}for(var Z=[],V=t=0;t<w;t++)Z[t]=V,V+=J[t];D.attr("transform",function(a,c){return"translate("+Z[c%w]+","+(5+Math.floor(c/w)*u)+")"});A?q.attr("transform","translate("+(f-e.right-M)+","+e.top+")"):q.attr("transform","translate(0,"+e.top+")");l=e.top+e.bottom+Math.ceil(n.length/w)*u}else{var X=5,Y=5,I=0,S;D.attr("transform",function(a,c){var h=d3.select(this).select("text").node().getComputedTextLength()+x;S=Y;f<e.left+e.right+S+h&&(Y=S=5,X+=u);Y+=h;Y>I&&(I=Y);M<S+I&&(M=S+I);return"translate("+
S+","+X+")"});q.attr("transform","translate("+(f-e.right-I)+","+e.top+")");l=e.top+e.bottom+X+15}"furious"==B&&(K.attr("width",function(a,c){return N[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),q.select(".nv-legend-bg").transition().duration(300).attr("x",-u).attr("width",M+u-12).attr("height",l+10).attr("y",-e.top-10).attr("opacity",F?1:0));K.style("fill",L).style("fill-opacity",
z).style("stroke",L)});return a}var e={top:5,right:0,bottom:5,left:0},f=400,l=20,h=function(a){return a.key},m=function(a){return a},q=c.utils.getColor(),k=20,r=!0,x=32,A=!0,C=!0,E=!1,F=!1,H=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),B="classic";a.dispatch=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},key:{get:function(){return h},
set:function(a){h=a}},keyFormatter:{get:function(){return m},set:function(a){m=a}},align:{get:function(){return r},set:function(a){r=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},rightAlign:{get:function(){return A},set:function(a){A=a}},padding:{get:function(){return x},set:function(a){x=a}},updateState:{get:function(){return C},set:function(a){C=a}},radioButtonMode:{get:function(){return E},set:function(a){E=a}},expanded:{get:function(){return F},set:function(a){F=a}},vers:{get:function(){return B},
set:function(a){B=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return q},set:function(a){q=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.line=function(){function a(t){z.reset();z.models(e);t.each(function(a){m=d3.select(this);var t=c.utils.availableWidth(l,m,f),J=c.utils.availableHeight(h,m,f);
c.utils.initSVG(m);E=e.xScale();F=e.yScale();G=G||E;L=L||F;a=m.selectAll("g.nv-wrap.nv-line").data([a]);var D=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),u=D.append("defs"),K=D.append("g"),D=a.select("g");K.append("g").attr("class","nv-groups");K.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+f.left+","+f.top+")");e.width(t).height(J);K=a.select(".nv-scatterWrap");K.call(e);u.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");a.select("#nv-edge-clip-"+
e.id()+" rect").attr("width",t).attr("height",0<J?J:0);D.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+")":"");K.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+")":"");t=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});t.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);t.exit().remove();t.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return q(a,c)}).style("stroke",function(a,c){return q(a,c)});t.watchTransition(z,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});J=t.selectAll("path.nv-area").data(function(a){return A(a)?[a]:[]});J.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(H).defined(x).x(function(a,e){return c.utils.NaNtoZero(G(k(a,e)))}).y0(function(a,
e){return c.utils.NaNtoZero(L(r(a,e)))}).y1(function(a,c){return L(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,[a.values])});t.exit().selectAll("path.nv-area").remove();J.watchTransition(z,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(H).defined(x).x(function(a,e){return c.utils.NaNtoZero(E(k(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(F(r(a,e)))}).y1(function(a,c){return F(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,
[a.values])});t=t.selectAll("path.nv-line").data(function(a){return[a.values]});t.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(H).defined(x).x(function(a,e){return c.utils.NaNtoZero(G(k(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(L(r(a,e)))}));t.watchTransition(z,"line: linePaths").attr("d",d3.svg.line().interpolate(H).defined(x).x(function(a,e){return c.utils.NaNtoZero(E(k(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(F(r(a,e)))}));G=E.copy();L=F.copy()});
z.renderEnd("line immediate");return a}var e=c.models.scatter(),f={top:0,right:0,bottom:0,left:0},l=960,h=500,m=null,q=c.utils.defaultColor(),k=function(a){return a.x},r=function(a){return a.y},x=function(a,c){return!isNaN(r(a,c))&&null!==r(a,c)},A=function(a){return a.area},C=!1,E,F,H="linear",B=250,N=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var G,L,z=c.utils.renderWatch(N,B);a.dispatch=N;a.scatter=e;e.dispatch.on("elementClick",
function(){N.elementClick.apply(this,arguments)});e.dispatch.on("elementMouseover",function(){N.elementMouseover.apply(this,arguments)});e.dispatch.on("elementMouseout",function(){N.elementMouseout.apply(this,arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return h},set:function(a){h=a}},defined:{get:function(){return x},set:function(a){x=a}},interpolate:{get:function(){return H},set:function(a){H=
a}},clipEdge:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},duration:{get:function(){return B},set:function(a){B=a;z.reset(B);e.duration(B)}},isArea:{get:function(){return A},set:function(a){A=d3.functor(a)}},x:{get:function(){return k},set:function(a){k=a;e.x(a)}},y:{get:function(){return r},
set:function(a){r=a;e.y(a)}},color:{get:function(){return q},set:function(a){q=c.utils.getColor(a);e.color(q)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(w){R.reset();R.models(e);B&&R.models(f);N&&R.models(l);w.each(function(w){function q(){B&&aa.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(f)}function D(){N&&aa.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(l)}function Y(a){aa.select(".nv-focus .nv-linesWrap").datum(w.filter(function(a){return!a.disabled}).map(function(c,
f){return{key:c.key,area:c.area,classed:c.classed,values:c.values.filter(function(c,f){return e.x()(c,f)>=a[0]&&e.x()(c,f)<=a[1]}),disableTooltip:c.disableTooltip}})).transition().duration(K).call(e);q();D()}var I=d3.select(this);c.utils.initSVG(I);var S=c.utils.availableWidth(C,I,r),W=c.utils.availableHeight(E,I,r)-(Q?k.height():0);a.update=function(){0===K?I.call(a):I.transition().duration(K).call(a)};a.container=this;O.setter(n(w),a.update).getter(M(w)).update();O.disabled=w.map(function(a){return!!a.disabled});
if(!J)for(V in J={},O)J[V]=O[V]instanceof Array?O[V].slice(0):O[V];if(w&&w.length&&w.filter(function(a){return a.values.length}).length)I.selectAll(".nv-noData").remove();else return c.utils.noData(a,I),a;k.dispatch.on("onBrush",function(a){Y(a)});z=e.xScale();t=e.yScale();var V=I.selectAll("g.nv-wrap.nv-lineChart").data([w]);var R=V.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),aa=V.select("g");R.append("g").attr("class","nv-legendWrap");var fa=R.append("g").attr("class",
"nv-focus");fa.append("g").attr("class","nv-background").append("rect");fa.append("g").attr("class","nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-linesWrap");fa.append("g").attr("class","nv-interactive");R.append("g").attr("class","nv-focusWrap");F?(h.width(S),aa.select(".nv-legendWrap").datum(w).call(h),"bottom"===H?V.select(".nv-legendWrap").attr("transform","translate(0,"+W+")"):"top"===H&&(x||h.height()===r.top||(r.top=h.height(),W=c.utils.availableHeight(E,
I,r)-(Q?k.height():0)),V.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"))):aa.select(".nv-legendWrap").selectAll("*").remove();V.attr("transform","translate("+r.left+","+r.top+")");G&&aa.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)");L&&(m.width(S).height(W).margin({left:r.left,top:r.top}).svgContainer(I).xScale(z),V.select(".nv-interactive").call(m));aa.select(".nv-focus .nv-background rect").attr("width",S).attr("height",W);e.width(S).height(W).color(w.map(function(a,
c){return a.color||A(a,c)}).filter(function(a,c){return!w[c].disabled}));V=aa.select(".nv-linesWrap").datum(w.filter(function(a){return!a.disabled}));B&&f.scale(z)._ticks(c.utils.calcTicksX(S/100,w)).tickSize(-W,0);N&&l.scale(t)._ticks(c.utils.calcTicksY(W/36,w)).tickSize(-S,0);aa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+W+")");Q?(k.width(S),aa.select(".nv-focusWrap").attr("transform","translate(0,"+(W+r.bottom+k.margin().top)+")").datum(w.filter(function(a){return!a.disabled})).call(k),
S=k.brush.empty()?k.xDomain():k.brush.extent(),null!==S&&Y(S)):(V.call(e),q(),D());h.dispatch.on("stateChange",function(c){for(var e in c)O[e]=c[e];u.stateChange(O);a.update()});m.dispatch.on("elementMousemove",function(f){e.clearHighlights();var h,n,t,q=[];w.filter(function(a,c){a.seriesIndex=c;return!a.disabled&&!a.disableTooltip}).forEach(function(l,m){var w=Q?k.brush.empty()?k.xScale().domain():k.brush.extent():z.domain(),u=l.values.filter(function(a,c){return w[0]<=w[1]?e.x()(a,c)>=w[0]&&e.x()(a,
c)<=w[1]:e.x()(a,c)>=w[1]&&e.x()(a,c)<=w[0]});n=c.interactiveBisect(u,f.pointXValue,e.x());var u=u[n],r=a.y()(u,n);null!==r&&e.highlightPoint(m,n,!0);void 0!==u&&(void 0===h&&(h=u),void 0===t&&(t=a.xScale()(a.x()(u,n))),q.push({key:l.key,value:r,color:A(l,l.seriesIndex),data:u}))});if(2<q.length){var u=a.yScale().invert(f.mouseY),r=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),u=c.nearestValueIndex(q.map(function(a){return a.value}),u,r);null!==u&&(q[u].highlight=!0)}u=function(a,c){return null==
a?"N/A":l.tickFormat()(a)};m.tooltip.valueFormatter(m.tooltip.valueFormatter()||u).data({value:a.x()(h,n),index:n,series:q})();m.renderGuideLine(t)});m.dispatch.on("elementClick",function(f){var h,n=[];w.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(e){var l=c.interactiveBisect(e.values,f.pointXValue,a.x()),k=e.values[l];if("undefined"!==typeof k){"undefined"===typeof h&&(h=a.xScale()(a.x()(k,l)));var m=a.yScale()(a.y()(k,l));n.push({point:k,pointIndex:l,pos:[h,m],seriesIndex:e.seriesIndex,
series:e})}});e.dispatch.elementClick(n)});m.dispatch.on("elementMouseout",function(a){e.clearHighlights()});u.on("changeState",function(c){"undefined"!==typeof c.disabled&&w.length===c.disabled.length&&(w.forEach(function(a,e){a.disabled=c.disabled[e]}),O.disabled=c.disabled);a.update()})});R.renderEnd("lineChart immediate");return a}var e=c.models.line(),f=c.models.axis(),l=c.models.axis(),h=c.models.legend(),m=c.interactiveGuideline(),q=c.models.tooltip(),k=c.models.focus(c.models.line()),r={top:30,
right:20,bottom:50,left:60},x=null,A=c.utils.defaultColor(),C=null,E=null,F=!0,H="top",B=!0,N=!0,G=!1,L=!1,z,t,Q=!1,O=c.utils.state(),J=null,D=null,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),K=250;f.orient("bottom").tickPadding(7);l.orient(G?"right":"left");e.clipEdge(!0).duration(0);q.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});m.tooltip.valueFormatter(function(a,c){return l.tickFormat()(a,
c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});var R=c.utils.renderWatch(u,K),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},n=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){a.series.disableTooltip||q.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){q.hidden(!0)});a.dispatch=u;a.lines=e;a.legend=h;a.focus=k;a.xAxis=
f;a.x2Axis=k.xAxis;a.yAxis=l;a.y2Axis=k.yAxis;a.interactiveLayer=m;a.tooltip=q;a.state=O;a.dispatch=u;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return C},set:function(a){C=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return F},set:function(a){F=a}},legendPosition:{get:function(){return H},set:function(a){H=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return N},set:function(a){N=
a}},defaultState:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return D},set:function(a){D=a}},focusEnable:{get:function(){return Q},set:function(a){Q=a}},focusHeight:{get:function(){return k.height()},set:function(a){k.height(a)}},focusShowAxisX:{get:function(){return k.showXAxis()},set:function(a){k.showXAxis(a)}},focusShowAxisY:{get:function(){return k.showYAxis()},set:function(a){k.showYAxis(a)}},brushExtent:{get:function(){return k.brushExtent()},set:function(a){k.brushExtent(a)}},
focusMargin:{get:function(){return k.margin},set:function(a){void 0!==a.top&&(x=r.top=a.top);k.margin.right=void 0!==a.right?a.right:k.margin.right;k.margin.bottom=void 0!==a.bottom?a.bottom:k.margin.bottom;k.margin.left=void 0!==a.left?a.left:k.margin.left}},margin:{get:function(){return r},set:function(a){r.top=void 0!==a.top?a.top:r.top;r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},duration:{get:function(){return K},
set:function(a){K=a;R.reset(K);e.duration(K);k.duration(K);f.duration(K);l.duration(K)}},color:{get:function(){return A},set:function(a){A=c.utils.getColor(a);h.color(A);e.color(A);k.color(A)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a);k.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a);k.xTickFormat(a)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(a){l.tickFormat(a);k.yTickFormat(a)}},
x:{get:function(){return e.x()},set:function(a){e.x(a);k.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);k.y(a)}},rightAlignYAxis:{get:function(){return G},set:function(a){G=a;l.orient(G?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(a){if(L=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){return c.models.lineChart().margin({bottom:30}).focusEnable(!0)};c.models.linePlusBarChart=
function(){function a(I){I.each(function(I){function F(){E.empty()||E.extent(M);Fa.data([E.empty()?w.domain():M]).each(function(a,c){var e=w(a[0])-w.range()[0],f=w.range()[1]-w(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",w(a[1])).attr("width",0>f?0:f)})}function ca(){M=E.empty()?null:E.extent();R=E.empty()?w.domain():E.extent();S.brush({extent:R,brush:E});F();l.width(ta).height(ea).color(I.map(function(a,c){return a.color||Q(a,c)}).filter(function(a,
c){return!I[c].disabled&&I[c].bar}));e.width(ta).height(ea).color(I.map(function(a,c){return a.color||Q(a,c)}).filter(function(a,c){return!I[c].disabled&&!I[c].bar}));var a=da.select(".nv-focus .nv-barsWrap").datum(na.length?na.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return l.x()(a,c)>=R[0]&&l.x()(a,c)<=R[1]})}}):[{values:[]}]),f=da.select(".nv-focus .nv-linesWrap").datum(la(Ga)?[{values:[]}]:Ga.filter(function(a){return!a.disabled}).map(function(a,c){return{area:a.area,
fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,key:a.key,values:a.values.filter(function(a,c){return e.x()(a,c)>=R[0]&&e.x()(a,c)<=R[1]})}}));n=na.length&&!ka?l.xScale():e.xScale();m.scale(n)._ticks(c.utils.calcTicksX(ta/100,I)).tickSize(-ea,0);m.domain([Math.ceil(R[0]),Math.floor(R[1])]);da.select(".nv-x.nv-axis").transition().duration(W).call(m);a.transition().duration(W).call(l);f.transition().duration(W).call(e);da.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+
")");k.scale(V)._ticks(c.utils.calcTicksY(ea/36,I)).tickSize(-ta,0);r.scale(Z)._ticks(c.utils.calcTicksY(ea/36,I));ka?r.tickSize(Ga.length?0:-ta,0):r.tickSize(na.length?0:-ta,0);var f=na.length?1:0,h=Ga.length&&!la(Ga)?1:0,a=ka?h:f,f=ka?f:h;da.select(".nv-focus .nv-y1.nv-axis").style("opacity",a);da.select(".nv-focus .nv-y2.nv-axis").style("opacity",f).attr("transform","translate("+n.range()[1]+",0)");da.select(".nv-focus .nv-y1.nv-axis").transition().duration(W).call(k);da.select(".nv-focus .nv-y2.nv-axis").transition().duration(W).call(r)}
var va=d3.select(this);c.utils.initSVG(va);var ta=c.utils.availableWidth(G,va,H),ea=c.utils.availableHeight(L,va,H)-(J?K:0),ua=K-N.top-N.bottom;a.update=function(){va.transition().duration(W).call(a)};a.container=this;pa.setter(za(I),a.update).getter(ya(I)).update();pa.disabled=I.map(function(a){return!!a.disabled});if(!ma)for(oa in ma={},pa)ma[oa]=pa[oa]instanceof Array?pa[oa].slice(0):pa[oa];if(I&&I.length&&I.filter(function(a){return a.values.length}).length)va.selectAll(".nv-noData").remove();
else return c.utils.noData(a,va),a;var na=I.filter(function(a){return!a.disabled&&a.bar}),Ga=I.filter(function(a){return!a.bar});n=na.length&&!ka?l.xScale():e.xScale();w=q.scale();V=ka?e.yScale():l.yScale();Z=ka?l.yScale():e.yScale();X=ka?f.yScale():h.yScale();Y=ka?h.yScale():f.yScale();var oa=I.filter(function(a){return!a.disabled&&(ka?!a.bar:a.bar)}).map(function(a){return a.values.map(function(a,c){return{x:z(a,c),y:t(a,c)}})});var Aa=I.filter(function(a){return!a.disabled&&(ka?a.bar:!a.bar)}).map(function(a){return a.values.map(function(a,
c){return{x:z(a,c),y:t(a,c)}})});n.range([0,ta]);w.domain(d3.extent(d3.merge(oa.concat(Aa)),function(a){return a.x})).range([0,ta]);oa=va.selectAll("g.nv-wrap.nv-linePlusBar").data([I]);var Aa=oa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),da=oa.select("g");Aa.append("g").attr("class","nv-legendWrap");var Ea=Aa.append("g").attr("class","nv-focus");Ea.append("g").attr("class","nv-x nv-axis");Ea.append("g").attr("class","nv-y1 nv-axis");Ea.append("g").attr("class","nv-y2 nv-axis");
Ea.append("g").attr("class","nv-barsWrap");Ea.append("g").attr("class","nv-linesWrap");Aa=Aa.append("g").attr("class","nv-context");Aa.append("g").attr("class","nv-x nv-axis");Aa.append("g").attr("class","nv-y1 nv-axis");Aa.append("g").attr("class","nv-y2 nv-axis");Aa.append("g").attr("class","nv-barsWrap");Aa.append("g").attr("class","nv-linesWrap");Aa.append("g").attr("class","nv-brushBackground");Aa.append("g").attr("class","nv-x nv-brush");O?(Aa=C.align()?ta/2:ta,Ea=C.align()?Aa:0,C.width(Aa),
da.select(".nv-legendWrap").datum(I.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=ka?a.originalKey+(a.bar?fa:aa):a.originalKey+(a.bar?aa:fa);return a})).call(C),B||C.height()===H.top||(H.top=C.height(),ea=c.utils.availableHeight(L,va,H)-K),da.select(".nv-legendWrap").attr("transform","translate("+Ea+","+-H.top+")")):da.select(".nv-legendWrap").selectAll("*").remove();oa.attr("transform","translate("+H.left+","+H.top+")");da.select(".nv-context").style("display",J?
"initial":"none");h.width(ta).height(ua).color(I.map(function(a,c){return a.color||Q(a,c)}).filter(function(a,c){return!I[c].disabled&&I[c].bar}));f.width(ta).height(ua).color(I.map(function(a,c){return a.color||Q(a,c)}).filter(function(a,c){return!I[c].disabled&&!I[c].bar}));oa=da.select(".nv-context .nv-barsWrap").datum(na.length?na:[{values:[]}]);Aa=da.select(".nv-context .nv-linesWrap").datum(la(Ga)?[{values:[]}]:Ga.filter(function(a){return!a.disabled}));da.select(".nv-context").attr("transform",
"translate(0,"+(ea+H.bottom+N.top)+")");oa.transition().call(h);Aa.transition().call(f);u&&(q._ticks(c.utils.calcTicksX(ta/100,I)).tickSize(-ua,0),da.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+X.range()[0]+")"),da.select(".nv-context .nv-x.nv-axis").transition().call(q));D&&(x.scale(X)._ticks(ua/36).tickSize(-ta,0),A.scale(Y)._ticks(ua/36).tickSize(na.length?0:-ta,0),da.select(".nv-context .nv-y3.nv-axis").style("opacity",na.length?1:0).attr("transform","translate(0,"+w.range()[0]+
")"),da.select(".nv-context .nv-y2.nv-axis").style("opacity",Ga.length?1:0).attr("transform","translate("+w.range()[1]+",0)"),da.select(".nv-context .nv-y1.nv-axis").transition().call(x),da.select(".nv-context .nv-y2.nv-axis").transition().call(A));E.x(w).on("brush",ca);M&&E.extent(M);var Fa=da.select(".nv-brushBackground").selectAll("g").data([M||E.extent()]);oa=Fa.enter().append("g");oa.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ua);oa.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",ua);oa=da.select(".nv-x.nv-brush").call(E);oa.selectAll("rect").attr("height",ua);oa.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=ua/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});C.dispatch.on("stateChange",function(c){for(var e in c)pa[e]=c[e];S.stateChange(pa);a.update()});S.on("changeState",
function(c){"undefined"!==typeof c.disabled&&(I.forEach(function(a,e){a.disabled=c.disabled[e]}),pa.disabled=c.disabled);a.update()});ca()});return a}var e=c.models.line(),f=c.models.line(),l=c.models.historicalBar(),h=c.models.historicalBar(),m=c.models.axis(),q=c.models.axis(),k=c.models.axis(),r=c.models.axis(),x=c.models.axis(),A=c.models.axis(),C=c.models.legend(),E=d3.svg.brush(),F=c.models.tooltip(),H={top:30,right:30,bottom:30,left:60},B=null,N={top:0,right:30,bottom:20,left:60},G=null,L=
null,z=function(a){return a.x},t=function(a){return a.y},Q=c.utils.defaultColor(),O=!0,J=!0,D=!1,u=!0,K=50,R,M=null,n,w,V,Z,X,Y,I=null,S=d3.dispatch("brush","stateChange","changeState"),W=0,pa=c.utils.state(),ma=null,aa=" (left axis)",fa=" (right axis)",ka=!1;e.clipEdge(!0);f.interactive(!1);f.pointActive(function(a){return!1});m.orient("bottom").tickPadding(5);k.orient("left");r.orient("right");q.orient("bottom").tickPadding(5);x.orient("left");A.orient("right");F.headerEnabled(!0).headerFormatter(function(a,
c){return m.tickFormat()(a,c)});var ya=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},za=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},la=function(a){return a.every(function(a){return a.disabled})};e.dispatch.on("elementMouseover.tooltip",function(a){F.duration(100).valueFormatter(function(a,c){return(ka?{main:k,focus:x}:{main:r,focus:A}).main.tickFormat()(a,c)}).data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",
function(a){F.hidden(!0)});l.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};F.duration(0).valueFormatter(function(a,c){return(ka?{main:r,focus:A}:{main:k,focus:x}).main.tickFormat()(a,c)}).data(c).hidden(!1)});l.dispatch.on("elementMouseout.tooltip",function(a){F.hidden(!0)});l.dispatch.on("elementMousemove.tooltip",function(a){F()});a.dispatch=S;a.legend=C;a.lines=e;a.lines2=f;a.bars=l;a.bars2=h;a.xAxis=m;a.x2Axis=q;a.y1Axis=
k;a.y2Axis=r;a.y3Axis=x;a.y4Axis=A;a.tooltip=F;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return G},set:function(a){G=a}},height:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return O},set:function(a){O=a}},brushExtent:{get:function(){return M},set:function(a){M=a}},noData:{get:function(){return I},set:function(a){I=a}},focusEnable:{get:function(){return J},set:function(a){J=a}},focusHeight:{get:function(){return K},set:function(a){K=
a}},focusShowAxisX:{get:function(){return u},set:function(a){u=a}},focusShowAxisY:{get:function(){return D},set:function(a){D=a}},legendLeftAxisHint:{get:function(){return aa},set:function(a){aa=a}},legendRightAxisHint:{get:function(){return fa},set:function(a){fa=a}},margin:{get:function(){return H},set:function(a){void 0!==a.top&&(B=H.top=a.top);H.right=void 0!==a.right?a.right:H.right;H.bottom=void 0!==a.bottom?a.bottom:H.bottom;H.left=void 0!==a.left?a.left:H.left}},focusMargin:{get:function(){return N},
set:function(a){N.top=void 0!==a.top?a.top:N.top;N.right=void 0!==a.right?a.right:N.right;N.bottom=void 0!==a.bottom?a.bottom:N.bottom;N.left=void 0!==a.left?a.left:N.left}},duration:{get:function(){return W},set:function(a){W=a}},color:{get:function(){return Q},set:function(a){Q=c.utils.getColor(a);C.color(Q)}},x:{get:function(){return z},set:function(a){z=a;e.x(a);f.x(a);l.x(a);h.x(a)}},y:{get:function(){return t},set:function(a){t=a;e.y(a);f.y(a);l.y(a);h.y(a)}},switchYAxisOrder:{get:function(){return ka},
set:function(a){if(ka!==a){var c=k;k=r;r=c;c=x;x=A;A=c}ka=a;k.orient("left");r.orient("right");x.orient("left");A.orient("right")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(n){R.reset();n.each(function(a){var n=f-e.left-e.right,w=l-e.top-e.bottom;k=d3.select(this);c.utils.initSVG(k);var X=0;B&&a.length&&(B=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(E){var Y=d3.layout.stack().offset(F).values(function(a){return a.values}).y(x)(!a.length&&
B?B:a);Y.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=X++,Y[e]=a[e]):0<e&&Y[e-1].nonStackable&&Y[e].values.map(function(a,c){a.y0-=Y[e-1].values[c].y;a.y1=a.y0+a.y})});a=Y}a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});E&&0<a.length&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(c,n){if(!a[n].nonStackable){var l=c.values[e];l.size=Math.abs(l.y);0>l.y?(l.y1=h,h-=l.size):(l.y1=l.size+f,f+=l.size)}})});var I=z&&t?[]:a.map(function(a,c){return a.values.map(function(a,
e){return{x:r(a,e),y:x(a,e),y0:a.y0,y1:a.y1,idx:c}})});h.domain(z||d3.merge(I).map(function(a){return a.x})).rangeBands(Q||[0,n],J);m.domain(t||d3.extent(d3.merge(I).map(function(c){var e=c.y;E&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+c.y);return e}).concat(A))).range(O||[w,0]);h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]+.01*m.domain()[0],
m.domain()[1]-.01*m.domain()[1]]):m.domain([-1,1]));K=K||m;var I=k.selectAll("g.nv-wrap.nv-multibar").data([a]),S=I.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),W=S.append("defs"),S=S.append("g"),pa=I.select("g");S.append("g").attr("class","nv-groups");I.attr("transform","translate("+e.left+","+e.top+")");W.append("clipPath").attr("id","nv-edge-clip-"+q).append("rect");I.select("#nv-edge-clip-"+q+" rect").attr("width",n).attr("height",w);pa.attr("clip-path",C?"url(#nv-edge-clip-"+
q+")":"");n=I.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});n.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);w=R.transition(n.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,L)).attr("y",function(c,e,f){e=K(0)||0;E&&a[c.series]&&!a[c.series].nonStackable&&(e=K(c.y0));return e}).attr("height",0).remove();w.delay&&w.delay(function(a,c){return L/(M+1)*c-c});n.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return H(a,c)}).style("stroke",function(a,c){return H(a,c)});n.style("stroke-opacity",1).style("fill-opacity",D);n=n.selectAll("rect.nv-bar").data(function(c){return B&&!a.length?B.values:c.values});n.exit().remove();n.enter().append("rect").attr("class",function(a,c){return 0>x(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,f){return E&&!a[f].nonStackable?0:f*h.rangeBand()/a.length}).attr("y",function(c,
e,f){return K(E&&!a[f].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,f){return h.rangeBand()/(E&&!a[f].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+h(r(a,c))+",0)"});n.style("fill",function(a,c,e){return H(a,e,c)}).style("stroke",function(a,c,e){return H(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);u.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);u.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){u.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){u.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){u.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});n.attr("class",function(a,c){return 0>x(a,
c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+h(r(a,c))+",0)"});N&&(G||(G=a.map(function(){return!0})),n.style("fill",function(a,c,e){return d3.rgb(N(a,c)).darker(G.map(function(a,c){return c}).filter(function(a,c){return!G[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(N(a,c)).darker(G.map(function(a,c){return c}).filter(function(a,c){return!G[c]})[e]).toString()}));n=n.watchTransition(R,"multibar",Math.min(250,L)).delay(function(c,
e){return e*L/a[0].values.length});E?n.attr("y",function(c,e,f){return a[f].nonStackable?0>x(c,e)?m(0):-1>m(0)-m(x(c,e))?m(0)-1:m(x(c,e))||0:m(c.y1)}).attr("height",function(c,e,f){return a[f].nonStackable?Math.max(Math.abs(m(x(c,e))-m(0)),0)||0:Math.max(Math.abs(m(c.y+c.y0)-m(c.y0)),0)}).attr("x",function(c,e,f){e=0;a[f].nonStackable&&(e=c.series*h.rangeBand()/a.length,a.length!==X&&(e=a[f].nonStackableSeries*h.rangeBand()/(2*X)));return e}).attr("width",function(c,e,f){return a[f].nonStackable?
(c=h.rangeBand()/X,a.length!==X&&(c=h.rangeBand()/(2*X)),c):h.rangeBand()}):n.attr("x",function(c,e){return c.series*h.rangeBand()/a.length}).attr("width",h.rangeBand()/a.length).attr("y",function(a,c){return 0>x(a,c)?m(0):1>m(0)-m(x(a,c))?m(0)-1:m(x(a,c))||0}).attr("height",function(a,c){return Math.max(Math.abs(m(x(a,c))-m(0)),1)||0});h.copy();K=m.copy();a[0]&&a[0].values&&(M=a[0].values.length)});R.renderEnd("multibar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,l=500,h=d3.scale.ordinal(),
m=d3.scale.linear(),q=Math.floor(1E4*Math.random()),k=null,r=function(a){return a.x},x=function(a){return a.y},A=[0],C=!0,E=!1,F="zero",H=c.utils.defaultColor(),B=!1,N=null,G,L=500,z,t,Q,O,J=.1,D=.75,u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K,R=c.utils.renderWatch(u,L),M=0;a.dispatch=u;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},
set:function(a){l=a}},x:{get:function(){return r},set:function(a){r=a}},y:{get:function(){return x},set:function(a){x=a}},xScale:{get:function(){return h},set:function(a){h=a}},yScale:{get:function(){return m},set:function(a){m=a}},xDomain:{get:function(){return z},set:function(a){z=a}},yDomain:{get:function(){return t},set:function(a){t=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return O},set:function(a){O=a}},forceY:{get:function(){return A},set:function(a){A=
a}},stacked:{get:function(){return E},set:function(a){E=a}},stackOffset:{get:function(){return F},set:function(a){F=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},disabled:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return q},set:function(a){q=a}},hideable:{get:function(){return B},set:function(a){B=a}},groupSpacing:{get:function(){return J},set:function(a){J=a}},fillOpacity:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return e},set:function(a){e.top=
void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return L},set:function(a){L=a;R.reset(L)}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a)}},barColor:{get:function(){return N},set:function(a){N=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(I){V.reset();V.models(e);N&&V.models(f);G&&V.models(l);
I.each(function(I){var S=d3.select(this);c.utils.initSVG(S);var R=c.utils.availableWidth(A,S,r),V=c.utils.availableHeight(C,S,r);a.update=function(){0===n?S.call(a):S.transition().duration(n).call(a)};a.container=this;u.setter(Y(I),a.update).getter(X(I)).update();u.disabled=I.map(function(a){return!!a.disabled});if(!K)for(aa in K={},u)K[aa]=u[aa]instanceof Array?u[aa].slice(0):u[aa];if(I&&I.length&&I.filter(function(a){return a.values.length}).length)S.selectAll(".nv-noData").remove();else return c.utils.noData(a,
S),a;J=e.xScale();D=e.yScale();var aa=S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([I]);var fa=aa.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),ka=aa.select("g");fa.append("g").attr("class","nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-barsWrap");fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");fa.append("g").attr("class","nv-interactive");B?(m.width(R-(F?180:0)),ka.select(".nv-legendWrap").datum(I).call(m),
x||m.height()===r.top||(r.top=m.height(),V=c.utils.availableHeight(C,S,r)),ka.select(".nv-legendWrap").attr("transform","translate("+(F?180:0)+","+-r.top+")")):ka.select(".nv-legendWrap").selectAll("*").remove();if(F){var ya=[{key:H.grouped||"Grouped",disabled:e.stacked()},{key:H.stacked||"Stacked",disabled:!e.stacked()}];q.width(F?180:0).color(["#444","#444","#444"]);ka.select(".nv-controlsWrap").datum(ya).attr("transform","translate(0,"+-r.top+")").call(q)}else ka.select(".nv-controlsWrap").selectAll("*").remove();
aa.attr("transform","translate("+r.left+","+r.top+")");L&&ka.select(".nv-y.nv-axis").attr("transform","translate("+R+",0)");e.disabled(I.map(function(a){return a.disabled})).width(R).height(V).color(I.map(function(a,c){return a.color||E(a,c)}).filter(function(a,c){return!I[c].disabled}));ka.select(".nv-barsWrap").datum(I.filter(function(a){return!a.disabled})).call(e);if(N){f.scale(J)._ticks(c.utils.calcTicksX(R/100,I)).tickSize(-V,0);ka.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+
")");ka.select(".nv-x.nv-axis").call(f);fa=ka.select(".nv-x.nv-axis > g").selectAll("g");fa.selectAll("line, text").style("opacity",1);if(t){fa.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var za=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;ka.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==za%2?17:5)+")"})}Q&&ka.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand());
z&&fa.filter(function(a,c){return 0!==c%Math.ceil(I[0].values.length/(R/100))}).selectAll("text, line").style("opacity",0);O&&fa.selectAll(".tick text").attr("transform","rotate("+O+" 0,0)").style("text-anchor",0<O?"start":"end");ka.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}G&&(l.scale(D)._ticks(c.utils.calcTicksY(V/36,I)).tickSize(-R,0),ka.select(".nv-y.nv-axis").call(l));w&&(h.width(R).height(V).margin({left:r.left,top:r.top}).svgContainer(S).xScale(J),aa.select(".nv-interactive").call(h));
m.dispatch.on("stateChange",function(c){for(var e in c)u[e]=c[e];M.stateChange(u);a.update()});q.dispatch.on("legendClick",function(c,f){if(c.disabled){ya=ya.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case H.grouped:e.stacked(!1);break;case "Stacked":case H.stacked:e.stacked(!0)}u.stacked=e.stacked();M.stateChange(u);a.update()}});M.on("changeState",function(c){"undefined"!==typeof c.disabled&&(I.forEach(function(a,e){a.disabled=c.disabled[e]}),u.disabled=
c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),Z=u.stacked=c.stacked);a.update()});w?(h.dispatch.on("elementMousemove",function(c){if(void 0!=c.pointXValue){var e,f,l,n,k=[];I.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,m){f=J.domain().indexOf(c.pointXValue);var t=h.values[f];void 0!==t&&(n=t.x,void 0===e&&(e=t),void 0===l&&(l=c.mouseX),k.push({key:h.key,value:a.y()(t,f),color:E(h,h.seriesIndex),data:h.values[f]}))});h.tooltip.data({value:n,index:f,
series:k})();h.renderGuideLine(l)}}),h.dispatch.on("elementMouseout",function(a){h.tooltip.hidden(!0)})):(e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};k.data(c).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){k()}))});V.renderEnd("multibarchart immediate");return a}var e=c.models.multiBar(),f=c.models.axis(),l=c.models.axis(),
h=c.interactiveGuideline(),m=c.models.legend(),q=c.models.legend(),k=c.models.tooltip(),r={top:30,right:20,bottom:50,left:60},x=null,A=null,C=null,E=c.utils.defaultColor(),F=!0,H={},B=!0,N=!0,G=!0,L=!1,z=!0,t=!1,Q=!1,O=0,J,D,u=c.utils.state(),K=null,R=null,M=d3.dispatch("stateChange","changeState","renderEnd"),n=250,w=!1;u.stacked=!1;e.stacked(!1);f.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});l.orient(L?"right":"left").tickFormat(d3.format(",.1f"));k.duration(0).valueFormatter(function(a,
c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.duration(0).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,
c)});q.updateState(!1);var V=c.utils.renderWatch(M),Z=!1,X=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:Z}}},Y=function(a){return function(c){void 0!==c.stacked&&(Z=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=M;a.multibar=e;a.legend=m;a.controls=q;a.xAxis=f;a.yAxis=l;a.state=u;a.tooltip=k;a.interactiveLayer=h;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return A},
set:function(a){A=a}},height:{get:function(){return C},set:function(a){C=a}},showLegend:{get:function(){return B},set:function(a){B=a}},showControls:{get:function(){return F},set:function(a){F=a}},controlLabels:{get:function(){return H},set:function(a){H=a}},showXAxis:{get:function(){return N},set:function(a){N=a}},showYAxis:{get:function(){return G},set:function(a){G=a}},defaultState:{get:function(){return K},set:function(a){K=a}},noData:{get:function(){return R},set:function(a){R=a}},reduceXTicks:{get:function(){return z},
set:function(a){z=a}},rotateLabels:{get:function(){return O},set:function(a){O=a}},staggerLabels:{get:function(){return t},set:function(a){t=a}},wrapLabels:{get:function(){return Q},set:function(a){Q=!!a}},margin:{get:function(){return r},set:function(a){void 0!==a.top&&(x=r.top=a.top);r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},duration:{get:function(){return n},set:function(a){n=a;e.duration(n);f.duration(n);l.duration(n);
V.reset(n)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a);m.color(E)}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;l.orient(L?"right":"left")}},useInteractiveGuideline:{get:function(){return w},set:function(a){w=a}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);m.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBarHorizontal=function(){function a(h){M.reset();
h.each(function(a){var h=f-e.left-e.right,n=l-e.top-e.bottom;m=d3.select(this);c.utils.initSVG(m);B&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(x)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});B&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=f,f+=a.size)})});var u=Q&&O?[]:a.map(function(a){return a.values.map(function(a,c){return{x:r(a,c),y:x(a,
c),y0:a.y0,y1:a.y1}})});q.domain(Q||d3.merge(u).map(function(a){return a.x})).rangeBands(J||[0,n],L);k.domain(O||d3.extent(d3.merge(u).map(function(a){return B?0<a.y?a.y1+a.y:a.y1:a.y}).concat(C)));N&&!B?k.range(D||[0>k.domain()[0]?G:0,h-(0<k.domain()[1]?G:0)]):k.range(D||[0,h]);R=R||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);h=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);n=h.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");n.append("defs");
n=n.append("g");h.select("g");n.append("g").attr("class","nv-groups");h.attr("transform","translate("+e.left+","+e.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(M,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",
function(a){return a.hover}).style("fill",function(a,c){return E(a,c)}).style("stroke",function(a,c){return E(a,c)});h.watchTransition(M,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",z);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();n=h.enter().append("g").attr("transform",function(c,e,f){return"translate("+R(B?c.y0:0)+","+(B?0:f*q.rangeBand()/a.length+q(r(c,e)))+")"});n.append("rect").attr("width",0).attr("height",q.rangeBand()/(B?1:
a.length));h.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);K.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);K.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){K.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){K.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){K.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){K.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});A(a[0],0)&&(n.append("polyline"),h.select("polyline").attr("fill","none").attr("points",function(c,e){var f=A(c,e),h=.8*q.rangeBand()/(2*(B?1:a.length)),f=f.length?f:[-Math.abs(f),Math.abs(f)],f=f.map(function(a){return k(a)-k(0)});
return[[f[0],-h],[f[0],h],[f[0],0],[f[1],0],[f[1],-h],[f[1],h]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var f=q.rangeBand()/(2*(B?1:a.length));return"translate("+(0>x(c,e)?0:k(x(c,e))-k(0))+", "+f+")"}));n.append("text");N&&!B?(h.select("text").attr("text-anchor",function(a,c){return 0>x(a,c)?"end":"start"}).attr("y",q.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=t(x(a,c)),f=A(a,c);return void 0===f?e:f.length?e+"+"+t(Math.abs(f[1]))+
"-"+t(Math.abs(f[0])):e+"\u00b1"+t(Math.abs(f))}),h.watchTransition(M,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>x(a,c)?-4:k(x(a,c))-k(0)+4})):h.selectAll("text").text("");h.selectAll("text.nv-bar-label").text("");h.attr("class",function(a,c){return 0>x(a,c)?"nv-bar negative":"nv-bar positive"});F&&(H||(H=a.map(function(){return!0})),h.style("fill",function(a,c,e){return d3.rgb(F(a,c)).darker(H.map(function(a,c){return c}).filter(function(a,c){return!H[c]})[e]).toString()}).style("stroke",
function(a,c,e){return d3.rgb(F(a,c)).darker(H.map(function(a,c){return c}).filter(function(a,c){return!H[c]})[e]).toString()}));B?h.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+k(a.y1)+","+q(r(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(k(x(a,c)+a.y0)-k(a.y0))||0}).attr("height",q.rangeBand()):h.watchTransition(M,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>x(c,e)?k(x(c,e)):k(0))+","+
(c.series*q.rangeBand()/a.length+q(r(c,e)))+")"}).select("rect").attr("height",q.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(k(x(a,c))-k(0)),1)||0});q.copy();R=k.copy()});M.renderEnd("multibarHorizontal immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,l=500,h=Math.floor(1E4*Math.random()),m=null,q=d3.scale.ordinal(),k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},A=function(a){return a.yErr},C=[0],E=c.utils.defaultColor(),F=null,
H,B=!1,N=!1,G=60,L=.1,z=.75,t=d3.format(",.2f"),Q,O,J,D,u=250,K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),R,M=c.utils.renderWatch(K,u);a.dispatch=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},x:{get:function(){return r},set:function(a){r=a}},y:{get:function(){return x},set:function(a){x=
a}},yErr:{get:function(){return A},set:function(a){A=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return Q},set:function(a){Q=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return J},set:function(a){J=a}},yRange:{get:function(){return D},set:function(a){D=a}},forceY:{get:function(){return C},set:function(a){C=a}},stacked:{get:function(){return B},set:function(a){B=a}},showValues:{get:function(){return N},
set:function(a){N=a}},disabled:{get:function(){return H},set:function(a){H=a}},id:{get:function(){return h},set:function(a){h=a}},valueFormat:{get:function(){return t},set:function(a){t=a}},valuePadding:{get:function(){return G},set:function(a){G=a}},groupSpacing:{get:function(){return L},set:function(a){L=a}},fillOpacity:{get:function(){return z},set:function(a){z=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return u},set:function(a){u=a;M.reset(u)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}},barColor:{get:function(){return F},set:function(a){F=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarHorizontalChart=function(){function a(q){R.reset();R.models(e);B&&R.models(f);N&&R.models(l);q.each(function(n){var q=d3.select(this);c.utils.initSVG(q);
var M=c.utils.availableWidth(x,q,k),O=c.utils.availableHeight(A,q,k);a.update=function(){q.transition().duration(D).call(a)};a.container=this;G=e.stacked();t.setter(K(n),a.update).getter(u(n)).update();t.disabled=n.map(function(a){return!!a.disabled});if(!Q)for(R in Q={},t)Q[R]=t[R]instanceof Array?t[R].slice(0):t[R];if(n&&n.length&&n.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return c.utils.noData(a,q),a;L=e.xScale();z=e.yScale().clamp(!0);var R=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]);
var Y=R.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),I=R.select("g");Y.append("g").attr("class","nv-x nv-axis");Y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");Y.append("g").attr("class","nv-barsWrap");Y.append("g").attr("class","nv-legendWrap");Y.append("g").attr("class","nv-controlsWrap");H?(h.width(M-(E?180:0)),I.select(".nv-legendWrap").datum(n).call(h),r||h.height()===k.top||(k.top=h.height(),O=c.utils.availableHeight(A,
q,k)),I.select(".nv-legendWrap").attr("transform","translate("+(E?180:0)+","+-k.top+")")):I.select(".nv-legendWrap").selectAll("*").remove();if(E){var S=[{key:F.grouped||"Grouped",disabled:e.stacked()},{key:F.stacked||"Stacked",disabled:!e.stacked()}];m.width(E?180:0).color(["#444","#444","#444"]);I.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+-k.top+")").call(m)}else I.select(".nv-controlsWrap").selectAll("*").remove();R.attr("transform","translate("+k.left+","+k.top+")");
e.disabled(n.map(function(a){return a.disabled})).width(M).height(O).color(n.map(function(a,c){return a.color||C(a,c)}).filter(function(a,c){return!n[c].disabled}));I.select(".nv-barsWrap").datum(n.filter(function(a){return!a.disabled})).transition().call(e);B&&(f.scale(L)._ticks(c.utils.calcTicksX(O/24,n)).tickSize(-M,0),I.select(".nv-x.nv-axis").call(f),I.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));N&&(l.scale(z)._ticks(c.utils.calcTicksY(M/100,n)).tickSize(-O,0),I.select(".nv-y.nv-axis").attr("transform",
"translate(0,"+O+")"),I.select(".nv-y.nv-axis").call(l));I.select(".nv-zeroLine line").attr("x1",z(0)).attr("x2",z(0)).attr("y1",0).attr("y2",-O);h.dispatch.on("stateChange",function(c){for(var e in c)t[e]=c[e];J.stateChange(t);a.update()});m.dispatch.on("legendClick",function(c,f){if(c.disabled){S=S.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case F.grouped:e.stacked(!1);break;case "Stacked":case F.stacked:e.stacked(!0)}t.stacked=e.stacked();J.stateChange(t);
G=e.stacked();a.update()}});J.on("changeState",function(c){"undefined"!==typeof c.disabled&&(n.forEach(function(a,e){a.disabled=c.disabled[e]}),t.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),G=t.stacked=c.stacked);a.update()})});R.renderEnd("multibar horizontal chart immediate");return a}var e=c.models.multiBarHorizontal(),f=c.models.axis(),l=c.models.axis(),h=c.models.legend().height(30),m=c.models.legend().height(30),q=c.models.tooltip(),k={top:30,right:20,bottom:50,
left:60},r=null,x=null,A=null,C=c.utils.defaultColor(),E=!0,F={},H=!0,B=!0,N=!0,G=!1,L,z,t=c.utils.state(),Q=null,O=null,J=d3.dispatch("stateChange","changeState","renderEnd"),D=250;t.stacked=!1;e.stacked(G);f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});l.orient("bottom").tickFormat(d3.format(",.1f"));q.duration(0).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});m.updateState(!1);var u=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
stacked:G}}},K=function(a){return function(c){void 0!==c.stacked&&(G=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},R=c.utils.renderWatch(J,D);e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};q.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){q.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){q()});a.dispatch=J;a.multibar=e;a.legend=h;a.controls=
m;a.xAxis=f;a.yAxis=l;a.state=t;a.tooltip=q;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return x},set:function(a){x=a}},height:{get:function(){return A},set:function(a){A=a}},showLegend:{get:function(){return H},set:function(a){H=a}},showControls:{get:function(){return E},set:function(a){E=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return N},set:function(a){N=
a}},defaultState:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return O},set:function(a){O=a}},margin:{get:function(){return k},set:function(a){void 0!==a.top&&(r=k.top=a.top);k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return D},set:function(a){D=a;R.reset(D);e.duration(D);f.duration(D);l.duration(D)}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a);
h.color(C)}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);h.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(k){k.each(function(k){function G(a){var c=2===k[a.seriesIndex].yAxis?V:w;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};X.duration(0).headerFormatter(function(a,c){return n.tickFormat()(a,c)}).valueFormatter(function(a,
e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function F(a){var c=2===k[a.seriesIndex].yAxis?V:w;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};X.duration(100).headerFormatter(function(a,c){return n.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function S(a){var c=2===k[a.seriesIndex].yAxis?V:w;a.point.x=R.x()(a.point);a.point.y=R.y()(a.point);X.duration(0).headerFormatter(function(a,c){return n.tickFormat()(a,
c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function Y(a){var c=2===k[a.data.series].yAxis?V:w;a.value=u.x()(a.data);a.series={value:u.y()(a.data),color:a.color,key:a.data.key};X.duration(0).headerFormatter(function(a,c){return n.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function W(){for(var a=0,c=I.length;a<c;a++){var e=I[a];try{e.clearHighlights()}catch(Ib){}}}function ya(a,c,e){for(var f=0,h=I.length;f<
h;f++){var k=I[f];try{k.highlightPoint(a,c,e)}catch(ic){}}}var za=d3.select(this);c.utils.initSVG(za);a.update=function(){za.transition().call(a)};a.container=this;var la=c.utils.availableWidth(h,za,e),ca=c.utils.availableHeight(m,za,e),ea=k.filter(function(a){return"line"==a.type&&1==a.yAxis}),qa=k.filter(function(a){return"line"==a.type&&2==a.yAxis}),xa=k.filter(function(a){return"scatter"==a.type&&1==a.yAxis}),va=k.filter(function(a){return"scatter"==a.type&&2==a.yAxis}),ta=k.filter(function(a){return"bar"==
a.type&&1==a.yAxis}),Ia=k.filter(function(a){return"bar"==a.type&&2==a.yAxis}),ua=k.filter(function(a){return"area"==a.type&&1==a.yAxis}),na=k.filter(function(a){return"area"==a.type&&2==a.yAxis});if(k&&k.length&&k.filter(function(a){return a.values.length}).length)za.selectAll(".nv-noData").remove();else return c.utils.noData(a,za),a;var Ga=k.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:A(a),y:C(a)}})}),oa=k.filter(function(a){return!a.disabled&&
2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:A(a),y:C(a)}})});L.domain(d3.extent(d3.merge(Ga.concat(oa)),function(a){return a.x})).range([0,la]);var Aa=za.selectAll("g.wrap.multiChart").data([k]),da=Aa.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");da.append("g").attr("class","nv-x nv-axis");da.append("g").attr("class","nv-y1 nv-axis");da.append("g").attr("class","nv-y2 nv-axis");da.append("g").attr("class","stack1Wrap");da.append("g").attr("class",
"stack2Wrap");da.append("g").attr("class","bars1Wrap");da.append("g").attr("class","bars2Wrap");da.append("g").attr("class","scatters1Wrap");da.append("g").attr("class","scatters2Wrap");da.append("g").attr("class","lines1Wrap");da.append("g").attr("class","lines2Wrap");da.append("g").attr("class","legendWrap");da.append("g").attr("class","nv-interactive");var da=Aa.select("g"),Ea=k.map(function(a,c){return k[c].color||l(a,c)});if(q){var Fa=Z.align()?la/2:la,kb=Z.align()?Fa:0;Z.width(Fa);Z.color(Ea);
da.select(".legendWrap").datum(k.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":N);return a})).call(Z);f||Z.height()===e.top||(e.top=Z.height(),ca=c.utils.availableHeight(m,za,e));da.select(".legendWrap").attr("transform","translate("+kb+","+-e.top+")")}else da.select(".legendWrap").selectAll("*").remove();Q.width(la).height(ca).interpolate(E).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"line"==k[c].type}));O.width(la).height(ca).interpolate(E).color(Ea.filter(function(a,
c){return!k[c].disabled&&2==k[c].yAxis&&"line"==k[c].type}));J.width(la).height(ca).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"scatter"==k[c].type}));D.width(la).height(ca).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"scatter"==k[c].type}));u.width(la).height(ca).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"bar"==k[c].type}));K.width(la).height(ca).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"bar"==k[c].type}));
R.width(la).height(ca).interpolate(E).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"area"==k[c].type}));M.width(la).height(ca).interpolate(E).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"area"==k[c].type}));da.attr("transform","translate("+e.left+","+e.top+")");var Ea=da.select(".lines1Wrap").datum(ea.filter(function(a){return!a.disabled})),Fa=da.select(".scatters1Wrap").datum(xa.filter(function(a){return!a.disabled})),kb=da.select(".bars1Wrap").datum(ta.filter(function(a){return!a.disabled})),
Ja=da.select(".stack1Wrap").datum(ua.filter(function(a){return!a.disabled})),vb=da.select(".lines2Wrap").datum(qa.filter(function(a){return!a.disabled})),bb=da.select(".scatters2Wrap").datum(va.filter(function(a){return!a.disabled})),$b=da.select(".bars2Wrap").datum(Ia.filter(function(a){return!a.disabled})),ac=da.select(".stack2Wrap").datum(na.filter(function(a){return!a.disabled})),bc=ua.length?ua.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+
c[e].y}})}).concat([{x:0,y:0}]):[],Hb=na.length?na.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[];z.domain(r||d3.extent(d3.merge(Ga).concat(bc),function(a){return a.y})).range([0,ca]);t.domain(x||d3.extent(d3.merge(oa).concat(Hb),function(a){return a.y})).range([0,ca]);Q.yDomain(z.domain());J.yDomain(z.domain());u.yDomain(z.domain());R.yDomain(z.domain());O.yDomain(t.domain());D.yDomain(t.domain());K.yDomain(t.domain());
M.yDomain(t.domain());ua.length&&d3.transition(Ja).call(R);na.length&&d3.transition(ac).call(M);ta.length&&d3.transition(kb).call(u);Ia.length&&d3.transition($b).call(K);ea.length&&d3.transition(Ea).call(Q);qa.length&&d3.transition(vb).call(O);xa.length&&d3.transition(Fa).call(J);va.length&&d3.transition(bb).call(D);n._ticks(c.utils.calcTicksX(la/100,k)).tickSize(-ca,0);da.select(".nv-x.nv-axis").attr("transform","translate(0,"+ca+")");d3.transition(da.select(".nv-x.nv-axis")).call(n);w._ticks(c.utils.calcTicksY(ca/
36,k)).tickSize(-la,0);d3.transition(da.select(".nv-y1.nv-axis")).call(w);V._ticks(c.utils.calcTicksY(ca/36,k)).tickSize(-la,0);d3.transition(da.select(".nv-y2.nv-axis")).call(V);da.select(".nv-y1.nv-axis").classed("nv-disabled",Ga.length?!1:!0).attr("transform","translate("+L.range()[0]+",0)");da.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+L.range()[1]+",0)");Z.dispatch.on("stateChange",function(c){a.update()});B&&(H.width(la).height(ca).margin({left:e.left,
top:e.top}).svgContainer(za).xScale(L),Aa.select(".nv-interactive").call(H));B?(H.dispatch.on("elementMousemove",function(e){W();var f,h,m,t=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,n){var q=L.domain(),u=k.values.filter(function(c,e){return a.x()(c,e)>=q[0]&&a.x()(c,e)<=q[1]});h=c.interactiveBisect(u,e.pointXValue,a.x());var u=u[h],r=a.y()(u,h);null!==r&&ya(n,h,!0);void 0!==u&&(void 0===f&&(f=u),void 0===m&&(m=L(a.x()(u,h))),t.push({key:k.key,value:r,color:l(k,
k.seriesIndex),data:u,yAxis:2==k.yAxis?V:w}))});var q=function(a,c){var e=t[c].yAxis;return null==a?"N/A":e.tickFormat()(a)};H.tooltip.headerFormatter(function(a,c){return n.tickFormat()(a,c)}).valueFormatter(H.tooltip.valueFormatter()||q).data({value:a.x()(f,h),index:h,series:t})();H.renderGuideLine(m)}),H.dispatch.on("elementMouseout",function(a){W()})):(Q.dispatch.on("elementMouseover.tooltip",G),O.dispatch.on("elementMouseover.tooltip",G),Q.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),
O.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),J.dispatch.on("elementMouseover.tooltip",F),D.dispatch.on("elementMouseover.tooltip",F),J.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),D.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),R.dispatch.on("elementMouseover.tooltip",S),M.dispatch.on("elementMouseover.tooltip",S),R.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),M.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),
u.dispatch.on("elementMouseover.tooltip",Y),K.dispatch.on("elementMouseover.tooltip",Y),u.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),K.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),u.dispatch.on("elementMousemove.tooltip",function(a){X()}),K.dispatch.on("elementMousemove.tooltip",function(a){X()}))});return a}var e={top:30,right:20,bottom:50,left:60},f=null,l=c.utils.defaultColor(),h=null,m=null,q=!0,k=null,r,x,A=function(a){return a.x},C=function(a){return a.y},
E="linear",F=!0,H=c.interactiveGuideline(),B=!1,N=" (right axis)",G=250,L=d3.scale.linear(),z=d3.scale.linear(),t=d3.scale.linear(),Q=c.models.line().yScale(z).duration(G),O=c.models.line().yScale(t).duration(G),J=c.models.scatter().yScale(z).duration(G),D=c.models.scatter().yScale(t).duration(G),u=c.models.multiBar().stacked(!1).yScale(z).duration(G),K=c.models.multiBar().stacked(!1).yScale(t).duration(G),R=c.models.stackedArea().yScale(z).duration(G),M=c.models.stackedArea().yScale(t).duration(G),
n=c.models.axis().scale(L).orient("bottom").tickPadding(5).duration(G),w=c.models.axis().scale(z).orient("left").duration(G),V=c.models.axis().scale(t).orient("right").duration(G),Z=c.models.legend().height(30),X=c.models.tooltip(),Y=d3.dispatch(),I=[Q,O,J,D,u,K,R,M];a.dispatch=Y;a.legend=Z;a.lines1=Q;a.lines2=O;a.scatters1=J;a.scatters2=D;a.bars1=u;a.bars2=K;a.stack1=R;a.stack2=M;a.xAxis=n;a.yAxis1=w;a.yAxis2=V;a.tooltip=X;a.interactiveLayer=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return m},set:function(a){m=a}},showLegend:{get:function(){return q},set:function(a){q=a}},yDomain1:{get:function(){return r},set:function(a){r=a}},yDomain2:{get:function(){return x},set:function(a){x=a}},noData:{get:function(){return k},set:function(a){k=a}},interpolate:{get:function(){return E},set:function(a){E=a}},legendRightAxisHint:{get:function(){return N},set:function(a){N=a}},margin:{get:function(){return e},set:function(a){void 0!==
a.top&&(f=e.top=a.top);e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a)}},x:{get:function(){return A},set:function(a){A=a;Q.x(a);O.x(a);J.x(a);D.x(a);u.x(a);K.x(a);R.x(a);M.x(a)}},y:{get:function(){return C},set:function(a){C=a;Q.y(a);O.y(a);J.y(a);D.y(a);R.y(a);M.y(a);u.y(a);K.y(a)}},useVoronoi:{get:function(){return F},set:function(a){F=a;Q.useVoronoi(a);
O.useVoronoi(a);R.useVoronoi(a);M.useVoronoi(a)}},useInteractiveGuideline:{get:function(){return B},set:function(a){if(B=a)Q.interactive(!1),Q.useVoronoi(!1),O.interactive(!1),O.useVoronoi(!1),R.interactive(!1),R.useVoronoi(!1),M.interactive(!1),M.useVoronoi(!1),J.interactive(!1),D.interactive(!1)}},duration:{get:function(){return G},set:function(a){G=a;[Q,O,R,M,J,D,n,w,V].forEach(function(a){a.duration(G)})}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(u){u.each(function(a){m=
d3.select(this);var u=c.utils.availableWidth(f,m,e),z=c.utils.availableHeight(l,m,e);c.utils.initSVG(m);var n=u/a[0].values.length*.9;q.domain(t||d3.extent(a[0].values.map(r).concat(H)));N?q.range(O||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):q.range(O||[5+n/2,u-n/2-5]);k.domain(Q||[d3.min(a[0].values.map(F).concat(B)),d3.max(a[0].values.map(E).concat(B))]).range(J||[z,0]);q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+
.01*q.domain()[1]]):q.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var w=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),K=w.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),Z=K.append("defs"),K=K.append("g"),X=w.select("g");K.append("g").attr("class","nv-ticks");w.attr("transform","translate("+e.left+","+e.top+")");m.on("click",function(a,c){D.chartClick({data:a,
index:c,pos:d3.event,id:h})});Z.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");w.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",z);X.attr("clip-path",G?"url(#nv-chart-clip-path-"+h+")":"");z=w.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});z.exit().remove();z.enter().append("path").attr("class",function(a,c,e){return(A(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+
(k(A(a,c))-k(E(a,c)))+"l"+-n/2+",0l"+n/2+",0l0,"+(k(F(a,c))-k(A(a,c)))+"l0,"+(k(C(a,c))-k(F(a,c)))+"l"+n/2+",0l"+-n/2+",0z"}).attr("transform",function(a,c){return"translate("+q(r(a,c))+","+k(E(a,c))+")"}).attr("fill",function(a,c){return L[0]}).attr("stroke",function(a,c){return L[0]}).attr("x",0).attr("y",function(a,c){return k(Math.max(0,x(a,c)))}).attr("height",function(a,c){return Math.abs(k(x(a,c))-k(0))});z.attr("class",function(a,c,e){return(A(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+
" nv-tick-"+e+"-"+c});d3.transition(z).attr("transform",function(a,c){return"translate("+q(r(a,c))+","+k(E(a,c))+")"}).attr("d",function(c,e){var f=u/a[0].values.length*.9;return"m0,0l0,"+(k(A(c,e))-k(E(c,e)))+"l"+-f/2+",0l"+f/2+",0l0,"+(k(F(c,e))-k(A(c,e)))+"l0,"+(k(C(c,e))-k(F(c,e)))+"l"+f/2+",0l"+-f/2+",0z"})});return a}var e={top:0,right:0,bottom:0,left:0},f=null,l=null,h=Math.floor(1E4*Math.random()),m=null,q=d3.scale.linear(),k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},
A=function(a){return a.open},C=function(a){return a.close},E=function(a){return a.high},F=function(a){return a.low},H=[],B=[],N=!1,G=!0,L=c.utils.defaultColor(),z=!1,t,Q,O,J,D=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();m.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){m.select(".nv-ohlcBar .nv-tick.hover").classed("hover",
!1)};a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return t},set:function(a){t=a}},yDomain:{get:function(){return Q},set:function(a){Q=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return J},
set:function(a){J=a}},forceX:{get:function(){return H},set:function(a){H=a}},forceY:{get:function(){return B},set:function(a){B=a}},padData:{get:function(){return N},set:function(a){N=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return z},set:function(a){z=a}},x:{get:function(){return r},set:function(a){r=a}},y:{get:function(){return x},set:function(a){x=a}},open:{get:function(){return A()},set:function(a){A=
a}},close:{get:function(){return C()},set:function(a){C=a}},high:{get:function(){return E},set:function(a){E=a}},low:{get:function(){return F},set:function(a){F=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=
function(){function a(K){u.reset();K.each(function(a){function u(a){return O(A.map(function(c){if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key]))||ma){var e=k[c.key].domain(),f=k[c.key].range(),h=e[0]-(e[1]-e[0])/9;0>G.indexOf(c.key)&&(e=d3.scale.linear().domain([h,e[1]]).range([m-12,f[1]]),k[c.key].brush.y(e),G.push(c.key));if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key])))return[q(c.key),k[c.key](h)]}void 0!==la&&(0<G.length||ma?(la.style("display","inline"),ca.style("display",
"inline")):(la.style("display","none"),ca.style("display","none")));return[q(c.key),k[c.key](a.values[c.key])]}))}function n(a){H.forEach(function(c){var e=k[c.dimension].brush.y().domain();c.hasOnlyNaN&&(c.extent[1]=(k[c.dimension].domain()[1]-e[0])*(c.extent[1]-c.extent[0])/(pa[c.dimension]-c.extent[0])+e[0]);c.hasNaN&&(c.extent[0]=e[0]);a&&k[c.dimension].brush.extent(c.extent)});Q.select(".nv-brushBackground").each(function(a){d3.select(this).call(k[a.key].brush)}).selectAll("rect").attr("x",-8).attr("width",
16);R()}function w(){!1===E&&(E=!0,n(!0))}function K(){ea=C.filter(function(a){return!k[a].brush.empty()});qa=ea.map(function(a){return k[a].brush.extent()});H=[];ea.forEach(function(a,c){H[c]={dimension:a,extent:qa[c],hasNaN:!1,hasOnlyNaN:!1}});B=[];z.style("display",function(a){var c=ea.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&qa[e][0]==k[c].brush.y().domain()[0]?!0:qa[e][0]<=a.values[c]&&a.values[c]<=qa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&B.push(a);
return c?null:"none"});R();D.brush({filters:H,active:B})}function Z(){var a=0<ea.length?!0:!1;H.forEach(function(a){a.extent[0]===k[a.dimension].brush.y().domain()[0]&&0<=G.indexOf(a.dimension)&&(a.hasNaN=!0);a.extent[1]<k[a.dimension].domain()[0]&&(a.hasOnlyNaN=!0)});D.brushEnd(B,a)}function R(){Q.select(".nv-axis").each(function(a,c){var e=H.filter(function(c){return c.dimension==a.key});aa[a.key]=k[a.key].domain();0!=e.length&&E&&(aa[a.key]=[],e[0].extent[1]>k[a.key].domain()[0]&&(aa[a.key]=[e[0].extent[1]]),
e[0].extent[0]>=k[a.key].domain()[0]&&aa[a.key].push(e[0].extent[0]));d3.select(this).call(J.scale(k[a.key]).tickFormat(a.format).tickValues(aa[a.key]))})}function Y(a){var c=N[a];return null==c?q(a):c}var I=d3.select(this);h=c.utils.availableWidth(f,I,e);m=c.utils.availableHeight(l,I,e);c.utils.initSVG(I);if(void 0===a[0].values){var S=[];a.forEach(function(a){var c={};Object.keys(a).forEach(function(e){"name"!==e&&(c[e]=a[e])});S.push({key:a.name,values:c})});a=S}var W=a.map(function(a){return a.values});
0===B.length&&(B=a);C=x.sort(function(a,c){return a.currentPosition-c.currentPosition}).map(function(a){return a.key});A=x.filter(function(a){return!a.disabled});q.rangePoints([0,h],1).domain(A.map(function(a){return a.key}));var pa={},ma=!1,aa=[];C.forEach(function(a){var c=d3.extent(W,function(c){return+c[a]}),e=c[0],c=c[1],f=!1;if(isNaN(e)||isNaN(c))f=!0,c=e=0;e===c&&(--e,c+=1);var h=H.filter(function(c){return c.dimension==a});0!==h.length&&(f?(e=k[a].domain()[0],c=k[a].domain()[1]):!h[0].hasOnlyNaN&&
E?(e=e>h[0].extent[0]?h[0].extent[0]:e,c=c<h[0].extent[1]?h[0].extent[1]:c):h[0].hasNaN&&(c=c<h[0].extent[1]?h[0].extent[1]:c,pa[a]=k[a].domain()[1],ma=!0));k[a]=d3.scale.linear().domain([e,c]).range([.9*(m-12),0]);G=[];k[a].brush=d3.svg.brush().y(k[a]).on("brushstart",w).on("brush",K).on("brushend",Z)});var I=I.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),fa=I.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),ka=I.select("g");fa.append("g").attr("class",
"nv-parallelCoordinates background");fa.append("g").attr("class","nv-parallelCoordinates foreground");fa.append("g").attr("class","nv-parallelCoordinates missingValuesline");I.attr("transform","translate("+e.left+","+e.top+")");O.interpolate("cardinal").tension(L);J.orient("left");var fa=d3.behavior.drag().on("dragstart",function(a){N[a.key]=this.parentNode.__origin__=q(a.key);t.attr("visibility","hidden")}).on("drag",function(a){N[a.key]=Math.min(h,Math.max(0,this.parentNode.__origin__+=d3.event.x));
z.attr("d",u);A.sort(function(a,c){return Y(a.key)-Y(c.key)});A.forEach(function(a,c){return a.currentPosition=c});q.domain(A.map(function(a){return a.key}));Q.attr("transform",function(a){return"translate("+Y(a.key)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete N[a.key];d3.select(this.parentNode).attr("transform","translate("+q(a.key)+")");z.attr("d",u);t.attr("d",u).attr("visibility",null);D.dimensionsOrder(A)}),ya=q.range()[1]-q.range()[0],ya=isNaN(ya)?q.range()[0]:
ya;if(!isNaN(ya)){var za=[0+ya/2,m-12,h-ya/2,m-12];var la=I.select(".missingValuesline").selectAll("line").data([za]);la.enter().append("line");la.exit().remove();la.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var ca=I.select(".missingValuesline").selectAll("text").data([r]);ca.append("text").data([r]);ca.enter().append("text");ca.exit().remove();ca.attr("y",m).attr("x",h-92-ya/2).text(function(a){return a})}t=
I.select(".background").selectAll("path").data(a);t.enter().append("path");t.exit().remove();t.attr("d",u);z=I.select(".foreground").selectAll("path").data(a);z.enter().append("path");z.exit().remove();z.attr("d",u).style("stroke-width",function(a,c){isNaN(a.strokeWidth)&&(a.strokeWidth=1);return a.strokeWidth}).attr("stroke",function(a,c){return a.color||F(a,c)});z.on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("stroke-width",a.strokeWidth+2+"px").style("stroke-opacity",1);
D.elementMouseover({label:a.name,color:a.color||F(a,c),values:a.values,dimensions:A})});z.on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("stroke-width",a.strokeWidth+"px").style("stroke-opacity",.7);D.elementMouseout({label:a.name,index:c})});z.on("mousemove",function(a,c){D.elementMousemove()});z.on("click",function(a){D.elementClick({id:a.id})});Q=ka.selectAll(".dimension").data(A);a=Q.enter().append("g").attr("class","nv-parallelCoordinates dimension");Q.attr("transform",
function(a){return"translate("+q(a.key)+",0)"});a.append("g").attr("class","nv-axis");a.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(a,c){D.elementMouseover({label:a.tooltip||a.key,color:a.color})}).on("mouseout",function(a,c){D.elementMouseout({label:a.tooltip})}).on("mousemove",function(a,c){D.elementMousemove()}).call(fa);a.append("g").attr("class","nv-brushBackground");Q.exit().remove();Q.select(".nv-label").text(function(a){return a.key});
n(E);var ea=C.filter(function(a){return!k[a].brush.empty()}),qa=ea.map(function(a){return k[a].brush.extent()});a=B.slice(0);B=[];z.style("display",function(a){var c=ea.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&qa[e][0]==k[c].brush.y().domain()[0]?!0:qa[e][0]<=a.values[c]&&a.values[c]<=qa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&B.push(a);return c?null:"none"});(0<H.length||!c.utils.arrayEquals(B,a))&&D.activeChanged(B)});return a}var e={top:30,right:0,bottom:10,
left:0},f=null,l=null,h=null,m=null,q=d3.scale.ordinal(),k={},r="undefined values",x=[],A=[],C=[],E=!0,F=c.utils.defaultColor(),H=[],B=[],N=[],G=[],L=1,z,t,Q,O=d3.svg.line(),J=d3.svg.axis(),D=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),u=c.utils.renderWatch(D);a.dispatch=D;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},
set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},dimensionData:{get:function(){return x},set:function(a){x=a}},displayBrush:{get:function(){return E},set:function(a){E=a}},filters:{get:function(){return H},set:function(a){H=a}},active:{get:function(){return B},set:function(a){B=a}},lineTension:{get:function(){return L},set:function(a){L=a}},undefinedValuesLabel:{get:function(){return r},set:function(a){r=a}},dimensions:{get:function(){return x.map(function(a){return a.key})},
set:function(a){c.deprecated("dimensions","use dimensionData instead");0===x.length?a.forEach(function(a){x.push({key:a})}):a.forEach(function(a,c){x[c].key=a})}},dimensionNames:{get:function(){return x.map(function(a){return a.key})},set:function(a){c.deprecated("dimensionNames","use dimensionData instead");C=[];0===x.length?a.forEach(function(a){x.push({key:a})}):a.forEach(function(a,c){x[c].key=a})}},dimensionFormats:{get:function(){return x.map(function(a){return a.format})},set:function(a){c.deprecated("dimensionFormats",
"use dimensionData instead");0===x.length?a.forEach(function(a){x.push({format:a})}):a.forEach(function(a,c){x[c].format=a})}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinatesChart=function(){function a(l){G.reset();
G.models(e);l.each(function(l){var t=d3.select(this);c.utils.initSVG(t);var G=c.utils.availableWidth(q,t,h),x=c.utils.availableHeight(k,t,h);a.update=function(){t.call(a)};a.container=this;A.setter(z(C),a.update).getter(L(C)).update();A.disabled=C.map(function(a){return!!a.disabled});C=C.map(function(a){a.disabled=!!a.disabled;return a});C.forEach(function(a,c){a.originalPosition=isNaN(a.originalPosition)?c:a.originalPosition;a.currentPosition=isNaN(a.currentPosition)?c:a.currentPosition});if(!F)for(u in F=
{},A)F[u]=A[u]instanceof Array?A[u].slice(0):A[u];if(l&&l.length)t.selectAll(".nv-noData").remove();else return c.utils.noData(a,t),a;var u=t.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([l]);var B=u.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),H=u.select("g");B.append("g").attr("class","nv-parallelCoordinatesWrap");B.append("g").attr("class","nv-legendWrap");H.select("rect").attr("width",G).attr("height",0<x?x:0);r?(f.width(G).color(function(a){return"rgb(188,190,192)"}),
H.select(".nv-legendWrap").datum(C.sort(function(a,c){return a.originalPosition-c.originalPosition})).call(f),m||f.height()===h.top||(h.top=f.height(),x=c.utils.availableHeight(k,t,h)),u.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-h.top+")")):H.select(".nv-legendWrap").selectAll("*").remove();u.attr("transform","translate("+h.left+","+h.top+")");e.width(G).height(x).dimensionData(C).displayBrush(E);H.select(".nv-parallelCoordinatesWrap ").datum(l).transition().call(e);e.dispatch.on("brushEnd",
function(a,c){c?(E=!0,N.brushEnd(a)):E=!1});f.dispatch.on("stateChange",function(c){for(var e in c)A[e]=c[e];N.stateChange(A);a.update()});e.dispatch.on("dimensionsOrder",function(a){C.sort(function(a,c){return a.currentPosition-c.currentPosition});var c=!1;C.forEach(function(a,e){a.currentPosition=e;a.currentPosition!==a.originalPosition&&(c=!0)});N.dimensionsOrder(C,c)});N.on("changeState",function(c){"undefined"!==typeof c.disabled&&(C.forEach(function(a,e){a.disabled=c.disabled[e]}),A.disabled=
c.disabled);a.update()})});G.renderEnd("parraleleCoordinateChart immediate");return a}var e=c.models.parallelCoordinates(),f=c.models.legend(),l=c.models.tooltip();c.models.tooltip();var h={top:0,right:0,bottom:0,left:0},m=null,q=null,k=null,r=!0,x=c.utils.defaultColor(),A=c.utils.state(),C=[],E=!0,F=null,H=null,B="undefined",N=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),G=c.utils.renderWatch(N),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
z=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};l.contentGenerator(function(a){var c='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td><strong>'+a.key+"</strong></td></tr></thead>";0!==a.series.length&&(c+='<tbody><tr><td height ="10px"></td></tr>',a.series.forEach(function(a){c=c+'<tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td class="key">'+
a.key+'</td><td class="value">'+a.value+"</td></tr>"}),c+="</tbody>");return c+="</table>"});e.dispatch.on("elementMouseover.tooltip",function(a){var c={key:a.label,color:a.color,series:[]};a.values&&(Object.keys(a.values).forEach(function(e){var f=a.dimensions.filter(function(a){return a.key===e})[0];if(f){var h=isNaN(a.values[e])||isNaN(parseFloat(a.values[e]))?B:f.format(a.values[e]);c.series.push({idx:f.currentPosition,key:e,value:h,color:f.color})}}),c.series.sort(function(a,c){return a.idx-
c.idx}));l.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(){l()});a.dispatch=N;a.parallelCoordinates=e;a.legend=f;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return q},set:function(a){q=a}},height:{get:function(){return k},set:function(a){k=a}},showLegend:{get:function(){return r},set:function(a){r=a}},defaultState:{get:function(){return F},set:function(a){F=
a}},dimensionData:{get:function(){return C},set:function(a){C=a}},displayBrush:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return H},set:function(a){H=a}},nanValue:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(m=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},color:{get:function(){return x},set:function(a){x=c.utils.getColor(a);
f.color(x);e.color(x)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.pie=function(){function a(w){n.reset();w.each(function(a){var w=f-e.left-e.right,V=l-e.top-e.bottom,Y=Math.min(w,V)/2,I=[],S=[];k=d3.select(this);if(0===u.length)for(var W=Y-Y/5,pa=J*Y,ma=0;ma<a[0].length;ma++)I.push(W),S.push(pa);else N?(I=u.map(function(a){return(a.outer-a.outer/5)*Y}),S=u.map(function(a){return(a.inner-a.inner/5)*Y}),J=d3.min(u.map(function(a){return a.inner-a.inner/5}))):(I=u.map(function(a){return a.outer*
Y}),S=u.map(function(a){return a.inner*Y}),J=d3.min(u.map(function(a){return a.inner})));c.utils.initSVG(k);var W=k.selectAll(".nv-wrap.nv-pie").data(a),ma=W.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+q).append("g"),aa=W.select("g"),pa=ma.append("g").attr("class","nv-pie");ma.append("g").attr("class","nv-pieLabels");W.attr("transform","translate("+e.left+","+e.top+")");aa.select(".nv-pie").attr("transform","translate("+w/2+","+V/2+")");aa.select(".nv-pieLabels").attr("transform",
"translate("+w/2+","+V/2+")");k.on("click",function(a,c){K.chartClick({data:a,index:c,pos:d3.event,id:q})});R=[];M=[];for(ma=0;ma<a[0].length;ma++){var aa=d3.svg.arc().outerRadius(I[ma]),fa=d3.svg.arc().outerRadius(I[ma]+5);!1!==z&&(aa.startAngle(z),fa.startAngle(z));!1!==Q&&(aa.endAngle(Q),fa.endAngle(Q));H&&(aa.innerRadius(S[ma]),fa.innerRadius(S[ma]));aa.cornerRadius&&O&&(aa.cornerRadius(O),fa.cornerRadius(O));R.push(aa);M.push(fa)}S=d3.layout.pie().sort(null).value(function(a){return a.disabled?
0:m(a)});S.padAngle&&t&&S.padAngle(t);H&&B&&(pa.append("text").attr("class","nv-pie-title"),W.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return B}).style("font-size",Math.min(w,V)*J*2/(B.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+G+")"}));w=W.select(".nv-pie").selectAll(".nv-slice").data(S);V=W.select(".nv-pieLabels").selectAll(".nv-label").data(S);w.exit().remove();V.exit().remove();S=w.enter().append("g");S.attr("class","nv-slice");
S.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);N&&d3.select(this).select("path").transition().duration(70).attr("d",M[c]);K.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill"),percent:(a.endAngle-a.startAngle)/(2*Math.PI)})});S.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);N&&d3.select(this).select("path").transition().duration(50).attr("d",R[c]);K.elementMouseout({data:a.data,index:c})});S.on("mousemove",function(a,c){K.elementMousemove({data:a.data,
index:c})});S.on("click",function(a,c){K.elementClick({data:a.data,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this})});S.on("dblclick",function(a,c){K.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});w.attr("fill",function(a,c){return r(a.data,c)});w.attr("stroke",function(a,c){return r(a.data,c)});S.append("path").each(function(a){this._current=a});w.select("path").transition().duration(D).attr("d",function(a,c){return R[c](a)}).attrTween("d",function(a,
c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;H||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return R[c](e(a))}});if(A){for(var ka=[],ma=0;ma<a[0].length;ma++)ka.push(R[ma]),C?H&&(ka[ma]=d3.svg.arc().outerRadius(R[ma].outerRadius()),!1!==z&&ka[ma].startAngle(z),!1!==Q&&ka[ma].endAngle(Q)):H||ka[ma].innerRadius(0);V.enter().append("g").classed("nv-label",!0).each(function(a,c){var e=d3.select(this);e.attr("transform",
function(a,c){if(L){a.outerRadius=I[c]+10;a.innerRadius=I[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ka[c].centroid(a)+") rotate("+e+")"}a.outerRadius=Y+10;a.innerRadius=Y+15;return"translate("+ka[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",L?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});
var ya={},za=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};V.watchTransition(n,"pie labels").attr("transform",function(a,c){if(L){a.outerRadius=I[c]+10;a.innerRadius=I[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ka[c].centroid(a)+") rotate("+e+")"}a.outerRadius=Y+10;a.innerRadius=Y+15;var e=ka[c].centroid(a),f=(a.endAngle-a.startAngle)/(2*Math.PI);a.value&&f>=F&&(f=za(e),ya[f]&&(e[1]-=14),ya[za(e)]=
!0);return"translate("+e+")"});V.select(".nv-label text").style("text-anchor",function(a,c){return L?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),f="";if(!a.value||e<F)return"";if("function"===typeof E)f=E(a,c,{key:h(a.data),value:m(a.data),percent:x(e)});else switch(E){case "key":f=h(a.data);break;case "value":f=x(m(a.data));break;case "percent":f=d3.format("%")(e)}return f})}});n.renderEnd("pie immediate");return a}var e=
{top:0,right:0,bottom:0,left:0},f=500,l=500,h=function(a){return a.x},m=function(a){return a.y},q=Math.floor(1E4*Math.random()),k=null,r=c.utils.defaultColor(),x=d3.format(",.2f"),A=!0,C=!1,E="key",F=.02,H=!1,B=!1,N=!0,G=0,L=!1,z=!1,t=!1,Q=!1,O=0,J=.5,D=250,u=[],K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),R=[],M=[],n=c.utils.renderWatch(K);a.dispatch=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return u},set:function(a){u=a}},width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},showLabels:{get:function(){return A},set:function(a){A=a}},title:{get:function(){return B},set:function(a){B=a}},titleOffset:{get:function(){return G},set:function(a){G=a}},labelThreshold:{get:function(){return F},set:function(a){F=a}},valueFormat:{get:function(){return x},set:function(a){x=a}},x:{get:function(){return h},set:function(a){h=
a}},id:{get:function(){return q},set:function(a){q=a}},endAngle:{get:function(){return Q},set:function(a){Q=a}},startAngle:{get:function(){return z},set:function(a){z=a}},padAngle:{get:function(){return t},set:function(a){t=a}},cornerRadius:{get:function(){return O},set:function(a){O=a}},donutRatio:{get:function(){return J},set:function(a){J=a}},labelsOutside:{get:function(){return C},set:function(a){C=a}},labelSunbeamLayout:{get:function(){return L},set:function(a){L=a}},donut:{get:function(){return H},
set:function(a){H=a}},growOnHover:{get:function(){return N},set:function(a){N=a}},pieLabelsOutside:{get:function(){return C},set:function(a){C=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return C},set:function(a){C=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return x},set:function(a){x=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(a){e.top=
"undefined"!=typeof a.top?a.top:e.top;e.right="undefined"!=typeof a.right?a.right:e.right;e.bottom="undefined"!=typeof a.bottom?a.bottom:e.bottom;e.left="undefined"!=typeof a.left?a.left:e.left}},duration:{get:function(){return D},set:function(a){D=a;n.reset(D)}},y:{get:function(){return m},set:function(a){m=d3.functor(a)}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}},labelType:{get:function(){return E},set:function(a){E=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=
function(){function a(l){G.reset();G.models(e);l.each(function(l){var t=d3.select(this);c.utils.initSVG(t);var r=c.utils.availableWidth(q,t,h),G=c.utils.availableHeight(k,t,h);a.update=function(){t.transition().call(a)};a.container=this;E.setter(z(l),a.update).getter(L(l)).update();E.disabled=l.map(function(a){return!!a.disabled});if(!F)for(u in F={},E)F[u]=E[u]instanceof Array?E[u].slice(0):E[u];if(l&&l.length)t.selectAll(".nv-noData").remove();else return c.utils.noData(a,t),a;var u=t.selectAll("g.nv-wrap.nv-pieChart").data([l]);
var C=u.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),B=u.select("g");C.append("g").attr("class","nv-pieWrap");C.append("g").attr("class","nv-legendWrap");x?"top"===A?(f.width(r).key(e.x()),u.select(".nv-legendWrap").datum(l).call(f),m||f.height()===h.top||(h.top=f.height(),G=c.utils.availableHeight(k,t,h)),u.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")")):"right"===A&&(C=c.models.legend().width(),r/2<C&&(C=r/2),f.height(G).key(e.x()),f.width(C),r-=
f.width(),u.select(".nv-legendWrap").datum(l).call(f).attr("transform","translate("+r+",0)")):B.select(".nv-legendWrap").selectAll("*").remove();u.attr("transform","translate("+h.left+","+h.top+")");e.width(r).height(G);r=B.select(".nv-pieWrap").datum([l]);d3.transition(r).call(e);f.dispatch.on("stateChange",function(c){for(var e in c)E[e]=c[e];N.stateChange(E);a.update()});N.on("changeState",function(c){"undefined"!==typeof c.disabled&&(l.forEach(function(a,e){a.disabled=c.disabled[e]}),E.disabled=
c.disabled);a.update()})});G.renderEnd("pieChart immediate");return a}var e=c.models.pie(),f=c.models.legend(),l=c.models.tooltip(),h={top:30,right:20,bottom:20,left:20},m=null,q=null,k=null,r=!1,x=!0,A="top",C=c.utils.defaultColor(),E=c.utils.state(),F=null,H=null,B=250,N=d3.dispatch("stateChange","changeState","renderEnd");l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return e.valueFormat()(a,c)});var G=c.utils.renderWatch(N),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
z=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color,percent:c.percent};r||(delete c.percent,delete c.series.percent);l.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){l()});a.legend=f;a.dispatch=N;a.pie=e;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return q},set:function(a){q=a}},height:{get:function(){return k},set:function(a){k=a}},noData:{get:function(){return H},set:function(a){H=a}},showTooltipPercent:{get:function(){return r},set:function(a){r=a}},showLegend:{get:function(){return x},set:function(a){x=a}},legendPosition:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return F},set:function(a){F=a}},color:{get:function(){return C},set:function(a){C=a;f.color(C);
e.color(C)}},duration:{get:function(){return B},set:function(a){B=a;G.reset(B);e.duration(B)}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(m=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sankey=function(){function a(){E.forEach(function(a){a.sourceLinks=[];a.targetLinks=[]});F.forEach(function(a){var c=a.source,e=
a.target;"number"===typeof c&&(c=a.source=E[a.source]);"number"===typeof e&&(e=a.target=E[a.target]);c.sourceLinks.push(a);e.targetLinks.push(a)})}function e(){E.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,k),d3.sum(a.targetLinks,k))})}function f(){for(var a=E,c,e=0;a.length&&e<E.length;)c=[],a.forEach(function(a){a.x=e;a.dx=x;a.sourceLinks.forEach(function(a){0>c.indexOf(a.target)&&c.push(a.target)})}),a=c,++e;H&&l(e);h((C[0]-x)/(e-1))}function l(a){E.forEach(function(c){c.sourceLinks.length||
(c.x=a-1)})}function h(a){E.forEach(function(c){c.x*=a})}function m(a){function c(a){function c(a){return(a.source.y+a.sy+a.dy/2)*a.value}l.forEach(function(e,f){e.forEach(function(e){if(e.targetLinks.length){var f=d3.sum(e.targetLinks,c)/d3.sum(e.targetLinks,k);e.y+=(f-N(e))*a}})})}function e(a){function c(a){return(a.target.y+a.ty+a.dy/2)*a.value}l.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var f=d3.sum(e.sourceLinks,c)/d3.sum(e.sourceLinks,k);e.y+=(f-N(e))*
a}})})}function f(){l.forEach(function(a){var c=0;var e=a.length,f;a.sort(h);for(f=0;f<e;++f){var k=a[f];c-=k.y;0<c&&(k.y+=c);c=k.y+k.dy+A}c=c-A-C[1];if(0<c)for(c=k.y-=c,f=e-2;0<=f;--f)k=a[f],c=k.y+k.dy+A-c,0<c&&(k.y-=c),c=k.y})}function h(a,c){return a.y-c.y}var l=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(E).map(function(a){return a.values});(function(){var a=d3.min(l,function(a){return(C[1]-(a.length-1)*A)/d3.sum(a,k)});l.forEach(function(c){c.forEach(function(c,e){c.y=
e;c.dy=c.value*a})});F.forEach(function(c){c.dy=c.value*a})})();f();q();for(var m=1;0<a;--a)e(m*=.99),f(),q(),c(m),f(),q()}function q(){function a(a,c){return a.source.y-c.source.y}function c(a,c){return a.target.y-c.target.y}E.forEach(function(e){e.sourceLinks.sort(c);e.targetLinks.sort(a)});E.forEach(function(a){var c=0,e=0;a.sourceLinks.forEach(function(a){a.sy=c;c+=a.dy});a.targetLinks.forEach(function(a){a.ty=e;e+=a.dy})})}function k(a){return a.value}var r={},x=24,A=8,C=[1,1],E=[],F=[],H=!0,
B=function(){function a(a){var e=a.source.x+a.source.dx,f=a.target.x,h=d3.interpolateNumber(e,f),k=h(c),h=h(1-c),l=a.source.y+a.sy+a.dy/2;a=a.target.y+a.ty+a.dy/2;return"M"+e+","+l+"C"+k+","+l+" "+h+","+a+" "+f+","+a}var c=.5;a.curvature=function(e){if(!arguments.length)return c;c=+e;return a};return a},N=function(a){return a.y+a.dy/2};r.options=c.utils.optionsFunc.bind(r);r._options=Object.create({},{nodeWidth:{get:function(){return x},set:function(a){x=+a}},nodePadding:{get:function(){return A},
set:function(a){A=a}},nodes:{get:function(){return E},set:function(a){E=a}},links:{get:function(){return F},set:function(a){F=a}},size:{get:function(){return C},set:function(a){C=a}},sinksRight:{get:function(){return H},set:function(a){H=a}},layout:{get:function(){a();e();f();m(32)},set:function(c){a();e();f();m(c)}},relayout:{get:function(){q()},set:function(a){}},center:{get:function(){return N()},set:function(a){"function"===typeof a&&(N=a)}},link:{get:function(){return B()},set:function(a){"function"===
typeof a&&(B=a);return B()}}});c.utils.initOptions(r);return r};c.models.sankeyChart=function(){function a(c){c.each(function(a){var e={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},
{source:3,target:5,value:186}]},k=!1,x=!1;0<=("object"===typeof a.nodes&&a.nodes.length)&&0<=("object"===typeof a.links&&a.links.length)&&(k=!0);a.nodes&&0<a.nodes.length&&a.links&&0<a.links.length&&(x=!0);if(!k)return console.error("NVD3 Sankey chart error:","invalid data format for",a),console.info("Valid data format is: ",e,JSON.stringify(e)),N(c,"Error loading chart, data is invalid"),!1;if(!x)return N(c,"No data available"),!1;e=c.append("svg").attr("width",l).attr("height",h).append("g").attr("class",
"nvd3 nv-wrap nv-sankeyChart");f.nodeWidth(m).nodePadding(q).size([l,h]);var G=f.link();f.nodes(a.nodes).links(a.links).layout(32).center(r);var C=e.append("g").selectAll(".link").data(a.links).enter().append("path").attr("class","link").attr("d",G).style("stroke-width",function(a){return Math.max(1,a.dy)}).sort(function(a,c){return c.dy-a.dy});C.append("title").text(E);a=e.append("g").selectAll(".node").data(a.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+
a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(h-a.dy,d3.event.y)))+")");f.relayout();C.attr("d",G)}));a.append("rect").attr("height",function(a){return a.dy}).attr("width",f.nodeWidth()).style("fill",F).style("stroke",H).append("title").text(B);a.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",
".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<l/2}).attr("x",6+f.nodeWidth()).attr("text-anchor","start")});return a}var e={top:5,right:0,bottom:5,left:0},f=c.models.sankey(),l=600,h=400,m=36,q=40,k="units",r=void 0,x=d3.format(",.0f"),A=function(a){return x(a)+" "+k},C=d3.scale.category20(),E=function(a){return a.source.name+" \u2192 "+a.target.name+"\n"+A(a.value)},F=function(a){return a.color=C(a.name.replace(/ .*/,""))},
H=function(a){return d3.rgb(a.color).darker(2)},B=function(a){return a.name+"\n"+A(a.value)},N=function(a,c){a.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(c)};a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{units:{get:function(){return k},set:function(a){k=a}},width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return h},set:function(a){h=a}},format:{get:function(){return A},set:function(a){A=
a}},linkTitle:{get:function(){return E},set:function(a){E=a}},nodeWidth:{get:function(){return m},set:function(a){m=a}},nodePadding:{get:function(){return q},set:function(a){q=a}},center:{get:function(){return r},set:function(a){r=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},nodeStyle:{get:function(){return{}},set:function(a){F=void 0!==
a.fillColor?a.fillColor:F;H=void 0!==a.strokeColor?a.strokeColor:H;B=void 0!==a.title?a.title:B}}});c.utils.initOptions(a);return a};c.models.scatter=function(){function a(a){delete xa[a[0].series+":"+a[1]]}function e(a){var c=a[0].series+":"+a[1];var e=xa[c]=xa[c]||{};var f=!1;for(c=1;c<arguments.length;c+=2){var h=arguments[c];var k=arguments[c+1](a[0],a[1]);e[h]===k&&e.hasOwnProperty(h)||(e[h]=k,f=!0)}return f}function f(W){ea.reset();W.each(function(W){function va(){ca=!1;if(!t)return!1;if(!0===
S){var a=d3.merge(W.map(function(a,e){return a.values.map(function(a,f){var h=F(a,f),k=H(a,f);return[c.utils.NaNtoZero(A(h))+1E-4*Math.random(),c.utils.NaNtoZero(C(k))+1E-4*Math.random(),e,f,a]}).filter(function(a,c){return Q(a[4],c)})}));if(0==a.length)return!1;3>a.length&&(a.push([A.range()[0]-20,C.range()[0]-20,null,null]),a.push([A.range()[1]+20,C.range()[1]+20,null,null]),a.push([A.range()[0]-20,C.range()[0]+20,null,null]),a.push([A.range()[1]+20,C.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,
-10],[-10,m+10],[h+10,m+10],[h+10,-10]]),f=d3.geom.voronoi(a).map(function(c,f){return{data:e.clip(c),series:a[f][2],point:a[f][3]}});Fa.select(".nv-point-paths").selectAll("path").remove();var f=Fa.select(".nv-point-paths").selectAll("path").data(f),k=f.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+r+"-"+c+")"});K&&k.style("fill",
d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));u&&(Fa.select(".nv-point-clips").selectAll("*").remove(),Fa.select(".nv-point-clips").selectAll("clipPath").data(a).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+r+"-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",R));var n=function(a,c,e){if(ca)return 0;var f=W[c.series];if(void 0!==f){var h=f.values[c.point];
h.color=q(f,c.series);h.x=F(h);h.y=H(h);var k=x.node().getBoundingClientRect(),m=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,k={left:A(F(h,c.point))+k.left+n+l.left+10,top:C(H(h,c.point))+k.top+m+l.top+10};e({point:h,series:f,pos:k,relativePos:[A(F(h,c.point))+l.left,C(H(h,c.point))+l.top],seriesIndex:c.series,pointIndex:c.point,event:d3.event,element:a})}};f.on("click",function(a){n(this,a,I.elementClick)}).on("dblclick",function(a){n(this,
a,I.elementDblClick)}).on("mouseover",function(a){n(this,a,I.elementMouseover)}).on("mouseout",function(a,c){n(this,a,I.elementMouseout)})}else Fa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,c){if(ca||!W[a.series])return 0;var e=W[a.series],f=e.values[c];I.elementClick({point:f,series:e,pos:[A(F(f,c))+l.left,C(H(f,c))+l.top],relativePos:[A(F(f,c))+l.left,C(H(f,c))+l.top],seriesIndex:a.series,pointIndex:c,event:d3.event,element:this})}).on("dblclick",function(a,
c){if(ca||!W[a.series])return 0;var e=W[a.series],f=e.values[c];I.elementDblClick({point:f,series:e,pos:[A(F(f,c))+l.left,C(H(f,c))+l.top],relativePos:[A(F(f,c))+l.left,C(H(f,c))+l.top],seriesIndex:a.series,pointIndex:c})}).on("mouseover",function(a,c){if(ca||!W[a.series])return 0;var e=W[a.series],f=e.values[c];I.elementMouseover({point:f,series:e,pos:[A(F(f,c))+l.left,C(H(f,c))+l.top],relativePos:[A(F(f,c))+l.left,C(H(f,c))+l.top],seriesIndex:a.series,pointIndex:c,color:q(a,c)})}).on("mouseout",
function(a,c){if(ca||!W[a.series])return 0;var e=W[a.series],f=e.values[c];I.elementMouseout({point:f,series:e,pos:[A(F(f,c))+l.left,C(H(f,c))+l.top],relativePos:[A(F(f,c))+l.left,C(H(f,c))+l.top],seriesIndex:a.series,pointIndex:c,color:q(a,c)})})}x=d3.select(this);var ua=c.utils.availableWidth(h,x,l),na=c.utils.availableHeight(m,x,l);c.utils.initSVG(x);W.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Ga=f.yScale().name===d3.scale.log().name?!0:!1,oa=M&&n&&Z?[]:d3.merge(W.map(function(a){return a.values.map(function(a,
c){return{x:F(a,c),y:H(a,c),size:B(a,c)}})}));A.domain(M||d3.extent(oa.map(function(a){return a.x}).concat(G)));O&&W[0]?A.range(w||[(ua*J+ua)/(2*W[0].values.length),ua-ua*(1+J)/(2*W[0].values.length)]):A.range(w||[0,ua]);if(Ga){var Aa=d3.min(oa.map(function(a){if(0!==a.y)return a.y}));C.clamp(!0).domain(n||d3.extent(oa.map(function(a){return 0!==a.y?a.y:.1*Aa}).concat(L))).range(V||[na,0])}else C.domain(n||d3.extent(oa.map(function(a){return a.y}).concat(L))).range(V||[na,0]);E.domain(Z||d3.extent(oa.map(function(a){return a.size}).concat(z))).range(X||
qa);Y=A.domain()[0]===A.domain()[1]||C.domain()[0]===C.domain()[1];A.domain()[0]===A.domain()[1]&&(A.domain()[0]?A.domain([A.domain()[0]-.01*A.domain()[0],A.domain()[1]+.01*A.domain()[1]]):A.domain([-1,1]));C.domain()[0]===C.domain()[1]&&(C.domain()[0]?C.domain([C.domain()[0]-.01*C.domain()[0],C.domain()[1]+.01*C.domain()[1]]):C.domain([-1,1]));isNaN(A.domain()[0])&&A.domain([-1,1]);isNaN(C.domain()[0])&&C.domain([-1,1]);aa=aa||A;fa=fa||C;ka=ka||E;var da=A(1)!==aa(1)||C(1)!==fa(1)||E(1)!==ka(1);ya=
ya||h;za=za||m;var ta=ya!==h||za!==m,Fa=x.selectAll("g.nv-wrap.nv-scatter").data([W]),Ga=Fa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+r),oa=Ga.append("defs"),xa=Ga.append("g"),Ja=Fa.select("g");Fa.classed("nv-single-point",Y);xa.append("g").attr("class","nv-groups");xa.append("g").attr("class","nv-point-paths");Ga.append("g").attr("class","nv-point-clips");Fa.attr("transform","translate("+l.left+","+l.top+")");oa.append("clipPath").attr("id","nv-edge-clip-"+r).append("rect").attr("transform",
"translate( -10, -10)");Fa.select("#nv-edge-clip-"+r+" rect").attr("width",ua+20).attr("height",0<na?na+20:0);Ja.attr("clip-path",D?"url(#nv-edge-clip-"+r+")":"");ca=!0;ua=Fa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});ua.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);ua.exit().remove();ua.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("nv-noninteractive",!t).classed("hover",function(a){return a.hover});
ua.watchTransition(ea,"scatter: groups").style("fill",function(a,c){return q(a,c)}).style("stroke",function(a,c){return a.pointBorderColor||k||q(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);na=ua.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return Q(a[0],c)})});na.enter().append("path").attr("class",function(a){return"nv-point nv-point-"+a[1]}).style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",
function(a){return"translate("+c.utils.NaNtoZero(aa(F(a[0],a[1])))+","+c.utils.NaNtoZero(fa(H(a[0],a[1])))+")"}).attr("d",c.utils.symbol().type(function(a){return N(a[0])}).size(function(a){return E(B(a[0],a[1]))}));na.exit().each(a).remove();ua.exit().selectAll("path.nv-point").watchTransition(ea,"scatter exit").attr("transform",function(a){return"translate("+c.utils.NaNtoZero(A(F(a[0],a[1])))+","+c.utils.NaNtoZero(C(H(a[0],a[1])))+")"}).remove();na.filter(function(a){return da||ta||e(a,"x",F,"y",
H)}).watchTransition(ea,"scatter points").attr("transform",function(a){return"translate("+c.utils.NaNtoZero(A(F(a[0],a[1])))+","+c.utils.NaNtoZero(C(H(a[0],a[1])))+")"});na.filter(function(a){return da||ta||e(a,"shape",N,"size",B)}).watchTransition(ea,"scatter points").attr("d",c.utils.symbol().type(function(a){return N(a[0])}).size(function(a){return E(B(a[0],a[1]))}));ma&&(na=ua.selectAll(".nv-label").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return Q(a[0],
c)})}),na.enter().append("text").style("fill",function(a,c){return a.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(aa(F(a[0],a[1])))+Math.sqrt(E(B(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(fa(H(a[0],a[1])))+")"}).text(function(a,c){return a[0].label}),na.exit().remove(),ua.exit().selectAll("path.nv-label").watchTransition(ea,"scatter exit").attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(A(F(a[0],
a[1])))+Math.sqrt(E(B(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(C(H(a[0],a[1])))+")"}).remove(),na.each(function(a){d3.select(this).classed("nv-label",!0).classed("nv-label-"+a[1],!1).classed("hover",!1)}),na.watchTransition(ea,"scatter labels").attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(A(F(a[0],a[1])))+Math.sqrt(E(B(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(C(H(a[0],a[1])))+")"}));pa?(clearTimeout(la),la=setTimeout(va,pa)):va();aa=A.copy();fa=C.copy();ka=E.copy();
ya=h;za=m});ea.renderEnd("scatter immediate");return f}var l={top:0,right:0,bottom:0,left:0},h=null,m=null,q=c.utils.defaultColor(),k=null,r=Math.floor(1E5*Math.random()),x=null,A=d3.scale.linear(),C=d3.scale.linear(),E=d3.scale.linear(),F=function(a){return a.x},H=function(a){return a.y},B=function(a){return a.size||1},N=function(a){return a.shape||"circle"},G=[],L=[],z=[],t=!0,Q=function(a){return!a.notActive},O=!1,J=.1,D=!1,u=!0,K=!1,R=function(){return 25},M=null,n=null,w=null,V=null,Z=null,X=
null,Y=!1,I=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),S=!0,W=250,pa=300,ma=!1,aa,fa,ka,ya,za,la,ca=!1,ea=c.utils.renderWatch(I,W),qa=[16,256],xa={};f.dispatch=I;f.options=c.utils.optionsFunc.bind(f);f._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){x.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,e,f){c.dom.write(function(){x.select(".nv-groups").selectAll(".nv-series-"+
a).selectAll(".nv-point-"+e).classed("hover",f)})}};I.on("elementMouseover.point",function(a){t&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!0)});I.on("elementMouseout.point",function(a){t&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!1)});f._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return m},set:function(a){m=a}},xScale:{get:function(){return A},set:function(a){A=a}},yScale:{get:function(){return C},set:function(a){C=a}},
pointScale:{get:function(){return E},set:function(a){E=a}},xDomain:{get:function(){return M},set:function(a){M=a}},yDomain:{get:function(){return n},set:function(a){n=a}},pointDomain:{get:function(){return Z},set:function(a){Z=a}},xRange:{get:function(){return w},set:function(a){w=a}},yRange:{get:function(){return V},set:function(a){V=a}},pointRange:{get:function(){return X},set:function(a){X=a}},forceX:{get:function(){return G},set:function(a){G=a}},forceY:{get:function(){return L},set:function(a){L=
a}},forcePoint:{get:function(){return z},set:function(a){z=a}},interactive:{get:function(){return t},set:function(a){t=a}},pointActive:{get:function(){return Q},set:function(a){Q=a}},padDataOuter:{get:function(){return J},set:function(a){J=a}},padData:{get:function(){return O},set:function(a){O=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},clipVoronoi:{get:function(){return u},set:function(a){u=a}},clipRadius:{get:function(){return R},set:function(a){R=a}},showVoronoi:{get:function(){return K},
set:function(a){K=a}},id:{get:function(){return r},set:function(a){r=a}},interactiveUpdateDelay:{get:function(){return pa},set:function(a){pa=a}},showLabels:{get:function(){return ma},set:function(a){ma=a}},pointBorderColor:{get:function(){return k},set:function(a){k=a}},x:{get:function(){return F},set:function(a){F=d3.functor(a)}},y:{get:function(){return H},set:function(a){H=d3.functor(a)}},pointSize:{get:function(){return B},set:function(a){B=d3.functor(a)}},pointShape:{get:function(){return N},
set:function(a){N=d3.functor(a)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return W},set:function(a){W=a;ea.reset(W)}},color:{get:function(){return q},set:function(a){q=c.utils.getColor(a)}},useVoronoi:{get:function(){return S},set:function(a){S=a;!1===S&&(u=!1)}}});c.utils.initOptions(f);return f};c.models.scatterChart=
function(){function a(u){M.reset();M.models(e);z&&M.models(f);t&&M.models(l);N&&M.models(m);G&&M.models(q);u.each(function(u){E=d3.select(this);c.utils.initSVG(E);var Z=c.utils.availableWidth(A,E,r),Y=c.utils.availableHeight(C,E,r);a.update=function(){0===K?E.call(a):E.transition().duration(K).call(a)};a.container=this;O.setter(w(u),a.update).getter(n(u)).update();O.disabled=u.map(function(a){return!!a.disabled});if(!J)for(S in J={},O)J[S]=O[S]instanceof Array?O[S].slice(0):O[S];if(u&&u.length&&u.filter(function(a){return a.values.length}).length)E.selectAll(".nv-noData").remove();
else return c.utils.noData(a,E),M.renderEnd("scatter immediate"),a;H=e.xScale();B=e.yScale();var I=E.selectAll("g.nv-wrap.nv-scatterChart").data([u]);var S=I.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g");var V=I.select("g");S.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y nv-axis");S.append("g").attr("class","nv-scatterWrap");S.append("g").attr("class",
"nv-regressionLinesWrap");S.append("g").attr("class","nv-distWrap");S.append("g").attr("class","nv-legendWrap");Q&&V.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)");L?(h.width(Z),I.select(".nv-legendWrap").datum(u).call(h),x||h.height()===r.top||(r.top=h.height(),Y=c.utils.availableHeight(C,E,r)),I.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")):V.select(".nv-legendWrap").selectAll("*").remove();I.attr("transform","translate("+r.left+","+r.top+")");e.width(Z).height(Y).color(u.map(function(a,
c){a.color=a.color||F(a,c);return a.color}).filter(function(a,c){return!u[c].disabled})).showLabels(R);I.select(".nv-scatterWrap").datum(u.filter(function(a){return!a.disabled})).call(e);I.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");I=I.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});I.enter().append("g").attr("class","nv-regLines");I=I.selectAll(".nv-regLine").data(function(a){return[a]});I.enter().append("line").attr("class",
"nv-regLine").style("stroke-opacity",0);I.filter(function(a){return a.intercept&&a.slope}).watchTransition(M,"scatterPlusLineChart: regline").attr("x1",H.range()[0]).attr("x2",H.range()[1]).attr("y1",function(a,c){return B(H.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return B(H.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return F(a,e)}).style("stroke-opacity",function(a,c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});
z&&(f.scale(H)._ticks(c.utils.calcTicksX(Z/100,u)).tickSize(-Y,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")").call(f));t&&(l.scale(B)._ticks(c.utils.calcTicksY(Y/36,u)).tickSize(-Z,0),V.select(".nv-y.nv-axis").call(l));N&&(m.getData(e.x()).scale(H).width(Z).color(u.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!u[c].disabled})),S.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),V.select(".nv-distributionX").attr("transform",
"translate(0,"+B.range()[0]+")").datum(u.filter(function(a){return!a.disabled})).call(m));G&&(q.getData(e.y()).scale(B).width(Y).color(u.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!u[c].disabled})),S.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(Q?Z:-q.size())+",0)").datum(u.filter(function(a){return!a.disabled})).call(q));h.dispatch.on("stateChange",function(c){for(var e in c)O[e]=c[e];D.stateChange(O);
a.update()});D.on("changeState",function(c){"undefined"!==typeof c.disabled&&(u.forEach(function(a,e){a.disabled=c.disabled[e]}),O.disabled=c.disabled);a.update()});e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0);E.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);E.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",q.size())});e.dispatch.on("elementMouseover.tooltip",function(a){E.select(".nv-series-"+
a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-Y);E.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+m.size());k.data(a).hidden(!1)});H.copy();B.copy()});M.renderEnd("scatter with line immediate");return a}var e=c.models.scatter(),f=c.models.axis(),l=c.models.axis(),h=c.models.legend(),m=c.models.distribution(),q=c.models.distribution(),k=c.models.tooltip(),r={top:30,right:20,bottom:50,left:75},x=null,A=null,C=null,E=null,F=c.utils.defaultColor(),
H=e.xScale(),B=e.yScale(),N=!1,G=!1,L=!0,z=!0,t=!0,Q=!1,O=c.utils.state(),J=null,D=d3.dispatch("stateChange","changeState","renderEnd"),u=null,K=250,R=!1;e.xScale(H).yScale(B);f.orient("bottom").tickPadding(10);l.orient(Q?"right":"left").tickPadding(10);m.axis("x");q.axis("y");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return l.tickFormat()(a,c)});var M=c.utils.renderWatch(D,K),n=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
w=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=D;a.scatter=e;a.legend=h;a.xAxis=f;a.yAxis=l;a.distX=m;a.distY=q;a.tooltip=k;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return C},set:function(a){C=a}},container:{get:function(){return E},set:function(a){E=a}},showDistX:{get:function(){return N},set:function(a){N=a}},showDistY:{get:function(){return G},
set:function(a){G=a}},showLegend:{get:function(){return L},set:function(a){L=a}},showXAxis:{get:function(){return z},set:function(a){z=a}},showYAxis:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return u},set:function(a){u=a}},duration:{get:function(){return K},set:function(a){K=a}},showLabels:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return r},set:function(a){void 0!==a.top&&(x=r.top=
a.top);r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},rightAlignYAxis:{get:function(){return Q},set:function(a){Q=a;l.orient(a?"right":"left")}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a);h.color(F);m.color(F);q.color(F)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sparkline=function(){function a(m){L.reset();m.each(function(a){var m=f-e.left-e.right,t=l-e.top-e.bottom;
h=d3.select(this);c.utils.initSVG(h);q.domain(C||d3.extent(a,r)).range(F||[0,m]);k.domain(E||d3.extent(a,x)).range(H||[t,0]);a=h.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");m=a.selectAll("path").data(function(a){return[a]});m.enter().append("path");m.exit().remove();m.style("stroke",function(a,c){return a.color||A(a,c)}).attr("d",d3.svg.line().x(function(a,
c){return q(r(a,c))}).y(function(a,c){return k(x(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return x(a,c)}),f=c(e.lastIndexOf(k.domain()[1])),h=c(e.indexOf(k.domain()[0])),e=c(e.length-1);return[B?h:null,B?f:null,N?e:null].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,c){return q(r(a,a.pointIndex))}).attr("cy",function(a,c){return k(x(a,
a.pointIndex))}).attr("r",2).attr("class",function(a,c){return r(a,a.pointIndex)==q.domain()[1]?"nv-point nv-currentValue":x(a,a.pointIndex)==k.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});L.renderEnd("sparkline immediate");return a}var e={top:2,right:0,bottom:2,left:0},f=400,l=32,h=null,m=!0,q=d3.scale.linear(),k=d3.scale.linear(),r=function(a){return a.x},x=function(a){return a.y},A=c.utils.getColor(["#000"]),C,E,F,H,B=!0,N=!0,G=d3.dispatch("renderEnd"),L=c.utils.renderWatch(G);
a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return E},set:function(a){E=a}},xRange:{get:function(){return F},set:function(a){F=a}},yRange:{get:function(){return H},set:function(a){H=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return k},set:function(a){k=
a}},animate:{get:function(){return m},set:function(a){m=a}},showMinMaxPoints:{get:function(){return B},set:function(a){B=a}},showCurrentPoint:{get:function(){return N},set:function(a){N=a}},x:{get:function(){return r},set:function(a){r=d3.functor(a)}},y:{get:function(){return x},set:function(a){x=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?
a.left:e.left}},color:{get:function(){return A},set:function(a){A=c.utils.getColor(a)}}});a.dispatch=G;c.utils.initOptions(a);return a};c.models.sparklinePlus=function(){function a(G){N.reset();N.models(e);G.each(function(G){function z(){if(!r){var a=K.selectAll(".nv-hoverValue").data(k),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",
function(a){return"translate("+m(e.x()(G[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);k.length&&(c.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",H),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),K.select(".nv-hoverValue .nv-xValue").text(x(e.x()(G[k[0]],k[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-f.top).attr("text-anchor","start").attr("dy",
".9em"),K.select(".nv-hoverValue .nv-yValue").text(A(e.y()(G[k[0]],k[0]))))}}var t=d3.select(this);c.utils.initSVG(t);var B=c.utils.availableWidth(l,t,f),H=c.utils.availableHeight(h,t,f);a.update=function(){t.call(a)};a.container=this;if(G&&G.length)t.selectAll(".nv-noData").remove();else return c.utils.noData(a,t),a;var J=e.y()(G[G.length-1],G.length-1);m=e.xScale();q=e.yScale();var D=t.selectAll("g.nv-wrap.nv-sparklineplus").data([G]),u=D.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),
K=D.select("g");u.append("g").attr("class","nv-sparklineWrap");u.append("g").attr("class","nv-valueWrap");u.append("g").attr("class","nv-hoverArea");D.attr("transform","translate("+f.left+","+f.top+")");D=K.select(".nv-sparklineWrap");e.width(B).height(H);D.call(e);C&&(D=K.select(".nv-valueWrap").selectAll(".nv-currentValue").data([J]),D.enter().append("text").attr("class","nv-currentValue").attr("dx",F?-8:8).attr("dy",".9em").style("text-anchor",F?"end":"start"),D.attr("x",B+(F?f.right:0)).attr("y",
E?function(a){return q(a)}:0).style("fill",e.color()(G[G.length-1],G.length-1)).text(A(J)));u.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!r){for(var a=d3.mouse(this)[0]-f.left,a=Math.round(m.invert(a)),c=Math.abs(e.x()(G[0],0)-a),h=0,l=0;l<G.length;l++)Math.abs(e.x()(G[l],l)-a)<c&&(c=Math.abs(e.x()(G[l],l)-a),h=l);k=[h];z()}}).on("click",function(){r=!r}).on("mouseout",function(){k=[];z()});K.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+
","+-f.top+")"}).attr("width",B+f.left+f.right).attr("height",H+f.top)});N.renderEnd("sparklinePlus immediate");return a}var e=c.models.sparkline(),f={top:15,right:100,bottom:10,left:50},l=null,h=null,m,q,k=[],r=!1,x=d3.format(",r"),A=d3.format(",.2f"),C=!0,E=!0,F=!1,H=null,B=d3.dispatch("renderEnd"),N=c.utils.renderWatch(B);a.dispatch=B;a.sparkline=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return h},
set:function(a){h=a}},xTickFormat:{get:function(){return x},set:function(a){x=a}},yTickFormat:{get:function(){return A},set:function(a){A=a}},showLastValue:{get:function(){return C},set:function(a){C=a}},alignValue:{get:function(){return E},set:function(a){E=a}},rightAlignValue:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;
f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(A){t.reset();t.models(G);A.each(function(A){var J=f-e.left-e.right,D=l-e.top-e.bottom;q=d3.select(this);c.utils.initSVG(q);B=G.xScale();N=G.yScale();var u=A;A.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=c;return a})});A=A.filter(function(a){return!a.disabled});
A=d3.layout.stack().order(E).offset(C).values(function(a){return a.values}).x(k).y(r).out(function(a,c,e){a.display={y:e,y0:c}})(A);var K=q.selectAll("g.nv-wrap.nv-stackedarea").data([A]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),M=L.append("defs"),L=L.append("g"),n=K.select("g");L.append("g").attr("class","nv-areaWrap");L.append("g").attr("class","nv-scatterWrap");K.attr("transform","translate("+e.left+","+e.top+")");0==G.forceY().length&&G.forceY().push(0);G.width(J).height(D).x(k).y(function(a){if(void 0!==
a.display)return a.display.y+a.display.y0}).color(A.map(function(a,c){a.color=a.color||h(a,a.seriesIndex);return a.color}));n.select(".nv-scatterWrap").datum(A).call(G);M.append("clipPath").attr("id","nv-edge-clip-"+m).append("rect");K.select("#nv-edge-clip-"+m+" rect").attr("width",J).attr("height",D);n.attr("clip-path",H?"url(#nv-edge-clip-"+m+")":"");var w=d3.svg.area().defined(x).x(function(a,c){return B(k(a,c))}).y0(function(a){return N(a.display.y0)}).y1(function(a){return N(a.display.y+a.display.y0)}).interpolate(F),
O=d3.svg.area().defined(x).x(function(a,c){return B(k(a,c))}).y0(function(a){return N(a.display.y0)}).y1(function(a){return N(a.display.y0)}),J=n.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});J.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return O(a.values,a.seriesIndex)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);z.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],
seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);z.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);z.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});J.exit().remove();J.style("fill",function(a,c){return a.color||h(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||h(a,a.seriesIndex)});
J.watchTransition(t,"stackedArea path").attr("d",function(a,c){return w(a.values,c)});G.dispatch.on("elementMouseover.area",function(a){n.select(".nv-chart-"+m+" .nv-area-"+a.seriesIndex).classed("hover",!0)});G.dispatch.on("elementMouseout.area",function(a){n.select(".nv-chart-"+m+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,e=a[0].length,f,h,k,l=[];for(h=0;h<e;++h){for(k=f=0;f<u.length;f++)k+=r(u[f].values[h]);if(k)for(f=0;f<c;f++)a[f][h][1]/=
k;else for(f=0;f<c;f++)a[f][h][1]=0}for(h=0;h<e;++h)l[h]=0;return l}});t.renderEnd("stackedArea immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,l=500,h=c.utils.defaultColor(),m=Math.floor(1E5*Math.random()),q=null,k=function(a){return a.x},r=function(a){return a.y},x=function(a,c){return!isNaN(r(a,c))&&null!==r(a,c)},A="stack",C="zero",E="default",F="linear",H=!1,B,N,G=c.models.scatter(),L=250,z=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover",
"elementMouseout");G.pointSize(2.2).pointDomain([2.2,2.2]);var t=c.utils.renderWatch(z,L);a.dispatch=z;a.scatter=G;G.dispatch.on("elementClick",function(){z.elementClick.apply(this,arguments)});G.dispatch.on("elementMouseover",function(){z.elementMouseover.apply(this,arguments)});G.dispatch.on("elementMouseout",function(){z.elementMouseout.apply(this,arguments)});a.interpolate=function(c){if(!arguments.length)return F;F=c;return a};a.duration=function(c){if(!arguments.length)return L;L=c;t.reset(L);
G.duration(L);return a};a.dispatch=z;a.scatter=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return l},set:function(a){l=a}},defined:{get:function(){return x},set:function(a){x=a}},clipEdge:{get:function(){return H},set:function(a){H=a}},offset:{get:function(){return C},set:function(a){C=a}},order:{get:function(){return E},set:function(a){E=a}},interpolate:{get:function(){return F},set:function(a){F=
a}},x:{get:function(){return k},set:function(a){k=d3.functor(a)}},y:{get:function(){return r},set:function(a){r=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return h},set:function(a){h=c.utils.getColor(a)}},style:{get:function(){return A},set:function(c){A=c;switch(A){case "stack":a.offset("zero");a.order("default");
break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return L},set:function(a){L=a;t.reset(L);G.duration(L)}}});c.utils.inheritOptions(a,G);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(k){S.reset();S.models(e);G&&
S.models(f);L&&S.models(l);k.each(function(k){function M(){G&&va.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+ea+")").transition().duration(X).call(f)}function aa(){if(L){if("expand"===e.style()||"stack_percent"===e.style()){var a=l.tickFormat();Y&&a===ma||(Y=a);l.tickFormat(ma)}else Y&&(l.tickFormat(Y),Y=null);va.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(l)}}function S(a){va.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}).map(function(c,
f){return{key:c.key,area:c.area,classed:c.classed,values:c.values.filter(function(c,f){return e.x()(c,f)>=a[0]&&e.x()(c,f)<=a[1]}),disableTooltip:c.disableTooltip}})).transition().duration(X).call(e);M();aa()}var fa=d3.select(this);c.utils.initSVG(fa);var ca=c.utils.availableWidth(C,fa,x),ea=c.utils.availableHeight(E,fa,x)-(t?r.height():0);a.update=function(){fa.transition().duration(X).call(a)};a.container=this;K.setter(pa(k),a.update).getter(W(k)).update();K.disabled=k.map(function(a){return!!a.disabled});
if(!R)for(qa in R={},K)R[qa]=K[qa]instanceof Array?K[qa].slice(0):K[qa];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)fa.selectAll(".nv-noData").remove();else return c.utils.noData(a,fa),a;D=e.xScale();u=e.yScale();var qa=fa.selectAll("g.nv-wrap.nv-stackedAreaChart").data([k]);var xa=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),va=qa.select("g");xa.append("g").attr("class","nv-legendWrap");xa.append("g").attr("class","nv-controlsWrap");
var ta=xa.append("g").attr("class","nv-focus");ta.append("g").attr("class","nv-background").append("rect");ta.append("g").attr("class","nv-x nv-axis");ta.append("g").attr("class","nv-y nv-axis");ta.append("g").attr("class","nv-stackedWrap");ta.append("g").attr("class","nv-interactive");xa.append("g").attr("class","nv-focusWrap");B?(xa=H&&"top"===N?ca-w:ca,h.width(xa),va.select(".nv-legendWrap").datum(k).call(h),"bottom"===N?(xa=(G?12:0)+10,x.bottom=Math.max(h.height()+xa,x.bottom),ea=c.utils.availableHeight(E,
fa,x)-(t?r.height():0),xa=ea+xa,va.select(".nv-legendWrap").attr("transform","translate(0,"+xa+")")):"top"===N&&(A||x.top==h.height()||(x.top=h.height(),ea=c.utils.availableHeight(E,fa,x)-(t?r.height():0)),va.select(".nv-legendWrap").attr("transform","translate("+(ca-xa)+","+-x.top+")"))):va.select(".nv-legendWrap").selectAll("*").remove();if(H){var Ia=[{key:Z.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=e.style(),style:"stack"},{key:Z.stream||"Stream",metaKey:"Stream",disabled:"stream"!=
e.style(),style:"stream"},{key:Z.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:Z.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];w=V.length/3*260;Ia=Ia.filter(function(a){return-1!==V.indexOf(a.metaKey)});m.width(w).color(["#444","#444","#444"]);va.select(".nv-controlsWrap").datum(Ia).call(m);xa=Math.max(m.height(),B&&"top"===N?h.height():0);x.top!=xa&&(x.top=xa,ea=c.utils.availableHeight(E,fa,
x)-(t?r.height():0));va.select(".nv-controlsWrap").attr("transform","translate(0,"+-x.top+")")}else va.select(".nv-controlsWrap").selectAll("*").remove();qa.attr("transform","translate("+x.left+","+x.top+")");z&&va.select(".nv-y.nv-axis").attr("transform","translate("+ca+",0)");Q&&(q.width(ca).height(ea).margin({left:x.left,top:x.top}).svgContainer(fa).xScale(D),qa.select(".nv-interactive").call(q));va.select(".nv-focus .nv-background rect").attr("width",ca).attr("height",ea);e.width(ca).height(ea).color(k.map(function(a,
c){return a.color||F(a,c)}).filter(function(a,c){return!k[c].disabled}));qa=va.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}));G&&f.scale(D)._ticks(c.utils.calcTicksX(ca/100,k)).tickSize(-ea,0);L&&(xa="wiggle"===e.offset()?0:c.utils.calcTicksY(ea/36,k),l.scale(u)._ticks(xa).tickSize(-ca,0));t?(r.width(ca),va.select(".nv-focusWrap").attr("transform","translate(0,"+(ea+x.bottom+r.margin().top)+")").datum(k.filter(function(a){return!a.disabled})).call(r),ca=r.brush.empty()?
r.xDomain():r.brush.extent(),null!==ca&&S(ca)):(qa.transition().call(e),M(),aa());e.dispatch.on("areaClick.toggle",function(c){1===k.filter(function(a){return!a.disabled}).length?k.forEach(function(a){a.disabled=!1}):k.forEach(function(a,e){a.disabled=e!=c.seriesIndex});K.disabled=k.map(function(a){return!!a.disabled});n.stateChange(K);a.update()});h.dispatch.on("stateChange",function(c){for(var e in c)K[e]=c[e];n.stateChange(K);a.update()});m.dispatch.on("legendClick",function(c,f){c.disabled&&(Ia=
Ia.map(function(a){a.disabled=!0;return a}),c.disabled=!1,e.style(c.style),K.style=e.style(),n.stateChange(K),a.update())});q.dispatch.on("elementMousemove",function(f){e.clearHighlights();var h,l,m,n=[],r=0,u=!0;k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,q){l=c.interactiveBisect(k.values,f.pointXValue,a.x());var t=k.values[l];null!=a.y()(t,l)&&e.highlightPoint(q,l,!0);if("undefined"!==typeof t){"undefined"===typeof h&&(h=t);"undefined"===typeof m&&(m=a.xScale()(a.x()(t,
l)));var w="expand"==e.style()?t.display.y:a.y()(t,l);n.push({key:k.key,value:w,color:F(k,k.seriesIndex),point:t});O&&"expand"!=e.style()&&null!=w&&(r+=w,u=!1)}});n.reverse();if(2<n.length){var t=a.yScale().invert(f.mouseY),w=null;n.forEach(function(a,c){t=Math.abs(t);var e=Math.abs(a.point.display.y0),f=Math.abs(a.point.display.y);t>=e&&t<=f+e&&(w=c)});null!=w&&(n[w].highlight=!0)}O&&"expand"!=e.style()&&2<=n.length&&!u&&n.push({key:J,value:r,total:!0});var x=a.x()(h,l),z=q.tooltip.valueFormatter();
"expand"===e.style()||"stack_percent"===e.style()?(I||(I=z),z=d3.format(".1%")):I&&(z=I,I=null);q.tooltip.valueFormatter(z).data({value:x,series:n})();q.renderGuideLine(m)});q.dispatch.on("elementMouseout",function(a){e.clearHighlights()});r.dispatch.on("onBrush",function(a){S(a)});n.on("changeState",function(c){"undefined"!==typeof c.disabled&&k.length===c.disabled.length&&(k.forEach(function(a,e){a.disabled=c.disabled[e]}),K.disabled=c.disabled);"undefined"!==typeof c.style&&e.style(c.style);a.update()})});
S.renderEnd("stacked Area chart immediate");return a}var e=c.models.stackedArea(),f=c.models.axis(),l=c.models.axis(),h=c.models.legend(),m=c.models.legend(),q=c.interactiveGuideline(),k=c.models.tooltip(),r=c.models.focus(c.models.stackedArea()),x={top:10,right:25,bottom:50,left:60},A=null,C=null,E=null,F=c.utils.defaultColor(),H=!0,B=!0,N="top",G=!0,L=!0,z=!1,t=!1,Q=!1,O=!0,J="TOTAL",D,u,K=c.utils.state(),R=null,M=null,n=d3.dispatch("stateChange","changeState","renderEnd"),w=250,V=["Stacked","Stream",
"Expanded"],Z={},X=250;K.style=e.style();f.orient("bottom").tickPadding(7);l.orient(z?"right":"left");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return l.tickFormat()(a,c)});q.tooltip.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a,c)});var Y=null,I=null;m.updateState(!1);var S=c.utils.renderWatch(n);e.style();var W=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
style:e.style()}}},pa=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},ma=d3.format("%");e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point);a.point.y=e.y()(a.point);k.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});a.dispatch=n;a.stacked=e;a.legend=h;a.controls=m;a.xAxis=f;a.x2Axis=r.xAxis;a.yAxis=l;a.y2Axis=r.yAxis;a.interactiveLayer=q;a.tooltip=k;a.focus=r;a.dispatch=n;a.options=
c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return C},set:function(a){C=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return B},set:function(a){B=a}},legendPosition:{get:function(){return N},set:function(a){N=a}},showXAxis:{get:function(){return G},set:function(a){G=a}},showYAxis:{get:function(){return L},set:function(a){L=a}},defaultState:{get:function(){return R},set:function(a){R=a}},noData:{get:function(){return M},set:function(a){M=
a}},showControls:{get:function(){return H},set:function(a){H=a}},controlLabels:{get:function(){return Z},set:function(a){Z=a}},controlOptions:{get:function(){return V},set:function(a){V=a}},showTotalInTooltip:{get:function(){return O},set:function(a){O=a}},totalLabel:{get:function(){return J},set:function(a){J=a}},focusEnable:{get:function(){return t},set:function(a){t=a}},focusHeight:{get:function(){return r.height()},set:function(a){r.height(a)}},brushExtent:{get:function(){return r.brushExtent()},
set:function(a){r.brushExtent(a)}},margin:{get:function(){return x},set:function(a){void 0!==a.top&&(A=x.top=a.top);x.right=void 0!==a.right?a.right:x.right;x.bottom=void 0!==a.bottom?a.bottom:x.bottom;x.left=void 0!==a.left?a.left:x.left}},focusMargin:{get:function(){return r.margin},set:function(a){r.margin.top=void 0!==a.top?a.top:r.margin.top;r.margin.right=void 0!==a.right?a.right:r.margin.right;r.margin.bottom=void 0!==a.bottom?a.bottom:r.margin.bottom;r.margin.left=void 0!==a.left?a.left:r.margin.left}},
duration:{get:function(){return X},set:function(a){X=a;S.reset(X);e.duration(X);f.duration(X);l.duration(X)}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a);h.color(F);e.color(F);r.color(F)}},x:{get:function(){return e.x()},set:function(a){e.x(a);r.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);r.y(a)}},rightAlignYAxis:{get:function(){return z},set:function(a){z=a;l.orient(z?"right":"left")}},useInteractiveGuideline:{get:function(){return Q},set:function(c){Q=
!!c;a.interactive(!c);a.useVoronoi(!c);e.scatter.interactive(!c)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedAreaWithFocusChart=function(){return c.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)};c.models.sunburst=function(){function a(a){var c=Math.max(0,Math.min(2*Math.PI,D(a.x)));a=Math.max(0,Math.min(2*Math.PI,D(a.x+a.dx)));return(c+a)/2*(180/Math.PI)-90}function e(a){var c=Math.max(0,Math.min(2*Math.PI,D(a.x)));return(Math.max(0,Math.min(2*
Math.PI,D(a.x+a.dx)))-c)/(2*Math.PI)}function f(a){var c=Math.max(0,Math.min(2*Math.PI,D(a.x)));return Math.max(0,Math.min(2*Math.PI,D(a.x+a.dx)))-c>L}function l(a,c){var e=d3.interpolate(D.domain(),[R.x,R.x+R.dx]),f=d3.interpolate(u.domain(),[R.y,1]),h=d3.interpolate(u.range(),[R.y?20:0,w]);return 0===c?function(){return Z(a)}:function(c){D.domain(e(c));u.domain(f(c)).range(h(c));return Z(a)}}function h(a){var c=d3.interpolate({x:a.x0,dx:a.dx0,y:a.y0,dy:a.dy0},a);return function(e){e=c(e);a.x0=e.x;
a.dx0=e.dx;a.y0=e.y;a.dy0=e.dy;return Z(e)}}function m(a){a.forEach(function(a){var c=t(a);(c=V[c])?(a.dx0=c.dx,a.x0=c.x,a.dy0=c.dy,a.y0=c.y):(a.dx0=a.dx,a.x0=a.x,a.dy0=a.dy,a.y0=a.y);c=t(a);V[c]||(V[c]={});c=V[c];c.dx=a.dx;c.x=a.x;c.dy=a.dy;c.y=a.y})}function q(c){var e=H.selectAll("text"),h=H.selectAll("path");e.transition().attr("opacity",0);R=c;h.transition().duration(O).attrTween("d",l).each("end",function(e){e.x>=c.x&&e.x<c.x+c.dx&&e.depth>=c.depth&&d3.select(this.parentNode).select("text").transition().duration(O).text(function(a){return G(a)}).attr("opacity",
function(a){return f(a)?1:0}).attr("transform",function(){var f=this.getBBox().width;if(0===e.depth)return"translate("+f/2*-1+",0)";if(e.depth===c.depth)return"translate("+(u(e.y)+5)+",0)";var h=a(e),k=90<a(e)?180:0;return 0===k?"rotate("+h+")translate("+(u(e.y)+5)+",0)":"rotate("+h+")translate("+(u(e.y)+f+5)+",0)rotate("+k+")"})})}function k(l){X.reset();l.each(function(k){H=d3.select(this);M=c.utils.availableWidth(x,H,r);n=c.utils.availableHeight(A,H,r);w=Math.min(M,n)/2;u.range([0,w]);var l=H.select("g.nvd3.nv-wrap.nv-sunburst");
l[0][0]?l.attr("transform","translate("+(M/2+r.left+r.right)+","+(n/2+r.top+r.bottom)+")"):l=H.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+F).attr("transform","translate("+(M/2+r.left+r.right)+","+(n/2+r.top+r.bottom)+")");H.on("click",function(a,c){J.chartClick({data:a,index:c,pos:d3.event,id:F})});K.value(E[C]||E.count);k=K.nodes(k[0]).reverse();m(k);l=l.selectAll(".arc-container").data(k,t);l.enter().append("g").attr("class","arc-container").append("path").attr("d",Z).style("fill",
function(a){return a.color?a.color:Q?B((a.children?a:a.parent).name):B(a.name)}).style("stroke","#FFF").on("click",function(a,c){q(a);J.elementClick({data:a,index:c})}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("opacity",.8);J.elementMouseover({data:a,color:d3.select(this).style("fill"),percent:e(a)})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);J.elementMouseout({data:a})}).on("mousemove",function(a,c){J.elementMousemove({data:a})});
l.each(function(a){d3.select(this).select("path").transition().duration(O).attrTween("d",h)});N&&(l.selectAll("text").remove(),l.append("text").text(function(a){return G(a)}).transition().duration(O).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(c){var e=this.getBBox().width;if(0===c.depth)return"rotate(0)translate("+e/2*-1+",0)";var f=a(c),h=90<a(c)?180:0;return 0===h?"rotate("+f+")translate("+(u(c.y)+5)+",0)":"rotate("+f+")translate("+(u(c.y)+e+5)+",0)rotate("+h+")"}));
q(k[k.length-1]);l.exit().transition().duration(O).attr("opacity",0).each("end",function(a){a=t(a);V[a]=void 0}).remove()});X.renderEnd("sunburst immediate");return k}var r={top:0,right:0,bottom:0,left:0},x=600,A=600,C="count",E={count:function(a){return 1},value:function(a){return a.value||a.size},size:function(a){return a.value||a.size}},F=Math.floor(1E4*Math.random()),H=null,B=c.utils.defaultColor(),N=!1,G=function(a){return"count"===C?a.name+" #"+a.value:a.name+" "+(a.value||a.size)},L=.02,z=
function(a,c){return a.name>c.name},t=function(a,c){return a.name},Q=!0,O=500,J=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),D=d3.scale.linear().range([0,2*Math.PI]),u=d3.scale.sqrt(),K=d3.layout.partition().sort(z),R,M,n,w,V={},Z=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,D(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,D(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,
u(a.y))}).outerRadius(function(a){return Math.max(0,u(a.y+a.dy))}),X=c.utils.renderWatch(J);k.dispatch=J;k.options=c.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return x},set:function(a){x=a}},height:{get:function(){return A},set:function(a){A=a}},mode:{get:function(){return C},set:function(a){C=a}},id:{get:function(){return F},set:function(a){F=a}},duration:{get:function(){return O},set:function(a){O=a}},groupColorByParent:{get:function(){return Q},set:function(a){Q=
!!a}},showLabels:{get:function(){return N},set:function(a){N=!!a}},labelFormat:{get:function(){return G},set:function(a){G=a}},labelThreshold:{get:function(){return L},set:function(a){L=a}},sort:{get:function(){return z},set:function(a){z=a}},key:{get:function(){return t},set:function(a){t=a}},margin:{get:function(){return r},set:function(a){r.top=void 0!=a.top?a.top:r.top;r.right=void 0!=a.right?a.right:r.right;r.bottom=void 0!=a.bottom?a.bottom:r.bottom;r.left=void 0!=a.left?a.left:r.left}},color:{get:function(){return B},
set:function(a){B=c.utils.getColor(a)}}});c.utils.initOptions(k);return k};c.models.sunburstChart=function(){function a(f){A.reset();A.models(e);f.each(function(f){var h=d3.select(this);c.utils.initSVG(h);var k=c.utils.availableWidth(null,h,l),m=c.utils.availableHeight(null,h,l);a.update=function(){0===r?h.call(a):h.transition().duration(r).call(a)};a.container=h;if(f&&f.length)h.selectAll(".nv-noData").remove();else return c.utils.noData(a,h),a;e.width(k).height(m).margin(l);h.call(e)});A.renderEnd("sunburstChart immediate");
return a}var e=c.models.sunburst(),f=c.models.tooltip(),l={top:30,right:20,bottom:20,left:20},h=c.utils.defaultColor(),m=!1,q=null,k=null,r=250,x=d3.dispatch("stateChange","changeState","renderEnd"),A=c.utils.renderWatch(x);f.duration(0).headerEnabled(!1).valueFormatter(function(a){return a});e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.value||a.data.size,color:a.color,percent:a.percent};m||(delete a.percent,delete a.series.percent);f.data(a).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){f()});a.dispatch=x;a.sunburst=e;a.tooltip=f;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return q},set:function(a){q=a}},showTooltipPercent:{get:function(){return m},set:function(a){m=a}},color:{get:function(){return h},set:function(a){h=a;e.color(h)}},duration:{get:function(){return r},
set:function(a){r=a;A.reset(r);e.duration(r)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left;e.margin(l)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.version="1.8.5"})();
(function(c,a){var e=0;c.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=e;e+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=c(this.element),e=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var h=a.find(".pt-chart");this.chart=h.length?h.first():null;e.renderFilter||e.renderOptions?(h="#"+a.attr("id"),e.renderOptions?(c(h+"-options").show(),e.collapseOptions&&(c(h+"-options legend").siblings().toggle(),c(h+"-options legend").children().toggle())):c(h+
"-options").hide(),e.renderFilter?(c(h+"-filters").show(),e.collapseFilter&&(c(h+"-filters legend").siblings().toggle(),c(h+"-filters legend").children().toggle())):c(h+"-options").hide()):a.find(".pt-form-container").hide();e.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());e.numberFormatter=function(a){var c=e.precision;if(null===a||"undefined"==typeof a)return"-";c=c||0==c?a.toFixed(c):a.toString();c=c.split(".");
a=c[0];c=1<c.length?"."+c[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+e.thousandGrouping+"})+(?!\\d))","g"),e.thousandSeparator);return a+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=c(this.element),e=null;this._unbindEvents();var h=a.find('input[type="hidden"][name="pivotdata"]');h.length&&(e=JSON.parse(c(h).first().val()));e?"count"==e.method&&(this.options.precision=0,this.options.minTickSize=1):(e={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=e;e.nodata?(a.find(".pt-table").first().empty().append(c('<div class="pt-no-data">'+e.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();e.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
c(this.element),e=a.find(".pt-table").first().empty();this.table=null;var h=this.data;if(!h.empty)if(this.options.renderTable){var m=h.cells,q=h.cols,k=h.rows,r=h.total,x=h.labels,A=this.options,C=A.showTotals,E=!1;1==q.length&&null===q[0][4]&&(E=!0);m=h.cells.slice(0);if(E&&C)for(q=[],h=0;h<k.length;h++)m[h]=[];else{for(h=0;h<k.length;h++)m[h]=m[h].filter(function(a,c){return"__other__"!=q[c][0]});q=q.filter(function(a){return"__other__"!=a[0]})}h=!1;1==q.length&&null===q[0][4]&&(h=!0);h&&C?(k=[],
m=[]):(m=m.filter(function(a,c){return"__other__"!=k[c][0]}),k=k.filter(function(a){return"__other__"!=a[0]}));e=d3.select(e.get(0)).append("table").attr("class","dataTable display report");e.append("thead").call(this._renderHeader,q,x,A).call(this._renderColumns,q,x,A);e.append("tbody").call(this._renderRows,this,k,q,x,m,A);A.showTotals&&e.append("tfoot").call(this._renderFooter,k,q,x,r);this.table=c(e.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,c,e,m){a=a.append("tr");a.append("th").attr("scope","col").text(e.layer);c.length&&a.append("th").attr({scope:"col",colspan:c.length}).text(e.cols);m.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(e.total);return a},_renderColumns:function(a,c,e,m){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(e.rows);var f=!1;1==c.length&&null===c[0][4]&&(f=!0);a.selectAll("th.pt-data").data(c).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return f?"":a[4]});return a},_renderRows:function(a,c,e,m,q,k,r){e=a.selectAll("tr.pt-row").data(e).enter().append("tr").attr("class",function(a,c){return c%2?"odd":"even"});var f=!1;1==e.length&&null===e[0][4]&&(f=!0);e.append("td").text(function(a){return f?"":a[4]});e.selectAll("td.pt-cell").data(function(a,
c){return k[c]}).enter().append("td").attr("class","pt-cell").each(c._renderCell,q);r.showTotals&&e.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return e},_renderCell:function(a,e,h){e=d3.select(this);for(var f=a.items,l,k=0,r=f.length;k<r;k++){l=f[k];var x=e.append("div").attr("class","pt-cell-value");null===l?x.text(h.none):c.isArray(l)?x.append("ul").selectAll("li").data(l).enter().append("li").html(function(a){return a}):x.text(l);l=a.keys[k];f&&l&&l.length&&(c(x.node()).data("keys",
l).data("fact",k),x.append("div").attr("class","pt-cell-zoom"));1<r-k&&x.append("span").text(" / ")}},_renderFooter:function(a,c,e,m,q){c=c.length%2?"odd":"even";a=a.append("tr").attr("class",c+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(m.total);a.selectAll("td.pt-col-total").data(e).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(q);return a},_renderChartOptions:function(){var a=
c(this.element),e=a.find(".pt-chart-controls").first().empty(),h=this.data;if(!h.empty&&this.options.renderChart){var h=h.labels,m=a.attr("id"),a=h.layer,q=h.rows,k=h.cols,r=h.per,x=c('<div class="pt-chart-opts">'),A=m+"-pchart-rows",C=m+"-vchart-rows",E=m+"-hchart-rows",F=m+"-schart-rows",H=m+"-pchart-cols",B=m+"-vchart-cols",N=m+"-hchart-cols",m=m+"-schart-cols";a&&c(x).append(c('<span class="pt-chart-label">'+a+": </span>"));q&&c(x).append(c('<div id="'+A+'" class="pt-chart-icon pt-pchart"/><div id="'+
C+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+r+" "+q+"</span>"));k&&c(x).append(c('<div id="'+H+'" class="pt-chart-icon pt-pchart"/><div id="'+B+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+r+" "+k+"</span>"));q&&k&&c(x).append(c('<span class="pt-chart-label">| '+h.breakdown+': </span><div id="'+F+'" class="pt-chart-icon pt-schart"/><div id="'+E+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+r+" "+q+'</span><div id="'+m+'"  class="pt-chart-icon pt-schart"/><div id="'+
N+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+r+" "+k+"</span>"));c(e).append(x)}},_truncateLabel:function(a,c){return a&&a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var e=c(this.element),f=this.data;e.find(".pt-chart-contents").hide();if(e=this.chart)if(c(e).unbind("plothover").unbind("plotclick").empty(),!f.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{e=this.options.collapseChart;if("undefined"==typeof a||
!a){if(e)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;e=a.type;a=a.axis;var m=f.labels,q=m.per,k=m.layer+" "+q+" "+m.rows,m=m.layer+" "+q+" "+m.cols,q=f.filter,r=q[0],x=q[1];"piechart"==e?"rows"==a?this._renderPieChart(f.rows,k,r):this._renderPieChart(f.cols,m,x):"barchart"==e?"rows"==a?this._renderBarChart(f.rows,f.facts,k,r):this._renderBarChart(f.cols,
f.facts,m,x):"breakdown"==e?"rows"==a?this._renderBreakDown(f,0,k,q):this._renderBreakDown(f,1,m,q):"spectrum"==e&&this._renderSpectrum(f,a,q)}}},_renderPieChart:function(a,e,h){var f=this.chart;if(f){c(f).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});e?c(f).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):c(f).siblings(".pt-chart-title").empty();var l=[],k=0;for(e=0;e<a.length;e++){var r=a[e];!r[1]&&0<=r[2][0]&&(l.push({index:r[0],label:r[4],value:r[2][0],key:r[3]}),
k+=r[2][0])}var x=this;x.chartOptions.currentDataIndex=null;var A=function(a){var e=a.index;if(x.chartOptions.currentDataIndex!=e){x._removeChartTooltip();x.chartOptions.currentDataIndex=e;a=a.data;var f=a.value,h=d3.event;x._renderChartTooltip(h.pageX,h.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+f+" ("+Math.round(f/k*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).labelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0);
a.tooltip.enabled(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",A).on("elementMouseout",function(a){c(".pt-tooltip").remove();x.chartOptions.currentDataIndex=null;x.chartOptions.currentSeriesIndex=null});if(x.options.exploreChart&&h)a.pie.dispatch.on("elementClick",function(a){a=a.data;x._chartExplore([["__other__"==a.index?h+"__belongs":h,a.key]])});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(l).transition().duration(1200).call(a);nv.utils.windowResize(a.update);
return a})}},_renderBarChart:function(a,e,h,m){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"96%"});for(var k=[],l=this._truncateLabel,x,A,C,E=0;E<e.length;E++){x={key:e[E][2]};A=[];for(var F=0;F<a.length;F++)C=a[F],A.push({label:C[4],value:C[2][E],filterIndex:C[0],filterKey:C[3]});x.values=A;k.push(x)}c(f).css({height:"360px"});h?c(f).siblings(".pt-chart-title").html("<h4>"+h+"</h4>"):c(f).siblings(".pt-chart-title").empty();var H=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},a.index)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},B=this,N=this.options.numberFormatter;nv.addGraph(function(){if(1<k.length){var a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showControls(!1);var e=a.multibar}else a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showValues(!0),a.valueFormat(N),e=a.discretebar;a.tooltip.contentGenerator(H);
a.yAxis.tickFormat(N);a.xAxis.tickFormat(function(a){return l(a,18)});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(k).transition().duration(500).call(a);if(B.options.exploreChart&&m)e.dispatch.on("elementClick",function(a){var c=a.data.filterKey;null===c&&(c="None");var e=m;"__other__"==a.data.filterIndex&&(e+="__belongs");B._chartExplore([[e,c]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,e,h,m){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"96%"});
var k=a.cells,l=[],x=[];if(0===e){var A=a.rows;var C=a.cols;a=function(a,c){return k[l[a]][x[c]].values[0]};var E=m[0];var F=m[1]}else A=a.cols,C=a.rows,a=function(a,c){return k[x[c]][l[a]].values[0]},E=m[1],F=m[0];var H;m=[];e=[];var B=0;for(H=A.length;B<H;B++)A[B][1]||(m.push(A[B]),l.push(B));B=0;for(H=C.length;B<H;B++)C[B][1]||(e.push(C[B]),x.push(B));var N=[];for(A=0;A<e.length;A++){C={key:e[A][4],filterIndex:e[A][0],filterKey:e[A][3]};B=[];for(H=0;H<m.length;H++)B.push({label:m[H][4],filterIndex:m[H][0],
filterKey:m[H][3],value:a(H,A)});C.values=B;N.push(C)}a=Math.max(m.length*Math.max(16*(e.length+1),50)+70,360);c(f).css({height:a+"px"});h?c(f).siblings(".pt-chart-title").html("<h4>"+h+"</h4>"):c(f).siblings(".pt-chart-title").empty();var G=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.series+'</div><div class="pt-tooltip-text">'+a.label+': <span class="pt-tooltip-value">'+a.value+"</span></div></div>"},
L=this,z=this.options.numberFormatter,t=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).duration(350).showControls(!0);a.tooltip.contentGenerator(G);a.valueFormat(z);a.yAxis.tickFormat(z);a.xAxis.tickFormat(function(a){return t(a,24)});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(N).call(a);if(L.options.exploreChart&&E&&F)a.multibar.dispatch.on("elementClick",
function(a){a=a.data;var c=d3.event.currentTarget.parentElement.__data__,e=c.filterKey;null===e&&(e="None");var c="__other__"==c.filterIndex?F+"__belongs":F,f=a.filterKey;null===f&&(f="None");L._chartExplore([["__other__"==a.filterIndex?E+"__belongs":E,f],[c,e]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(e,l,h){var f=this.chart;if(f){var q=this,k=e.cells,r=e.labels;if("rows"==l){var x=e.rows;var A=e.cols;l=r.rows;var C=r.cols;var E=h[0];var F=h[1];var H=function(a,c){return k[a][c]}}else x=
e.cols,A=e.rows,l=r.cols,C=r.rows,E=h[1],F=h[0],H=function(a,c){return k[c][a]};var B=function(a,c){return null===a?A[c]:null===c?x[a]:H(a,c)},N=function(c,e){e===a&&(e="silver");for(var f=[],h,k,l=0;l<A.length;l++)h=B(null,l),k=null===c?h[2][0]:B(c,l).values[0],!h[1]&&0<=h[2][0]&&f.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:k,color:e});return f},G=[],L=0;for(h=0;h<x.length;h++){var z=B(h,null);!z[1]&&0<=z[2][0]&&(G.push({position:h,filterIndex:z[0],filterKey:z[3],label:z[4],value:z[2][0]}),
L+=z[2][0])}q.chartOptions.currentDataIndex=null;c(f).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();c(f).siblings(".pt-chart-title").empty();h=c('<div class="pt-spectrum-pie">').appendTo(f);var f=c('<div class="pt-spectrum-bar">').appendTo(f),t=this.options.numberFormatter,Q=this._truncateLabel,O=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0);O.tooltip.contentGenerator(function(a){a=
a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+t(a.value)+"</div></div>"});O.valueFormat(t);O.yAxis.tickFormat(t);O.xAxis.tickFormat(function(a){return Q(a,18)});var J=d3.select(c(f).get(0)).append("svg").attr("class","nv"),f=Math.floor(h.width()/2)-30,D=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(f).margin({top:-20,left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35);
D.tooltip.enabled(!1);D.legend.align(!0).rightAlign(!1);D.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});D.pie.dispatch.on("elementMouseover",function(a){var e=a.index;if(q.chartOptions.currentDataIndex!=e){q._removeChartTooltip();q.chartOptions.currentDataIndex=e;a=a.data;var f=a.value,h=d3.event;q._renderChartTooltip(h.pageX,h.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+f+" ("+Math.round(f/
L*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}}).on("elementMouseout",function(a){c(".pt-tooltip").remove();q.chartOptions.currentDataIndex=null;q.chartOptions.currentSeriesIndex=null});var u=d3.select(c(h).get(0)).append("svg").attr("class","nv").style({"min-width":f-30+"px"}),f=d3.select(c(h).get(0)).append("div").attr("class","pt-spectrum-form");f.append("h4").html(r.layer+" "+r.per+" "+C);f.append("label").html(l+":");var K=f.append("select");K.append("option").attr("value",
"null").style("font-weight","bold").html(q.options.textAll);K.selectAll(".pt-series-item").data(G).enter().append("option").attr("class","pt-series-item").attr("value",function(a,c){return c}).html(function(a){return a.label});f.append("label").html(r.total+":");var R=f.append("span").text(e.total),M=function(a){if(null===a||q.chartOptions.currentSpectrumIndex==a){var c=function(a,c){return nv.utils.defaultColor()({},c)};u.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=N(null);J.datum([{key:null,
filterIndex:null,filterKey:null,values:c}]);O.update();q.chartOptions.currentSpectrumIndex=null;K.property("value","null");R.text(e.total)}else{var f=G[a],h=nv.utils.defaultColor()({},a);c=function(c,e){return e==a?h:"silver"};u.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=N(f.position,h);J.datum([{key:f.position,filterIndex:f.filterIndex,filterKey:f.filterKey,values:c}]);O.update();q.chartOptions.currentSpectrumIndex=a;K.property("value",a);R.text(G[a].value)}};D.pie.dispatch.on("elementClick",
function(a){M(a.index)});K.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?M(null):M(a)});nv.addGraph(function(){u.datum(G).transition().duration(1200).call(D);nv.utils.windowResize(D.update);return D});nv.addGraph(function(){J.datum([{key:null,filterIndex:null,filterKey:null,values:N(null)}]).transition().duration(500).call(O);if(q.options.exploreChart&&E&&F)O.discretebar.dispatch.on("elementClick",function(a){var c=a.data,e=d3.event.currentTarget.parentElement.__data__;
a=e.filterIndex;var e=e.filterKey,f=c.filterIndex,c=c.filterKey,h=[];null!==a&&h.push(["__other__"==a?E+"__belongs":E,e||"None"]);null!==f&&h.push(["__other__"==f?F+"__belongs":F,c||"None"]);q._chartExplore(h)});nv.utils.windowResize(O.update);return O})}},_chartExplore:function(e){var f=this.options,h=c(this.element).closest(".ui-tabs"),m=f.filterTab;if(h.length&&!1!==m)f=(f=f.filterForm)?c("#"+f):a,S3.search.setCurrentFilters(f,e),e=m?c("#"+m).index():0,h.tabs("option","active",e);else if(h=f.filterURL)e=
this._updateURL(h,e),window.open(e,"_blank")},_renderChartTooltip:function(a,e,h){c('<div class="pt-tooltip">'+h+"</div>").css({position:"absolute",display:"none",top:e-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=null},
_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),e=null,a=c(a+"-filters");if(a.length)try{e=S3.search.getCurrentFilters(a.first())}catch(h){}return e},_updateURL:function(a,c){var e=[],f={},l;if(c){var k=0;for(l=c.length;k<l;k++){var r=c[k];var x=r[0];f[x]=!0;e.push(x+"="+r[1])}}r=this.options.ajaxURL.split("?");
if(1<r.length){var A=r[1].split("&");r={};k=0;for(l=A.length;k<l;k++){var C=A[k].split("=");1<C.length&&(x=decodeURIComponent(C[0]),f[x]||(e.push(x+"="+decodeURIComponent(C[1])),r[x]=!0))}for(x in r)f[x]=!0}r=a.split("?");if(1<r.length)for(A=r[1].split("&"),k=0,l=A.length;k<l;k++)C=A[k].split("="),1<C.length&&(x=decodeURIComponent(C[0]),f[x]||e.push(x+"="+decodeURIComponent(C[1])));e=e.join("&");f=r[0];e&&(f=f+"?"+e);return f},_updateAjaxURL:function(a,e){var f=this.options.ajaxURL.split("?"),l=[],
q=!1;if(1<f.length){var k=f[1];k=k.split("&")}else k=[];if(a)for(A in a){var r=a[A];var x=A+"="+r;"totals"==A?this.options.showTotals=r?!0:!1:q||-1!=c.inArray(x,k)||(q=!0);l.push(x)}var A={};r={};var C;if(e){var E=0;for(C=e.length;E<C;E++){x=e[E];var F=x[0];x=x[1];null===x?A[F]||(r[F]=!0):(r[F]&&(r[F]=!1),x=F+"="+encodeURIComponent(x),A[F]?A[F].push(x):A[F]=[x])}}E=0;for(C=k.length;E<C;E++)x=k[E].split("="),1<x.length&&(F=decodeURIComponent(x[0]),x=decodeURIComponent(x[1]),r[F]?q=!0:A[F]?q||-1!=c.inArray(F+
"="+x,A[F])||(q=!0):"aggregate"!=F&&(a&&a.hasOwnProperty(F)||l.push(k[E])));for(F in A)for(E=0,C=A[F].length;E<C;E++)q||-1!=c.inArray(A[F][E],k)||(q=!0),l.push(A[F][E]);l=l.join("&");f=f[0];l&&(f=f+"?"+l);this.options.ajaxURL=f;return q},reload:function(e,l,h){h="undefined"!=typeof h?h:!0;"undefined"==typeof l&&(l=this._getFilters());var f=this,q=this.element,k=q.find('input[type="hidden"][name="pivotdata"]');if(k.length){q.find(".pt-throbber").show();if(e||l)var r=this._updateAjaxURL(e,l);r||h?(e=
this.options.ajaxURL,l=this.options.timeout,h=c.ajaxS3,c.searchS3!==a&&(h=c.searchS3),q.find(".pt-empty").hide(),f.openRequest&&(f.openRequest.onreadystatechange=null,f.openRequest.abort()),f.openRequest=h({timeout:l,url:e,dataType:"json",type:"GET",success:function(a){f.openRequest=null;k.first().val(JSON.stringify(a));f.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):f.refresh()}},_bindEvents:function(){var a=this,e=c(this.element),h=this.data,
m="#"+e.attr("id");c(m+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c(m+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;e.find(".pt-table").hide();c(this).siblings(".pt-show-table").show();c(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();c(this).siblings(".pt-hide-table").show();
c(this).hide()});c(m+"-totals").click(function(){var e=c(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});c(m+"-rows,"+m+"-cols,"+m+"-fact").on("change.autosubmit",function(){c(m+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var q=this.options.autoSubmit;c(m+"-pt-form").on("optionChanged",function(){var e=c(this);if(!e.data("noAutoSubmit")){var f=e.data("autoSubmitTimeout");f&&clearTimeout(f);f=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();
a.reload(c,e,!1)},q);e.data("autoSubmitTimeout",f)}})}else c(m+"-pt-form input.pt-submit").click(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});c(m+" div.pt-table div.pt-cell-zoom").click(function(a){a=c(a.currentTarget);var e=a.closest(".pt-cell-value"),f=e.find(".pt-cell-records");if(0<f.length)f.remove(),a.removeClass("opened");else{for(var k=e.data("keys"),f=e.data("fact"),e=h.lookups[h.facts[f][0]],f=c("<div/>").addClass("pt-cell-records"),l=c("<ul/>"),m=0;m<k.length;m++)l.append("<li>"+
e[k[m]]+"</li>");f.append(l);a.addClass("opened").after(f)}});c(m+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});c(m+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});c(m+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});c(m+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});c(m+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});c(m+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});c(m+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});c(m+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=c(this.element),e="#"+a.attr("id");c(e+" div.pt-table div.pt-cell-zoom").unbind("click");c(e+"-options legend").unbind("click");c(e+"-filters legend").unbind("click");c(e+"-totals").unbind("click");c(e+"-rows,"+e+"-cols,"+
e+"-fact").unbind("change.autosubmit");c(e+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");c(e+"-pchart-rows,"+e+"-vchart-rows,"+e+"-schart-rows,"+e+"-hchart-rows,"+e+"-pchart-cols,"+e+"-vchart-cols,"+e+"-schart-cols,"+e+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
