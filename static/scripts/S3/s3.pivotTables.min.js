/*
: 2013-14 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory
 requires: D3.js 3.4.9+

*/
!function(){function I(c,r){return c<r?-1:c>r?1:c>=r?0:NaN}function u(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(r,a,n,g){3>arguments.length&&(n=0);4>arguments.length&&(g=r.length);for(;n<g;){var l=n+g>>>1;0>c(r[l],a)?n=l+1:g=l}return n},right:function(r,a,n,g){3>arguments.length&&(n=0);4>arguments.length&&(g=r.length);for(;n<g;){var l=n+g>>>1;0<c(r[l],a)?g=l:n=l+1}return n}}}function b(c){return c.length}function k(c,r){try{for(var a in r)Object.defineProperty(c.prototype,a,
{value:r[a],enumerable:!1})}catch(n){c.prototype=r}}function t(){}function m(c){return jb+c in this}function e(){var c=[];this.forEach(function(r){c.push(r)});return c}function h(){var c=0,r;for(r in this)r.charCodeAt(0)===Tb&&++c;return c}function s(){for(var c in this)if(c.charCodeAt(0)===Tb)return!1;return!0}function q(){}function G(c,r,a){return function(){var n=a.apply(r,arguments);return n===r?c:n}}function A(c,r){if(r in c)return r;r=r.charAt(0).toUpperCase()+r.substring(1);for(var a=0,n=Td.length;a<
n;++a){var g=Td[a]+r;if(g in c)return g}}function z(){}function D(){}function C(c){function r(){for(var r=a,n=-1,ca=r.length,x;++n<ca;)(x=r[n].on)&&x.apply(this,arguments);return c}var a=[],n=new t;r.on=function(r,l){var ca=n.get(r),x;if(2>arguments.length)return ca&&ca.on;ca&&(ca.on=null,a=a.slice(0,x=a.indexOf(ca)).concat(a.slice(x+1)),n.remove(r));l&&a.push(n.set(r,{on:l}));return c};return r}function K(){w.event.preventDefault()}function T(){for(var c=w.event,r;r=c.sourceEvent;)c=r;return c}function Q(c){for(var r=
new D,a=0,n=arguments.length;++a<n;)r[arguments[a]]=C(r);r.of=function(a,f){return function(n){try{var x=n.sourceEvent=w.event;n.target=c;w.event=n;r[n.type].apply(a,f)}finally{w.event=x}}};return r}function B(c){Ub(c,oa);return c}function R(c){return"function"===typeof c?c:function(){return Pc(c,this)}}function O(c){return"function"===typeof c?c:function(){return Qc(c,this)}}function M(c,r){function a(){this.removeAttribute(c)}function n(){this.removeAttributeNS(c.space,c.local)}function g(){this.setAttribute(c,
r)}function l(){this.setAttributeNS(c.space,c.local,r)}function ca(){var a=r.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function x(){var a=r.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=w.ns.qualify(c);return null==r?c.local?n:a:"function"===typeof r?c.local?x:ca:c.local?l:g}function H(c){return c.trim().replace(/\s+/g," ")}function P(c){return new RegExp("(?:^|\\s+)"+w.requote(c)+"(?:\\s+|$)","g")}
function y(c,r){function a(){for(var f=-1;++f<g;)c[f](this,r)}function n(){for(var a=-1,f=r.apply(this,arguments);++a<g;)c[a](this,f)}c=(c+"").trim().split(/^|\s+/).map(F);var g=c.length;return"function"===typeof r?n:a}function F(c){var r=P(c);return function(a,n){if(g=a.classList)return n?g.add(c):g.remove(c);var g=a.getAttribute("class")||"";n?(r.lastIndex=0,r.test(g)||a.setAttribute("class",H(g+" "+c))):a.setAttribute("class",H(g.replace(r," ")))}}function L(c,r,a){function n(){this.style.removeProperty(c)}
function g(){this.style.setProperty(c,r,a)}function l(){var n=r.apply(this,arguments);null==n?this.style.removeProperty(c):this.style.setProperty(c,n,a)}return null==r?n:"function"===typeof r?l:g}function E(c,r){function a(){delete this[c]}function n(){this[c]=r}function g(){var a=r.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==r?a:"function"===typeof r?g:n}function W(c){return"function"===typeof c?c:(c=w.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function J(c){return function(){return Ud(this,c)}}function U(c){arguments.length||(c=I);return function(r,a){return r&&a?c(r.__data__,a.__data__):!r-!a}}function v(c,r){for(var a=0,n=c.length;a<n;a++)for(var g=c[a],l=0,ca=g.length,x;l<ca;l++)(x=g[l])&&r(x,l,a);return c}function da(c){Ub(c,Sa);return c}function V(c){var r,a;return function(n,g,l){n=c[l].update;var ca=n.length;l!=a&&(a=l,r=0);for(g>=r&&(r=g+1);!(g=
n[r])&&++r<ca;);return g}}function p(){var c=this.__transition__;c&&++c.active}function S(c,r,a){function n(){var r=this[ca];r&&(this.removeEventListener(c,r,r.$),delete this[ca])}function g(){var g=N(r,cb(arguments));n.call(this);this.addEventListener(c,this[ca]=g,g.$=a);g._=r}function l(){var r=new RegExp("^__on([^.]+)"+w.requote(c)+"$"),a,f;for(f in this)if(a=f.match(r)){var n=this[f];this.removeEventListener(a[1],n,n.$);delete this[f]}}var ca="__on"+c,x=c.indexOf("."),N=Y;0<x&&(c=c.substring(0,
x));var b=Rc.get(c);b&&(c=b,N=na);return x?r?g:n:r?z:l}function Y(c,r){return function(a){var n=w.event;w.event=a;r[0]=this.__data__;try{c.apply(this,r)}finally{w.event=n}}}function na(c,r){var a=Y(c,r);return function(c){var r=c.relatedTarget;r&&(r===this||r.compareDocumentPosition(this)&8)||a.call(this,c)}}function la(){var c=".dragsuppress-"+ ++mg,r="click"+c,a=w.select(za).on("touchmove"+c,K).on("dragstart"+c,K).on("selectstart"+c,K);if(Fb){var n=Va.style,g=n[Fb];n[Fb]="none"}return function(l){a.on(c,
null);Fb&&(n[Fb]=g);if(l){var ca=function(){a.on(r,null)};a.on(r,function(){K();ca()},!0);setTimeout(ca,0)}}}function X(c,r){r.changedTouches&&(r=r.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var n=a.createSVGPoint();if(0>Sc&&(za.scrollX||za.scrollY)){var a=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),g=a[0][0].getScreenCTM();Sc=!(g.f||g.e);a.remove()}Sc?(n.x=r.pageX,n.y=r.pageY):(n.x=r.clientX,n.y=r.clientY);
n=n.matrixTransform(c.getScreenCTM().inverse());return[n.x,n.y]}a=c.getBoundingClientRect();return[r.clientX-a.left-c.clientLeft,r.clientY-a.top-c.clientTop]}function ga(){return w.event.changedTouches[0].identifier}function ka(){return w.event.target}function aa(){return za}function ea(c,r,a){return(r[0]-c[0])*(a[1]-c[1])-(r[1]-c[1])*(a[0]-c[0])}function ma(c){return 1<c?0:-1>c?ia:Math.acos(c)}function ba(c){return 1<c?xa:-1>c?-xa:Math.asin(c)}function qa(c){return((c=Math.exp(c))+1/c)/2}function Ka(c){return(c=
Math.sin(c/2))*c}function ua(){}function pa(c,r,a){return this instanceof pa?void(this.h=+c,this.s=+r,this.l=+a):2>arguments.length?c instanceof pa?new pa(c.h,c.s,c.l):Wd(""+c,Xd,pa):new pa(c,r,a)}function Wa(c,r,a){function n(c){360<c?c-=360:0>c&&(c+=360);return 60>c?g+(l-g)*c/60:180>c?l:240>c?g+(l-g)*(240-c)/60:g}var g,l;c=isNaN(c)?0:0>(c%=360)?c+360:c;r=isNaN(r)?0:0>r?0:1<r?1:r;a=0>a?0:1<a?1:a;l=.5>=a?a*(1+r):a+r-a*r;g=2*a-l;return new Aa(Math.round(255*n(c+120)),Math.round(255*n(c)),Math.round(255*
n(c-120)))}function Ca(c,r,a){return this instanceof Ca?void(this.h=+c,this.c=+r,this.l=+a):2>arguments.length?c instanceof Ca?new Ca(c.h,c.c,c.l):c instanceof La?Yd(c.l,c.a,c.b):Yd((c=Zd((c=w.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ca(c,r,a)}function Tc(c,r,a){isNaN(c)&&(c=0);isNaN(r)&&(r=0);return new La(a,Math.cos(c*=ha)*r,Math.sin(c)*r)}function La(c,r,a){return this instanceof La?void(this.l=+c,this.a=+r,this.b=+a):2>arguments.length?c instanceof La?new La(c.l,c.a,c.b):c instanceof Ca?Tc(c.l,c.c,
c.h):Zd((c=Aa(c)).r,c.g,c.b):new La(c,r,a)}function $d(c,r,a){c=(c+16)/116;a=c-a/200;r=Uc(c+r/500)*ae;c=Uc(c)*be;a=Uc(a)*ce;return new Aa(Vc(3.2404542*r-1.5371385*c-.4985314*a),Vc(-.969266*r+1.8760108*c+.041556*a),Vc(.0556434*r-.2040259*c+1.0572252*a))}function Yd(c,r,a){return 0<c?new Ca(Math.atan2(a,r)*sa,Math.sqrt(r*r+a*a),c):new Ca(NaN,NaN,c)}function Uc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Wc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Vc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Aa(c,r,a){return this instanceof Aa?void(this.r=~~c,this.g=~~r,this.b=~~a):2>arguments.length?c instanceof Aa?new Aa(c.r,c.g,c.b):Wd(""+c,Aa,Wa):new Aa(c,r,a)}function Vb(c){return new Aa(c>>16,c>>8&255,c&255)+""}function tb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Wd(c,r,a){var n=0,g=0,l=0,ca,x;if(ca=/([a-z]+)\((.*)\)/i.exec(c))switch(x=ca[2].split(","),ca[1]){case "hsl":return a(parseFloat(x[0]),
parseFloat(x[1])/100,parseFloat(x[2])/100);case "rgb":return r(Xc(x[0]),Xc(x[1]),Xc(x[2]))}if(a=Wb.get(c))return r(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(n=(a&3840)>>4,n|=n>>4,g=a&240,g|=g>>4,l=a&15,l|=l<<4):7===c.length&&(n=(a&16711680)>>16,g=(a&65280)>>8,l=a&255));return r(n,g,l)}function Xd(c,r,a){var n=Math.min(c/=255,r/=255,a/=255),g=Math.max(c,r,a),l=g-n,ca=(g+n)/2;l?(n=.5>ca?l/(g+n):l/(2-g-n),c=60*(c==g?(r-a)/l+(r<a?6:0):r==g?(a-c)/l+2:
(c-r)/l+4)):(c=NaN,n=0<ca&&1>ca?0:c);return new pa(c,n,ca)}function Zd(c,r,a){c=Yc(c);r=Yc(r);a=Yc(a);var n=Wc((.4124564*c+.3575761*r+.1804375*a)/ae),g=Wc((.2126729*c+.7151522*r+.072175*a)/be);c=Wc((.0193339*c+.119192*r+.9503041*a)/ce);return La(116*g-16,500*(n-g),200*(g-c))}function Yc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Xc(c){var r=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*r):r}function ra(c){return"function"===typeof c?c:function(){return c}}
function wa(c){return c}function Zc(c){return function(r,a,n){2===arguments.length&&"function"===typeof a&&(n=a,a=null);return Xb(r,a,c,n)}}function Xb(c,r,a,n){function g(){var c=N.status,r;if(!c&&N.responseText||200<=c&&300>c||304===c){try{r=a.call(l,N)}catch(n){ca.error.call(l,n);return}ca.load.call(l,r)}else ca.error.call(l,N)}var l={},ca=w.dispatch("beforesend","progress","load","error"),x={},N=new XMLHttpRequest,b=null;!za.XDomainRequest||"withCredentials"in N||!/^(http(s)?:)?\/\//.test(c)||
(N=new XDomainRequest);"onload"in N?N.onload=N.onerror=g:N.onreadystatechange=function(){3<N.readyState&&g()};N.onprogress=function(c){var r=w.event;w.event=c;try{ca.progress.call(l,N)}finally{w.event=r}};l.header=function(c,r){c=(c+"").toLowerCase();if(2>arguments.length)return x[c];null==r?delete x[c]:x[c]=r+"";return l};l.mimeType=function(c){if(!arguments.length)return r;r=null==c?null:c+"";return l};l.responseType=function(c){if(!arguments.length)return b;b=c;return l};l.response=function(c){a=
c;return l};["get","post"].forEach(function(c){l[c]=function(){return l.send.apply(l,[c].concat(cb(arguments)))}});l.send=function(a,f,n){2===arguments.length&&"function"===typeof f&&(n=f,f=null);N.open(a,c,!0);null==r||"accept"in x||(x.accept=r+",*/*");if(N.setRequestHeader)for(var g in x)N.setRequestHeader(g,x[g]);null!=r&&N.overrideMimeType&&N.overrideMimeType(r);null!=b&&(N.responseType=b);if(null!=n)l.on("error",n).on("load",function(c){n(null,c)});ca.beforesend.call(l,N);N.send(null==f?null:
f);return l};l.abort=function(){N.abort();return l};w.rebind(l,ca,"on");return null==n?l:l.get(ng(n))}function ng(c){return 1===c.length?function(r,a){c(null==r?a:null)}:c}function $c(){var c=de(),c=ee()-c;24<c?(isFinite(c)&&(clearTimeout(Yb),Yb=setTimeout($c,c)),Zb=0):(Zb=1,fe($c))}function de(){var c=Date.now();for(Xa=$b;Xa;)c>=Xa.t&&(Xa.f=Xa.c(c-Xa.t)),Xa=Xa.n;return c}function ee(){for(var c,r=$b,a=Infinity;r;)r.f?r=c?c.n=r.n:$b=r.n:(r.t<a&&(a=r.t),r=(c=r).n);ac=c;return a}function ad(c,r){return r-
(c?Math.ceil(Math.log(c)/Math.LN10):1)}function og(c){var r=c.decimal,a=c.thousands,n=c.grouping,g=c.currency,l=n?function(c){for(var r=c.length,g=[],l=0,b=n[0];0<r&&0<b;)g.push(c.substring(r-=b,r+b)),b=n[l=(l+1)%n.length];return g.reverse().join(a)}:wa;return function(c){c=ge.exec(c);var a=c[1]||" ",f=c[2]||">",n=c[3]||"",b=c[4]||"",p=c[5],e=+c[6],h=c[7],k=c[8],m=c[9],v=1,q="",s="",t=!1;k&&(k=+k.substring(1));if(p||"0"===a&&"="===f)p=a="0",f="=",h&&(e-=Math.floor((e-1)/4));switch(m){case "n":h=!0;
m="g";break;case "%":v=100;s="%";m="f";break;case "p":v=100;s="%";m="r";break;case "b":case "o":case "x":case "X":"#"===b&&(q="0"+m.toLowerCase());case "c":case "d":t=!0;k=0;break;case "s":v=-1,m="r"}"$"===b&&(q=g[0],s=g[1]);"r"!=m||k||(m="g");if(null!=k)if("g"==m)k=Math.max(1,Math.min(21,k));else if("e"==m||"f"==m)k=Math.max(0,Math.min(20,k));var m=pg.get(m)||qg,y=p&&h;return function(c){var g=s;if(t&&c%1)return"";var b=0>c||0===c&&0>1/c?(c=-c,"-"):n;0>v?(g=w.formatPrefix(c,k),c=g.scale(c),g=g.symbol+
s):c*=v;c=m(c,k);var ca=c.lastIndexOf("."),Ta=0>ca?c:c.substring(0,ca);c=0>ca?"":r+c.substring(ca+1);!p&&h&&(Ta=l(Ta));var ca=q.length+Ta.length+c.length+(y?0:b.length),E=ca<e?Array(ca=e-ca+1).join(a):"";y&&(Ta=l(E+Ta));b+=q;c=Ta+c;return("<"===f?b+c+E:">"===f?E+b+c:"^"===f?E.substring(0,ca>>=1)+b+c+E.substring(ca):b+(y?c:E+c))+g}}}function qg(c){return c+""}function Ya(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function kb(c,r,a){function n(r){var a=c(r),f=
l(a,1);return r-a<f-r?a:f}function g(a){r(a=c(new ya(a-1)),1);return a}function l(c,a){r(c=new ya(+c),a);return c}function b(c,n,l){c=g(c);var x=[];if(1<l)for(;c<n;)a(c)%l||x.push(new Date(+c)),r(c,1);else for(;c<n;)x.push(new Date(+c)),r(c,1);return x}c.floor=c;c.round=n;c.ceil=g;c.offset=l;c.range=b;var x=c.utc=bc(c);x.floor=x;x.round=bc(n);x.ceil=bc(g);x.offset=bc(l);x.range=function(c,r,a){try{ya=Ya;var f=new Ya;f._=c;return b(f,r,a)}finally{ya=Date}};return c}function bc(c){return function(a,
f){try{ya=Ya;var n=new Ya;n._=a;return c(n,f)._}finally{ya=Date}}}function rg(c){function a(c){function r(a){for(var f=[],g=-1,l=0,x,b;++g<n;)if(37===c.charCodeAt(g)){f.push(c.substring(l,g));null!=(x=he[l=c.charAt(++g)])&&(l=c.charAt(++g));if(b=E[l])l=b(a,null==x?"e"===l?" ":"0":x);f.push(l);l=g+1}f.push(c.substring(l,g));return f.join("")}var n=c.length;r.parse=function(a){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(r,c,a,0)!=a.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);a=null!=r.Z&&
ya!==Ya;var n=new (a?Ya:ya);"j"in r?n.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(n.setFullYear(r.y,0,1),n.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(n.getDay()+5)%7:r.w+7*r.U-(n.getDay()+6)%7)):n.setFullYear(r.y,r.m,r.d);n.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L);return a?n._:n};r.toString=function(){return c};return r}function f(c,r,a,f){for(var n,g=0,l=r.length,x=a.length;g<l;){if(f>=x)return-1;n=r.charCodeAt(g++);if(37===n){if(n=r.charAt(g++),n=S[n in he?r.charAt(g++):n],
!n||0>(f=n(c,a,f)))return-1}else if(n!=a.charCodeAt(f++))return-1}return f}var n=c.dateTime,g=c.date,l=c.time,b=c.periods,x=c.days,N=c.shortDays,fa=c.months,p=c.shortMonths;a.utc=function(c){function f(c){try{ya=Ya;var r=new ya;r._=c;return n(r)}finally{ya=Date}}var n=a(c);f.parse=function(c){try{ya=Ya;var r=n.parse(c);return r&&r._}finally{ya=Date}};f.toString=n.toString;return f};a.multi=a.utc.multi=sg;var e=w.map(),h=cc(x),k=dc(x),m=cc(N),v=dc(N),q=cc(fa),s=dc(fa),t=cc(p),y=dc(p);b.forEach(function(c,
r){e.set(c.toLowerCase(),r)});var E={a:function(c){return N[c.getDay()]},A:function(c){return x[c.getDay()]},b:function(c){return p[c.getMonth()]},B:function(c){return fa[c.getMonth()]},c:a(n),d:function(c,r){return Ba(c.getDate(),r,2)},e:function(c,r){return Ba(c.getDate(),r,2)},H:function(c,r){return Ba(c.getHours(),r,2)},I:function(c,r){return Ba(c.getHours()%12||12,r,2)},j:function(c,r){return Ba(1+$.dayOfYear(c),r,3)},L:function(c,r){return Ba(c.getMilliseconds(),r,3)},m:function(c,r){return Ba(c.getMonth()+
1,r,2)},M:function(c,r){return Ba(c.getMinutes(),r,2)},p:function(c){return b[+(12<=c.getHours())]},S:function(c,r){return Ba(c.getSeconds(),r,2)},U:function(c,r){return Ba($.sundayOfYear(c),r,2)},w:function(c){return c.getDay()},W:function(c,r){return Ba($.mondayOfYear(c),r,2)},x:a(g),X:a(l),y:function(c,r){return Ba(c.getFullYear()%100,r,2)},Y:function(c,r){return Ba(c.getFullYear()%1E4,r,4)},Z:tg,"%":function(){return"%"}},S={a:function(c,r,a){m.lastIndex=0;return(r=m.exec(r.substring(a)))?(c.w=
v.get(r[0].toLowerCase()),a+r[0].length):-1},A:function(c,r,a){h.lastIndex=0;return(r=h.exec(r.substring(a)))?(c.w=k.get(r[0].toLowerCase()),a+r[0].length):-1},b:function(c,r,a){t.lastIndex=0;return(r=t.exec(r.substring(a)))?(c.m=y.get(r[0].toLowerCase()),a+r[0].length):-1},B:function(c,r,a){q.lastIndex=0;return(r=q.exec(r.substring(a)))?(c.m=s.get(r[0].toLowerCase()),a+r[0].length):-1},c:function(c,r,a){return f(c,E.c.toString(),r,a)},d:ie,e:ie,H:je,I:je,j:ug,L:vg,m:wg,M:xg,p:function(c,r,a){r=e.get(r.substring(a,
a+=2).toLowerCase());return null==r?-1:(c.p=r,a)},S:yg,U:zg,w:Ag,W:Bg,x:function(c,r,a){return f(c,E.x.toString(),r,a)},X:function(c,r,a){return f(c,E.X.toString(),r,a)},y:Cg,Y:Dg,Z:Eg,"%":Fg};return a}function Ba(c,r,a){var n=0>c?"-":"";c=(n?-c:c)+"";var g=c.length;return n+(g<a?Array(a-g+1).join(r)+c:c)}function cc(c){return new RegExp("^(?:"+c.map(w.requote).join("|")+")","i")}function dc(c){for(var r=new t,a=-1,n=c.length;++a<n;)r.set(c[a].toLowerCase(),a);return r}function Ag(c,r,a){ta.lastIndex=
0;return(r=ta.exec(r.substring(a,a+1)))?(c.w=+r[0],a+r[0].length):-1}function zg(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a)))?(c.U=+r[0],a+r[0].length):-1}function Bg(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a)))?(c.W=+r[0],a+r[0].length):-1}function Dg(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+4)))?(c.y=+r[0],a+r[0].length):-1}function Cg(c,r,a){ta.lastIndex=0;if(r=ta.exec(r.substring(a,a+2))){var n=+r[0];c=(c.y=n+(68<n?1900:2E3),a+r[0].length)}else c=-1;return c}
function Eg(c,r,a){return/^[+-]\d{4}$/.test(r=r.substring(a,a+5))?(c.Z=-r,a+5):-1}function wg(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+2)))?(c.m=r[0]-1,a+r[0].length):-1}function ie(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+2)))?(c.d=+r[0],a+r[0].length):-1}function ug(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+3)))?(c.j=+r[0],a+r[0].length):-1}function je(c,r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+2)))?(c.H=+r[0],a+r[0].length):-1}function xg(c,
r,a){ta.lastIndex=0;return(r=ta.exec(r.substring(a,a+2)))?(c.M=+r[0],a+r[0].length):-1}function yg(c,a,f){ta.lastIndex=0;return(a=ta.exec(a.substring(f,f+2)))?(c.S=+a[0],f+a[0].length):-1}function vg(c,a,f){ta.lastIndex=0;return(a=ta.exec(a.substring(f,f+3)))?(c.L=+a[0],f+a[0].length):-1}function tg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var f=~~(ja(a)/60),a=ja(a)%60;return c+Ba(f,"0",2)+Ba(a,"0",2)}function Fg(c,a,f){ke.lastIndex=0;return(c=ke.exec(a.substring(f,f+1)))?f+c[0].length:-1}function sg(c){for(var a=
c.length,f=-1;++f<a;)c[f][0]=this(c[f][0]);return function(a){for(var r=0,f=c[r];!f[1](a);)f=c[++r];return f[0](a)}}function bd(){}function le(c,a,f){var n=f.s=c+a,g=n-c;f.t=c-(n-g)+(a-g)}function ec(c,a){if(c&&me.hasOwnProperty(c.type))me[c.type](c,a)}function cd(c,a,f){var n=-1;f=c.length-f;var g;for(a.lineStart();++n<f;)g=c[n],a.point(g[0],g[1],g[2]);a.lineEnd()}function ne(c,a){var f=-1,n=c.length;for(a.polygonStart();++f<n;)cd(c[f],a,1);a.polygonEnd()}function Gg(){function c(c,a){c*=ha;a=a*
ha/2+ia/4;var r=c-n,f=0<=r?1:-1,b=f*r,r=Math.cos(a),p=Math.sin(a),e=l*p,h=g*r+e*Math.cos(b),f=e*f*Math.sin(b);lb.add(Math.atan2(f,h));n=c;g=r;l=p}var a,f,n,g,l;Ea.point=function(b,x){Ea.point=c;n=(a=b)*ha;g=Math.cos(x=(f=x)*ha/2+ia/4);l=Math.sin(x)};Ea.lineEnd=function(){c(a,f)}}function mb(c){var a=c[0];c=c[1];var f=Math.cos(c);return[f*Math.cos(a),f*Math.sin(a),Math.sin(c)]}function fc(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function ub(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*
a[1]-c[1]*a[0]]}function dd(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function gc(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function hc(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function ic(c){return[Math.atan2(c[1],c[0]),ba(c[2])]}function jc(c,a){return ja(c[0]-a[0])<Z&&ja(c[1]-a[1])<Z}function ed(c,a){c*=ha;var f=Math.cos(a*=ha);Gb(f*Math.cos(c),f*Math.sin(c),Math.sin(a))}function Gb(c,a,f){++Hb;Za+=(c-Za)/Hb;$a+=(a-$a)/Hb;Pa+=(f-Pa)/Hb}function oe(){function c(c,l){c*=ha;var b=
Math.cos(l*=ha),x=b*Math.cos(c),b=b*Math.sin(c),N=Math.sin(l),fa=Math.atan2(Math.sqrt((fa=f*N-n*b)*fa+(fa=n*x-a*N)*fa+(fa=a*b-f*x)*fa),a*x+f*b+n*N);vb+=fa;Ha+=fa*(a+(a=x));Ia+=fa*(f+(f=b));Da+=fa*(n+(n=N));Gb(a,f,n)}var a,f,n;Ma.point=function(g,l){g*=ha;var b=Math.cos(l*=ha);a=b*Math.cos(g);f=b*Math.sin(g);n=Math.sin(l);Ma.point=c;Gb(a,f,n)}}function pe(){Ma.point=ed}function Hg(){function c(c,a){c*=ha;var r=Math.cos(a*=ha),f=r*Math.cos(c),r=r*Math.sin(c),b=Math.sin(a),p=g*b-l*r,e=l*f-n*b,h=n*r-
g*f,k=Math.sqrt(p*p+e*e+h*h),m=n*f+g*r+l*b,v=k&&-ma(m)/k,k=Math.atan2(k,m);db+=v*p;eb+=v*e;Qa+=v*h;vb+=k;Ha+=k*(n+(n=f));Ia+=k*(g+(g=r));Da+=k*(l+(l=b));Gb(n,g,l)}var a,f,n,g,l;Ma.point=function(b,x){a=b;f=x;Ma.point=c;b*=ha;var N=Math.cos(x*=ha);n=N*Math.cos(b);g=N*Math.sin(b);l=Math.sin(x);Gb(n,g,l)};Ma.lineEnd=function(){c(a,f);Ma.lineEnd=pe;Ma.point=ed}}function wb(){return!0}function qe(c,a,f,n,g){var l=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,r=c[0],f=c[a];if(jc(r,f)){g.lineStart();
for(f=0;f<a;++f)g.point((r=c[f])[0],r[1]);g.lineEnd()}else a=new kc(r,c,null,!0),r=new kc(r,null,a,!1),a.o=r,l.push(a),b.push(r),a=new kc(f,c,null,!1),r=new kc(f,null,a,!0),a.o=r,l.push(a),b.push(r)}});b.sort(a);re(l);re(b);if(l.length){c=0;a=f;for(f=b.length;c<f;++c)b[c].e=a=!a;a=l[0];for(var x,N;;){for(var fa=a,p=!0;fa.v;)if((fa=fa.n)===a)return;x=fa.z;g.lineStart();do{fa.v=fa.o.v=!0;if(fa.e){if(p)for(c=0,f=x.length;c<f;++c)g.point((N=x[c])[0],N[1]);else n(fa.x,fa.n.x,1,g);fa=fa.n}else{if(p)for(x=
fa.p.z,c=x.length-1;0<=c;--c)g.point((N=x[c])[0],N[1]);else n(fa.x,fa.p.x,-1,g);fa=fa.p}fa=fa.o;x=fa.z;p=!p}while(!fa.v);g.lineEnd()}}}function re(c){if(a=c.length){for(var a,f=0,n=c[0],g;++f<a;)n.n=g=c[f],g.p=n,n=g;n.n=g=c[0];g.p=n}}function kc(c,a,f,n){this.x=c;this.z=a;this.o=f;this.e=n;this.v=!1;this.n=this.p=null}function se(c,a,f,n){return function(g,l){function b(a,r){var f=g(a,r);c(a=f[0],r=f[1])&&l.point(a,r)}function x(c,a){var r=g(c,a);k.point(r[0],r[1])}function N(){v.point=x;k.lineStart()}
function fa(){v.point=b;k.lineEnd()}function p(c,a){S.push([c,a]);var r=g(c,a);t.point(r[0],r[1])}function e(){t.lineStart();S=[]}function h(){p(S[0][0],S[0][1]);t.lineEnd();var c=t.clean(),a=s.buffer(),r=a.length;S.pop();E.push(S);S=null;if(r)if(c&1){var c=a[0],r=c.length-1,a=-1,f;if(0<r){y||(l.polygonStart(),y=!0);for(l.lineStart();++a<r;)l.point((f=c[a])[0],f[1]);l.lineEnd()}}else 1<r&&c&2&&a.push(a.pop().concat(a.shift())),q.push(a.filter(Ig))}var k=a(l),m=g.invert(n[0],n[1]),v={point:b,lineStart:N,
lineEnd:fa,polygonStart:function(){v.point=p;v.lineStart=e;v.lineEnd=h;q=[];E=[]},polygonEnd:function(){v.point=b;v.lineStart=N;v.lineEnd=fa;q=w.merge(q);var c,a=m;c=E;var r=a[0],n=a[1],g=[Math.sin(r),-Math.cos(r),0],x=0,p=0;lb.reset();for(var e=0,k=c.length;e<k;++e){var h=c[e],Ta=h.length;if(Ta)for(var Ua=h[0],s=Ua[0],a=Ua[1]/2+ia/4,t=Math.sin(a),Vd=Math.cos(a),S=1;;){S===Ta&&(S=0);var a=h[S],F=a[0],B=a[1]/2+ia/4,J=Math.sin(B),B=Math.cos(B),L=F-s,u=0<=L?1:-1,W=u*L,C=W>ia,t=t*J;lb.add(Math.atan2(t*
u*Math.sin(W),Vd*B+t*Math.cos(W)));x+=C?L+u*Fa:L;C^s>=r^F>=r&&(Ua=ub(mb(Ua),mb(a)),hc(Ua),s=ub(g,Ua),hc(s),s=(C^0<=L?-1:1)*ba(s[2]),n>s||n===s&&(Ua[0]||Ua[1]))&&(p+=C^0<=L?1:-1);if(!S++)break;s=F;t=J;Vd=B;Ua=a}}c=(x<-Z||x<Z&&0>lb)^p&1;q.length?(y||(l.polygonStart(),y=!0),qe(q,Jg,c,f,l)):c&&(y||(l.polygonStart(),y=!0),l.lineStart(),f(null,null,1,l),l.lineEnd());y&&(l.polygonEnd(),y=!1);q=E=null},sphere:function(){l.polygonStart();l.lineStart();f(null,null,1,l);l.lineEnd();l.polygonEnd()}},q,s=te(),
t=a(s),y=!1,E,S;return v}}function Ig(c){return 1<c.length}function te(){var c=[],a;return{lineStart:function(){c.push(a=[])},point:function(c,n){a.push([c,n])},lineEnd:z,buffer:function(){var f=c;c=[];a=null;return f},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Jg(c,a){return(0>(c=c.x)[0]?c[1]-xa-Z:xa-c[1])-(0>(a=a.x)[0]?a[1]-xa-Z:xa-a[1])}function Kg(c){function a(c,r){return Math.cos(c)*Math.cos(r)>g}function f(c,a,r){var f=mb(c),n=mb(a),l=[1,0,0],n=ub(f,n),b=fc(n,
n),f=n[0],x=b-f*f;if(!x)return!r&&c;b=g*b/x;x=-g*f/x;f=ub(l,n);l=gc(l,b);n=gc(n,x);dd(l,n);n=fc(l,f);b=fc(f,f);x=n*n-b*(fc(l,l)-1);if(!(0>x)){var ca=Math.sqrt(x),x=gc(f,(-n-ca)/b);dd(x,l);x=ic(x);if(!r)return x;r=c[0];var p=a[0];c=c[1];a=a[1];var e;p<r&&(e=r,r=p,p=e);var h=p-r,k=ja(h-ia)<Z,m=k||h<Z;!k&&a<c&&(e=c,c=a,a=e);if(m?k?0<c+a^x[1]<(ja(x[0]-r)<Z?c:a):c<=x[1]&&x[1]<=a:h>ia^(r<=x[0]&&x[0]<=p))return a=gc(f,(-n+ca)/b),dd(a,l),[x,ic(a)]}}function n(a,r){var f=l?c:ia-c,n=0;a<-f?n|=1:a>f&&(n|=2);
r<-f?n|=4:r>f&&(n|=8);return n}var g=Math.cos(c),l=0<g,b=ja(g)>Z,x=fd(c,6*ha);return se(a,function(c){var g,x,p,e,h;return{lineStart:function(){e=p=!1;h=1},point:function(k,m){var v=[k,m],q,s=a(k,m),t=l?s?0:n(k,m):s?n(k+(0>k?ia:-ia),m):0;!g&&(e=p=s)&&c.lineStart();s!==p&&(q=f(g,v),jc(g,q)||jc(v,q))&&(v[0]+=Z,v[1]+=Z,s=a(v[0],v[1]));if(s!==p)h=0,s?(c.lineStart(),q=f(v,g),c.point(q[0],q[1])):(q=f(g,v),c.point(q[0],q[1]),c.lineEnd()),g=q;else if(b&&g&&l^s){var y;t&x||!(y=f(v,g,!0))||(h=0,l?(c.lineStart(),
c.point(y[0][0],y[0][1]),c.point(y[1][0],y[1][1]),c.lineEnd()):(c.point(y[1][0],y[1][1]),c.lineEnd(),c.lineStart(),c.point(y[0][0],y[0][1])))}!s||g&&jc(g,v)||c.point(v[0],v[1]);g=v;p=s;x=t},lineEnd:function(){p&&c.lineEnd();g=null},clean:function(){return h|(e&&p)<<1}}},x,l?[0,-c]:[-ia,c-ia])}function ue(c,a,f,n){return function(g){var l=g.a,b=g.b,x=l.x,l=l.y,N=0,fa=1,p=b.x-x,b=b.y-l,e;e=c-x;if(p||!(0<e)){e/=p;if(0>p){if(e<N)return;e<fa&&(fa=e)}else if(0<p){if(e>fa)return;e>N&&(N=e)}e=f-x;if(p||!(0>
e)){e/=p;if(0>p){if(e>fa)return;e>N&&(N=e)}else if(0<p){if(e<N)return;e<fa&&(fa=e)}e=a-l;if(b||!(0<e)){e/=b;if(0>b){if(e<N)return;e<fa&&(fa=e)}else if(0<b){if(e>fa)return;e>N&&(N=e)}e=n-l;if(b||!(0>e)){e/=b;if(0>b){if(e>fa)return;e>N&&(N=e)}else if(0<b){if(e<N)return;e<fa&&(fa=e)}0<N&&(g.a={x:x+N*p,y:l+N*b});1>fa&&(g.b={x:x+fa*p,y:l+fa*b});return g}}}}}}function ve(c,a,f,n){function g(n,g){return ja(n[0]-c)<Z?0<g?0:3:ja(n[0]-f)<Z?0<g?2:1:ja(n[1]-a)<Z?0<g?1:0:0<g?3:2}function l(c,a){return b(c.x,a.x)}
function b(c,a){var r=g(c,1),f=g(a,1);return r!==f?r-f:0===r?a[1]-c[1]:1===r?c[0]-a[0]:2===r?c[1]-a[1]:a[0]-c[0]}return function(x){function N(l,x,N,fa){var e=0,p=0;if(null==l||(e=g(l,N))!==(p=g(x,N))||0>b(l,x)^0<N){do fa.point(0===e||3===e?c:f,1<e?n:a);while((e=(e+N+4)%4)!==p)}else fa.point(x[0],x[1])}function fa(g,l){c<=g&&g<=f&&a<=l&&l<=n&&x.point(g,l)}function e(g,l){g=Math.max(-lc,Math.min(lc,g));l=Math.max(-lc,Math.min(lc,l));var b=c<=g&&g<=f&&a<=l&&l<=n;v&&q.push([g,l]);if(L)t=g,y=l,E=b,L=
!1,b&&(x.lineStart(),x.point(g,l));else if(b&&B)x.point(g,l);else{var ca={a:{x:S,y:F},b:{x:g,y:l}};k(ca)?(B||(x.lineStart(),x.point(ca.a.x,ca.a.y)),x.point(ca.b.x,ca.b.y),b||x.lineEnd(),J=!1):b&&(x.lineStart(),x.point(g,l),J=!1)}S=g;F=l;B=b}var p=x,h=te(),k=ue(c,a,f,n),m,v,q,s={point:fa,lineStart:function(){s.point=e;v&&v.push(q=[]);L=!0;B=!1;S=F=NaN},lineEnd:function(){m&&(e(t,y),E&&B&&h.rejoin(),m.push(h.buffer()));s.point=fa;B&&x.lineEnd()},polygonStart:function(){x=h;m=[];v=[];J=!0},polygonEnd:function(){x=
p;m=w.merge(m);var a;a=[c,n];for(var r=0,f=v.length,g=a[1],b=0;b<f;++b)for(var ca=1,fa=v[b],e=fa.length,h=fa[0],k;ca<e;++ca)k=fa[ca],h[1]<=g?k[1]>g&&0<ea(h,k,a)&&++r:k[1]<=g&&0>ea(h,k,a)&&--r,h=k;a=0!==r;r=J&&a;f=m.length;if(r||f)x.polygonStart(),r&&(x.lineStart(),N(null,null,1,x),x.lineEnd()),f&&qe(m,l,a,N,x),x.polygonEnd();m=v=q=null}},t,y,E,S,F,B,L,J;return s}}function we(c,a){function f(f,g){return f=c(f,g),a(f[0],f[1])}c.invert&&a.invert&&(f.invert=function(f,g){return f=a.invert(f,g),f&&c.invert(f[0],
f[1])});return f}function gd(c){var a=0,f=ia/3,n=hd(c);c=n(a,f);c.parallels=function(c){return arguments.length?n(a=c[0]*ia/180,f=c[1]*ia/180):[a/ia*180,f/ia*180]};return c}function xe(c,a){function f(c,a){var r=Math.sqrt(l-2*g*Math.sin(a))/g;return[r*Math.sin(c*=g),b-r*Math.cos(c)]}var n=Math.sin(c),g=(n+Math.sin(a))/2,l=1+n*(2*g-n),b=Math.sqrt(l)/g;f.invert=function(c,a){var r=b-a;return[Math.atan2(c,r)/g,ba((l-(c*c+r*r)*g*g)/(2*g))]};return f}function Lg(){function c(c,a){mc+=g*c-n*a;n=c;g=a}var a,
f,n,g;fb.point=function(l,b){fb.point=c;a=n=l;f=g=b};fb.lineEnd=function(){c(a,f)}}function Mg(){function c(c,a){b.push("M",c,",",a,l)}function a(c,r){b.push("M",c,",",r);x.point=f}function f(c,a){b.push("L",c,",",a)}function n(){x.point=c}function g(){b.push("Z")}var l=ye(4.5),b=[],x={point:c,lineStart:function(){x.point=a},lineEnd:n,polygonStart:function(){x.lineEnd=g},polygonEnd:function(){x.lineEnd=n;x.point=c},pointRadius:function(c){l=ye(c);return x},result:function(){if(b.length){var c=b.join("");
b=[];return c}}};return x}function ye(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function nb(c,a){Za+=c;$a+=a;++Pa}function ze(){function c(c,g){var l=c-a,b=g-f,l=Math.sqrt(l*l+b*b);Ha+=l*(a+c)/2;Ia+=l*(f+g)/2;Da+=l;nb(a=c,f=g)}var a,f;Na.point=function(n,g){Na.point=c;nb(a=n,f=g)}}function Ae(){Na.point=nb}function Ng(){function c(c,a){var r=c-n,f=a-g,r=Math.sqrt(r*r+f*f);Ha+=r*(n+c)/2;Ia+=r*(g+a)/2;Da+=r;r=g*c-n*a;db+=r*(n+c);eb+=r*(g+a);Qa+=3*r;nb(n=c,g=a)}var a,
f,n,g;Na.point=function(l,b){Na.point=c;nb(a=n=l,f=g=b)};Na.lineEnd=function(){c(a,f)}}function Og(c){function a(r,f){c.moveTo(r,f);c.arc(r,f,b,0,Fa)}function f(a,r){c.moveTo(a,r);x.point=n}function n(a,r){c.lineTo(a,r)}function g(){x.point=a}function l(){c.closePath()}var b=4.5,x={point:a,lineStart:function(){x.point=f},lineEnd:g,polygonStart:function(){x.lineEnd=l},polygonEnd:function(){x.lineEnd=g;x.point=a},pointRadius:function(c){b=c;return x},result:z};return x}function Be(c){function a(c){return(x?
n:f)(c)}function f(a){return Ce(a,function(r,f){r=c(r,f);a.point(r[0],r[1])})}function n(a){function r(f,n){f=c(f,n);a.point(f[0],f[1])}function f(){t=NaN;B.point=n;a.lineStart()}function n(r,f){var l=mb([r,f]),b=c(r,f);g(t,y,s,E,S,w,t=b[0],y=b[1],s=r,E=l[0],S=l[1],w=l[2],x,a);a.point(t,y)}function l(){B.point=r;a.lineEnd()}function b(){f();B.point=ca;B.lineEnd=e}function ca(c,a){n(p=c,a);h=t;k=y;m=E;v=S;q=w;B.point=n}function e(){g(t,y,s,E,S,w,h,k,p,m,v,q,x,a);B.lineEnd=l;l()}var p,h,k,m,v,q,s,t,
y,E,S,w,B={point:r,lineStart:f,lineEnd:l,polygonStart:function(){a.polygonStart();B.lineStart=b},polygonEnd:function(){a.polygonEnd();B.lineStart=f}};return B}function g(a,r,f,n,x,e,p,h,k,m,v,q,s,t){var y=p-a,E=h-r,S=y*y+E*E;if(S>4*l&&s--){var B=n+m,w=x+v,F=e+q,L=Math.sqrt(B*B+w*w+F*F),J=Math.asin(F/=L),u=ja(ja(F)-1)<Z||ja(f-k)<Z?(f+k)/2:Math.atan2(w,B),W=c(u,J),J=W[0],W=W[1],C=J-a,M=W-r,K=E*C-y*M;if(K*K/S>l||.3<ja((y*C+E*M)/S-.5)||n*m+x*v+e*q<b)g(a,r,f,n,x,e,J,W,u,B/=L,w/=L,F,s,t),t.point(J,W),g(J,
W,u,B,w,F,p,h,k,m,v,q,s,t)}}var l=.5,b=Math.cos(30*ha),x=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(l);x=0<(l=c*c)&&16;return a};return a}function Pg(c){var a=Be(function(a,r){return c([a*sa,r*sa])});return function(c){return De(a(c))}}function Ee(c){this.stream=c}function Ce(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function gb(c){return hd(function(){return c})()}
function hd(c){function a(c){c=x(c[0]*ha,c[1]*ha);return[c[0]*e+t,y-c[1]*e]}function f(c){return(c=x.invert((c[0]-t)/e,(y-c[1])/e))&&[c[0]*sa,c[1]*sa]}function n(){x=we(b=id(v,q,s),l);var c=l(h,m);t=p-c[0]*e;y=k+c[1]*e;return g()}function g(){J&&(J.valid=!1,J=null);return a}var l,b,x,N=Be(function(c,a){c=l(c,a);return[c[0]*e+t,y-c[1]*e]}),e=150,p=480,k=250,h=0,m=0,v=0,q=0,s=0,t,y,E=Fe,S=wa,B=null,F=null,J;a.stream=function(c){J&&(J.valid=!1);J=De(E(b,N(S(c))));J.valid=!0;return J};a.clipAngle=function(c){if(!arguments.length)return B;
E=null==c?(B=c,Fe):Kg((B=+c)*ha);return g()};a.clipExtent=function(c){if(!arguments.length)return F;S=(F=c)?ve(c[0][0],c[0][1],c[1][0],c[1][1]):wa;return g()};a.scale=function(c){if(!arguments.length)return e;e=+c;return n()};a.translate=function(c){if(!arguments.length)return[p,k];p=+c[0];k=+c[1];return n()};a.center=function(c){if(!arguments.length)return[h*sa,m*sa];h=c[0]%360*ha;m=c[1]%360*ha;return n()};a.rotate=function(c){if(!arguments.length)return[v*sa,q*sa,s*sa];v=c[0]%360*ha;q=c[1]%360*
ha;s=2<c.length?c[2]%360*ha:0;return n()};w.rebind(a,N,"precision");return function(){l=c.apply(this,arguments);a.invert=l.invert&&f;return n()}}function De(c){return Ce(c,function(a,f){c.point(a*ha,f*ha)})}function Ib(c,a){return[c,a]}function Ge(c,a){return[c>ia?c-Fa:c<-ia?c+Fa:c,a]}function id(c,a,f){return c?a||f?we(He(c),Ie(a,f)):He(c):a||f?Ie(a,f):Ge}function Je(c){return function(a,f){return a+=c,[a>ia?a-Fa:a<-ia?a+Fa:a,f]}}function He(c){var a=Je(c);a.invert=Je(-c);return a}function Ie(c,
a){function f(c,a){var r=Math.cos(a),f=Math.cos(c)*r,r=Math.sin(c)*r,e=Math.sin(a),p=e*n+f*g;return[Math.atan2(r*l-p*b,f*n-e*g),ba(p*l+r*b)]}var n=Math.cos(c),g=Math.sin(c),l=Math.cos(a),b=Math.sin(a);f.invert=function(c,a){var r=Math.cos(a),f=Math.cos(c)*r,r=Math.sin(c)*r,e=Math.sin(a),p=e*l-r*b;return[Math.atan2(r*l+e*b,f*n+p*g),ba(p*n-f*g)]};return f}function fd(c,a){var f=Math.cos(c),n=Math.sin(c);return function(g,l,b,x){var N=b*a;if(null!=g){if(g=Ke(f,g),l=Ke(f,l),0<b?g<l:g>l)g+=b*Fa}else g=
c+b*Fa,l=c-.5*N;for(var e;0<b?g>l:g<l;g-=N)x.point((e=ic([f,-n*Math.cos(g),-n*Math.sin(g)]))[0],e[1])}}function Ke(c,a){var f=mb(a);f[0]-=c;hc(f);var n=ma(-f[1]);return((0>-f[2]?-n:n)+2*Math.PI-Z)%(2*Math.PI)}function Le(c,a,f){var n=w.range(c,a-Z,f).concat(a);return function(c){return n.map(function(a){return[c,a]})}}function Me(c,a,f){var n=w.range(c,a-Z,f).concat(a);return function(c){return n.map(function(a){return[a,c]})}}function jd(c){return c.source}function kd(c){return c.target}function Qg(c,
a,f,n){var g=Math.cos(a),l=Math.sin(a),b=Math.cos(n),x=Math.sin(n),N=g*Math.cos(c),e=g*Math.sin(c),p=b*Math.cos(f),k=b*Math.sin(f),h=2*Math.asin(Math.sqrt(Ka(n-a)+g*b*Ka(f-c))),m=1/Math.sin(h);f=h?function(c){var a=Math.sin(c*=h)*m,r=Math.sin(h-c)*m;c=r*N+a*p;var f=r*e+a*k,a=r*l+a*x;return[Math.atan2(f,c)*sa,Math.atan2(a,Math.sqrt(c*c+f*f))*sa]}:function(){return[c*sa,a*sa]};f.distance=h;return f}function Jb(c,a){function f(a,r){var f=Math.cos(a),b=Math.cos(r),f=c(f*b);return[f*b*Math.sin(a),f*Math.sin(r)]}
f.invert=function(c,f){var l=Math.sqrt(c*c+f*f),b=a(l),x=Math.sin(b),b=Math.cos(b);return[Math.atan2(c*x,l*b),Math.asin(l&&f*x/l)]};return f}function Ne(c,a){function f(c,a){0<l?a<-xa+Z&&(a=-xa+Z):a>xa-Z&&(a=xa-Z);var r=l/Math.pow(Math.tan(ia/4+a/2),g);return[r*Math.sin(g*c),l-r*Math.cos(g*c)]}var n=Math.cos(c),g=c===a?Math.sin(c):Math.log(n/Math.cos(a))/Math.log(Math.tan(ia/4+a/2)/Math.tan(ia/4+c/2)),l=n*Math.pow(Math.tan(ia/4+c/2),g)/g;if(!g)return nc;f.invert=function(c,a){var r=l-a,f=(0<g?1:0>
g?-1:0)*Math.sqrt(c*c+r*r);return[Math.atan2(c,r)/g,2*Math.atan(Math.pow(l/f,1/g))-xa]};return f}function Oe(c,a){function f(c,a){var r=l-a;return[r*Math.sin(g*c),l-r*Math.cos(g*c)]}var n=Math.cos(c),g=c===a?Math.sin(c):(n-Math.cos(a))/(a-c),l=n/g+c;if(ja(g)<Z)return Ib;f.invert=function(c,a){var r=l-a;return[Math.atan2(c,r)/g,l-(0<g?1:0>g?-1:0)*Math.sqrt(c*c+r*r)]};return f}function nc(c,a){return[c,Math.log(Math.tan(ia/4+a/2))]}function Pe(c){var a=gb(c),f=a.scale,n=a.translate,g=a.clipExtent,l;
a.scale=function(){var c=f.apply(a,arguments);return c===a?l?a.clipExtent(null):a:c};a.translate=function(){var c=n.apply(a,arguments);return c===a?l?a.clipExtent(null):a:c};a.clipExtent=function(c){var b=g.apply(a,arguments);if(b===a){if(l=null==c){var N=ia*f(),e=n();g([[e[0]-N,e[1]-N],[e[0]+N,e[1]+N]])}}else l&&(b=null);return b};return a.clipExtent(null)}function ld(c,a){return[Math.log(Math.tan(ia/4+a/2)),-c]}function xb(c){return c[0]}function Kb(c){return c[1]}function Qe(c){for(var a=c.length,
f=[0,1],n=2,g=2;g<a;g++){for(;1<n&&0>=ea(c[f[n-2]],c[f[n-1]],c[g]);)--n;f[n++]=g}return f.slice(0,n)}function Rg(c,a){return c[0]-a[0]||c[1]-a[1]}function md(c,a,f){return(f[0]-a[0])*(c[1]-a[1])<(f[1]-a[1])*(c[0]-a[0])}function Re(c,a,f,n){var g=c[0],l=f[0],b=a[0]-g,x=n[0]-l;c=c[1];f=f[1];a=a[1]-c;n=n[1]-f;l=(x*(c-f)-n*(g-l))/(n*b-x*a);return[g+l*b,c+l*a]}function Se(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Sg(){oc(this);this.edge=this.site=this.circle=null}function Te(c){var a=
Ue.pop()||new Sg;a.site=c;return a}function nd(c){yb(c);zb.remove(c);Ue.push(c);oc(c)}function Ve(c,a){var f=c.site,n=f.x,g=f.y,l=g-a;if(!l)return n;var b=c.P;if(!b)return-Infinity;var f=b.site,b=f.x,f=f.y,x=f-a;if(!x)return b;var N=b-n,e=1/l-1/x,p=N/x;return e?(-p+Math.sqrt(p*p-2*e*(N*N/(-2*x)-f+x/2+g-l/2)))/e+n:(n+b)/2}function We(c){this.site=c;this.edges=[]}function Xe(c,a){return a.angle-c.angle}function Tg(){oc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ab(c){var a=c.P,f=c.N;
if(a&&f){var n=a.site,a=c.site,g=f.site;if(n!==g){var f=a.x,l=a.y,b=n.x-f,x=n.y-l,n=g.x-f,g=g.y-l,N=2*(b*g-x*n);if(!(N>=-od)){var e=b*b+x*x,p=n*n+g*g,x=(g*e-x*p)/N,b=(b*p-n*e)/N,g=b+l,l=Ye.pop()||new Tg;l.arc=c;l.site=a;l.x=x+f;l.y=g+Math.sqrt(x*x+b*b);l.cy=g;c.circle=l;c=null;for(a=Lb._;a;)if(l.y<a.y||l.y===a.y&&l.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Lb.insert(c,l);c||(pd=l)}}}}function yb(c){var a=c.circle;a&&(a.P||(pd=a.N),Lb.remove(a),Ye.push(a),oc(a),c.circle=
null)}function Ug(c,a){var f=c.b;if(f)return!0;var n=c.a,f=a[0][0],g=a[1][0],l=a[0][1],b=a[1][1],x=c.l,N=c.r,e=x.x,x=x.y,p=N.x,N=N.y,h=(e+p)/2,k;if(N===x){if(h<f||h>=g)return;if(e>p){if(!n)n={x:h,y:l};else if(n.y>=b)return;f={x:h,y:b}}else{if(!n)n={x:h,y:b};else if(n.y<l)return;f={x:h,y:l}}}else if(k=(e-p)/(N-x),h=(x+N)/2-k*h,-1>k||1<k)if(e>p){if(!n)n={x:(l-h)/k,y:l};else if(n.y>=b)return;f={x:(b-h)/k,y:b}}else{if(!n)n={x:(b-h)/k,y:b};else if(n.y<l)return;f={x:(l-h)/k,y:l}}else if(x<N){if(!n)n={x:f,
y:k*f+h};else if(n.x>=g)return;f={x:g,y:k*g+h}}else{if(!n)n={x:g,y:k*g+h};else if(n.x<f)return;f={x:f,y:k*f+h}}c.a=n;c.b=f;return!0}function Ze(c,a){this.l=c;this.r=a;this.a=this.b=null}function Mb(c,a,f,n){var g=new Ze(c,a);Bb.push(g);f&&pc(g,c,a,f);n&&pc(g,a,c,n);ob[c.i].edges.push(new qc(g,c,a));ob[a.i].edges.push(new qc(g,a,c));return g}function Vg(c,a,f){c=new Ze(c,null);c.a=a;c.b=f;Bb.push(c);return c}function pc(c,a,f,n){c.a||c.b?c.l===f?c.b=n:c.a=n:(c.a=n,c.l=a,c.r=f)}function qc(c,a,f){var n=
c.a,g=c.b;this.edge=c;this.site=a;this.angle=f?Math.atan2(f.y-a.y,f.x-a.x):c.l===a?Math.atan2(g.x-n.x,n.y-g.y):Math.atan2(n.x-g.x,g.y-n.y)}function qd(){this._=null}function oc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Nb(c,a){var f=a.R,n=a.U;n?n.L===a?n.L=f:n.R=f:c._=f;f.U=n;a.U=f;a.R=f.L;a.R&&(a.R.U=a);f.L=a}function Ob(c,a){var f=a.L,n=a.U;n?n.L===a?n.L=f:n.R=f:c._=f;f.U=n;a.U=f;a.L=f.R;a.L&&(a.L.U=a);f.R=a}function $e(c){for(;c.L;)c=c.L;return c}function rd(c,a){var f=c.sort(Wg).pop(),n,g,l;Bb=
[];ob=Array(c.length);zb=new qd;for(Lb=new qd;;)if(l=pd,f&&(!l||f.y<l.y||f.y===l.y&&f.x<l.x)){if(f.x!==n||f.y!==g){ob[f.i]=new We(f);n=f;for(var b=n.x,x=n.y,N=l=g=void 0,e=void 0,p=zb._;p;)if(N=Ve(p,x)-b,N>Z)p=p.L;else{var e=b,h;var k=p;h=x;var m=k.N;m?h=Ve(m,h):(k=k.site,h=k.y===h?k.x:Infinity);e-=h;if(e>Z){if(!p.R){g=p;break}p=p.R}else{N>-Z?(g=p.P,l=p):e>-Z?(g=p,l=p.N):g=l=p;break}}b=Te(n);zb.insert(g,b);if(g||l)if(g===l)yb(g),l=Te(g.site),zb.insert(b,l),b.edge=l.edge=Mb(g.site,b.site),Ab(g),Ab(l);
else if(l){yb(g);yb(l);x=g.site;p=x.x;e=x.y;h=n.x-p;var k=n.y-e,N=l.site,m=N.x-p,v=N.y-e,q=2*(h*v-k*m),s=h*h+k*k,t=m*m+v*v,p={x:(v*s-k*t)/q+p,y:(h*t-m*s)/q+e};pc(l.edge,x,N,p);b.edge=Mb(x,n,null,p);l.edge=Mb(n,N,null,p);Ab(g);Ab(l)}else b.edge=Mb(g.site,b.site);n=f.x;g=f.y}f=c.pop()}else if(l){N=l.arc;l=N.circle;x=l.x;p=l.cy;l={x:x,y:p};h=N.P;e=N.N;b=[N];nd(N);for(N=h;N.circle&&ja(x-N.circle.x)<Z&&ja(p-N.circle.cy)<Z;)h=N.P,b.unshift(N),nd(N),N=h;b.unshift(N);yb(N);for(h=e;h.circle&&ja(x-h.circle.x)<
Z&&ja(p-h.circle.cy)<Z;)e=h.N,b.push(h),nd(h),h=e;b.push(h);yb(h);x=b.length;p=void 0;for(p=1;p<x;++p)h=b[p],N=b[p-1],pc(h.edge,N.site,h.site,l);N=b[0];h=b[x-1];h.edge=Mb(N.site,h.site,null,l);Ab(N);Ab(h)}else break;if(a){f=Bb;n=ue(a[0][0],a[0][1],a[1][0],a[1][1]);for(g=f.length;g--;)if(l=f[g],!Ug(l,a)||!n(l)||ja(l.a.x-l.b.x)<Z&&ja(l.a.y-l.b.y)<Z)l.a=l.b=null,f.splice(g,1);f=a[0][0];n=a[1][0];g=a[0][1];l=a[1][1];p=ob;for(e=p.length;e--;)if((h=p[e])&&h.prepare())for(m=h.edges,v=m.length,k=0;k<v;)if(q=
m[k].end(),x=q.x,N=q.y,s=m[++k%v].start(),b=s.x,s=s.y,ja(x-b)>Z||ja(N-s)>Z)m.splice(k,0,new qc(Vg(h.site,q,ja(x-f)<Z&&l-N>Z?{x:f,y:ja(b-f)<Z?s:l}:ja(N-l)<Z&&n-x>Z?{x:ja(s-l)<Z?b:n,y:l}:ja(x-n)<Z&&N-g>Z?{x:n,y:ja(b-n)<Z?s:g}:ja(N-g)<Z&&x-f>Z?{x:ja(s-g)<Z?b:f,y:g}:null),h.site,null)),++v}f={cells:ob,edges:Bb};zb=Lb=Bb=ob=null;return f}function Wg(c,a){return a.y-c.y||a.x-c.x}function Xg(c){return c.x}function Yg(c){return c.y}function af(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Pb(c,
a,f,n,g,l){if(!c(a,f,n,g,l)){var b=.5*(f+g),x=.5*(n+l);a=a.nodes;a[0]&&Pb(c,a[0],f,n,b,x);a[1]&&Pb(c,a[1],b,n,g,x);a[2]&&Pb(c,a[2],f,x,b,l);a[3]&&Pb(c,a[3],b,x,g,l)}}function sd(c,a){c=w.rgb(c);a=w.rgb(a);var f=c.r,n=c.g,g=c.b,l=a.r-f,b=a.g-n,x=a.b-g;return function(c){return"#"+tb(Math.round(f+l*c))+tb(Math.round(n+b*c))+tb(Math.round(g+x*c))}}function bf(c,a){var f={},n={},g;for(g in c)g in a?f[g]=pb(c[g],a[g]):n[g]=c[g];for(g in a)g in c||(n[g]=a[g]);return function(c){for(g in f)n[g]=f[g](c);
return n}}function ab(c,a){a-=c=+c;return function(f){return c+a*f}}function cf(c,a){var f=td.lastIndex=ud.lastIndex=0,n,g,l,b=-1,x=[],N=[];c+="";for(a+="";(n=td.exec(c))&&(g=ud.exec(a));)(l=g.index)>f&&(l=a.substring(f,l),x[b]?x[b]+=l:x[++b]=l),(n=n[0])===(g=g[0])?x[b]?x[b]+=g:x[++b]=g:(x[++b]=null,N.push({i:b,x:ab(n,g)})),f=ud.lastIndex;f<a.length&&(l=a.substring(f),x[b]?x[b]+=l:x[++b]=l);return 2>x.length?N[0]?(a=N[0].x,function(c){return a(c)+""}):function(){return a}:(a=N.length,function(c){for(var f=
0,n;f<a;++f)x[(n=N[f]).i]=n.x(c);return x.join("")})}function pb(c,a){for(var f=w.interpolators.length,n;0<=--f&&!(n=w.interpolators[f](c,a)););return n}function rc(c,a){var f=[],n=[],g=c.length,l=a.length,b=Math.min(c.length,a.length),x;for(x=0;x<b;++x)f.push(pb(c[x],a[x]));for(;x<g;++x)n[x]=c[x];for(;x<l;++x)n[x]=a[x];return function(c){for(x=0;x<b;++x)n[x]=f[x](c);return n}}function Zg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function df(c){return function(a){return 1-c(1-a)}}function ef(c){return function(a){return.5*
(.5>a?c(2*a):2-c(2-2*a))}}function $g(c){return c*c}function ah(c){return c*c*c}function bh(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,f=a*c;return 4*(.5>c?f:3*(c-a)+f-.75)}function ch(c){return 1-Math.cos(c*xa)}function dh(c){return Math.pow(2,10*(c-1))}function eh(c){return 1-Math.sqrt(1-c*c)}function fh(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function ff(c,a){a-=c;return function(f){return Math.round(c+
a*f)}}function gf(c){var a=[c.a,c.b],f=[c.c,c.d],n=hf(a),g=a[0]*f[0]+a[1]*f[1],l=-g;f[0]+=l*a[0];f[1]+=l*a[1];l=hf(f)||0;a[0]*f[1]<f[0]*a[1]&&(a[0]*=-1,a[1]*=-1,n*=-1,g*=-1);this.rotate=(n?Math.atan2(a[1],a[0]):Math.atan2(-f[0],f[1]))*sa;this.translate=[c.e,c.f];this.scale=[n,l];this.skew=l?Math.atan2(g,l)*sa:0}function hf(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function jf(c,a){var f=[],n=[],g,l=w.transform(c),b=w.transform(a),x=l.translate,N=b.translate,e=l.rotate,
p=b.rotate,h=l.skew,k=b.skew,l=l.scale,b=b.scale;x[0]!=N[0]||x[1]!=N[1]?(f.push("translate(",null,",",null,")"),n.push({i:1,x:ab(x[0],N[0])},{i:3,x:ab(x[1],N[1])})):N[0]||N[1]?f.push("translate("+N+")"):f.push("");e!=p?(180<e-p?p+=360:180<p-e&&(e+=360),n.push({i:f.push(f.pop()+"rotate(",null,")")-2,x:ab(e,p)})):p&&f.push(f.pop()+"rotate("+p+")");h!=k?n.push({i:f.push(f.pop()+"skewX(",null,")")-2,x:ab(h,k)}):k&&f.push(f.pop()+"skewX("+k+")");l[0]!=b[0]||l[1]!=b[1]?(g=f.push(f.pop()+"scale(",null,",",
null,")"),n.push({i:g-4,x:ab(l[0],b[0])},{i:g-2,x:ab(l[1],b[1])})):1==b[0]&&1==b[1]||f.push(f.pop()+"scale("+b+")");g=n.length;return function(c){for(var a=-1,r;++a<g;)f[(r=n[a]).i]=r.x(c);return f.join("")}}function gh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return(f-c)*a}}function hh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return Math.max(0,Math.min(1,(f-c)*a))}}function ih(c){var a=c.source;c=c.target;var f;var n=c;if(a===n)f=a;else{f=kf(a);for(var n=kf(n),g=f.pop(),l=n.pop(),b=null;g===
l;)b=g,g=f.pop(),l=n.pop();f=b}for(n=[a];a!==f;)a=a.parent,n.push(a);for(a=n.length;c!==f;)n.splice(a,0,c),c=c.parent;return n}function kf(c){for(var a=[],f=c.parent;null!=f;)a.push(c),c=f,f=f.parent;a.push(c);return a}function jh(c){c.fixed|=2}function kh(c){c.fixed&=-7}function lh(c){c.fixed|=4;c.px=c.x;c.py=c.y}function mh(c){c.fixed&=-5}function lf(c,a,f){var n=0,g=0;c.charge=0;if(!c.leaf)for(var l=c.nodes,b=l.length,x=-1,N;++x<b;)N=l[x],null!=N&&(lf(N,a,f),c.charge+=N.charge,n+=N.charge*N.cx,
g+=N.charge*N.cy);c.point&&(c.leaf||(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=f[c.point.index],c.charge+=c.pointCharge=a,n+=a*c.point.x,g+=a*c.point.y);c.cx=n/c.charge;c.cy=g/c.charge}function Qb(c,a){w.rebind(c,a,"sort","children","value");c.nodes=c;c.links=nh;return c}function Rb(c,a){for(var f=[c];null!=(c=f.pop());)if(a(c),(g=c.children)&&(n=g.length))for(var n,g;0<=--n;)f.push(g[n])}function Ra(c,a){for(var f=[c],n=[];null!=(c=f.pop());)if(n.push(c),(b=c.children)&&(l=b.length))for(var g=
-1,l,b;++g<l;)f.push(b[g]);for(;null!=(c=n.pop());)a(c)}function oh(c){return c.children}function ph(c){return c.value}function qh(c,a){return a.value-c.value}function nh(c){return w.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function rh(c){return c.x}function sh(c){return c.y}function th(c,a,f){c.y0=a;c.y=f}function vd(c){return w.range(c.length)}function wd(c){var a=-1;c=c[0].length;for(var f=[];++a<c;)f[a]=0;return f}function uh(c){for(var a=1,
f=0,n=c[0][1],g,l=c.length;a<l;++a)(g=c[a][1])>n&&(f=a,n=g);return f}function vh(c){return c.reduce(wh,0)}function wh(c,a){return c+a[1]}function xh(c,a){return mf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function mf(c,a){for(var f=-1,n=+c[0],g=(c[1]-n)/a,l=[];++f<=a;)l[f]=g*f+n;return l}function yh(c){return[w.min(c),w.max(c)]}function zh(c,a){return c.value-a.value}function xd(c,a){var f=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=f;f._pack_prev=a}function nf(c,a){c._pack_next=a;
a._pack_prev=c}function of(c,a){var f=a.x-c.x,n=a.y-c.y,g=c.r+a.r;return.999*g*g>f*f+n*n}function pf(c){function a(c){n=Math.min(c.x-c.r,n);g=Math.max(c.x+c.r,g);l=Math.min(c.y-c.r,l);b=Math.max(c.y+c.r,b)}if((f=c.children)&&(m=f.length)){var f,n=Infinity,g=-Infinity,l=Infinity,b=-Infinity,x,N,e,p,h,k,m;f.forEach(Ah);x=f[0];x.x=-x.r;x.y=0;a(x);if(1<m&&(N=f[1],N.x=N.r,N.y=0,a(N),2<m))for(e=f[2],qf(x,N,e),a(e),xd(x,e),x._pack_prev=e,xd(e,N),N=x._pack_next,p=3;p<m;p++){qf(x,N,e=f[p]);var v=0,s=1,q=1;
for(h=N._pack_next;h!==N;h=h._pack_next,s++)if(of(h,e)){v=1;break}if(1==v)for(k=x._pack_prev;k!==h._pack_prev&&!of(k,e);k=k._pack_prev,q++);v?(s<q||s==q&&N.r<x.r?nf(x,N=h):nf(x=k,N),p--):(xd(x,e),N=e,a(e))}x=(n+g)/2;N=(l+b)/2;for(p=h=0;p<m;p++)e=f[p],e.x-=x,e.y-=N,h=Math.max(h,e.r+Math.sqrt(e.x*e.x+e.y*e.y));c.r=h;f.forEach(Bh)}}function Ah(c){c._pack_next=c._pack_prev=c}function Bh(c){delete c._pack_next;delete c._pack_prev}function rf(c,a,f,n){var g=c.children;c.x=a+=n*c.x;c.y=f+=n*c.y;c.r*=n;if(g){c=
-1;for(var l=g.length;++c<l;)rf(g[c],a,f,n)}}function qf(c,a,f){var n=c.r+f.r,g=a.x-c.x,l=a.y-c.y;if(n&&(g||l)){var b=a.r+f.r,x=g*g+l*l,b=b*b,n=n*n;a=.5+(n-b)/(2*x);b=Math.sqrt(Math.max(0,2*b*(n+x)-(n-=x)*n-b*b))/(2*x);f.x=c.x+a*g+b*l;f.y=c.y+a*l-b*g}else f.x=c.x+n,f.y=c.y}function sf(c,a){return c.parent==a.parent?1:2}function yd(c){var a=c.children;return a.length?a[0]:c.t}function zd(c){var a=c.children,f;return(f=a.length)?a[f-1]:c.t}function Ch(c){return 1+w.max(c,function(c){return c.y})}function Dh(c){return c.reduce(function(c,
a){return c+a.x},0)/c.length}function tf(c){var a=c.children;return a&&a.length?tf(a[0]):c}function uf(c){var a=c.children,f;return a&&(f=a.length)?uf(a[f-1]):c}function Ad(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function vf(c,a){var f=c.x+a[3],n=c.y+a[0],g=c.dx-a[1]-a[3],l=c.dy-a[0]-a[2];0>g&&(f+=g/2,g=0);0>l&&(n+=l/2,l=0);return{x:f,y:n,dx:g,dy:l}}function Cb(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function sc(c){return c.rangeExtent?c.rangeExtent():Cb(c.range())}function Eh(c,a,f,n){var g=
f(c[0],c[1]),l=n(a[0],a[1]);return function(c){return l(g(c))}}function tc(c,a){var f=0,n=c.length-1,g=c[f],l=c[n],b;l<g&&(b=f,f=n,n=b,b=g,g=l,l=b);c[f]=a.floor(g);c[n]=a.ceil(l);return c}function wf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Fh}function Gh(c,a,f,n){var g=[],l=[],b=0,x=Math.min(c.length,a.length)-1;c[x]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++b<=x;)g.push(f(c[b-1],c[b])),l.push(n(a[b-1],a[b]));return function(a){var r=
w.bisect(c,a,1,x)-1;return l[r](g[r](a))}}function xf(c,a,f,n){function g(){var g=2<Math.min(c.length,a.length)?Gh:Eh,p=n?hh:gh;e=g(c,a,p,f);x=g(a,c,p,pb);return b}function b(c){return e(c)}var e,x;b.invert=function(c){return x(c)};b.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return g()};b.range=function(c){if(!arguments.length)return a;a=c;return g()};b.rangeRound=function(c){return b.range(c).interpolate(ff)};b.clamp=function(c){if(!arguments.length)return n;n=c;return g()};
b.interpolate=function(c){if(!arguments.length)return f;f=c;return g()};b.ticks=function(a){return w.range.apply(w,hb(c,a))};b.tickFormat=function(a,r){return Bd(c,a,r)};b.nice=function(a){tc(c,wf(hb(c,a)[2]));return g()};b.copy=function(){return xf(c,a,f,n)};return g()}function Cd(c,a){return w.rebind(c,a,"range","rangeRound","interpolate","clamp")}function hb(c,a){null==a&&(a=10);var f=Cb(c),n=f[1]-f[0],g=Math.pow(10,Math.floor(Math.log(n/a)/Math.LN10)),n=a/n*g;.15>=n?g*=10:.35>=n?g*=5:.75>=n&&
(g*=2);f[0]=Math.ceil(f[0]/g)*g;f[1]=Math.floor(f[1]/g)*g+.5*g;f[2]=g;return f}function Bd(c,a,f){c=hb(c,a);if(f){a=ge.exec(f);a.shift();if("s"===a[8]){var n=w.formatPrefix(Math.max(ja(c[0]),ja(c[1])));a[7]||(a[7]="."+uc(n.scale(c[2])));a[8]="f";f=w.format(a.join(""));return function(c){return f(n.scale(c))+n.symbol}}a[7]||(a[7]="."+Hh(a[8],c));f=a.join("")}else f=",."+uc(c[2])+"f";return w.format(f)}function uc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Hh(c,a){var f=uc(a[2]);return c in
Ih?Math.abs(f-uc(Math.max(ja(a[0]),ja(a[1]))))+ +("e"!==c):f-2*("%"===c)}function yf(c,a,f,n){function g(c){return(f?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function b(c){return f?Math.pow(a,c):-Math.pow(a,-c)}function e(a){return c(g(a))}e.invert=function(a){return b(c.invert(a))};e.domain=function(a){if(!arguments.length)return n;f=0<=a[0];c.domain((n=a.map(Number)).map(g));return e};e.base=function(f){if(!arguments.length)return a;a=+f;c.domain(n.map(g));return e};e.nice=function(){var a=
tc(n.map(g),f?Math:Jh);c.domain(a);n=a.map(b);return e};e.ticks=function(){var c=Cb(n),e=[],p=c[0],c=c[1],h=Math.floor(g(p)),k=Math.ceil(g(c)),m=a%1?2:a;if(isFinite(k-h)){if(f){for(;h<k;h++)for(var ca=1;ca<m;ca++)e.push(b(h)*ca);e.push(b(h))}else for(e.push(b(h));h++<k;)for(ca=m-1;0<ca;ca--)e.push(b(h)*ca);for(h=0;e[h]<p;h++);for(k=e.length;e[k-1]>c;k--);e=e.slice(h,k)}return e};e.tickFormat=function(c,a){if(!arguments.length)return zf;2>arguments.length?a=zf:"function"!==typeof a&&(a=w.format(a));
var r=Math.max(.1,c/e.ticks().length),n=f?(p=1E-12,Math.ceil):(p=-1E-12,Math.floor),p;return function(c){return c/b(n(g(c)+p))<=r?a(c):""}};e.copy=function(){return yf(c.copy(),a,f,n)};return Cd(e,c)}function Af(c,a,f){function n(a){return c(g(a))}var g=vc(a),b=vc(1/a);n.invert=function(a){return b(c.invert(a))};n.domain=function(a){if(!arguments.length)return f;c.domain((f=a.map(Number)).map(g));return n};n.ticks=function(c){return w.range.apply(w,hb(f,c))};n.tickFormat=function(c,a){return Bd(f,
c,a)};n.nice=function(c){return n.domain(tc(f,wf(hb(f,c)[2])))};n.exponent=function(e){if(!arguments.length)return a;g=vc(a=e);b=vc(1/a);c.domain(f.map(g));return n};n.copy=function(){return Af(c.copy(),a,f)};return Cd(n,c)}function vc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function Bf(c,a){function f(f){return l[((b.get(f)||("range"===a.t?b.set(f,c.push(f)):NaN))-1)%l.length]}function n(a,r){return w.range(c.length).map(function(c){return a+r*c})}var b,l,e;f.domain=function(n){if(!arguments.length)return c;
c=[];b=new t;for(var l=-1,e=n.length,p;++l<e;)b.has(p=n[l])||b.set(p,c.push(p));return f[a.t].apply(f,a.a)};f.range=function(c){if(!arguments.length)return l;l=c;e=0;a={t:"range",a:arguments};return f};f.rangePoints=function(b,g){2>arguments.length&&(g=0);var p=b[0],h=b[1],k=(h-p)/(Math.max(1,c.length-1)+g);l=n(2>c.length?(p+h)/2:p+k*g/2,k);e=0;a={t:"rangePoints",a:arguments};return f};f.rangeBands=function(b,g,p){2>arguments.length&&(g=0);3>arguments.length&&(p=g);var h=b[1]<b[0],k=b[h-0],m=(b[1-
h]-k)/(c.length-g+2*p);l=n(k+m*p,m);h&&l.reverse();e=m*(1-g);a={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(b,g,p){2>arguments.length&&(g=0);3>arguments.length&&(p=g);var h=b[1]<b[0],k=b[h-0],m=b[1-h],v=Math.floor((m-k)/(c.length-g+2*p));l=n(k+Math.round((m-k-(c.length-g)*v)/2),v);h&&l.reverse();e=Math.round(v*(1-g));a={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return e};f.rangeExtent=function(){return Cb(a.a[0])};f.copy=function(){return Bf(c,a)};return f.domain(c)}
function Cf(c,a){function f(){var f=0,e=a.length;for(b=[];++f<e;)b[f-1]=w.quantile(c,f/e);return n}function n(c){if(!isNaN(c=+c))return a[w.bisect(b,c)]}var b;n.domain=function(a){if(!arguments.length)return c;c=a.filter(u).sort(I);return f()};n.range=function(c){if(!arguments.length)return a;a=c;return f()};n.quantiles=function(){return b};n.invertExtent=function(f){f=a.indexOf(f);return 0>f?[NaN,NaN]:[0<f?b[f-1]:c[0],f<b.length?b[f]:c[c.length-1]]};n.copy=function(){return Cf(c,a)};return f()}function Df(c,
a,f){function n(a){return f[Math.max(0,Math.min(e,Math.floor(l*(a-c))))]}function b(){l=f.length/(a-c);e=f.length-1;return n}var l,e;n.domain=function(f){if(!arguments.length)return[c,a];c=+f[0];a=+f[f.length-1];return b()};n.range=function(c){if(!arguments.length)return f;f=c;return b()};n.invertExtent=function(a){a=f.indexOf(a);a=0>a?NaN:a/l+c;return[a,a+1/l]};n.copy=function(){return Df(c,a,f)};return b()}function Ef(c,a){function f(f){if(f<=f)return a[w.bisect(c,f)]}f.domain=function(a){if(!arguments.length)return c;
c=a;return f};f.range=function(c){if(!arguments.length)return a;a=c;return f};f.invertExtent=function(f){f=a.indexOf(f);return[c[f-1],c[f]]};f.copy=function(){return Ef(c,a)};return f}function Ff(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(f){if(!arguments.length)return c;c=f.map(a);return a};a.ticks=function(a){return w.range.apply(w,hb(c,a))};a.tickFormat=function(a,r){return Bd(c,a,r)};a.copy=function(){return Ff(c)};return a}function Kh(c){return c.innerRadius}function Lh(c){return c.outerRadius}
function Gf(c){return c.startAngle}function Hf(c){return c.endAngle}function If(c){function a(r){function e(){p.push("M",l(c(h),x))}for(var p=[],h=[],k=-1,m=r.length,v,ca=ra(f),s=ra(n);++k<m;)b.call(this,v=r[k],k)?h.push([+ca.call(this,v,k),+s.call(this,v,k)]):h.length&&(e(),h=[]);h.length&&e();return p.length?p.join(""):null}var f=xb,n=Kb,b=wb,l=Ga,e=l.key,x=.7;a.x=function(c){if(!arguments.length)return f;f=c;return a};a.y=function(c){if(!arguments.length)return n;n=c;return a};a.defined=function(c){if(!arguments.length)return b;
b=c;return a};a.interpolate=function(c){if(!arguments.length)return e;e="function"===typeof c?l=c:(l=Dd.get(c)||Ga).key;return a};a.tension=function(c){if(!arguments.length)return x;x=c;return a};return a}function Ga(c){return c.join("L")}function Ed(c){for(var a=0,f=c.length,n=c[0],b=[n[0],",",n[1]];++a<f;)b.push("V",(n=c[a])[1],"H",n[0]);return b.join("")}function Fd(c){for(var a=0,f=c.length,n=c[0],b=[n[0],",",n[1]];++a<f;)b.push("H",(n=c[a])[0],"V",n[1]);return b.join("")}function wc(c,a){if(1>
a.length||c.length!=a.length&&c.length!=a.length+2)return Ga(c);var f=c.length!=a.length,n="",b=c[0],l=c[1],e=a[0],x=e,p=1;f&&(n+="Q"+(l[0]-2*e[0]/3)+","+(l[1]-2*e[1]/3)+","+l[0]+","+l[1],b=c[1],p=2);if(1<a.length)for(x=a[1],l=c[p],p++,n+="C"+(b[0]+e[0])+","+(b[1]+e[1])+","+(l[0]-x[0])+","+(l[1]-x[1])+","+l[0]+","+l[1],b=2;b<a.length;b++,p++)l=c[p],x=a[b],n+="S"+(l[0]-x[0])+","+(l[1]-x[1])+","+l[0]+","+l[1];f&&(f=c[p],n+="Q"+(l[0]+2*x[0]/3)+","+(l[1]+2*x[1]/3)+","+f[0]+","+f[1]);return n}function Gd(c,
a){for(var f=[],n=(1-a)/2,b,l=c[0],e=c[1],x=1,p=c.length;++x<p;)b=l,l=e,e=c[x],f.push([n*(e[0]-b[0]),n*(e[1]-b[1])]);return f}function Jf(c){if(3>c.length)return Ga(c);var a=1,f=c.length,n=c[0],b=n[0],l=n[1],e=[b,b,b,(n=c[1])[0]],x=[l,l,l,n[1]],b=[b,",",l,"L",Ja(ib,e),",",Ja(ib,x)];for(c.push(c[f-1]);++a<=f;)n=c[a],e.shift(),e.push(n[0]),x.shift(),x.push(n[1]),Hd(b,e,x);c.pop();b.push("L",n);return b.join("")}function Ja(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Hd(c,a,f){c.push("C",
Ja(Kf,a),",",Ja(Kf,f),",",Ja(Lf,a),",",Ja(Lf,f),",",Ja(ib,a),",",Ja(ib,f))}function Id(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Mf(c){for(var a,f=-1,n=c.length,b,l;++f<n;)a=c[f],b=a[0],l=a[1]+qb,a[0]=b*Math.cos(l),a[1]=b*Math.sin(l);return c}function Nf(c){function a(r){function p(){N.push("M",x(c(s),m),k,h(c(v.reverse()),m),"Z")}for(var N=[],v=[],s=[],q=-1,t=r.length,y,E=ra(f),S=ra(b),B=f===n?function(){return F}:ra(n),w=b===l?function(){return J}:ra(l),F,J;++q<t;)e.call(this,y=r[q],q)?(v.push([F=
+E.call(this,y,q),J=+S.call(this,y,q)]),s.push([+B.call(this,y,q),+w.call(this,y,q)])):v.length&&(p(),v=[],s=[]);v.length&&p();return N.length?N.join(""):null}var f=xb,n=xb,b=0,l=Kb,e=wb,x=Ga,p=x.key,h=x,k="L",m=.7;a.x=function(c){if(!arguments.length)return n;f=n=c;return a};a.x0=function(c){if(!arguments.length)return f;f=c;return a};a.x1=function(c){if(!arguments.length)return n;n=c;return a};a.y=function(c){if(!arguments.length)return l;b=l=c;return a};a.y0=function(c){if(!arguments.length)return b;
b=c;return a};a.y1=function(c){if(!arguments.length)return l;l=c;return a};a.defined=function(c){if(!arguments.length)return e;e=c;return a};a.interpolate=function(c){if(!arguments.length)return p;p="function"===typeof c?x=c:(x=Dd.get(c)||Ga).key;h=x.reverse||x;k=x.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return m;m=c;return a};return a}function Mh(c){return c.radius}function Of(c){return[c.x,c.y]}function Nh(c){return function(){var a=c.apply(this,arguments),f=a[0],a=a[1]+
qb;return[f*Math.cos(a),f*Math.sin(a)]}}function Oh(){return 64}function Ph(){return"circle"}function Pf(c){c=Math.sqrt(c/ia);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Sb(c,a){Ub(c,va);c.id=a;return c}function Jd(c,a,f,n){var b=c.id;return v(c,"function"===typeof f?function(c,e,x){c.__transition__[b].tween.set(a,n(f.call(c,c.__data__,e,x)))}:(f=n(f),function(c){c.__transition__[b].tween.set(a,f)}))}function Qh(c){null==c&&(c="");return function(){this.textContent=
c}}function xc(c,a,f,n){var b=c.__transition__||(c.__transition__={active:0,count:0}),l=b[f];if(!l){var e=n.time,l=b[f]={tween:new t,time:e,ease:n.ease,delay:n.delay,duration:n.duration};++b.count;w.timer(function(n){function p(n){if(b.active>f)return k();b.active=f;l.event&&l.event.start.call(c,m,a);l.tween.forEach(function(f,n){(n=n.call(c,m,a))&&y.push(n)});w.timer(function(){t.c=h(n||1)?wb:h;return 1},0,e)}function h(n){if(b.active!==f)return k();n/=q;for(var x=v(n),e=y.length;0<e;)y[--e].call(c,
x);if(1<=n)return l.event&&l.event.end.call(c,m,a),k()}function k(){--b.count?delete b[f]:delete c.__transition__;return 1}var m=c.__data__,v=l.ease,s=l.delay,q=l.duration,t=Xa,y=[];t.t=s+e;if(s<=n)return p(n-s);t.c=p},0,e)}}function Qf(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Rf(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Kd(c){return c.toISOString()}function Ld(c,a,f){function n(a){return c(a)}function b(c,f){var n=(c[1]-c[0])/
f,g=w.bisect(yc,n);return g==yc.length?[a.year,hb(c.map(function(c){return c/31536E6}),f)[2]]:g?a[n/yc[g-1]<yc[g]/n?g-1:g]:[Rh,hb(c,f)[2]]}n.invert=function(a){return rb(c.invert(a))};n.domain=function(a){if(!arguments.length)return c.domain().map(rb);c.domain(a);return n};n.nice=function(c,a){function f(r){return!isNaN(r)&&!c.range(r,rb(+r+1),a).length}var r=n.domain(),e=Cb(r);if(e=null==c?b(e,10):"number"===typeof c&&b(e,c))c=e[0],a=e[1];return n.domain(tc(r,1<a?{floor:function(a){for(;f(a=c.floor(a));)a=
rb(a-1);return a},ceil:function(a){for(;f(a=c.ceil(a));)a=rb(+a+1);return a}}:c))};n.ticks=function(c,a){var f=Cb(n.domain()),r=null==c?b(f,10):"number"===typeof c?b(f,c):!c.range&&[{range:c},a];r&&(c=r[0],a=r[1]);return c.range(f[0],rb(+f[1]+1),1>a?1:a)};n.tickFormat=function(){return f};n.copy=function(){return Ld(c.copy(),a,f)};return Cd(n,c)}function rb(c){return new Date(c)}function Sh(c){return JSON.parse(c.responseText)}function Th(c){var a=Oa.createRange();a.selectNode(Oa.body);return a.createContextualFragment(c.responseText)}
var w={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Sf=[].slice,cb=function(c){return Sf.call(c)},Oa=document,Va=Oa.documentElement,za=window;try{cb(Va.childNodes)[0].nodeType}catch(si){cb=function(c){for(var a=c.length,f=Array(a);a--;)f[a]=c[a];return f}}try{Oa.createElement("div").style.setProperty("opacity",0,"")}catch(ti){var zc=za.Element.prototype,Uh=zc.setAttribute,Vh=zc.setAttributeNS,Tf=za.CSSStyleDeclaration.prototype,Wh=Tf.setProperty;zc.setAttribute=function(c,
a){Uh.call(this,c,a+"")};zc.setAttributeNS=function(c,a,f){Vh.call(this,c,a,f+"")};Tf.setProperty=function(c,a,f){Wh.call(this,c,a+"",f)}}w.ascending=I;w.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};w.min=function(c,a){var f=-1,n=c.length,b,l;if(1===arguments.length){for(;++f<n&&!(null!=(b=c[f])&&b<=b);)b=void 0;for(;++f<n;)null!=(l=c[f])&&b>l&&(b=l)}else{for(;++f<n&&!(null!=(b=a.call(c,c[f],f))&&b<=b);)b=void 0;for(;++f<n;)null!=(l=a.call(c,c[f],f))&&b>l&&(b=l)}return b};w.max=function(c,
a){var f=-1,b=c.length,g,l;if(1===arguments.length){for(;++f<b&&!(null!=(g=c[f])&&g<=g);)g=void 0;for(;++f<b;)null!=(l=c[f])&&l>g&&(g=l)}else{for(;++f<b&&!(null!=(g=a.call(c,c[f],f))&&g<=g);)g=void 0;for(;++f<b;)null!=(l=a.call(c,c[f],f))&&l>g&&(g=l)}return g};w.extent=function(c,a){var f=-1,b=c.length,g,l,e;if(1===arguments.length){for(;++f<b&&!(null!=(g=e=c[f])&&g<=g);)g=e=void 0;for(;++f<b;)null!=(l=c[f])&&(g>l&&(g=l),e<l&&(e=l))}else{for(;++f<b&&!(null!=(g=e=a.call(c,c[f],f))&&g<=g);)g=void 0;
for(;++f<b;)null!=(l=a.call(c,c[f],f))&&(g>l&&(g=l),e<l&&(e=l))}return[g,e]};w.sum=function(c,a){var f=0,b=c.length,g,l=-1;if(1===arguments.length)for(;++l<b;)isNaN(g=+c[l])||(f+=g);else for(;++l<b;)isNaN(g=+a.call(c,c[l],l))||(f+=g);return f};w.mean=function(c,a){var f=0,b=c.length,g,l=-1,e=b;if(1===arguments.length)for(;++l<b;)u(g=c[l])?f+=g:--e;else for(;++l<b;)u(g=a.call(c,c[l],l))?f+=g:--e;return e?f/e:void 0};w.quantile=function(c,a){var f=(c.length-1)*a+1,b=Math.floor(f),g=+c[b-1];return(f-=
b)?g+f*(c[b]-g):g};w.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(u);return c.length?w.quantile(c.sort(I),.5):void 0};var Uf=a(I);w.bisectLeft=Uf.left;w.bisect=w.bisectRight=Uf.right;w.bisector=function(c){return a(1===c.length?function(a,f){return I(c(a),f)}:c)};w.shuffle=function(c){for(var a=c.length,f,b;a;)b=Math.random()*a--|0,f=c[a],c[a]=c[b],c[b]=f;return c};w.permute=function(c,a){for(var f=a.length,b=Array(f);f--;)b[f]=c[a[f]];return b};w.pairs=function(c){for(var a=0,
f=c.length-1,b=c[0],g=Array(0>f?0:f);a<f;)g[a]=[b,b=c[++a]];return g};w.zip=function(){if(!(g=arguments.length))return[];for(var c=-1,a=w.min(arguments,b),f=Array(a);++c<a;)for(var n=-1,g,l=f[c]=Array(g);++n<g;)l[n]=arguments[n][c];return f};w.transpose=function(c){return w.zip.apply(w,c)};w.keys=function(c){var a=[],f;for(f in c)a.push(f);return a};w.values=function(c){var a=[],f;for(f in c)a.push(c[f]);return a};w.entries=function(c){var a=[],f;for(f in c)a.push({key:f,value:c[f]});return a};w.merge=
function(c){var a=c.length,f;f=-1;for(var b=0,g,l;++f<a;)b+=c[f].length;for(g=Array(b);0<=--a;)for(l=c[a],f=l.length;0<=--f;)g[--b]=l[f];return g};var ja=Math.abs;w.range=function(c,a,f){3>arguments.length&&(f=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/f)throw Error("infinite range");var b=[],g;g=ja(f);for(var l=1;g*l%1;)l*=10;g=l;var l=-1,e;c*=g;a*=g;f*=g;if(0>f)for(;(e=c+f*++l)>a;)b.push(e/g);else for(;(e=c+f*++l)<a;)b.push(e/g);return b};w.map=function(c){var a=new t;if(c instanceof t)c.forEach(function(c,
f){a.set(c,f)});else for(var f in c)a.set(f,c[f]);return a};k(t,{has:m,get:function(c){return this[jb+c]},set:function(c,a){return this[jb+c]=a},remove:function(c){c=jb+c;return c in this&&delete this[c]},keys:e,values:function(){var c=[];this.forEach(function(a,f){c.push(f)});return c},entries:function(){var c=[];this.forEach(function(a,f){c.push({key:a,value:f})});return c},size:h,empty:s,forEach:function(c){for(var a in this)a.charCodeAt(0)===Tb&&c.call(this,a.substring(1),this[a])}});var jb="\x00",
Tb=jb.charCodeAt(0);w.nest=function(){function c(a,r,g){if(g>=b.length)return e?e.call(f,r):l?r.sort(l):r;for(var p=-1,h=r.length,k=b[g++],m,v,s=new t,q;++p<h;)(q=s.get(m=k(v=r[p])))?q.push(v):s.set(m,[v]);a?(v=a(),r=function(f,b){v.set(f,c(a,b,g))}):(v={},r=function(f,b){v[f]=c(a,b,g)});s.forEach(r);return v}function a(c,f){if(f>=b.length)return c;var l=[],e=g[f++];c.forEach(function(c,b){l.push({key:c,values:a(b,f)})});return e?l.sort(function(c,a){return e(c.key,a.key)}):l}var f={},b=[],g=[],l,
e;f.map=function(a,f){return c(f,a,0)};f.entries=function(f){return a(c(w.map,f,0),0)};f.key=function(c){b.push(c);return f};f.sortKeys=function(c){g[b.length-1]=c;return f};f.sortValues=function(c){l=c;return f};f.rollup=function(c){e=c;return f};return f};w.set=function(c){var a=new q;if(c)for(var f=0,b=c.length;f<b;++f)a.add(c[f]);return a};k(q,{has:m,add:function(c){this[jb+c]=!0;return c},remove:function(c){c=jb+c;return c in this&&delete this[c]},values:e,size:h,empty:s,forEach:function(c){for(var a in this)a.charCodeAt(0)===
Tb&&c.call(this,a.substring(1))}});w.behavior={};w.rebind=function(c,a){for(var f=1,b=arguments.length,g;++f<b;)c[g=arguments[f]]=G(c,a,a[g]);return c};var Td="webkit ms moz Moz o O".split(" ");w.dispatch=function(){for(var c=new D,a=-1,f=arguments.length;++a<f;)c[arguments[a]]=C(c);return c};D.prototype.on=function(c,a){var f=c.indexOf("."),b="";0<=f&&(b=c.substring(f+1),c=c.substring(0,f));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,
null);return this}};w.event=null;w.requote=function(c){return c.replace(Xh,"\\$&")};var Xh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ub={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var f in a)c[f]=a[f]},Pc=function(c,a){return a.querySelector(c)},Qc=function(c,a){return a.querySelectorAll(c)},Yh=Va.matches||Va[A(Va,"matchesSelector")],Ud=function(c,a){return Yh.call(c,a)};"function"===typeof Sizzle&&(Pc=function(c,a){return Sizzle(c,a)[0]||null},Qc=Sizzle,Ud=Sizzle.matchesSelector);w.selection=
function(){return Vf};var oa=w.selection.prototype=[];oa.select=function(c){var a=[],f,b,g,l;c=R(c);for(var e=-1,x=this.length;++e<x;){a.push(f=[]);f.parentNode=(g=this[e]).parentNode;for(var p=-1,h=g.length;++p<h;)(l=g[p])?(f.push(b=c.call(l,l.__data__,p,e)),b&&"__data__"in l&&(b.__data__=l.__data__)):f.push(null)}return B(a)};oa.selectAll=function(c){var a=[],f,b;c=O(c);for(var g=-1,l=this.length;++g<l;)for(var e=this[g],x=-1,p=e.length;++x<p;)if(b=e[x])a.push(f=cb(c.call(b,b.__data__,x,g))),f.parentNode=
b;return B(a)};var Md={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:Md,qualify:function(c){var a=c.indexOf(":"),f=c;0<=a&&(f=c.substring(0,a),c=c.substring(a+1));return Md.hasOwnProperty(f)?{space:Md[f],local:c}:c}};oa.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node();c=w.ns.qualify(c);return c.local?f.getAttributeNS(c.space,
c.local):f.getAttribute(c)}for(a in c)this.each(M(a,c[a]));return this}return this.each(M(c,a))};oa.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,g=-1;if(a=f.classList)for(;++g<b;){if(!a.contains(c[g]))return!1}else for(a=f.getAttribute("class");++g<b;)if(!P(c[g]).test(a))return!1;return!0}for(a in c)this.each(y(a,c[a]));return this}return this.each(y(c,a))};oa.style=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==
typeof c){2>b&&(a="");for(f in c)this.each(L(f,c[f],a));return this}if(2>b)return za.getComputedStyle(this.node(),null).getPropertyValue(c);f=""}return this.each(L(c,a,f))};oa.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(E(a,c[a]));return this}return this.each(E(c,a))};oa.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=
""}:function(){this.textContent=c}):this.node().textContent};oa.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};oa.append=function(c){c=W(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};oa.insert=function(c,a){c=W(c);a=R(a);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),a.apply(this,arguments)||null)})};oa.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};oa.data=function(c,a){function f(c,f){var b,n=c.length,g=f.length,l=Math.min(n,g),e=Array(g),k=Array(g),m=Array(n),v,s;if(a){var l=new t,q=new t,y=[],E;for(b=-1;++b<n;)E=a.call(v=c[b],v.__data__,b),l.has(E)?m[b]=v:l.set(E,v),y.push(E);for(b=-1;++b<g;)E=a.call(f,s=f[b],b),(v=l.get(E))?(e[b]=v,v.__data__=s):q.has(E)||(k[b]={__data__:s}),q.set(E,s),l.remove(E);
for(b=-1;++b<n;)l.has(y[b])&&(m[b]=c[b])}else{for(b=-1;++b<l;)v=c[b],s=f[b],v?(v.__data__=s,e[b]=v):k[b]={__data__:s};for(;b<g;++b)k[b]={__data__:f[b]};for(;b<n;++b)m[b]=c[b]}k.update=e;k.parentNode=e.parentNode=m.parentNode=c.parentNode;x.push(k);p.push(e);h.push(m)}var b=-1,g=this.length,l,e;if(!arguments.length){for(c=Array(g=(l=this[0]).length);++b<g;)if(e=l[b])c[b]=e.__data__;return c}var x=da([]),p=B([]),h=B([]);if("function"===typeof c)for(;++b<g;)f(l=this[b],c.call(l,l.parentNode.__data__,
b));else for(;++b<g;)f(l=this[b],c);p.enter=function(){return x};p.exit=function(){return h};return p};oa.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};oa.filter=function(c){var a=[],f,b,g;"function"!==typeof c&&(c=J(c));for(var l=0,e=this.length;l<e;l++){a.push(f=[]);f.parentNode=(b=this[l]).parentNode;for(var x=0,p=b.length;x<p;x++)(g=b[x])&&c.call(g,g.__data__,x,l)&&f.push(g)}return B(a)};oa.order=function(){for(var c=-1,a=this.length;++c<a;)for(var f=
this[c],b=f.length-1,g=f[b],l;0<=--b;)if(l=f[b])g&&g!==l.nextSibling&&g.parentNode.insertBefore(l,g),g=l;return this};oa.sort=function(c){c=U.apply(this,arguments);for(var a=-1,f=this.length;++a<f;)this[a].sort(c);return this.order()};oa.each=function(c){return v(this,function(a,f,b){c.call(a,a.__data__,f,b)})};oa.call=function(c){var a=cb(arguments);c.apply(a[0]=this,a);return this};oa.empty=function(){return!this.node()};oa.node=function(){for(var c=0,a=this.length;c<a;c++)for(var f=this[c],b=0,
g=f.length;b<g;b++){var l=f[b];if(l)return l}return null};oa.size=function(){var c=0;this.each(function(){++c});return c};var Sa=[];w.selection.enter=da;w.selection.enter.prototype=Sa;Sa.append=oa.append;Sa.empty=oa.empty;Sa.node=oa.node;Sa.call=oa.call;Sa.size=oa.size;Sa.select=function(c){for(var a=[],f,b,g,l,e,x=-1,p=this.length;++x<p;){g=(l=this[x]).update;a.push(f=[]);f.parentNode=l.parentNode;for(var h=-1,k=l.length;++h<k;)(e=l[h])?(f.push(g[h]=b=c.call(l.parentNode,e.__data__,h,x)),b.__data__=
e.__data__):f.push(null)}return B(a)};Sa.insert=function(c,a){2>arguments.length&&(a=V(this));return oa.insert.call(this,c,a)};oa.transition=function(){for(var c=sb||++Wf,a=[],f,b,g=Ac||{time:Date.now(),ease:bh,delay:0,duration:250},l=-1,e=this.length;++l<e;){a.push(f=[]);for(var x=this[l],p=-1,h=x.length;++p<h;)(b=x[p])&&xc(b,p,c,g),f.push(b)}return Sb(a,c)};oa.interrupt=function(){return this.each(p)};w.select=function(c){c=["string"===typeof c?Pc(c,Oa):c];c.parentNode=Va;return B([c])};w.selectAll=
function(c){c=cb("string"===typeof c?Qc(c,Oa):c);c.parentNode=Va;return B([c])};var Vf=w.select(Va);oa.on=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==typeof c){2>b&&(a=!1);for(f in c)this.each(S(f,c[f],a));return this}if(2>b)return(b=this.node()["__on"+c])&&b._;f=!1}return this.each(S(c,a,f))};var Rc=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});Rc.forEach(function(c){"on"+c in Oa&&Rc.remove(c)});var Fb="onselectstart"in Oa?null:A(Va.style,"userSelect"),mg=0;w.mouse=function(c){return X(c,
T())};var Sc=/WebKit/.test(za.navigator.userAgent)?-1:0;w.touches=function(c,a){2>arguments.length&&(a=T().touches);return a?cb(a).map(function(a){var b=X(c,a);b.identifier=a.identifier;return b}):[]};w.behavior.drag=function(){function c(){this.on("mousedown.drag",g).on("touchstart.drag",l)}function a(c,r,g,l,e){return function(){var a=w.event.target,p=this.parentNode,h=f.of(this,arguments),k=0,m=c(),v=".drag"+(null==m?"":"-"+m),s,q=w.select(g()).on(l+v,function(){var c=r(p,m),a,f;c&&(a=c[0]-y[0],
f=c[1]-y[1],k=k|a|f,y=c,h({type:"drag",x:c[0]+s[0],y:c[1]+s[1],dx:a,dy:f}))}).on(e+v,function(){r(p,m)&&(q.on(l+v,null).on(e+v,null),t(k&&w.event.target===a),h({type:"dragend"}))}),t=la(),y=r(p,m);b?(s=b.apply(this,arguments),s=[s.x-y[0],s.y-y[1]]):s=[0,0];h({type:"dragstart"})}}var f=Q(c,"drag","dragstart","dragend"),b=null,g=a(z,w.mouse,aa,"mousemove","mouseup"),l=a(ga,w.touch,ka,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return b;b=a;return c};return w.rebind(c,f,"on")};
var ia=Math.PI,Fa=2*ia,xa=ia/2,Z=1E-6,od=Z*Z,ha=ia/180,sa=180/ia,Bc=Math.SQRT2;w.interpolateZoom=function(c,a){function f(c){var a=c*t;if(q){c=qa(s);var f=l/(2*m),r,e=Bc*a+s;r=((e=Math.exp(2*e))-1)/(e+1);r*=c;var k=s,e=((k=Math.exp(k))-1/k)/2,f=f*(r-e);return[b+f*p,g+f*h,l*c/qa(Bc*a+s)]}return[b+c*p,g+c*h,l*Math.exp(Bc*a)]}var b=c[0],g=c[1],l=c[2],e=a[2],p=a[0]-b,h=a[1]-g,k=p*p+h*h,m=Math.sqrt(k),v=(e*e-l*l+4*k)/(4*l*m),k=(e*e-l*l-4*k)/(4*e*m),s=Math.log(Math.sqrt(v*v+1)-v),q=Math.log(Math.sqrt(k*
k+1)-k)-s,t=(q||Math.log(e/l))/Bc;f.duration=1E3*t;return f};w.behavior.zoom=function(){function c(c){c.on(B,h).on(Zh+".zoom",m).on(F,v).on("dblclick.zoom",s).on(u,k)}function a(c){return[(c[0]-q.x)/q.k,(c[1]-q.y)/q.k]}function f(c){q.k=Math.max(S[0],Math.min(S[1],c))}function b(c,a){a=[a[0]*q.k+q.x,a[1]*q.k+q.y];q.x+=c[0]-a[0];q.y+=c[1]-a[1]}function g(){z&&z.domain(M.range().map(function(c){return(c-q.x)/q.k}).map(M.invert));H&&H.domain(A.range().map(function(c){return(c-q.y)/q.k}).map(A.invert))}
function l(c){c({type:"zoomstart"})}function e(c){g();c({type:"zoom",scale:q.k,translate:[q.x,q.y]})}function x(c){c({type:"zoomend"})}function h(){var c=this,f=w.event.target,g=C.of(c,arguments),k=0,m=w.select(za).on(F,function(){k=1;b(w.mouse(c),q);e(g)}).on(J,function(){m.on(F,za===c?v:null).on(J,null);s(k&&w.event.target===f);x(g)}),q=a(w.mouse(c)),s=la();p.call(c);l(g)}function k(){function c(){var f=w.touches(s);S=q.k;f.forEach(function(c){c.identifier in y&&(y[c.identifier]=a(c))});return f}
function g(){var a=w.event.target;w.select(a).on(J,m).on(L,v);M.push(a);for(var a=w.event.changedTouches,r=0,l=a.length;r<l;++r)y[a[r].identifier]=null;l=c();r=Date.now();1===l.length?(500>r-W&&(a=l[0],l=y[a.identifier],f(2*q.k),b(a,l),K(),e(t)),W=r):1<l.length&&(a=l[0],l=l[1],r=a[0]-l[0],a=a[1]-l[1],E=r*r+a*a)}function m(){for(var c=w.touches(s),a,r,g,l,p=0,x=c.length;p<x;++p,l=null)if(g=c[p],l=y[g.identifier]){if(r)break;a=g;r=l}if(l){var h=(h=g[0]-a[0])*h+(h=g[1]-a[1])*h,c=E&&Math.sqrt(h/E);a=
[(a[0]+g[0])/2,(a[1]+g[1])/2];r=[(r[0]+l[0])/2,(r[1]+l[1])/2];f(c*S)}W=null;b(a,r);e(t)}function v(){if(w.event.touches.length){for(var a=w.event.changedTouches,f=0,b=a.length;f<b;++f)delete y[a[f].identifier];for(var r in y)return void c()}w.selectAll(M).on(F,null);z.on(B,h).on(u,k);A();x(t)}var s=this,t=C.of(s,arguments),y={},E=0,S,F=".zoom-"+w.event.changedTouches[0].identifier,J="touchmove"+F,L="touchend"+F,M=[],z=w.select(s).on(B,null).on(u,g),A=la();p.call(s);g();l(t)}function m(){var c=C.of(this,
arguments);L?clearTimeout(L):(p.call(this),l(c));L=setTimeout(function(){L=null;x(c)},50);K();var g=y||w.mouse(this);t||(t=a(g));f(Math.pow(2,.002*Cc())*q.k);b(g,t);e(c)}function v(){t=null}function s(){var c=C.of(this,arguments),g=w.mouse(this),p=a(g),h=Math.log(q.k)/Math.LN2;l(c);f(Math.pow(2,w.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1));b(g,p);e(c);x(c)}var q={x:0,y:0,k:1},t,y,E=[960,500],S=Xf,B="mousedown.zoom",F="mousemove.zoom",J="mouseup.zoom",L,u="touchstart.zoom",W,C=Q(c,"zoomstart",
"zoom","zoomend"),M,z,A,H;c.event=function(c){c.each(function(){var c=C.of(this,arguments),a=q;sb?w.select(this).transition().each("start.zoom",function(){q=this.__chart__||{x:0,y:0,k:1};l(c)}).tween("zoom:zoom",function(){var f=E[0],b=f/2,r=E[1]/2,n=w.interpolateZoom([(b-q.x)/q.k,(r-q.y)/q.k,f/q.k],[(b-a.x)/a.k,(r-a.y)/a.k,f/a.k]);return function(a){a=n(a);var g=f/a[2];this.__chart__=q={x:b-a[0]*g,y:r-a[1]*g,k:g};e(c)}}).each("end.zoom",function(){x(c)}):(this.__chart__=q,l(c),e(c),x(c))})};c.translate=
function(a){if(!arguments.length)return[q.x,q.y];q={x:+a[0],y:+a[1],k:q.k};g();return c};c.scale=function(a){if(!arguments.length)return q.k;q={x:q.x,y:q.y,k:+a};g();return c};c.scaleExtent=function(a){if(!arguments.length)return S;S=null==a?Xf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return y;y=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return E;E=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return z;z=a;M=a.copy();q={x:0,y:0,k:1};
return c};c.y=function(a){if(!arguments.length)return H;H=a;A=a.copy();q={x:0,y:0,k:1};return c};return w.rebind(c,C,"on")};var Xf=[0,Infinity],Cc,Zh="onwheel"in Oa?(Cc=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Oa?(Cc=function(){return w.event.wheelDelta},"mousewheel"):(Cc=function(){return-w.event.detail},"MozMousePixelScroll");w.color=ua;ua.prototype.toString=function(){return this.rgb()+""};w.hsl=pa;var Nd=pa.prototype=new ua;Nd.brighter=function(c){c=
Math.pow(.7,arguments.length?c:1);return new pa(this.h,this.s,this.l/c)};Nd.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new pa(this.h,this.s,c*this.l)};Nd.rgb=function(){return Wa(this.h,this.s,this.l)};w.hcl=Ca;var Od=Ca.prototype=new ua;Od.brighter=function(c){return new Ca(this.h,this.c,Math.min(100,this.l+Dc*(arguments.length?c:1)))};Od.darker=function(c){return new Ca(this.h,this.c,Math.max(0,this.l-Dc*(arguments.length?c:1)))};Od.rgb=function(){return Tc(this.h,this.c,this.l).rgb()};
w.lab=La;var Dc=18,ae=.95047,be=1,ce=1.08883,Pd=La.prototype=new ua;Pd.brighter=function(c){return new La(Math.min(100,this.l+Dc*(arguments.length?c:1)),this.a,this.b)};Pd.darker=function(c){return new La(Math.max(0,this.l-Dc*(arguments.length?c:1)),this.a,this.b)};Pd.rgb=function(){return $d(this.l,this.a,this.b)};w.rgb=Aa;var Ec=Aa.prototype=new ua;Ec.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);var a=this.r,f=this.g,b=this.b;if(!a&&!f&&!b)return new Aa(30,30,30);a&&30>a&&(a=30);f&&
30>f&&(f=30);b&&30>b&&(b=30);return new Aa(Math.min(255,a/c),Math.min(255,f/c),Math.min(255,b/c))};Ec.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Aa(c*this.r,c*this.g,c*this.b)};Ec.hsl=function(){return Xd(this.r,this.g,this.b)};Ec.toString=function(){return"#"+tb(this.r)+tb(this.g)+tb(this.b)};var Wb=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wb.forEach(function(c,a){Wb.set(c,
new Aa(a>>16,a>>8&255,a&255))});w.functor=ra;w.xhr=Zc(wa);w.dsv=function(c,a){function f(c,f,l){3>arguments.length&&(l=f,f=null);var e=Xb(c,a,null==f?b:g(f),l);e.row=function(c){return arguments.length?e.response(null==(f=c)?b:g(c)):f};return e}function b(c){return f.parse(c.responseText)}function g(c){return function(a){return f.parse(a.responseText,c)}}function l(a){return a.map(e).join(c)}function e(c){return p.test(c)?'"'+c.replace(/\"/g,'""')+'"':c}var p=new RegExp('["'+c+"\n]"),h=c.charCodeAt(0);
f.parse=function(c,a){var b;return f.parseRows(c,function(c,f){if(b)return b(c,f-1);var r=new Function("d","return {"+c.map(function(c,a){return JSON.stringify(c)+": d["+a+"]"}).join(",")+"}");b=a?function(c,f){return a(r(c),f)}:r})};f.parseRows=function(c,a){function f(){if(l>=g)return r;if(x)return x=!1,b;var a=l;if(34===c.charCodeAt(a)){for(var n=a;n++<g;)if(34===c.charCodeAt(n)){if(34!==c.charCodeAt(n+1))break;++n}l=n+2;var e=c.charCodeAt(n+1);13===e?(x=!0,10===c.charCodeAt(n+2)&&++l):10===e&&
(x=!0);return c.substring(a+1,n).replace(/""/g,'"')}for(;l<g;){e=c.charCodeAt(l++);n=1;if(10===e)x=!0;else if(13===e)x=!0,10===c.charCodeAt(l)&&(++l,++n);else if(e!==h)continue;return c.substring(a,l-n)}return c.substring(a)}for(var b={},r={},n=[],g=c.length,l=0,e=0,p,x;(p=f())!==r;){for(var k=[];p!==b&&p!==r;)k.push(p),p=f();a&&!(k=a(k,e++))||n.push(k)}return n};f.format=function(a){if(Array.isArray(a[0]))return f.formatRows(a);var b=new q,r=[];a.forEach(function(c){for(var a in c)b.has(a)||r.push(b.add(a))});
return[r.map(e).join(c)].concat(a.map(function(a){return r.map(function(c){return e(a[c])}).join(c)})).join("\n")};f.formatRows=function(c){return c.map(l).join("\n")};return f};w.csv=w.dsv(",","text/csv");w.tsv=w.dsv("\t","text/tab-separated-values");w.touch=function(c,a,f){3>arguments.length&&(f=a,a=T().changedTouches);if(a)for(var b=0,g=a.length,l;b<g;++b)if((l=a[b]).identifier===f)return X(c,l)};var $b,ac,Zb,Yb,Xa,fe=za[A(za,"requestAnimationFrame")]||function(c){setTimeout(c,17)};w.timer=function(c,
a,f){var b=arguments.length;2>b&&(a=0);3>b&&(f=Date.now());b={c:c,t:f+a,f:!1,n:null};ac?ac.n=b:$b=b;ac=b;Zb||(Yb=clearTimeout(Yb),Zb=1,fe($c))};w.timer.flush=function(){de();ee()};w.round=function(c,a){return a?Math.round(c*(a=Math.pow(10,a)))/a:Math.round(c)};var $h="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(c,a){var f=Math.pow(10,3*ja(8-a));return{scale:8<a?function(c){return c/f}:function(c){return c*f},symbol:c}});w.formatPrefix=function(c,a){var f=0;c&&(0>c&&(c*=-1),a&&(c=
w.round(c,ad(c,a))),f=1+Math.floor(1E-12+Math.log(c)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3))));return $h[8+f/3]};var ge=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pg=w.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,a){return c.toPrecision(a)},e:function(c,a){return c.toExponential(a)},
f:function(c,a){return c.toFixed(a)},r:function(c,a){return(c=w.round(c,ad(c,a))).toFixed(Math.max(0,Math.min(20,ad(c*(1+1E-15),a))))}}),$=w.time={},ya=Date;Ya.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bb.setUTCDate.apply(this._,arguments)},setDay:function(){bb.setUTCDay.apply(this._,arguments)},setFullYear:function(){bb.setUTCFullYear.apply(this._,arguments)},setHours:function(){bb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){bb.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){bb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bb.setUTCSeconds.apply(this._,arguments)},setTime:function(){bb.setTime.apply(this._,arguments)}};var bb=Date.prototype;$.year=kb(function(c){c=$.day(c);c.setMonth(0,1);return c},function(c,a){c.setFullYear(c.getFullYear()+a)},function(c){return c.getFullYear()});$.years=$.year.range;$.years.utc=$.year.utc.range;$.day=kb(function(c){var a=new ya(2E3,0);a.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());
return a},function(c,a){c.setDate(c.getDate()+a)},function(c){return c.getDate()-1});$.days=$.day.range;$.days.utc=$.day.utc.range;$.dayOfYear=function(c){var a=$.year(c);return Math.floor((c-a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(c,a){a=7-a;var f=$[c]=kb(function(c){(c=$.day(c)).setDate(c.getDate()-(c.getDay()+a)%7);return c},function(c,a){c.setDate(c.getDate()+7*Math.floor(a))},function(c){var f=
$.year(c).getDay();return Math.floor(($.dayOfYear(c)+(f+a)%7)/7)-(f!==a)});$[c+"s"]=f.range;$[c+"s"].utc=f.utc.range;$[c+"OfYear"]=function(c){var f=$.year(c).getDay();return Math.floor(($.dayOfYear(c)+(f+a)%7)/7)}});$.week=$.sunday;$.weeks=$.sunday.range;$.weeks.utc=$.sunday.utc.range;$.weekOfYear=$.sundayOfYear;var he={"-":"",_:" ",0:"0"},ta=/^\s*\d+/,ke=/^%/;w.locale=function(c){return{numberFormat:og(c),timeFormat:rg(c)}};var Yf=w.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});w.format=Yf.numberFormat;w.geo={};bd.prototype={s:0,t:0,add:function(c){le(c,this.t,Fc);le(Fc.s,this.s,this);this.s?
this.t+=Fc.t:this.s=Fc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Fc=new bd;w.geo.stream=function(c,a){if(c&&Zf.hasOwnProperty(c.type))Zf[c.type](c,a);else ec(c,a)};var Zf={Feature:function(c,a){ec(c.geometry,a)},FeatureCollection:function(c,a){for(var f=c.features,b=-1,g=f.length;++b<g;)ec(f[b].geometry,a)}},me={Sphere:function(c,a){a.sphere()},Point:function(c,a){c=c.coordinates;a.point(c[0],c[1],c[2])},MultiPoint:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<
g;)c=f[b],a.point(c[0],c[1],c[2])},LineString:function(c,a){cd(c.coordinates,a,0)},MultiLineString:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<g;)cd(f[b],a,0)},Polygon:function(c,a){ne(c.coordinates,a)},MultiPolygon:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<g;)ne(f[b],a)},GeometryCollection:function(c,a){for(var f=c.geometries,b=-1,g=f.length;++b<g;)ec(f[b],a)}};w.geo.area=function(c){Db=0;w.geo.stream(c,Ea);return Db};var Db,lb=new bd,Ea={sphere:function(){Db+=4*ia},
point:z,lineStart:z,lineEnd:z,polygonStart:function(){lb.reset();Ea.lineStart=Gg},polygonEnd:function(){var c=2*lb;Db+=0>c?4*ia+c:c;Ea.lineStart=Ea.lineEnd=Ea.point=z}};w.geo.bounds=function(){function c(c,a){F.push(J=[m=c,q=c]);a<v&&(v=a);a>s&&(s=a)}function a(f,b){var g=mb([f*ha,b*ha]);if(S){var r=ub(S,g),r=ub([r[1],-r[0],0],r);hc(r);var r=ic(r),l=f-t,n=0<l?1:-1,e=r[0]*sa*n,l=180<ja(l);l^(n*t<e&&e<n*f)?(r=r[1]*sa,r>s&&(s=r)):(e=(e+360)%360-180,l^(n*t<e&&e<n*f))?(r=-r[1]*sa,r<v&&(v=r)):(b<v&&(v=
b),b>s&&(s=b));l?f<t?p(m,f)>p(m,q)&&(q=f):p(f,q)>p(m,q)&&(m=f):q>=m?(f<m&&(m=f),f>q&&(q=f)):f>t?p(m,f)>p(m,q)&&(q=f):p(f,q)>p(m,q)&&(m=f)}else c(f,b);S=g;t=f}function f(){L.point=a}function b(){J[0]=m;J[1]=q;L.point=c;S=null}function g(c,f){if(S){var b=c-t;B+=180<ja(b)?b+(0<b?360:-360):b}else y=c,E=f;Ea.point(c,f);a(c,f)}function l(){Ea.lineStart()}function e(){g(y,E);Ea.lineEnd();ja(B)>Z&&(m=-(q=180));J[0]=m;J[1]=q;S=null}function p(c,a){return 0>(a-=c)?a+360:a}function h(c,a){return c[0]-a[0]}function k(c,
a){return a[0]<=a[1]?a[0]<=c&&c<=a[1]:c<a[0]||a[1]<c}var m,v,q,s,t,y,E,S,B,F,J,L={point:c,lineStart:f,lineEnd:b,polygonStart:function(){L.point=g;L.lineStart=l;L.lineEnd=e;B=0;Ea.polygonStart()},polygonEnd:function(){Ea.polygonEnd();L.point=c;L.lineStart=f;L.lineEnd=b;0>lb?(m=-(q=180),v=-(s=90)):B>Z?s=90:B<-Z&&(v=-90);J[0]=m;J[1]=q}};return function(c){s=q=-(m=v=Infinity);F=[];w.geo.stream(c,L);if(c=F.length){F.sort(h);for(var a=1,f=F[0],b,r=[f];a<c;++a)b=F[a],k(b[0],f)||k(b[1],f)?(p(f[0],b[1])>p(f[0],
f[1])&&(f[1]=b[1]),p(b[0],f[1])>p(f[0],f[1])&&(f[0]=b[0])):r.push(f=b);var g=-Infinity,l;c=r.length-1;a=0;for(f=r[c];a<=c;f=b,++a)b=r[a],(l=p(f[1],b[0]))>g&&(g=l,m=b[0],q=f[1])}F=J=null;return Infinity===m||Infinity===v?[[NaN,NaN],[NaN,NaN]]:[[m,v],[q,s]]}}();w.geo.centroid=function(c){Hb=vb=Za=$a=Pa=Ha=Ia=Da=db=eb=Qa=0;w.geo.stream(c,Ma);c=db;var a=eb,f=Qa,b=c*c+a*a+f*f;return b<od&&(c=Ha,a=Ia,f=Da,vb<Z&&(c=Za,a=$a,f=Pa),b=c*c+a*a+f*f,b<od)?[NaN,NaN]:[Math.atan2(a,c)*sa,ba(f/Math.sqrt(b))*sa]};var Hb,
vb,Za,$a,Pa,Ha,Ia,Da,db,eb,Qa,Ma={sphere:z,point:ed,lineStart:oe,lineEnd:pe,polygonStart:function(){Ma.lineStart=Hg},polygonEnd:function(){Ma.lineStart=oe}},Fe=se(wb,function(c){var a=NaN,f=NaN,b=NaN,g;return{lineStart:function(){c.lineStart();g=1},point:function(l,e){var p=0<l?ia:-ia,h=ja(l-a);if(ja(h-ia)<Z)c.point(a,f=0<(f+e)/2?xa:-xa),c.point(b,f),c.lineEnd(),c.lineStart(),c.point(p,f),c.point(l,f),g=0;else if(b!==p&&h>=ia){ja(a-b)<Z&&(a-=b*Z);ja(l-p)<Z&&(l-=p*Z);var h=a,k=f,m=l,q,v,s=Math.sin(h-
m);f=ja(s)>Z?Math.atan((Math.sin(k)*(v=Math.cos(e))*Math.sin(m)-Math.sin(e)*(q=Math.cos(k))*Math.sin(h))/(q*v*s)):(k+e)/2;c.point(b,f);c.lineEnd();c.lineStart();c.point(p,f);g=0}c.point(a=l,f=e);b=p},lineEnd:function(){c.lineEnd();a=f=NaN},clean:function(){return 2-g}}},function(c,a,f,b){null==c?(f*=xa,b.point(-ia,f),b.point(0,f),b.point(ia,f),b.point(ia,0),b.point(ia,-f),b.point(0,-f),b.point(-ia,-f),b.point(-ia,0),b.point(-ia,f)):ja(c[0]-a[0])>Z?(c=c[0]<a[0]?ia:-ia,f=f*c/2,b.point(-c,f),b.point(0,
f),b.point(c,f)):b.point(a[0],a[1])},[-ia,-ia/2]),lc=1E9;w.geo.clipExtent=function(){var c,a,f,b,g,l,e={stream:function(c){g&&(g.valid=!1);g=l(c);g.valid=!0;return g},extent:function(p){if(!arguments.length)return[[c,a],[f,b]];l=ve(c=+p[0][0],a=+p[0][1],f=+p[1][0],b=+p[1][1]);g&&(g.valid=!1,g=null);return e}};return e.extent([[0,0],[960,500]])};(w.geo.conicEqualArea=function(){return gd(xe)}).raw=xe;w.geo.albers=function(){return w.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,
45.5]).scale(1070)};w.geo.albersUsa=function(){function c(c){var a=c[0];c=c[1];g=null;(e(a,c),g)||(p(a,c),g)||h(a,c);return g}var a=w.geo.albers(),f=w.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),b=w.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,l={point:function(c,a){g=[c,a]}},e,p,h;c.invert=function(c){var g=a.scale(),l=a.translate(),e=(c[0]-l[0])/g,g=(c[1]-l[1])/g;return(.12<=g&&.234>g&&-.425<=e&&-.214>e?f:.166<=g&&.234>g&&-.214<=e&&-.115>
e?b:a).invert(c)};c.stream=function(c){var g=a.stream(c),l=f.stream(c),e=b.stream(c);return{point:function(c,a){g.point(c,a);l.point(c,a);e.point(c,a)},sphere:function(){g.sphere();l.sphere();e.sphere()},lineStart:function(){g.lineStart();l.lineStart();e.lineStart()},lineEnd:function(){g.lineEnd();l.lineEnd();e.lineEnd()},polygonStart:function(){g.polygonStart();l.polygonStart();e.polygonStart()},polygonEnd:function(){g.polygonEnd();l.polygonEnd();e.polygonEnd()}}};c.precision=function(g){if(!arguments.length)return a.precision();
a.precision(g);f.precision(g);b.precision(g);return c};c.scale=function(g){if(!arguments.length)return a.scale();a.scale(g);f.scale(.35*g);b.scale(g);return c.translate(a.translate())};c.translate=function(g){if(!arguments.length)return a.translate();var k=a.scale(),m=+g[0],q=+g[1];e=a.translate(g).clipExtent([[m-.455*k,q-.238*k],[m+.455*k,q+.238*k]]).stream(l).point;p=f.translate([m-.307*k,q+.201*k]).clipExtent([[m-.425*k+Z,q+.12*k+Z],[m-.214*k-Z,q+.234*k-Z]]).stream(l).point;h=b.translate([m-.205*
k,q+.212*k]).clipExtent([[m-.214*k+Z,q+.166*k+Z],[m-.115*k-Z,q+.234*k-Z]]).stream(l).point;return c};return c.scale(1070)};var Gc,mc,fb={point:z,lineStart:z,lineEnd:z,polygonStart:function(){mc=0;fb.lineStart=Lg},polygonEnd:function(){fb.lineStart=fb.lineEnd=fb.point=z;Gc+=ja(mc/2)}},Hc,Ic,Jc,Kc,ai={point:function(c,a){c<Hc&&(Hc=c);c>Jc&&(Jc=c);a<Ic&&(Ic=a);a>Kc&&(Kc=a)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z},Na={point:nb,lineStart:ze,lineEnd:Ae,polygonStart:function(){Na.lineStart=Ng},
polygonEnd:function(){Na.point=nb;Na.lineStart=ze;Na.lineEnd=Ae}};w.geo.path=function(){function c(c){c&&("function"===typeof f&&e.pointRadius(+f.apply(this,arguments)),p&&p.valid||(p=l(e)),w.geo.stream(c,p));return e.result()}function a(){p=null;return c}var f=4.5,b,g,l,e,p;c.area=function(c){Gc=0;w.geo.stream(c,l(fb));return Gc};c.centroid=function(c){Za=$a=Pa=Ha=Ia=Da=db=eb=Qa=0;w.geo.stream(c,l(Na));return Qa?[db/Qa,eb/Qa]:Da?[Ha/Da,Ia/Da]:Pa?[Za/Pa,$a/Pa]:[NaN,NaN]};c.bounds=function(c){Jc=Kc=
-(Hc=Ic=Infinity);w.geo.stream(c,l(ai));return[[Hc,Ic],[Jc,Kc]]};c.projection=function(c){if(!arguments.length)return b;l=(b=c)?c.stream||Pg(c):wa;return a()};c.context=function(c){if(!arguments.length)return g;e=null==(g=c)?new Mg:new Og(c);"function"!==typeof f&&e.pointRadius(f);return a()};c.pointRadius=function(a){if(!arguments.length)return f;f="function"===typeof a?a:(e.pointRadius(+a),+a);return c};return c.projection(w.geo.albersUsa()).context(null)};w.geo.transform=function(c){return{stream:function(a){a=
new Ee(a);for(var f in c)a[f]=c[f];return a}}};Ee.prototype={point:function(c,a){this.stream.point(c,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};w.geo.projection=gb;w.geo.projectionMutator=hd;(w.geo.equirectangular=function(){return gb(Ib)}).raw=Ib.invert=Ib;w.geo.rotation=function(c){function a(f){f=c(f[0]*ha,
f[1]*ha);return f[0]*=sa,f[1]*=sa,f}c=id(c[0]%360*ha,c[1]*ha,2<c.length?c[2]*ha:0);a.invert=function(a){a=c.invert(a[0]*ha,a[1]*ha);return a[0]*=sa,a[1]*=sa,a};return a};Ge.invert=Ib;w.geo.circle=function(){function c(){var c="function"===typeof a?a.apply(this,arguments):a,f=id(-c[0]*ha,-c[1]*ha,0).invert,b=[];g(null,null,1,{point:function(c,a){b.push(c=f(c,a));c[0]*=sa;c[1]*=sa}});return{type:"Polygon",coordinates:[b]}}var a=[0,0],f,b=6,g;c.origin=function(f){if(!arguments.length)return a;a=f;return c};
c.angle=function(a){if(!arguments.length)return f;g=fd((f=+a)*ha,b*ha);return c};c.precision=function(a){if(!arguments.length)return b;g=fd(f*ha,(b=+a)*ha);return c};return c.angle(90)};w.geo.distance=function(c,a){var f=(a[0]-c[0])*ha,b=c[1]*ha,g=a[1]*ha,l=Math.sin(f),f=Math.cos(f),e=Math.sin(b),b=Math.cos(b),p=Math.sin(g),g=Math.cos(g),h;return Math.atan2(Math.sqrt((h=g*l)*h+(h=b*p-e*g*f)*h),e*p+b*g*f)};w.geo.graticule=function(){function c(){return{type:"MultiLineString",coordinates:a()}}function a(){return w.range(Math.ceil(l/
v)*v,g,v).map(E).concat(w.range(Math.ceil(k/s)*s,h,s).map(S)).concat(w.range(Math.ceil(b/m)*m,f,m).filter(function(c){return ja(c%v)>Z}).map(t)).concat(w.range(Math.ceil(p/q)*q,e,q).filter(function(c){return ja(c%s)>Z}).map(y))}var f,b,g,l,e,p,h,k,m=10,q=m,v=90,s=360,t,y,E,S,B=2.5;c.lines=function(){return a().map(function(c){return{type:"LineString",coordinates:c}})};c.outline=function(){return{type:"Polygon",coordinates:[E(l).concat(S(h).slice(1),E(g).reverse().slice(1),S(k).reverse().slice(1))]}};
c.extent=function(a){return arguments.length?c.majorExtent(a).minorExtent(a):c.minorExtent()};c.majorExtent=function(a){if(!arguments.length)return[[l,k],[g,h]];l=+a[0][0];g=+a[1][0];k=+a[0][1];h=+a[1][1];l>g&&(a=l,l=g,g=a);k>h&&(a=k,k=h,h=a);return c.precision(B)};c.minorExtent=function(a){if(!arguments.length)return[[b,p],[f,e]];b=+a[0][0];f=+a[1][0];p=+a[0][1];e=+a[1][1];b>f&&(a=b,b=f,f=a);p>e&&(a=p,p=e,e=a);return c.precision(B)};c.step=function(a){return arguments.length?c.majorStep(a).minorStep(a):
c.minorStep()};c.majorStep=function(a){if(!arguments.length)return[v,s];v=+a[0];s=+a[1];return c};c.minorStep=function(a){if(!arguments.length)return[m,q];m=+a[0];q=+a[1];return c};c.precision=function(a){if(!arguments.length)return B;B=+a;t=Le(p,e,90);y=Me(b,f,B);E=Le(k,h,90);S=Me(l,g,B);return c};return c.majorExtent([[-180,-90+Z],[180,90-Z]]).minorExtent([[-180,-80-Z],[180,80+Z]])};w.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[f||b.apply(this,arguments),g||n.apply(this,
arguments)]}}var b=jd,f,n=kd,g;a.distance=function(){return w.geo.distance(f||b.apply(this,arguments),g||n.apply(this,arguments))};a.source=function(g){if(!arguments.length)return b;b=g;f="function"===typeof g?null:g;return a};a.target=function(b){if(!arguments.length)return n;n=b;g="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?a:0};return a};w.geo.interpolate=function(a,b){return Qg(a[0]*ha,a[1]*ha,b[0]*ha,b[1]*ha)};w.geo.length=function(a){Lc=0;w.geo.stream(a,
Eb);return Lc};var Lc,Eb={sphere:z,point:z,lineStart:function(){function a(c,l){var e=Math.sin(l*=ha),p=Math.cos(l),h=ja((c*=ha)-b),k=Math.cos(h);Lc+=Math.atan2(Math.sqrt((h=p*Math.sin(h))*h+(h=n*e-f*p*k)*h),f*e+n*p*k);b=c;f=e;n=p}var b,f,n;Eb.point=function(g,l){b=g*ha;f=Math.sin(l*=ha);n=Math.cos(l);Eb.point=a};Eb.lineEnd=function(){Eb.point=Eb.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z},$f=Jb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(w.geo.azimuthalEqualArea=
function(){return gb($f)}).raw=$f;var ag=Jb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},wa);(w.geo.azimuthalEquidistant=function(){return gb(ag)}).raw=ag;(w.geo.conicConformal=function(){return gd(Ne)}).raw=Ne;(w.geo.conicEquidistant=function(){return gd(Oe)}).raw=Oe;var bg=Jb(function(a){return 1/a},Math.atan);(w.geo.gnomonic=function(){return gb(bg)}).raw=bg;nc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-xa]};(w.geo.mercator=function(){return Pe(nc)}).raw=nc;var cg=Jb(function(){return 1},
Math.asin);(w.geo.orthographic=function(){return gb(cg)}).raw=cg;var dg=Jb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(w.geo.stereographic=function(){return gb(dg)}).raw=dg;ld.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-xa]};(w.geo.transverseMercator=function(){var a=Pe(ld),b=a.center,f=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?f([a[0],a[1],2<a.length?a[2]+90:90]):(a=f(),[a[0],a[1],a[2]-90])};return a.rotate([0,
0])}).raw=ld;w.geom={};w.geom.hull=function(a){function b(a){if(3>a.length)return[];var c=ra(f),r=ra(n),e,p=a.length,h=[],k=[];for(e=0;e<p;e++)h.push([+c.call(this,a[e],e),+r.call(this,a[e],e),e]);h.sort(Rg);for(e=0;e<p;e++)k.push([h[e][0],-h[e][1]]);var c=Qe(h),k=Qe(k),r=k[0]===c[0],p=k[k.length-1]===c[c.length-1],m=[];for(e=c.length-1;0<=e;--e)m.push(a[h[c[e]][2]]);for(e=+r;e<k.length-p;++e)m.push(a[h[k[e]][2]]);return m}var f=xb,n=Kb;if(arguments.length)return b(a);b.x=function(a){return arguments.length?
(f=a,b):f};b.y=function(a){return arguments.length?(n=a,b):n};return b};w.geom.polygon=function(a){Ub(a,Mc);return a};var Mc=w.geom.polygon.prototype=[];Mc.area=function(){for(var a=-1,b=this.length,f,n=this[b-1],g=0;++a<b;)f=n,n=this[a],g+=f[1]*n[0]-f[0]*n[1];return.5*g};Mc.centroid=function(a){var b=-1,f=this.length,n=0,g=0,l,e=this[f-1],p;for(arguments.length||(a=-1/(6*this.area()));++b<f;)l=e,e=this[b],p=l[0]*e[1]-e[0]*l[1],n+=(l[0]+e[0])*p,g+=(l[1]+e[1])*p;return[n*a,g*a]};Mc.clip=function(a){for(var b,
f=Se(a),n=-1,g=this.length-Se(this),l,e,p=this[g-1],h,k,m;++n<g;){b=a.slice();a.length=0;h=this[n];k=b[(e=b.length-f)-1];for(l=-1;++l<e;)m=b[l],md(m,p,h)?(md(k,p,h)||a.push(Re(k,m,p,h)),a.push(m)):md(k,p,h)&&a.push(Re(k,m,p,h)),k=m;f&&a.push(a[0]);p=h}return a};var Bb,ob,zb,Ue=[],pd,Lb,Ye=[];We.prototype.prepare=function(){for(var a=this.edges,b=a.length,f;b--;)f=a[b].edge,f.b&&f.a||a.splice(b,1);a.sort(Xe);return a.length};qc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:
this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};qd.prototype={insert:function(a,b){var f,n,g;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;f=a}else this._?(a=$e(this._),b.P=null,b.N=a,a.P=a.L=b,f=a):(b.P=b.N=null,this._=b,f=null);b.L=b.R=null;b.U=f;b.C=!0;for(a=b;f&&f.C;)n=f.U,f===n.L?(g=n.R)&&g.C?(f.C=g.C=!1,n.C=!0,a=n):(a===f.R&&(Nb(this,f),a=f,f=a.U),f.C=!1,n.C=!0,Ob(this,n)):(g=n.L)&&g.C?(f.C=g.C=!1,n.C=!0,a=n):(a===f.L&&
(Ob(this,f),a=f,f=a.U),f.C=!1,n.C=!0,Nb(this,n)),f=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,f=a.L,n=a.R,g,l;g=f?n?$e(n):f:n;b?b.L===a?b.L=g:b.R=g:this._=g;f&&n?(l=g.C,g.C=a.C,g.L=f,f.U=g,g!==n?(b=g.U,g.U=a.U,a=g.R,b.L=a,g.R=n,n.U=g):(g.U=b,b=g,a=g.R)):(l=a.C,a=g);a&&(a.U=b);if(!l)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Nb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Ob(this,a),
a=b.R);a.C=b.C;b.C=a.R.C=!1;Nb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Ob(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Nb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Ob(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};w.geom.voronoi=function(a){function b(a){var c=Array(a.length),g=p[0][0],l=p[0][1],n=p[1][0],e=p[1][1];rd(f(a),p).cells.forEach(function(b,f){var r=b.edges,p=b.site;(c[f]=r.length?r.map(function(a){a=a.start();return[a.x,a.y]}):p.x>=
g&&p.x<=n&&p.y>=l&&p.y<=e?[[g,e],[n,e],[n,l],[g,l]]:[]).point=a[f]});return c}function f(a){return a.map(function(a,c){return{x:Math.round(l(a,c)/Z)*Z,y:Math.round(e(a,c)/Z)*Z,i:c}})}var n=xb,g=Kb,l=n,e=g,p=Nc;if(a)return b(a);b.links=function(a){return rd(f(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};b.triangles=function(a){var c=[];rd(f(a)).cells.forEach(function(b,f){for(var g=b.site,l=b.edges.sort(Xe),n=-1,e=l.length,r,p=l[e-1].edge,
p=p.l===g?p.r:p.l;++n<e;)r=p,p=l[n].edge,p=p.l===g?p.r:p.l,f<r.i&&f<p.i&&0>(g.x-p.x)*(r.y-g.y)-(g.x-r.x)*(p.y-g.y)&&c.push([a[f],a[r.i],a[p.i]])});return c};b.x=function(a){return arguments.length?(l=ra(n=a),b):n};b.y=function(a){return arguments.length?(e=ra(g=a),b):g};b.clipExtent=function(a){if(!arguments.length)return p===Nc?null:p;p=null==a?Nc:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):p===Nc?null:p&&p[1]};return b};var Nc=[[-1E6,-1E6],[1E6,1E6]];w.geom.delaunay=
function(a){return w.geom.voronoi().triangles(a)};w.geom.quadtree=function(a,b,f,n,g){function l(a){function c(a,b,f,g,n,e,r,p){if(!isNaN(f)&&!isNaN(g))if(a.leaf){var h=a.x,k=a.y;if(null!=h){if(!(.01>ja(h-f)+ja(k-g))){var m=a.point;a.x=a.y=a.point=null;l(a,m,h,k,n,e,r,p)}l(a,b,f,g,n,e,r,p)}else a.x=f,a.y=g,a.point=b}else l(a,b,f,g,n,e,r,p)}function l(a,b,f,g,n,e,r,p){var h=.5*(n+r),k=.5*(e+p),m=f>=h,x=g>=k,q=(x<<1)+m;a.leaf=!1;a=a.nodes[q]||(a.nodes[q]=af());m?n=h:r=h;x?e=k:p=k;c(a,b,f,g,n,e,r,p)}
var k,m=ra(e),q=ra(p),v,s,t,y,E,S,B,F;if(null!=b)E=b,S=f,B=n,F=g;else if(B=F=-(E=S=Infinity),v=[],s=[],y=a.length,h)for(t=0;t<y;++t)k=a[t],k.x<E&&(E=k.x),k.y<S&&(S=k.y),k.x>B&&(B=k.x),k.y>F&&(F=k.y),v.push(k.x),s.push(k.y);else for(t=0;t<y;++t){var J=+m(k=a[t],t);k=+q(k,t);J<E&&(E=J);k<S&&(S=k);J>B&&(B=J);k>F&&(F=k);v.push(J);s.push(k)}J=B-E;k=F-S;J>k?F=S+J:B=E+k;var w=af();w.add=function(a){c(w,a,+m(a,++t),+q(a,t),E,S,B,F)};w.visit=function(a){Pb(a,w,E,S,B,F)};t=-1;if(null==b){for(;++t<y;)c(w,a[t],
v[t],s[t],E,S,B,F);--t}else a.forEach(w.add);v=s=a=k=null;return w}var e=xb,p=Kb,h;if(h=arguments.length)return e=Xg,p=Yg,3===h&&(g=f,n=b,f=b=0),l(a);l.x=function(a){return arguments.length?(e=a,l):e};l.y=function(a){return arguments.length?(p=a,l):p};l.extent=function(a){if(!arguments.length)return null==b?null:[[b,f],[n,g]];null==a?b=f=n=g=null:(b=+a[0][0],f=+a[0][1],n=+a[1][0],g=+a[1][1]);return l};l.size=function(a){if(!arguments.length)return null==b?null:[n-b,g-f];null==a?b=f=n=g=null:(b=f=
0,n=+a[0],g=+a[1]);return l};return l};w.interpolateRgb=sd;w.interpolateObject=bf;w.interpolateNumber=ab;w.interpolateString=cf;var td=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ud=new RegExp(td.source,"g");w.interpolate=pb;w.interpolators=[function(a,b){var f=typeof b;return("string"===f?Wb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?sd:cf:b instanceof ua?sd:Array.isArray(b)?rc:"object"===f&&isNaN(b)?bf:ab)(a,b)}];w.interpolateArray=rc;var eg=function(){return wa},bi=w.map({linear:eg,poly:function(a){return function(b){return Math.pow(b,
a)}},quad:function(){return $g},cubic:function(){return ah},sin:function(){return ch},exp:function(){return dh},circle:function(){return eh},elastic:function(a,b){var f;2>arguments.length&&(b=.45);arguments.length?f=b/Fa*Math.asin(1/a):(a=1,f=b/4);return function(n){return 1+a*Math.pow(2,-10*n)*Math.sin((n-f)*Fa/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return fh}}),ci=w.map({"in":wa,out:df,"in-out":ef,"out-in":function(a){return ef(df(a))}});
w.ease=function(a){var b=a.indexOf("-"),f=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",f=bi.get(f)||eg,b=ci.get(b)||wa;return Zg(b(f.apply(null,Sf.call(arguments,1))))};w.interpolateHcl=function(a,b){a=w.hcl(a);b=w.hcl(b);var f=a.h,n=a.c,g=a.l,l=b.h-f,e=b.c-n,p=b.l-g;isNaN(e)&&(e=0,n=isNaN(n)?b.c:n);isNaN(l)?(l=0,f=isNaN(f)?b.h:f):180<l?l-=360:-180>l&&(l+=360);return function(a){return Tc(f+l*a,n+e*a,g+p*a)+""}};w.interpolateHsl=function(a,b){a=w.hsl(a);b=w.hsl(b);var f=a.h,n=a.s,g=a.l,l=
b.h-f,e=b.s-n,p=b.l-g;isNaN(e)&&(e=0,n=isNaN(n)?b.s:n);isNaN(l)?(l=0,f=isNaN(f)?b.h:f):180<l?l-=360:-180>l&&(l+=360);return function(a){return Wa(f+l*a,n+e*a,g+p*a)+""}};w.interpolateLab=function(a,b){a=w.lab(a);b=w.lab(b);var f=a.l,n=a.a,g=a.b,l=b.l-f,e=b.a-n,p=b.b-g;return function(a){return $d(f+l*a,n+e*a,g+p*a)+""}};w.interpolateRound=ff;w.transform=function(a){var b=Oa.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new gf(c?
c.matrix:di)})(a)};gf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var di={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=jf;w.layout={};w.layout.bundle=function(){return function(a){for(var b=[],f=-1,n=a.length;++f<n;)b.push(ih(a[f]));return b}};w.layout.chord=function(){function a(){var c={},f=[],q=w.range(e),v=[],s,t,y,E,S;n=[];g=[];s=0;for(E=-1;++E<e;){t=0;for(S=-1;++S<e;)t+=l[E][S];f.push(t);v.push(w.range(e));
s+=t}h&&q.sort(function(a,c){return h(f[a],f[c])});k&&v.forEach(function(a,c){a.sort(function(a,b){return k(l[c][a],l[c][b])})});s=(Fa-p*e)/s;t=0;for(E=-1;++E<e;){y=t;for(S=-1;++S<e;){var B=q[E],F=v[B][S],J=l[B][F],L=t,u=t+=J*s;c[B+"-"+F]={index:B,subindex:F,startAngle:L,endAngle:u,value:J}}g[B]={index:B,startAngle:y,endAngle:t,value:(t-y)/s};t+=p}for(E=-1;++E<e;)for(S=E-1;++S<e;)q=c[E+"-"+S],v=c[S+"-"+E],(q.value||v.value)&&n.push(q.value<v.value?{source:v,target:q}:{source:q,target:v});m&&b()}function b(){n.sort(function(a,
c){return m((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var f={},n,g,l,e,p=0,h,k,m;f.matrix=function(a){if(!arguments.length)return l;e=(l=a)&&l.length;n=g=null;return f};f.padding=function(a){if(!arguments.length)return p;p=a;n=g=null;return f};f.sortGroups=function(a){if(!arguments.length)return h;h=a;n=g=null;return f};f.sortSubgroups=function(a){if(!arguments.length)return k;k=a;n=null;return f};f.sortChords=function(a){if(!arguments.length)return m;m=a;n&&b();return f};
f.chords=function(){n||a();return n};f.groups=function(){g||a();return g};return f};w.layout.force=function(){function a(c){return function(a,b,f,g){if(a.point!==c){f=a.cx-c.x;var l=a.cy-c.y;b=g-b;g=f*f+l*l;if(b*b/s<g)return g<q&&(b=a.charge/g,c.px-=f*b,c.py-=l*b),!0;a.point&&g&&g<q&&(b=a.pointCharge/g,c.px-=f*b,c.py-=l*b)}return!a.charge}}function b(a){a.px=w.event.x;a.py=w.event.y;f.resume()}var f={},n=w.dispatch("start","tick","end"),g=[1,1],l,e,p=.9,h=ei,k=fi,m=-30,q=gi,v=.1,s=.64,t=[],y=[],E,
S,B;f.tick=function(){if(.005>(e*=.99))return n.end({type:"end",alpha:e=0}),!0;var b=t.length,f=y.length,l,r,h,k,q,s,F;for(l=0;l<f;++l)if(r=y[l],h=r.source,k=r.target,s=k.x-h.x,F=k.y-h.y,q=s*s+F*F)q=e*S[l]*((q=Math.sqrt(q))-E[l])/q,s*=q,F*=q,k.x-=s*(q=h.weight/(k.weight+h.weight)),k.y-=F*q,h.x+=s*(q=1-q),h.y+=F*q;if(q=e*v)if(s=g[0]/2,F=g[1]/2,l=-1,q)for(;++l<b;)r=t[l],r.x+=(s-r.x)*q,r.y+=(F-r.y)*q;if(m)for(lf(f=w.geom.quadtree(t),e,B),l=-1;++l<b;)(r=t[l]).fixed||f.visit(a(r));for(l=-1;++l<b;)r=t[l],
r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*p,r.y-=(r.py-(r.py=r.y))*p);n.tick({type:"tick",alpha:e})};f.nodes=function(a){if(!arguments.length)return t;t=a;return f};f.links=function(a){if(!arguments.length)return y;y=a;return f};f.size=function(a){if(!arguments.length)return g;g=a;return f};f.linkDistance=function(a){if(!arguments.length)return h;h="function"===typeof a?a:+a;return f};f.distance=f.linkDistance;f.linkStrength=function(a){if(!arguments.length)return k;k="function"===typeof a?
a:+a;return f};f.friction=function(a){if(!arguments.length)return p;p=+a;return f};f.charge=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return f};f.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(q);q=a*a;return f};f.gravity=function(a){if(!arguments.length)return v;v=+a;return f};f.theta=function(a){if(!arguments.length)return Math.sqrt(s);s=a*a;return f};f.alpha=function(a){if(!arguments.length)return e;a=+a;e?e=0<a?a:0:0<a&&(n.start({type:"start",alpha:e=
a}),w.timer(f.tick));return f};f.start=function(){function a(f,g){if(!r){r=Array(b);for(n=0;n<b;++n)r[n]=[];for(n=0;n<e;++n){var l=y[n];r[l.source.index].push(l.target);r[l.target.index].push(l.source)}}for(var l=r[c],n=-1,e=l.length,p;++n<e;)if(!isNaN(p=l[n][f]))return p;return Math.random()*g}var c,b=t.length,l=y.length,n=g[0],e=g[1],r,p;for(c=0;c<b;++c)(p=t[c]).index=c,p.weight=0;for(c=0;c<l;++c)p=y[c],"number"==typeof p.source&&(p.source=t[p.source]),"number"==typeof p.target&&(p.target=t[p.target]),
++p.source.weight,++p.target.weight;for(c=0;c<b;++c)p=t[c],isNaN(p.x)&&(p.x=a("x",n)),isNaN(p.y)&&(p.y=a("y",e)),isNaN(p.px)&&(p.px=p.x),isNaN(p.py)&&(p.py=p.y);E=[];if("function"===typeof h)for(c=0;c<l;++c)E[c]=+h.call(this,y[c],c);else for(c=0;c<l;++c)E[c]=h;S=[];if("function"===typeof k)for(c=0;c<l;++c)S[c]=+k.call(this,y[c],c);else for(c=0;c<l;++c)S[c]=k;B=[];if("function"===typeof m)for(c=0;c<b;++c)B[c]=+m.call(this,t[c],c);else for(c=0;c<b;++c)B[c]=m;return f.resume()};f.resume=function(){return f.alpha(.1)};
f.stop=function(){return f.alpha(0)};f.drag=function(){l||(l=w.behavior.drag().origin(wa).on("dragstart.force",jh).on("drag.force",b).on("dragend.force",kh));if(!arguments.length)return l;this.on("mouseover.force",lh).on("mouseout.force",mh).call(l)};return w.rebind(f,n,"on")};var ei=20,fi=1,gi=Infinity;w.layout.hierarchy=function(){function a(g){var l=[g],e=[],p;for(g.depth=0;null!=(p=l.pop());)if(e.push(p),(k=f.call(a,p,p.depth))&&(h=k.length)){for(var h,k,m;0<=--h;)l.push(m=k[h]),m.parent=p,m.depth=
p.depth+1;n&&(p.value=0);p.children=k}else n&&(p.value=+n.call(a,p,p.depth)||0),delete p.children;Ra(g,function(a){var c,f;b&&(c=a.children)&&c.sort(b);n&&(f=a.parent)&&(f.value+=a.value)});return e}var b=qh,f=oh,n=ph;a.sort=function(f){if(!arguments.length)return b;b=f;return a};a.children=function(b){if(!arguments.length)return f;f=b;return a};a.value=function(b){if(!arguments.length)return n;n=b;return a};a.revalue=function(b){n&&(Rb(b,function(a){a.children&&(a.value=0)}),Ra(b,function(b){var f;
b.children||(b.value=+n.call(a,b,b.depth)||0);if(f=b.parent)f.value+=b.value}));return b};return a};w.layout.partition=function(){function a(b,f,g,n){var e=b.children;b.x=f;b.y=b.depth*n;b.dx=g;b.dy=n;if(e&&(r=e.length)){var p=-1,r,h;for(g=b.value?g/b.value:0;++p<r;)a(h=e[p],f,b=h.value*g,n),f+=b}}function b(a){a=a.children;var c=0;if(a&&(g=a.length))for(var f=-1,g;++f<g;)c=Math.max(c,b(a[f]));return 1+c}function f(f,e){var p=n.call(this,f,e);a(p[0],0,g[0],g[1]/b(p[0]));return p}var n=w.layout.hierarchy(),
g=[1,1];f.size=function(a){if(!arguments.length)return g;g=a;return f};return Qb(f,n)};w.layout.pie=function(){function a(l){var e=l.map(function(f,g){return+b.call(a,f,g)}),p=+("function"===typeof n?n.apply(this,arguments):n),h=(("function"===typeof g?g.apply(this,arguments):g)-p)/w.sum(e),k=w.range(l.length);null!=f&&k.sort(f===fg?function(a,c){return e[c]-e[a]}:function(a,c){return f(l[a],l[c])});var m=[];k.forEach(function(a){var c;m[a]={data:l[a],value:c=e[a],startAngle:p,endAngle:p+=c*h}});
return m}var b=Number,f=fg,n=0,g=Fa;a.value=function(f){if(!arguments.length)return b;b=f;return a};a.sort=function(b){if(!arguments.length)return f;f=b;return a};a.startAngle=function(b){if(!arguments.length)return n;n=b;return a};a.endAngle=function(b){if(!arguments.length)return g;g=b;return a};return a};var fg={};w.layout.stack=function(){function a(p,h){var k=p.map(function(f,g){return b.call(a,f,g)}),m=k.map(function(b){return b.map(function(b,f){return[l.call(a,b,f),e.call(a,b,f)]})}),q=f.call(a,
m,h),k=w.permute(k,q),m=w.permute(m,q),q=n.call(a,m,h),v=k.length,s=k[0].length,t,y,E;for(y=0;y<s;++y)for(g.call(a,k[0][y],E=q[y],m[0][y][1]),t=1;t<v;++t)g.call(a,k[t][y],E+=m[t-1][y][1],m[t][y][1]);return p}var b=wa,f=vd,n=wd,g=th,l=rh,e=sh;a.values=function(f){if(!arguments.length)return b;b=f;return a};a.order=function(b){if(!arguments.length)return f;f="function"===typeof b?b:hi.get(b)||vd;return a};a.offset=function(b){if(!arguments.length)return n;n="function"===typeof b?b:ii.get(b)||wd;return a};
a.x=function(b){if(!arguments.length)return l;l=b;return a};a.y=function(b){if(!arguments.length)return e;e=b;return a};a.out=function(b){if(!arguments.length)return g;g=b;return a};return a};var hi=w.map({"inside-out":function(a){var b=a.length,f,e=a.map(uh),g=a.map(vh),l=w.range(b).sort(function(a,c){return e[a]-e[c]}),p=0,h=0,k=[],m=[];for(a=0;a<b;++a)f=l[a],p<h?(p+=g[f],k.push(f)):(h+=g[f],m.push(f));return m.reverse().concat(k)},reverse:function(a){return w.range(a.length).reverse()},"default":vd}),
ii=w.map({silhouette:function(a){var b=a.length,f=a[0].length,e=[],g=0,l,p,h,k=[];for(p=0;p<f;++p){for(h=l=0;l<b;l++)h+=a[l][p][1];h>g&&(g=h);e.push(h)}for(p=0;p<f;++p)k[p]=(g-e[p])/2;return k},wiggle:function(a){var b=a.length,f=a[0],e=f.length,g,l,p,h,k,m,q,v,s,t=[];t[0]=v=s=0;for(l=1;l<e;++l){for(h=g=0;g<b;++g)h+=a[g][l][1];k=g=0;for(q=f[l][0]-f[l-1][0];g<b;++g){p=0;for(m=(a[g][l][1]-a[g][l-1][1])/(2*q);p<g;++p)m+=(a[p][l][1]-a[p][l-1][1])/q;k+=m*a[g][l][1]}t[l]=v-=h?k/h*q:0;v<s&&(s=v)}for(l=0;l<
e;++l)t[l]-=s;return t},expand:function(a){var b=a.length,f=a[0].length,e=1/b,g,l,p,h=[];for(l=0;l<f;++l){for(p=g=0;g<b;g++)p+=a[g][l][1];if(p)for(g=0;g<b;g++)a[g][l][1]/=p;else for(g=0;g<b;g++)a[g][l][1]=e}for(l=0;l<f;++l)h[l]=0;return h},zero:wd});w.layout.histogram=function(){function a(c,p){var h=[],k=c.map(f,this),m=e.call(this,k,p),q=g.call(this,m,k,p),v;p=-1;for(var s=k.length,t=q.length-1,y=b?1:1/s;++p<t;)v=h[p]=[],v.dx=q[p+1]-(v.x=q[p]),v.y=0;if(0<t)for(p=-1;++p<s;)v=k[p],v>=m[0]&&v<=m[1]&&
(v=h[w.bisect(q,v,1,t)-1],v.y+=y,v.push(c[p]));return h}var b=!0,f=Number,e=yh,g=xh;a.value=function(b){if(!arguments.length)return f;f=b;return a};a.range=function(b){if(!arguments.length)return e;e=ra(b);return a};a.bins=function(b){if(!arguments.length)return g;g="number"===typeof b?function(a){return mf(a,b)}:ra(b);return a};a.frequency=function(f){if(!arguments.length)return b;b=!!f;return a};return a};w.layout.pack=function(){function a(c,p){var h=b.call(this,c,p),k=h[0],m=e[0],q=e[1],v=null==
g?Math.sqrt:"function"===typeof g?g:function(){return g};k.x=k.y=0;Ra(k,function(a){a.r=+v(a.value)});Ra(k,pf);if(f){var s=f*(g?1:Math.max(2*k.r/m,2*k.r/q))/2;Ra(k,function(a){a.r+=s});Ra(k,pf);Ra(k,function(a){a.r-=s})}rf(k,m/2,q/2,g?1:1/Math.max(2*k.r/m,2*k.r/q));return h}var b=w.layout.hierarchy().sort(zh),f=0,e=[1,1],g;a.size=function(b){if(!arguments.length)return e;e=b;return a};a.radius=function(b){if(!arguments.length)return g;g=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return f;
f=+b;return a};return Qb(a,b)};w.layout.tree=function(){function a(c,m){var q=l.call(this,c,m),v=q[0],s=b(v);Ra(s,f);s.parent.m=-s.z;Rb(s,e);if(k)Rb(v,g);else{var t=v,y=v,E=v;Rb(v,function(a){a.x<t.x&&(t=a);a.x>y.x&&(y=a);a.depth>E.depth&&(E=a)});var S=p(t,y)/2-t.x,B=h[0]/(y.x+p(y,t)/2+S),F=h[1]/(E.depth||1);Rb(v,function(a){a.x=(a.x+S)*B;a.y=a.depth*F})}return q}function b(a){a={A:null,children:[a]};for(var c=[a],f;null!=(f=c.pop());)for(var g=f.children,e,l=0,n=g.length;l<n;++l)c.push((g[l]=e={_:g[l],
parent:f,children:(e=g[l].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:l}).a=e);return a.children[0]}function f(a){var c=a.children,b=a.parent.children,f=a.i?b[a.i-1]:null;if(c.length){for(var g=0,e=0,l=a.children,n=l.length,r;0<=--n;)r=l[n],r.z+=g,r.m+=g,g+=r.s+(e+=r.c);c=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+p(a._,f._),a.m=a.z-c):a.z=c}else f&&(a.z=f.z+p(a._,f._));c=a.parent;b=a.parent.A||b[0];if(f){e=g=a;l=g.parent.children[0];n=g.m;r=e.m;for(var h=f.m,k=l.m,m;f=zd(f),g=yd(g),
f&&g;){l=yd(l);e=zd(e);e.a=a;m=f.z+h-g.z-n+p(f._,g._);if(0<m){var q=f.a.parent===a.parent?f.a:b,v=a,s=m,t=s/(v.i-q.i);v.c-=t;v.s+=s;q.c+=t;v.z+=s;v.m+=s;n+=m;r+=m}h+=f.m;n+=g.m;k+=l.m;r+=e.m}f&&!zd(e)&&(e.t=f,e.m+=h-r);g&&!yd(l)&&(l.t=g,l.m+=n-k,b=a)}c.A=b}function e(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function g(a){a.x*=h[0];a.y=a.depth*h[1]}var l=w.layout.hierarchy().sort(null).value(null),p=sf,h=[1,1],k=null;a.separation=function(b){if(!arguments.length)return p;p=b;return a};a.size=function(b){if(!arguments.length)return k?
null:h;k=null==(h=b)?g:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?h:null;k=null==(h=b)?null:g;return a};return Qb(a,l)};w.layout.cluster=function(){function a(c,p){var h=b.call(this,c,p),k=h[0],m,q=0;Ra(k,function(a){var c=a.children;c&&c.length?(a.x=Dh(c),a.y=Ch(c)):(a.x=m?q+=f(a,m):0,a.y=0,m=a)});var v=tf(k),s=uf(k),t=v.x-f(v,s)/2,y=s.x+f(s,v)/2;Ra(k,g?function(a){a.x=(a.x-k.x)*e[0];a.y=(k.y-a.y)*e[1]}:function(a){a.x=(a.x-t)/(y-t)*e[0];a.y=(1-(k.y?a.y/k.y:1))*e[1]});return h}
var b=w.layout.hierarchy().sort(null).value(null),f=sf,e=[1,1],g=!1;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return g?null:e;g=null==(e=b);return a};a.nodeSize=function(b){if(!arguments.length)return g?e:null;g=null!=(e=b);return a};return Qb(a,b)};w.layout.treemap=function(){function a(c,b){for(var f=-1,g=c.length,e,l;++f<g;)l=(e=c[f]).value*(0>b?0:b),e.area=isNaN(l)||0>=l?0:l}function b(f){var g=f.children;if(g&&g.length){var l=
m(f),p=[],h=g.slice(),k=Infinity,q,v="slice"===s?l.dx:"dice"===s?l.dy:"slice-dice"===s?f.depth&1?l.dy:l.dx:Math.min(l.dx,l.dy);a(h,l.dx*l.dy/f.value);for(p.area=0;0<(f=h.length);){p.push(f=h[f-1]);p.area+=f.area;if(!(f="squarify"!==s)){q=v;f=p.area;for(var y=void 0,x=0,E=Infinity,S=-1,B=p.length;++S<B;)if(y=p[S].area)y<E&&(E=y),y>x&&(x=y);f*=f;q*=q;f=(q=f?Math.max(q*x*t/f,f/(q*E*t)):Infinity)<=k}f?(h.pop(),k=q):(p.area-=p.pop().area,e(p,v,l,!1),v=Math.min(l.dx,l.dy),p.length=p.area=0,k=Infinity)}p.length&&
(e(p,v,l,!0),p.length=p.area=0);g.forEach(b)}}function f(b){var g=b.children;if(g&&g.length){var l=m(b),p=g.slice(),r=[];a(p,l.dx*l.dy/b.value);for(r.area=0;b=p.pop();)r.push(b),r.area+=b.area,null!=b.z&&(e(r,b.z?l.dx:l.dy,l,!p.length),r.length=r.area=0);g.forEach(f)}}function e(a,c,b,f){var g=-1,l=a.length,n=b.x,r=b.y,h=c?p(a.area/c):0,k;if(c==b.dx){if(f||h>b.dy)h=b.dy;for(;++g<l;)k=a[g],k.x=n,k.y=r,k.dy=h,n+=k.dx=Math.min(b.x+b.dx-n,h?p(k.area/h):0);k.z=!0;k.dx+=b.x+b.dx-n;b.y+=h;b.dy-=h}else{if(f||
h>b.dx)h=b.dx;for(;++g<l;)k=a[g],k.x=n,k.y=r,k.dx=h,r+=k.dy=Math.min(b.y+b.dy-r,h?p(k.area/h):0);k.z=!1;k.dy+=b.y+b.dy-r;b.x+=h;b.dx-=h}}function g(g){g=v||l(g);var e=g[0];e.x=0;e.y=0;e.dx=h[0];e.dy=h[1];v&&l.revalue(e);a([e],e.dx*e.dy/e.value);(v?f:b)(e);q&&(v=g);return g}var l=w.layout.hierarchy(),p=Math.round,h=[1,1],k=null,m=Ad,q=!1,v,s="squarify",t=.5*(1+Math.sqrt(5));g.size=function(a){if(!arguments.length)return h;h=a;return g};g.padding=function(a){function c(b){var f=a.call(g,b,b.depth);
return null==f?Ad(b):vf(b,"number"===typeof f?[f,f,f,f]:f)}function b(c){return vf(c,a)}if(!arguments.length)return k;var f;m=null==(k=a)?Ad:"function"===(f=typeof a)?c:"number"===f?(a=[a,a,a,a],b):b;return g};g.round=function(a){if(!arguments.length)return p!=Number;p=a?Math.round:Number;return g};g.sticky=function(a){if(!arguments.length)return q;q=a;v=null;return g};g.ratio=function(a){if(!arguments.length)return t;t=a;return g};g.mode=function(a){if(!arguments.length)return s;s=a+"";return g};
return Qb(g,l)};w.random={normal:function(a,b){var f=arguments.length;2>f&&(b=1);1>f&&(a=0);return function(){var f,g;do f=2*Math.random()-1,g=2*Math.random()-1,g=f*f+g*g;while(!g||1<g);return a+b*f*Math.sqrt(-2*Math.log(g)/g)}},logNormal:function(){var a=w.random.normal.apply(w,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=w.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,f=0;f<a;f++)b+=Math.random();return b}}};
w.scale={};var Fh={floor:wa,ceil:wa};w.scale.linear=function(){return xf([0,1],[0,1],pb,!1)};var Ih={s:1,g:1,p:1,r:1,e:1};w.scale.log=function(){return yf(w.scale.linear().domain([0,1]),10,!0,[1,10])};var zf=w.format(".0e"),Jh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};w.scale.pow=function(){return Af(w.scale.linear(),1,[0,1])};w.scale.sqrt=function(){return w.scale.pow().exponent(.5)};w.scale.ordinal=function(){return Bf([],{t:"range",a:[[]]})};w.scale.category10=
function(){return w.scale.ordinal().range(ji)};w.scale.category20=function(){return w.scale.ordinal().range(ki)};w.scale.category20b=function(){return w.scale.ordinal().range(li)};w.scale.category20c=function(){return w.scale.ordinal().range(mi)};var ji=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Vb),ki=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Vb),li=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Vb),mi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Vb);w.scale.quantile=function(){return Cf([],[])};w.scale.quantize=function(){return Df(0,1,[0,1])};w.scale.threshold=
function(){return Ef([.5],[0,1])};w.scale.identity=function(){return Ff([0,1])};w.svg={};w.svg.arc=function(){function a(){var c=b.apply(this,arguments),p=f.apply(this,arguments),h=e.apply(this,arguments)+qb,k=g.apply(this,arguments)+qb,m=(k<h&&(m=h,h=k,k=m),k-h),q=m<ia?"0":"1",v=Math.cos(h),h=Math.sin(h),s=Math.cos(k),k=Math.sin(k);return m>=ni?c?"M0,"+p+"A"+p+","+p+" 0 1,1 0,"+-p+"A"+p+","+p+" 0 1,1 0,"+p+"M0,"+c+"A"+c+","+c+" 0 1,0 0,"+-c+"A"+c+","+c+" 0 1,0 0,"+c+"Z":"M0,"+p+"A"+p+","+p+" 0 1,1 0,"+
-p+"A"+p+","+p+" 0 1,1 0,"+p+"Z":c?"M"+p*v+","+p*h+"A"+p+","+p+" 0 "+q+",1 "+p*s+","+p*k+"L"+c*s+","+c*k+"A"+c+","+c+" 0 "+q+",0 "+c*v+","+c*h+"Z":"M"+p*v+","+p*h+"A"+p+","+p+" 0 "+q+",1 "+p*s+","+p*k+"L0,0Z"}var b=Kh,f=Lh,e=Gf,g=Hf;a.innerRadius=function(f){if(!arguments.length)return b;b=ra(f);return a};a.outerRadius=function(b){if(!arguments.length)return f;f=ra(b);return a};a.startAngle=function(b){if(!arguments.length)return e;e=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return g;
g=ra(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+f.apply(this,arguments))/2,c=(e.apply(this,arguments)+g.apply(this,arguments))/2+qb;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var qb=-xa,ni=Fa-Z;w.svg.line=function(){return If(wa)};var Dd=w.map({linear:Ga,"linear-closed":function(a){return Ga(a)+"Z"},step:function(a){for(var b=0,f=a.length,e=a[0],g=[e[0],",",e[1]];++b<f;)g.push("H",(e[0]+(e=a[b])[0])/2,"V",e[1]);1<f&&g.push("H",e[0]);return g.join("")},"step-before":Ed,"step-after":Fd,
basis:Jf,"basis-open":function(a){if(4>a.length)return Ga(a);for(var b=[],f=-1,e=a.length,g,l=[0],p=[0];3>++f;)g=a[f],l.push(g[0]),p.push(g[1]);b.push(Ja(ib,l)+","+Ja(ib,p));for(--f;++f<e;)g=a[f],l.shift(),l.push(g[0]),p.shift(),p.push(g[1]),Hd(b,l,p);return b.join("")},"basis-closed":function(a){for(var b,f=-1,e=a.length,g=e+4,l,p=[],h=[];4>++f;)l=a[f%e],p.push(l[0]),h.push(l[1]);b=[Ja(ib,p),",",Ja(ib,h)];for(--f;++f<g;)l=a[f%e],p.shift(),p.push(l[0]),h.shift(),h.push(l[1]),Hd(b,p,h);return b.join("")},
bundle:function(a,b){var f=a.length-1;if(f)for(var e=a[0][0],g=a[0][1],p=a[f][0]-e,h=a[f][1]-g,k=-1,m,q;++k<=f;)m=a[k],q=k/f,m[0]=b*m[0]+(1-b)*(e+q*p),m[1]=b*m[1]+(1-b)*(g+q*h);return Jf(a)},cardinal:function(a,b){return 3>a.length?Ga(a):a[0]+wc(a,Gd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ga(a):a[1]+wc(a.slice(1,a.length-1),Gd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ga(a):a[0]+wc((a.push(a[0]),a),Gd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=
Ga(a);else{var b=a[0],f=[],e,g,p,h;e=0;g=a.length-1;var k=[];p=a[1];for(h=k[0]=Id(a[0],p);++e<g;)k[e]=(h+(h=Id(p,p=a[e+1])))/2;k[e]=h;for(var m=-1,q=a.length-1;++m<q;)e=Id(a[m],a[m+1]),ja(e)<Z?k[m]=k[m+1]=0:(g=k[m]/e,p=k[m+1]/e,h=g*g+p*p,9<h&&(h=3*e/Math.sqrt(h),k[m]=h*g,k[m+1]=h*p));for(m=-1;++m<=q;)h=(a[Math.min(q,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+k[m]*k[m])),f.push([h||0,k[m]*h||0]);a=b+wc(a,f)}return a}});Dd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Kf=[0,2/3,1/3,0],
Lf=[0,1/3,2/3,0],ib=[0,1/6,2/3,1/6];w.svg.line.radial=function(){var a=If(Mf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Ed.reverse=Fd;Fd.reverse=Ed;w.svg.area=function(){return Nf(wa)};w.svg.area.radial=function(){var a=Nf(Mf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};w.svg.chord=function(){function a(c,p){var l=b(this,e,c,p),h=b(this,g,c,p);return"M"+
l.p0+f(l.r,l.p1,l.a1-l.a0)+(l.a0==h.a0&&l.a1==h.a1?"Q 0,0 "+l.p0:"Q 0,0 "+h.p0+f(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+l.p0))+"Z"}function b(a,c,f,g){var e=c.call(a,f,g);c=p.call(a,e,g);f=h.call(a,e,g)+qb;a=k.call(a,e,g)+qb;return{r:c,a0:f,a1:a,p0:[c*Math.cos(f),c*Math.sin(f)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function f(a,c,b){return"A"+a+","+a+" 0 "+ +(b>ia)+",1 "+c}var e=jd,g=kd,p=Mh,h=Gf,k=Hf;a.radius=function(b){if(!arguments.length)return p;p=ra(b);return a};a.source=function(b){if(!arguments.length)return e;
e=ra(b);return a};a.target=function(b){if(!arguments.length)return g;g=ra(b);return a};a.startAngle=function(b){if(!arguments.length)return h;h=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return k;k=ra(b);return a};return a};w.svg.diagonal=function(){function a(c,p){var h=b.call(this,c,p),k=f.call(this,c,p),m=(h.y+k.y)/2,h=[h,{x:h.x,y:m},{x:k.x,y:m},k],h=h.map(e);return"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var b=jd,f=kd,e=Of;a.source=function(f){if(!arguments.length)return b;b=ra(f);
return a};a.target=function(b){if(!arguments.length)return f;f=ra(b);return a};a.projection=function(b){if(!arguments.length)return e;e=b;return a};return a};w.svg.diagonal.radial=function(){var a=w.svg.diagonal(),b=Of,f=a.projection;a.projection=function(a){return arguments.length?f(Nh(b=a)):b};return a};w.svg.symbol=function(){function a(c,g){return(gg.get(b.call(this,c,g))||Pf)(f.call(this,c,g))}var b=Ph,f=Oh;a.type=function(f){if(!arguments.length)return b;b=ra(f);return a};a.size=function(b){if(!arguments.length)return f;
f=ra(b);return a};return a};var gg=w.map({circle:Pf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*hg));var b=a*hg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Oc);var b=a*Oc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=
Math.sqrt(a/Oc);var b=a*Oc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});w.svg.symbolTypes=gg.keys();var Oc=Math.sqrt(3),hg=Math.tan(30*ha),va=[],Wf=0,sb,Ac;va.call=oa.call;va.empty=oa.empty;va.node=oa.node;va.size=oa.size;w.transition=function(a){return arguments.length?sb?a.transition():a:Vf.transition()};w.transition.prototype=va;va.select=function(a){var b=this.id,f=[],e,g,p;a=R(a);for(var h=-1,k=this.length;++h<k;){f.push(e=[]);for(var m=this[h],q=-1,v=m.length;++q<v;)(p=m[q])&&(g=a.call(p,
p.__data__,q,h))?("__data__"in p&&(g.__data__=p.__data__),xc(g,q,b,p.__transition__[b]),e.push(g)):e.push(null)}return Sb(f,b)};va.selectAll=function(a){var b=this.id,f=[],e,g,p,h;a=O(a);for(var k=-1,m=this.length;++k<m;)for(var q=this[k],v=-1,s=q.length;++v<s;)if(e=q[v]){h=e.__transition__[b];g=a.call(e,e.__data__,v,k);f.push(e=[]);for(var t=-1,y=g.length;++t<y;)(p=g[t])&&xc(p,t,b,h),e.push(p)}return Sb(f,b)};va.filter=function(a){var b=[],f,e,g;"function"!==typeof a&&(a=J(a));for(var p=0,h=this.length;p<
h;p++){b.push(f=[]);e=this[p];for(var k=0,m=e.length;k<m;k++)(g=e[k])&&a.call(g,g.__data__,k,p)&&f.push(g)}return Sb(b,this.id)};va.tween=function(a,b){var f=this.id;return 2>arguments.length?this.node().__transition__[f].tween.get(a):v(this,null==b?function(b){b.__transition__[f].tween.remove(a)}:function(e){e.__transition__[f].tween.set(a,b)})};va.attr=function(a,b){function f(){this.removeAttribute(k)}function e(){this.removeAttributeNS(k.space,k.local)}function g(a){return null==a?f:(a+="",function(){var c=
this.getAttribute(k),b;return c!==a&&(b=h(c,a),function(a){this.setAttribute(k,b(a))})})}function p(a){return null==a?e:(a+="",function(){var c=this.getAttributeNS(k.space,k.local),b;return c!==a&&(b=h(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var h="transform"==a?jf:pb,k=w.ns.qualify(a);return Jd(this,"attr."+a,b,k.local?p:g)};va.attrTween=function(a,b){function f(a,c){var f=b.call(this,a,c,this.getAttribute(g));
return f&&function(a){this.setAttribute(g,f(a))}}function e(a,c){var f=b.call(this,a,c,this.getAttributeNS(g.space,g.local));return f&&function(a){this.setAttributeNS(g.space,g.local,f(a))}}var g=w.ns.qualify(a);return this.tween("attr."+a,g.local?e:f)};va.style=function(a,b,f){function e(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!==typeof a){2>g&&(b="");for(f in a)this.style(f,a[f],b);return this}f=""}return Jd(this,"style."+a,b,function(b){return null==b?e:(b+="",
function(){var g=za.getComputedStyle(this,null).getPropertyValue(a),e;return g!==b&&(e=pb(g,b),function(b){this.style.setProperty(a,e(b),f)})})})};va.styleTween=function(a,b,f){3>arguments.length&&(f="");return this.tween("style."+a,function(e,g){var p=b.call(this,e,g,za.getComputedStyle(this,null).getPropertyValue(a));return p&&function(b){this.style.setProperty(a,p(b),f)}})};va.text=function(a){return Jd(this,"text",a,Qh)};va.remove=function(){return this.each("end.transition",function(){var a;
2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};va.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=w.ease.apply(w,arguments));return v(this,function(f){f.__transition__[b].ease=a})};va.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:v(this,"function"===typeof a?function(f,e,g){f.__transition__[b].delay=+a.call(f,f.__data__,e,g)}:(a=+a,function(f){f.__transition__[b].delay=
a}))};va.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:v(this,"function"===typeof a?function(f,e,g){f.__transition__[b].duration=Math.max(1,a.call(f,f.__data__,e,g))}:(a=Math.max(1,a),function(f){f.__transition__[b].duration=a}))};va.each=function(a,b){var f=this.id;if(2>arguments.length){var e=Ac,g=sb;sb=f;v(this,function(b,g,e){Ac=b.__transition__[f];a.call(b,b.__data__,g,e)});Ac=e;sb=g}else v(this,function(g){g=g.__transition__[f];(g.event||
(g.event=w.dispatch("start","end"))).on(a,b)});return this};va.transition=function(){for(var a=this.id,b=++Wf,f=[],e,g,p,h,k=0,m=this.length;k<m;k++){f.push(e=[]);g=this[k];for(var q=0,v=g.length;q<v;q++){if(p=g[q])h=Object.create(p.__transition__[a]),h.delay+=h.duration,xc(p,q,b,h);e.push(p)}}return Sb(f,b)};w.svg.axis=function(){function a(c){c.each(function(){var a=w.select(this),c=this.__chart__||b,q=this.__chart__=b.copy(),v=null==k?q.ticks?q.ticks.apply(q,h):q.domain():k,s=null==m?q.tickFormat?
q.tickFormat.apply(q,h):wa:m,t=a.selectAll(".tick").data(v,q),v=t.enter().insert("g",".domain").attr("class","tick").style("opacity",Z),y=w.transition(t.exit()).style("opacity",Z).remove(),E=w.transition(t.order()).style("opacity",1),S,B=sc(q),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),w.transition(a));v.append("line");v.append("text");var F=v.select("line"),J=E.select("line"),s=t.select("text").text(s),t=v.select("text"),L=E.select("text");switch(f){case "bottom":S=
Qf;F.attr("y2",e);t.attr("y",Math.max(e,0)+p);J.attr("x2",0).attr("y2",e);L.attr("x",0).attr("y",Math.max(e,0)+p);s.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+B[0]+","+g+"V0H"+B[1]+"V"+g);break;case "top":S=Qf;F.attr("y2",-e);t.attr("y",-(Math.max(e,0)+p));J.attr("x2",0).attr("y2",-e);L.attr("x",0).attr("y",-(Math.max(e,0)+p));s.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+B[0]+","+-g+"V0H"+B[1]+"V"+-g);break;case "left":S=Rf;F.attr("x2",-e);t.attr("x",-(Math.max(e,
0)+p));J.attr("x2",-e).attr("y2",0);L.attr("x",-(Math.max(e,0)+p)).attr("y",0);s.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-g+","+B[0]+"H0V"+B[1]+"H"+-g);break;case "right":S=Rf,F.attr("x2",e),t.attr("x",Math.max(e,0)+p),J.attr("x2",e).attr("y2",0),L.attr("x",Math.max(e,0)+p).attr("y",0),s.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+g+","+B[0]+"H0V"+B[1]+"H"+g)}if(q.rangeBand)var u=q,W=u.rangeBand()/2,c=q=function(a){return u(a)+W};else c.rangeBand?c=q:y.call(S,
q);v.call(S,c);E.call(S,q)})}var b=w.scale.linear(),f=ig,e=6,g=6,p=3,h=[10],k=null,m;a.scale=function(f){if(!arguments.length)return b;b=f;return a};a.orient=function(b){if(!arguments.length)return f;f=b in oi?b+"":ig;return a};a.ticks=function(){if(!arguments.length)return h;h=arguments;return a};a.tickValues=function(b){if(!arguments.length)return k;k=b;return a};a.tickFormat=function(b){if(!arguments.length)return m;m=b;return a};a.tickSize=function(b){var f=arguments.length;if(!f)return e;e=+b;
g=+arguments[f-1];return a};a.innerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return g;g=+b;return a};a.tickPadding=function(b){if(!arguments.length)return p;p=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var ig="bottom",oi={top:1,right:1,bottom:1,left:1};w.svg.brush=function(){function a(p){p.each(function(){var p=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),l=p.selectAll(".background").data([0]);l.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");p.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var m=p.selectAll(".resize").data(E,wa);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return pi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);p=w.transition(p);l=w.transition(l);h&&(m=sc(h),l.attr("x",m[0]).attr("width",m[1]-m[0]),f(p));k&&(m=sc(k),l.attr("y",m[0]).attr("height",m[1]-m[0]),e(p));b(p)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+m[+/e$/.test(a)]+","+q[+/^s/.test(a)]+")"})}function f(a){a.select(".extent").attr("x",
m[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",m[1]-m[0])}function e(a){a.select(".extent").attr("y",q[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",q[1]-q[0])}function g(){function g(){var a=w.mouse(B),c=!1;O&&(a[0]+=O[0],a[1]+=O[1]);M||(w.event.altKey?(A||(A=[(m[0]+m[1])/2,(q[0]+q[1])/2]),H[0]=m[+(a[0]<A[0])],H[1]=q[+(a[1]<A[1])]):A=null);W&&E(a,h,0)&&(f(L),c=!0);C&&E(a,k,1)&&(e(L),c=!0);c&&(b(L),J({type:"brush",mode:M?"move":"resize"}))}function E(a,c,b){var f=sc(c);c=f[0];
var e=f[1],f=H[b],g=b?q:m,p=g[1]-g[0];M&&(c-=f,e-=p+f);a=(b?y:t)?Math.max(c,Math.min(e,a[b])):a[b];M?c=(a+=f)+p:(A&&(f=Math.max(c,Math.min(e,2*A[b]-a))),f<a?(c=a,a=f):c=f);if(g[0]!=a||g[1]!=c)return b?s=null:v=null,g[0]=a,g[1]=c,!0}function S(){g();L.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);w.select("body").style("cursor",null);D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);z();J({type:"brushend"})}var B=this,F=w.select(w.event.target),J=p.of(B,arguments),L=w.select(B),u=F.datum(),W=!/^(n|s)$/.test(u)&&h,C=!/^(e|w)$/.test(u)&&k,M=F.classed("extent"),z=la(),A,H=w.mouse(B),O,D=w.select(za).on("keydown.brush",function(){32==w.event.keyCode&&(M||(A=null,H[0]-=m[1],H[1]-=q[1],M=2),K())}).on("keyup.brush",function(){32==w.event.keyCode&&2==M&&(H[0]+=m[1],H[1]+=q[1],M=0,K())});if(w.event.changedTouches)D.on("touchmove.brush",g).on("touchend.brush",
S);else D.on("mousemove.brush",g).on("mouseup.brush",S);L.interrupt().selectAll("*").interrupt();if(M)H[0]=m[0]-H[0],H[1]=q[0]-H[1];else if(u){var P=+/w$/.test(u),u=+/^n/.test(u);O=[m[1-P]-H[0],q[1-u]-H[1]];H[0]=m[P];H[1]=q[u]}else w.event.altKey&&(A=H.slice());L.style("pointer-events","none").selectAll(".resize").style("display",null);w.select("body").style("cursor",F.style("cursor"));J({type:"brushstart"});g()}var p=Q(a,"brushstart","brush","brushend"),h=null,k=null,m=[0,0],q=[0,0],v,s,t=!0,y=!0,
E=Qd[0];a.event=function(a){a.each(function(){var a=p.of(this,arguments),c={x:m,y:q,i:v,j:s},b=this.__chart__||c;this.__chart__=c;sb?w.select(this).transition().each("start.brush",function(){v=b.i;s=b.j;m=b.x;q=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=rc(m,c.x),f=rc(q,c.y);v=s=null;return function(e){m=c.x=b(e);q=c.y=f(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=c.i;s=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return h;h=b;E=Qd[!h<<1|!k];return a};a.y=function(b){if(!arguments.length)return k;k=b;E=Qd[!h<<1|!k];return a};a.clamp=function(b){if(!arguments.length)return h&&k?[t,y]:h?t:k?y:null;h&&k?(t=!!b[0],y=!!b[1]):h?t=!!b:k&&(y=!!b);return a};a.extent=function(b){var f,e,g,p,l;if(!arguments.length)return h&&(v?(f=v[0],e=v[1]):(f=m[0],e=m[1],h.invert&&(f=h.invert(f),e=h.invert(e)),e<f&&(l=f,f=e,e=l))),k&&(s?(g=
s[0],p=s[1]):(g=q[0],p=q[1],k.invert&&(g=k.invert(g),p=k.invert(p)),p<g&&(l=g,g=p,p=l))),h&&k?[[f,g],[e,p]]:h?[f,e]:k&&[g,p];h&&(f=b[0],e=b[1],k&&(f=f[0],e=e[0]),v=[f,e],h.invert&&(f=h(f),e=h(e)),e<f&&(l=f,f=e,e=l),f!=m[0]||e!=m[1])&&(m=[f,e]);k&&(g=b[0],p=b[1],h&&(g=g[1],p=p[1]),s=[g,p],k.invert&&(g=k(g),p=k(p)),p<g&&(l=g,g=p,p=l),g!=q[0]||p!=q[1])&&(q=[g,p]);return a};a.clear=function(){a.empty()||(m=[0,0],q=[0,0],v=s=null);return a};a.empty=function(){return!!h&&m[0]==m[1]||!!k&&q[0]==q[1]};return w.rebind(a,
p,"on")};var pi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Rd=$.format=Yf.timeFormat,jg=Rd.utc,kg=jg("%Y-%m-%dT%H:%M:%S.%LZ");Rd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Kd:kg;Kd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Kd.toString=kg.toString;$.second=kb(function(a){return new ya(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});$.seconds=$.second.range;$.seconds.utc=$.second.utc.range;$.minute=kb(function(a){return new ya(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});$.minutes=$.minute.range;$.minutes.utc=$.minute.utc.range;$.hour=kb(function(a){var b=a.getTimezoneOffset()/60;return new ya(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},
function(a){return a.getHours()});$.hours=$.hour.range;$.hours.utc=$.hour.utc.range;$.month=kb(function(a){a=$.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});$.months=$.month.range;$.months.utc=$.month.utc.range;var yc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Sd=[[$.second,1],[$.second,5],[$.second,15],[$.second,30],[$.minute,1],[$.minute,5],[$.minute,15],[$.minute,30],[$.hour,1],
[$.hour,3],[$.hour,6],[$.hour,12],[$.day,1],[$.day,2],[$.week,1],[$.month,1],[$.month,3],[$.year,1]],qi=Rd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",wb]]),Rh={range:function(a,b,f){return w.range(Math.ceil(a/f)*
f,+b,f).map(rb)},floor:wa,ceil:wa};Sd.year=$.year;$.scale=function(){return Ld(w.scale.linear(),Sd,qi)};var lg=Sd.map(function(a){return[a[0].utc,a[1]]}),ri=jg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",wb]]);lg.year=$.year.utc;$.scale.utc=function(){return Ld(w.scale.linear(),lg,ri)};w.text=Zc(function(a){return a.responseText});w.json=function(a,b){return Xb(a,"application/json",Sh,b)};w.html=function(a,b){return Xb(a,"text/html",Th,b)};w.xml=Zc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(w):"object"===typeof module&&module.exports?module.exports=w:this.d3=w}();
(function(){function I(a,b){return(new Date(b,a+1,0)).getDate()}var u=window.nv||{};u.version="1.1.15b";u.dev=!0;window.nv=u;u.tooltip=u.tooltip||{};u.utils=u.utils||{};u.models=u.models||{};u.charts={};u.graphs=[];u.logs={};u.dispatch=d3.dispatch("render_start","render_end");u.dev&&(u.dispatch.on("render_start",function(a){u.logs.startTime=+new Date}),u.dispatch.on("render_end",function(a){u.logs.endTime=+new Date;u.logs.totalTime=u.logs.endTime-u.logs.startTime;u.log("total",u.logs.totalTime)}));
u.log=function(){u.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):u.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};u.render=function(a){a=a||1;u.render.active=!0;u.dispatch.render_start();setTimeout(function(){for(var b,k,t=0;t<a&&(k=u.render.queue[t]);t++)b=k.generate(),typeof k.callback==typeof Function&&k.callback(b),u.graphs.push(b);u.render.queue.splice(0,
t);u.render.queue.length?setTimeout(arguments.callee,0):(u.dispatch.render_end(),u.render.active=!1)},0)};u.render.active=!1;u.render.queue=[];u.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});u.render.queue.push(a);u.render.active||u.render()};u.identity=function(a){return a};u.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,k){return function(t,m,e){var h=
a(t),s=[];h<t&&b(h);if(1<e)for(;h<m;)t=new Date(+h),0===k(t)%e&&s.push(t),b(h);else for(;h<m;)s.push(new Date(+h)),b(h);return s}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(I(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});u.interactiveGuideline=function(){function a(A){A.each(function(A){function D(){var k=d3.mouse(this),q=k[0],k=k[1],s=!0,t=!1;G&&(q=d3.event.offsetX,k=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(t=!0));s&&(q-=m.left,k-=m.top);0>q||0>k||q>K||k>T||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||t?G&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(h.elementMouseout({mouseX:q,mouseY:k}),a.renderGuideLine(null)):(s=e.invert(q),h.elementMousemove({mouseX:q,mouseY:k,pointXValue:s}),"dblclick"===d3.event.type&&h.elementDblclick({mouseX:q,mouseY:k,pointXValue:s}))}var C=d3.select(this),
K=k||960,T=t||400,Q=C.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([A]);Q.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");q&&(q.on("mousemove",D,!0).on("mouseout",D,!0).on("dblclick",D),a.renderGuideLine=function(a){s&&(a=Q.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[u.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",T).attr("y2",0),a.exit().remove())})})}var b=u.models.tooltip(),k=null,t=null,m={left:0,top:0},e=d3.scale.linear();d3.scale.linear();var h=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),s=!0,q=null,G=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=h;a.tooltip=b;a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.width=function(b){if(!arguments.length)return k;
k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.showGuideLine=function(b){if(!arguments.length)return s;s=b;return a};a.svgContainer=function(b){if(!arguments.length)return q;q=b;return a};return a};u.interactiveBisect=function(a,b,k){if(!a instanceof Array)return null;"function"!==typeof k&&(k=function(a,b){return a.x});var t=d3.bisector(k).left,t=d3.max([0,t(a,b)-1]),m=k(a[t],t);"undefined"===typeof m&&
(m=t);if(m===b)return t;var e=d3.min([t+1,a.length-1]);a=k(a[e],e);"undefined"===typeof a&&(a=e);return Math.abs(a-b)>=Math.abs(m-b)?t:e};u.nearestValueIndex=function(a,b,k){var t=Infinity,m=null;a.forEach(function(a,h){var s=Math.abs(b-a);s<=t&&s<k&&(t=s,m=h)});return m};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(z){var b;b=k&&k.series&&0<k.series.length?!0:!1;if(b){if(q){b=d3.select(q);"svg"!==b.node().tagName&&(b=b.select("svg"));var K=b.node()?b.attr("viewBox"):
null;K&&(K=K.split(" "),b=parseInt(b.style("width"))/K[2],A.left*=b,A.top*=b)}b=A.left;var K=null!=h?h:A.top,O;O=Q(k);var M;M=q?d3.select(q):d3.select("body");var H=M.select(".nvtooltip");null===H.node()&&(H=M.append("div").attr("class","nvtooltip "+(s?s:"xy-tooltip")).attr("id",D));H.node().innerHTML=O;H.style("top",0).style("left",0).style("opacity",0);H.selectAll("div, table, td, tr").classed(C,!0);H.classed(C,!0);G=O=H.node();if(q){(H=q.getElementsByTagName("svg")[0])?H.getBoundingClientRect():
q.getBoundingClientRect();var P=0;M=0;if(H){H=H.getBoundingClientRect();P=q.getBoundingClientRect();M=H.top;if(0>M){var y=q.getBoundingClientRect();M=Math.abs(M)>y.height?0:M}M=Math.abs(M-P.top);P=Math.abs(H.left-P.left)}b+=q.offsetLeft+P-2*q.scrollLeft;K+=q.offsetTop+M-2*q.scrollTop}e&&0<e&&(K=Math.floor(K/e)*e);u.tooltip.calcTooltipPosition([b,K],t,m,O);return a}}}var b=null,k=null,t="w",m=50,e=25,h=null,s=null,q=null,G=null,A={left:null,top:null},z=!0,D="nvtooltip-"+Math.floor(1E5*Math.random()),
C="nv-pointer-events-none",K=function(a,b){return a},T=function(a){return a},Q=function(a){if(null!=b)return b;if(null==a)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(T(a.value));var h=e.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
h.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});h.append("td").classed("key",!0).html(function(a){return a.key});h.append("td").classed("value",!0).html(function(a,b){return K(a.value,b)});h.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});e=e.node().outerHTML;void 0!==a.footer&&(e+="<div class='footer'>"+
a.footer+"</div>");return e};a.nvPointerEventsClass=C;a.content=function(e){if(!arguments.length)return b;b=e;return a};a.tooltipElem=function(){return G};a.contentGenerator=function(b){if(!arguments.length)return Q;"function"===typeof b&&(Q=b);return a};a.data=function(b){if(!arguments.length)return k;k=b;return a};a.gravity=function(b){if(!arguments.length)return t;t=b;return a};a.distance=function(b){if(!arguments.length)return m;m=b;return a};a.snapDistance=function(b){if(!arguments.length)return e;
e=b;return a};a.classes=function(b){if(!arguments.length)return s;s=b;return a};a.chartContainer=function(b){if(!arguments.length)return q;q=b;return a};a.position=function(b){if(!arguments.length)return A;A.left="undefined"!==typeof b.left?b.left:A.left;A.top="undefined"!==typeof b.top?b.top:A.top;return a};a.fixedTop=function(b){if(!arguments.length)return h;h=b;return a};a.enabled=function(b){if(!arguments.length)return z;z=b;return a};a.valueFormatter=function(b){if(!arguments.length)return K;
"function"===typeof b&&(K=b);return a};a.headerFormatter=function(b){if(!arguments.length)return T;"function"===typeof b&&(T=b);return a};a.id=function(){return D};return a};u.tooltip.show=function(a,b,k,t,m,e){var h=document.createElement("div");h.className="nvtooltip "+(e?e:"xy-tooltip");e=m;if(!m||m.tagName.match(/g|svg/i))e=document.getElementsByTagName("body")[0];h.style.left=0;h.style.top=0;h.style.opacity=0;h.innerHTML=b;e.appendChild(h);m&&(a[0]-=m.scrollLeft,a[1]-=m.scrollTop);u.tooltip.calcTooltipPosition(a,
k,t,h)};u.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};u.tooltip.findTotalOffsetTop=function(a,b){var k=b;do isNaN(a.offsetTop)||(k+=a.offsetTop);while(a=a.offsetParent);return k};u.tooltip.findTotalOffsetLeft=function(a,b){var k=b;do isNaN(a.offsetLeft)||(k+=a.offsetLeft);while(a=a.offsetParent);return k};u.tooltip.calcTooltipPosition=function(a,b,k,t){var m=parseInt(t.offsetHeight),e=parseInt(t.offsetWidth),h=u.utils.windowSize().width,
s=u.utils.windowSize().height,q=window.pageYOffset,G=window.pageXOffset,A,z,s=window.innerWidth>=document.body.scrollWidth?s:s-16,h=window.innerHeight>=document.body.scrollHeight?h:h-16;k=k||20;var D=function(a){return u.tooltip.findTotalOffsetTop(a,z)},C=function(a){return u.tooltip.findTotalOffsetLeft(a,A)};switch(b||"s"){case "e":A=a[0]-e-k;z=a[1]-m/2;b=C(t);D=D(t);b<G&&(A=a[0]+k>G?a[0]+k:G-b+A);D<q&&(z=q-D+z);D+m>q+s&&(z=q+s-D+z-m);break;case "w":A=a[0]+k;z=a[1]-m/2;b=C(t);D=D(t);b+e>h&&(A=a[0]-
e-k);D<q&&(z=q+5);D+m>q+s&&(z=q+s-D+z-m);break;case "n":A=a[0]-e/2-5;z=a[1]+k;b=C(t);D=D(t);b<G&&(A=G+5);b+e>h&&(A=A-e/2+5);D+m>q+s&&(z=q+s-D+z-m);break;case "s":A=a[0]-e/2;z=a[1]-m-k;b=C(t);D=D(t);b<G&&(A=G+5);b+e>h&&(A=A-e/2+5);q>D&&(z=q);break;case "none":A=a[0],z=a[1]-k,b=C(t),D=D(t)}t.style.left=A+"px";t.style.top=z+"px";t.style.opacity=1;t.style.position="absolute";return t};u.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();u.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};u.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(k){"function"==typeof b&&b(k);a(k)}}};u.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,k){return b.color||a[k%a.length]}:a:u.utils.defaultColor()};u.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
k){return b.color||a[k%a.length]}};u.utils.customTheme=function(a,b,k){b=b||function(a){return a.key};k=k||d3.scale.category20().range();var t=k.length;return function(m,e){var h=b(m);t||(t=k.length);return"undefined"!==typeof a[h]?"function"===typeof a[h]?a[h]():a[h]:k[--t]}};u.utils.pjax=function(a,b){function k(k){d3.html(k,function(k){var e=d3.select(b).node();e.parentNode.replaceChild(d3.select(k).select(b).node(),e);u.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);k(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&k(d3.event.state)})};u.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};u.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};u.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,k){if("function"===
typeof this[a])this[a](k)}.bind(this));return this};u.models.axis=function(){function a(m){m.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var m=a.select("g");null!==C?b.ticks(C):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(e.range()[1]-e.range()[0])/100);m.transition().call(b);T=T||b.scale();var u=b.tickFormat();null==u&&(u=T.tickFormat());var M=m.selectAll("text.nv-axislabel").data([h||
null]);M.exit().remove();switch(b.orient()){case "top":M.enter().append("text").attr("class","nv-axislabel");var H=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);M.attr("text-anchor","middle").attr("y",0).attr("x",H/2);s&&(H=a.selectAll("g.nv-axisMaxMin").data(e.domain()),H.enter().append("g").attr("class","nv-axisMaxMin").append("text"),H.exit().remove(),H.attr("transform",function(a,b){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),H.transition().attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case "bottom":var P=36,y=30,F=m.selectAll("g").select("text");G%360&&(F.each(function(a,b){var e=this.getBBox().width;e>y&&(y=e)}),H=Math.abs(Math.sin(G*Math.PI/180)),P=(H?H*y:y)+30,F.attr("transform",function(a,b,e){return"rotate("+G+" 0,0)"}).style("text-anchor",0<G%360?"start":"end"));M.enter().append("text").attr("class",
"nv-axislabel");H=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);M.attr("text-anchor","middle").attr("y",P).attr("x",H/2);s&&(H=a.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),H.enter().append("g").attr("class","nv-axisMaxMin").append("text"),H.exit().remove(),H.attr("transform",function(a,b){return"translate("+(e(a)+(D?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,e){return"rotate("+G+" 0,0)"}).style("text-anchor",G?0<G%360?"start":"end":"middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),H.transition().attr("transform",function(a,b){return"translate("+(e(a)+(D?e.rangeBand()/2:0))+",0)"}));z&&F.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":M.enter().append("text").attr("class","nv-axislabel");M.style("text-anchor",A?"middle":"begin").attr("transform",A?"rotate(90)":"").attr("y",
A?-Math.max(k.right,t)+12:-10).attr("x",A?e.range()[0]/2:b.tickPadding());s&&(H=a.selectAll("g.nv-axisMaxMin").data(e.domain()),H.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),H.exit().remove(),H.attr("transform",function(a,b){return"translate(0,"+e(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),H.transition().attr("transform",function(a,
b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case "left":M.enter().append("text").attr("class","nv-axislabel"),M.style("text-anchor",A?"middle":"end").attr("transform",A?"rotate(-90)":"").attr("y",A?-Math.max(k.left,t)+K:-10).attr("x",A?-e.range()[0]/2:-b.tickPadding()),s&&(H=a.selectAll("g.nv-axisMaxMin").data(e.domain()),H.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),H.exit().remove(),H.attr("transform",function(a,b){return"translate(0,"+
T(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),H.transition().attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}M.text(function(a){return a});!s||"left"!==b.orient()&&"right"!==b.orient()||(m.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(s&&("top"===b.orient()||"bottom"===b.orient())){var L=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?L.push(e(a)-this.getBBox().width-4):L.push(e(a)+this.getBBox().width+4)}catch(h){b?L.push(e(a)-4):L.push(e(a)+4)}});m.selectAll("g").each(function(a,b){if(e(a)<L[0]||
e(a)>L[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}q&&m.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);T=e.copy()});return a}var b=d3.svg.axis(),k={top:0,right:0,bottom:0,left:0},t=75,m=60,e=d3.scale.linear(),h=null,s=!0,q=!0,G=0,A=!0,z=!1,D=!1,C=null,K=12;b.scale(e).orient("bottom").tickFormat(function(a){return a});var T;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,e,"domain","range","rangeBand","rangeBands");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.ticks=function(b){if(!arguments.length)return C;
C=b;return a};a.height=function(b){if(!arguments.length)return m;m=b;return a};a.axisLabel=function(b){if(!arguments.length)return h;h=b;return a};a.showMaxMin=function(b){if(!arguments.length)return s;s=b;return a};a.highlightZero=function(b){if(!arguments.length)return q;q=b;return a};a.scale=function(h){if(!arguments.length)return e;e=h;b.scale(e);D="function"===typeof e.rangeBands;d3.rebind(a,e,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return A;
A=b;return a};a.rotateLabels=function(b){if(!arguments.length)return G;G=b;return a};a.staggerLabels=function(b){if(!arguments.length)return z;z=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return K;K=b;return a};return a};u.models.historicalBar=function(){function a(M){M.each(function(a){var M=k-b.left-b.right,y=t-b.top-b.bottom,F=d3.select(this);e.domain(K||d3.extent(a[0].values.map(s).concat(G)));z?e.range(Q||[.5*M/a[0].values.length,M*(a[0].values.length-.5)/a[0].values.length]):
e.range(Q||[0,M]);h.domain(T||d3.extent(a[0].values.map(q).concat(A))).range(B||[y,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var L=F.selectAll("g.nv-wrap.nv-historicalBar-"+m).data([a[0].values]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
m),W=E.append("defs"),E=E.append("g"),J=L.select("g");E.append("g").attr("class","nv-bars");L.attr("transform","translate("+b.left+","+b.top+")");F.on("click",function(a,b){R.chartClick({data:a,index:b,pos:d3.event,id:m})});W.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect");L.select("#nv-chart-clip-path-"+m+" rect").attr("width",M).attr("height",y);J.attr("clip-path",D?"url(#nv-chart-clip-path-"+m+")":"");y=L.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return s(a,b)});y.exit().remove();y.enter().append("rect").attr("x",0).attr("y",function(a,b){return u.utils.NaNtoZero(h(Math.max(0,q(a,b))))}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.abs(h(q(a,b))-h(0)))}).attr("transform",function(b,h){return"translate("+(e(s(b,h))-M/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,k){O&&(d3.select(this).classed("hover",!0),R.elementMouseover({point:b,series:a[0],pos:[e(s(b,k)),h(q(b,k))],pointIndex:k,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,e){O&&(d3.select(this).classed("hover",!1),R.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){O&&(R.elementClick({value:q(a,b),data:a,index:b,pos:[e(s(a,b)),h(q(a,b))],e:d3.event,id:m}),d3.event.stopPropagation())}).on("dblclick",function(a,b){O&&(R.elementDblClick({value:q(a,b),data:a,index:b,pos:[e(s(a,b)),h(q(a,b))],e:d3.event,id:m}),d3.event.stopPropagation())});y.attr("fill",function(a,b){return C(a,b)}).attr("class",function(a,
b,e){return(0>q(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+b}).transition().attr("transform",function(b,h){return"translate("+(e(s(b,h))-M/a[0].values.length*.45)+",0)"}).attr("width",M/a[0].values.length*.9);y.transition().attr("y",function(a,b){var e=0>q(a,b)?h(0):1>h(0)-h(q(a,b))?h(0)-1:h(q(a,b));return u.utils.NaNtoZero(e)}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.max(Math.abs(h(q(a,b))-h(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,
m=Math.floor(1E4*Math.random()),e=d3.scale.linear(),h=d3.scale.linear(),s=function(a){return a.x},q=function(a){return a.y},G=[],A=[0],z=!1,D=!0,C=u.utils.defaultColor(),K,T,Q,B,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),O=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+m).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+m).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=R;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return s;s=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};
a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return K;K=b;return a};a.yDomain=function(b){if(!arguments.length)return T;T=b;return a};a.xRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.yRange=function(b){if(!arguments.length)return B;B=b;return a};a.forceX=function(b){if(!arguments.length)return G;
G=b;return a};a.forceY=function(b){if(!arguments.length)return A;A=b;return a};a.padData=function(b){if(!arguments.length)return z;z=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return C;C=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return m;m=b;return a};a.interactive=function(b){if(!arguments.length)return O;O=!1;return a};return a};u.models.bullet=function(){function a(k){k.each(function(a,k){var u=
q-b.left-b.right,B=G-b.top-b.bottom,C=d3.select(this),A=m.call(this,a,k).slice().sort(d3.descending),M=e.call(this,a,k).slice().sort(d3.descending),H=h.call(this,a,k).slice().sort(d3.descending),P=(a.rangeLabels?a.rangeLabels:[]).slice(),y=(a.markerLabels?a.markerLabels:[]).slice(),F=(a.measureLabels?a.measureLabels:[]).slice(),L=d3.scale.linear().domain(d3.extent(d3.merge([s,A]))).range(t?[u,0]:[0,u]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(L.range());this.__chart__=L;var u=
d3.min(A),E=d3.max(A),A=A[1],C=C.selectAll("g.nv-wrap.nv-bullet").data([a]),W=C.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),J=C.select("g");W.append("rect").attr("class","nv-range nv-rangeMax");W.append("rect").attr("class","nv-range nv-rangeAvg");W.append("rect").attr("class","nv-range nv-rangeMin");W.append("rect").attr("class","nv-measure");W.append("path").attr("class","nv-markerTriangle");C.attr("transform","translate("+b.left+","+b.top+")");var W=function(a){return Math.abs(L(a)-
L(0))},U=function(a){return 0>a?L(a):L(0)};J.select("rect.nv-rangeMax").attr("height",B).attr("width",W(0<E?E:u)).attr("x",U(0<E?E:u)).datum(0<E?E:u);J.select("rect.nv-rangeAvg").attr("height",B).attr("width",W(A)).attr("x",U(A)).datum(A);J.select("rect.nv-rangeMin").attr("height",B).attr("width",W(E)).attr("x",U(E)).attr("width",W(0<E?u:E)).attr("x",U(0<E?u:E)).datum(0<E?u:E);J.select("rect.nv-measure").style("fill",z).attr("height",B/3).attr("y",B/3).attr("width",0>H?L(0)-L(H[0]):L(H[0])-L(0)).attr("x",
U(H)).on("mouseover",function(){D.elementMouseover({value:H[0],label:F[0]||"Current",pos:[L(H[0]),B/2]})}).on("mouseout",function(){D.elementMouseout({value:H[0],label:F[0]||"Current"})});u=B/6;if(M[0])J.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+L(M[0])+","+B/2+")"}).attr("d","M0,"+u+"L"+u+","+-u+" "+-u+","+-u+"Z").on("mouseover",function(){D.elementMouseover({value:M[0],label:y[0]||"Previous",pos:[L(M[0]),B/2]})}).on("mouseout",function(){D.elementMouseout({value:M[0],
label:y[0]||"Previous"})});else J.selectAll("path.nv-markerTriangle").remove();C.selectAll(".nv-range").on("mouseover",function(a,b){D.elementMouseover({value:a,label:P[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[L(a),B/2]})}).on("mouseout",function(a,b){D.elementMouseout({value:a,label:P[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},k="left",t=!1,m=function(a){return a.ranges},e=function(a){return a.markers},h=function(a){return a.measures},s=[0],q=
380,G=30,A=null,z=u.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=D;a.options=u.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return k;k=b;t="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return m;m=b;return a};a.markers=function(b){if(!arguments.length)return e;e=b;return a};a.measures=function(b){if(!arguments.length)return h;h=b;return a};a.forceX=function(b){if(!arguments.length)return s;s=b;return a};
a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;
z=u.utils.getColor(b);return a};return a};u.models.bulletChart=function(){function a(k){k.each(function(Q,B){var R=d3.select(this),O=(q||parseInt(R.style("width"))||960)-m.left-m.right,M=G-m.top-m.bottom,H=this;a.update=function(){a(k)};a.container=this;if(Q&&e.call(this,Q,B))R.selectAll(".nv-noData").remove();else return R=R.selectAll(".nv-noData").data([C]),R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),R.attr("x",m.left+O/2).attr("y",18+
m.top+M/2).text(function(a){return a}),a;var P=e.call(this,Q,B).slice().sort(d3.descending),y=h.call(this,Q,B).slice().sort(d3.descending),F=s.call(this,Q,B).slice().sort(d3.descending),L=R.selectAll("g.nv-wrap.nv-bulletChart").data([Q]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),R=L.select("g");E.append("g").attr("class","nv-bulletWrap");E.append("g").attr("class","nv-titles");L.attr("transform","translate("+m.left+","+m.top+")");var W=d3.scale.linear().domain([0,
Math.max(P[0],y[0],F[0])]).range(t?[O,0]:[0,O]),J=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(W.range());this.__chart__=W;P=E.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(G-m.top-m.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(a){return a.title});P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(O).height(M);P=R.select(".nv-bulletWrap");d3.transition(P).call(b);
var U=A||W.tickFormat(O/100),O=R.selectAll("g.nv-tick").data(W.ticks(O/50),function(a){return this.textContent||U(a)}),R=O.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1E-6);R.append("line").attr("y1",M).attr("y2",7*M/6);R.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*M/6).text(U);R=d3.transition(O).attr("transform",function(a){return"translate("+W(a)+",0)"}).style("opacity",1);R.select("line").attr("y1",
M).attr("y2",7*M/6);R.select("text").attr("y",7*M/6);d3.transition(O.exit()).attr("transform",function(a){return"translate("+W(a)+",0)"}).style("opacity",1E-6).remove();K.on("tooltipShow",function(b){b.key=Q.title;if(z){var e=H.parentNode,h=b.pos[0]+(e.offsetLeft||0)+m.left,p=b.pos[1]+(e.offsetTop||0)+m.top,k=D(b.key,b.label,b.value,b,a);u.tooltip.show([h,p],k,0>b.value?"e":"w",null,e)}})});d3.timer.flush();return a}var b=u.models.bullet(),k="left",t=!1,m={top:5,right:40,bottom:20,left:120},e=function(a){return a.ranges},
h=function(a){return a.markers},s=function(a){return a.measures},q=null,G=55,A=null,z=!0,D=function(a,b,e,h,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},C="No Data Available.",K=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){K.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){K.tooltipHide(a)});K.on("tooltipHide",function(){z&&u.tooltip.cleanup()});a.dispatch=K;a.bullet=b;d3.rebind(a,b,"color");a.options=u.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return k;k=b;t="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return e;e=b;return a};a.markers=function(b){if(!arguments.length)return h;h=b;return a};a.measures=function(b){if(!arguments.length)return s;s=b;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;
m.right="undefined"!=typeof b.right?b.right:m.right;m.bottom="undefined"!=typeof b.bottom?b.bottom:m.bottom;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.tickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.tooltips=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipContent=function(b){if(!arguments.length)return D;D=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};return a};u.models.cumulativeLineChart=function(){function a(p){p.each(function(p){function v(){qa.data([V]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var na=d3.select(this).classed("nv-chart-"+y,!0),I=this,X=(A||parseInt(na.style("width"))||960)-q.left-q.right,ga=(z||parseInt(na.style("height"))||400)-q.top-q.bottom;a.update=function(){na.transition().duration(U).call(a)};a.container=this;F.disabled=p.map(function(a){return!!a.disabled});if(!L){var ka;L={};for(ka in F)L[ka]=F[ka]instanceof Array?F[ka].slice(0):F[ka]}ka=d3.behavior.drag().on("dragstart",function(b,
e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){V.x=d3.event.x;V.i=Math.round(da.invert(V.x));v()}).on("dragend",function(b,e){d3.select(a.container).style("cursor","auto");F.index=V.i;J.stateChange(F)});if(p&&p.length&&p.filter(function(a){return a.values.length}).length)na.selectAll(".nv-noData").remove();else return ka=na.selectAll(".nv-noData").data([E]),ka.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ka.attr("x",
q.left+X/2).attr("y",q.top+ga/2).text(function(a){return a}),a;H=k.xScale();P=k.yScale();if(O)k.yDomain(null);else{var aa=p.filter(function(a){return!a.disabled}).map(function(a,b){var e=d3.extent(a.values,k.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),aa=[d3.min(aa,function(a){return a[0]}),d3.max(aa,function(a){return a[1]})];k.yDomain(aa)}da.domain([0,p[0].values.length-1]).range([0,X]).clamp(!0);p=b(V.i,p);var ea=R?"none":"all",ma=na.selectAll("g.nv-wrap.nv-cumulativeLine").data([p]),
ba=ma.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),aa=ma.select("g");ba.append("g").attr("class","nv-interactive");ba.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ba.append("g").attr("class","nv-y nv-axis");ba.append("g").attr("class","nv-background");ba.append("g").attr("class","nv-linesWrap").style("pointer-events",ea);ba.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ba.append("g").attr("class","nv-legendWrap");
ba.append("g").attr("class","nv-controlsWrap");D&&(e.width(X),aa.select(".nv-legendWrap").datum(p).call(e),q.top!=e.height()&&(q.top=e.height(),ga=(z||parseInt(na.style("height"))||400)-q.top-q.bottom),aa.select(".nv-legendWrap").attr("transform","translate(0,"+-q.top+")"));B&&(ea=[{key:"Re-scale y-axis",disabled:!O}],h.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),aa.select(".nv-controlsWrap").datum(ea).attr("transform","translate(0,"+-q.top+")").call(h));
ma.attr("transform","translate("+q.left+","+q.top+")");T&&aa.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");ea=p.filter(function(a){return a.tempDisabled});ma.select(".tempDisabled").remove();ea.length&&ma.append("text").attr("class","tempDisabled").attr("x",X/2).attr("y","-.71em").style("text-anchor","end").text(ea.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");R&&(s.width(X).height(ga).margin({left:q.left,top:q.top}).svgContainer(na).xScale(H),
ma.select(".nv-interactive").call(s));ba.select(".nv-background").append("rect");aa.select(".nv-background rect").attr("width",X).attr("height",ga);k.y(function(a){return a.display.y}).width(X).height(ga).color(p.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!p[b].disabled&&!p[b].tempDisabled}));ma=aa.select(".nv-linesWrap").datum(p.filter(function(a){return!a.disabled&&!a.tempDisabled}));ma.call(k);p.forEach(function(a,b){a.seriesIndex=b});ba=p.filter(function(a){return!a.disabled&&
!!W(a)});ba=aa.select(".nv-avgLinesWrap").selectAll("line").data(ba,function(a){return a.key});ea=function(a){a=P(W(a));return 0>a?0:a>ga?ga:a};ba.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return k.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",X).attr("y1",ea).attr("y2",ea);ba.style("stroke-opacity",function(a){a=P(W(a));return 0>a||a>ga?0:1}).attr("x1",0).attr("x2",X).attr("y1",ea).attr("y2",ea);ba.exit().remove();var qa=ma.selectAll(".nv-indexLine").data([V]);
qa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ka);qa.attr("transform",function(a){return"translate("+da(a.i)+",0)"}).attr("height",ga);C&&(t.scale(H).ticks(Math.min(p[0].values.length,X/70)).tickSize(-ga,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")"),d3.transition(aa.select(".nv-x.nv-axis")).call(t));K&&(m.scale(P).ticks(ga/36).tickSize(-X,0),d3.transition(aa.select(".nv-y.nv-axis")).call(m));
aa.select(".nv-background rect").on("click",function(){V.x=d3.mouse(this)[0];V.i=Math.round(da.invert(V.x));F.index=V.i;J.stateChange(F);v()});k.dispatch.on("elementClick",function(a){V.i=a.pointIndex;V.x=da(V.i);F.index=V.i;J.stateChange(F);v()});h.dispatch.on("legendClick",function(b,e){b.disabled=!b.disabled;O=!b.disabled;F.rescaleY=O;J.stateChange(F);a.update()});e.dispatch.on("stateChange",function(b){F.disabled=b.disabled;J.stateChange(F);a.update()});s.dispatch.on("elementMousemove",function(b){k.clearHighlights();
var e,h,v,y=[];p.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(p,m){h=u.interactiveBisect(p.values,b.pointXValue,a.x());k.highlightPoint(m,h,!0);var q=p.values[h];"undefined"!==typeof q&&("undefined"===typeof e&&(e=q),"undefined"===typeof v&&(v=a.xScale()(a.x()(q,h))),y.push({key:p.key,value:a.y()(q,h),color:G(p,p.seriesIndex)}))});if(2<y.length){var E=a.yScale().invert(b.mouseY),F=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),E=u.nearestValueIndex(y.map(function(a){return a.value}),
E,F);null!==E&&(y[E].highlight=!0)}E=t.tickFormat()(a.x()(e,h),h);s.tooltip.position({left:v+q.left,top:b.mouseY+q.top}).chartContainer(I.parentNode).enabled(Q).valueFormatter(function(a,b){return m.tickFormat()(a)}).data({value:E,series:y})();s.renderGuideLine(v)});s.dispatch.on("elementMouseout",function(a){J.tooltipHide();k.clearHighlights()});J.on("tooltipShow",function(b){if(Q){var e=I.parentNode,p=b.pos[0]+(e.offsetLeft||0),h=b.pos[1]+(e.offsetTop||0),q=t.tickFormat()(k.x()(b.point,b.pointIndex)),
s=m.tickFormat()(k.y()(b.point,b.pointIndex));b=M(b.series.key,q,s,b,a);u.tooltip.show([p,h],b,null,null,e)}});J.on("changeState",function(b){"undefined"!==typeof b.disabled&&(p.forEach(function(a,e){a.disabled=b.disabled[e]}),F.disabled=b.disabled);"undefined"!==typeof b.index&&(V.i=b.index,V.x=da(V.i),F.index=b.index,qa.data([V]));"undefined"!==typeof b.rescaleY&&(O=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,e){if(!b.values)return b;var h=b.values[a];if(null==h)return b;
var m=k.y()(h,a);if(-.95>m&&!v)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(k.y()(a,b)-m)/(1+m)};return a});return b})}var k=u.models.line(),t=u.models.axis(),m=u.models.axis(),e=u.models.legend(),h=u.models.legend(),s=u.interactiveGuideline(),q={top:30,right:30,bottom:50,left:60},G=u.utils.defaultColor(),A=null,z=null,D=!0,C=!0,K=!0,T=!1,Q=!0,B=!0,R=!1,O=!0,M=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},H,P,y=k.id(),F={index:0,
rescaleY:O},L=null,E="No Data Available.",W=function(a){return a.average},J=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),U=250,v=!1;t.orient("bottom").tickPadding(7);m.orient(T?"right":"left");h.updateState(!1);var da=d3.scale.linear(),V={i:0,x:0};k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];J.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",function(a){J.tooltipHide(a)});J.on("tooltipHide",function(){Q&&u.tooltip.cleanup()});
a.dispatch=J;a.lines=k;a.legend=e;a.xAxis=t;a.yAxis=m;a.interactiveLayer=s;d3.rebind(a,k,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left=
"undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return A;A=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);e.color(G);return a};a.rescaleY=function(b){if(!arguments.length)return O;O=b;return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return R;R=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return C;C=b;return a};a.showYAxis=function(b){if(!arguments.length)return K;K=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return T;T=b;m.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return M;M=b;return a};a.state=function(b){if(!arguments.length)return F;
F=b;return a};a.defaultState=function(b){if(!arguments.length)return L;L=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};a.average=function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return v;v=b;return a};return a};u.models.discreteBar=function(){function a(m){m.each(function(a){var m=k-b.left-b.right,y=t-b.top-b.bottom,F=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var u=C&&K?[]:a.map(function(a){return a.values.map(function(a,b){return{x:s(a,b),y:q(a,b),y0:a.y0}})});e.domain(C||d3.merge(u).map(function(a){return a.x})).rangeBands(T||[0,m],.1);h.domain(K||d3.extent(d3.merge(u).map(function(a){return a.y}).concat(G)));z?h.range(Q||[y-(0>h.domain()[0]?12:0),0<h.domain()[1]?12:0]):h.range(Q||[y,0]);O=O||h.copy().range([h(0),h(0)]);m=F.selectAll("g.nv-wrap.nv-discretebar").data([a]);y=m.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");m.select("g");y.append("g").attr("class","nv-groups");m.attr("transform","translate("+b.left+","+b.top+")");m=m.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});m.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);m.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();m.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
m.transition().style("stroke-opacity",1).style("fill-opacity",.75);m=m.selectAll("g.nv-bar").data(function(a){return a.values});m.exit().remove();y=m.enter().append("g").attr("transform",function(a,b,k){return"translate("+(e(s(a,b))+.05*e.rangeBand())+", "+h(0)+")"}).on("mouseover",function(b,k){d3.select(this).classed("hover",!0);B.elementMouseover({value:q(b,k),point:b,series:a[b.series],pos:[e(s(b,k))+e.rangeBand()*(b.series+.5)/a.length,h(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,e){d3.select(this).classed("hover",!1);B.elementMouseout({value:q(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){B.elementClick({value:q(b,k),point:b,series:a[b.series],pos:[e(s(b,k))+e.rangeBand()*(b.series+.5)/a.length,h(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,k){B.elementDblClick({value:q(b,k),point:b,series:a[b.series],pos:[e(s(b,k))+e.rangeBand()*(b.series+
.5)/a.length,h(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});y.append("rect").attr("height",0).attr("width",.9*e.rangeBand()/a.length);z?(y.append("text").attr("text-anchor","middle"),m.select("text").text(function(a,b){return D(q(a,b))}).transition().attr("x",.9*e.rangeBand()/2).attr("y",function(a,b){return 0>q(a,b)?h(q(a,b))-h(0)+12:-4})):m.selectAll("text").remove();m.attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||A(a,b)}).style("stroke",function(a,b){return a.color||A(a,b)}).select("rect").attr("class",R).transition().attr("width",.9*e.rangeBand()/a.length);m.transition().attr("transform",function(a,b){var k=e(s(a,b))+.05*e.rangeBand(),m=0>q(a,b)?h(0):1>h(0)-h(q(a,b))?h(0)-1:h(q(a,b));return"translate("+k+", "+m+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(h(q(a,b))-h(K&&K[0]||0))||1)});e.copy();O=h.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},k=960,t=500,m=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),h=d3.scale.linear(),s=function(a){return a.x},q=function(a){return a.y},G=[0],A=u.utils.defaultColor(),z=!1,D=d3.format(",.2f"),C,K,T,Q,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),R="discreteBar",O;a.dispatch=B;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return s;s=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=
function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;
return a};a.xDomain=function(b){if(!arguments.length)return C;C=b;return a};a.yDomain=function(b){if(!arguments.length)return K;K=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return A;A=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return m;m=b;return a};a.showValues=function(b){if(!arguments.length)return z;
z=b;return a};a.valueFormat=function(b){if(!arguments.length)return D;D=b;return a};a.rectClass=function(b){if(!arguments.length)return R;R=b;return a};return a};u.models.discreteBarChart=function(){function a(s){s.each(function(s){var H=d3.select(this),O=this,y=(e||parseInt(H.style("width"))||960)-m.left-m.right,F=(h||parseInt(H.style("height"))||400)-m.top-m.bottom;a.update=function(){B.beforeUpdate();H.transition().duration(R).call(a)};a.container=this;if(s&&s.length&&s.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();
else return s=H.selectAll(".nv-noData").data([Q]),s.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),s.attr("x",m.left+y/2).attr("y",m.top+F/2).text(function(a){return a}),a;K=b.xScale();T=b.yScale().clamp(!0);var L=H.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),W=E.append("defs"),L=L.select("g");E.append("g").attr("class","nv-x nv-axis");E.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");E.append("g").attr("class","nv-barsWrap");L.attr("transform","translate("+m.left+","+m.top+")");A&&L.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");b.width(y).height(F);L.select(".nv-barsWrap").datum(s.filter(function(a){return!a.disabled})).transition().call(b);W.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");L.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",K.rangeBand()*(z?2:1)).attr("height",
16).attr("x",-K.rangeBand()/(z?1:2));q&&(k.scale(K).ticks(y/100).tickSize(-F,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+(T.range()[0]+(b.showValues()&&0>T.domain()[0]?16:0))+")"),L.select(".nv-x.nv-axis").transition().call(k),s=L.select(".nv-x.nv-axis").selectAll("g"),z&&s.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));G&&(t.scale(T).ticks(F/36).tickSize(-y,0),L.select(".nv-y.nv-axis").transition().call(t));L.select(".nv-zeroLine line").attr("x1",
0).attr("x2",y).attr("y1",T(0)).attr("y2",T(0));B.on("tooltipShow",function(e){if(D){var h=O.parentNode,m=e.pos[0]+(h.offsetLeft||0),q=e.pos[1]+(h.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),p=t.tickFormat()(b.y()(e.point,e.pointIndex)),s=C(e.series.key,s,p,e,a);u.tooltip.show([m,q],s,0>e.value?"n":"s",null,h)}})});return a}var b=u.models.discreteBar(),k=u.models.axis(),t=u.models.axis(),m={top:15,right:10,bottom:50,left:60},e=null,h=null,s=u.utils.getColor(),q=!0,G=!0,A=!1,z=!1,D=
!0,C=function(a,b,e,h,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},K,T,Q="No Data Available.",B=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),R=250;k.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient(A?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+m.left,a.pos[1]+m.top];B.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){B.tooltipHide(a)});B.on("tooltipHide",function(){D&&
u.tooltip.cleanup()});a.dispatch=B;a.discretebar=b;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;m.right="undefined"!=typeof b.right?b.right:m.right;m.bottom="undefined"!=typeof b.bottom?b.bottom:m.bottom;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.width=function(b){if(!arguments.length)return e;
e=b;return a};a.height=function(b){if(!arguments.length)return h;h=b;return a};a.color=function(e){if(!arguments.length)return s;s=u.utils.getColor(e);b.color(s);return a};a.showXAxis=function(b){if(!arguments.length)return q;q=b;return a};a.showYAxis=function(b){if(!arguments.length)return G;G=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return A;A=b;t.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return z;z=b;return a};a.tooltips=function(b){if(!arguments.length)return D;
D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.noData=function(b){if(!arguments.length)return Q;Q=b;return a};a.transitionDuration=function(b){if(!arguments.length)return R;R=b;return a};return a};u.models.distribution=function(){function a(k){k.each(function(a){var k="x"==m?"y":"x",u=d3.select(this);q=q||s;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return h(a,b)});u=a.selectAll("line.nv-dist"+m).data(function(a){return a.values});u.enter().append("line").attr(m+"1",function(a,b){return q(e(a,b))}).attr(m+"2",function(a,b){return q(e(a,b))});a.exit().selectAll("line.nv-dist"+m).transition().attr(m+"1",function(a,b){return s(e(a,
b))}).attr(m+"2",function(a,b){return s(e(a,b))}).style("stroke-opacity",0).remove();u.attr("class",function(a,b){return"nv-dist"+m+" nv-dist"+m+"-"+b}).attr(k+"1",0).attr(k+"2",t);u.transition().attr(m+"1",function(a,b){return s(e(a,b))}).attr(m+"2",function(a,b){return s(e(a,b))});q=s.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=400,t=8,m="x",e=function(a){return a[m]},h=u.utils.defaultColor(),s=d3.scale.linear(),q;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.axis=function(b){if(!arguments.length)return m;m=b;return a};a.size=function(b){if(!arguments.length)return t;t=b;return a};a.getData=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return s;
s=b;return a};a.color=function(b){if(!arguments.length)return h;h=u.utils.getColor(b);return a};return a};u.models.historicalBarChart=function(){function a(P){P.each(function(y){var F=d3.select(this),L=this,E=(s||parseInt(F.style("width"))||960)-e.left-e.right,W=(q||parseInt(F.style("height"))||400)-e.top-e.bottom;a.update=function(){F.transition().duration(H).call(a)};a.container=this;B.disabled=y.map(function(a){return!!a.disabled});if(!R){var J;R={};for(J in B)R[J]=B[J]instanceof Array?B[J].slice(0):
B[J]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)F.selectAll(".nv-noData").remove();else return J=F.selectAll(".nv-noData").data([O]),J.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),J.attr("x",e.left+E/2).attr("y",e.top+W/2).text(function(a){return a}),a;T=b.xScale();Q=b.yScale();var U=F.selectAll("g.nv-wrap.nv-historicalBarChart").data([y]);J=U.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var v=U.select("g");J.append("g").attr("class","nv-x nv-axis");J.append("g").attr("class","nv-y nv-axis");J.append("g").attr("class","nv-barsWrap");J.append("g").attr("class","nv-legendWrap");G&&(m.width(E),v.select(".nv-legendWrap").datum(y).call(m),e.top!=m.height()&&(e.top=m.height(),W=(q||parseInt(F.style("height"))||400)-e.top-e.bottom),U.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")"));U.attr("transform","translate("+e.left+","+e.top+")");D&&v.select(".nv-y.nv-axis").attr("transform",
"translate("+E+",0)");b.width(E).height(W).color(y.map(function(a,b){return a.color||h(a,b)}).filter(function(a,b){return!y[b].disabled}));v.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);A&&(k.scale(T).tickSize(-W,0),v.select(".nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")"),v.select(".nv-x.nv-axis").transition().call(k));z&&(t.scale(Q).ticks(W/36).tickSize(-E,0),v.select(".nv-y.nv-axis").transition().call(t));m.dispatch.on("legendClick",
function(b,e){b.disabled=!b.disabled;y.filter(function(a){return!a.disabled}).length||y.map(function(a){a.disabled=!1;U.selectAll(".nv-series").classed("disabled",!1);return a});B.disabled=y.map(function(a){return!!a.disabled});M.stateChange(B);P.transition().call(a)});m.dispatch.on("legendDblclick",function(b){y.forEach(function(a){a.disabled=!0});b.disabled=!1;B.disabled=y.map(function(a){return!!a.disabled});M.stateChange(B);a.update()});M.on("tooltipShow",function(e){if(C){var h=L.parentNode;
if(h){var p=d3.select(h).select("svg"),m=p.node()?p.attr("viewBox"):null;m&&(m=m.split(" "),p=parseInt(p.style("width"))/m[2],e.pos[0]*=p,e.pos[1]*=p)}var p=e.pos[0]+(h.offsetLeft||0),m=e.pos[1]+(h.offsetTop||0),q=k.tickFormat()(b.x()(e.point,e.pointIndex)),s=t.tickFormat()(b.y()(e.point,e.pointIndex));e=K(e.series.key,q,s,e,a);u.tooltip.show([p,m],e,null,null,h)}});M.on("changeState",function(b){"undefined"!==typeof b.disabled&&(y.forEach(function(a,e){a.disabled=b.disabled[e]}),B.disabled=b.disabled);
a.update()})});return a}var b=u.models.historicalBar(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e={top:30,right:90,bottom:50,left:90},h=u.utils.defaultColor(),s=null,q=null,G=!1,A=!0,z=!0,D=!1,C=!0,K=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},T,Q,B={},R=null,O="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),H=250;k.orient("bottom").tickPadding(7);t.orient(D?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+e.left,a.pos[1]+e.top];M.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){M.tooltipHide(a)});M.on("tooltipHide",function(){C&&u.tooltip.cleanup()});a.dispatch=M;a.bars=b;a.legend=m;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=u.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return e;e.top="undefined"!=typeof b.top?b.top:e.top;e.right="undefined"!=typeof b.right?b.right:e.right;e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom;e.left="undefined"!=typeof b.left?b.left:e.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return h;h=u.utils.getColor(b);m.color(h);return a};a.showLegend=function(b){if(!arguments.length)return G;
G=b;return a};a.showXAxis=function(b){if(!arguments.length)return A;A=b;return a};a.showYAxis=function(b){if(!arguments.length)return z;z=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return D;D=b;t.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return C;C=b;return a};a.tooltipContent=function(b){if(!arguments.length)return K;K=b;return a};a.state=function(b){if(!arguments.length)return B;B=b;return a};a.defaultState=function(b){if(!arguments.length)return R;
R=b;return a};a.noData=function(b){if(!arguments.length)return O;O=b;return a};a.transitionDuration=function(b){if(!arguments.length)return H;H=b;return a};return a};u.models.indentedTree=function(){function a(b){b.each(function(b){function e(b,k,h){d3.event.stopPropagation();if(d3.event.shiftKey&&!h)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&e(a,0,!0)}),!0;if(!u(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function k(a){return a._values&&a._values.length?D:a.values&&a.values.length?C:""}function m(a){return a._values&&a._values.length}function u(a){return(a=a.values||a._values)&&a.length}var y=1,F=d3.select(this),L=d3.layout.tree().children(function(a){return a.values}).size([t,G]);a.update=function(){F.transition().duration(600).call(a)};b[0]||(b[0]={key:q});var y=L.nodes(b[0]),E=d3.select(this).selectAll("div").data([[y]]);b=E.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
E=E.select("table").attr("width","100%").attr("class",z);if(h){var B=b.append("thead").append("tr");A.forEach(function(a){B.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=E.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");y=d3.max(y,function(a){return a.depth});L.size([t,y*G]);var J=b.selectAll("tr").data(function(a){return a.filter(function(a){return s&&!a.children?s(a):!0})},function(a,
b){return a.id||a.id||++Q});J.exit().remove();J.select("img.nv-treeicon").attr("src",k).classed("folded",m);var U=J.enter().append("tr");A.forEach(function(a,b){var h=U.append("td").style("padding-left",function(a){return(b?0:a.depth*G+12+(k(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)h.append("img").classed("nv-treeicon",!0).classed("nv-folded",m).attr("src",k).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return k(a)?
"inline-block":"none"}).on("click",e);h.each(function(e){!b&&T(e)?d3.select(this).append("a").attr("href",T).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(h.append("span").attr("class","nv-childrenCount"),J.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return s?s(a):!0}).length||a._values&&a._values.filter(function(a){return s?s(a):!0}).length||0)+")":""}))});J.order().on("click",function(a){K.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){K.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){K.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){K.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=u.utils.defaultColor(),e=Math.floor(1E4*Math.random()),h=!0,s=!1,q="No Data Available.",G=20,A=[{key:"key",label:"Name",type:"text"}],z=null,D="images/grey-plus.png",C="images/grey-minus.png",K=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),T=function(a){return a.url},Q=0;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right=
"undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return m;m=u.utils.getColor(b);scatter.color(m);return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.header=function(b){if(!arguments.length)return h;h=b;
return a};a.noData=function(b){if(!arguments.length)return q;q=b;return a};a.filterZero=function(b){if(!arguments.length)return s;s=b;return a};a.columns=function(b){if(!arguments.length)return A;A=b;return a};a.tableClass=function(b){if(!arguments.length)return z;z=b;return a};a.iconOpen=function(b){if(!arguments.length)return D;D=b;return a};a.iconClose=function(b){if(!arguments.length)return C;C=b;return a};a.getUrl=function(b){if(!arguments.length)return T;T=b;return a};return a};u.models.legend=
function(){function a(z){z.each(function(a){var z=k-b.left-b.right,K=d3.select(this).selectAll("g.nv-legend").data([a]);K.enter().append("g").attr("class","nvd3 nv-legend").append("g");var T=K.select("g");K.attr("transform","translate("+b.left+","+b.top+")");var K=T.selectAll(".nv-series").data(function(a){return a}),Q=K.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){A.legendMouseover(a,b)}).on("mouseout",function(a,b){A.legendMouseout(a,b)}).on("click",function(b,e){A.legendClick(b,
e);q&&(G?(a.forEach(function(a){a.disabled=!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),A.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,e){A.legendDblclick(b,e);q&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,A.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});Q.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);Q.append("text").attr("text-anchor",
"start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");K.classed("disabled",function(a){return a.disabled});K.exit().remove();K.select("circle").style("fill",function(a,b){return a.color||e(a,b)}).style("stroke",function(a,b){return a.color||e(a,b)});K.select("text").text(m);if(h){var B=[];K.each(function(a,b){var e=d3.select(this).select("text"),h;try{if(h=e.getComputedTextLength(),0>=h)throw Error();}catch(k){h=u.utils.calcApproxTextWidth(e)}B.push(h+28)});for(var R=0,O=0,Q=[];O<
z&&R<B.length;)Q[R]=B[R],O+=B[R++];for(0===R&&(R=1);O>z&&1<R;){Q=[];R--;for(O=0;O<B.length;O++)B[O]>(Q[O%R]||0)&&(Q[O%R]=B[O]);O=Q.reduce(function(a,b,e,h){return a+b})}for(var M=[],H=z=0;z<R;z++)M[z]=H,H+=Q[z];K.attr("transform",function(a,b){return"translate("+M[b%R]+","+(5+20*Math.floor(b/R))+")"});s?T.attr("transform","translate("+(k-b.right-O)+","+b.top+")"):T.attr("transform","translate(0,"+b.top+")");t=b.top+b.bottom+20*Math.ceil(B.length/R)}else{var P=5,y=5,F=0,L;K.attr("transform",function(a,
e){var h=d3.select(this).select("text").node().getComputedTextLength()+28;L=y;k<b.left+b.right+L+h&&(y=L=5,P+=20);y+=h;y>F&&(F=y);return"translate("+L+","+P+")"});T.attr("transform","translate("+(k-b.right-F)+","+b.top+")");t=b.top+b.bottom+P+15}});return a}var b={top:5,right:0,bottom:5,left:0},k=400,t=20,m=function(a){return a.key},e=u.utils.defaultColor(),h=!0,s=!0,q=!0,G=!1,A=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=A;a.options=u.utils.optionsFunc.bind(a);
a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.key=function(b){if(!arguments.length)return m;m=b;return a};a.color=function(b){if(!arguments.length)return e;
e=u.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return h;h=b;return a};a.rightAlign=function(b){if(!arguments.length)return s;s=b;return a};a.updateState=function(b){if(!arguments.length)return q;q=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return G;G=b;return a};return a};u.models.line=function(){function a(Q){Q.each(function(a){var Q=t-k.left-k.right,O=m-k.top-k.bottom,M=d3.select(this);z=b.xScale();D=b.yScale();K=K||z;T=T||D;a=M.selectAll("g.nv-wrap.nv-line").data([a]);
var H=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),M=H.append("defs"),P=H.append("g"),H=a.select("g");P.append("g").attr("class","nv-groups");P.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+k.left+","+k.top+")");b.width(Q).height(O);P=a.select(".nv-scatterWrap");P.transition().call(b);M.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",Q).attr("height",0<O?O:0);H.attr("clip-path",A?
"url(#nv-edge-clip-"+b.id()+")":"");P.attr("clip-path",A?"url(#nv-edge-clip-"+b.id()+")":"");Q=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});Q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);Q.exit().remove();Q.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return e(a,b)}).style("stroke",function(a,b){return e(a,b)});Q.transition().style("stroke-opacity",
1).style("fill-opacity",.5);O=Q.selectAll("path.nv-area").data(function(a){return G(a)?[a]:[]});O.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(C).defined(q).x(function(a,b){return u.utils.NaNtoZero(K(h(a,b)))}).y0(function(a,b){return u.utils.NaNtoZero(T(s(a,b)))}).y1(function(a,b){return T(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});Q.exit().selectAll("path.nv-area").remove();O.transition().attr("d",
function(a){return d3.svg.area().interpolate(C).defined(q).x(function(a,b){return u.utils.NaNtoZero(z(h(a,b)))}).y0(function(a,b){return u.utils.NaNtoZero(D(s(a,b)))}).y1(function(a,b){return D(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});Q=Q.selectAll("path.nv-line").data(function(a){return[a.values]});Q.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(C).defined(q).x(function(a,b){return u.utils.NaNtoZero(K(h(a,b)))}).y(function(a,
b){return u.utils.NaNtoZero(T(s(a,b)))}));Q.transition().attr("d",d3.svg.line().interpolate(C).defined(q).x(function(a,b){return u.utils.NaNtoZero(z(h(a,b)))}).y(function(a,b){return u.utils.NaNtoZero(D(s(a,b)))}));K=z.copy();T=D.copy()});return a}var b=u.models.scatter(),k={top:0,right:0,bottom:0,left:0},t=960,m=500,e=u.utils.defaultColor(),h=function(a){return a.x},s=function(a){return a.y},q=function(a,b){return!isNaN(s(a,b))&&null!==s(a,b)},G=function(a){return a.area},A=!1,z,D,C="linear";b.size(16).sizeDomain([16,
256]);var K,T;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?
b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return m;m=b;return a};a.x=function(e){if(!arguments.length)return h;h=e;b.x(e);return a};a.y=function(e){if(!arguments.length)return s;s=e;b.y(e);return a};a.clipEdge=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(h){if(!arguments.length)return e;e=u.utils.getColor(h);b.color(e);return a};a.interpolate=
function(b){if(!arguments.length)return C;C=b;return a};a.defined=function(b){if(!arguments.length)return q;q=b;return a};a.isArea=function(b){if(!arguments.length)return G;G=d3.functor(b);return a};return a};u.models.lineChart=function(){function a(F){F.each(function(F){var E=d3.select(this),W=this,J=(q||parseInt(E.style("width"))||960)-h.left-h.right,U=(G||parseInt(E.style("height"))||400)-h.top-h.bottom;a.update=function(){E.transition().duration(y).call(a)};a.container=this;O.disabled=F.map(function(a){return!!a.disabled});
if(!M){var v;M={};for(v in O)M[v]=O[v]instanceof Array?O[v].slice(0):O[v]}if(F&&F.length&&F.filter(function(a){return a.values.length}).length)E.selectAll(".nv-noData").remove();else return v=E.selectAll(".nv-noData").data([H]),v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",h.left+J/2).attr("y",h.top+U/2).text(function(a){return a}),a;B=b.xScale();R=b.yScale();v=E.selectAll("g.nv-wrap.nv-lineChart").data([F]);var da=v.enter().append("g").attr("class",
"nvd3 nv-wrap nv-lineChart").append("g"),V=v.select("g");da.append("rect").style("opacity",0);da.append("g").attr("class","nv-x nv-axis");da.append("g").attr("class","nv-y nv-axis");da.append("g").attr("class","nv-linesWrap");da.append("g").attr("class","nv-legendWrap");da.append("g").attr("class","nv-interactive");V.select("rect").attr("width",J).attr("height",0<U?U:0);A&&(m.width(J),V.select(".nv-legendWrap").datum(F).call(m),h.top!=m.height()&&(h.top=m.height(),U=(G||parseInt(E.style("height"))||
400)-h.top-h.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")"));v.attr("transform","translate("+h.left+","+h.top+")");C&&V.select(".nv-y.nv-axis").attr("transform","translate("+J+",0)");K&&(e.width(J).height(U).margin({left:h.left,top:h.top}).svgContainer(E).xScale(B),v.select(".nv-interactive").call(e));b.width(J).height(U).color(F.map(function(a,b){return a.color||s(a,b)}).filter(function(a,b){return!F[b].disabled}));V.select(".nv-linesWrap").datum(F.filter(function(a){return!a.disabled})).transition().call(b);
z&&(k.scale(B).ticks(J/100).tickSize(-U,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),V.select(".nv-x.nv-axis").transition().call(k));D&&(t.scale(R).ticks(U/36).tickSize(-J,0),V.select(".nv-y.nv-axis").transition().call(t));m.dispatch.on("stateChange",function(b){O=b;P.stateChange(O);a.update()});e.dispatch.on("elementMousemove",function(p){b.clearHighlights();var m,q,v,y=[];F.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(e,h){q=u.interactiveBisect(e.values,
p.pointXValue,a.x());b.highlightPoint(h,q,!0);var k=e.values[q];"undefined"!==typeof k&&("undefined"===typeof m&&(m=k),"undefined"===typeof v&&(v=a.xScale()(a.x()(k,q))),y.push({key:e.key,value:a.y()(k,q),color:s(e,e.seriesIndex)}))});if(2<y.length){var E=a.yScale().invert(p.mouseY),J=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),E=u.nearestValueIndex(y.map(function(a){return a.value}),E,J);null!==E&&(y[E].highlight=!0)}E=k.tickFormat()(a.x()(m,q));e.tooltip.position({left:v+h.left,
top:p.mouseY+h.top}).chartContainer(W.parentNode).enabled(T).valueFormatter(function(a,b){return t.tickFormat()(a)}).data({value:E,series:y})();e.renderGuideLine(v)});e.dispatch.on("elementMouseout",function(a){P.tooltipHide();b.clearHighlights()});P.on("tooltipShow",function(e){if(T){var h=W.parentNode,m=e.pos[0]+(h.offsetLeft||0),q=e.pos[1]+(h.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),v=t.tickFormat()(b.y()(e.point,e.pointIndex));e=Q(e.series.key,s,v,e,a);u.tooltip.show([m,q],
e,null,null,h)}});P.on("changeState",function(b){"undefined"!==typeof b.disabled&&F.length===b.disabled.length&&(F.forEach(function(a,e){a.disabled=b.disabled[e]}),O.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e=u.interactiveGuideline(),h={top:30,right:20,bottom:50,left:60},s=u.utils.defaultColor(),q=null,G=null,A=!0,z=!0,D=!0,C=!1,K=!1,T=!0,Q=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},B,R,O={},M=
null,H="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=250;k.orient("bottom").tickPadding(7);t.orient(C?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){T&&u.tooltip.cleanup()});a.dispatch=P;a.lines=b;a.legend=m;a.xAxis=k;a.yAxis=t;a.interactiveLayer=e;d3.rebind(a,b,"defined",
"isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:h.left;return a};a.width=function(b){if(!arguments.length)return q;
q=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return s;s=u.utils.getColor(b);m.color(s);return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return z;z=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return C;C=b;t.orient(b?"right":"left");return a};a.useInteractiveGuideline=
function(b){if(!arguments.length)return K;K=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltips=function(b){if(!arguments.length)return T;T=b;return a};a.tooltipContent=function(b){if(!arguments.length)return Q;Q=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return M;M=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};a.transitionDuration=function(b){if(!arguments.length)return y;
y=b;return a};return a};u.models.linePlusBarChart=function(){function a(y){y.each(function(y){var L=d3.select(this),E=this,A=(q||parseInt(L.style("width"))||960)-s.left-s.right,J=(G||parseInt(L.style("height"))||400)-s.top-s.bottom;a.update=function(){L.transition().call(a)};O.disabled=y.map(function(a){return!!a.disabled});if(!M){var z;M={};for(z in O)M[z]=O[z]instanceof Array?O[z].slice(0):O[z]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();
else return z=L.selectAll(".nv-noData").data([H]),z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),z.attr("x",s.left+A/2).attr("y",s.top+J/2).text(function(a){return a}),a;z=y.filter(function(a){return!a.disabled&&a.bar});var v=y.filter(function(a){return!a.bar});Q=v.filter(function(a){return!a.disabled}).length&&v.filter(function(a){return!a.disabled})[0].values.length?b.xScale():k.xScale();B=k.yScale();R=b.yScale();var da=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([y]),
V=da.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),p=da.select("g");V.append("g").attr("class","nv-x nv-axis");V.append("g").attr("class","nv-y1 nv-axis");V.append("g").attr("class","nv-y2 nv-axis");V.append("g").attr("class","nv-barsWrap");V.append("g").attr("class","nv-linesWrap");V.append("g").attr("class","nv-legendWrap");C&&(h.width(A/2),p.select(".nv-legendWrap").datum(y.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(h),s.top!=h.height()&&(s.top=h.height(),J=(G||parseInt(L.style("height"))||400)-s.top-s.bottom),p.select(".nv-legendWrap").attr("transform","translate("+A/2+","+-s.top+")"));da.attr("transform","translate("+s.left+","+s.top+")");b.width(A).height(J).color(y.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!y[b].disabled&&!y[b].bar}));k.width(A).height(J).color(y.map(function(a,b){return a.color||D(a,b)}).filter(function(a,
b){return!y[b].disabled&&y[b].bar}));da=p.select(".nv-barsWrap").datum(z.length?z:[{values:[]}]);V=p.select(".nv-linesWrap").datum(v[0]&&!v[0].disabled?v:[{values:[]}]);d3.transition(da).call(k);d3.transition(V).call(b);t.scale(Q).ticks(A/100).tickSize(-J,0);p.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")");d3.transition(p.select(".nv-x.nv-axis")).call(t);m.scale(B).ticks(J/36).tickSize(-A,0);d3.transition(p.select(".nv-y1.nv-axis")).style("opacity",z.length?1:0).call(m);
e.scale(R).ticks(J/36).tickSize(z.length?0:-A,0);p.select(".nv-y2.nv-axis").style("opacity",v.length?1:0).attr("transform","translate("+A+",0)");d3.transition(p.select(".nv-y2.nv-axis")).call(e);h.dispatch.on("stateChange",function(b){O=b;P.stateChange(O);a.update()});P.on("tooltipShow",function(p){if(K){var h=E.parentNode,k=p.pos[0]+(h.offsetLeft||0),q=p.pos[1]+(h.offsetTop||0),s=t.tickFormat()(b.x()(p.point,p.pointIndex)),v=(p.series.bar?m:e).tickFormat()(b.y()(p.point,p.pointIndex)),s=T(p.series.key,
s,v,p,a);u.tooltip.show([k,q],s,0>p.value?"n":"s",null,h)}});P.on("changeState",function(b){"undefined"!==typeof b.disabled&&(y.forEach(function(a,e){a.disabled=b.disabled[e]}),O.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),k=u.models.historicalBar(),t=u.models.axis(),m=u.models.axis(),e=u.models.axis(),h=u.models.legend(),s={top:30,right:60,bottom:50,left:60},q=null,G=null,A=function(a){return a.x},z=function(a){return a.y},D=u.utils.defaultColor(),C=!0,K=!0,T=function(a,b,
e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},Q,B,R,O={},M=null,H="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");k.padData(!0);b.clipEdge(!1).padData(!0);t.orient("bottom").tickPadding(7).highlightZero(!1);m.orient("left");e.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});k.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];P.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){K&&u.tooltip.cleanup()});a.dispatch=P;a.legend=h;a.lines=b;a.bars=k;a.xAxis=t;a.y1Axis=m;a.y2Axis=e;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return A;A=e;b.x(e);k.x(e);return a};a.y=function(e){if(!arguments.length)return z;z=e;b.y(e);k.y(e);
return a};a.margin=function(b){if(!arguments.length)return s;s.top="undefined"!=typeof b.top?b.top:s.top;s.right="undefined"!=typeof b.right?b.right:s.right;s.bottom="undefined"!=typeof b.bottom?b.bottom:s.bottom;s.left="undefined"!=typeof b.left?b.left:s.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return D;D=u.utils.getColor(b);h.color(D);return a};a.showLegend=
function(b){if(!arguments.length)return C;C=b;return a};a.tooltips=function(b){if(!arguments.length)return K;K=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return M;M=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};return a};u.models.lineWithFocusChart=function(){function a(E){E.each(function(E){function J(){q.empty()||
q.extent(M);ga.data([q.empty()?B.domain():M]).each(function(a,b){var e=B(a[0])-T.range()[0],p=T.range()[1]-B(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",B(a[1])).attr("width",0>p?0:p)})}function U(){M=q.empty()?null:q.extent();var a=q.empty()?B.domain():q.extent();1>=Math.abs(a[0]-a[1])||(F.brush({extent:a,brush:q}),J(),la.select(".nv-focus .nv-linesWrap").datum(E.filter(function(a){return!a.disabled}).map(function(e,p){return{key:e.key,values:e.values.filter(function(e,
p){return b.x()(e,p)>=a[0]&&b.x()(e,p)<=a[1]})}})).transition().duration(L).call(b),la.select(".nv-focus .nv-x.nv-axis").transition().duration(L).call(t),la.select(".nv-focus .nv-y.nv-axis").transition().duration(L).call(m))}var v=d3.select(this),da=this,V=(D||parseInt(v.style("width"))||960)-G.left-G.right,p=(C||parseInt(v.style("height"))||400)-G.top-G.bottom-K,S=K-A.top-A.bottom;a.update=function(){v.transition().duration(L).call(a)};a.container=this;if(E&&E.length&&E.filter(function(a){return a.values.length}).length)v.selectAll(".nv-noData").remove();
else{var Y=v.selectAll(".nv-noData").data([y]);Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");Y.attr("x",G.left+V/2).attr("y",G.top+p/2).text(function(a){return a});return a}T=b.xScale();Q=b.yScale();B=k.xScale();R=k.yScale();var Y=v.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([E]),I=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),la=Y.select("g");I.append("g").attr("class","nv-legendWrap");var X=
I.append("g").attr("class","nv-focus");X.append("g").attr("class","nv-x nv-axis");X.append("g").attr("class","nv-y nv-axis");X.append("g").attr("class","nv-linesWrap");I=I.append("g").attr("class","nv-context");I.append("g").attr("class","nv-x nv-axis");I.append("g").attr("class","nv-y nv-axis");I.append("g").attr("class","nv-linesWrap");I.append("g").attr("class","nv-brushBackground");I.append("g").attr("class","nv-x nv-brush");O&&(s.width(V),la.select(".nv-legendWrap").datum(E).call(s),G.top!=s.height()&&
(G.top=s.height(),p=(C||parseInt(v.style("height"))||400)-G.top-G.bottom-K),la.select(".nv-legendWrap").attr("transform","translate(0,"+-G.top+")"));Y.attr("transform","translate("+G.left+","+G.top+")");b.width(V).height(p).color(E.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!E[b].disabled}));k.defined(b.defined()).width(V).height(S).color(E.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!E[b].disabled}));la.select(".nv-context").attr("transform","translate(0,"+
(p+G.bottom+A.top)+")");Y=la.select(".nv-context .nv-linesWrap").datum(E.filter(function(a){return!a.disabled}));d3.transition(Y).call(k);t.scale(T).ticks(V/100).tickSize(-p,0);m.scale(Q).ticks(p/36).tickSize(-V,0);la.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+p+")");q.x(B).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);U();a.transitionDuration(b)});M&&q.extent(M);var ga=la.select(".nv-brushBackground").selectAll("g").data([M||q.extent()]),p=ga.enter().append("g");
p.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",S);p.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",S);p=la.select(".nv-x.nv-brush").call(q);p.selectAll("rect").attr("height",S);p.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=S/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});U();e.scale(B).ticks(V/
100).tickSize(-S,0);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")");d3.transition(la.select(".nv-context .nv-x.nv-axis")).call(e);h.scale(R).ticks(S/36).tickSize(-V,0);d3.transition(la.select(".nv-context .nv-y.nv-axis")).call(h);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")");s.dispatch.on("stateChange",function(b){a.update()});F.on("tooltipShow",function(e){if(H){var p=da.parentNode,h=e.pos[0]+(p.offsetLeft||0),k=
e.pos[1]+(p.offsetTop||0),q=t.tickFormat()(b.x()(e.point,e.pointIndex)),s=m.tickFormat()(b.y()(e.point,e.pointIndex));e=P(e.series.key,q,s,e,a);u.tooltip.show([h,k],e,null,null,p)}})});return a}var b=u.models.line(),k=u.models.line(),t=u.models.axis(),m=u.models.axis(),e=u.models.axis(),h=u.models.axis(),s=u.models.legend(),q=d3.svg.brush(),G={top:30,right:30,bottom:30,left:60},A={top:0,right:30,bottom:20,left:60},z=u.utils.defaultColor(),D=null,C=null,K=100,T,Q,B,R,O=!0,M=null,H=!0,P=function(a,
b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},y="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","brush"),L=250;b.clipEdge(!0);k.interactive(!1);t.orient("bottom").tickPadding(5);m.orient("left");e.orient("bottom").tickPadding(5);h.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+G.left,a.pos[1]+G.top];F.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){F.tooltipHide(a)});F.on("tooltipHide",function(){H&&u.tooltip.cleanup()});
a.dispatch=F;a.legend=s;a.lines=b;a.lines2=k;a.xAxis=t;a.yAxis=m;a.x2Axis=e;a.y2Axis=h;d3.rebind(a,b,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return b.x;b.x(e);k.x(e);return a};a.y=function(e){if(!arguments.length)return b.y;b.y(e);k.y(e);return a};a.margin=function(b){if(!arguments.length)return G;G.top="undefined"!=typeof b.top?b.top:G.top;
G.right="undefined"!=typeof b.right?b.right:G.right;G.bottom="undefined"!=typeof b.bottom?b.bottom:G.bottom;G.left="undefined"!=typeof b.left?b.left:G.left;return a};a.margin2=function(b){if(!arguments.length)return A;A=b;return a};a.width=function(b){if(!arguments.length)return D;D=b;return a};a.height=function(b){if(!arguments.length)return C;C=b;return a};a.height2=function(b){if(!arguments.length)return K;K=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);s.color(z);
return a};a.showLegend=function(b){if(!arguments.length)return O;O=b;return a};a.tooltips=function(b){if(!arguments.length)return H;H=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.interpolate=function(e){if(!arguments.length)return b.interpolate();b.interpolate(e);k.interpolate(e);return a};a.noData=function(b){if(!arguments.length)return y;y=b;return a};a.xTickFormat=function(b){if(!arguments.length)return t.tickFormat();t.tickFormat(b);e.tickFormat(b);return a};
a.yTickFormat=function(b){if(!arguments.length)return m.tickFormat();m.tickFormat(b);h.tickFormat(b);return a};a.brushExtent=function(b){if(!arguments.length)return M;M=b;return a};a.transitionDuration=function(b){if(!arguments.length)return L;L=b;return a};return a};u.models.linePlusBarWithFocusChart=function(){function a(Y){Y.each(function(Y){function I(){D.empty()||D.extent(y);Ca.data([D.empty()?W.domain():y]).each(function(a,b){var e=W(a[0])-W.range()[0],p=W.range()[1]-W(a[1]);d3.select(this).select(".left").attr("width",
0>e?0:e);d3.select(this).select(".right").attr("x",W(a[1])).attr("width",0>p?0:p)})}function X(){y=D.empty()?null:D.extent();P=D.empty()?W.domain():D.extent();p.brush({extent:P,brush:D});I();t.width(aa).height(ea).color(Y.map(function(a,b){return a.color||M(a,b)}).filter(function(a,b){return!Y[b].disabled&&Y[b].bar}));b.width(aa).height(ea).color(Y.map(function(a,b){return a.color||M(a,b)}).filter(function(a,b){return!Y[b].disabled&&!Y[b].bar}));var a=pa.select(".nv-focus .nv-barsWrap").datum(qa.length?
qa.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return t.x()(a,b)>=P[0]&&t.x()(a,b)<=P[1]})}}):[{values:[]}]),h=pa.select(".nv-focus .nv-linesWrap").datum(Ka[0].disabled?[{values:[]}]:Ka.map(function(a,e){return{key:a.key,values:a.values.filter(function(a,e){return b.x()(a,e)>=P[0]&&b.x()(a,e)<=P[1]})}}));E=qa.length?t.xScale():b.xScale();e.scale(E).ticks(aa/100).tickSize(-ea,0);e.domain([Math.ceil(P[0]),Math.floor(P[1])]);pa.select(".nv-x.nv-axis").transition().duration(S).call(e);
a.transition().duration(S).call(t);h.transition().duration(S).call(b);pa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+J.range()[0]+")");s.scale(J).ticks(ea/36).tickSize(-aa,0);pa.select(".nv-focus .nv-y1.nv-axis").style("opacity",qa.length?1:0);q.scale(U).ticks(ea/36).tickSize(qa.length?0:-aa,0);pa.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ka.length?1:0).attr("transform","translate("+E.range()[1]+",0)");pa.select(".nv-focus .nv-y1.nv-axis").transition().duration(S).call(s);
pa.select(".nv-focus .nv-y2.nv-axis").transition().duration(S).call(q)}var ga=d3.select(this),ka=this,aa=(T||parseInt(ga.style("width"))||960)-C.left-C.right,ea=(Q||parseInt(ga.style("height"))||400)-C.top-C.bottom-B,ma=B-K.top-K.bottom;a.update=function(){ga.transition().duration(S).call(a)};a.container=this;if(Y&&Y.length&&Y.filter(function(a){return a.values.length}).length)ga.selectAll(".nv-noData").remove();else{var ba=ga.selectAll(".nv-noData").data([V]);ba.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ba.attr("x",C.left+aa/2).attr("y",C.top+ea/2).text(function(a){return a});return a}var qa=Y.filter(function(a){return!a.disabled&&a.bar}),Ka=Y.filter(function(a){return!a.bar});E=t.xScale();W=h.scale();J=t.yScale();U=b.yScale();v=m.yScale();da=k.yScale();var ba=Y.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:R(a,b),y:O(a,b)}})}),ua=Y.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,
b){return{x:R(a,b),y:O(a,b)}})});E.range([0,aa]);W.domain(d3.extent(d3.merge(ba.concat(ua)),function(a){return a.x})).range([0,aa]);var ba=ga.selectAll("g.nv-wrap.nv-linePlusBar").data([Y]),ua=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),pa=ba.select("g");ua.append("g").attr("class","nv-legendWrap");var Wa=ua.append("g").attr("class","nv-focus");Wa.append("g").attr("class","nv-x nv-axis");Wa.append("g").attr("class","nv-y1 nv-axis");Wa.append("g").attr("class","nv-y2 nv-axis");
Wa.append("g").attr("class","nv-barsWrap");Wa.append("g").attr("class","nv-linesWrap");ua=ua.append("g").attr("class","nv-context");ua.append("g").attr("class","nv-x nv-axis");ua.append("g").attr("class","nv-y1 nv-axis");ua.append("g").attr("class","nv-y2 nv-axis");ua.append("g").attr("class","nv-barsWrap");ua.append("g").attr("class","nv-linesWrap");ua.append("g").attr("class","nv-brushBackground");ua.append("g").attr("class","nv-x nv-brush");H&&(z.width(aa/2),pa.select(".nv-legendWrap").datum(Y.map(function(a){a.originalKey=
void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(z),C.top!=z.height()&&(C.top=z.height(),ea=(Q||parseInt(ga.style("height"))||400)-C.top-C.bottom-B),pa.select(".nv-legendWrap").attr("transform","translate("+aa/2+","+-C.top+")"));ba.attr("transform","translate("+C.left+","+C.top+")");m.width(aa).height(ma).color(Y.map(function(a,b){return a.color||M(a,b)}).filter(function(a,b){return!Y[b].disabled&&Y[b].bar}));k.width(aa).height(ma).color(Y.map(function(a,
b){return a.color||M(a,b)}).filter(function(a,b){return!Y[b].disabled&&!Y[b].bar}));ba=pa.select(".nv-context .nv-barsWrap").datum(qa.length?qa:[{values:[]}]);ua=pa.select(".nv-context .nv-linesWrap").datum(Ka[0].disabled?[{values:[]}]:Ka);pa.select(".nv-context").attr("transform","translate(0,"+(ea+C.bottom+K.top)+")");ba.transition().call(m);ua.transition().call(k);D.x(W).on("brush",X);y&&D.extent(y);var Ca=pa.select(".nv-brushBackground").selectAll("g").data([y||D.extent()]),ba=Ca.enter().append("g");
ba.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ma);ba.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ma);ba=pa.select(".nv-x.nv-brush").call(D);ba.selectAll("rect").attr("height",ma);ba.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=ma/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});h.ticks(aa/
100).tickSize(-ma,0);pa.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+v.range()[0]+")");pa.select(".nv-context .nv-x.nv-axis").transition().call(h);G.scale(v).ticks(ma/36).tickSize(-aa,0);pa.select(".nv-context .nv-y1.nv-axis").style("opacity",qa.length?1:0).attr("transform","translate(0,"+W.range()[0]+")");pa.select(".nv-context .nv-y1.nv-axis").transition().call(G);A.scale(da).ticks(ma/36).tickSize(qa.length?0:-aa,0);pa.select(".nv-context .nv-y2.nv-axis").style("opacity",
Ka.length?1:0).attr("transform","translate("+W.range()[1]+",0)");pa.select(".nv-context .nv-y2.nv-axis").transition().call(A);z.dispatch.on("stateChange",function(b){a.update()});p.on("tooltipShow",function(p){if(F){var h=ka.parentNode;P&&(p.pointIndex+=Math.ceil(P[0]));var k=p.pos[0]+(h.offsetLeft||0),m=p.pos[1]+(h.offsetTop||0),t=e.tickFormat()(b.x()(p.point,p.pointIndex)),v=(p.series.bar?s:q).tickFormat()(b.y()(p.point,p.pointIndex)),t=L(p.series.key,t,v,p,a);u.tooltip.show([k,m],t,0>p.value?"n":
"s",null,h)}});X()});return a}var b=u.models.line(),k=u.models.line(),t=u.models.historicalBar(),m=u.models.historicalBar(),e=u.models.axis(),h=u.models.axis(),s=u.models.axis(),q=u.models.axis(),G=u.models.axis(),A=u.models.axis(),z=u.models.legend(),D=d3.svg.brush(),C={top:30,right:30,bottom:30,left:60},K={top:0,right:30,bottom:20,left:60},T=null,Q=null,B=100,R=function(a){return a.x},O=function(a){return a.y},M=u.utils.defaultColor(),H=!0,P,y=null,F=!0,L=function(a,b,e,p,h){return"<h3>"+a+"</h3><p>"+
e+" at "+b+"</p>"},E,W,J,U,v,da,V="No Data Available.",p=d3.dispatch("tooltipShow","tooltipHide","brush"),S=0;b.clipEdge(!0);k.interactive(!1);e.orient("bottom").tickPadding(5);s.orient("left");q.orient("right");h.orient("bottom").tickPadding(5);G.orient("left");A.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+C.left,a.pos[1]+C.top];p.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){p.tooltipHide(a)});t.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+C.left,a.pos[1]+C.top];p.tooltipShow(a)});t.dispatch.on("elementMouseout.tooltip",function(a){p.tooltipHide(a)});p.on("tooltipHide",function(){F&&u.tooltip.cleanup()});a.dispatch=p;a.legend=z;a.lines=b;a.lines2=k;a.bars=t;a.bars2=m;a.xAxis=e;a.x2Axis=h;a.y1Axis=s;a.y2Axis=q;a.y3Axis=G;a.y4Axis=A;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return R;R=e;b.x(e);t.x(e);return a};a.y=
function(e){if(!arguments.length)return O;O=e;b.y(e);t.y(e);return a};a.margin=function(b){if(!arguments.length)return C;C.top="undefined"!=typeof b.top?b.top:C.top;C.right="undefined"!=typeof b.right?b.right:C.right;C.bottom="undefined"!=typeof b.bottom?b.bottom:C.bottom;C.left="undefined"!=typeof b.left?b.left:C.left;return a};a.width=function(b){if(!arguments.length)return T;T=b;return a};a.height=function(b){if(!arguments.length)return Q;Q=b;return a};a.color=function(b){if(!arguments.length)return M;
M=u.utils.getColor(b);z.color(M);return a};a.showLegend=function(b){if(!arguments.length)return H;H=b;return a};a.tooltips=function(b){if(!arguments.length)return F;F=b;return a};a.tooltipContent=function(b){if(!arguments.length)return L;L=b;return a};a.noData=function(b){if(!arguments.length)return V;V=b;return a};a.brushExtent=function(b){if(!arguments.length)return y;y=b;return a};return a};u.models.multiBar=function(){function a(u){u.each(function(a){var u=k-b.left-b.right,L=t-b.top-b.bottom,
U=d3.select(this);K&&a.length&&(K=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);z&&(a=d3.layout.stack().offset(D).values(function(a){return a.values}).y(q)(!a.length&&K?K:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});z&&a[0].values.map(function(b,e){var h=0,k=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=k,k-=a.size):(a.y1=a.size+h,h+=a.size)})});var v=R&&O?[]:a.map(function(a){return a.values.map(function(a,b){return{x:s(a,
b),y:q(a,b),y0:a.y0,y1:a.y1}})});m.domain(R||d3.merge(v).map(function(a){return a.x})).rangeBands(M||[0,u],P);e.domain(O||d3.extent(d3.merge(v).map(function(a){return z?0<a.y?a.y1:a.y1+a.y:a.y}).concat(G))).range(H||[L,0]);m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1]));e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]+.01*e.domain()[0],e.domain()[1]-.01*e.domain()[1]]):e.domain([-1,1]));
F=F||e;var U=U.selectAll("g.nv-wrap.nv-multibar").data([a]),da=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),v=da.append("defs"),da=da.append("g"),V=U.select("g");da.append("g").attr("class","nv-groups");U.attr("transform","translate("+b.left+","+b.top+")");v.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect");U.select("#nv-edge-clip-"+h+" rect").attr("width",u).attr("height",L);V.attr("clip-path",A?"url(#nv-edge-clip-"+h+")":"");u=U.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a,b){return b});u.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);u.exit().transition().selectAll("rect.nv-bar").delay(function(b,e){return e*B/a[0].values.length}).attr("y",function(a){return z?F(a.y0):F(0)}).attr("height",0).remove();u.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return C(a,b)}).style("stroke",function(a,b){return C(a,b)});u.transition().style("stroke-opacity",
1).style("fill-opacity",.75);u=u.selectAll("rect.nv-bar").data(function(b){return K&&!a.length?K.values:b.values});u.exit().remove();u.enter().append("rect").attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,e,h){return z?0:h*m.rangeBand()/a.length}).attr("y",function(a){return F(z?a.y0:0)}).attr("height",0).attr("width",m.rangeBand()/(z?1:a.length)).attr("transform",function(a,b){return"translate("+m(s(a,b))+",0)"});u.style("fill",function(a,b,e){return C(a,
e,b)}).style("stroke",function(a,b,e){return C(a,e,b)}).on("mouseover",function(b,h){d3.select(this).classed("hover",!0);y.elementMouseover({value:q(b,h),point:b,series:a[b.series],pos:[m(s(b,h))+m.rangeBand()*(z?a.length/2:b.series+.5)/a.length,e(q(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);y.elementMouseout({value:q(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,
h){y.elementClick({value:q(b,h),point:b,series:a[b.series],pos:[m(s(b,h))+m.rangeBand()*(z?a.length/2:b.series+.5)/a.length,e(q(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,h){y.elementDblClick({value:q(b,h),point:b,series:a[b.series],pos:[m(s(b,h))+m.rangeBand()*(z?a.length/2:b.series+.5)/a.length,e(q(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.attr("class",function(a,b){return 0>
q(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+m(s(a,b))+",0)"});T&&(Q||(Q=a.map(function(){return!0})),u.style("fill",function(a,b,e){return d3.rgb(T(a,b)).darker(Q.map(function(a,b){return b}).filter(function(a,b){return!Q[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(T(a,b)).darker(Q.map(function(a,b){return b}).filter(function(a,b){return!Q[b]})[e]).toString()}));z?u.transition().delay(function(b,e){return e*B/a[0].values.length}).attr("y",
function(a,b){return e(z?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(e(a.y+(z?a.y0:0))-e(z?a.y0:0)),1)}).attr("x",function(b,e){return z?0:b.series*m.rangeBand()/a.length}).attr("width",m.rangeBand()/(z?1:a.length)):u.transition().delay(function(b,e){return e*B/a[0].values.length}).attr("x",function(b,e){return b.series*m.rangeBand()/a.length}).attr("width",m.rangeBand()/a.length).attr("y",function(a,b){return 0>q(a,b)?e(0):1>e(0)-e(q(a,b))?e(0)-1:e(q(a,b))||0}).attr("height",function(a,
b){return Math.max(Math.abs(e(q(a,b))-e(0)),1)||0});m.copy();F=e.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=d3.scale.ordinal(),e=d3.scale.linear(),h=Math.floor(1E4*Math.random()),s=function(a){return a.x},q=function(a){return a.y},G=[0],A=!0,z=!1,D="zero",C=u.utils.defaultColor(),K=!1,T=null,Q,B=1200,R,O,M,H,P=.1,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=y;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return s;
s=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return m;
m=b;return a};a.yScale=function(b){if(!arguments.length)return e;e=b;return a};a.xDomain=function(b){if(!arguments.length)return R;R=b;return a};a.yDomain=function(b){if(!arguments.length)return O;O=b;return a};a.xRange=function(b){if(!arguments.length)return M;M=b;return a};a.yRange=function(b){if(!arguments.length)return H;H=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.stacked=function(b){if(!arguments.length)return z;z=b;return a};a.stackOffset=function(b){if(!arguments.length)return D;
D=b;return a};a.clipEdge=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return C;C=u.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return T;T=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return Q;Q=b;return a};a.id=function(b){if(!arguments.length)return h;h=b;return a};a.hideable=function(b){if(!arguments.length)return K;K=b;return a};a.delay=function(b){if(!arguments.length)return B;B=b;return a};
a.groupSpacing=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.multiBarChart=function(){function a(W){W.each(function(J){var W=d3.select(this),v=this,da=(s||parseInt(W.style("width"))||960)-h.left-h.right,V=(q||parseInt(W.style("height"))||400)-h.top-h.bottom;a.update=function(){W.transition().duration(E).call(a)};a.container=this;P.disabled=J.map(function(a){return!!a.disabled});if(!y){var p;y={};for(p in P)y[p]=P[p]instanceof Array?P[p].slice(0):P[p]}if(J&&J.length&&J.filter(function(a){return a.values.length}).length)W.selectAll(".nv-noData").remove();
else return p=W.selectAll(".nv-noData").data([F]),p.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),p.attr("x",h.left+da/2).attr("y",h.top+V/2).text(function(a){return a}),a;M=b.xScale();H=b.yScale();var S=W.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([J]),Y=S.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");p=S.select("g");Y.append("g").attr("class","nv-x nv-axis");Y.append("g").attr("class","nv-y nv-axis");
Y.append("g").attr("class","nv-barsWrap");Y.append("g").attr("class","nv-legendWrap");Y.append("g").attr("class","nv-controlsWrap");z&&(m.width(da-(A?180:0)),b.barColor()&&J.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),p.select(".nv-legendWrap").datum(J).call(m),h.top!=m.height()&&(h.top=m.height(),V=(q||parseInt(W.style("height"))||400)-h.top-h.bottom),p.select(".nv-legendWrap").attr("transform","translate("+(A?180:0)+","+-h.top+")"));if(A){var I=[{key:"Grouped",disabled:b.stacked()},
{key:"Stacked",disabled:!b.stacked()}];e.width(A?180:0).color(["#444","#444","#444"]);p.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-h.top+")").call(e)}S.attr("transform","translate("+h.left+","+h.top+")");K&&p.select(".nv-y.nv-axis").attr("transform","translate("+da+",0)");b.disabled(J.map(function(a){return a.disabled})).width(da).height(V).color(J.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!J[b].disabled}));p.select(".nv-barsWrap").datum(J.filter(function(a){return!a.disabled})).transition().call(b);
if(D){k.scale(M).ticks(da/100).tickSize(-V,0);p.select(".nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")");p.select(".nv-x.nv-axis").transition().call(k);S=p.select(".nv-x.nv-axis > g").selectAll("g");S.selectAll("line, text").style("opacity",1);if(Q){S.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?5:17)+")"});var la=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;p.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,
b){return"translate(0,"+(0===b||0!==la%2?17:5)+")"})}T&&S.filter(function(a,b){return 0!==b%Math.ceil(J[0].values.length/(da/100))}).selectAll("text, line").style("opacity",0);B&&S.selectAll(".tick text").attr("transform","rotate("+B+" 0,0)").style("text-anchor",0<B?"start":"end");p.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}C&&(t.scale(H).ticks(V/36).tickSize(-da,0),p.select(".nv-y.nv-axis").transition().call(t));m.dispatch.on("stateChange",function(b){P=b;L.stateChange(P);
a.update()});e.dispatch.on("legendClick",function(e,h){if(e.disabled){I=I.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}P.stacked=b.stacked();L.stateChange(P);a.update()}});L.on("tooltipShow",function(e){if(R){var h=v.parentNode,p=e.pos[0]+(h.offsetLeft||0),m=e.pos[1]+(h.offsetTop||0),q=k.tickFormat()(b.x()(e.point,e.pointIndex)),s=t.tickFormat()(b.y()(e.point,e.pointIndex)),q=O(e.series.key,q,s,e,a);u.tooltip.show([p,
m],q,0>e.value?"n":"s",null,h)}});L.on("changeState",function(e){"undefined"!==typeof e.disabled&&(J.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),P.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBar(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e=u.models.legend(),h={top:30,right:20,bottom:50,left:60},s=null,q=null,G=u.utils.defaultColor(),A=!0,z=!0,D=!0,C=!0,K=!1,T=!0,Q=!1,B=0,R=!0,O=function(a,
b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},M,H,P={stacked:!1},y=null,F="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250;b.stacked(!1);k.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});t.orient(K?"right":"left").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];L.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){R&&u.tooltip.cleanup()});a.dispatch=L;a.multibar=b;a.legend=m;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=
typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:h.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);m.color(G);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return z;z=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;
D=b;return a};a.showYAxis=function(b){if(!arguments.length)return C;C=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return K;K=b;t.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return T;T=b;return a};a.rotateLabels=function(b){if(!arguments.length)return B;B=b;return a};a.staggerLabels=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltip=function(b){if(!arguments.length)return O;O=b;return a};a.tooltips=function(b){if(!arguments.length)return R;
R=b;return a};a.tooltipContent=function(b){if(!arguments.length)return O;O=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return E;E=b;return a};return a};u.models.multiBarHorizontal=function(){function a(m){m.each(function(a){var m=k-b.left-b.right,u=t-b.top-b.bottom;d3.select(this);
C&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(q)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});C&&a[0].values.map(function(b,e){var h=0,k=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=k-a.size,k-=a.size):(a.y1=h,h+=a.size)})});var L=O&&M?[]:a.map(function(a){return a.values.map(function(a,b){return{x:s(a,b),y:q(a,b),y0:a.y0,y1:a.y1}})});e.domain(O||d3.merge(L).map(function(a){return a.x})).rangeBands(H||[0,u],.1);h.domain(M||
d3.extent(d3.merge(L).map(function(a){return C?0<a.y?a.y1+a.y:a.y1:a.y}).concat(G)));K&&!C?h.range(P||[0>h.domain()[0]?Q:0,m-(0<h.domain()[1]?Q:0)]):h.range(P||[0,m]);F=F||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);m=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);u=m.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");u.append("defs");u=u.append("g");m.select("g");u.append("g").attr("class","nv-groups");m.attr("transform","translate("+b.left+
","+b.top+")");m=m.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});m.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);m.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();m.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return A(a,b)}).style("stroke",function(a,b){return A(a,b)});m.transition().style("stroke-opacity",
1).style("fill-opacity",.75);m=m.selectAll("g.nv-bar").data(function(a){return a.values});m.exit().remove();u=m.enter().append("g").attr("transform",function(b,h,k){return"translate("+F(C?b.y0:0)+","+(C?0:k*e.rangeBand()/a.length+e(s(b,h)))+")"});u.append("rect").attr("width",0).attr("height",e.rangeBand()/(C?1:a.length));m.on("mouseover",function(b,k){d3.select(this).classed("hover",!0);y.elementMouseover({value:q(b,k),point:b,series:a[b.series],pos:[h(q(b,k)+(C?b.y0:0)),e(s(b,k))+e.rangeBand()*
(C?a.length/2:b.series+.5)/a.length],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);y.elementMouseout({value:q(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){y.elementClick({value:q(b,k),point:b,series:a[b.series],pos:[e(s(b,k))+e.rangeBand()*(C?a.length/2:b.series+.5)/a.length,h(q(b,k)+(C?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,k){y.elementDblClick({value:q(b,k),point:b,series:a[b.series],pos:[e(s(b,k))+e.rangeBand()*(C?a.length/2:b.series+.5)/a.length,h(q(b,k)+(C?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.append("text");K&&!C?(m.select("text").attr("text-anchor",function(a,b){return 0>q(a,b)?"end":"start"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return B(q(a,b))}),m.transition().select("text").attr("x",function(a,b){return 0>q(a,
b)?-4:h(q(a,b))-h(0)+4})):m.selectAll("text").text("");T&&!C?(u.append("text").classed("nv-bar-label",!0),m.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>q(a,b)?"start":"end"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return s(a,b)}),m.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>q(a,b)?h(0)-h(q(a,b))+4:-4})):m.selectAll("text.nv-bar-label").text("");m.attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":
"nv-bar positive"});z&&(D||(D=a.map(function(){return!0})),m.style("fill",function(a,b,e){return d3.rgb(z(a,b)).darker(D.map(function(a,b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(z(a,b)).darker(D.map(function(a,b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}));C?m.transition().attr("transform",function(a,b){return"translate("+h(a.y1)+","+e(s(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(h(q(a,
b)+a.y0)-h(a.y0))}).attr("height",e.rangeBand()):m.transition().attr("transform",function(b,k){return"translate("+(0>q(b,k)?h(q(b,k)):h(0))+","+(b.series*e.rangeBand()/a.length+e(s(b,k)))+")"}).select("rect").attr("height",e.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(h(q(a,b))-h(0)),1)});e.copy();F=h.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),h=d3.scale.linear(),s=function(a){return a.x},q=
function(a){return a.y},G=[0],A=u.utils.defaultColor(),z=null,D,C=!1,K=!1,T=!1,Q=60,B=d3.format(",.2f"),R=1200,O,M,H,P,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=y;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return s;s=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return O;O=b;return a};a.yDomain=function(b){if(!arguments.length)return M;
M=b;return a};a.xRange=function(b){if(!arguments.length)return H;H=b;return a};a.yRange=function(b){if(!arguments.length)return P;P=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.stacked=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return A;A=u.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return D;D=b;return a};
a.id=function(b){if(!arguments.length)return m;m=b;return a};a.delay=function(b){if(!arguments.length)return R;R=b;return a};a.showValues=function(b){if(!arguments.length)return K;K=b;return a};a.showBarLabels=function(b){if(!arguments.length)return T;T=b;return a};a.valueFormat=function(b){if(!arguments.length)return B;B=b;return a};a.valuePadding=function(b){if(!arguments.length)return Q;Q=b;return a};return a};u.models.multiBarHorizontalChart=function(){function a(y){y.each(function(y){var L=d3.select(this),
E=this,I=(s||parseInt(L.style("width"))||960)-h.left-h.right,J=(q||parseInt(L.style("height"))||400)-h.top-h.bottom;a.update=function(){L.transition().duration(P).call(a)};a.container=this;R.disabled=y.map(function(a){return!!a.disabled});if(!O){var U;O={};for(U in R)O[U]=R[U]instanceof Array?R[U].slice(0):R[U]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return U=L.selectAll(".nv-noData").data([M]),U.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",h.left+I/2).attr("y",h.top+J/2).text(function(a){return a}),a;Q=b.xScale();B=b.yScale();U=L.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([y]);var v=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),da=U.select("g");v.append("g").attr("class","nv-x nv-axis");v.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");v.append("g").attr("class",
"nv-barsWrap");v.append("g").attr("class","nv-legendWrap");v.append("g").attr("class","nv-controlsWrap");z&&(m.width(I-(A?180:0)),b.barColor()&&y.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),da.select(".nv-legendWrap").datum(y).call(m),h.top!=m.height()&&(h.top=m.height(),J=(q||parseInt(L.style("height"))||400)-h.top-h.bottom),da.select(".nv-legendWrap").attr("transform","translate("+(A?180:0)+","+-h.top+")"));if(A){var V=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];e.width(A?180:0).color(["#444","#444","#444"]);da.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-h.top+")").call(e)}U.attr("transform","translate("+h.left+","+h.top+")");b.disabled(y.map(function(a){return a.disabled})).width(I).height(J).color(y.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!y[b].disabled}));da.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);D&&(k.scale(Q).ticks(J/24).tickSize(-I,
0),da.select(".nv-x.nv-axis").transition().call(k),da.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));C&&(t.scale(B).ticks(I/100).tickSize(-J,0),da.select(".nv-y.nv-axis").attr("transform","translate(0,"+J+")"),da.select(".nv-y.nv-axis").transition().call(t));da.select(".nv-zeroLine line").attr("x1",B(0)).attr("x2",B(0)).attr("y1",0).attr("y2",-J);m.dispatch.on("stateChange",function(b){R=b;H.stateChange(R);a.update()});e.dispatch.on("legendClick",function(e,h){if(e.disabled){V=V.map(function(a){a.disabled=
!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}R.stacked=b.stacked();H.stateChange(R);a.update()}});H.on("tooltipShow",function(e){if(K){var h=E.parentNode,m=e.pos[0]+(h.offsetLeft||0),q=e.pos[1]+(h.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),y=t.tickFormat()(b.y()(e.point,e.pointIndex)),s=T(e.series.key,s,y,e,a);u.tooltip.show([m,q],s,0>e.value?"e":"w",null,h)}});H.on("changeState",function(e){"undefined"!==typeof e.disabled&&
(y.forEach(function(a,b){a.disabled=e.disabled[b]}),R.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),R.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBarHorizontal(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend().height(30),e=u.models.legend().height(30),h={top:30,right:20,bottom:50,left:60},s=null,q=null,G=u.utils.defaultColor(),A=!0,z=!0,D=!0,C=!0,K=!0,T=function(a,b,e,h,k){return"<h3>"+a+" - "+b+"</h3><p>"+e+"</p>"},Q,B,R={stacked:!1},O=null,
M="No Data Available.",H=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),P=250;b.stacked(!1);k.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient("bottom").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];H.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){H.tooltipHide(a)});H.on("tooltipHide",function(){K&&u.tooltip.cleanup()});
a.dispatch=H;a.multibar=b;a.legend=m;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:
h.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);m.color(G);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return z;z=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return C;
C=b;return a};a.tooltip=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return K;K=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return O;O=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};a.transitionDuration=function(b){if(!arguments.length)return P;P=b;return a};return a};
u.models.multiChart=function(){function a(F){F.each(function(F){var E=d3.select(this),I=this;a.update=function(){E.transition().call(a)};a.container=this;var J=(t||parseInt(E.style("width"))||960)-b.left-b.right,U=(m||parseInt(E.style("height"))||400)-b.top-b.bottom,v=F.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),da=F.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),V=F.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),p=F.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),S=F.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),Y=F.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),na=F.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),la=F.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});q.domain(d3.extent(d3.merge(na.concat(la)),function(a){return a.x})).range([0,
J]);var X=E.selectAll("g.wrap.multiChart").data([F]),ga=X.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ga.append("g").attr("class","x axis");ga.append("g").attr("class","y1 axis");ga.append("g").attr("class","y2 axis");ga.append("g").attr("class","lines1Wrap");ga.append("g").attr("class","lines2Wrap");ga.append("g").attr("class","bars1Wrap");ga.append("g").attr("class","bars2Wrap");ga.append("g").attr("class","stack1Wrap");ga.append("g").attr("class","stack2Wrap");ga.append("g").attr("class",
"legendWrap");X=X.select("g");e&&(P.width(J/2),X.select(".legendWrap").datum(F.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(P),b.top!=P.height()&&(b.top=P.height(),U=(m||parseInt(E.style("height"))||400)-b.top-b.bottom),X.select(".legendWrap").attr("transform","translate("+J/2+","+-b.top+")"));C.width(J).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,
b){return!F[b].disabled&&1==F[b].yAxis&&"line"==F[b].type}));K.width(J).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"line"==F[b].type}));T.width(J).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"bar"==F[b].type}));Q.width(J).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&
2==F[b].yAxis&&"bar"==F[b].type}));B.width(J).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"area"==F[b].type}));R.width(J).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"area"==F[b].type}));X.attr("transform","translate("+b.left+","+b.top+")");var ga=X.select(".lines1Wrap").datum(v),ka=X.select(".bars1Wrap").datum(V),aa=X.select(".stack1Wrap").datum(S),
ea=X.select(".lines2Wrap").datum(da),ma=X.select(".bars2Wrap").datum(p),ba=X.select(".stack2Wrap").datum(Y),qa=S.length?S.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[],Ka=Y.length?Y.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[];z.domain(G||d3.extent(d3.merge(na).concat(qa),function(a){return a.y})).range([0,U]);D.domain(A||
d3.extent(d3.merge(la).concat(Ka),function(a){return a.y})).range([0,U]);C.yDomain(z.domain());T.yDomain(z.domain());B.yDomain(z.domain());K.yDomain(D.domain());Q.yDomain(D.domain());R.yDomain(D.domain());S.length&&d3.transition(aa).call(B);Y.length&&d3.transition(ba).call(R);V.length&&d3.transition(ka).call(T);p.length&&d3.transition(ma).call(Q);v.length&&d3.transition(ga).call(C);da.length&&d3.transition(ea).call(K);O.ticks(J/100).tickSize(-U,0);X.select(".x.axis").attr("transform","translate(0,"+
U+")");d3.transition(X.select(".x.axis")).call(O);M.ticks(U/36).tickSize(-J,0);d3.transition(X.select(".y1.axis")).call(M);H.ticks(U/36).tickSize(-J,0);d3.transition(X.select(".y2.axis")).call(H);X.select(".y2.axis").style("opacity",la.length?1:0).attr("transform","translate("+q.range()[1]+",0)");P.dispatch.on("stateChange",function(b){a.update()});y.on("tooltipShow",function(b){if(h){var e=I.parentNode,k=b.pos[0]+(e.offsetLeft||0),p=b.pos[1]+(e.offsetTop||0),m=O.tickFormat()(C.x()(b.point,b.pointIndex)),
q=(2==b.series.yAxis?H:M).tickFormat()(C.y()(b.point,b.pointIndex));b=s(b.series.key,m,q,b,a);u.tooltip.show([k,p],b,void 0,void 0,e.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},k=d3.scale.category20().range(),t=null,m=null,e=!0,h=!0,s=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},q,G,A;q=d3.scale.linear();var z=d3.scale.linear(),D=d3.scale.linear(),C=u.models.line().yScale(z),K=u.models.line().yScale(D),T=u.models.multiBar().stacked(!1).yScale(z),Q=u.models.multiBar().stacked(!1).yScale(D),
B=u.models.stackedArea().yScale(z),R=u.models.stackedArea().yScale(D),O=u.models.axis().scale(q).orient("bottom").tickPadding(5),M=u.models.axis().scale(z).orient("left"),H=u.models.axis().scale(D).orient("right"),P=u.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide");C.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});C.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});K.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});K.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});T.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});T.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});Q.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});Q.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});
B.dispatch.on("tooltipShow",function(a){if(!Math.round(100*B.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});B.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)});R.dispatch.on("tooltipShow",function(a){if(!Math.round(100*R.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});R.dispatch.on("tooltipHide",
function(a){y.tooltipHide(a)});C.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});C.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});K.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});K.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});y.on("tooltipHide",function(){h&&u.tooltip.cleanup()});a.dispatch=y;a.lines1=C;a.lines2=K;a.bars1=T;a.bars2=
Q;a.stack1=B;a.stack2=R;a.xAxis=O;a.yAxis1=M;a.yAxis2=H;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;C.x(b);T.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;C.y(b);T.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return G;G=b;return a};a.yDomain2=function(b){if(!arguments.length)return A;A=b;return a};a.margin=function(e){if(!arguments.length)return b;b=e;return a};a.width=function(b){if(!arguments.length)return t;
t=b;return a};a.height=function(b){if(!arguments.length)return m;m=b;return a};a.color=function(b){if(!arguments.length)return k;k=b;P.color(b);return a};a.showLegend=function(b){if(!arguments.length)return e;e=b;return a};a.tooltips=function(b){if(!arguments.length)return h;h=b;return a};a.tooltipContent=function(b){if(!arguments.length)return s;s=b;return a};return a};u.models.ohlcBar=function(){function a(u){u.each(function(a){var u=k-b.left-b.right,y=t-b.top-b.bottom,B=d3.select(this);e.domain(R||
d3.extent(a[0].values.map(s).concat(C)));T?e.range(M||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):e.range(M||[0,u]);h.domain(O||[d3.min(a[0].values.map(D).concat(K)),d3.max(a[0].values.map(z).concat(K))]).range(H||[y,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):
h.domain([-1,1]));var J=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),U=J.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),v=U.append("defs"),U=U.append("g"),I=J.select("g");U.append("g").attr("class","nv-ticks");J.attr("transform","translate("+b.left+","+b.top+")");B.on("click",function(a,b){P.chartClick({data:a,index:b,pos:d3.event,id:m})});v.append("clipPath").attr("id","nv-chart-clip-path-"+m).append("rect");J.select("#nv-chart-clip-path-"+m+" rect").attr("width",
u).attr("height",y);I.attr("clip-path",Q?"url(#nv-chart-clip-path-"+m+")":"");y=J.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});y.exit().remove();y.enter().append("path").attr("class",function(a,b,e){return(G(a,b)>A(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b}).attr("d",function(b,e){var k=u/a[0].values.length*.9;return"m0,0l0,"+(h(G(b,e))-h(z(b,e)))+"l"+-k/2+",0l"+k/2+",0l0,"+(h(D(b,e))-h(G(b,e)))+"l0,"+(h(A(b,e))-h(D(b,e)))+"l"+k/2+",0l"+-k/2+",0z"}).attr("transform",
function(a,b){return"translate("+e(s(a,b))+","+h(z(a,b))+")"}).on("mouseover",function(b,k){d3.select(this).classed("hover",!0);P.elementMouseover({point:b,series:a[0],pos:[e(s(b,k)),h(q(b,k))],pointIndex:k,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);P.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event})}).on("click",function(a,b){P.elementClick({value:q(a,b),data:a,index:b,pos:[e(s(a,b)),h(q(a,b))],e:d3.event,id:m});d3.event.stopPropagation()}).on("dblclick",
function(a,b){P.elementDblClick({value:q(a,b),data:a,index:b,pos:[e(s(a,b)),h(q(a,b))],e:d3.event,id:m});d3.event.stopPropagation()});y.attr("class",function(a,b,e){return(G(a,b)>A(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b});d3.transition(y).attr("transform",function(a,b){return"translate("+e(s(a,b))+","+h(z(a,b))+")"}).attr("d",function(b,e){var k=u/a[0].values.length*.9;return"m0,0l0,"+(h(G(b,e))-h(z(b,e)))+"l"+-k/2+",0l"+k/2+",0l0,"+(h(D(b,e))-h(G(b,e)))+"l0,"+(h(A(b,e))-
h(D(b,e)))+"l"+k/2+",0l"+-k/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=Math.floor(1E4*Math.random()),e=d3.scale.linear(),h=d3.scale.linear(),s=function(a){return a.x},q=function(a){return a.y},G=function(a){return a.open},A=function(a){return a.close},z=function(a){return a.high},D=function(a){return a.low},C=[],K=[],T=!1,Q=!0,B=u.utils.defaultColor(),R,O,M,H,P=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
P;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return s;s=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.open=function(b){if(!arguments.length)return G;G=b;return a};a.close=function(b){if(!arguments.length)return A;A=b;return a};a.high=function(b){if(!arguments.length)return z;z=b;return a};a.low=function(b){if(!arguments.length)return D;D=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:
b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return R;R=b;return a};a.yDomain=
function(b){if(!arguments.length)return O;O=b;return a};a.xRange=function(b){if(!arguments.length)return M;M=b;return a};a.yRange=function(b){if(!arguments.length)return H;H=b;return a};a.forceX=function(b){if(!arguments.length)return C;C=b;return a};a.forceY=function(b){if(!arguments.length)return K;K=b;return a};a.padData=function(b){if(!arguments.length)return T;T=b;return a};a.clipEdge=function(b){if(!arguments.length)return Q;Q=b;return a};a.color=function(b){if(!arguments.length)return B;B=
u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return m;m=b;return a};return a};u.models.pie=function(){function a(h){h.each(function(a){var h=k-b.left-b.right,u=t-b.top-b.bottom,H=Math.min(h,u)/2,E=H-H/5,G=d3.select(this);a=G.selectAll(".nv-wrap.nv-pie").data(a);var J=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s).append("g"),U=a.select("g");J.append("g").attr("class","nv-pie");J.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");U.select(".nv-pie").attr("transform","translate("+h/2+","+u/2+")");U.select(".nv-pieLabels").attr("transform","translate("+h/2+","+u/2+")");G.on("click",function(a,b){M.chartClick({data:a,index:b,pos:d3.event,id:s})});var v=d3.svg.arc().outerRadius(E);B&&v.startAngle(B);R&&v.endAngle(R);T&&v.innerRadius(H*O);u=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:e(a)});h=a.select(".nv-pie").selectAll(".nv-slice").data(u);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(u);
h.exit().remove();a.exit().remove();u=h.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);M.elementMouseover({label:m(a.data),value:e(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:s})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);M.elementMouseout({label:m(a.data),value:e(a.data),point:a.data,index:b,id:s})}).on("click",function(a,b){M.elementClick({label:m(a.data),value:e(a.data),point:a.data,
index:b,pos:d3.event,id:s});d3.event.stopPropagation()}).on("dblclick",function(a,b){M.elementDblClick({label:m(a.data),value:e(a.data),point:a.data,index:b,pos:d3.event,id:s});d3.event.stopPropagation()});h.attr("fill",function(a,b){return q(a,b)}).attr("stroke",function(a,b){return q(a,b)});u.append("path").each(function(a){this._current=a});h.select("path").transition().attr("d",v).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
T||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return v(b(a))}});if(A){var I=d3.svg.arc().innerRadius(0);z&&(I=v);D&&(I=d3.svg.arc().outerRadius(v.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var e=d3.select(this);e.attr("transform",function(a){if(Q){a.outerRadius=E+10;a.innerRadius=E+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+I.centroid(a)+
") rotate("+b+")"}a.outerRadius=H+10;a.innerRadius=H+15;return"translate("+I.centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",Q?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var V={},p=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(Q){a.outerRadius=E+10;a.innerRadius=E+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+I.centroid(a)+") rotate("+b+")"}a.outerRadius=H+10;a.innerRadius=H+15;a=I.centroid(a);b=p(a);V[b]&&(a[1]-=14);V[p(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",Q?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var h=(a.endAngle-a.startAngle)/(2*Math.PI),k={key:m(a.data),value:e(a.data),percent:d3.format("%")(h)};return a.value&&h>K?k[C]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},k=500,t=500,m=function(a){return a.x},e=function(a){return a.y},h=function(a){return a.description},s=Math.floor(1E4*Math.random()),q=u.utils.defaultColor(),G=d3.format(",.2f"),A=!0,z=!0,D=!1,C="key",K=.02,T=!1,Q=!1,B=!1,R=!1,O=.5,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=M;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.values=function(b){u.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return m;m=b;return a};a.y=function(b){if(!arguments.length)return e;e=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return h;h=b;return a};a.showLabels=function(b){if(!arguments.length)return A;A=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return Q;Q=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return D;D=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return z;z=b;return a};a.labelType=function(b){if(!arguments.length)return C;C=(C=b)||"key";return a};a.donut=function(b){if(!arguments.length)return T;
T=b;return a};a.donutRatio=function(b){if(!arguments.length)return O;O=b;return a};a.startAngle=function(b){if(!arguments.length)return B;B=b;return a};a.endAngle=function(b){if(!arguments.length)return R;R=b;return a};a.id=function(b){if(!arguments.length)return s;s=b;return a};a.color=function(b){if(!arguments.length)return q;q=u.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return G;G=b;return a};a.labelThreshold=function(b){if(!arguments.length)return K;K=b;return a};
return a};u.models.pieChart=function(){function a(q){q.each(function(q){var s=d3.select(this),u=(m||parseInt(s.style("width"))||960)-t.left-t.right,K=(e||parseInt(s.style("height"))||400)-t.top-t.bottom;a.update=function(){s.transition().call(a)};a.container=this;A.disabled=q.map(function(a){return!!a.disabled});if(!z){var G;z={};for(G in A)z[G]=A[G]instanceof Array?A[G].slice(0):A[G]}if(q&&q.length)s.selectAll(".nv-noData").remove();else return G=s.selectAll(".nv-noData").data([D]),G.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),G.attr("x",t.left+u/2).attr("y",t.top+K/2).text(function(a){return a}),a;G=s.selectAll("g.nv-wrap.nv-pieChart").data([q]);var M=G.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),H=G.select("g");M.append("g").attr("class","nv-pieWrap");M.append("g").attr("class","nv-legendWrap");h&&(k.width(u).key(b.x()),G.select(".nv-legendWrap").datum(q).call(k),t.top!=k.height()&&(t.top=k.height(),K=(e||parseInt(s.style("height"))||
400)-t.top-t.bottom),G.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")"));G.attr("transform","translate("+t.left+","+t.top+")");b.width(u).height(K);u=H.select(".nv-pieWrap").datum([q]);d3.transition(u).call(b);k.dispatch.on("stateChange",function(b){A=b;C.stateChange(A);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a)});C.on("changeState",function(b){"undefined"!==typeof b.disabled&&(q.forEach(function(a,e){a.disabled=b.disabled[e]}),A.disabled=
b.disabled);a.update()})});return a}var b=u.models.pie(),k=u.models.legend(),t={top:30,right:20,bottom:20,left:20},m=null,e=null,h=!0,s=u.utils.defaultColor(),q=!0,G=function(a,b,e,h){return"<h3>"+a+"</h3><p>"+b+"</p>"},A={},z=null,D="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];C.tooltipShow(a)});C.on("tooltipShow",function(e){if(q){var h=b.description()(e.point)||
b.x()(e.point),k=e.pos[0]+0,m=e.pos[1]+0,s=b.valueFormat()(b.y()(e.point)),h=G(h,s,e,a);u.tooltip.show([k,m],h,0>e.value?"n":"s",null,void 0)}});C.on("tooltipHide",function(){q&&u.tooltip.cleanup()});a.legend=k;a.dispatch=C;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=
typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return e;e=b;return a};a.color=function(e){if(!arguments.length)return s;s=u.utils.getColor(e);k.color(s);b.color(s);return a};a.showLegend=function(b){if(!arguments.length)return h;h=b;return a};a.tooltips=
function(b){if(!arguments.length)return q;q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return G;G=b;return a};a.state=function(b){if(!arguments.length)return A;A=b;return a};a.defaultState=function(b){if(!arguments.length)return z;z=b;return a};a.noData=function(b){if(!arguments.length)return D;D=b;return a};return a};u.models.scatter=function(){function a(X){X.each(function(a){var X=k-b.left-b.right,aa=t-b.top-b.bottom,ea=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var ma=L&&E&&U?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:G(a,b),y:A(a,b),size:z(a,b)}})}));h.domain(L||d3.extent(ma.map(function(a){return a.x}).concat(K)));M&&a[0]?h.range(I||[(X*H+X)/(2*a[0].values.length),X-X*(1+H)/(2*a[0].values.length)]):h.range(I||[0,X]);s.domain(E||d3.extent(ma.map(function(a){return a.y}).concat(T))).range(J||[aa,0]);q.domain(U||d3.extent(ma.map(function(a){return a.size}).concat(Q))).range(v||[16,256]);if(h.domain()[0]===h.domain()[1]||
s.domain()[0]===s.domain()[1])da=!0;h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-.01*s.domain()[0],s.domain()[1]+.01*s.domain()[1]]):s.domain([-1,1]));isNaN(h.domain()[0])&&h.domain([-1,1]);isNaN(s.domain()[0])&&s.domain([-1,1]);S=S||h;Y=Y||s;var ba=ea.selectAll("g.nv-wrap.nv-scatter").data([a]),ma=ba.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+e+(da?" nv-single-point":"")),ea=ma.append("defs"),ma=ma.append("g"),qa=ba.select("g");ma.append("g").attr("class","nv-groups");ma.append("g").attr("class","nv-point-paths");ba.attr("transform","translate("+b.left+","+b.top+")");ea.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");ba.select("#nv-edge-clip-"+e+" rect").attr("width",X).attr("height",0<aa?aa:0);qa.attr("clip-path",P?"url(#nv-edge-clip-"+e+")":"");la=!0;X=ba.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});X.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);X.exit().remove();X.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});X.transition().style("fill",function(a,b){return m(a,b)}).style("stroke",function(a,b){return m(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);C?(aa=X.selectAll("circle.nv-point").data(function(a){return a.values},R),aa.enter().append("circle").style("fill",function(a,
b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return u.utils.NaNtoZero(S(G(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(Y(A(a,b)))}).attr("r",function(a,b){return Math.sqrt(q(z(a,b))/Math.PI)}),aa.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return u.utils.NaNtoZero(h(G(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(s(A(a,b)))}).remove(),aa.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),aa.transition().attr("cx",function(a,b){return u.utils.NaNtoZero(h(G(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(s(A(a,b)))}).attr("r",function(a,b){return Math.sqrt(q(z(a,b))/Math.PI)})):(aa=X.selectAll("path.nv-point").data(function(a){return a.values}),aa.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+S(G(a,b))+","+
Y(A(a,b))+")"}).attr("d",d3.svg.symbol().type(D).size(function(a,b){return q(z(a,b))})),aa.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+h(G(a,b))+","+s(A(a,b))+")"}).remove(),aa.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),aa.transition().attr("transform",function(a,b){return"translate("+h(G(a,b))+","+s(A(a,b))+")"}).attr("d",d3.svg.symbol().type(D).size(function(a,b){return q(z(a,
b))})));clearTimeout(na);na=setTimeout(function(){if(!B)return!1;var m=d3.merge(a.map(function(a,b){return a.values.map(function(a,e){var k=G(a,e),p=A(a,e);return[h(k)+1E-7*Math.random(),s(p)+1E-7*Math.random(),b,e,a]}).filter(function(a,b){return O(a[4],b)})}));if(!0===p){if(y){ba.select("defs").selectAll(".nv-point-clips").data([e]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+e);var q=ba.select("#nv-points-clip-"+e).selectAll("circle").data(m);q.enter().append("circle").attr("r",
F);q.exit().remove();q.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});ba.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+e+")")}m.length&&(m.push([h.range()[0]-20,s.range()[0]-20,null,null]),m.push([h.range()[1]+20,s.range()[1]+20,null,null]),m.push([h.range()[0]-20,s.range()[0]+20,null,null]),m.push([h.range()[1]+20,s.range()[1]-20,null,null]));var u=d3.geom.polygon([[-10,-10],[-10,t+10],[k+10,t+10],[k+10,-10]]),q=d3.geom.voronoi(m).map(function(a,b){return{data:u.clip(a),
series:m[b][2],point:m[b][3]}}),q=ba.select(".nv-point-paths").selectAll("path").data(q);q.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});q.exit().remove();q.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var v=function(e,k){if(la)return 0;var p=a[e.series];if("undefined"!==typeof p){var m=p.values[e.point];k({point:m,series:p,pos:[h(G(m,e.point))+b.left,s(A(m,e.point))+b.top],seriesIndex:e.series,pointIndex:e.point})}};q.on("click",function(a){v(a,
V.elementClick)}).on("mouseover",function(a){v(a,V.elementMouseover)}).on("mouseout",function(a,b){v(a,V.elementMouseout)})}else ba.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,k){if(la||!a[e.series])return 0;var p=a[e.series],m=p.values[k];V.elementClick({point:m,series:p,pos:[h(G(m,k))+b.left,s(A(m,k))+b.top],seriesIndex:e.series,pointIndex:k})}).on("mouseover",function(e,k){if(la||!a[e.series])return 0;var p=a[e.series],m=p.values[k];V.elementMouseover({point:m,
series:p,pos:[h(G(m,k))+b.left,s(A(m,k))+b.top],seriesIndex:e.series,pointIndex:k})}).on("mouseout",function(b,e){if(la||!a[b.series])return 0;var h=a[b.series];V.elementMouseout({point:h.values[e],series:h,seriesIndex:b.series,pointIndex:e})});la=!1},300);S=h.copy();Y=s.copy();q.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=u.utils.defaultColor(),e=Math.floor(1E5*Math.random()),h=d3.scale.linear(),s=d3.scale.linear(),q=d3.scale.linear(),G=function(a){return a.x},A=function(a){return a.y},
z=function(a){return a.size||1},D=function(a){return a.shape||"circle"},C=!0,K=[],T=[],Q=[],B=!0,R=null,O=function(a){return!a.notActive},M=!1,H=.1,P=!1,y=!0,F=function(){return 25},L=null,E=null,I=null,J=null,U=null,v=null,da=!1,V=d3.dispatch("elementClick","elementMouseover","elementMouseout"),p=!0,S,Y,na,la=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+e+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,h){d3.select(".nv-chart-"+e+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",h)};V.on("elementMouseover.point",function(b){B&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});V.on("elementMouseout.point",function(b){B&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=V;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return G;G=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return A;A=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return z;z=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return h;h=b;return a};a.yScale=function(b){if(!arguments.length)return s;s=b;return a};a.zScale=function(b){if(!arguments.length)return q;
q=b;return a};a.xDomain=function(b){if(!arguments.length)return L;L=b;return a};a.yDomain=function(b){if(!arguments.length)return E;E=b;return a};a.sizeDomain=function(b){if(!arguments.length)return U;U=b;return a};a.xRange=function(b){if(!arguments.length)return I;I=b;return a};a.yRange=function(b){if(!arguments.length)return J;J=b;return a};a.sizeRange=function(b){if(!arguments.length)return v;v=b;return a};a.forceX=function(b){if(!arguments.length)return K;K=b;return a};a.forceY=function(b){if(!arguments.length)return T;
T=b;return a};a.forceSize=function(b){if(!arguments.length)return Q;Q=b;return a};a.interactive=function(b){if(!arguments.length)return B;B=b;return a};a.pointKey=function(b){if(!arguments.length)return R;R=b;return a};a.pointActive=function(b){if(!arguments.length)return O;O=b;return a};a.padData=function(b){if(!arguments.length)return M;M=b;return a};a.padDataOuter=function(b){if(!arguments.length)return H;H=b;return a};a.clipEdge=function(b){if(!arguments.length)return P;P=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return y;y=b;return a};a.useVoronoi=function(b){if(!arguments.length)return p;p=b;!1===p&&(y=!1);return a};a.clipRadius=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return m;m=u.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return D;D=b;return a};a.onlyCircles=function(b){if(!arguments.length)return C;C=b;return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.singlePoint=function(b){if(!arguments.length)return da;
da=b;return a};return a};u.models.scatterChart=function(){function a(Y){Y.each(function(Y){function la(){if(F)return ba.select(".nv-point-paths").style("pointer-events","all"),!1;ba.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);D.distortion(y).focus(a[0]);C.distortion(y).focus(a[1]);ba.select(".nv-scatterWrap").call(b);O&&ba.select(".nv-x.nv-axis").call(k);M&&ba.select(".nv-y.nv-axis").call(t);ba.select(".nv-distributionX").datum(Y.filter(function(a){return!a.disabled})).call(h);
ba.select(".nv-distributionY").datum(Y.filter(function(a){return!a.disabled})).call(s)}var X=d3.select(this),ga=this,ka=(G||parseInt(X.style("width"))||960)-q.left-q.right,aa=(A||parseInt(X.style("height"))||400)-q.top-q.bottom;a.update=function(){X.transition().duration(p).call(a)};a.container=this;U.disabled=Y.map(function(a){return!!a.disabled});if(!v){var ea;v={};for(ea in U)v[ea]=U[ea]instanceof Array?U[ea].slice(0):U[ea]}if(Y&&Y.length&&Y.filter(function(a){return a.values.length}).length)X.selectAll(".nv-noData").remove();
else return ea=X.selectAll(".nv-noData").data([V]),ea.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ea.attr("x",q.left+ka/2).attr("y",q.top+aa/2).text(function(a){return a}),a;ea=X.selectAll("g.nv-wrap.nv-scatterChart").data([Y]);var ma=ea.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),ba=ea.select("g");ma.append("rect").attr("class","nvd3 nv-background");ma.append("g").attr("class","nv-x nv-axis");
ma.append("g").attr("class","nv-y nv-axis");ma.append("g").attr("class","nv-scatterWrap");ma.append("g").attr("class","nv-distWrap");ma.append("g").attr("class","nv-legendWrap");ma.append("g").attr("class","nv-controlsWrap");if(R){var qa=P?ka/2:ka;m.width(qa);ea.select(".nv-legendWrap").datum(Y).call(m);q.top!=m.height()&&(q.top=m.height(),aa=(A||parseInt(X.style("height"))||400)-q.top-q.bottom);ea.select(".nv-legendWrap").attr("transform","translate("+(ka-qa)+","+-q.top+")")}P&&(e.width(180).color(["#444"]),
ba.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+-q.top+")").call(e));ea.attr("transform","translate("+q.left+","+q.top+")");H&&ba.select(".nv-y.nv-axis").attr("transform","translate("+ka+",0)");b.width(ka).height(aa).color(Y.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!Y[b].disabled}));0!==K&&b.xDomain(null);0!==T&&b.yDomain(null);ea.select(".nv-scatterWrap").datum(Y.filter(function(a){return!a.disabled})).call(b);0!==K&&(qa=D.domain()[1]-D.domain()[0],
b.xDomain([D.domain()[0]-K*qa,D.domain()[1]+K*qa]));0!==T&&(qa=C.domain()[1]-C.domain()[0],b.yDomain([C.domain()[0]-T*qa,C.domain()[1]+T*qa]));0===T&&0===K||ea.select(".nv-scatterWrap").datum(Y.filter(function(a){return!a.disabled})).call(b);O&&(k.scale(D).ticks(k.ticks()&&k.ticks().length?k.ticks():ka/100).tickSize(-aa,0),ba.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")").call(k));M&&(t.scale(C).ticks(t.ticks()&&t.ticks().length?t.ticks():aa/36).tickSize(-ka,0),ba.select(".nv-y.nv-axis").call(t));
Q&&(h.getData(b.x()).scale(D).width(ka).color(Y.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!Y[b].disabled})),ma.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ba.select(".nv-distributionX").attr("transform","translate(0,"+C.range()[0]+")").datum(Y.filter(function(a){return!a.disabled})).call(h));B&&(s.getData(b.y()).scale(C).width(aa).color(Y.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!Y[b].disabled})),ma.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),ba.select(".nv-distributionY").attr("transform","translate("+(H?ka:-s.size())+",0)").datum(Y.filter(function(a){return!a.disabled})).call(s));d3.fisheye&&(ba.select(".nv-background").attr("width",ka).attr("height",aa),ba.select(".nv-background").on("mousemove",la),ba.select(".nv-background").on("click",function(){F=!F}),b.dispatch.on("elementClick.freezeFisheye",function(){F=!F}));e.dispatch.on("legendClick",function(e,h){e.disabled=!e.disabled;y=e.disabled?0:2.5;ba.select(".nv-background").style("pointer-events",
e.disabled?"none":"all");ba.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(D.distortion(y).focus(0),C.distortion(y).focus(0),ba.select(".nv-scatterWrap").call(b),ba.select(".nv-x.nv-axis").call(k),ba.select(".nv-y.nv-axis").call(t)):F=!1;a.update()});m.dispatch.on("stateChange",function(b){U.disabled=b.disabled;da.stateChange(U);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,e){return a.pos[1]-aa});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size());a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];da.tooltipShow(a)});da.on("tooltipShow",function(e){if(L){var h=ga.parentNode,p=e.pos[0]+(h.offsetLeft||0),m=e.pos[1]+(h.offsetTop||0),s=e.pos[0]+(h.offsetLeft||0),v=C.range()[0]+q.top+(h.offsetTop||0),y=D.range()[0]+q.left+(h.offsetLeft||0),A=e.pos[1]+(h.offsetTop||0),B=k.tickFormat()(b.x()(e.point,
e.pointIndex)),z=t.tickFormat()(b.y()(e.point,e.pointIndex));null!=E&&u.tooltip.show([s,v],E(e.series.key,B,z,e,a),"n",1,h,"x-nvtooltip");null!=I&&u.tooltip.show([y,A],I(e.series.key,B,z,e,a),"e",1,h,"y-nvtooltip");null!=J&&u.tooltip.show([p,m],J(e.series.key,B,z,e,a),0>e.value?"n":"s",null,h)}});da.on("changeState",function(b){"undefined"!==typeof b.disabled&&(Y.forEach(function(a,e){a.disabled=b.disabled[e]}),U.disabled=b.disabled);a.update()});D.copy();C.copy()});return a}var b=u.models.scatter(),
k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e=u.models.legend(),h=u.models.distribution(),s=u.models.distribution(),q={top:30,right:20,bottom:50,left:75},G=null,A=null,z=u.utils.defaultColor(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),C=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),K=0,T=0,Q=!1,B=!1,R=!0,O=!0,M=!0,H=!1,P=!!d3.fisheye,y=0,F=!1,L=!0,E=function(a,b,e){return"<strong>"+b+"</strong>"},I=function(a,b,e){return"<strong>"+
e+"</strong>"},J=null,U={},v=null,da=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),V="No Data Available.",p=250;b.xScale(D).yScale(C);k.orient("bottom").tickPadding(10);t.orient(H?"right":"left").tickPadding(10);h.axis("x");s.axis("y");e.updateState(!1);var S=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){da.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",s.size())});da.on("tooltipHide",function(){L&&u.tooltip.cleanup()});a.dispatch=da;a.scatter=b;a.legend=m;a.controls=e;a.xAxis=k;a.yAxis=t;a.distX=h;a.distY=s;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);
a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return G;G=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);m.color(z);h.color(z);s.color(z);return a};
a.showDistX=function(b){if(!arguments.length)return Q;Q=b;return a};a.showDistY=function(b){if(!arguments.length)return B;B=b;return a};a.showControls=function(b){if(!arguments.length)return P;P=b;return a};a.showLegend=function(b){if(!arguments.length)return R;R=b;return a};a.showXAxis=function(b){if(!arguments.length)return O;O=b;return a};a.showYAxis=function(b){if(!arguments.length)return M;M=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return H;H=b;t.orient(b?"right":"left");
return a};a.fisheye=function(b){if(!arguments.length)return y;y=b;return a};a.xPadding=function(b){if(!arguments.length)return K;K=b;return a};a.yPadding=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return L;L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return J;J=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=
function(b){if(!arguments.length)return U;U=b;return a};a.defaultState=function(b){if(!arguments.length)return v;v=b;return a};a.noData=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return p;p=b;return a};return a};u.models.scatterPlusLineChart=function(){function a(p){p.each(function(p){function Y(){if(P)return ea.select(".nv-point-paths").style("pointer-events","all"),!1;ea.select(".nv-point-paths").style("pointer-events","none");var a=
d3.mouse(this);D.distortion(H).focus(a[0]);C.distortion(H).focus(a[1]);ea.select(".nv-scatterWrap").datum(p.filter(function(a){return!a.disabled})).call(b);B&&ea.select(".nv-x.nv-axis").call(k);R&&ea.select(".nv-y.nv-axis").call(t);ea.select(".nv-distributionX").datum(p.filter(function(a){return!a.disabled})).call(h);ea.select(".nv-distributionY").datum(p.filter(function(a){return!a.disabled})).call(s)}var na=d3.select(this),la=this,X=(G||parseInt(na.style("width"))||960)-q.left-q.right,ga=(A||parseInt(na.style("height"))||
400)-q.top-q.bottom;a.update=function(){na.transition().duration(da).call(a)};a.container=this;I.disabled=p.map(function(a){return!!a.disabled});if(!J){var ka;J={};for(ka in I)J[ka]=I[ka]instanceof Array?I[ka].slice(0):I[ka]}if(p&&p.length&&p.filter(function(a){return a.values.length}).length)na.selectAll(".nv-noData").remove();else return ka=na.selectAll(".nv-noData").data([v]),ka.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ka.attr("x",q.left+
X/2).attr("y",q.top+ga/2).text(function(a){return a}),a;D=b.xScale();C=b.yScale();var aa=na.selectAll("g.nv-wrap.nv-scatterChart").data([p]);ka=aa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var ea=aa.select("g");ka.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ka.append("g").attr("class","nv-x nv-axis");ka.append("g").attr("class","nv-y nv-axis");ka.append("g").attr("class","nv-scatterWrap");ka.append("g").attr("class",
"nv-regressionLinesWrap");ka.append("g").attr("class","nv-distWrap");ka.append("g").attr("class","nv-legendWrap");ka.append("g").attr("class","nv-controlsWrap");aa.attr("transform","translate("+q.left+","+q.top+")");O&&ea.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");Q&&(m.width(X/2),aa.select(".nv-legendWrap").datum(p).call(m),q.top!=m.height()&&(q.top=m.height(),ga=(A||parseInt(na.style("height"))||400)-q.top-q.bottom),aa.select(".nv-legendWrap").attr("transform","translate("+X/
2+","+-q.top+")"));M&&(e.width(180).color(["#444"]),ea.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-q.top+")").call(e));b.width(X).height(ga).color(p.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!p[b].disabled}));aa.select(".nv-scatterWrap").datum(p.filter(function(a){return!a.disabled})).call(b);aa.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");aa=aa.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
aa.enter().append("g").attr("class","nv-regLines");aa=aa.selectAll(".nv-regLine").data(function(a){return[a]});aa.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);aa.transition().attr("x1",D.range()[0]).attr("x2",D.range()[1]).attr("y1",function(a,b){return C(D.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return C(D.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,e){return z(a,e)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===
typeof a.slope||"undefined"===typeof a.intercept?0:1});B&&(k.scale(D).ticks(k.ticks()?k.ticks():X/100).tickSize(-ga,0),ea.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")").call(k));R&&(t.scale(C).ticks(t.ticks()?t.ticks():ga/36).tickSize(-X,0),ea.select(".nv-y.nv-axis").call(t));K&&(h.getData(b.x()).scale(D).width(X).color(p.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!p[b].disabled})),ka.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),
ea.select(".nv-distributionX").attr("transform","translate(0,"+C.range()[0]+")").datum(p.filter(function(a){return!a.disabled})).call(h));T&&(s.getData(b.y()).scale(C).width(ga).color(p.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!p[b].disabled})),ka.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),ea.select(".nv-distributionY").attr("transform","translate("+(O?X:-s.size())+",0)").datum(p.filter(function(a){return!a.disabled})).call(s));d3.fisheye&&(ea.select(".nv-background").attr("width",
X).attr("height",ga),ea.select(".nv-background").on("mousemove",Y),ea.select(".nv-background").on("click",function(){P=!P}),b.dispatch.on("elementClick.freezeFisheye",function(){P=!P}));e.dispatch.on("legendClick",function(e,h){e.disabled=!e.disabled;H=e.disabled?0:2.5;ea.select(".nv-background").style("pointer-events",e.disabled?"none":"all");ea.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(D.distortion(H).focus(0),C.distortion(H).focus(0),ea.select(".nv-scatterWrap").call(b),
ea.select(".nv-x.nv-axis").call(k),ea.select(".nv-y.nv-axis").call(t)):P=!1;a.update()});m.dispatch.on("stateChange",function(b){I=b;U.stateChange(I);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-ga);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size());a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];U.tooltipShow(a)});U.on("tooltipShow",
function(e){if(y){var h=la.parentNode,p=e.pos[0]+(h.offsetLeft||0),m=e.pos[1]+(h.offsetTop||0),s=e.pos[0]+(h.offsetLeft||0),v=C.range()[0]+q.top+(h.offsetTop||0),J=D.range()[0]+q.left+(h.offsetLeft||0),A=e.pos[1]+(h.offsetTop||0),B=k.tickFormat()(b.x()(e.point,e.pointIndex)),z=t.tickFormat()(b.y()(e.point,e.pointIndex));null!=F&&u.tooltip.show([s,v],F(e.series.key,B,z,e,a),"n",1,h,"x-nvtooltip");null!=L&&u.tooltip.show([J,A],L(e.series.key,B,z,e,a),"e",1,h,"y-nvtooltip");null!=E&&u.tooltip.show([p,
m],E(e.series.key,B,z,e.point.tooltip,e,a),0>e.value?"n":"s",null,h)}});U.on("changeState",function(b){"undefined"!==typeof b.disabled&&(p.forEach(function(a,e){a.disabled=b.disabled[e]}),I.disabled=b.disabled);a.update()});D.copy();C.copy()});return a}var b=u.models.scatter(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e=u.models.legend(),h=u.models.distribution(),s=u.models.distribution(),q={top:30,right:20,bottom:50,left:75},G=null,A=null,z=u.utils.defaultColor(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),C=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),K=!1,T=!1,Q=!0,B=!0,R=!0,O=!1,M=!!d3.fisheye,H=0,P=!1,y=!0,F=function(a,b,e){return"<strong>"+b+"</strong>"},L=function(a,b,e){return"<strong>"+e+"</strong>"},E=function(a,b,e,h){return"<h3>"+a+"</h3><p>"+h+"</p>"},I={},J=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),v="No Data Available.",da=250;b.xScale(D).yScale(C);k.orient("bottom").tickPadding(10);t.orient(O?"right":"left").tickPadding(10);
h.axis("x");s.axis("y");e.updateState(!1);var V=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",s.size())});U.on("tooltipHide",function(){y&&u.tooltip.cleanup()});a.dispatch=U;a.scatter=b;a.legend=m;a.controls=e;a.xAxis=k;a.yAxis=t;a.distX=h;a.distY=s;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:
q.left;return a};a.width=function(b){if(!arguments.length)return G;G=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);m.color(z);h.color(z);s.color(z);return a};a.showDistX=function(b){if(!arguments.length)return K;K=b;return a};a.showDistY=function(b){if(!arguments.length)return T;T=b;return a};a.showControls=function(b){if(!arguments.length)return M;M=b;return a};a.showLegend=function(b){if(!arguments.length)return Q;
Q=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return R;R=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return O;O=b;t.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return H;H=b;return a};a.tooltips=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return F;
F=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return L;L=b;return a};a.state=function(b){if(!arguments.length)return I;I=b;return a};a.defaultState=function(b){if(!arguments.length)return J;J=b;return a};a.noData=function(b){if(!arguments.length)return v;v=b;return a};a.transitionDuration=function(b){if(!arguments.length)return da;da=b;return a};return a};u.models.sparkline=function(){function a(m){m.each(function(a){var m=k-b.left-b.right,u=t-b.top-b.bottom,K=d3.select(this);e.domain(A||
d3.extent(a,s)).range(D||[0,m]);h.domain(z||d3.extent(a,q)).range(C||[u,0]);a=K.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");m=a.selectAll("path").data(function(a){return[a]});m.enter().append("path");m.exit().remove();m.style("stroke",function(a,b){return a.color||G(a,b)}).attr("d",d3.svg.line().x(function(a,b){return e(s(a,b))}).y(function(a,b){return h(q(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(e){if(-1!=e){var h=a[e];h.pointIndex=e;return h}return null}var e=a.map(function(a,b){return q(a,b)}),k=b(e.lastIndexOf(h.domain()[1])),m=b(e.indexOf(h.domain()[0])),e=b(e.length-1);return[m,k,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return e(s(a,a.pointIndex))}).attr("cy",function(a,b){return h(q(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return s(a,
a.pointIndex)==e.domain()[1]?"nv-point nv-currentValue":q(a,a.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},k=400,t=32,m=!0,e=d3.scale.linear(),h=d3.scale.linear(),s=function(a){return a.x},q=function(a){return a.y},G=u.utils.getColor(["#000"]),A,z,D,C;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:
b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.x=function(b){if(!arguments.length)return s;s=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return q;q=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;
h=b;return a};a.xDomain=function(b){if(!arguments.length)return A;A=b;return a};a.yDomain=function(b){if(!arguments.length)return z;z=b;return a};a.xRange=function(b){if(!arguments.length)return D;D=b;return a};a.yRange=function(b){if(!arguments.length)return C;C=b;return a};a.animate=function(b){if(!arguments.length)return m;m=b;return a};a.color=function(b){if(!arguments.length)return G;G=u.utils.getColor(b);return a};return a};u.models.sparklinePlus=function(){function a(u){u.each(function(z){function B(){if(!q){var a=
y.selectAll(".nv-hoverValue").data(s),h=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+e(b.x()(z[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);s.length&&(h.append("line").attr("x1",0).attr("y1",-k.top).attr("x2",0).attr("y2",M),h.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-k.top).attr("text-anchor","end").attr("dy",".9em"),y.select(".nv-hoverValue .nv-xValue").text(G(b.x()(z[s[0]],s[0]))),h.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-k.top).attr("text-anchor","start").attr("dy",".9em"),y.select(".nv-hoverValue .nv-yValue").text(A(b.y()(z[s[0]],s[0]))))}}var I=d3.select(this),O=(t||parseInt(I.style("width"))||960)-k.left-k.right,M=(m||parseInt(I.style("height"))||400)-k.top-k.bottom;a.update=function(){a(u)};a.container=
this;if(z&&z.length)I.selectAll(".nv-noData").remove();else{var H=I.selectAll(".nv-noData").data([K]);H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");H.attr("x",k.left+O/2).attr("y",k.top+M/2).text(function(a){return a});return a}H=b.y()(z[z.length-1],z.length-1);e=b.xScale();h=b.yScale();var P=I.selectAll("g.nv-wrap.nv-sparklineplus").data([z]),I=P.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),y=P.select("g");
I.append("g").attr("class","nv-sparklineWrap");I.append("g").attr("class","nv-valueWrap");I.append("g").attr("class","nv-hoverArea");P.attr("transform","translate("+k.left+","+k.top+")");P=y.select(".nv-sparklineWrap");b.width(O).height(M);P.call(b);P=y.select(".nv-valueWrap").selectAll(".nv-currentValue").data([H]);P.enter().append("text").attr("class","nv-currentValue").attr("dx",C?-8:8).attr("dy",".9em").style("text-anchor",C?"end":"start");P.attr("x",O+(C?k.right:0)).attr("y",D?function(a){return h(a)}:
0).style("fill",b.color()(z[z.length-1],z.length-1)).text(A(H));I.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!q){for(var a=d3.mouse(this)[0]-k.left,a=Math.round(e.invert(a)),h=Math.abs(b.x()(z[0],0)-a),m=0,t=0;t<z.length;t++)Math.abs(b.x()(z[t],t)-a)<h&&(h=Math.abs(b.x()(z[t],t)-a),m=t);s=[m];B()}}).on("click",function(){q=!q}).on("mouseout",function(){s=[];B()});y.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-k.left+","+-k.top+")"}).attr("width",
O+k.left+k.right).attr("height",M+k.top)});return a}var b=u.models.sparkline(),k={top:15,right:100,bottom:10,left:50},t=null,m=null,e,h,s=[],q=!1,G=d3.format(",r"),A=d3.format(",.2f"),z=!0,D=!0,C=!1,K="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?
b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return m;m=b;return a};a.xTickFormat=function(b){if(!arguments.length)return G;G=b;return a};a.yTickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.showValue=function(b){if(!arguments.length)return z;z=b;return a};a.alignValue=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return C;
C=b;return a};a.noData=function(b){if(!arguments.length)return K;K=b;return a};return a};u.models.stackedArea=function(){function a(q){q.each(function(q){var u=k-b.left-b.right,B=t-b.top-b.bottom,H=d3.select(this);C=I.xScale();K=I.yScale();var P=q;q.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=b;return a})});q=q.filter(function(a){return!a.disabled});q=d3.layout.stack().order(A).offset(G).values(function(a){return a.values}).x(h).y(s).out(function(a,
b,e){e=0===s(a)?0:e;a.display={y:e,y0:b}})(q);var H=H.selectAll("g.nv-wrap.nv-stackedarea").data([q]),y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),F=y.append("defs"),y=y.append("g"),L=H.select("g");y.append("g").attr("class","nv-areaWrap");y.append("g").attr("class","nv-scatterWrap");H.attr("transform","translate("+b.left+","+b.top+")");I.width(u).height(B).x(h).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(q.map(function(a,b){return a.color||m(a,a.seriesIndex)}));
L.select(".nv-scatterWrap").datum(q).call(I);F.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");H.select("#nv-edge-clip-"+e+" rect").attr("width",u).attr("height",B);L.attr("clip-path",D?"url(#nv-edge-clip-"+e+")":"");var E=d3.svg.area().x(function(a,b){return C(h(a,b))}).y0(function(a){return K(a.display.y0)}).y1(function(a){return K(a.display.y+a.display.y0)}).interpolate(z),W=d3.svg.area().x(function(a,b){return C(h(a,b))}).y0(function(a){return K(a.display.y0)}).y1(function(a){return K(a.display.y0)}),
u=L.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});u.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return W(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);Q.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);Q.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);Q.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});u.exit().remove();u.style("fill",function(a,b){return a.color||m(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||m(a,a.seriesIndex)});u.transition().attr("d",function(a,b){return E(a.values,b)});I.dispatch.on("elementMouseover.area",function(a){L.select(".nv-chart-"+e+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});I.dispatch.on("elementMouseout.area",function(a){L.select(".nv-chart-"+e+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,e=a[0].length,h=1/b,k,m,q,t=[];for(m=0;m<e;++m){for(q=k=0;k<P.length;k++)q+=s(P[k].values[m]);if(q)for(k=0;k<b;k++)a[k][m][1]/=q;else for(k=0;k<b;k++)a[k][m][1]=h}for(m=0;m<e;++m)t[m]=0;return t}});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,m=u.utils.defaultColor(),
e=Math.floor(1E5*Math.random()),h=function(a){return a.x},s=function(a){return a.y},q="stack",G="zero",A="default",z="linear",D=!1,C,K,I=u.models.scatter(),Q=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");I.size(2.2).sizeDomain([2.2,2.2]);I.dispatch.on("elementClick.area",function(a){Q.areaClick(a)});I.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];Q.tooltipShow(a)});I.dispatch.on("elementMouseout.tooltip",function(a){Q.tooltipHide(a)});
a.dispatch=Q;a.scatter=I;d3.rebind(a,I,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return h;h=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return s;s=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return m;m=u.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return G;
G=b;return a};a.order=function(b){if(!arguments.length)return A;A=b;return a};a.style=function(b){if(!arguments.length)return q;q=b;switch(q){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return z;
z=b;return a};return a};u.models.stackedAreaChart=function(){function a(v){v.each(function(v){var V=d3.select(this),p=this,S=(q||parseInt(V.style("width"))||960)-s.left-s.right,Y=(G||parseInt(V.style("height"))||400)-s.top-s.bottom;a.update=function(){V.transition().duration(U).call(a)};a.container=this;P.disabled=v.map(function(a){return!!a.disabled});if(!y){var na;y={};for(na in P)y[na]=P[na]instanceof Array?P[na].slice(0):P[na]}if(v&&v.length&&v.filter(function(a){return a.values.length}).length)V.selectAll(".nv-noData").remove();
else return na=V.selectAll(".nv-noData").data([F]),na.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),na.attr("x",s.left+S/2).attr("y",s.top+Y/2).text(function(a){return a}),a;O=b.xScale();M=b.yScale();na=V.selectAll("g.nv-wrap.nv-stackedAreaChart").data([v]);var la=na.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),X=na.select("g");la.append("rect").style("opacity",0);la.append("g").attr("class","nv-x nv-axis");
la.append("g").attr("class","nv-y nv-axis");la.append("g").attr("class","nv-stackedWrap");la.append("g").attr("class","nv-legendWrap");la.append("g").attr("class","nv-controlsWrap");la.append("g").attr("class","nv-interactive");X.select("rect").attr("width",S).attr("height",Y);D&&(la=z?S-E:S,m.width(la),X.select(".nv-legendWrap").datum(v).call(m),s.top!=m.height()&&(s.top=m.height(),Y=(G||parseInt(V.style("height"))||400)-s.top-s.bottom),X.select(".nv-legendWrap").attr("transform","translate("+(S-
la)+","+-s.top+")"));if(z){var ga=[{key:J.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:J.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:J.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:J.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];E=W.length/3*260;ga=ga.filter(function(a){return-1!==W.indexOf(a.metaKey)});e.width(E).color(["#444",
"#444","#444"]);X.select(".nv-controlsWrap").datum(ga).call(e);s.top!=Math.max(e.height(),m.height())&&(s.top=Math.max(e.height(),m.height()),Y=(G||parseInt(V.style("height"))||400)-s.top-s.bottom);X.select(".nv-controlsWrap").attr("transform","translate(0,"+-s.top+")")}na.attr("transform","translate("+s.left+","+s.top+")");I&&X.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)");Q&&(h.width(S).height(Y).margin({left:s.left,top:s.top}).svgContainer(V).xScale(O),na.select(".nv-interactive").call(h));
b.width(S).height(Y);X.select(".nv-stackedWrap").datum(v).transition().call(b);C&&(k.scale(O).ticks(S/100).tickSize(-Y,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+Y+")"),X.select(".nv-x.nv-axis").transition().duration(0).call(k));K&&(t.scale(M).ticks("wiggle"==b.offset()?0:Y/36).tickSize(-S,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):H),X.select(".nv-y.nv-axis").transition().duration(0).call(t));b.dispatch.on("areaClick.toggle",function(b){1===
v.filter(function(a){return!a.disabled}).length?v.forEach(function(a){a.disabled=!1}):v.forEach(function(a,e){a.disabled=e!=b.seriesIndex});P.disabled=v.map(function(a){return!!a.disabled});L.stateChange(P);a.update()});m.dispatch.on("stateChange",function(b){P.disabled=b.disabled;L.stateChange(P);a.update()});e.dispatch.on("legendClick",function(e,h){e.disabled&&(ga=ga.map(function(a){a.disabled=!0;return a}),e.disabled=!1,b.style(e.style),P.style=b.style(),L.stateChange(P),a.update())});h.dispatch.on("elementMousemove",
function(e){b.clearHighlights();var m,q,y,z=[];v.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(h,k){q=u.interactiveBisect(h.values,e.pointXValue,a.x());b.highlightPoint(k,q,!0);var p=h.values[q];if("undefined"!==typeof p){"undefined"===typeof m&&(m=p);"undefined"===typeof y&&(y=a.xScale()(a.x()(p,q)));var s="expand"==b.style()?p.display.y:a.y()(p,q);z.push({key:h.key,value:s,color:A(h,h.seriesIndex),stackedValue:p.display})}});z.reverse();if(2<z.length){var C=a.yScale().invert(e.mouseY),
D=null;z.forEach(function(a,b){C=Math.abs(C);var e=Math.abs(a.stackedValue.y0),h=Math.abs(a.stackedValue.y);C>=e&&C<=h+e&&(D=b)});null!=D&&(z[D].highlight=!0)}var J=k.tickFormat()(a.x()(m,q)),G="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return t.tickFormat()(a)};h.tooltip.position({left:y+s.left,top:e.mouseY+s.top}).chartContainer(p.parentNode).enabled(B).valueFormatter(G).data({value:J,series:z})();h.renderGuideLine(y)});h.dispatch.on("elementMouseout",function(a){L.tooltipHide();
b.clearHighlights()});L.on("tooltipShow",function(e){if(B){var h=p.parentNode,m=e.pos[0]+(h.offsetLeft||0),q=e.pos[1]+(h.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),v=t.tickFormat()(b.y()(e.point,e.pointIndex)),s=R(e.series.key,s,v,e,a);u.tooltip.show([m,q],s,0>e.value?"n":"s",null,h)}});L.on("changeState",function(e){"undefined"!==typeof e.disabled&&v.length===e.disabled.length&&(v.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.style&&
b.style(e.style);a.update()})});return a}var b=u.models.stackedArea(),k=u.models.axis(),t=u.models.axis(),m=u.models.legend(),e=u.models.legend(),h=u.interactiveGuideline(),s={top:30,right:25,bottom:50,left:60},q=null,G=null,A=u.utils.defaultColor(),z=!0,D=!0,C=!0,K=!0,I=!1,Q=!1,B=!0,R=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},O,M,H=d3.format(",.2f"),P={style:b.style()},y=null,F="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250,
W=["Stacked","Stream","Expanded"],J={},U=250;k.orient("bottom").tickPadding(7);t.orient(I?"right":"left");e.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];L.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){B&&u.tooltip.cleanup()});a.dispatch=L;a.stacked=b;a.legend=m;a.controls=e;a.xAxis=k;a.yAxis=t;a.interactiveLayer=h;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return s;s.top="undefined"!=typeof b.top?b.top:s.top;s.right="undefined"!=typeof b.right?b.right:s.right;s.bottom="undefined"!=typeof b.bottom?b.bottom:s.bottom;s.left="undefined"!=typeof b.left?b.left:s.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=
function(b){if(!arguments.length)return G;G=b;return a};a.color=function(e){if(!arguments.length)return A;A=u.utils.getColor(e);m.color(A);b.color(A);return a};a.showControls=function(b){if(!arguments.length)return z;z=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return C;C=b;return a};a.showYAxis=function(b){if(!arguments.length)return K;K=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return I;I=b;t.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return Q;Q=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return R;R=b;return a};a.tooltips=function(b){if(!arguments.length)return B;B=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=
function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.controlsData=function(b){if(!arguments.length)return W;W=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return J;J=b;return a};t.setTickFormat=t.tickFormat;t.tickFormat=function(a){if(!arguments.length)return H;H=a;return t};return a}})();
(function(I,u){var a=0;I.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=a;a+=1;this.chart=this.table=null},_init:function(){var a=
I(this.element),k=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var t=a.find(".pt-chart");this.chart=t.length?t.first():null;k.renderFilter||k.renderOptions?(t="#"+a.attr("id"),k.renderOptions?(I(t+"-options").show(),k.collapseOptions&&(I(t+"-options legend").siblings().toggle(),I(t+"-options legend").children().toggle())):I(t+"-options").hide(),k.renderFilter?(I(t+
"-filters").show(),k.collapseFilter&&(I(t+"-filters legend").siblings().toggle(),I(t+"-filters legend").children().toggle())):I(t+"-options").hide()):a.find(".pt-form-container").hide();k.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());k.numberFormatter=function(a){var b=k.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");a=b[0];b=1<b.length?"."+b[1]:"";
a=a.replace(new RegExp("\\B(?=(\\d{"+k.thousandGrouping+"})+(?!\\d))","g"),k.thousandSeparator);return a+b};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=I(this.element),k=null;this._unbindEvents();var t=a.find('input[type="hidden"][name="pivotdata"]');t.length&&(k=JSON.parse(I(t).first().val()));k?"count"==k.method&&(this.options.precision=0,this.options.minTickSize=1):(k={empty:!0},a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide());
this.data=k;k.nodata?(a.find(".pt-table").first().empty().append(I('<div class="pt-no-data">'+k.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();k.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=I(this.element),k=a.find(".pt-table").first().empty();
this.table=null;var t=this.data;if(!t.empty)if(this.options.renderTable){var m=t.cells,e=t.cols,h=t.rows,s=t.total,q=t.labels,u=this.options,A=u.showTotals,z=!1;1==e.length&&null===e[0][4]&&(z=!0);m=t.cells.slice(0);if(z&&A)for(e=[],t=0;t<h.length;t++)m[t]=[];else{for(t=0;t<h.length;t++)m[t]=m[t].filter(function(a,b){return"__other__"!=e[b][0]});e=e.filter(function(a){return"__other__"!=a[0]})}t=!1;1==e.length&&null===e[0][4]&&(t=!0);t&&A?(h=[],m=[]):(m=m.filter(function(a,b){return"__other__"!=h[b][0]}),
h=h.filter(function(a){return"__other__"!=a[0]}));k=d3.select(k.get(0)).append("table").attr("class","dataTable display report");k.append("thead").call(this._renderHeader,e,q,u).call(this._renderColumns,e,q,u);k.append("tbody").call(this._renderRows,this,h,e,q,m,u);u.showTotals&&k.append("tfoot").call(this._renderFooter,h,e,q,s);this.table=I(k.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),
a.find(".pt-hide-table").hide()},_renderHeader:function(a,k,t,m){a=a.append("tr");a.append("th").attr("scope","col").text(t.layer);k.length&&a.append("th").attr({scope:"col",colspan:k.length}).text(t.cols);m.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(t.total);return a},_renderColumns:function(a,k,t,m){a=a.append("tr");a.append("th").attr({scope:"col","class":"pt-rows-header"}).text(t.rows);var e=!1;1==k.length&&null===k[0][4]&&(e=!0);a.selectAll("th.pt-data").data(k).enter().append("th").attr({scope:"col",
"class":"pt-col-label"}).text(function(a){return e?"":a[4]});return a},_renderRows:function(a,k,t,m,e,h,s){t=a.selectAll("tr.pt-row").data(t).enter().append("tr").attr("class",function(a,b){return b%2?"odd":"even"});var q=!1;1==t.length&&null===t[0][4]&&(q=!0);t.append("td").text(function(a){return q?"":a[4]});t.selectAll("td.pt-cell").data(function(a,b){return h[b]}).enter().append("td").attr("class","pt-cell").each(k._renderCell,e);s.showTotals&&t.append("td").attr("class","pt-row-total").text(function(a){return a[2]});
return t},_renderCell:function(a,k,t){k=d3.select(this);var m=a.items,e=k.append("div").attr("class","pt-cell-value");null===m?e.text(t.none):I.isArray(m)?e.append("ul").selectAll("li").data(m).enter().append("li").html(function(a){return a}):e.text(m);a=a.keys;m&&a&&a.length&&(I(k.node()).data("records",a),k.append("div").attr("class","pt-cell-zoom"))},_renderFooter:function(a,k,t,m,e){k=k.length%2?"odd":"even";a=a.append("tr").attr("class",k+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",
scope:"row"}).text(m.total);a.selectAll("td.pt-col-total").data(t).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2]});a.append("td").attr("class","pt-total").text(e);return a},_renderChartOptions:function(){var a=I(this.element),k=a.find(".pt-chart-controls").first().empty(),t=this.data;if(!t.empty&&this.options.renderChart){var t=t.labels,m=a.attr("id"),a=t.layer,e=t.rows,h=t.cols,s=t.per,q=I('<div class="pt-chart-opts">'),u=m+"-pchart-rows",A=m+"-vchart-rows",z=m+"-hchart-rows",
D=m+"-schart-rows",C=m+"-pchart-cols",K=m+"-vchart-cols",T=m+"-hchart-cols",m=m+"-schart-cols";a&&I(q).append(I('<span class="pt-chart-label">'+a+": </span>"));e&&I(q).append(I('<div id="'+u+'" class="pt-chart-icon pt-pchart"/><div id="'+A+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+s+" "+e+"</span>"));h&&I(q).append(I('<div id="'+C+'" class="pt-chart-icon pt-pchart"/><div id="'+K+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+s+" "+h+"</span>"));e&&h&&I(q).append(I('<span class="pt-chart-label">| '+
t.breakdown+': </span><div id="'+D+'" class="pt-chart-icon pt-schart"/><div id="'+z+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+s+" "+e+'</span><div id="'+m+'"  class="pt-chart-icon pt-schart"/><div id="'+T+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+s+" "+h+"</span>"));I(k).append(q)}},_truncateLabel:function(a,k){return a.length>k?a.substring(0,k-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var k=I(this.element),t=this.data;k.find(".pt-chart-contents").hide();
if(k=this.chart)if(I(k).unbind("plothover").unbind("plotclick").empty(),!t.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{k=this.options.collapseChart;if("undefined"==typeof a||!a){if(k)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(k)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;k=a.type;a=a.axis;var m=t.labels,e=m.per,h=m.layer+" "+e+" "+m.rows,m=m.layer+" "+e+
" "+m.cols,e=t.filter,s=e[0],q=e[1];"piechart"==k?"rows"==a?this._renderPieChart(t.rows,h,s):this._renderPieChart(t.cols,m,q):"barchart"==k?"rows"==a?this._renderBarChart(t.rows,h,s):this._renderBarChart(t.cols,m,q):"breakdown"==k?"rows"==a?this._renderBreakDown(t,0,h,e):this._renderBreakDown(t,1,m,e):"spectrum"==k&&this._renderSpectrum(t,a,e)}}},_renderPieChart:function(a,k,t){var m=this.chart;if(m){I(m).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});k?I(m).siblings(".pt-chart-title").html("<h4>"+
k+"</h4>"):I(m).siblings(".pt-chart-title").empty();var e=[],h=0;for(k=0;k<a.length;k++){var s=a[k];!s[1]&&0<=s[2]&&(e.push({index:s[0],label:s[4],value:s[2],key:s[3]}),h+=s[2])}var q=this;q.chartOptions.currentDataIndex=null;var u=function(a){if(q.chartOptions.currentDataIndex!=a.pointIndex){q._removeChartTooltip();q.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,e=Math.round(b/h*100),k='<div class="pt-tooltip-label">'+a.label+"</div>";q._renderChartTooltip(a.pos[0],a.pos[1],k+('<div class="pt-tooltip-text">'+
b+" ("+e+"%)</div>"));I(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).pieLabelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0).tooltips(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",u).on("elementMouseout",function(a){I(".pt-tooltip").remove();q.chartOptions.currentDataIndex=null;q.chartOptions.currentSeriesIndex=
null});if(q.options.exploreChart&&t)a.pie.dispatch.on("elementClick",function(a){a=a.point;q._chartExplore([["__other__"==a.index?t+"__belongs":t,a.key]])});d3.select(I(m).get(0)).append("svg").attr("class","nv").datum(e).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},_renderBarChart:function(a,k,t){var m=this.chart;if(m){I(m).closest(".pt-chart-contents").show().css({width:"96%"});for(var e=[],h=this._truncateLabel,s=0;s<a.length;s++){var q=a[s];q[1]||e.push({label:q[4],
value:q[2],filterIndex:q[0],filterKey:q[3]})}I(m).css({height:"360px"});k?I(m).siblings(".pt-chart-title").html("<h4>"+k+"</h4>"):I(m).siblings(".pt-chart-title").empty();var u=function(a,b,e,h){a=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},h.pointIndex)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},A=this,z=this.options.numberFormatter;nv.addGraph(function(){var a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(u).showValues(!0);
a.valueFormat(z);a.yAxis.tickFormat(z);a.xAxis.tickFormat(function(a){return h(a,18)});d3.select(I(m).get(0)).append("svg").attr("class","nv").datum([{key:"reportChart",values:e}]).transition().duration(500).call(a);if(A.options.exploreChart&&t)a.discretebar.dispatch.on("elementClick",function(a){var b=a.point.filterKey;null===b&&(b="None");var e=t;"__other__"==a.point.filterIndex&&(e+="__belongs");A._chartExplore([[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,
k,t,m){var e=this.chart;if(e){I(e).closest(".pt-chart-contents").show().css({width:"96%"});var h=a.cells,s,q,u=[],A=[],z,D;0===k?(s=a.rows,q=a.cols,a=function(a,b){return h[u[a]][A[b]].value},z=m[0],D=m[1]):(s=a.cols,q=a.rows,a=function(a,b){return h[A[b]][u[a]].value},z=m[1],D=m[0]);var C,K;m=[];k=[];C=0;for(K=s.length;C<K;C++)s[C][1]||(m.push(s[C]),u.push(C));C=0;for(K=q.length;C<K;C++)q[C][1]||(k.push(q[C]),A.push(C));var T=[];for(s=0;s<k.length;s++){q={key:k[s][4],filterIndex:k[s][0],filterKey:k[s][3]};
C=[];for(K=0;K<m.length;K++)C.push({label:m[K][4],filterIndex:m[K][0],filterKey:m[K][3],value:a(K,s)});q.values=C;T.push(q)}a=Math.max(m.length*Math.max(16*(k.length+1),50)+70,360);I(e).css({height:a+"px"});t?I(e).siblings(".pt-chart-title").html("<h4>"+t+"</h4>"):I(e).siblings(".pt-chart-title").empty();var Q=function(a,b,e,h){b=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},h.seriesIndex)+'">'+a+'</div><div class="pt-tooltip-text">'+
b.label+': <span class="pt-tooltip-value">'+b.value+"</span></div></div>"},B=this,R=this.options.numberFormatter,O=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).tooltips(!0).tooltipContent(Q).transitionDuration(350).showControls(!0);a.valueFormat(R);a.yAxis.tickFormat(R);a.xAxis.tickFormat(function(a){return O(a,24)});d3.select(I(e).get(0)).append("svg").attr("class",
"nv").datum(T).call(a);if(B.options.exploreChart&&z&&D)a.multibar.dispatch.on("elementClick",function(a){var b=a.series.filterKey,e;null===b&&(b="None");e="__other__"==a.series.filterIndex?D+"__belongs":D;var h=a.point.filterKey;null===h&&(h="None");B._chartExplore([["__other__"==a.point.filterIndex?z+"__belongs":z,h],[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(a,k,t){var m=this.chart;if(m){var e=this,h=a.cells,s=a.labels,q,G,A,z,D,C;"rows"==k?(q=a.rows,G=a.cols,
k=s.rows,A=s.cols,z=t[0],D=t[1],C=function(a,b){return h[a][b]}):(q=a.cols,G=a.rows,k=s.cols,A=s.rows,z=t[1],D=t[0],C=function(a,b){return h[b][a]});var K=function(a,b){return null===a?G[b]:null===b?q[a]:C(a,b)},T=function(a,b){b===u&&(b="silver");for(var e=[],h,k,m=0;m<G.length;m++)h=K(null,m),k=null===a?h[2]:K(a,m).value,!h[1]&&0<=h[2]&&e.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:k,color:b});return e},Q=[],B=0;for(t=0;t<q.length;t++){var R=K(t,null);!R[1]&&0<=R[2]&&(Q.push({position:t,
filterIndex:R[0],filterKey:R[3],label:R[4],value:R[2]}),B+=R[2])}e.chartOptions.currentDataIndex=null;I(m).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();I(m).siblings(".pt-chart-title").empty();t=I('<div class="pt-spectrum-pie">').appendTo(m);var m=I('<div class="pt-spectrum-bar">').appendTo(m),O=this.options.numberFormatter,M=this._truncateLabel,H=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!0).tooltipContent(function(a,
b,e,h){a=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+O(a.value)+"</div></div>"}).showValues(!0);H.valueFormat(O);H.yAxis.tickFormat(O);H.xAxis.tickFormat(function(a){return M(a,18)});var P=d3.select(I(m).get(0)).append("svg").attr("class","nv"),m=Math.floor(t.width()/2)-30,y=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(m).margin({top:-20,
left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35).tooltips(!1);y.legend.align(!0).rightAlign(!1);y.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});y.pie.dispatch.on("elementMouseover",function(a){if(e.chartOptions.currentDataIndex!=a.pointIndex){e._removeChartTooltip();e.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,h=Math.round(b/B*100),k='<div class="pt-tooltip-label">'+a.label+
"</div>";e._renderChartTooltip(a.pos[0],a.pos[1],k+('<div class="pt-tooltip-text">'+b+" ("+h+"%)</div>"));I(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}}).on("elementMouseout",function(a){I(".pt-tooltip").remove();e.chartOptions.currentDataIndex=null;e.chartOptions.currentSeriesIndex=null});var F=d3.select(I(t).get(0)).append("svg").attr("class","nv").style({"min-width":m-30+"px"}),m=d3.select(I(t).get(0)).append("div").attr("class","pt-spectrum-form");m.append("h4").html(s.layer+
" "+s.per+" "+A);m.append("label").html(k+":");var L=m.append("select");L.append("option").attr("value","null").style("font-weight","bold").html(e.options.textAll);L.selectAll(".pt-series-item").data(Q).enter().append("option").attr("class","pt-series-item").attr("value",function(a,b){return b}).html(function(a){return a.label});m.append("label").html(s.total+":");var E=m.append("span").text(a.total),W=function(h){var k;if(null===h||e.chartOptions.currentSpectrumIndex==h)k=function(a,b){return nv.utils.defaultColor()({},
b)},F.selectAll(".nv-slice").style("fill",k).style("stroke",k),k=T(null),P.datum([{key:null,filterIndex:null,filterKey:null,values:k}]),H.update(),e.chartOptions.currentSpectrumIndex=null,L.property("value","null"),E.text(a.total);else{var m=Q[h],q=nv.utils.defaultColor()({},h);k=function(a,b){return b==h?q:"silver"};F.selectAll(".nv-slice").style("fill",k).style("stroke",k);k=T(m.position,q);P.datum([{key:m.position,filterIndex:m.filterIndex,filterKey:m.filterKey,values:k}]);H.update();e.chartOptions.currentSpectrumIndex=
h;L.property("value",h);E.text(Q[h].value)}};y.pie.dispatch.on("elementClick",function(a){W(a.index)});L.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?W(null):W(a)});nv.addGraph(function(){F.datum(Q).transition().duration(1200).call(y);nv.utils.windowResize(y.update);return y});nv.addGraph(function(){P.datum([{key:null,filterIndex:null,filterKey:null,values:T(null)}]).transition().duration(500).call(H);if(e.options.exploreChart&&z&&D)H.discretebar.dispatch.on("elementClick",
function(a){var b=a.series.filterIndex,h=a.series.filterKey,k=a.point.filterIndex;a=a.point.filterKey;var m=[];null!==b&&m.push(["__other__"==b?z+"__belongs":z,h]);null!==k&&m.push(["__other__"==k?D+"__belongs":D,a]);e._chartExplore(m)});nv.utils.windowResize(H.update);return H})}},_chartExplore:function(a){var k=this.options,t=I(this.element).closest(".ui-tabs"),m=k.filterTab;if(t.length&&!1!==m)k=(k=k.filterForm)?I("#"+k):u,S3.search.setCurrentFilters(k,a),a=m?I("#"+m).index():0,t.tabs("option",
"active",a);else if(t=k.filterURL)a=this._updateURL(t,a),window.open(a,"_blank")},_renderChartTooltip:function(a,k,t){I('<div class="pt-tooltip">'+t+"</div>").css({position:"absolute",display:"none",top:k-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){I(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=
null},_getOptions:function(){var a="#"+I(this.element).attr("id");return{rows:I(a+"-rows").val(),cols:I(a+"-cols").val(),fact:I(a+"-fact").val(),totals:I(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+I(this.element).attr("id"),k=null,a=I(a+"-filters");if(a.length)try{k=S3.search.getCurrentFilters(a.first())}catch(t){}return k},_updateURL:function(a,k){var t,m,e=[],h={};t={};var s,q,u,A;if(k)for(s=0,q=k.length;s<q;s++)t=k[s],A=t[0],h[A]=!0,e.push(A+"="+t[1]);t=this.options.ajaxURL.split("?");
if(1<t.length){m=t[1].split("&");t={};s=0;for(q=m.length;s<q;s++)u=m[s].split("="),1<u.length&&(A=decodeURIComponent(u[0]),h[A]||(e.push(A+"="+decodeURIComponent(u[1])),t[A]=!0));for(A in t)h[A]=!0}t=a.split("?");if(1<t.length)for(m=t[1].split("&"),s=0,q=m.length;s<q;s++)u=m[s].split("="),1<u.length&&(A=decodeURIComponent(u[0]),h[A]||e.push(A+"="+decodeURIComponent(u[1])));e=e.join("&");h=t[0];e&&(h=h+"?"+e);return h},_updateAjaxURL:function(a,k){var t=this.options.ajaxURL.split("?"),m=[],e=!1,h;
1<t.length?(h=t[1],h=h.split("&")):h=[];var s,q,u;if(a)for(s in a)u=a[s],q=s+"="+u,"totals"==s?this.options.showTotals=u?!0:!1:e||-1!=I.inArray(q,h)||(e=!0),m.push(q);s={};u={};var A,z,D;if(k)for(A=0,z=k.length;A<z;A++)q=k[A],D=q[0],q=q[1],null===q?s[D]||(u[D]=!0):(u[D]&&(u[D]=!1),s[D]?s[D].push(D+"="+q):s[D]=[D+"="+q]);A=0;for(z=h.length;A<z;A++)q=h[A].split("="),1<q.length&&(D=decodeURIComponent(q[0]),q=decodeURIComponent(q[1]),u[D]?e=!0:s[D]?e||-1!=I.inArray(D+"="+q,s[D])||(e=!0):"aggregate"!=
D&&(a&&a.hasOwnProperty(D)||m.push(h[A])));for(D in s)for(A=0,z=s[D].length;A<z;A++)e||-1!=I.inArray(s[D][A],h)||(e=!0),m.push(s[D][A]);m=m.join("&");t=t[0];m&&(t=t+"?"+m);this.options.ajaxURL=t;return e},reload:function(a,k,t){t="undefined"!=typeof t?t:!0;"undefined"==typeof k&&(k=this._getFilters());var m=this,e=this.element,h,s=e.find('input[type="hidden"][name="pivotdata"]');if(s.length){e.find(".pt-throbber").show();if(a||k)h=this._updateAjaxURL(a,k);h||t?(a=this.options.ajaxURL,e.find(".pt-empty").hide(),
I.ajax({url:a,dataType:"json"}).done(function(a){s.first().val(JSON.stringify(a));m.refresh()}).fail(function(a,b,e){msg="UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText;console.log(msg)})):m.refresh()}},_bindEvents:function(){var a=this,k=I(this.element),t=this.data,m="#"+k.attr("id");I(m+"-options legend").click(function(){I(this).siblings().toggle();I(this).children().toggle()});I(m+"-filters legend").click(function(){I(this).siblings().toggle();I(this).children().toggle()});k.find(".pt-hide-table").click(function(){a.table_options.hidden=
!0;k.find(".pt-table").hide();I(this).siblings(".pt-show-table").show();I(this).hide()});k.find(".pt-show-table").click(function(){a.table_options.hidden=!1;k.find(".pt-table").show();I(this).siblings(".pt-hide-table").show();I(this).hide()});I(m+"-totals").click(function(){var e=I(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});I(m+"-rows,"+m+"-cols,"+m+"-fact").on("change.autosubmit",function(){I(m+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var e=
this.options.autoSubmit;I(m+"-pt-form").on("optionChanged",function(){var h=I(this);if(!h.data("noAutoSubmit")){var k=h.data("autoSubmitTimeout");k&&clearTimeout(k);k=setTimeout(function(){var e=a._getOptions(),h=a._getFilters();a.reload(e,h,!1)},e);h.data("autoSubmitTimeout",k)}})}else I(m+"-pt-form input.pt-submit").click(function(){var e=a._getOptions(),k=a._getFilters();a.reload(e,k,!1)});I(m+" div.pt-table div.pt-cell-zoom").click(function(a){a=I(a.currentTarget);var b=a.closest("td"),e=b.find(".pt-cell-records");
if(0<e.length)e.remove(),a.removeClass("opened");else{for(var k=b.data("records"),e=I("<div/>").addClass("pt-cell-records"),m=I("<ul/>"),u=0;u<k.length;u++)m.append("<li>"+t.lookup[k[u]]+"</li>");e.append(m);b.append(e);a.addClass("opened")}});I(m+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});I(m+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});I(m+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});I(m+
"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});I(m+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});I(m+"-vchart-cols").click(function(){a._renderChart({type:"barchart",axis:"cols"})});I(m+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});I(m+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});k.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=
I(this.element),k="#"+a.attr("id");I(k+" div.pt-table div.pt-cell-zoom").unbind("click");I(k+"-options legend").unbind("click");I(k+"-filters legend").unbind("click");I(k+"-totals").unbind("click");I(k+"-rows,"+k+"-cols,"+k+"-fact").unbind("change.autosubmit");I(k+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");I(k+"-pchart-rows,"+k+"-vchart-rows,"+k+"-schart-rows,"+k+"-hchart-rows,"+k+"-pchart-cols,"+k+"-vchart-cols,"+k+"-schart-cols,"+k+"-hchart-cols").unbind("click");
a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
