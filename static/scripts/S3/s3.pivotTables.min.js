/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+

*/
!function(){function J(c,u){return c<u?-1:c>u?1:c>=u?0:NaN}function v(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(u,a,l,h){3>arguments.length&&(l=0);4>arguments.length&&(h=u.length);for(;l<h;){var n=l+h>>>1;0>c(u[n],a)?l=n+1:h=n}return l},right:function(u,a,l,h){3>arguments.length&&(l=0);4>arguments.length&&(h=u.length);for(;l<h;){var n=l+h>>>1;0<c(u[n],a)?h=n:l=n+1}return l}}}function b(c){return c.length}function k(c,u){try{for(var a in u)Object.defineProperty(c.prototype,a,
{value:u[a],enumerable:!1})}catch(l){c.prototype=u}}function t(){}function p(c){return eb+c in this}function f(){var c=[];this.forEach(function(u){c.push(u)});return c}function g(){var c=0,u;for(u in this)u.charCodeAt(0)===Rb&&++c;return c}function r(){for(var c in this)if(c.charCodeAt(0)===Rb)return!1;return!0}function q(){}function I(c,u,a){return function(){var l=a.apply(u,arguments);return l===u?c:l}}function B(c,u){if(u in c)return u;u=u.charAt(0).toUpperCase()+u.substring(1);for(var a=0,l=Rd.length;a<
l;++a){var h=Rd[a]+u;if(h in c)return h}}function A(){}function E(){}function D(c){function u(){for(var u=a,l=-1,ga=u.length,x;++l<ga;)(x=u[l].on)&&x.apply(this,arguments);return c}var a=[],l=new t;u.on=function(u,n){var ga=l.get(u),x;if(2>arguments.length)return ga&&ga.on;ga&&(ga.on=null,a=a.slice(0,x=a.indexOf(ga)).concat(a.slice(x+1)),l.remove(u));n&&a.push(l.set(u,{on:n}));return c};return u}function L(){w.event.preventDefault()}function S(){for(var c=w.event,u;u=c.sourceEvent;)c=u;return c}function C(c){for(var u=
new E,a=0,l=arguments.length;++a<l;)u[arguments[a]]=D(u);u.of=function(a,e){return function(l){try{var x=l.sourceEvent=w.event;l.target=c;w.event=l;u[l.type].apply(a,e)}finally{w.event=x}}};return u}function P(c){Sb(c,pa);return c}function N(c){return"function"===typeof c?c:function(){return Lc(c,this)}}function G(c){return"function"===typeof c?c:function(){return Mc(c,this)}}function T(c,u){function a(){this.removeAttribute(c)}function l(){this.removeAttributeNS(c.space,c.local)}function h(){this.setAttribute(c,
u)}function n(){this.setAttributeNS(c.space,c.local,u)}function ga(){var a=u.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function x(){var a=u.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=w.ns.qualify(c);return null==u?c.local?l:a:"function"===typeof u?c.local?x:ga:c.local?n:h}function M(c){return new RegExp("(?:^|\\s+)"+w.requote(c)+"(?:\\s+|$)","g")}function R(c,u){function a(){for(var e=-1;++e<h;)c[e](this,
u)}function l(){for(var a=-1,e=u.apply(this,arguments);++a<h;)c[a](this,e)}c=(c+"").trim().split(/^|\s+/).map(y);var h=c.length;return"function"===typeof u?l:a}function y(c){var u=M(c);return function(a,l){if(h=a.classList)return l?h.add(c):h.remove(c);var h=a.getAttribute("class")||"";l?(u.lastIndex=0,u.test(h)||a.setAttribute("class",(h+" "+c).trim().replace(/\s+/g," "))):a.setAttribute("class",h.replace(u," ").trim().replace(/\s+/g," "))}}function F(c,u,a){function l(){this.style.removeProperty(c)}
function h(){this.style.setProperty(c,u,a)}function n(){var l=u.apply(this,arguments);null==l?this.style.removeProperty(c):this.style.setProperty(c,l,a)}return null==u?l:"function"===typeof u?n:h}function K(c,u){function a(){delete this[c]}function l(){this[c]=u}function h(){var a=u.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==u?a:"function"===typeof u?h:l}function z(c){return"function"===typeof c?c:(c=w.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function V(c){return function(){return Sd(this,c)}}function O(c){arguments.length||(c=J);return function(u,a){return u&&a?c(u.__data__,a.__data__):!u-!a}}function U(c,u){for(var a=0,l=c.length;a<l;a++)for(var h=c[a],n=0,ga=h.length,x;n<ga;n++)(x=h[n])&&u(x,n,a);return c}function H(c){Sb(c,Oa);return c}function ba(c){var u,a;return function(l,h,n){l=c[n].update;var ga=l.length;n!=a&&(a=n,u=0);for(h>=u&&(u=h+1);!(h=
l[u])&&++u<ga;);return h}}function W(){var c=this.__transition__;c&&++c.active}function m(c,u,a){function l(){var u=this[ga];u&&(this.removeEventListener(c,u,u.$),delete this[ga])}function h(){var h=X(u,Xa(arguments));l.call(this);this.addEventListener(c,this[ga]=h,h.$=a);h._=u}function n(){var u=new RegExp("^__on([^.]+)"+w.requote(c)+"$"),a,e;for(e in this)if(a=e.match(u)){var l=this[e];this.removeEventListener(a[1],l,l.$);delete this[e]}}var ga="__on"+c,x=c.indexOf("."),X=Q;0<x&&(c=c.substring(0,
x));var b=Nc.get(c);b&&(c=b,X=da);return x?u?h:l:u?A:n}function Q(c,u){return function(a){var l=w.event;w.event=a;u[0]=this.__data__;try{c.apply(this,u)}finally{w.event=l}}}function da(c,u){var a=Q(c,u);return function(c){var u=c.relatedTarget;u&&(u===this||u.compareDocumentPosition(this)&8)||a.call(this,c)}}function qa(){var c=".dragsuppress-"+ ++kg,u="click"+c,a=w.select(za).on("touchmove"+c,L).on("dragstart"+c,L).on("selectstart"+c,L);if(Db){var l=Ra.style,h=l[Db];l[Db]="none"}return function(n){a.on(c,
null);Db&&(l[Db]=h);if(n){var ga=function(){a.on(u,null)};a.on(u,function(){L();ga()},!0);setTimeout(ga,0)}}}function ia(c,u){u.changedTouches&&(u=u.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var l=a.createSVGPoint();if(0>Oc&&(za.scrollX||za.scrollY)){var a=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),h=a[0][0].getScreenCTM();Oc=!(h.f||h.e);a.remove()}Oc?(l.x=u.pageX,l.y=u.pageY):(l.x=u.clientX,l.y=u.clientY);
l=l.matrixTransform(c.getScreenCTM().inverse());return[l.x,l.y]}a=c.getBoundingClientRect();return[u.clientX-a.left-c.clientLeft,u.clientY-a.top-c.clientTop]}function Y(){return w.event.changedTouches[0].identifier}function fa(){return w.event.target}function ja(){return za}function ca(c,u,a){return(u[0]-c[0])*(a[1]-c[1])-(u[1]-c[1])*(a[0]-c[0])}function aa(c){return 1<c?0:-1>c?la:Math.acos(c)}function na(c){return 1<c?xa:-1>c?-xa:Math.asin(c)}function ha(c){return((c=Math.exp(c))+1/c)/2}function oa(c){return(c=
Math.sin(c/2))*c}function ra(){}function Aa(c,u,a){return this instanceof Aa?void(this.h=+c,this.s=+u,this.l=+a):2>arguments.length?c instanceof Aa?new Aa(c.h,c.s,c.l):Ud(""+c,Vd,Aa):new Aa(c,u,a)}function qb(c,u,a){function l(c){360<c?c-=360:0>c&&(c+=360);return 60>c?h+(n-h)*c/60:180>c?n:240>c?h+(n-h)*(240-c)/60:h}var h,n;c=isNaN(c)?0:0>(c%=360)?c+360:c;u=isNaN(u)?0:0>u?0:1<u?1:u;a=0>a?0:1<a?1:a;n=.5>=a?a*(1+u):a+u-a*u;h=2*a-n;return new Ba(Math.round(255*l(c+120)),Math.round(255*l(c)),Math.round(255*
l(c-120)))}function Ha(c,u,a){return this instanceof Ha?void(this.h=+c,this.c=+u,this.l=+a):2>arguments.length?c instanceof Ha?new Ha(c.h,c.c,c.l):c instanceof Ia?Wd(c.l,c.a,c.b):Wd((c=Xd((c=w.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ha(c,u,a)}function Pc(c,u,a){isNaN(c)&&(c=0);isNaN(u)&&(u=0);return new Ia(a,Math.cos(c*=ka)*u,Math.sin(c)*u)}function Ia(c,u,a){return this instanceof Ia?void(this.l=+c,this.a=+u,this.b=+a):2>arguments.length?c instanceof Ia?new Ia(c.l,c.a,c.b):c instanceof Ha?Pc(c.l,c.c,
c.h):Xd((c=Ba(c)).r,c.g,c.b):new Ia(c,u,a)}function Yd(c,u,a){c=(c+16)/116;a=c-a/200;u=Qc(c+u/500)*Zd;c=Qc(c)*$d;a=Qc(a)*ae;return new Ba(Rc(3.2404542*u-1.5371385*c-.4985314*a),Rc(-.969266*u+1.8760108*c+.041556*a),Rc(.0556434*u-.2040259*c+1.0572252*a))}function Wd(c,u,a){return 0<c?new Ha(Math.atan2(a,u)*ta,Math.sqrt(u*u+a*a),c):new Ha(NaN,NaN,c)}function Qc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Sc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Rc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Ba(c,u,a){return this instanceof Ba?void(this.r=~~c,this.g=~~u,this.b=~~a):2>arguments.length?c instanceof Ba?new Ba(c.r,c.g,c.b):Ud(""+c,Ba,qb):new Ba(c,u,a)}function Tb(c){return new Ba(c>>16,c>>8&255,c&255)+""}function rb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Ud(c,u,a){var l=0,h=0,n=0,ga,x;if(ga=/([a-z]+)\((.*)\)/i.exec(c))switch(x=ga[2].split(","),ga[1]){case "hsl":return a(parseFloat(x[0]),
parseFloat(x[1])/100,parseFloat(x[2])/100);case "rgb":return u(Tc(x[0]),Tc(x[1]),Tc(x[2]))}if(a=Ub.get(c))return u(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(l=(a&3840)>>4,l|=l>>4,h=a&240,h|=h>>4,n=a&15,n|=n<<4):7===c.length&&(l=(a&16711680)>>16,h=(a&65280)>>8,n=a&255));return u(l,h,n)}function Vd(c,u,a){var l=Math.min(c/=255,u/=255,a/=255),h=Math.max(c,u,a),n=h-l,ga=(h+l)/2;n?(l=.5>ga?n/(h+l):n/(2-h-l),c=60*(c==h?(u-a)/n+(u<a?6:0):u==h?(a-c)/n+2:
(c-u)/n+4)):(c=NaN,l=0<ga&&1>ga?0:c);return new Aa(c,l,ga)}function Xd(c,u,a){c=Uc(c);u=Uc(u);a=Uc(a);var l=Sc((.4124564*c+.3575761*u+.1804375*a)/Zd),h=Sc((.2126729*c+.7151522*u+.072175*a)/$d);c=Sc((.0193339*c+.119192*u+.9503041*a)/ae);return Ia(116*h-16,500*(l-h),200*(h-c))}function Uc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Tc(c){var u=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*u):u}function sa(c){return"function"===typeof c?c:function(){return c}}
function wa(c){return c}function Vc(c){return function(u,a,l){2===arguments.length&&"function"===typeof a&&(l=a,a=null);return Vb(u,a,c,l)}}function Vb(c,u,a,l){function h(){var c=X.status,u;if(!c&&X.responseText||200<=c&&300>c||304===c){try{u=a.call(n,X)}catch(l){ga.error.call(n,l);return}ga.load.call(n,u)}else ga.error.call(n,X)}var n={},ga=w.dispatch("beforesend","progress","load","error"),x={},X=new XMLHttpRequest,b=null;!za.XDomainRequest||"withCredentials"in X||!/^(http(s)?:)?\/\//.test(c)||
(X=new XDomainRequest);"onload"in X?X.onload=X.onerror=h:X.onreadystatechange=function(){3<X.readyState&&h()};X.onprogress=function(c){var u=w.event;w.event=c;try{ga.progress.call(n,X)}finally{w.event=u}};n.header=function(c,u){c=(c+"").toLowerCase();if(2>arguments.length)return x[c];null==u?delete x[c]:x[c]=u+"";return n};n.mimeType=function(c){if(!arguments.length)return u;u=null==c?null:c+"";return n};n.responseType=function(c){if(!arguments.length)return b;b=c;return n};n.response=function(c){a=
c;return n};["get","post"].forEach(function(c){n[c]=function(){return n.send.apply(n,[c].concat(Xa(arguments)))}});n.send=function(a,e,l){2===arguments.length&&"function"===typeof e&&(l=e,e=null);X.open(a,c,!0);null==u||"accept"in x||(x.accept=u+",*/*");if(X.setRequestHeader)for(var h in x)X.setRequestHeader(h,x[h]);null!=u&&X.overrideMimeType&&X.overrideMimeType(u);null!=b&&(X.responseType=b);if(null!=l)n.on("error",l).on("load",function(c){l(null,c)});ga.beforesend.call(n,X);X.send(null==e?null:
e);return n};n.abort=function(){X.abort();return n};w.rebind(n,ga,"on");return null==l?n:n.get(lg(l))}function lg(c){return 1===c.length?function(u,a){c(null==u?a:null)}:c}function Wc(){var c=be(),c=ce()-c;24<c?(isFinite(c)&&(clearTimeout(Wb),Wb=setTimeout(Wc,c)),Xb=0):(Xb=1,de(Wc))}function be(){var c=Date.now();for(Sa=Yb;Sa;)c>=Sa.t&&(Sa.f=Sa.c(c-Sa.t)),Sa=Sa.n;return c}function ce(){for(var c,u=Yb,a=Infinity;u;)u.f?u=c?c.n=u.n:Yb=u.n:(u.t<a&&(a=u.t),u=(c=u).n);Zb=c;return a}function Xc(c,a){return a-
(c?Math.ceil(Math.log(c)/Math.LN10):1)}function mg(c){var a=c.decimal,e=c.thousands,l=c.grouping,h=c.currency,n=l?function(c){for(var a=c.length,u=[],h=0,n=l[0];0<a&&0<n;)u.push(c.substring(a-=n,a+n)),n=l[h=(h+1)%l.length];return u.reverse().join(e)}:wa;return function(c){c=ee.exec(c);var e=c[1]||" ",l=c[2]||">",b=c[3]||"",m=c[4]||"",f=c[5],g=+c[6],k=c[7],p=c[8],q=c[9],t=1,r="",z="",y=!1;p&&(p=+p.substring(1));if(f||"0"===e&&"="===l)f=e="0",l="=",k&&(g-=Math.floor((g-1)/4));switch(q){case "n":k=!0;
q="g";break;case "%":t=100;z="%";q="f";break;case "p":t=100;z="%";q="r";break;case "b":case "o":case "x":case "X":"#"===m&&(r="0"+q.toLowerCase());case "c":case "d":y=!0;p=0;break;case "s":t=-1,q="r"}"$"===m&&(r=h[0],z=h[1]);"r"!=q||p||(q="g");if(null!=p)if("g"==q)p=Math.max(1,Math.min(21,p));else if("e"==q||"f"==q)p=Math.max(0,Math.min(20,p));var q=ng.get(q)||og,Q=f&&k;return function(c){var h=z;if(y&&c%1)return"";var ga=0>c||0===c&&0>1/c?(c=-c,"-"):b;0>t?(h=w.formatPrefix(c,p),c=h.scale(c),h=h.symbol+
z):c*=t;c=q(c,p);var m=c.lastIndexOf("."),Pa=0>m?c:c.substring(0,m);c=0>m?"":a+c.substring(m+1);!f&&k&&(Pa=n(Pa));var m=r.length+Pa.length+c.length+(Q?0:ga.length),C=m<g?Array(m=g-m+1).join(e):"";Q&&(Pa=n(C+Pa));ga+=r;c=Pa+c;return("<"===l?ga+c+C:">"===l?C+ga+c:"^"===l?C.substring(0,m>>=1)+ga+c+C.substring(m):ga+(Q?c:C+c))+h}}}function og(c){return c+""}function Ta(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(c,a,e){function l(a){var u=c(a),e=n(u,1);
return a-u<e-a?u:e}function h(e){a(e=c(new ya(e-1)),1);return e}function n(c,e){a(c=new ya(+c),e);return c}function b(c,l,n){c=h(c);var x=[];if(1<n)for(;c<l;)e(c)%n||x.push(new Date(+c)),a(c,1);else for(;c<l;)x.push(new Date(+c)),a(c,1);return x}c.floor=c;c.round=l;c.ceil=h;c.offset=n;c.range=b;var x=c.utc=$b(c);x.floor=x;x.round=$b(l);x.ceil=$b(h);x.offset=$b(n);x.range=function(c,a,u){try{ya=Ta;var e=new Ta;e._=c;return b(e,a,u)}finally{ya=Date}};return c}function $b(c){return function(a,e){try{ya=
Ta;var l=new Ta;l._=a;return c(l,e)._}finally{ya=Date}}}function pg(c){function a(c){function u(a){for(var e=[],h=-1,n=0,x,b;++h<l;)if(37===c.charCodeAt(h)){e.push(c.substring(n,h));null!=(x=fe[n=c.charAt(++h)])&&(n=c.charAt(++h));if(b=y[n])n=b(a,null==x?"e"===n?" ":"0":x);e.push(n);n=h+1}e.push(c.substring(n,h));return e.join("")}var l=c.length;u.parse=function(a){var u={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(u,c,a,0)!=a.length)return null;"p"in u&&(u.H=u.H%12+12*u.p);a=null!=u.Z&&ya!==Ta;var l=
new (a?Ta:ya);"j"in u?l.setFullYear(u.y,0,u.j):"w"in u&&("W"in u||"U"in u)?(l.setFullYear(u.y,0,1),l.setFullYear(u.y,0,"W"in u?(u.w+6)%7+7*u.W-(l.getDay()+5)%7:u.w+7*u.U-(l.getDay()+6)%7)):l.setFullYear(u.y,u.m,u.d);l.setHours(u.H+Math.floor(u.Z/100),u.M+u.Z%100,u.S,u.L);return a?l._:l};u.toString=function(){return c};return u}function e(c,a,u,e){for(var l,h=0,n=a.length,x=u.length;h<n;){if(e>=x)return-1;l=a.charCodeAt(h++);if(37===l){if(l=a.charAt(h++),l=Q[l in fe?a.charAt(h++):l],!l||0>(e=l(c,u,
e)))return-1}else if(l!=u.charCodeAt(e++))return-1}return e}var l=c.dateTime,h=c.date,n=c.time,b=c.periods,x=c.days,X=c.shortDays,ea=c.months,m=c.shortMonths;a.utc=function(c){function e(c){try{ya=Ta;var a=new ya;a._=c;return l(a)}finally{ya=Date}}var l=a(c);e.parse=function(c){try{ya=Ta;var a=l.parse(c);return a&&a._}finally{ya=Date}};e.toString=l.toString;return e};a.multi=a.utc.multi=qg;var f=w.map(),g=ac(x),k=bc(x),p=ac(X),q=bc(X),t=ac(ea),r=bc(ea),z=ac(m),C=bc(m);b.forEach(function(c,a){f.set(c.toLowerCase(),
a)});var y={a:function(c){return X[c.getDay()]},A:function(c){return x[c.getDay()]},b:function(c){return m[c.getMonth()]},B:function(c){return ea[c.getMonth()]},c:a(l),d:function(c,a){return Ca(c.getDate(),a,2)},e:function(c,a){return Ca(c.getDate(),a,2)},H:function(c,a){return Ca(c.getHours(),a,2)},I:function(c,a){return Ca(c.getHours()%12||12,a,2)},j:function(c,a){return Ca(1+Z.dayOfYear(c),a,3)},L:function(c,a){return Ca(c.getMilliseconds(),a,3)},m:function(c,a){return Ca(c.getMonth()+1,a,2)},
M:function(c,a){return Ca(c.getMinutes(),a,2)},p:function(c){return b[+(12<=c.getHours())]},S:function(c,a){return Ca(c.getSeconds(),a,2)},U:function(c,a){return Ca(Z.sundayOfYear(c),a,2)},w:function(c){return c.getDay()},W:function(c,a){return Ca(Z.mondayOfYear(c),a,2)},x:a(h),X:a(n),y:function(c,a){return Ca(c.getFullYear()%100,a,2)},Y:function(c,a){return Ca(c.getFullYear()%1E4,a,4)},Z:rg,"%":function(){return"%"}},Q={a:function(c,a,u){p.lastIndex=0;return(a=p.exec(a.substring(u)))?(c.w=q.get(a[0].toLowerCase()),
u+a[0].length):-1},A:function(c,a,u){g.lastIndex=0;return(a=g.exec(a.substring(u)))?(c.w=k.get(a[0].toLowerCase()),u+a[0].length):-1},b:function(c,a,u){z.lastIndex=0;return(a=z.exec(a.substring(u)))?(c.m=C.get(a[0].toLowerCase()),u+a[0].length):-1},B:function(c,a,u){t.lastIndex=0;return(a=t.exec(a.substring(u)))?(c.m=r.get(a[0].toLowerCase()),u+a[0].length):-1},c:function(c,a,u){return e(c,y.c.toString(),a,u)},d:ge,e:ge,H:he,I:he,j:sg,L:tg,m:ug,M:vg,p:function(c,a,u){a=f.get(a.substring(u,u+=2).toLowerCase());
return null==a?-1:(c.p=a,u)},S:wg,U:xg,w:yg,W:zg,x:function(c,a,u){return e(c,y.x.toString(),a,u)},X:function(c,a,u){return e(c,y.X.toString(),a,u)},y:Ag,Y:Bg,Z:Cg,"%":Dg};return a}function Ca(c,a,e){var l=0>c?"-":"";c=(l?-c:c)+"";var h=c.length;return l+(h<e?Array(e-h+1).join(a)+c:c)}function ac(c){return new RegExp("^(?:"+c.map(w.requote).join("|")+")","i")}function bc(c){for(var a=new t,e=-1,l=c.length;++e<l;)a.set(c[e].toLowerCase(),e);return a}function yg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,
e+1)))?(c.w=+a[0],e+a[0].length):-1}function xg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e)))?(c.U=+a[0],e+a[0].length):-1}function zg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e)))?(c.W=+a[0],e+a[0].length):-1}function Bg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+4)))?(c.y=+a[0],e+a[0].length):-1}function Ag(c,a,e){ua.lastIndex=0;if(a=ua.exec(a.substring(e,e+2))){var l=+a[0];c=(c.y=l+(68<l?1900:2E3),e+a[0].length)}else c=-1;return c}function Cg(c,a,e){return/^[+-]\d{4}$/.test(a=
a.substring(e,e+5))?(c.Z=-a,e+5):-1}function ug(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+2)))?(c.m=a[0]-1,e+a[0].length):-1}function ge(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+2)))?(c.d=+a[0],e+a[0].length):-1}function sg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+3)))?(c.j=+a[0],e+a[0].length):-1}function he(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+2)))?(c.H=+a[0],e+a[0].length):-1}function vg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,
e+2)))?(c.M=+a[0],e+a[0].length):-1}function wg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+2)))?(c.S=+a[0],e+a[0].length):-1}function tg(c,a,e){ua.lastIndex=0;return(a=ua.exec(a.substring(e,e+3)))?(c.L=+a[0],e+a[0].length):-1}function rg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var e=~~(ma(a)/60),a=ma(a)%60;return c+Ca(e,"0",2)+Ca(a,"0",2)}function Dg(c,a,e){ie.lastIndex=0;return(c=ie.exec(a.substring(e,e+1)))?e+c[0].length:-1}function qg(c){for(var a=c.length,e=-1;++e<a;)c[e][0]=
this(c[e][0]);return function(a){for(var u=0,e=c[u];!e[1](a);)e=c[++u];return e[0](a)}}function Yc(){}function je(c,a,e){var l=e.s=c+a,h=l-c;e.t=c-(l-h)+(a-h)}function cc(c,a){if(c&&ke.hasOwnProperty(c.type))ke[c.type](c,a)}function Zc(c,a,e){var l=-1;e=c.length-e;var h;for(a.lineStart();++l<e;)h=c[l],a.point(h[0],h[1],h[2]);a.lineEnd()}function le(c,a){var e=-1,l=c.length;for(a.polygonStart();++e<l;)Zc(c[e],a,1);a.polygonEnd()}function Eg(){function c(c,a){c*=ka;a=a*ka/2+la/4;var u=c-l,e=0<=u?1:
-1,u=e*u,b=Math.cos(a),m=Math.sin(a),f=n*m;gb.add(Math.atan2(f*e*Math.sin(u),h*b+f*Math.cos(u)));l=c;h=b;n=m}var a,e,l,h,n;Da.point=function(b,x){Da.point=c;l=(a=b)*ka;h=Math.cos(x=(e=x)*ka/2+la/4);n=Math.sin(x)};Da.lineEnd=function(){c(a,e)}}function hb(c){var a=c[0];c=c[1];var e=Math.cos(c);return[e*Math.cos(a),e*Math.sin(a),Math.sin(c)]}function dc(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function sb(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function $c(c,a){c[0]+=
a[0];c[1]+=a[1];c[2]+=a[2]}function ec(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function fc(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function gc(c){return[Math.atan2(c[1],c[0]),na(c[2])]}function hc(c,a){return 1E-6>ma(c[0]-a[0])&&1E-6>ma(c[1]-a[1])}function ad(c,a){c*=ka;var e=Math.cos(a*=ka);Eb(e*Math.cos(c),e*Math.sin(c),Math.sin(a))}function Eb(c,a,e){++Fb;ib+=(c-ib)/Fb;jb+=(a-jb)/Fb;Ua+=(e-Ua)/Fb}function me(){function c(c,n){c*=ka;var b=Math.cos(n*=ka),x=b*Math.cos(c),
b=b*Math.sin(c),X=Math.sin(n),ea=Math.atan2(Math.sqrt((ea=e*X-l*b)*ea+(ea=l*x-a*X)*ea+(ea=a*b-e*x)*ea),a*x+e*b+l*X);ic+=ea;Ya+=ea*(a+(a=x));Za+=ea*(e+(e=b));Ma+=ea*(l+(l=X));Eb(a,e,l)}var a,e,l;Ja.point=function(h,n){h*=ka;var b=Math.cos(n*=ka);a=b*Math.cos(h);e=b*Math.sin(h);l=Math.sin(n);Ja.point=c;Eb(a,e,l)}}function ne(){Ja.point=ad}function Fg(){function c(c,a){c*=ka;var u=Math.cos(a*=ka),e=u*Math.cos(c),u=u*Math.sin(c),b=Math.sin(a),m=h*b-n*u,f=n*e-l*b,g=l*u-h*e,k=Math.sqrt(m*m+f*f+g*g),p=l*
e+h*u+n*b,q=k&&-aa(p)/k,k=Math.atan2(k,p);tb+=q*m;ub+=q*f;$a+=q*g;ic+=k;Ya+=k*(l+(l=e));Za+=k*(h+(h=u));Ma+=k*(n+(n=b));Eb(l,h,n)}var a,e,l,h,n;Ja.point=function(b,x){a=b;e=x;Ja.point=c;b*=ka;var X=Math.cos(x*=ka);l=X*Math.cos(b);h=X*Math.sin(b);n=Math.sin(x);Eb(l,h,n)};Ja.lineEnd=function(){c(a,e);Ja.lineEnd=ne;Ja.point=ad}}function vb(){return!0}function oe(c,a,e,l,h){var n=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,u=c[0],e=c[a];if(hc(u,e)){h.lineStart();for(e=0;e<a;++e)h.point((u=
c[e])[0],u[1]);h.lineEnd()}else a=new jc(u,c,null,!0),u=new jc(u,null,a,!1),a.o=u,n.push(a),b.push(u),a=new jc(e,c,null,!1),u=new jc(e,null,a,!0),a.o=u,n.push(a),b.push(u)}});b.sort(a);pe(n);pe(b);if(n.length){c=0;a=e;for(e=b.length;c<e;++c)b[c].e=a=!a;a=n[0];for(var x,X;;){for(var ea=a,m=!0;ea.v;)if((ea=ea.n)===a)return;x=ea.z;h.lineStart();do{ea.v=ea.o.v=!0;if(ea.e){if(m)for(c=0,e=x.length;c<e;++c)h.point((X=x[c])[0],X[1]);else l(ea.x,ea.n.x,1,h);ea=ea.n}else{if(m)for(x=ea.p.z,c=x.length-1;0<=c;--c)h.point((X=
x[c])[0],X[1]);else l(ea.x,ea.p.x,-1,h);ea=ea.p}ea=ea.o;x=ea.z;m=!m}while(!ea.v);h.lineEnd()}}}function pe(c){if(a=c.length){for(var a,e=0,l=c[0],h;++e<a;)l.n=h=c[e],h.p=l,l=h;l.n=h=c[0];h.p=l}}function jc(c,a,e,l){this.x=c;this.z=a;this.o=e;this.e=l;this.v=!1;this.n=this.p=null}function qe(c,a,e,l){return function(h,n){function b(a,u){var e=h(a,u);c(a=e[0],u=e[1])&&n.point(a,u)}function x(c,a){var u=h(c,a);k.point(u[0],u[1])}function X(){q.point=x;k.lineStart()}function ea(){q.point=b;k.lineEnd()}
function m(c,a){Q.push([c,a]);var u=h(c,a);z.point(u[0],u[1])}function f(){z.lineStart();Q=[]}function g(){m(Q[0][0],Q[0][1]);z.lineEnd();var c=z.clean(),a=r.buffer(),u=a.length;Q.pop();C.push(Q);Q=null;if(u)if(c&1){var c=a[0],u=c.length-1,a=-1,e;if(0<u){y||(n.polygonStart(),y=!0);for(n.lineStart();++a<u;)n.point((e=c[a])[0],e[1]);n.lineEnd()}}else 1<u&&c&2&&a.push(a.pop().concat(a.shift())),t.push(a.filter(Gg))}var k=a(n),p=h.invert(l[0],l[1]),q={point:b,lineStart:X,lineEnd:ea,polygonStart:function(){q.point=
m;q.lineStart=f;q.lineEnd=g;t=[];C=[]},polygonEnd:function(){q.point=b;q.lineStart=X;q.lineEnd=ea;t=w.merge(t);var c,a=p;c=C;var u=a[0],l=a[1],h=[Math.sin(u),-Math.cos(u),0],x=0,m=0;gb.reset();for(var f=0,g=c.length;f<g;++f){var k=c[f],Pa=k.length;if(Pa)for(var r=k[0],Qa=r[0],a=r[1]/2+la/4,z=Math.sin(a),Td=Math.cos(a),Q=1;;){Q===Pa&&(Q=0);var a=k[Q],F=a[0],H=a[1]/2+la/4,K=Math.sin(H),H=Math.cos(H),v=F-Qa,O=0<=v?1:-1,V=O*v,U=V>la,z=z*K;gb.add(Math.atan2(z*O*Math.sin(V),Td*H+z*Math.cos(V)));x+=U?v+
O*Ea:v;U^Qa>=u^F>=u&&(r=sb(hb(r),hb(a)),fc(r),Qa=sb(h,r),fc(Qa),Qa=(U^0<=v?-1:1)*na(Qa[2]),l>Qa||l===Qa&&(r[0]||r[1]))&&(m+=U^0<=v?1:-1);if(!Q++)break;Qa=F;z=K;Td=H;r=a}}c=(-1E-6>x||1E-6>x&&0>gb)^m&1;t.length?(y||(n.polygonStart(),y=!0),oe(t,Hg,c,e,n)):c&&(y||(n.polygonStart(),y=!0),n.lineStart(),e(null,null,1,n),n.lineEnd());y&&(n.polygonEnd(),y=!1);t=C=null},sphere:function(){n.polygonStart();n.lineStart();e(null,null,1,n);n.lineEnd();n.polygonEnd()}},t,r=re(),z=a(r),y=!1,C,Q;return q}}function Gg(c){return 1<
c.length}function re(){var c=[],a;return{lineStart:function(){c.push(a=[])},point:function(c,l){a.push([c,l])},lineEnd:A,buffer:function(){var e=c;c=[];a=null;return e},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Hg(c,a){return(0>(c=c.x)[0]?c[1]-xa-1E-6:xa-c[1])-(0>(a=a.x)[0]?a[1]-xa-1E-6:xa-a[1])}function Ig(c){function a(c,u){return Math.cos(c)*Math.cos(u)>h}function e(c,a,u){var e=hb(c),l=hb(a),n=[1,0,0],l=sb(e,l),b=dc(l,l),e=l[0],x=b-e*e;if(!x)return!u&&c;b=h*b/
x;x=-h*e/x;e=sb(n,l);n=ec(n,b);l=ec(l,x);$c(n,l);l=dc(n,e);b=dc(e,e);x=l*l-b*(dc(n,n)-1);if(!(0>x)){var ga=Math.sqrt(x),x=ec(e,(-l-ga)/b);$c(x,n);x=gc(x);if(!u)return x;u=c[0];var m=a[0];c=c[1];a=a[1];var f;m<u&&(f=u,u=m,m=f);var g=m-u,k=1E-6>ma(g-la);!k&&a<c&&(f=c,c=a,a=f);if(k||1E-6>g?k?0<c+a^x[1]<(1E-6>ma(x[0]-u)?c:a):c<=x[1]&&x[1]<=a:g>la^(u<=x[0]&&x[0]<=m))return a=ec(e,(-l+ga)/b),$c(a,n),[x,gc(a)]}}function l(a,u){var e=n?c:la-c,l=0;a<-e?l|=1:a>e&&(l|=2);u<-e?l|=4:u>e&&(l|=8);return l}var h=
Math.cos(c),n=0<h,b=1E-6<ma(h),x=bd(c,6*ka);return qe(a,function(c){var h,x,m,f,g;return{lineStart:function(){f=m=!1;g=1},point:function(k,q){var p=[k,q],r,t=a(k,q),z=n?t?0:l(k,q):t?l(k+(0>k?la:-la),q):0;!h&&(f=m=t)&&c.lineStart();t!==m&&(r=e(h,p),hc(h,r)||hc(p,r))&&(p[0]+=1E-6,p[1]+=1E-6,t=a(p[0],p[1]));if(t!==m)g=0,t?(c.lineStart(),r=e(p,h),c.point(r[0],r[1])):(r=e(h,p),c.point(r[0],r[1]),c.lineEnd()),h=r;else if(b&&h&&n^t){var y;z&x||!(y=e(p,h,!0))||(g=0,n?(c.lineStart(),c.point(y[0][0],y[0][1]),
c.point(y[1][0],y[1][1]),c.lineEnd()):(c.point(y[1][0],y[1][1]),c.lineEnd(),c.lineStart(),c.point(y[0][0],y[0][1])))}!t||h&&hc(h,p)||c.point(p[0],p[1]);h=p;m=t;x=z},lineEnd:function(){m&&c.lineEnd();h=null},clean:function(){return g|(f&&m)<<1}}},x,n?[0,-c]:[-la,c-la])}function se(c,a,e,l){return function(h){var n=h.a,b=h.b,x=n.x,n=n.y,X=0,ea=1,m=b.x-x,b=b.y-n,f;f=c-x;if(m||!(0<f)){f/=m;if(0>m){if(f<X)return;f<ea&&(ea=f)}else if(0<m){if(f>ea)return;f>X&&(X=f)}f=e-x;if(m||!(0>f)){f/=m;if(0>m){if(f>
ea)return;f>X&&(X=f)}else if(0<m){if(f<X)return;f<ea&&(ea=f)}f=a-n;if(b||!(0<f)){f/=b;if(0>b){if(f<X)return;f<ea&&(ea=f)}else if(0<b){if(f>ea)return;f>X&&(X=f)}f=l-n;if(b||!(0>f)){f/=b;if(0>b){if(f>ea)return;f>X&&(X=f)}else if(0<b){if(f<X)return;f<ea&&(ea=f)}0<X&&(h.a={x:x+X*m,y:n+X*b});1>ea&&(h.b={x:x+ea*m,y:n+ea*b});return h}}}}}}function te(c,a,e,l){function h(l,h){return 1E-6>ma(l[0]-c)?0<h?0:3:1E-6>ma(l[0]-e)?0<h?2:1:1E-6>ma(l[1]-a)?0<h?1:0:0<h?3:2}function n(c,a){return b(c.x,a.x)}function b(c,
a){var u=h(c,1),e=h(a,1);return u!==e?u-e:0===u?a[1]-c[1]:1===u?c[0]-a[0]:2===u?c[1]-a[1]:a[0]-c[0]}return function(x){function X(n,x,X,ea){var m=0,f=0;if(null==n||(m=h(n,X))!==(f=h(x,X))||0>b(n,x)^0<X){do ea.point(0===m||3===m?c:e,1<m?l:a);while((m=(m+X+4)%4)!==f)}else ea.point(x[0],x[1])}function ea(h,n){c<=h&&h<=e&&a<=n&&n<=l&&x.point(h,n)}function m(h,n){h=Math.max(-1E9,Math.min(1E9,h));n=Math.max(-1E9,Math.min(1E9,n));var b=c<=h&&h<=e&&a<=n&&n<=l;q&&r.push([h,n]);if(K)z=h,y=n,Q=b,K=!1,b&&(x.lineStart(),
x.point(h,n));else if(b&&H)x.point(h,n);else{var ga={a:{x:C,y:F},b:{x:h,y:n}};k(ga)?(H||(x.lineStart(),x.point(ga.a.x,ga.a.y)),x.point(ga.b.x,ga.b.y),b||x.lineEnd(),v=!1):b&&(x.lineStart(),x.point(h,n),v=!1)}C=h;F=n;H=b}var f=x,g=re(),k=se(c,a,e,l),p,q,r,t={point:ea,lineStart:function(){t.point=m;q&&q.push(r=[]);K=!0;H=!1;C=F=NaN},lineEnd:function(){p&&(m(z,y),Q&&H&&g.rejoin(),p.push(g.buffer()));t.point=ea;H&&x.lineEnd()},polygonStart:function(){x=g;p=[];q=[];v=!0},polygonEnd:function(){x=f;p=w.merge(p);
var a;a=[c,l];for(var u=0,e=q.length,h=a[1],b=0;b<e;++b)for(var ga=1,m=q[b],ea=m.length,g=m[0],k;ga<ea;++ga)k=m[ga],g[1]<=h?k[1]>h&&0<ca(g,k,a)&&++u:k[1]<=h&&0>ca(g,k,a)&&--u,g=k;a=0!==u;u=v&&a;e=p.length;if(u||e)x.polygonStart(),u&&(x.lineStart(),X(null,null,1,x),x.lineEnd()),e&&oe(p,n,a,X,x),x.polygonEnd();p=q=r=null}},z,y,Q,C,F,H,K,v;return t}}function ue(c,a){function e(e,h){return e=c(e,h),a(e[0],e[1])}c.invert&&a.invert&&(e.invert=function(e,h){return e=a.invert(e,h),e&&c.invert(e[0],e[1])});
return e}function cd(c){var a=0,e=la/3,l=dd(c);c=l(a,e);c.parallels=function(c){return arguments.length?l(a=c[0]*la/180,e=c[1]*la/180):[a/la*180,e/la*180]};return c}function ve(c,a){function e(c,a){var u=Math.sqrt(n-2*h*Math.sin(a))/h;return[u*Math.sin(c*=h),b-u*Math.cos(c)]}var l=Math.sin(c),h=(l+Math.sin(a))/2,n=1+l*(2*h-l),b=Math.sqrt(n)/h;e.invert=function(c,a){var u=b-a;return[Math.atan2(c,u)/h,na((n-(c*c+u*u)*h*h)/(2*h))]};return e}function Jg(){function c(c,a){ed+=h*c-l*a;l=c;h=a}var a,e,l,
h;ab.point=function(n,b){ab.point=c;a=l=n;e=h=b};ab.lineEnd=function(){c(a,e)}}function Kg(){function c(c,a){b.push("M",c,",",a,n)}function a(c,u){b.push("M",c,",",u);x.point=e}function e(c,a){b.push("L",c,",",a)}function l(){x.point=c}function h(){b.push("Z")}var n=we(4.5),b=[],x={point:c,lineStart:function(){x.point=a},lineEnd:l,polygonStart:function(){x.lineEnd=h},polygonEnd:function(){x.lineEnd=l;x.point=c},pointRadius:function(c){n=we(c);return x},result:function(){if(b.length){var c=b.join("");
b=[];return c}}};return x}function we(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function kb(c,a){ib+=c;jb+=a;++Ua}function xe(){function c(c,h){var n=c-a,b=h-e,n=Math.sqrt(n*n+b*b);Ya+=n*(a+c)/2;Za+=n*(e+h)/2;Ma+=n;kb(a=c,e=h)}var a,e;Ka.point=function(l,h){Ka.point=c;kb(a=l,e=h)}}function ye(){Ka.point=kb}function Lg(){function c(c,a){var u=c-l,e=a-h,u=Math.sqrt(u*u+e*e);Ya+=u*(l+c)/2;Za+=u*(h+a)/2;Ma+=u;u=h*c-l*a;tb+=u*(l+c);ub+=u*(h+a);$a+=3*u;kb(l=c,h=a)}var a,
e,l,h;Ka.point=function(n,b){Ka.point=c;kb(a=l=n,e=h=b)};Ka.lineEnd=function(){c(a,e)}}function Mg(c){function a(u,e){c.moveTo(u,e);c.arc(u,e,b,0,Ea)}function e(a,u){c.moveTo(a,u);x.point=l}function l(a,u){c.lineTo(a,u)}function h(){x.point=a}function n(){c.closePath()}var b=4.5,x={point:a,lineStart:function(){x.point=e},lineEnd:h,polygonStart:function(){x.lineEnd=n},polygonEnd:function(){x.lineEnd=h;x.point=a},pointRadius:function(c){b=c;return x},result:A};return x}function ze(c){function a(c){return(x?
l:e)(c)}function e(a){return Ae(a,function(u,e){u=c(u,e);a.point(u[0],u[1])})}function l(a){function u(e,l){e=c(e,l);a.point(e[0],e[1])}function e(){z=NaN;w.point=l;a.lineStart()}function l(u,e){var n=hb([u,e]),b=c(u,e);h(z,y,t,Q,C,H,z=b[0],y=b[1],t=u,Q=n[0],C=n[1],H=n[2],x,a);a.point(z,y)}function n(){w.point=u;a.lineEnd()}function b(){e();w.point=ga;w.lineEnd=m}function ga(c,a){l(f=c,a);g=z;k=y;p=Q;q=C;r=H;w.point=l}function m(){h(z,y,t,Q,C,H,g,k,f,p,q,r,x,a);w.lineEnd=n;n()}var f,g,k,p,q,r,t,z,
y,Q,C,H,w={point:u,lineStart:e,lineEnd:n,polygonStart:function(){a.polygonStart();w.lineStart=b},polygonEnd:function(){a.polygonEnd();w.lineStart=e}};return w}function h(a,u,e,l,x,m,f,g,k,p,q,r,t,z){var y=f-a,Q=g-u,C=y*y+Q*Q;if(C>4*n&&t--){var w=l+p,H=x+q,F=m+r,K=Math.sqrt(w*w+H*H+F*F),v=Math.asin(F/=K),O=1E-6>ma(ma(F)-1)||1E-6>ma(e-k)?(e+k)/2:Math.atan2(H,w),V=c(O,v),v=V[0],V=V[1],U=v-a,G=V-u,D=Q*U-y*G;if(D*D/C>n||.3<ma((y*U+Q*G)/C-.5)||l*p+x*q+m*r<b)h(a,u,e,l,x,m,v,V,O,w/=K,H/=K,F,t,z),z.point(v,
V),h(v,V,O,w,H,F,f,g,k,p,q,r,t,z)}}var n=.5,b=Math.cos(30*ka),x=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(n);x=0<(n=c*c)&&16;return a};return a}function Ng(c){var a=ze(function(a,u){return c([a*ta,u*ta])});return function(c){return Be(a(c))}}function Ce(c){this.stream=c}function Ae(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}
function bb(c){return dd(function(){return c})()}function dd(c){function a(c){c=x(c[0]*ka,c[1]*ka);return[c[0]*m+z,y-c[1]*m]}function e(c){return(c=x.invert((c[0]-z)/m,(y-c[1])/m))&&[c[0]*ta,c[1]*ta]}function l(){x=ue(b=fd(q,r,t),n);var c=n(k,p);z=f-c[0]*m;y=g+c[1]*m;return h()}function h(){v&&(v.valid=!1,v=null);return a}var n,b,x,X=ze(function(c,a){c=n(c,a);return[c[0]*m+z,y-c[1]*m]}),m=150,f=480,g=250,k=0,p=0,q=0,r=0,t=0,z,y,Q=De,C=wa,H=null,F=null,v;a.stream=function(c){v&&(v.valid=!1);v=Be(Q(b,
X(C(c))));v.valid=!0;return v};a.clipAngle=function(c){if(!arguments.length)return H;Q=null==c?(H=c,De):Ig((H=+c)*ka);return h()};a.clipExtent=function(c){if(!arguments.length)return F;C=(F=c)?te(c[0][0],c[0][1],c[1][0],c[1][1]):wa;return h()};a.scale=function(c){if(!arguments.length)return m;m=+c;return l()};a.translate=function(c){if(!arguments.length)return[f,g];f=+c[0];g=+c[1];return l()};a.center=function(c){if(!arguments.length)return[k*ta,p*ta];k=c[0]%360*ka;p=c[1]%360*ka;return l()};a.rotate=
function(c){if(!arguments.length)return[q*ta,r*ta,t*ta];q=c[0]%360*ka;r=c[1]%360*ka;t=2<c.length?c[2]%360*ka:0;return l()};w.rebind(a,X,"precision");return function(){n=c.apply(this,arguments);a.invert=n.invert&&e;return l()}}function Be(c){return Ae(c,function(a,e){c.point(a*ka,e*ka)})}function Gb(c,a){return[c,a]}function Ee(c,a){return[c>la?c-Ea:c<-la?c+Ea:c,a]}function fd(c,a,e){return c?a||e?ue(Fe(c),Ge(a,e)):Fe(c):a||e?Ge(a,e):Ee}function He(c){return function(a,e){return a+=c,[a>la?a-Ea:a<
-la?a+Ea:a,e]}}function Fe(c){var a=He(c);a.invert=He(-c);return a}function Ge(c,a){function e(c,a){var u=Math.cos(a),e=Math.cos(c)*u,u=Math.sin(c)*u,m=Math.sin(a),f=m*l+e*h;return[Math.atan2(u*n-f*b,e*l-m*h),na(f*n+u*b)]}var l=Math.cos(c),h=Math.sin(c),n=Math.cos(a),b=Math.sin(a);e.invert=function(c,a){var u=Math.cos(a),e=Math.cos(c)*u,u=Math.sin(c)*u,m=Math.sin(a),f=m*n-u*b;return[Math.atan2(u*n+m*b,e*l+f*h),na(f*l-e*h)]};return e}function bd(c,a){var e=Math.cos(c),l=Math.sin(c);return function(h,
n,b,x){var X=b*a;if(null!=h){if(h=Ie(e,h),n=Ie(e,n),0<b?h<n:h>n)h+=b*Ea}else h=c+b*Ea,n=c-.5*X;for(var m;0<b?h>n:h<n;h-=X)x.point((m=gc([e,-l*Math.cos(h),-l*Math.sin(h)]))[0],m[1])}}function Ie(c,a){var e=hb(a);e[0]-=c;fc(e);var l=aa(-e[1]);return((0>-e[2]?-l:l)+2*Math.PI-1E-6)%(2*Math.PI)}function Je(c,a,e){var l=w.range(c,a-1E-6,e).concat(a);return function(c){return l.map(function(a){return[c,a]})}}function Ke(c,a,e){var l=w.range(c,a-1E-6,e).concat(a);return function(c){return l.map(function(a){return[a,
c]})}}function gd(c){return c.source}function hd(c){return c.target}function Og(c,a,e,l){var h=Math.cos(a),n=Math.sin(a),b=Math.cos(l),x=Math.sin(l),X=h*Math.cos(c),m=h*Math.sin(c),f=b*Math.cos(e),g=b*Math.sin(e),k=2*Math.asin(Math.sqrt(oa(l-a)+h*b*oa(e-c))),p=1/Math.sin(k);e=k?function(c){var a=Math.sin(c*=k)*p;c=Math.sin(k-c)*p;var u=c*X+a*f,e=c*m+a*g;return[Math.atan2(e,u)*ta,Math.atan2(c*n+a*x,Math.sqrt(u*u+e*e))*ta]}:function(){return[c*ta,a*ta]};e.distance=k;return e}function Hb(c,a){function e(a,
u){var e=Math.cos(u),b=c(Math.cos(a)*e);return[b*e*Math.sin(a),b*Math.sin(u)]}e.invert=function(c,e){var n=Math.sqrt(c*c+e*e),b=a(n),x=Math.sin(b);return[Math.atan2(c*x,n*Math.cos(b)),Math.asin(n&&e*x/n)]};return e}function Le(c,a){function e(c,a){0<n?a<-xa+1E-6&&(a=-xa+1E-6):a>xa-1E-6&&(a=xa-1E-6);var u=n/Math.pow(Math.tan(la/4+a/2),h);return[u*Math.sin(h*c),n-u*Math.cos(h*c)]}var l=Math.cos(c),h=c===a?Math.sin(c):Math.log(l/Math.cos(a))/Math.log(Math.tan(la/4+a/2)/Math.tan(la/4+c/2)),n=l*Math.pow(Math.tan(la/
4+c/2),h)/h;if(!h)return kc;e.invert=function(c,a){var u=n-a;return[Math.atan2(c,u)/h,2*Math.atan(Math.pow(n/((0<h?1:0>h?-1:0)*Math.sqrt(c*c+u*u)),1/h))-xa]};return e}function Me(c,a){function e(c,a){var u=n-a;return[u*Math.sin(h*c),n-u*Math.cos(h*c)]}var l=Math.cos(c),h=c===a?Math.sin(c):(l-Math.cos(a))/(a-c),n=l/h+c;if(1E-6>ma(h))return Gb;e.invert=function(c,a){var u=n-a;return[Math.atan2(c,u)/h,n-(0<h?1:0>h?-1:0)*Math.sqrt(c*c+u*u)]};return e}function kc(c,a){return[c,Math.log(Math.tan(la/4+a/
2))]}function Ne(c){var a=bb(c),e=a.scale,l=a.translate,h=a.clipExtent,n;a.scale=function(){var c=e.apply(a,arguments);return c===a?n?a.clipExtent(null):a:c};a.translate=function(){var c=l.apply(a,arguments);return c===a?n?a.clipExtent(null):a:c};a.clipExtent=function(c){var b=h.apply(a,arguments);if(b===a){if(n=null==c){var X=la*e(),m=l();h([[m[0]-X,m[1]-X],[m[0]+X,m[1]+X]])}}else n&&(b=null);return b};return a.clipExtent(null)}function id(c,a){return[Math.log(Math.tan(la/4+a/2)),-c]}function wb(c){return c[0]}
function Ib(c){return c[1]}function Oe(c){for(var a=c.length,e=[0,1],l=2,h=2;h<a;h++){for(;1<l&&0>=ca(c[e[l-2]],c[e[l-1]],c[h]);)--l;e[l++]=h}return e.slice(0,l)}function Pg(c,a){return c[0]-a[0]||c[1]-a[1]}function jd(c,a,e){return(e[0]-a[0])*(c[1]-a[1])<(e[1]-a[1])*(c[0]-a[0])}function Pe(c,a,e,l){var h=c[0],n=e[0],b=a[0]-h,x=l[0]-n;c=c[1];e=e[1];a=a[1]-c;l=l[1]-e;n=(x*(c-e)-l*(h-n))/(l*b-x*a);return[h+n*b,c+n*a]}function Qe(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Qg(){lc(this);
this.edge=this.site=this.circle=null}function Re(c){var a=Se.pop()||new Qg;a.site=c;return a}function kd(c){xb(c);yb.remove(c);Se.push(c);lc(c)}function Te(c,a){var e=c.site,l=e.x,h=e.y,n=h-a;if(!n)return l;var b=c.P;if(!b)return-Infinity;var e=b.site,b=e.x,e=e.y,x=e-a;if(!x)return b;var X=b-l,m=1/n-1/x,f=X/x;return m?(-f+Math.sqrt(f*f-2*m*(X*X/(-2*x)-e+x/2+h-n/2)))/m+l:(l+b)/2}function Ue(c){this.site=c;this.edges=[]}function Ve(c,a){return a.angle-c.angle}function Rg(){lc(this);this.x=this.y=this.arc=
this.site=this.cy=null}function zb(c){var a=c.P,e=c.N;if(a&&e){var l=a.site,a=c.site,h=e.site;if(l!==h){var e=a.x,n=a.y,b=l.x-e,x=l.y-n,l=h.x-e,h=h.y-n,X=2*(b*h-x*l);if(!(-1E-12<=X)){var m=b*b+x*x,f=l*l+h*h,x=(h*m-x*f)/X,b=(b*f-l*m)/X,h=b+n,n=We.pop()||new Rg;n.arc=c;n.site=a;n.x=x+e;n.y=h+Math.sqrt(x*x+b*b);n.cy=h;c.circle=n;c=null;for(a=Jb._;a;)if(n.y<a.y||n.y===a.y&&n.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Jb.insert(c,n);c||(ld=n)}}}}function xb(c){var a=c.circle;
a&&(a.P||(ld=a.N),Jb.remove(a),We.push(a),lc(a),c.circle=null)}function Sg(c,a){var e=c.b;if(e)return!0;var l=c.a,e=a[0][0],h=a[1][0],n=a[0][1],b=a[1][1],x=c.l,m=c.r,f=x.x,x=x.y,g=m.x,m=m.y,k=(f+g)/2,p;if(m===x){if(k<e||k>=h)return;if(f>g){if(!l)l={x:k,y:n};else if(l.y>=b)return;e={x:k,y:b}}else{if(!l)l={x:k,y:b};else if(l.y<n)return;e={x:k,y:n}}}else if(p=(f-g)/(m-x),k=(x+m)/2-p*k,-1>p||1<p)if(f>g){if(!l)l={x:(n-k)/p,y:n};else if(l.y>=b)return;e={x:(b-k)/p,y:b}}else{if(!l)l={x:(b-k)/p,y:b};else if(l.y<
n)return;e={x:(n-k)/p,y:n}}else if(x<m){if(!l)l={x:e,y:p*e+k};else if(l.x>=h)return;e={x:h,y:p*h+k}}else{if(!l)l={x:h,y:p*h+k};else if(l.x<e)return;e={x:e,y:p*e+k}}c.a=l;c.b=e;return!0}function Xe(c,a){this.l=c;this.r=a;this.a=this.b=null}function Kb(c,a,e,l){var h=new Xe(c,a);Ab.push(h);e&&mc(h,c,a,e);l&&mc(h,a,c,l);lb[c.i].edges.push(new nc(h,c,a));lb[a.i].edges.push(new nc(h,a,c));return h}function Tg(c,a,e){c=new Xe(c,null);c.a=a;c.b=e;Ab.push(c);return c}function mc(c,a,e,l){c.a||c.b?c.l===e?
c.b=l:c.a=l:(c.a=l,c.l=a,c.r=e)}function nc(c,a,e){var l=c.a,h=c.b;this.edge=c;this.site=a;this.angle=e?Math.atan2(e.y-a.y,e.x-a.x):c.l===a?Math.atan2(h.x-l.x,l.y-h.y):Math.atan2(l.x-h.x,h.y-l.y)}function md(){this._=null}function lc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Lb(c,a){var e=a.R,l=a.U;l?l.L===a?l.L=e:l.R=e:c._=e;e.U=l;a.U=e;a.R=e.L;a.R&&(a.R.U=a);e.L=a}function Mb(c,a){var e=a.L,l=a.U;l?l.L===a?l.L=e:l.R=e:c._=e;e.U=l;a.U=e;a.L=e.R;a.L&&(a.L.U=a);e.R=a}function Ye(c){for(;c.L;)c=c.L;
return c}function nd(c,a){var e=c.sort(Ug).pop(),l,h,n;Ab=[];lb=Array(c.length);yb=new md;for(Jb=new md;;)if(n=ld,e&&(!n||e.y<n.y||e.y===n.y&&e.x<n.x)){if(e.x!==l||e.y!==h){lb[e.i]=new Ue(e);l=e;var b=l.x,x=l.y;n=h=void 0;for(var m,f,k=yb._;k;)if(m=Te(k,x)-b,1E-6<m)k=k.L;else{var g=k;f=x;var p=g.N;p?f=Te(p,f):(g=g.site,f=g.y===f?g.x:Infinity);f=b-f;if(1E-6<f){if(!k.R){h=k;break}k=k.R}else{-1E-6<m?(h=k.P,n=k):-1E-6<f?(h=k,n=k.N):h=n=k;break}}b=Re(l);yb.insert(h,b);if(h||n)if(h===n)xb(h),n=Re(h.site),
yb.insert(b,n),b.edge=n.edge=Kb(h.site,b.site),zb(h),zb(n);else if(n){xb(h);xb(n);x=h.site;k=x.x;f=x.y;g=l.x-k;p=l.y-f;m=n.site;var q=m.x-k,r=m.y-f,t=2*(g*r-p*q),z=g*g+p*p,y=q*q+r*r,k={x:(r*z-p*y)/t+k,y:(g*y-q*z)/t+f};mc(n.edge,x,m,k);b.edge=Kb(x,l,null,k);n.edge=Kb(l,m,null,k);zb(h);zb(n)}else b.edge=Kb(h.site,b.site);l=e.x;h=e.y}e=c.pop()}else if(n){m=n.arc;n=m.circle;x=n.x;k=n.cy;n={x:x,y:k};g=m.P;f=m.N;b=[m];kd(m);for(m=g;m.circle&&1E-6>ma(x-m.circle.x)&&1E-6>ma(k-m.circle.cy);)g=m.P,b.unshift(m),
kd(m),m=g;b.unshift(m);xb(m);for(g=f;g.circle&&1E-6>ma(x-g.circle.x)&&1E-6>ma(k-g.circle.cy);)f=g.N,b.push(g),kd(g),g=f;b.push(g);xb(g);x=b.length;for(k=1;k<x;++k)g=b[k],m=b[k-1],mc(g.edge,m.site,g.site,n);m=b[0];g=b[x-1];g.edge=Kb(m.site,g.site,null,n);zb(m);zb(g)}else break;if(a){e=Ab;l=se(a[0][0],a[0][1],a[1][0],a[1][1]);for(h=e.length;h--;)if(n=e[h],!Sg(n,a)||!l(n)||1E-6>ma(n.a.x-n.b.x)&&1E-6>ma(n.a.y-n.b.y))n.a=n.b=null,e.splice(h,1);e=a[0][0];l=a[1][0];h=a[0][1];n=a[1][1];k=lb;for(f=k.length;f--;)if((g=
k[f])&&g.prepare())for(q=g.edges,r=q.length,p=0;p<r;)if(t=q[p].end(),x=t.x,m=t.y,z=q[++p%r].start(),b=z.x,z=z.y,1E-6<ma(x-b)||1E-6<ma(m-z))q.splice(p,0,new nc(Tg(g.site,t,1E-6>ma(x-e)&&1E-6<n-m?{x:e,y:1E-6>ma(b-e)?z:n}:1E-6>ma(m-n)&&1E-6<l-x?{x:1E-6>ma(z-n)?b:l,y:n}:1E-6>ma(x-l)&&1E-6<m-h?{x:l,y:1E-6>ma(b-l)?z:h}:1E-6>ma(m-h)&&1E-6<x-e?{x:1E-6>ma(z-h)?b:e,y:h}:null),g.site,null)),++r}e={cells:lb,edges:Ab};yb=Jb=Ab=lb=null;return e}function Ug(c,a){return a.y-c.y||a.x-c.x}function Vg(c){return c.x}
function Wg(c){return c.y}function Ze(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Nb(c,a,e,l,h,n){if(!c(a,e,l,h,n)){var b=.5*(e+h),x=.5*(l+n);a=a.nodes;a[0]&&Nb(c,a[0],e,l,b,x);a[1]&&Nb(c,a[1],b,l,h,x);a[2]&&Nb(c,a[2],e,x,b,n);a[3]&&Nb(c,a[3],b,x,h,n)}}function od(c,a){c=w.rgb(c);a=w.rgb(a);var e=c.r,l=c.g,h=c.b,n=a.r-e,b=a.g-l,x=a.b-h;return function(c){return"#"+rb(Math.round(e+n*c))+rb(Math.round(l+b*c))+rb(Math.round(h+x*c))}}function $e(c,a){var e={},l={},h;for(h in c)h in a?
e[h]=mb(c[h],a[h]):l[h]=c[h];for(h in a)h in c||(l[h]=a[h]);return function(c){for(h in e)l[h]=e[h](c);return l}}function Va(c,a){a-=c=+c;return function(e){return c+a*e}}function af(c,a){var e=pd.lastIndex=qd.lastIndex=0,l,h,n,b=-1,x=[],m=[];c+="";for(a+="";(l=pd.exec(c))&&(h=qd.exec(a));)(n=h.index)>e&&(n=a.substring(e,n),x[b]?x[b]+=n:x[++b]=n),(l=l[0])===(h=h[0])?x[b]?x[b]+=h:x[++b]=h:(x[++b]=null,m.push({i:b,x:Va(l,h)})),e=qd.lastIndex;e<a.length&&(n=a.substring(e),x[b]?x[b]+=n:x[++b]=n);return 2>
x.length?m[0]?(a=m[0].x,function(c){return a(c)+""}):function(){return a}:(a=m.length,function(c){for(var e=0,l;e<a;++e)x[(l=m[e]).i]=l.x(c);return x.join("")})}function mb(c,a){for(var e=w.interpolators.length,l;0<=--e&&!(l=w.interpolators[e](c,a)););return l}function oc(c,a){var e=[],l=[],h=c.length,n=a.length,b=Math.min(c.length,a.length),x;for(x=0;x<b;++x)e.push(mb(c[x],a[x]));for(;x<h;++x)l[x]=c[x];for(;x<n;++x)l[x]=a[x];return function(c){for(x=0;x<b;++x)l[x]=e[x](c);return l}}function Xg(c){return function(a){return 0>=
a?0:1<=a?1:c(a)}}function bf(c){return function(a){return 1-c(1-a)}}function cf(c){return function(a){return.5*(.5>a?c(2*a):2-c(2-2*a))}}function Yg(c){return c*c}function Zg(c){return c*c*c}function $g(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,e=a*c;return 4*(.5>c?e:3*(c-a)+e-.75)}function ah(c){return 1-Math.cos(c*xa)}function bh(c){return Math.pow(2,10*(c-1))}function ch(c){return 1-Math.sqrt(1-c*c)}function dh(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*
(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function df(c,a){a-=c;return function(e){return Math.round(c+a*e)}}function ef(c){var a=[c.a,c.b],e=[c.c,c.d],l=ff(a),h=a[0]*e[0]+a[1]*e[1],n=-h;e[0]+=n*a[0];e[1]+=n*a[1];n=ff(e)||0;a[0]*e[1]<e[0]*a[1]&&(a[0]*=-1,a[1]*=-1,l*=-1,h*=-1);this.rotate=(l?Math.atan2(a[1],a[0]):Math.atan2(-e[0],e[1]))*ta;this.translate=[c.e,c.f];this.scale=[l,n];this.skew=n?Math.atan2(h,n)*ta:0}function ff(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);
return a}function gf(c,a){var e=[],l=[],h,n=w.transform(c),b=w.transform(a),x=n.translate,m=b.translate,f=n.rotate,k=b.rotate,g=n.skew,p=b.skew,n=n.scale,b=b.scale;x[0]!=m[0]||x[1]!=m[1]?(e.push("translate(",null,",",null,")"),l.push({i:1,x:Va(x[0],m[0])},{i:3,x:Va(x[1],m[1])})):m[0]||m[1]?e.push("translate("+m+")"):e.push("");f!=k?(180<f-k?k+=360:180<k-f&&(f+=360),l.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:Va(f,k)})):k&&e.push(e.pop()+"rotate("+k+")");g!=p?l.push({i:e.push(e.pop()+"skewX(",
null,")")-2,x:Va(g,p)}):p&&e.push(e.pop()+"skewX("+p+")");n[0]!=b[0]||n[1]!=b[1]?(h=e.push(e.pop()+"scale(",null,",",null,")"),l.push({i:h-4,x:Va(n[0],b[0])},{i:h-2,x:Va(n[1],b[1])})):1==b[0]&&1==b[1]||e.push(e.pop()+"scale("+b+")");h=l.length;return function(c){for(var a=-1,u;++a<h;)e[(u=l[a]).i]=u.x(c);return e.join("")}}function eh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return(e-c)*a}}function fh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return Math.max(0,Math.min(1,(e-c)*a))}}function gh(c){var a=
c.source;c=c.target;var e;var l=c;if(a===l)e=a;else{e=hf(a);for(var l=hf(l),h=e.pop(),n=l.pop(),b=null;h===n;)b=h,h=e.pop(),n=l.pop();e=b}for(l=[a];a!==e;)a=a.parent,l.push(a);for(a=l.length;c!==e;)l.splice(a,0,c),c=c.parent;return l}function hf(c){for(var a=[],e=c.parent;null!=e;)a.push(c),c=e,e=e.parent;a.push(c);return a}function hh(c){c.fixed|=2}function ih(c){c.fixed&=-7}function jh(c){c.fixed|=4;c.px=c.x;c.py=c.y}function kh(c){c.fixed&=-5}function jf(c,a,e){var l=0,h=0;c.charge=0;if(!c.leaf)for(var n=
c.nodes,b=n.length,x=-1,m;++x<b;)m=n[x],null!=m&&(jf(m,a,e),c.charge+=m.charge,l+=m.charge*m.cx,h+=m.charge*m.cy);c.point&&(c.leaf||(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=e[c.point.index],c.charge+=c.pointCharge=a,l+=a*c.point.x,h+=a*c.point.y);c.cx=l/c.charge;c.cy=h/c.charge}function Ob(c,a){w.rebind(c,a,"sort","children","value");c.nodes=c;c.links=lh;return c}function Pb(c,a){for(var e=[c];null!=(c=e.pop());)if(a(c),(h=c.children)&&(l=h.length))for(var l,h;0<=--l;)e.push(h[l])}
function Na(c,a){for(var e=[c],l=[];null!=(c=e.pop());)if(l.push(c),(b=c.children)&&(n=b.length))for(var h=-1,n,b;++h<n;)e.push(b[h]);for(;null!=(c=l.pop());)a(c)}function mh(c){return c.children}function nh(c){return c.value}function oh(c,a){return a.value-c.value}function lh(c){return w.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function ph(c){return c.x}function qh(c){return c.y}function rh(c,a,e){c.y0=a;c.y=e}function rd(c){return w.range(c.length)}
function sd(c){var a=-1;c=c[0].length;for(var e=[];++a<c;)e[a]=0;return e}function sh(c){for(var a=1,e=0,l=c[0][1],h,n=c.length;a<n;++a)(h=c[a][1])>l&&(e=a,l=h);return e}function th(c){return c.reduce(uh,0)}function uh(c,a){return c+a[1]}function vh(c,a){return kf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function kf(c,a){for(var e=-1,l=+c[0],h=(c[1]-l)/a,n=[];++e<=a;)n[e]=h*e+l;return n}function wh(c){return[w.min(c),w.max(c)]}function xh(c,a){return c.value-a.value}function td(c,a){var e=c._pack_next;
c._pack_next=a;a._pack_prev=c;a._pack_next=e;e._pack_prev=a}function lf(c,a){c._pack_next=a;a._pack_prev=c}function mf(c,a){var e=a.x-c.x,l=a.y-c.y,h=c.r+a.r;return.999*h*h>e*e+l*l}function nf(c){function a(c){l=Math.min(c.x-c.r,l);h=Math.max(c.x+c.r,h);n=Math.min(c.y-c.r,n);b=Math.max(c.y+c.r,b)}if((e=c.children)&&(q=e.length)){var e,l=Infinity,h=-Infinity,n=Infinity,b=-Infinity,x,m,f,k,g,p,q;e.forEach(yh);x=e[0];x.x=-x.r;x.y=0;a(x);if(1<q&&(m=e[1],m.x=m.r,m.y=0,a(m),2<q))for(f=e[2],of(x,m,f),a(f),
td(x,f),x._pack_prev=f,td(f,m),m=x._pack_next,k=3;k<q;k++){of(x,m,f=e[k]);var r=0,t=1,z=1;for(g=m._pack_next;g!==m;g=g._pack_next,t++)if(mf(g,f)){r=1;break}if(1==r)for(p=x._pack_prev;p!==g._pack_prev&&!mf(p,f);p=p._pack_prev,z++);r?(t<z||t==z&&m.r<x.r?lf(x,m=g):lf(x=p,m),k--):(td(x,f),m=f,a(f))}x=(l+h)/2;m=(n+b)/2;for(k=g=0;k<q;k++)f=e[k],f.x-=x,f.y-=m,g=Math.max(g,f.r+Math.sqrt(f.x*f.x+f.y*f.y));c.r=g;e.forEach(zh)}}function yh(c){c._pack_next=c._pack_prev=c}function zh(c){delete c._pack_next;delete c._pack_prev}
function pf(c,a,e,l){var h=c.children;c.x=a+=l*c.x;c.y=e+=l*c.y;c.r*=l;if(h){c=-1;for(var n=h.length;++c<n;)pf(h[c],a,e,l)}}function of(c,a,e){var l=c.r+e.r,h=a.x-c.x,n=a.y-c.y;if(l&&(h||n)){var b=a.r+e.r,x=h*h+n*n,b=b*b,l=l*l;a=.5+(l-b)/(2*x);b=Math.sqrt(Math.max(0,2*b*(l+x)-(l-=x)*l-b*b))/(2*x);e.x=c.x+a*h+b*n;e.y=c.y+a*n-b*h}else e.x=c.x+l,e.y=c.y}function qf(c,a){return c.parent==a.parent?1:2}function ud(c){var a=c.children;return a.length?a[0]:c.t}function vd(c){var a=c.children,e;return(e=a.length)?
a[e-1]:c.t}function Ah(c){return 1+w.max(c,function(c){return c.y})}function Bh(c){return c.reduce(function(c,a){return c+a.x},0)/c.length}function rf(c){var a=c.children;return a&&a.length?rf(a[0]):c}function sf(c){var a=c.children,e;return a&&(e=a.length)?sf(a[e-1]):c}function wd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function tf(c,a){var e=c.x+a[3],l=c.y+a[0],h=c.dx-a[1]-a[3],n=c.dy-a[0]-a[2];0>h&&(e+=h/2,h=0);0>n&&(l+=n/2,n=0);return{x:e,y:l,dx:h,dy:n}}function Bb(c){var a=c[0];c=c[c.length-1];
return a<c?[a,c]:[c,a]}function pc(c){return c.rangeExtent?c.rangeExtent():Bb(c.range())}function Ch(c,a,e,l){var h=e(c[0],c[1]),n=l(a[0],a[1]);return function(c){return n(h(c))}}function qc(c,a){var e=0,l=c.length-1,h=c[e],n=c[l],b;n<h&&(b=e,e=l,l=b,b=h,h=n,n=b);c[e]=a.floor(h);c[l]=a.ceil(n);return c}function uf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Dh}function Eh(c,a,e,l){var h=[],n=[],b=0,x=Math.min(c.length,a.length)-1;c[x]<c[0]&&
(c=c.slice().reverse(),a=a.slice().reverse());for(;++b<=x;)h.push(e(c[b-1],c[b])),n.push(l(a[b-1],a[b]));return function(a){var e=w.bisect(c,a,1,x)-1;return n[e](h[e](a))}}function vf(c,a,e,l){function h(){var h=2<Math.min(c.length,a.length)?Eh:Ch,m=l?fh:eh;b=h(c,a,m,e);x=h(a,c,m,mb);return n}function n(c){return b(c)}var b,x;n.invert=function(c){return x(c)};n.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return h()};n.range=function(c){if(!arguments.length)return a;a=c;return h()};
n.rangeRound=function(c){return n.range(c).interpolate(df)};n.clamp=function(c){if(!arguments.length)return l;l=c;return h()};n.interpolate=function(c){if(!arguments.length)return e;e=c;return h()};n.ticks=function(a){return w.range.apply(w,cb(c,a))};n.tickFormat=function(a,e){return xd(c,a,e)};n.nice=function(a){qc(c,uf(cb(c,a)[2]));return h()};n.copy=function(){return vf(c,a,e,l)};return h()}function yd(c,a){return w.rebind(c,a,"range","rangeRound","interpolate","clamp")}function cb(c,a){null==
a&&(a=10);var e=Bb(c),l=e[1]-e[0],h=Math.pow(10,Math.floor(Math.log(l/a)/Math.LN10)),l=a/l*h;.15>=l?h*=10:.35>=l?h*=5:.75>=l&&(h*=2);e[0]=Math.ceil(e[0]/h)*h;e[1]=Math.floor(e[1]/h)*h+.5*h;e[2]=h;return e}function xd(c,a,e){c=cb(c,a);if(e){a=ee.exec(e);a.shift();if("s"===a[8]){var l=w.formatPrefix(Math.max(ma(c[0]),ma(c[1])));a[7]||(a[7]="."+rc(l.scale(c[2])));a[8]="f";e=w.format(a.join(""));return function(c){return e(l.scale(c))+l.symbol}}a[7]||(a[7]="."+Fh(a[8],c));e=a.join("")}else e=",."+rc(c[2])+
"f";return w.format(e)}function rc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Fh(c,a){var e=rc(a[2]);return c in Gh?Math.abs(e-rc(Math.max(ma(a[0]),ma(a[1]))))+ +("e"!==c):e-2*("%"===c)}function wf(c,a,e,l){function h(c){return(e?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function n(c){return e?Math.pow(a,c):-Math.pow(a,-c)}function b(a){return c(h(a))}b.invert=function(a){return n(c.invert(a))};b.domain=function(a){if(!arguments.length)return l;e=0<=a[0];c.domain((l=a.map(Number)).map(h));
return b};b.base=function(e){if(!arguments.length)return a;a=+e;c.domain(l.map(h));return b};b.nice=function(){var a=qc(l.map(h),e?Math:Hh);c.domain(a);l=a.map(n);return b};b.ticks=function(){var c=Bb(l),b=[],m=c[0],c=c[1],f=Math.floor(h(m)),k=Math.ceil(h(c)),g=a%1?2:a;if(isFinite(k-f)){if(e){for(;f<k;f++)for(var p=1;p<g;p++)b.push(n(f)*p);b.push(n(f))}else for(b.push(n(f));f++<k;)for(p=g-1;0<p;p--)b.push(n(f)*p);for(f=0;b[f]<m;f++);for(k=b.length;b[k-1]>c;k--);b=b.slice(f,k)}return b};b.tickFormat=
function(c,a){if(!arguments.length)return xf;2>arguments.length?a=xf:"function"!==typeof a&&(a=w.format(a));var u=Math.max(.1,c/b.ticks().length),l=e?(m=1E-12,Math.ceil):(m=-1E-12,Math.floor),m;return function(c){return c/n(l(h(c)+m))<=u?a(c):""}};b.copy=function(){return wf(c.copy(),a,e,l)};return yd(b,c)}function yf(c,a,e){function l(a){return c(h(a))}var h=sc(a),b=sc(1/a);l.invert=function(a){return b(c.invert(a))};l.domain=function(a){if(!arguments.length)return e;c.domain((e=a.map(Number)).map(h));
return l};l.ticks=function(c){return w.range.apply(w,cb(e,c))};l.tickFormat=function(c,a){return xd(e,c,a)};l.nice=function(c){return l.domain(qc(e,uf(cb(e,c)[2])))};l.exponent=function(m){if(!arguments.length)return a;h=sc(a=m);b=sc(1/a);c.domain(e.map(h));return l};l.copy=function(){return yf(c.copy(),a,e)};return yd(l,c)}function sc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function zf(c,a){function e(e){return b[((h.get(e)||("range"===a.t?h.set(e,c.push(e)):NaN))-1)%b.length]}
function l(a,e){return w.range(c.length).map(function(c){return a+e*c})}var h,b,m;e.domain=function(l){if(!arguments.length)return c;c=[];h=new t;for(var b=-1,n=l.length,m;++b<n;)h.has(m=l[b])||h.set(m,c.push(m));return e[a.t].apply(e,a.a)};e.range=function(c){if(!arguments.length)return b;b=c;m=0;a={t:"range",a:arguments};return e};e.rangePoints=function(h,f){2>arguments.length&&(f=0);var k=h[0],g=h[1],p=(g-k)/(Math.max(1,c.length-1)+f);b=l(2>c.length?(k+g)/2:k+p*f/2,p);m=0;a={t:"rangePoints",a:arguments};
return e};e.rangeBands=function(h,f,k){2>arguments.length&&(f=0);3>arguments.length&&(k=f);var g=h[1]<h[0],p=h[g-0],q=(h[1-g]-p)/(c.length-f+2*k);b=l(p+q*k,q);g&&b.reverse();m=q*(1-f);a={t:"rangeBands",a:arguments};return e};e.rangeRoundBands=function(h,f,k){2>arguments.length&&(f=0);3>arguments.length&&(k=f);var g=h[1]<h[0],p=h[g-0],q=h[1-g],r=Math.floor((q-p)/(c.length-f+2*k));b=l(p+Math.round((q-p-(c.length-f)*r)/2),r);g&&b.reverse();m=Math.round(r*(1-f));a={t:"rangeRoundBands",a:arguments};return e};
e.rangeBand=function(){return m};e.rangeExtent=function(){return Bb(a.a[0])};e.copy=function(){return zf(c,a)};return e.domain(c)}function Af(c,a){function e(){var e=0,b=a.length;for(h=[];++e<b;)h[e-1]=w.quantile(c,e/b);return l}function l(c){if(!isNaN(c=+c))return a[w.bisect(h,c)]}var h;l.domain=function(a){if(!arguments.length)return c;c=a.filter(v).sort(J);return e()};l.range=function(c){if(!arguments.length)return a;a=c;return e()};l.quantiles=function(){return h};l.invertExtent=function(e){e=
a.indexOf(e);return 0>e?[NaN,NaN]:[0<e?h[e-1]:c[0],e<h.length?h[e]:c[c.length-1]]};l.copy=function(){return Af(c,a)};return e()}function Bf(c,a,e){function l(a){return e[Math.max(0,Math.min(m,Math.floor(n*(a-c))))]}function b(){n=e.length/(a-c);m=e.length-1;return l}var n,m;l.domain=function(e){if(!arguments.length)return[c,a];c=+e[0];a=+e[e.length-1];return b()};l.range=function(c){if(!arguments.length)return e;e=c;return b()};l.invertExtent=function(a){a=e.indexOf(a);a=0>a?NaN:a/n+c;return[a,a+
1/n]};l.copy=function(){return Bf(c,a,e)};return b()}function Cf(c,a){function e(e){if(e<=e)return a[w.bisect(c,e)]}e.domain=function(a){if(!arguments.length)return c;c=a;return e};e.range=function(c){if(!arguments.length)return a;a=c;return e};e.invertExtent=function(e){e=a.indexOf(e);return[c[e-1],c[e]]};e.copy=function(){return Cf(c,a)};return e}function Df(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(e){if(!arguments.length)return c;c=e.map(a);return a};a.ticks=function(a){return w.range.apply(w,
cb(c,a))};a.tickFormat=function(a,u){return xd(c,a,u)};a.copy=function(){return Df(c)};return a}function Ih(c){return c.innerRadius}function Jh(c){return c.outerRadius}function Ef(c){return c.startAngle}function Ff(c){return c.endAngle}function Gf(c){function a(u){function m(){f.push("M",n(c(k),x))}for(var f=[],k=[],g=-1,p=u.length,q,r=sa(e),ga=sa(l);++g<p;)b.call(this,q=u[g],g)?k.push([+r.call(this,q,g),+ga.call(this,q,g)]):k.length&&(m(),k=[]);k.length&&m();return f.length?f.join(""):null}var e=
wb,l=Ib,b=vb,n=Fa,m=n.key,x=.7;a.x=function(c){if(!arguments.length)return e;e=c;return a};a.y=function(c){if(!arguments.length)return l;l=c;return a};a.defined=function(c){if(!arguments.length)return b;b=c;return a};a.interpolate=function(c){if(!arguments.length)return m;m="function"===typeof c?n=c:(n=zd.get(c)||Fa).key;return a};a.tension=function(c){if(!arguments.length)return x;x=c;return a};return a}function Fa(c){return c.join("L")}function Ad(c){for(var a=0,e=c.length,l=c[0],b=[l[0],",",l[1]];++a<
e;)b.push("V",(l=c[a])[1],"H",l[0]);return b.join("")}function Bd(c){for(var a=0,e=c.length,l=c[0],b=[l[0],",",l[1]];++a<e;)b.push("H",(l=c[a])[0],"V",l[1]);return b.join("")}function tc(c,a){if(1>a.length||c.length!=a.length&&c.length!=a.length+2)return Fa(c);var e=c.length!=a.length,l="",b=c[0],n=c[1],m=a[0],x=m,f=1;e&&(l+="Q"+(n[0]-2*m[0]/3)+","+(n[1]-2*m[1]/3)+","+n[0]+","+n[1],b=c[1],f=2);if(1<a.length)for(x=a[1],n=c[f],f++,l+="C"+(b[0]+m[0])+","+(b[1]+m[1])+","+(n[0]-x[0])+","+(n[1]-x[1])+","+
n[0]+","+n[1],b=2;b<a.length;b++,f++)n=c[f],x=a[b],l+="S"+(n[0]-x[0])+","+(n[1]-x[1])+","+n[0]+","+n[1];e&&(e=c[f],l+="Q"+(n[0]+2*x[0]/3)+","+(n[1]+2*x[1]/3)+","+e[0]+","+e[1]);return l}function Cd(c,a){for(var e=[],l=(1-a)/2,b,n=c[0],m=c[1],x=1,f=c.length;++x<f;)b=n,n=m,m=c[x],e.push([l*(m[0]-b[0]),l*(m[1]-b[1])]);return e}function Hf(c){if(3>c.length)return Fa(c);var a=1,e=c.length,l=c[0],b=l[0],n=l[1],m=[b,b,b,(l=c[1])[0]],x=[n,n,n,l[1]],b=[b,",",n,"L",Ga(db,m),",",Ga(db,x)];for(c.push(c[e-1]);++a<=
e;)l=c[a],m.shift(),m.push(l[0]),x.shift(),x.push(l[1]),Dd(b,m,x);c.pop();b.push("L",l);return b.join("")}function Ga(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Dd(c,a,e){c.push("C",Ga(If,a),",",Ga(If,e),",",Ga(Jf,a),",",Ga(Jf,e),",",Ga(db,a),",",Ga(db,e))}function Ed(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Kf(c){for(var a,e=-1,l=c.length,b,n;++e<l;)a=c[e],b=a[0],n=a[1]+nb,a[0]=b*Math.cos(n),a[1]=b*Math.sin(n);return c}function Lf(c){function a(u){function f(){q.push("M",x(c(t),
p),g,k(c(r.reverse()),p),"Z")}for(var q=[],r=[],t=[],X=-1,z=u.length,y,Q=sa(e),C=sa(b),w=e===l?function(){return F}:sa(l),H=b===n?function(){return v}:sa(n),F,v;++X<z;)m.call(this,y=u[X],X)?(r.push([F=+Q.call(this,y,X),v=+C.call(this,y,X)]),t.push([+w.call(this,y,X),+H.call(this,y,X)])):r.length&&(f(),r=[],t=[]);r.length&&f();return q.length?q.join(""):null}var e=wb,l=wb,b=0,n=Ib,m=vb,x=Fa,f=x.key,k=x,g="L",p=.7;a.x=function(c){if(!arguments.length)return l;e=l=c;return a};a.x0=function(c){if(!arguments.length)return e;
e=c;return a};a.x1=function(c){if(!arguments.length)return l;l=c;return a};a.y=function(c){if(!arguments.length)return n;b=n=c;return a};a.y0=function(c){if(!arguments.length)return b;b=c;return a};a.y1=function(c){if(!arguments.length)return n;n=c;return a};a.defined=function(c){if(!arguments.length)return m;m=c;return a};a.interpolate=function(c){if(!arguments.length)return f;f="function"===typeof c?x=c:(x=zd.get(c)||Fa).key;k=x.reverse||x;g=x.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return p;
p=c;return a};return a}function Kh(c){return c.radius}function Mf(c){return[c.x,c.y]}function Lh(c){return function(){var a=c.apply(this,arguments),e=a[0],a=a[1]+nb;return[e*Math.cos(a),e*Math.sin(a)]}}function Mh(){return 64}function Nh(){return"circle"}function Nf(c){c=Math.sqrt(c/la);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Qb(c,a){Sb(c,va);c.id=a;return c}function Fd(c,a,e,l){var b=c.id;return U(c,"function"===typeof e?function(c,m,x){c.__transition__[b].tween.set(a,
l(e.call(c,c.__data__,m,x)))}:(e=l(e),function(c){c.__transition__[b].tween.set(a,e)}))}function Oh(c){null==c&&(c="");return function(){this.textContent=c}}function uc(c,a,e,l){var b=c.__transition__||(c.__transition__={active:0,count:0}),n=b[e];if(!n){var m=l.time,n=b[e]={tween:new t,time:m,ease:l.ease,delay:l.delay,duration:l.duration};++b.count;w.timer(function(l){function f(l){if(b.active>e)return g();b.active=e;n.event&&n.event.start.call(c,p,a);n.tween.forEach(function(e,l){(l=l.call(c,p,a))&&
y.push(l)});w.timer(function(){z.c=k(l||1)?vb:k;return 1},0,m)}function k(l){if(b.active!==e)return g();l/=t;for(var m=q(l),x=y.length;0<x;)y[--x].call(c,m);if(1<=l)return n.event&&n.event.end.call(c,p,a),g()}function g(){--b.count?delete b[e]:delete c.__transition__;return 1}var p=c.__data__,q=n.ease,r=n.delay,t=n.duration,z=Sa,y=[];z.t=r+m;if(r<=l)return f(l-r);z.c=f},0,m)}}function Of(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Pf(c,a){c.attr("transform",function(c){return"translate(0,"+
a(c)+")"})}function Gd(c){return c.toISOString()}function Hd(c,a,e){function l(a){return c(a)}function b(c,e){var l=(c[1]-c[0])/e,h=w.bisect(vc,l);return h==vc.length?[a.year,cb(c.map(function(c){return c/31536E6}),e)[2]]:h?a[l/vc[h-1]<vc[h]/l?h-1:h]:[Ph,cb(c,e)[2]]}l.invert=function(a){return ob(c.invert(a))};l.domain=function(a){if(!arguments.length)return c.domain().map(ob);c.domain(a);return l};l.nice=function(c,a){function e(l){return!isNaN(l)&&!c.range(l,ob(+l+1),a).length}var u=l.domain(),
m=Bb(u);if(m=null==c?b(m,10):"number"===typeof c&&b(m,c))c=m[0],a=m[1];return l.domain(qc(u,1<a?{floor:function(a){for(;e(a=c.floor(a));)a=ob(a-1);return a},ceil:function(a){for(;e(a=c.ceil(a));)a=ob(+a+1);return a}}:c))};l.ticks=function(c,a){var e=Bb(l.domain()),u=null==c?b(e,10):"number"===typeof c?b(e,c):!c.range&&[{range:c},a];u&&(c=u[0],a=u[1]);return c.range(e[0],ob(+e[1]+1),1>a?1:a)};l.tickFormat=function(){return e};l.copy=function(){return Hd(c.copy(),a,e)};return yd(l,c)}function ob(c){return new Date(c)}
function Qh(c){return JSON.parse(c.responseText)}function Rh(c){var a=La.createRange();a.selectNode(La.body);return a.createContextualFragment(c.responseText)}var w={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Qf=[].slice,Xa=function(c){return Qf.call(c)},La=document,Ra=La.documentElement,za=window;try{Xa(Ra.childNodes)[0].nodeType}catch(c){Xa=function(c){for(var a=c.length,l=Array(a);a--;)l[a]=c[a];return l}}try{La.createElement("div").style.setProperty("opacity",0,"")}catch(c){var wc=
za.Element.prototype,Sh=wc.setAttribute,Th=wc.setAttributeNS,Rf=za.CSSStyleDeclaration.prototype,Uh=Rf.setProperty;wc.setAttribute=function(c,a){Sh.call(this,c,a+"")};wc.setAttributeNS=function(c,a,l){Th.call(this,c,a,l+"")};Rf.setProperty=function(c,a,l){Uh.call(this,c,a+"",l)}}w.ascending=J;w.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};w.min=function(c,a){var e=-1,l=c.length,b,n;if(1===arguments.length){for(;++e<l&&!(null!=(b=c[e])&&b<=b);)b=void 0;for(;++e<l;)null!=(n=c[e])&&b>n&&
(b=n)}else{for(;++e<l&&!(null!=(b=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=(n=a.call(c,c[e],e))&&b>n&&(b=n)}return b};w.max=function(c,a){var e=-1,l=c.length,b,n;if(1===arguments.length){for(;++e<l&&!(null!=(b=c[e])&&b<=b);)b=void 0;for(;++e<l;)null!=(n=c[e])&&n>b&&(b=n)}else{for(;++e<l&&!(null!=(b=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=(n=a.call(c,c[e],e))&&n>b&&(b=n)}return b};w.extent=function(c,a){var e=-1,l=c.length,b,n,m;if(1===arguments.length){for(;++e<l&&!(null!=
(b=m=c[e])&&b<=b);)b=m=void 0;for(;++e<l;)null!=(n=c[e])&&(b>n&&(b=n),m<n&&(m=n))}else{for(;++e<l&&!(null!=(b=m=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=(n=a.call(c,c[e],e))&&(b>n&&(b=n),m<n&&(m=n))}return[b,m]};w.sum=function(c,a){var e=0,b=c.length,h,n=-1;if(1===arguments.length)for(;++n<b;)isNaN(h=+c[n])||(e+=h);else for(;++n<b;)isNaN(h=+a.call(c,c[n],n))||(e+=h);return e};w.mean=function(c,a){var e=0,b=c.length,h,n=-1,m=b;if(1===arguments.length)for(;++n<b;)v(h=c[n])?e+=h:--m;else for(;++n<
b;)v(h=a.call(c,c[n],n))?e+=h:--m;return m?e/m:void 0};w.quantile=function(c,a){var e=(c.length-1)*a+1,b=Math.floor(e),h=+c[b-1];return(e-=b)?h+e*(c[b]-h):h};w.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(v);return c.length?w.quantile(c.sort(J),.5):void 0};var Sf=a(J);w.bisectLeft=Sf.left;w.bisect=w.bisectRight=Sf.right;w.bisector=function(c){return a(1===c.length?function(a,e){return J(c(a),e)}:c)};w.shuffle=function(c){for(var a=c.length,e,b;a;)b=Math.random()*a--|0,e=c[a],c[a]=
c[b],c[b]=e;return c};w.permute=function(c,a){for(var e=a.length,b=Array(e);e--;)b[e]=c[a[e]];return b};w.pairs=function(c){for(var a=0,e=c.length-1,b=c[0],h=Array(0>e?0:e);a<e;)h[a]=[b,b=c[++a]];return h};w.zip=function(){if(!(h=arguments.length))return[];for(var c=-1,a=w.min(arguments,b),e=Array(a);++c<a;)for(var l=-1,h,n=e[c]=Array(h);++l<h;)n[l]=arguments[l][c];return e};w.transpose=function(c){return w.zip.apply(w,c)};w.keys=function(c){var a=[],e;for(e in c)a.push(e);return a};w.values=function(c){var a=
[],e;for(e in c)a.push(c[e]);return a};w.entries=function(c){var a=[],e;for(e in c)a.push({key:e,value:c[e]});return a};w.merge=function(c){var a=c.length,e;e=-1;for(var b=0,h,n;++e<a;)b+=c[e].length;for(h=Array(b);0<=--a;)for(n=c[a],e=n.length;0<=--e;)h[--b]=n[e];return h};var ma=Math.abs;w.range=function(c,a,e){3>arguments.length&&(e=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/e)throw Error("infinite range");var b=[],h;h=ma(e);for(var n=1;h*n%1;)n*=10;h=n;var n=-1,m;c*=h;a*=h;e*=h;if(0>
e)for(;(m=c+e*++n)>a;)b.push(m/h);else for(;(m=c+e*++n)<a;)b.push(m/h);return b};w.map=function(c){var a=new t;if(c instanceof t)c.forEach(function(c,e){a.set(c,e)});else for(var e in c)a.set(e,c[e]);return a};k(t,{has:p,get:function(c){return this[eb+c]},set:function(c,a){return this[eb+c]=a},remove:function(c){c=eb+c;return c in this&&delete this[c]},keys:f,values:function(){var c=[];this.forEach(function(a,e){c.push(e)});return c},entries:function(){var c=[];this.forEach(function(a,e){c.push({key:a,
value:e})});return c},size:g,empty:r,forEach:function(c){for(var a in this)a.charCodeAt(0)===Rb&&c.call(this,a.substring(1),this[a])}});var eb="\x00",Rb=eb.charCodeAt(0);w.nest=function(){function c(a,u,h){if(h>=b.length)return m?m.call(e,u):n?u.sort(n):u;for(var f=-1,k=u.length,g=b[h++],p,q,r=new t,z;++f<k;)(z=r.get(p=g(q=u[f])))?z.push(q):r.set(p,[q]);a?(q=a(),u=function(e,b){q.set(e,c(a,b,h))}):(q={},u=function(e,b){q[e]=c(a,b,h)});r.forEach(u);return q}function a(c,e){if(e>=b.length)return c;
var n=[],m=h[e++];c.forEach(function(c,b){n.push({key:c,values:a(b,e)})});return m?n.sort(function(c,a){return m(c.key,a.key)}):n}var e={},b=[],h=[],n,m;e.map=function(a,e){return c(e,a,0)};e.entries=function(e){return a(c(w.map,e,0),0)};e.key=function(c){b.push(c);return e};e.sortKeys=function(c){h[b.length-1]=c;return e};e.sortValues=function(c){n=c;return e};e.rollup=function(c){m=c;return e};return e};w.set=function(c){var a=new q;if(c)for(var e=0,b=c.length;e<b;++e)a.add(c[e]);return a};k(q,
{has:p,add:function(c){this[eb+c]=!0;return c},remove:function(c){c=eb+c;return c in this&&delete this[c]},values:f,size:g,empty:r,forEach:function(c){for(var a in this)a.charCodeAt(0)===Rb&&c.call(this,a.substring(1))}});w.behavior={};w.rebind=function(c,a){for(var e=1,b=arguments.length,h;++e<b;)c[h=arguments[e]]=I(c,a,a[h]);return c};var Rd="webkit ms moz Moz o O".split(" ");w.dispatch=function(){for(var c=new E,a=-1,e=arguments.length;++a<e;)c[arguments[a]]=D(c);return c};E.prototype.on=function(c,
a){var e=c.indexOf("."),b="";0<=e&&(b=c.substring(e+1),c=c.substring(0,e));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,null);return this}};w.event=null;w.requote=function(c){return c.replace(Vh,"\\$&")};var Vh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sb={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var e in a)c[e]=a[e]},Lc=function(c,a){return a.querySelector(c)},Mc=function(c,a){return a.querySelectorAll(c)},
Wh=Ra.matches||Ra[B(Ra,"matchesSelector")],Sd=function(c,a){return Wh.call(c,a)};"function"===typeof Sizzle&&(Lc=function(c,a){return Sizzle(c,a)[0]||null},Mc=Sizzle,Sd=Sizzle.matchesSelector);w.selection=function(){return Tf};var pa=w.selection.prototype=[];pa.select=function(c){var a=[],e,b,h,n;c=N(c);for(var m=-1,x=this.length;++m<x;){a.push(e=[]);e.parentNode=(h=this[m]).parentNode;for(var f=-1,k=h.length;++f<k;)(n=h[f])?(e.push(b=c.call(n,n.__data__,f,m)),b&&"__data__"in n&&(b.__data__=n.__data__)):
e.push(null)}return P(a)};pa.selectAll=function(c){var a=[],e,b;c=G(c);for(var h=-1,n=this.length;++h<n;)for(var m=this[h],x=-1,f=m.length;++x<f;)if(b=m[x])a.push(e=Xa(c.call(b,b.__data__,x,h))),e.parentNode=b;return P(a)};var Id={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:Id,qualify:function(c){var a=c.indexOf(":"),e=c;0<=a&&(e=c.substring(0,
a),c=c.substring(a+1));return Id.hasOwnProperty(e)?{space:Id[e],local:c}:c}};pa.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node();c=w.ns.qualify(c);return c.local?e.getAttributeNS(c.space,c.local):e.getAttribute(c)}for(a in c)this.each(T(a,c[a]));return this}return this.each(T(c,a))};pa.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,h=-1;if(a=e.classList)for(;++h<b;){if(!a.contains(c[h]))return!1}else for(a=
e.getAttribute("class");++h<b;)if(!M(c[h]).test(a))return!1;return!0}for(a in c)this.each(R(a,c[a]));return this}return this.each(R(c,a))};pa.style=function(c,a,e){var b=arguments.length;if(3>b){if("string"!==typeof c){2>b&&(a="");for(e in c)this.each(F(e,c[e],a));return this}if(2>b)return za.getComputedStyle(this.node(),null).getPropertyValue(c);e=""}return this.each(F(c,a,e))};pa.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(K(a,
c[a]));return this}return this.each(K(c,a))};pa.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=""}:function(){this.textContent=c}):this.node().textContent};pa.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):
this.node().innerHTML};pa.append=function(c){c=z(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};pa.insert=function(c,a){c=z(c);a=N(a);return this.select(function(){return this.insertBefore(c.apply(this,arguments),a.apply(this,arguments)||null)})};pa.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};pa.data=function(c,a){function e(c,e){var b,l=c.length,h=e.length,n=Math.min(l,h),m=Array(h),p=Array(h),q=Array(l),r,z;
if(a){var n=new t,y=new t,Q=[],C;for(b=-1;++b<l;)C=a.call(r=c[b],r.__data__,b),n.has(C)?q[b]=r:n.set(C,r),Q.push(C);for(b=-1;++b<h;)C=a.call(e,z=e[b],b),(r=n.get(C))?(m[b]=r,r.__data__=z):y.has(C)||(p[b]={__data__:z}),y.set(C,z),n.remove(C);for(b=-1;++b<l;)n.has(Q[b])&&(q[b]=c[b])}else{for(b=-1;++b<n;)r=c[b],z=e[b],r?(r.__data__=z,m[b]=r):p[b]={__data__:z};for(;b<h;++b)p[b]={__data__:e[b]};for(;b<l;++b)q[b]=c[b]}p.update=m;p.parentNode=m.parentNode=q.parentNode=c.parentNode;f.push(p);k.push(m);g.push(q)}
var b=-1,h=this.length,n,m;if(!arguments.length){for(c=Array(h=(n=this[0]).length);++b<h;)if(m=n[b])c[b]=m.__data__;return c}var f=H([]),k=P([]),g=P([]);if("function"===typeof c)for(;++b<h;)e(n=this[b],c.call(n,n.parentNode.__data__,b));else for(;++b<h;)e(n=this[b],c);k.enter=function(){return f};k.exit=function(){return g};return k};pa.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};pa.filter=function(c){var a=[],e,b,h;"function"!==typeof c&&(c=V(c));
for(var n=0,m=this.length;n<m;n++){a.push(e=[]);e.parentNode=(b=this[n]).parentNode;for(var f=0,k=b.length;f<k;f++)(h=b[f])&&c.call(h,h.__data__,f,n)&&e.push(h)}return P(a)};pa.order=function(){for(var c=-1,a=this.length;++c<a;)for(var e=this[c],b=e.length-1,h=e[b],n;0<=--b;)if(n=e[b])h&&h!==n.nextSibling&&h.parentNode.insertBefore(n,h),h=n;return this};pa.sort=function(c){c=O.apply(this,arguments);for(var a=-1,e=this.length;++a<e;)this[a].sort(c);return this.order()};pa.each=function(c){return U(this,
function(a,e,b){c.call(a,a.__data__,e,b)})};pa.call=function(c){var a=Xa(arguments);c.apply(a[0]=this,a);return this};pa.empty=function(){return!this.node()};pa.node=function(){for(var c=0,a=this.length;c<a;c++)for(var e=this[c],b=0,h=e.length;b<h;b++){var n=e[b];if(n)return n}return null};pa.size=function(){var c=0;this.each(function(){++c});return c};var Oa=[];w.selection.enter=H;w.selection.enter.prototype=Oa;Oa.append=pa.append;Oa.empty=pa.empty;Oa.node=pa.node;Oa.call=pa.call;Oa.size=pa.size;
Oa.select=function(c){for(var a=[],e,b,h,n,m,f=-1,k=this.length;++f<k;){h=(n=this[f]).update;a.push(e=[]);e.parentNode=n.parentNode;for(var g=-1,p=n.length;++g<p;)(m=n[g])?(e.push(h[g]=b=c.call(n.parentNode,m.__data__,g,f)),b.__data__=m.__data__):e.push(null)}return P(a)};Oa.insert=function(c,a){2>arguments.length&&(a=ba(this));return pa.insert.call(this,c,a)};pa.transition=function(){for(var c=pb||++Uf,a=[],e,b,h=xc||{time:Date.now(),ease:$g,delay:0,duration:250},n=-1,m=this.length;++n<m;){a.push(e=
[]);for(var f=this[n],k=-1,g=f.length;++k<g;)(b=f[k])&&uc(b,k,c,h),e.push(b)}return Qb(a,c)};pa.interrupt=function(){return this.each(W)};w.select=function(c){c=["string"===typeof c?Lc(c,La):c];c.parentNode=Ra;return P([c])};w.selectAll=function(c){c=Xa("string"===typeof c?Mc(c,La):c);c.parentNode=Ra;return P([c])};var Tf=w.select(Ra);pa.on=function(c,a,e){var b=arguments.length;if(3>b){if("string"!==typeof c){2>b&&(a=!1);for(e in c)this.each(m(e,c[e],a));return this}if(2>b)return(b=this.node()["__on"+
c])&&b._;e=!1}return this.each(m(c,a,e))};var Nc=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});Nc.forEach(function(c){"on"+c in La&&Nc.remove(c)});var Db="onselectstart"in La?null:B(Ra.style,"userSelect"),kg=0;w.mouse=function(c){return ia(c,S())};var Oc=/WebKit/.test(za.navigator.userAgent)?-1:0;w.touches=function(c,a){2>arguments.length&&(a=S().touches);return a?Xa(a).map(function(a){var b=ia(c,a);b.identifier=a.identifier;return b}):[]};w.behavior.drag=function(){function c(){this.on("mousedown.drag",
h).on("touchstart.drag",n)}function a(c,h,n,u,m){return function(){var a=w.event.target,f=this.parentNode,k=e.of(this,arguments),g=0,p=c(),q=".drag"+(null==p?"":"-"+p),r,t=w.select(n()).on(u+q,function(){var c=h(f,p),a,e;c&&(a=c[0]-y[0],e=c[1]-y[1],g|=a|e,y=c,k({type:"drag",x:c[0]+r[0],y:c[1]+r[1],dx:a,dy:e}))}).on(m+q,function(){h(f,p)&&(t.on(u+q,null).on(m+q,null),z(g&&w.event.target===a),k({type:"dragend"}))}),z=qa(),y=h(f,p);b?(r=b.apply(this,arguments),r=[r.x-y[0],r.y-y[1]]):r=[0,0];k({type:"dragstart"})}}
var e=C(c,"drag","dragstart","dragend"),b=null,h=a(A,w.mouse,ja,"mousemove","mouseup"),n=a(Y,w.touch,fa,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return b;b=a;return c};return w.rebind(c,e,"on")};var la=Math.PI,Ea=2*la,xa=la/2,ka=la/180,ta=180/la,yc=Math.SQRT2;w.interpolateZoom=function(c,a){function e(c){var a=c*z;if(t){c=ha(r);var e,u=yc*a+r;e=((u=Math.exp(2*u))-1)/(u+1);var m=r,u=((m=Math.exp(m))-1/m)/2;e=n/(2*p)*(c*e-u);return[b+e*f,h+e*k,n*c/ha(yc*a+r)]}return[b+c*f,h+
c*k,n*Math.exp(yc*a)]}var b=c[0],h=c[1],n=c[2],m=a[2],f=a[0]-b,k=a[1]-h,g=f*f+k*k,p=Math.sqrt(g),q=(m*m-n*n+4*g)/(4*n*p),g=(m*m-n*n-4*g)/(4*m*p),r=Math.log(Math.sqrt(q*q+1)-q),t=Math.log(Math.sqrt(g*g+1)-g)-r,z=(t||Math.log(m/n))/yc;e.duration=1E3*z;return e};w.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",k).on(Xh+".zoom",p).on("mousemove.zoom",q).on("dblclick.zoom",r).on("touchstart.zoom",g)}function a(c){return[(c[0]-t.x)/t.k,(c[1]-t.y)/t.k]}function e(c){t.k=Math.max(H[0],Math.min(H[1],
c))}function b(c,a){a=[a[0]*t.k+t.x,a[1]*t.k+t.y];t.x+=c[0]-a[0];t.y+=c[1]-a[1]}function h(){V&&V.domain(O.range().map(function(c){return(c-t.x)/t.k}).map(O.invert));G&&G.domain(U.range().map(function(c){return(c-t.y)/t.k}).map(U.invert))}function n(c){c({type:"zoomstart"})}function m(c){h();c({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function f(c){c({type:"zoomend"})}function k(){var c=this,e=w.event.target,h=K.of(c,arguments),g=0,p=w.select(za).on("mousemove.zoom",function(){g=1;b(w.mouse(c),
t);m(h)}).on("mouseup.zoom",function(){p.on("mousemove.zoom",za===c?q:null).on("mouseup.zoom",null);r(g&&w.event.target===e);f(h)}),t=a(w.mouse(c)),r=qa();W.call(c);n(h)}function g(){function c(){var e=w.touches(r);C=t.k;e.forEach(function(c){c.identifier in y&&(y[c.identifier]=a(c))});return e}function h(){var a=w.event.target;w.select(a).on(F,p).on(O,q);V.push(a);for(var a=w.event.changedTouches,n=0,u=a.length;n<u;++n)y[a[n].identifier]=null;u=c();n=Date.now();1===u.length?(500>n-v&&(a=u[0],u=y[a.identifier],
e(2*t.k),b(a,u),L(),m(z)),v=n):1<u.length&&(a=u[0],u=u[1],n=a[0]-u[0],a=a[1]-u[1],Q=n*n+a*a)}function p(){for(var c=w.touches(r),a,h,n,u,f=0,x=c.length;f<x;++f,u=null)if(n=c[f],u=y[n.identifier]){if(h)break;a=n;h=u}if(u){var k=(k=n[0]-a[0])*k+(k=n[1]-a[1])*k,c=Q&&Math.sqrt(k/Q);a=[(a[0]+n[0])/2,(a[1]+n[1])/2];h=[(h[0]+u[0])/2,(h[1]+u[1])/2];e(c*C)}v=null;b(a,h);m(z)}function q(){if(w.event.touches.length){for(var a=w.event.changedTouches,e=0,b=a.length;e<b;++e)delete y[a[e].identifier];for(var l in y)return void c()}w.selectAll(V).on(H,
null);U.on("mousedown.zoom",k).on("touchstart.zoom",g);G();f(z)}var r=this,z=K.of(r,arguments),y={},Q=0,C,H=".zoom-"+w.event.changedTouches[0].identifier,F="touchmove"+H,O="touchend"+H,V=[],U=w.select(r).on("mousedown.zoom",null).on("touchstart.zoom",h),G=qa();W.call(r);h();n(z)}function p(){var c=K.of(this,arguments);F?clearTimeout(F):(W.call(this),n(c));F=setTimeout(function(){F=null;f(c)},50);L();var h=y||w.mouse(this);z||(z=a(h));e(Math.pow(2,.002*zc())*t.k);b(h,z);m(c)}function q(){z=null}function r(){var c=
K.of(this,arguments),h=w.mouse(this),k=a(h),g=Math.log(t.k)/Math.LN2;n(c);e(Math.pow(2,w.event.shiftKey?Math.ceil(g)-1:Math.floor(g)+1));b(h,k);m(c);f(c)}var t={x:0,y:0,k:1},z,y,Q=[960,500],H=Vf,F,v,K=C(c,"zoomstart","zoom","zoomend"),O,V,U,G;c.event=function(c){c.each(function(){var c=K.of(this,arguments),a=t;pb?w.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};n(c)}).tween("zoom:zoom",function(){var e=Q[0],b=e/2,l=Q[1]/2,h=w.interpolateZoom([(b-t.x)/t.k,(l-
t.y)/t.k,e/t.k],[(b-a.x)/a.k,(l-a.y)/a.k,e/a.k]);return function(a){a=h(a);var n=e/a[2];this.__chart__=t={x:b-a[0]*n,y:l-a[1]*n,k:n};m(c)}}).each("end.zoom",function(){f(c)}):(this.__chart__=t,n(c),m(c),f(c))})};c.translate=function(a){if(!arguments.length)return[t.x,t.y];t={x:+a[0],y:+a[1],k:t.k};h();return c};c.scale=function(a){if(!arguments.length)return t.k;t={x:t.x,y:t.y,k:+a};h();return c};c.scaleExtent=function(a){if(!arguments.length)return H;H=null==a?Vf:[+a[0],+a[1]];return c};c.center=
function(a){if(!arguments.length)return y;y=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return Q;Q=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return V;V=a;O=a.copy();t={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return G;G=a;U=a.copy();t={x:0,y:0,k:1};return c};return w.rebind(c,K,"on")};var Vf=[0,Infinity],zc,Xh="onwheel"in La?(zc=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in La?(zc=function(){return w.event.wheelDelta},
"mousewheel"):(zc=function(){return-w.event.detail},"MozMousePixelScroll");w.color=ra;ra.prototype.toString=function(){return this.rgb()+""};w.hsl=Aa;var Jd=Aa.prototype=new ra;Jd.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);return new Aa(this.h,this.s,this.l/c)};Jd.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Aa(this.h,this.s,c*this.l)};Jd.rgb=function(){return qb(this.h,this.s,this.l)};w.hcl=Ha;var Kd=Ha.prototype=new ra;Kd.brighter=function(c){return new Ha(this.h,
this.c,Math.min(100,this.l+Ac*(arguments.length?c:1)))};Kd.darker=function(c){return new Ha(this.h,this.c,Math.max(0,this.l-Ac*(arguments.length?c:1)))};Kd.rgb=function(){return Pc(this.h,this.c,this.l).rgb()};w.lab=Ia;var Ac=18,Zd=.95047,$d=1,ae=1.08883,Ld=Ia.prototype=new ra;Ld.brighter=function(c){return new Ia(Math.min(100,this.l+Ac*(arguments.length?c:1)),this.a,this.b)};Ld.darker=function(c){return new Ia(Math.max(0,this.l-Ac*(arguments.length?c:1)),this.a,this.b)};Ld.rgb=function(){return Yd(this.l,
this.a,this.b)};w.rgb=Ba;var Bc=Ba.prototype=new ra;Bc.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);var a=this.r,e=this.g,b=this.b;if(!a&&!e&&!b)return new Ba(30,30,30);a&&30>a&&(a=30);e&&30>e&&(e=30);b&&30>b&&(b=30);return new Ba(Math.min(255,a/c),Math.min(255,e/c),Math.min(255,b/c))};Bc.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ba(c*this.r,c*this.g,c*this.b)};Bc.hsl=function(){return Vd(this.r,this.g,this.b)};Bc.toString=function(){return"#"+rb(this.r)+rb(this.g)+
rb(this.b)};var Ub=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ub.forEach(function(c,a){Ub.set(c,new Ba(a>>16,a>>8&255,a&255))});w.functor=sa;w.xhr=Vc(wa);w.dsv=function(c,a){function e(c,e,n){3>arguments.length&&(n=e,e=null);var m=Vb(c,a,null==e?b:h(e),n);m.row=function(c){return arguments.length?m.response(null==(e=c)?b:h(c)):e};return m}function b(c){return e.parse(c.responseText)}function h(c){return function(a){return e.parse(a.responseText,
c)}}function n(a){return a.map(m).join(c)}function m(c){return f.test(c)?'"'+c.replace(/\"/g,'""')+'"':c}var f=new RegExp('["'+c+"\n]"),k=c.charCodeAt(0);e.parse=function(c,a){var b;return e.parseRows(c,function(c,e){if(b)return b(c,e-1);var l=new Function("d","return {"+c.map(function(c,a){return JSON.stringify(c)+": d["+a+"]"}).join(",")+"}");b=a?function(c,e){return a(l(c),e)}:l})};e.parseRows=function(c,a){function e(){if(u>=n)return l;if(x)return x=!1,b;var a=u;if(34===c.charCodeAt(a)){for(var h=
a;h++<n;)if(34===c.charCodeAt(h)){if(34!==c.charCodeAt(h+1))break;++h}u=h+2;var m=c.charCodeAt(h+1);13===m?(x=!0,10===c.charCodeAt(h+2)&&++u):10===m&&(x=!0);return c.substring(a+1,h).replace(/""/g,'"')}for(;u<n;){m=c.charCodeAt(u++);h=1;if(10===m)x=!0;else if(13===m)x=!0,10===c.charCodeAt(u)&&(++u,++h);else if(m!==k)continue;return c.substring(a,u-h)}return c.substring(a)}for(var b={},l={},h=[],n=c.length,u=0,m=0,f,x;(f=e())!==l;){for(var g=[];f!==b&&f!==l;)g.push(f),f=e();a&&!(g=a(g,m++))||h.push(g)}return h};
e.format=function(a){if(Array.isArray(a[0]))return e.formatRows(a);var b=new q,l=[];a.forEach(function(c){for(var a in c)b.has(a)||l.push(b.add(a))});return[l.map(m).join(c)].concat(a.map(function(a){return l.map(function(c){return m(a[c])}).join(c)})).join("\n")};e.formatRows=function(c){return c.map(n).join("\n")};return e};w.csv=w.dsv(",","text/csv");w.tsv=w.dsv("\t","text/tab-separated-values");w.touch=function(c,a,e){3>arguments.length&&(e=a,a=S().changedTouches);if(a)for(var b=0,h=a.length,
n;b<h;++b)if((n=a[b]).identifier===e)return ia(c,n)};var Yb,Zb,Xb,Wb,Sa,de=za[B(za,"requestAnimationFrame")]||function(c){setTimeout(c,17)};w.timer=function(c,a,e){var b=arguments.length;2>b&&(a=0);3>b&&(e=Date.now());b={c:c,t:e+a,f:!1,n:null};Zb?Zb.n=b:Yb=b;Zb=b;Xb||(Wb=clearTimeout(Wb),Xb=1,de(Wc))};w.timer.flush=function(){be();ce()};w.round=function(c,a){return a?Math.round(c*(a=Math.pow(10,a)))/a:Math.round(c)};var Yh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(c,a){var e=
Math.pow(10,3*ma(8-a));return{scale:8<a?function(c){return c/e}:function(c){return c*e},symbol:c}});w.formatPrefix=function(c,a){var e=0;c&&(0>c&&(c*=-1),a&&(c=w.round(c,Xc(c,a))),e=1+Math.floor(1E-12+Math.log(c)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3))));return Yh[8+e/3]};var ee=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ng=w.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},
x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,a){return c.toPrecision(a)},e:function(c,a){return c.toExponential(a)},f:function(c,a){return c.toFixed(a)},r:function(c,a){return(c=w.round(c,Xc(c,a))).toFixed(Math.max(0,Math.min(20,Xc(c*(1+1E-15),a))))}}),Z=w.time={},ya=Date;Ta.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Wa.setUTCDate.apply(this._,arguments)},setDay:function(){Wa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Wa.setUTCFullYear.apply(this._,
arguments)},setHours:function(){Wa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Wa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Wa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Wa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Wa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Wa.setTime.apply(this._,arguments)}};var Wa=Date.prototype;Z.year=fb(function(c){c=Z.day(c);c.setMonth(0,1);return c},function(c,a){c.setFullYear(c.getFullYear()+
a)},function(c){return c.getFullYear()});Z.years=Z.year.range;Z.years.utc=Z.year.utc.range;Z.day=fb(function(c){var a=new ya(2E3,0);a.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());return a},function(c,a){c.setDate(c.getDate()+a)},function(c){return c.getDate()-1});Z.days=Z.day.range;Z.days.utc=Z.day.utc.range;Z.dayOfYear=function(c){var a=Z.year(c);return Math.floor((c-a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(c,
a){a=7-a;var e=Z[c]=fb(function(c){(c=Z.day(c)).setDate(c.getDate()-(c.getDay()+a)%7);return c},function(c,a){c.setDate(c.getDate()+7*Math.floor(a))},function(c){var e=Z.year(c).getDay();return Math.floor((Z.dayOfYear(c)+(e+a)%7)/7)-(e!==a)});Z[c+"s"]=e.range;Z[c+"s"].utc=e.utc.range;Z[c+"OfYear"]=function(c){var e=Z.year(c).getDay();return Math.floor((Z.dayOfYear(c)+(e+a)%7)/7)}});Z.week=Z.sunday;Z.weeks=Z.sunday.range;Z.weeks.utc=Z.sunday.utc.range;Z.weekOfYear=Z.sundayOfYear;var fe={"-":"",_:" ",
0:"0"},ua=/^\s*\d+/,ie=/^%/;w.locale=function(c){return{numberFormat:mg(c),timeFormat:pg(c)}};var Wf=w.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
w.format=Wf.numberFormat;w.geo={};Yc.prototype={s:0,t:0,add:function(c){je(c,this.t,Cc);je(Cc.s,this.s,this);this.s?this.t+=Cc.t:this.s=Cc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cc=new Yc;w.geo.stream=function(c,a){if(c&&Xf.hasOwnProperty(c.type))Xf[c.type](c,a);else cc(c,a)};var Xf={Feature:function(c,a){cc(c.geometry,a)},FeatureCollection:function(c,a){for(var e=c.features,b=-1,h=e.length;++b<h;)cc(e[b].geometry,a)}},ke={Sphere:function(c,a){a.sphere()},Point:function(c,
a){c=c.coordinates;a.point(c[0],c[1],c[2])},MultiPoint:function(c,a){for(var e=c.coordinates,b=-1,h=e.length;++b<h;)c=e[b],a.point(c[0],c[1],c[2])},LineString:function(c,a){Zc(c.coordinates,a,0)},MultiLineString:function(c,a){for(var e=c.coordinates,b=-1,h=e.length;++b<h;)Zc(e[b],a,0)},Polygon:function(c,a){le(c.coordinates,a)},MultiPolygon:function(c,a){for(var e=c.coordinates,b=-1,h=e.length;++b<h;)le(e[b],a)},GeometryCollection:function(c,a){for(var e=c.geometries,b=-1,h=e.length;++b<h;)cc(e[b],
a)}};w.geo.area=function(a){Dc=0;w.geo.stream(a,Da);return Dc};var Dc,gb=new Yc,Da={sphere:function(){Dc+=4*la},point:A,lineStart:A,lineEnd:A,polygonStart:function(){gb.reset();Da.lineStart=Eg},polygonEnd:function(){var a=2*gb;Dc+=0>a?4*la+a:a;Da.lineStart=Da.lineEnd=Da.point=A}};w.geo.bounds=function(){function a(c,e){F.push(v=[p=c,r=c]);e<q&&(q=e);e>t&&(t=e)}function b(e,l){var h=hb([e*ka,l*ka]);if(C){var n=sb(C,h),n=sb([n[1],-n[0],0],n);fc(n);var n=gc(n),u=e-z,m=0<u?1:-1,k=n[0]*ta*m,u=180<ma(u);
u^(m*z<k&&k<m*e)?(n=n[1]*ta,n>t&&(t=n)):(k=(k+360)%360-180,u^(m*z<k&&k<m*e))?(n=-n[1]*ta,n<q&&(q=n)):(l<q&&(q=l),l>t&&(t=l));u?e<z?f(p,e)>f(p,r)&&(r=e):f(e,r)>f(p,r)&&(p=e):r>=p?(e<p&&(p=e),e>r&&(r=e)):e>z?f(p,e)>f(p,r)&&(r=e):f(e,r)>f(p,r)&&(p=e)}else a(e,l);C=h;z=e}function e(){K.point=b}function l(){v[0]=p;v[1]=r;K.point=a;C=null}function h(a,c){if(C){var e=a-z;H+=180<ma(e)?e+(0<e?360:-360):e}else y=a,Q=c;Da.point(a,c);b(a,c)}function n(){Da.lineStart()}function m(){h(y,Q);Da.lineEnd();1E-6<ma(H)&&
(p=-(r=180));v[0]=p;v[1]=r;C=null}function f(a,c){return 0>(c-=a)?c+360:c}function k(a,c){return a[0]-c[0]}function g(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var p,q,r,t,z,y,Q,C,H,F,v,K={point:a,lineStart:e,lineEnd:l,polygonStart:function(){K.point=h;K.lineStart=n;K.lineEnd=m;H=0;Da.polygonStart()},polygonEnd:function(){Da.polygonEnd();K.point=a;K.lineStart=e;K.lineEnd=l;0>gb?(p=-(r=180),q=-(t=90)):1E-6<H?t=90:-1E-6>H&&(q=-90);v[0]=p;v[1]=r}};return function(a){t=r=-(p=q=Infinity);
F=[];w.geo.stream(a,K);if(a=F.length){F.sort(k);for(var c=1,e=F[0],b,l=[e];c<a;++c)b=F[c],g(b[0],e)||g(b[1],e)?(f(e[0],b[1])>f(e[0],e[1])&&(e[1]=b[1]),f(b[0],e[1])>f(e[0],e[1])&&(e[0]=b[0])):l.push(e=b);var n=-Infinity,h;a=l.length-1;c=0;for(e=l[a];c<=a;e=b,++c)b=l[c],(h=f(e[1],b[0]))>n&&(n=h,p=b[0],r=e[1])}F=v=null;return Infinity===p||Infinity===q?[[NaN,NaN],[NaN,NaN]]:[[p,q],[r,t]]}}();w.geo.centroid=function(a){Fb=ic=ib=jb=Ua=Ya=Za=Ma=tb=ub=$a=0;w.geo.stream(a,Ja);a=tb;var b=ub,e=$a,l=a*a+b*b+
e*e;return 1E-12>l&&(a=Ya,b=Za,e=Ma,1E-6>ic&&(a=ib,b=jb,e=Ua),l=a*a+b*b+e*e,1E-12>l)?[NaN,NaN]:[Math.atan2(b,a)*ta,na(e/Math.sqrt(l))*ta]};var Fb,ic,ib,jb,Ua,Ya,Za,Ma,tb,ub,$a,Ja={sphere:A,point:ad,lineStart:me,lineEnd:ne,polygonStart:function(){Ja.lineStart=Fg},polygonEnd:function(){Ja.lineStart=me}},De=qe(vb,function(a){var b=NaN,e=NaN,l=NaN,h;return{lineStart:function(){a.lineStart();h=1},point:function(n,m){var f=0<n?la:-la,k=ma(n-b);if(1E-6>ma(k-la))a.point(b,e=0<(e+m)/2?xa:-xa),a.point(l,e),
a.lineEnd(),a.lineStart(),a.point(f,e),a.point(n,e),h=0;else if(l!==f&&k>=la){1E-6>ma(b-l)&&(b-=1E-6*l);1E-6>ma(n-f)&&(n-=1E-6*f);var k=b,g=e,p=n,q,r,t=Math.sin(k-p);e=1E-6<ma(t)?Math.atan((Math.sin(g)*(r=Math.cos(m))*Math.sin(p)-Math.sin(m)*(q=Math.cos(g))*Math.sin(k))/(q*r*t)):(g+m)/2;a.point(l,e);a.lineEnd();a.lineStart();a.point(f,e);h=0}a.point(b=n,e=m);l=f},lineEnd:function(){a.lineEnd();b=e=NaN},clean:function(){return 2-h}}},function(a,b,e,l){null==a?(e*=xa,l.point(-la,e),l.point(0,e),l.point(la,
e),l.point(la,0),l.point(la,-e),l.point(0,-e),l.point(-la,-e),l.point(-la,0),l.point(-la,e)):1E-6<ma(a[0]-b[0])?(a=a[0]<b[0]?la:-la,e=e*a/2,l.point(-a,e),l.point(0,e),l.point(a,e)):l.point(b[0],b[1])},[-la,-la/2]);w.geo.clipExtent=function(){var a,b,e,l,h,n,m={stream:function(a){h&&(h.valid=!1);h=n(a);h.valid=!0;return h},extent:function(f){if(!arguments.length)return[[a,b],[e,l]];n=te(a=+f[0][0],b=+f[0][1],e=+f[1][0],l=+f[1][1]);h&&(h.valid=!1,h=null);return m}};return m.extent([[0,0],[960,500]])};
(w.geo.conicEqualArea=function(){return cd(ve)}).raw=ve;w.geo.albers=function(){return w.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};w.geo.albersUsa=function(){function a(c){var e=c[0];c=c[1];h=null;(m(e,c),h)||(f(e,c),h)||k(e,c);return h}var b=w.geo.albers(),e=w.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=w.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h,n={point:function(a,c){h=[a,c]}},m,f,
k;a.invert=function(a){var c=b.scale(),n=b.translate(),h=(a[0]-n[0])/c,c=(a[1]-n[1])/c;return(.12<=c&&.234>c&&-.425<=h&&-.214>h?e:.166<=c&&.234>c&&-.214<=h&&-.115>h?l:b).invert(a)};a.stream=function(a){var c=b.stream(a),n=e.stream(a),h=l.stream(a);return{point:function(a,e){c.point(a,e);n.point(a,e);h.point(a,e)},sphere:function(){c.sphere();n.sphere();h.sphere()},lineStart:function(){c.lineStart();n.lineStart();h.lineStart()},lineEnd:function(){c.lineEnd();n.lineEnd();h.lineEnd()},polygonStart:function(){c.polygonStart();
n.polygonStart();h.polygonStart()},polygonEnd:function(){c.polygonEnd();n.polygonEnd();h.polygonEnd()}}};a.precision=function(n){if(!arguments.length)return b.precision();b.precision(n);e.precision(n);l.precision(n);return a};a.scale=function(n){if(!arguments.length)return b.scale();b.scale(n);e.scale(.35*n);l.scale(n);return a.translate(b.translate())};a.translate=function(h){if(!arguments.length)return b.translate();var g=b.scale(),p=+h[0],q=+h[1];m=b.translate(h).clipExtent([[p-.455*g,q-.238*g],
[p+.455*g,q+.238*g]]).stream(n).point;f=e.translate([p-.307*g,q+.201*g]).clipExtent([[p-.425*g+1E-6,q+.12*g+1E-6],[p-.214*g-1E-6,q+.234*g-1E-6]]).stream(n).point;k=l.translate([p-.205*g,q+.212*g]).clipExtent([[p-.214*g+1E-6,q+.166*g+1E-6],[p-.115*g-1E-6,q+.234*g-1E-6]]).stream(n).point;return a};return a.scale(1070)};var Md,ed,ab={point:A,lineStart:A,lineEnd:A,polygonStart:function(){ed=0;ab.lineStart=Jg},polygonEnd:function(){ab.lineStart=ab.lineEnd=ab.point=A;Md+=ma(ed/2)}},Ec,Fc,Gc,Hc,Zh={point:function(a,
b){a<Ec&&(Ec=a);a>Gc&&(Gc=a);b<Fc&&(Fc=b);b>Hc&&(Hc=b)},lineStart:A,lineEnd:A,polygonStart:A,polygonEnd:A},Ka={point:kb,lineStart:xe,lineEnd:ye,polygonStart:function(){Ka.lineStart=Lg},polygonEnd:function(){Ka.point=kb;Ka.lineStart=xe;Ka.lineEnd=ye}};w.geo.path=function(){function a(c){c&&("function"===typeof e&&m.pointRadius(+e.apply(this,arguments)),f&&f.valid||(f=n(m)),w.geo.stream(c,f));return m.result()}function b(){f=null;return a}var e=4.5,l,h,n,m,f;a.area=function(a){Md=0;w.geo.stream(a,n(ab));
return Md};a.centroid=function(a){ib=jb=Ua=Ya=Za=Ma=tb=ub=$a=0;w.geo.stream(a,n(Ka));return $a?[tb/$a,ub/$a]:Ma?[Ya/Ma,Za/Ma]:Ua?[ib/Ua,jb/Ua]:[NaN,NaN]};a.bounds=function(a){Gc=Hc=-(Ec=Fc=Infinity);w.geo.stream(a,n(Zh));return[[Ec,Fc],[Gc,Hc]]};a.projection=function(a){if(!arguments.length)return l;n=(l=a)?a.stream||Ng(a):wa;return b()};a.context=function(a){if(!arguments.length)return h;m=null==(h=a)?new Kg:new Mg(a);"function"!==typeof e&&m.pointRadius(e);return b()};a.pointRadius=function(b){if(!arguments.length)return e;
e="function"===typeof b?b:(m.pointRadius(+b),+b);return a};return a.projection(w.geo.albersUsa()).context(null)};w.geo.transform=function(a){return{stream:function(b){b=new Ce(b);for(var e in a)b[e]=a[e];return b}}};Ce.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
w.geo.projection=bb;w.geo.projectionMutator=dd;(w.geo.equirectangular=function(){return bb(Gb)}).raw=Gb.invert=Gb;w.geo.rotation=function(a){function b(e){e=a(e[0]*ka,e[1]*ka);return e[0]*=ta,e[1]*=ta,e}a=fd(a[0]%360*ka,a[1]*ka,2<a.length?a[2]*ka:0);b.invert=function(e){e=a.invert(e[0]*ka,e[1]*ka);return e[0]*=ta,e[1]*=ta,e};return b};Ee.invert=Gb;w.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,e=fd(-c[0]*ka,-c[1]*ka,0).invert,l=[];h(null,null,1,{point:function(a,
c){l.push(a=e(a,c));a[0]*=ta;a[1]*=ta}});return{type:"Polygon",coordinates:[l]}}var b=[0,0],e,l=6,h;a.origin=function(e){if(!arguments.length)return b;b=e;return a};a.angle=function(b){if(!arguments.length)return e;h=bd((e=+b)*ka,l*ka);return a};a.precision=function(b){if(!arguments.length)return l;h=bd(e*ka,(l=+b)*ka);return a};return a.angle(90)};w.geo.distance=function(a,b){var e=(b[0]-a[0])*ka,l=a[1]*ka,h=b[1]*ka,n=Math.cos(e),m=Math.sin(l),l=Math.cos(l),f=Math.sin(h),h=Math.cos(h),k;return Math.atan2(Math.sqrt((k=
h*Math.sin(e))*k+(k=l*f-m*h*n)*k),m*f+l*h*n)};w.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return w.range(Math.ceil(n/r)*r,h,r).map(Q).concat(w.range(Math.ceil(g/t)*t,k,t).map(C)).concat(w.range(Math.ceil(l/p)*p,e,p).filter(function(a){return 1E-6<ma(a%r)}).map(z)).concat(w.range(Math.ceil(f/q)*q,m,q).filter(function(a){return 1E-6<ma(a%t)}).map(y))}var e,l,h,n,m,f,k,g,p=10,q=p,r=90,t=360,z,y,Q,C,H=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[Q(n).concat(C(k).slice(1),Q(h).reverse().slice(1),C(g).reverse().slice(1))]}};a.extent=function(e){return arguments.length?a.majorExtent(e).minorExtent(e):a.minorExtent()};a.majorExtent=function(e){if(!arguments.length)return[[n,g],[h,k]];n=+e[0][0];h=+e[1][0];g=+e[0][1];k=+e[1][1];n>h&&(e=n,n=h,h=e);g>k&&(e=g,g=k,k=e);return a.precision(H)};a.minorExtent=function(b){if(!arguments.length)return[[l,f],[e,m]];l=+b[0][0];e=+b[1][0];
f=+b[0][1];m=+b[1][1];l>e&&(b=l,l=e,e=b);f>m&&(b=f,f=m,m=b);return a.precision(H)};a.step=function(e){return arguments.length?a.majorStep(e).minorStep(e):a.minorStep()};a.majorStep=function(e){if(!arguments.length)return[r,t];r=+e[0];t=+e[1];return a};a.minorStep=function(e){if(!arguments.length)return[p,q];p=+e[0];q=+e[1];return a};a.precision=function(b){if(!arguments.length)return H;H=+b;z=Je(f,m,90);y=Ke(l,e,H);Q=Je(g,k,90);C=Ke(n,h,H);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};w.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[e||b.apply(this,arguments),h||l.apply(this,arguments)]}}var b=gd,e,l=hd,h;a.distance=function(){return w.geo.distance(e||b.apply(this,arguments),h||l.apply(this,arguments))};a.source=function(n){if(!arguments.length)return b;b=n;e="function"===typeof n?null:n;return a};a.target=function(e){if(!arguments.length)return l;l=e;h="function"===typeof e?null:e;return a};a.precision=function(){return arguments.length?
a:0};return a};w.geo.interpolate=function(a,b){return Og(a[0]*ka,a[1]*ka,b[0]*ka,b[1]*ka)};w.geo.length=function(a){Nd=0;w.geo.stream(a,Cb);return Nd};var Nd,Cb={sphere:A,point:A,lineStart:function(){function a(c,n){var m=Math.sin(n*=ka),f=Math.cos(n),k=ma((c*=ka)-b),g=Math.cos(k);Nd+=Math.atan2(Math.sqrt((k=f*Math.sin(k))*k+(k=l*m-e*f*g)*k),e*m+l*f*g);b=c;e=m;l=f}var b,e,l;Cb.point=function(h,n){b=h*ka;e=Math.sin(n*=ka);l=Math.cos(n);Cb.point=a};Cb.lineEnd=function(){Cb.point=Cb.lineEnd=A}},lineEnd:A,
polygonStart:A,polygonEnd:A},Yf=Hb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(w.geo.azimuthalEqualArea=function(){return bb(Yf)}).raw=Yf;var Zf=Hb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},wa);(w.geo.azimuthalEquidistant=function(){return bb(Zf)}).raw=Zf;(w.geo.conicConformal=function(){return cd(Le)}).raw=Le;(w.geo.conicEquidistant=function(){return cd(Me)}).raw=Me;var $f=Hb(function(a){return 1/a},Math.atan);(w.geo.gnomonic=function(){return bb($f)}).raw=
$f;kc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-xa]};(w.geo.mercator=function(){return Ne(kc)}).raw=kc;var ag=Hb(function(){return 1},Math.asin);(w.geo.orthographic=function(){return bb(ag)}).raw=ag;var bg=Hb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(w.geo.stereographic=function(){return bb(bg)}).raw=bg;id.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-xa]};(w.geo.transverseMercator=function(){var a=Ne(id),b=a.center,e=a.rotate;a.center=function(a){return a?
b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?e([a[0],a[1],2<a.length?a[2]+90:90]):(a=e(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=id;w.geom={};w.geom.hull=function(a){function b(a){if(3>a.length)return[];var c=sa(e),m=sa(l),u,f=a.length,k=[],g=[];for(u=0;u<f;u++)k.push([+c.call(this,a[u],u),+m.call(this,a[u],u),u]);k.sort(Pg);for(u=0;u<f;u++)g.push([k[u][0],-k[u][1]]);var c=Oe(k),g=Oe(g),m=g[0]===c[0],f=g[g.length-1]===c[c.length-1],p=[];for(u=c.length-1;0<=u;--u)p.push(a[k[c[u]][2]]);
for(u=+m;u<g.length-f;++u)p.push(a[k[g[u]][2]]);return p}var e=wb,l=Ib;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(e=a,b):e};b.y=function(a){return arguments.length?(l=a,b):l};return b};w.geom.polygon=function(a){Sb(a,Ic);return a};var Ic=w.geom.polygon.prototype=[];Ic.area=function(){for(var a=-1,b=this.length,e,l=this[b-1],h=0;++a<b;)e=l,l=this[a],h+=e[1]*l[0]-e[0]*l[1];return.5*h};Ic.centroid=function(a){var b=-1,e=this.length,l=0,h=0,n,m=this[e-1],f;for(arguments.length||
(a=-1/(6*this.area()));++b<e;)n=m,m=this[b],f=n[0]*m[1]-m[0]*n[1],l+=(n[0]+m[0])*f,h+=(n[1]+m[1])*f;return[l*a,h*a]};Ic.clip=function(a){for(var b,e=Qe(a),l=-1,h=this.length-Qe(this),n,m,f=this[h-1],k,g,p;++l<h;){b=a.slice();a.length=0;k=this[l];g=b[(m=b.length-e)-1];for(n=-1;++n<m;)p=b[n],jd(p,f,k)?(jd(g,f,k)||a.push(Pe(g,p,f,k)),a.push(p)):jd(g,f,k)&&a.push(Pe(g,p,f,k)),g=p;e&&a.push(a[0]);f=k}return a};var Ab,lb,yb,Se=[],ld,Jb,We=[];Ue.prototype.prepare=function(){for(var a=this.edges,b=a.length,
e;b--;)e=a[b].edge,e.b&&e.a||a.splice(b,1);a.sort(Ve);return a.length};nc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};md.prototype={insert:function(a,b){var e,l,h;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;e=a}else this._?(a=Ye(this._),b.P=null,b.N=a,a.P=a.L=b,e=a):(b.P=b.N=null,this._=b,e=null);b.L=b.R=null;b.U=e;b.C=!0;for(a=b;e&&e.C;)l=e.U,e===
l.L?(h=l.R)&&h.C?(e.C=h.C=!1,l.C=!0,a=l):(a===e.R&&(Lb(this,e),a=e,e=a.U),e.C=!1,l.C=!0,Mb(this,l)):(h=l.L)&&h.C?(e.C=h.C=!1,l.C=!0,a=l):(a===e.L&&(Mb(this,e),a=e,e=a.U),e.C=!1,l.C=!0,Lb(this,l)),e=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,e=a.L,l=a.R,h,n;h=e?l?Ye(l):e:l;b?b.L===a?b.L=h:b.R=h:this._=h;e&&l?(n=h.C,h.C=a.C,h.L=e,e.U=h,h!==l?(b=h.U,h.U=a.U,a=h.R,b.L=a,h.R=l,l.U=h):(h.U=b,b=h,a=h.R)):(n=a.C,a=h);a&&(a.U=b);if(!n)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Lb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Mb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Lb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Mb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Lb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Mb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};w.geom.voronoi=function(a){function b(a){var c=Array(a.length),n=f[0][0],h=f[0][1],l=f[1][0],m=f[1][1];
nd(e(a),f).cells.forEach(function(b,e){var f=b.edges,u=b.site;(c[e]=f.length?f.map(function(a){a=a.start();return[a.x,a.y]}):u.x>=n&&u.x<=l&&u.y>=h&&u.y<=m?[[n,m],[l,m],[l,h],[n,h]]:[]).point=a[e]});return c}function e(a){return a.map(function(a,c){return{x:1E-6*Math.round(n(a,c)/1E-6),y:1E-6*Math.round(m(a,c)/1E-6),i:c}})}var l=wb,h=Ib,n=l,m=h,f=Jc;if(a)return b(a);b.links=function(a){return nd(e(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};
b.triangles=function(a){var c=[];nd(e(a)).cells.forEach(function(b,e){for(var n=b.site,h=b.edges.sort(Ve),l=-1,m=h.length,f,u=h[m-1].edge,u=u.l===n?u.r:u.l;++l<m;)f=u,u=h[l].edge,u=u.l===n?u.r:u.l,e<f.i&&e<u.i&&0>(n.x-u.x)*(f.y-n.y)-(n.x-f.x)*(u.y-n.y)&&c.push([a[e],a[f.i],a[u.i]])});return c};b.x=function(a){return arguments.length?(n=sa(l=a),b):l};b.y=function(a){return arguments.length?(m=sa(h=a),b):h};b.clipExtent=function(a){if(!arguments.length)return f===Jc?null:f;f=null==a?Jc:a;return b};
b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):f===Jc?null:f&&f[1]};return b};var Jc=[[-1E6,-1E6],[1E6,1E6]];w.geom.delaunay=function(a){return w.geom.voronoi().triangles(a)};w.geom.quadtree=function(a,b,e,l,h){function n(a){function c(a,b,e,h,l,m,f,u){if(!isNaN(e)&&!isNaN(h))if(a.leaf){var g=a.x,k=a.y;if(null!=g){if(!(.01>ma(g-e)+ma(k-h))){var p=a.point;a.x=a.y=a.point=null;n(a,p,g,k,l,m,f,u)}n(a,b,e,h,l,m,f,u)}else a.x=e,a.y=h,a.point=b}else n(a,b,e,h,l,m,f,u)}function n(a,
b,e,h,l,m,f,u){var g=.5*(l+f),k=.5*(m+u),p=e>=g,q=h>=k,x=(q<<1)+p;a.leaf=!1;a=a.nodes[x]||(a.nodes[x]=Ze());p?l=g:f=g;q?m=k:u=k;c(a,b,e,h,l,m,f,u)}var g,p=sa(m),q=sa(f),r,t,z,y,Q,C,H,F;if(null!=b)Q=b,C=e,H=l,F=h;else if(H=F=-(Q=C=Infinity),r=[],t=[],y=a.length,k)for(z=0;z<y;++z)g=a[z],g.x<Q&&(Q=g.x),g.y<C&&(C=g.y),g.x>H&&(H=g.x),g.y>F&&(F=g.y),r.push(g.x),t.push(g.y);else for(z=0;z<y;++z){var v=+p(g=a[z],z);g=+q(g,z);v<Q&&(Q=v);g<C&&(C=g);v>H&&(H=v);g>F&&(F=g);r.push(v);t.push(g)}v=H-Q;g=F-C;v>g?
F=C+v:H=Q+g;var w=Ze();w.add=function(a){c(w,a,+p(a,++z),+q(a,z),Q,C,H,F)};w.visit=function(a){Nb(a,w,Q,C,H,F)};z=-1;if(null==b){for(;++z<y;)c(w,a[z],r[z],t[z],Q,C,H,F);--z}else a.forEach(w.add);r=t=a=g=null;return w}var m=wb,f=Ib,k;if(k=arguments.length)return m=Vg,f=Wg,3===k&&(h=e,l=b,e=b=0),n(a);n.x=function(a){return arguments.length?(m=a,n):m};n.y=function(a){return arguments.length?(f=a,n):f};n.extent=function(a){if(!arguments.length)return null==b?null:[[b,e],[l,h]];null==a?b=e=l=h=null:(b=
+a[0][0],e=+a[0][1],l=+a[1][0],h=+a[1][1]);return n};n.size=function(a){if(!arguments.length)return null==b?null:[l-b,h-e];null==a?b=e=l=h=null:(b=e=0,l=+a[0],h=+a[1]);return n};return n};w.interpolateRgb=od;w.interpolateObject=$e;w.interpolateNumber=Va;w.interpolateString=af;var pd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qd=new RegExp(pd.source,"g");w.interpolate=mb;w.interpolators=[function(a,b){var e=typeof b;return("string"===e?Ub.has(b)||/^(#|rgb\(|hsl\()/.test(b)?od:af:b instanceof ra?
od:Array.isArray(b)?oc:"object"===e&&isNaN(b)?$e:Va)(a,b)}];w.interpolateArray=oc;var cg=function(){return wa},$h=w.map({linear:cg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Yg},cubic:function(){return Zg},sin:function(){return ah},exp:function(){return bh},circle:function(){return ch},elastic:function(a,b){var e;2>arguments.length&&(b=.45);arguments.length?e=b/Ea*Math.asin(1/a):(a=1,e=b/4);return function(l){return 1+a*Math.pow(2,-10*l)*Math.sin((l-e)*Ea/b)}},
back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return dh}}),ai=w.map({"in":wa,out:bf,"in-out":cf,"out-in":function(a){return cf(bf(a))}});w.ease=function(a){var b=a.indexOf("-"),e=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",e=$h.get(e)||cg,b=ai.get(b)||wa;return Xg(b(e.apply(null,Qf.call(arguments,1))))};w.interpolateHcl=function(a,b){a=w.hcl(a);b=w.hcl(b);var e=a.h,l=a.c,h=a.l,n=b.h-e,m=b.c-l,f=b.l-h;isNaN(m)&&(m=0,l=isNaN(l)?b.c:l);isNaN(n)?
(n=0,e=isNaN(e)?b.h:e):180<n?n-=360:-180>n&&(n+=360);return function(a){return Pc(e+n*a,l+m*a,h+f*a)+""}};w.interpolateHsl=function(a,b){a=w.hsl(a);b=w.hsl(b);var e=a.h,l=a.s,h=a.l,n=b.h-e,m=b.s-l,f=b.l-h;isNaN(m)&&(m=0,l=isNaN(l)?b.s:l);isNaN(n)?(n=0,e=isNaN(e)?b.h:e):180<n?n-=360:-180>n&&(n+=360);return function(a){return qb(e+n*a,l+m*a,h+f*a)+""}};w.interpolateLab=function(a,b){a=w.lab(a);b=w.lab(b);var e=a.l,l=a.a,h=a.b,n=b.l-e,m=b.a-l,f=b.b-h;return function(a){return Yd(e+n*a,l+m*a,h+f*a)+""}};
w.interpolateRound=df;w.transform=function(a){var b=La.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new ef(c?c.matrix:bi)})(a)};ef.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bi={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=gf;w.layout={};w.layout.bundle=function(){return function(a){for(var b=
[],e=-1,l=a.length;++e<l;)b.push(gh(a[e]));return b}};w.layout.chord=function(){function a(){var c={},e=[],q=w.range(m),r=[],t,z,y,Q,C;l=[];h=[];t=0;for(Q=-1;++Q<m;){z=0;for(C=-1;++C<m;)z+=n[Q][C];e.push(z);r.push(w.range(m));t+=z}g&&q.sort(function(a,c){return g(e[a],e[c])});k&&r.forEach(function(a,c){a.sort(function(a,b){return k(n[c][a],n[c][b])})});t=(Ea-f*m)/t;z=0;for(Q=-1;++Q<m;){y=z;for(C=-1;++C<m;){var H=q[Q],F=r[H][C],v=n[H][F],K=z,O=z+=v*t;c[H+"-"+F]={index:H,subindex:F,startAngle:K,endAngle:O,
value:v}}h[H]={index:H,startAngle:y,endAngle:z,value:(z-y)/t};z+=f}for(Q=-1;++Q<m;)for(C=Q-1;++C<m;)q=c[Q+"-"+C],r=c[C+"-"+Q],(q.value||r.value)&&l.push(q.value<r.value?{source:r,target:q}:{source:q,target:r});p&&b()}function b(){l.sort(function(a,c){return p((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var e={},l,h,n,m,f=0,g,k,p;e.matrix=function(a){if(!arguments.length)return n;m=(n=a)&&n.length;l=h=null;return e};e.padding=function(a){if(!arguments.length)return f;f=a;
l=h=null;return e};e.sortGroups=function(a){if(!arguments.length)return g;g=a;l=h=null;return e};e.sortSubgroups=function(a){if(!arguments.length)return k;k=a;l=null;return e};e.sortChords=function(a){if(!arguments.length)return p;p=a;l&&b();return e};e.chords=function(){l||a();return l};e.groups=function(){h||a();return h};return e};w.layout.force=function(){function a(c){return function(a,b,e,n){if(a.point!==c){e=a.cx-c.x;var h=a.cy-c.y;b=n-b;n=e*e+h*h;if(b*b/t<n)return n<q&&(b=a.charge/n,c.px-=
e*b,c.py-=h*b),!0;a.point&&n&&n<q&&(b=a.pointCharge/n,c.px-=e*b,c.py-=h*b)}return!a.charge}}function b(a){a.px=w.event.x;a.py=w.event.y;e.resume()}var e={},l=w.dispatch("start","tick","end"),h=[1,1],n,m,f=.9,g=ci,k=di,p=-30,q=ei,r=.1,t=.64,z=[],y=[],Q,C,H;e.tick=function(){if(.005>(m*=.99))return l.end({type:"end",alpha:m=0}),!0;var b=z.length,e=y.length,n,g,u,k,q,t,F;for(n=0;n<e;++n)if(g=y[n],u=g.source,k=g.target,t=k.x-u.x,F=k.y-u.y,q=t*t+F*F)q=m*C[n]*((q=Math.sqrt(q))-Q[n])/q,t*=q,F*=q,k.x-=t*
(q=u.weight/(k.weight+u.weight)),k.y-=F*q,u.x+=t*(q=1-q),u.y+=F*q;if(q=m*r)if(t=h[0]/2,F=h[1]/2,n=-1,q)for(;++n<b;)g=z[n],g.x+=(t-g.x)*q,g.y+=(F-g.y)*q;if(p)for(jf(e=w.geom.quadtree(z),m,H),n=-1;++n<b;)(g=z[n]).fixed||e.visit(a(g));for(n=-1;++n<b;)g=z[n],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*f,g.y-=(g.py-(g.py=g.y))*f);l.tick({type:"tick",alpha:m})};e.nodes=function(a){if(!arguments.length)return z;z=a;return e};e.links=function(a){if(!arguments.length)return y;y=a;return e};e.size=
function(a){if(!arguments.length)return h;h=a;return e};e.linkDistance=function(a){if(!arguments.length)return g;g="function"===typeof a?a:+a;return e};e.distance=e.linkDistance;e.linkStrength=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return e};e.friction=function(a){if(!arguments.length)return f;f=+a;return e};e.charge=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return e};e.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(q);
q=a*a;return e};e.gravity=function(a){if(!arguments.length)return r;r=+a;return e};e.theta=function(a){if(!arguments.length)return Math.sqrt(t);t=a*a;return e};e.alpha=function(a){if(!arguments.length)return m;a=+a;m?m=0<a?a:0:0<a&&(l.start({type:"start",alpha:m=a}),w.timer(e.tick));return e};e.start=function(){function a(e,n){if(!f){f=Array(b);for(l=0;l<b;++l)f[l]=[];for(l=0;l<m;++l){var h=y[l];f[h.source.index].push(h.target);f[h.target.index].push(h.source)}}for(var h=f[c],l=-1,m=h.length,u;++l<
m;)if(!isNaN(u=h[l][e]))return u;return Math.random()*n}var c,b=z.length,n=y.length,l=h[0],m=h[1],f,u;for(c=0;c<b;++c)(u=z[c]).index=c,u.weight=0;for(c=0;c<n;++c)u=y[c],"number"==typeof u.source&&(u.source=z[u.source]),"number"==typeof u.target&&(u.target=z[u.target]),++u.source.weight,++u.target.weight;for(c=0;c<b;++c)u=z[c],isNaN(u.x)&&(u.x=a("x",l)),isNaN(u.y)&&(u.y=a("y",m)),isNaN(u.px)&&(u.px=u.x),isNaN(u.py)&&(u.py=u.y);Q=[];if("function"===typeof g)for(c=0;c<n;++c)Q[c]=+g.call(this,y[c],c);
else for(c=0;c<n;++c)Q[c]=g;C=[];if("function"===typeof k)for(c=0;c<n;++c)C[c]=+k.call(this,y[c],c);else for(c=0;c<n;++c)C[c]=k;H=[];if("function"===typeof p)for(c=0;c<b;++c)H[c]=+p.call(this,z[c],c);else for(c=0;c<b;++c)H[c]=p;return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){n||(n=w.behavior.drag().origin(wa).on("dragstart.force",hh).on("drag.force",b).on("dragend.force",ih));if(!arguments.length)return n;this.on("mouseover.force",
jh).on("mouseout.force",kh).call(n)};return w.rebind(e,l,"on")};var ci=20,di=1,ei=Infinity;w.layout.hierarchy=function(){function a(h){var n=[h],m=[],f;for(h.depth=0;null!=(f=n.pop());)if(m.push(f),(k=e.call(a,f,f.depth))&&(g=k.length)){for(var g,k,p;0<=--g;)n.push(p=k[g]),p.parent=f,p.depth=f.depth+1;l&&(f.value=0);f.children=k}else l&&(f.value=+l.call(a,f,f.depth)||0),delete f.children;Na(h,function(a){var c,e;b&&(c=a.children)&&c.sort(b);l&&(e=a.parent)&&(e.value+=a.value)});return m}var b=oh,
e=mh,l=nh;a.sort=function(e){if(!arguments.length)return b;b=e;return a};a.children=function(b){if(!arguments.length)return e;e=b;return a};a.value=function(b){if(!arguments.length)return l;l=b;return a};a.revalue=function(b){l&&(Pb(b,function(a){a.children&&(a.value=0)}),Na(b,function(b){var e;b.children||(b.value=+l.call(a,b,b.depth)||0);if(e=b.parent)e.value+=b.value}));return b};return a};w.layout.partition=function(){function a(b,e,l,h){var m=b.children;b.x=e;b.y=b.depth*h;b.dx=l;b.dy=h;if(m&&
(g=m.length)){var f=-1,g,u;for(l=b.value?l/b.value:0;++f<g;)a(u=m[f],e,b=u.value*l,h),e+=b}}function b(a){a=a.children;var c=0;if(a&&(l=a.length))for(var e=-1,l;++e<l;)c=Math.max(c,b(a[e]));return 1+c}function e(e,m){var f=l.call(this,e,m);a(f[0],0,h[0],h[1]/b(f[0]));return f}var l=w.layout.hierarchy(),h=[1,1];e.size=function(a){if(!arguments.length)return h;h=a;return e};return Ob(e,l)};w.layout.pie=function(){function a(n){var m=n.map(function(e,l){return+b.call(a,e,l)}),f=+("function"===typeof l?
l.apply(this,arguments):l),g=(("function"===typeof h?h.apply(this,arguments):h)-f)/w.sum(m),k=w.range(n.length);null!=e&&k.sort(e===dg?function(a,c){return m[c]-m[a]}:function(a,c){return e(n[a],n[c])});var p=[];k.forEach(function(a){var c;p[a]={data:n[a],value:c=m[a],startAngle:f,endAngle:f+=c*g}});return p}var b=Number,e=dg,l=0,h=Ea;a.value=function(e){if(!arguments.length)return b;b=e;return a};a.sort=function(b){if(!arguments.length)return e;e=b;return a};a.startAngle=function(b){if(!arguments.length)return l;
l=b;return a};a.endAngle=function(b){if(!arguments.length)return h;h=b;return a};return a};var dg={};w.layout.stack=function(){function a(f,g){var k=f.map(function(e,l){return b.call(a,e,l)}),p=k.map(function(b){return b.map(function(b,e){return[n.call(a,b,e),m.call(a,b,e)]})}),q=e.call(a,p,g),k=w.permute(k,q),p=w.permute(p,q),q=l.call(a,p,g),r=k.length,t=k[0].length,z,y,Q;for(y=0;y<t;++y)for(h.call(a,k[0][y],Q=q[y],p[0][y][1]),z=1;z<r;++z)h.call(a,k[z][y],Q+=p[z-1][y][1],p[z][y][1]);return f}var b=
wa,e=rd,l=sd,h=rh,n=ph,m=qh;a.values=function(e){if(!arguments.length)return b;b=e;return a};a.order=function(b){if(!arguments.length)return e;e="function"===typeof b?b:fi.get(b)||rd;return a};a.offset=function(b){if(!arguments.length)return l;l="function"===typeof b?b:gi.get(b)||sd;return a};a.x=function(b){if(!arguments.length)return n;n=b;return a};a.y=function(b){if(!arguments.length)return m;m=b;return a};a.out=function(b){if(!arguments.length)return h;h=b;return a};return a};var fi=w.map({"inside-out":function(a){var b=
a.length,e,l=a.map(sh),h=a.map(th),n=w.range(b).sort(function(a,c){return l[a]-l[c]}),m=0,f=0,g=[],k=[];for(a=0;a<b;++a)e=n[a],m<f?(m+=h[e],g.push(e)):(f+=h[e],k.push(e));return k.reverse().concat(g)},reverse:function(a){return w.range(a.length).reverse()},"default":rd}),gi=w.map({silhouette:function(a){var b=a.length,e=a[0].length,l=[],h=0,n,m,f,g=[];for(m=0;m<e;++m){for(f=n=0;n<b;n++)f+=a[n][m][1];f>h&&(h=f);l.push(f)}for(m=0;m<e;++m)g[m]=(h-l[m])/2;return g},wiggle:function(a){var b=a.length,e=
a[0],l=e.length,h,n,m,f,g,k,p,q,r,t=[];t[0]=q=r=0;for(n=1;n<l;++n){for(f=h=0;h<b;++h)f+=a[h][n][1];g=h=0;for(p=e[n][0]-e[n-1][0];h<b;++h){m=0;for(k=(a[h][n][1]-a[h][n-1][1])/(2*p);m<h;++m)k+=(a[m][n][1]-a[m][n-1][1])/p;g+=k*a[h][n][1]}t[n]=q-=f?g/f*p:0;q<r&&(r=q)}for(n=0;n<l;++n)t[n]-=r;return t},expand:function(a){var b=a.length,e=a[0].length,l=1/b,h,n,m,f=[];for(n=0;n<e;++n){for(m=h=0;h<b;h++)m+=a[h][n][1];if(m)for(h=0;h<b;h++)a[h][n][1]/=m;else for(h=0;h<b;h++)a[h][n][1]=l}for(n=0;n<e;++n)f[n]=
0;return f},zero:sd});w.layout.histogram=function(){function a(c,m){var f=[],g=c.map(e,this),k=l.call(this,g,m),p=h.call(this,k,g,m),q;m=-1;for(var r=g.length,t=p.length-1,z=b?1:1/r;++m<t;)q=f[m]=[],q.dx=p[m+1]-(q.x=p[m]),q.y=0;if(0<t)for(m=-1;++m<r;)q=g[m],q>=k[0]&&q<=k[1]&&(q=f[w.bisect(p,q,1,t)-1],q.y+=z,q.push(c[m]));return f}var b=!0,e=Number,l=wh,h=vh;a.value=function(b){if(!arguments.length)return e;e=b;return a};a.range=function(b){if(!arguments.length)return l;l=sa(b);return a};a.bins=function(b){if(!arguments.length)return h;
h="number"===typeof b?function(a){return kf(a,b)}:sa(b);return a};a.frequency=function(e){if(!arguments.length)return b;b=!!e;return a};return a};w.layout.pack=function(){function a(c,m){var f=b.call(this,c,m),g=f[0],k=l[0],p=l[1],q=null==h?Math.sqrt:"function"===typeof h?h:function(){return h};g.x=g.y=0;Na(g,function(a){a.r=+q(a.value)});Na(g,nf);if(e){var r=e*(h?1:Math.max(2*g.r/k,2*g.r/p))/2;Na(g,function(a){a.r+=r});Na(g,nf);Na(g,function(a){a.r-=r})}pf(g,k/2,p/2,h?1:1/Math.max(2*g.r/k,2*g.r/
p));return f}var b=w.layout.hierarchy().sort(xh),e=0,l=[1,1],h;a.size=function(b){if(!arguments.length)return l;l=b;return a};a.radius=function(b){if(!arguments.length)return h;h=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return e;e=+b;return a};return Ob(a,b)};w.layout.tree=function(){function a(c,p){var q=m.call(this,c,p),r=q[0],t=b(r);Na(t,e);t.parent.m=-t.z;Pb(t,l);if(k)Pb(r,h);else{var z=r,y=r,Q=r;Pb(r,function(a){a.x<z.x&&(z=a);a.x>y.x&&(y=a);a.depth>
Q.depth&&(Q=a)});var C=f(z,y)/2-z.x,H=g[0]/(y.x+f(y,z)/2+C),F=g[1]/(Q.depth||1);Pb(r,function(a){a.x=(a.x+C)*H;a.y=a.depth*F})}return q}function b(a){a={A:null,children:[a]};for(var c=[a],e;null!=(e=c.pop());)for(var l=e.children,h,m=0,n=l.length;m<n;++m)c.push((l[m]=h={_:l[m],parent:e,children:(h=l[m].children)&&h.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:m}).a=h);return a.children[0]}function e(a){var c=a.children,b=a.parent.children,e=a.i?b[a.i-1]:null;if(c.length){for(var l=0,h=0,m=a.children,
n=m.length,g;0<=--n;)g=m[n],g.z+=l,g.m+=l,l+=g.s+(h+=g.c);c=(c[0].z+c[c.length-1].z)/2;e?(a.z=e.z+f(a._,e._),a.m=a.z-c):a.z=c}else e&&(a.z=e.z+f(a._,e._));c=a.parent;b=a.parent.A||b[0];if(e){h=l=a;m=l.parent.children[0];n=l.m;g=h.m;for(var k=e.m,u=m.m,p;e=vd(e),l=ud(l),e&&l;){m=ud(m);h=vd(h);h.a=a;p=e.z+k-l.z-n+f(e._,l._);if(0<p){var q=e.a.parent===a.parent?e.a:b,r=a,t=p,z=t/(r.i-q.i);r.c-=z;r.s+=t;q.c+=z;r.z+=t;r.m+=t;n+=p;g+=p}k+=e.m;n+=l.m;u+=m.m;g+=h.m}e&&!vd(h)&&(h.t=e,h.m+=k-g);l&&!ud(m)&&(m.t=
l,m.m+=n-u,b=a)}c.A=b}function l(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=g[0];a.y=a.depth*g[1]}var m=w.layout.hierarchy().sort(null).value(null),f=qf,g=[1,1],k=null;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return k?null:g;k=null==(g=b)?h:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?g:null;k=null==(g=b)?null:h;return a};return Ob(a,m)};w.layout.cluster=function(){function a(c,m){var f=b.call(this,
c,m),g=f[0],k,p=0;Na(g,function(a){var c=a.children;c&&c.length?(a.x=Bh(c),a.y=Ah(c)):(a.x=k?p+=e(a,k):0,a.y=0,k=a)});var q=rf(g),r=sf(g),t=q.x-e(q,r)/2,z=r.x+e(r,q)/2;Na(g,h?function(a){a.x=(a.x-g.x)*l[0];a.y=(g.y-a.y)*l[1]}:function(a){a.x=(a.x-t)/(z-t)*l[0];a.y=(1-(g.y?a.y/g.y:1))*l[1]});return f}var b=w.layout.hierarchy().sort(null).value(null),e=qf,l=[1,1],h=!1;a.separation=function(b){if(!arguments.length)return e;e=b;return a};a.size=function(b){if(!arguments.length)return h?null:l;h=null==
(l=b);return a};a.nodeSize=function(b){if(!arguments.length)return h?l:null;h=null!=(l=b);return a};return Ob(a,b)};w.layout.treemap=function(){function a(c,b){for(var e=-1,l=c.length,h,m;++e<l;)m=(h=c[e]).value*(0>b?0:b),h.area=isNaN(m)||0>=m?0:m}function b(e){var h=e.children;if(h&&h.length){var m=p(e),n=[],f=h.slice(),g=Infinity,k,q="slice"===t?m.dx:"dice"===t?m.dy:"slice-dice"===t?e.depth&1?m.dy:m.dx:Math.min(m.dx,m.dy);a(f,m.dx*m.dy/e.value);for(n.area=0;0<(e=f.length);){n.push(e=f[e-1]);n.area+=
e.area;if(!(e="squarify"!==t)){k=q;e=n.area;for(var r,y=0,x=Infinity,Q=-1,C=n.length;++Q<C;)if(r=n[Q].area)r<x&&(x=r),r>y&&(y=r);e*=e;k*=k;e=(k=e?Math.max(k*y*z/e,e/(k*x*z)):Infinity)<=g}e?(f.pop(),g=k):(n.area-=n.pop().area,l(n,q,m,!1),q=Math.min(m.dx,m.dy),n.length=n.area=0,g=Infinity)}n.length&&(l(n,q,m,!0),n.length=n.area=0);h.forEach(b)}}function e(b){var m=b.children;if(m&&m.length){var h=p(b),n=m.slice(),f=[];a(n,h.dx*h.dy/b.value);for(f.area=0;b=n.pop();)f.push(b),f.area+=b.area,null!=b.z&&
(l(f,b.z?h.dx:h.dy,h,!n.length),f.length=f.area=0);m.forEach(e)}}function l(a,c,b,e){var m=-1,h=a.length,l=b.x,n=b.y,g=c?f(a.area/c):0,k;if(c==b.dx){if(e||g>b.dy)g=b.dy;for(;++m<h;)k=a[m],k.x=l,k.y=n,k.dy=g,l+=k.dx=Math.min(b.x+b.dx-l,g?f(k.area/g):0);k.z=!0;k.dx+=b.x+b.dx-l;b.y+=g;b.dy-=g}else{if(e||g>b.dx)g=b.dx;for(;++m<h;)k=a[m],k.x=l,k.y=n,k.dx=g,n+=k.dy=Math.min(b.y+b.dy-n,g?f(k.area/g):0);k.z=!1;k.dy+=b.y+b.dy-n;b.x+=g;b.dx-=g}}function h(l){l=r||m(l);var h=l[0];h.x=0;h.y=0;h.dx=g[0];h.dy=
g[1];r&&m.revalue(h);a([h],h.dx*h.dy/h.value);(r?e:b)(h);q&&(r=l);return l}var m=w.layout.hierarchy(),f=Math.round,g=[1,1],k=null,p=wd,q=!1,r,t="squarify",z=.5*(1+Math.sqrt(5));h.size=function(a){if(!arguments.length)return g;g=a;return h};h.padding=function(a){function c(b){var e=a.call(h,b,b.depth);return null==e?wd(b):tf(b,"number"===typeof e?[e,e,e,e]:e)}function b(c){return tf(c,a)}if(!arguments.length)return k;var e;p=null==(k=a)?wd:"function"===(e=typeof a)?c:"number"===e?(a=[a,a,a,a],b):b;
return h};h.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return h};h.sticky=function(a){if(!arguments.length)return q;q=a;r=null;return h};h.ratio=function(a){if(!arguments.length)return z;z=a;return h};h.mode=function(a){if(!arguments.length)return t;t=a+"";return h};return Ob(h,m)};w.random={normal:function(a,b){var e=arguments.length;2>e&&(b=1);1>e&&(a=0);return function(){var e,h;do e=2*Math.random()-1,h=2*Math.random()-1,h=e*e+h*h;while(!h||1<h);return a+b*e*
Math.sqrt(-2*Math.log(h)/h)}},logNormal:function(){var a=w.random.normal.apply(w,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=w.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,e=0;e<a;e++)b+=Math.random();return b}}};w.scale={};var Dh={floor:wa,ceil:wa};w.scale.linear=function(){return vf([0,1],[0,1],mb,!1)};var Gh={s:1,g:1,p:1,r:1,e:1};w.scale.log=function(){return wf(w.scale.linear().domain([0,1]),10,!0,[1,10])};
var xf=w.format(".0e"),Hh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};w.scale.pow=function(){return yf(w.scale.linear(),1,[0,1])};w.scale.sqrt=function(){return w.scale.pow().exponent(.5)};w.scale.ordinal=function(){return zf([],{t:"range",a:[[]]})};w.scale.category10=function(){return w.scale.ordinal().range(hi)};w.scale.category20=function(){return w.scale.ordinal().range(ii)};w.scale.category20b=function(){return w.scale.ordinal().range(ji)};w.scale.category20c=
function(){return w.scale.ordinal().range(ki)};var hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Tb),ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Tb),ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,
14589654].map(Tb),ki=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Tb);w.scale.quantile=function(){return Af([],[])};w.scale.quantize=function(){return Bf(0,1,[0,1])};w.scale.threshold=function(){return Cf([.5],[0,1])};w.scale.identity=function(){return Df([0,1])};w.svg={};w.svg.arc=function(){function a(){var c=b.apply(this,arguments),f=e.apply(this,arguments),g=m.apply(this,
arguments)+nb,k=h.apply(this,arguments)+nb,p=(k<g&&(p=g,g=k,k=p),k-g),q=p<la?"0":"1",r=Math.cos(g),g=Math.sin(g),t=Math.cos(k),k=Math.sin(k);return p>=li?c?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+c+"A"+c+","+c+" 0 1,0 0,"+-c+"A"+c+","+c+" 0 1,0 0,"+c+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":c?"M"+f*r+","+f*g+"A"+f+","+f+" 0 "+q+",1 "+f*t+","+f*k+"L"+c*t+","+c*k+"A"+c+","+c+" 0 "+q+",0 "+c*r+","+c*g+"Z":"M"+f*r+","+f*g+"A"+f+","+f+" 0 "+q+",1 "+
f*t+","+f*k+"L0,0Z"}var b=Ih,e=Jh,m=Ef,h=Ff;a.innerRadius=function(e){if(!arguments.length)return b;b=sa(e);return a};a.outerRadius=function(b){if(!arguments.length)return e;e=sa(b);return a};a.startAngle=function(b){if(!arguments.length)return m;m=sa(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=sa(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+e.apply(this,arguments))/2,c=(m.apply(this,arguments)+h.apply(this,arguments))/2+nb;return[Math.cos(c)*a,Math.sin(c)*
a]};return a};var nb=-xa,li=Ea-1E-6;w.svg.line=function(){return Gf(wa)};var zd=w.map({linear:Fa,"linear-closed":function(a){return Fa(a)+"Z"},step:function(a){for(var b=0,e=a.length,m=a[0],h=[m[0],",",m[1]];++b<e;)h.push("H",(m[0]+(m=a[b])[0])/2,"V",m[1]);1<e&&h.push("H",m[0]);return h.join("")},"step-before":Ad,"step-after":Bd,basis:Hf,"basis-open":function(a){if(4>a.length)return Fa(a);for(var b=[],e=-1,m=a.length,h,n=[0],f=[0];3>++e;)h=a[e],n.push(h[0]),f.push(h[1]);b.push(Ga(db,n)+","+Ga(db,
f));for(--e;++e<m;)h=a[e],n.shift(),n.push(h[0]),f.shift(),f.push(h[1]),Dd(b,n,f);return b.join("")},"basis-closed":function(a){for(var b,e=-1,m=a.length,h=m+4,n,f=[],g=[];4>++e;)n=a[e%m],f.push(n[0]),g.push(n[1]);b=[Ga(db,f),",",Ga(db,g)];for(--e;++e<h;)n=a[e%m],f.shift(),f.push(n[0]),g.shift(),g.push(n[1]),Dd(b,f,g);return b.join("")},bundle:function(a,b){var e=a.length-1;if(e)for(var m=a[0][0],h=a[0][1],n=a[e][0]-m,f=a[e][1]-h,g=-1,k,p;++g<=e;)k=a[g],p=g/e,k[0]=b*k[0]+(1-b)*(m+p*n),k[1]=b*k[1]+
(1-b)*(h+p*f);return Hf(a)},cardinal:function(a,b){return 3>a.length?Fa(a):a[0]+tc(a,Cd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Fa(a):a[1]+tc(a.slice(1,a.length-1),Cd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Fa(a):a[0]+tc((a.push(a[0]),a),Cd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Fa(a);else{var b=a[0],e=[],m,h,n,f;m=0;h=a.length-1;var g=[];n=a[1];for(f=g[0]=Ed(a[0],n);++m<h;)g[m]=(f+(f=Ed(n,n=a[m+1])))/2;g[m]=f;for(var k=-1,p=a.length-
1;++k<p;)m=Ed(a[k],a[k+1]),1E-6>ma(m)?g[k]=g[k+1]=0:(h=g[k]/m,n=g[k+1]/m,f=h*h+n*n,9<f&&(f=3*m/Math.sqrt(f),g[k]=f*h,g[k+1]=f*n));for(k=-1;++k<=p;)f=(a[Math.min(p,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+g[k]*g[k])),e.push([f||0,g[k]*f||0]);a=b+tc(a,e)}return a}});zd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var If=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],db=[0,1/6,2/3,1/6];w.svg.line.radial=function(){var a=Gf(Kf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Ad.reverse=Bd;Bd.reverse=
Ad;w.svg.area=function(){return Lf(wa)};w.svg.area.radial=function(){var a=Lf(Kf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};w.svg.chord=function(){function a(c,n){var f=b(this,m,c,n),g=b(this,h,c,n);return"M"+f.p0+e(f.r,f.p1,f.a1-f.a0)+(f.a0==g.a0&&f.a1==g.a1?"Q 0,0 "+f.p0:"Q 0,0 "+g.p0+e(g.r,g.p1,g.a1-g.a0)+("Q 0,0 "+f.p0))+"Z"}function b(a,c,e,m){var h=c.call(a,
e,m);c=n.call(a,h,m);e=f.call(a,h,m)+nb;a=g.call(a,h,m)+nb;return{r:c,a0:e,a1:a,p0:[c*Math.cos(e),c*Math.sin(e)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function e(a,c,b){return"A"+a+","+a+" 0 "+ +(b>la)+",1 "+c}var m=gd,h=hd,n=Kh,f=Ef,g=Ff;a.radius=function(b){if(!arguments.length)return n;n=sa(b);return a};a.source=function(b){if(!arguments.length)return m;m=sa(b);return a};a.target=function(b){if(!arguments.length)return h;h=sa(b);return a};a.startAngle=function(b){if(!arguments.length)return f;f=sa(b);
return a};a.endAngle=function(b){if(!arguments.length)return g;g=sa(b);return a};return a};w.svg.diagonal=function(){function a(c,n){var f=b.call(this,c,n),g=e.call(this,c,n),k=(f.y+g.y)/2,f=[f,{x:f.x,y:k},{x:g.x,y:k},g],f=f.map(m);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=gd,e=hd,m=Mf;a.source=function(e){if(!arguments.length)return b;b=sa(e);return a};a.target=function(b){if(!arguments.length)return e;e=sa(b);return a};a.projection=function(b){if(!arguments.length)return m;m=b;return a};return a};
w.svg.diagonal.radial=function(){var a=w.svg.diagonal(),b=Mf,e=a.projection;a.projection=function(a){return arguments.length?e(Lh(b=a)):b};return a};w.svg.symbol=function(){function a(c,m){return(eg.get(b.call(this,c,m))||Nf)(e.call(this,c,m))}var b=Nh,e=Mh;a.type=function(e){if(!arguments.length)return b;b=sa(e);return a};a.size=function(b){if(!arguments.length)return e;e=sa(b);return a};return a};var eg=w.map({circle:Nf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+
"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*fg));var b=a*fg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Kc);var b=a*Kc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Kc);var b=a*Kc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});w.svg.symbolTypes=eg.keys();
var Kc=Math.sqrt(3),fg=Math.tan(30*ka),va=[],Uf=0,pb,xc;va.call=pa.call;va.empty=pa.empty;va.node=pa.node;va.size=pa.size;w.transition=function(a){return arguments.length?pb?a.transition():a:Tf.transition()};w.transition.prototype=va;va.select=function(a){var b=this.id,e=[],m,h,n;a=N(a);for(var f=-1,g=this.length;++f<g;){e.push(m=[]);for(var k=this[f],p=-1,q=k.length;++p<q;)(n=k[p])&&(h=a.call(n,n.__data__,p,f))?("__data__"in n&&(h.__data__=n.__data__),uc(h,p,b,n.__transition__[b]),m.push(h)):m.push(null)}return Qb(e,
b)};va.selectAll=function(a){var b=this.id,e=[],m,h,n,f;a=G(a);for(var g=-1,k=this.length;++g<k;)for(var p=this[g],q=-1,r=p.length;++q<r;)if(m=p[q]){f=m.__transition__[b];h=a.call(m,m.__data__,q,g);e.push(m=[]);for(var t=-1,z=h.length;++t<z;)(n=h[t])&&uc(n,t,b,f),m.push(n)}return Qb(e,b)};va.filter=function(a){var b=[],e,m,h;"function"!==typeof a&&(a=V(a));for(var f=0,g=this.length;f<g;f++){b.push(e=[]);m=this[f];for(var k=0,p=m.length;k<p;k++)(h=m[k])&&a.call(h,h.__data__,k,f)&&e.push(h)}return Qb(b,
this.id)};va.tween=function(a,b){var e=this.id;return 2>arguments.length?this.node().__transition__[e].tween.get(a):U(this,null==b?function(b){b.__transition__[e].tween.remove(a)}:function(m){m.__transition__[e].tween.set(a,b)})};va.attr=function(a,b){function e(){this.removeAttribute(k)}function m(){this.removeAttributeNS(k.space,k.local)}function h(a){return null==a?e:(a+="",function(){var c=this.getAttribute(k),b;return c!==a&&(b=g(c,a),function(a){this.setAttribute(k,b(a))})})}function f(a){return null==
a?m:(a+="",function(){var c=this.getAttributeNS(k.space,k.local),b;return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?gf:mb,k=w.ns.qualify(a);return Fd(this,"attr."+a,b,k.local?f:h)};va.attrTween=function(a,b){function e(a,c){var e=b.call(this,a,c,this.getAttribute(h));return e&&function(a){this.setAttribute(h,e(a))}}function m(a,c){var e=b.call(this,a,c,this.getAttributeNS(h.space,
h.local));return e&&function(a){this.setAttributeNS(h.space,h.local,e(a))}}var h=w.ns.qualify(a);return this.tween("attr."+a,h.local?m:e)};va.style=function(a,b,e){function m(){this.style.removeProperty(a)}var h=arguments.length;if(3>h){if("string"!==typeof a){2>h&&(b="");for(e in a)this.style(e,a[e],b);return this}e=""}return Fd(this,"style."+a,b,function(b){return null==b?m:(b+="",function(){var m=za.getComputedStyle(this,null).getPropertyValue(a),h;return m!==b&&(h=mb(m,b),function(b){this.style.setProperty(a,
h(b),e)})})})};va.styleTween=function(a,b,e){3>arguments.length&&(e="");return this.tween("style."+a,function(m,h){var f=b.call(this,m,h,za.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),e)}})};va.text=function(a){return Fd(this,"text",a,Oh)};va.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};va.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;
"function"!==typeof a&&(a=w.ease.apply(w,arguments));return U(this,function(e){e.__transition__[b].ease=a})};va.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:U(this,"function"===typeof a?function(e,m,h){e.__transition__[b].delay=+a.call(e,e.__data__,m,h)}:(a=+a,function(e){e.__transition__[b].delay=a}))};va.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:U(this,"function"===typeof a?function(e,m,h){e.__transition__[b].duration=
Math.max(1,a.call(e,e.__data__,m,h))}:(a=Math.max(1,a),function(e){e.__transition__[b].duration=a}))};va.each=function(a,b){var e=this.id;if(2>arguments.length){var m=xc,h=pb;pb=e;U(this,function(b,m,h){xc=b.__transition__[e];a.call(b,b.__data__,m,h)});xc=m;pb=h}else U(this,function(m){m=m.__transition__[e];(m.event||(m.event=w.dispatch("start","end"))).on(a,b)});return this};va.transition=function(){for(var a=this.id,b=++Uf,e=[],m,h,f,g,k=0,p=this.length;k<p;k++){e.push(m=[]);h=this[k];for(var q=
0,r=h.length;q<r;q++){if(f=h[q])g=Object.create(f.__transition__[a]),g.delay+=g.duration,uc(f,q,b,g);m.push(f)}}return Qb(e,b)};w.svg.axis=function(){function a(c){c.each(function(){var a=w.select(this),c=this.__chart__||b,q=this.__chart__=b.copy(),r=null==k?q.ticks?q.ticks.apply(q,g):q.domain():k,t=null==p?q.tickFormat?q.tickFormat.apply(q,g):wa:p,z=a.selectAll(".tick").data(r,q),r=z.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),y=w.transition(z.exit()).style("opacity",
1E-6).remove(),Q=w.transition(z.order()).style("opacity",1),C,H=pc(q),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),w.transition(a));r.append("line");r.append("text");var F=r.select("line"),v=Q.select("line"),t=z.select("text").text(t),z=r.select("text"),K=Q.select("text");switch(e){case "bottom":C=Of;F.attr("y2",m);z.attr("y",Math.max(m,0)+f);v.attr("x2",0).attr("y2",m);K.attr("x",0).attr("y",Math.max(m,0)+f);t.attr("dy",".71em").style("text-anchor","middle");
a.attr("d","M"+H[0]+","+h+"V0H"+H[1]+"V"+h);break;case "top":C=Of;F.attr("y2",-m);z.attr("y",-(Math.max(m,0)+f));v.attr("x2",0).attr("y2",-m);K.attr("x",0).attr("y",-(Math.max(m,0)+f));t.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+H[0]+","+-h+"V0H"+H[1]+"V"+-h);break;case "left":C=Pf;F.attr("x2",-m);z.attr("x",-(Math.max(m,0)+f));v.attr("x2",-m).attr("y2",0);K.attr("x",-(Math.max(m,0)+f)).attr("y",0);t.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-h+","+H[0]+"H0V"+
H[1]+"H"+-h);break;case "right":C=Pf,F.attr("x2",m),z.attr("x",Math.max(m,0)+f),v.attr("x2",m).attr("y2",0),K.attr("x",Math.max(m,0)+f).attr("y",0),t.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+h+","+H[0]+"H0V"+H[1]+"H"+h)}if(q.rangeBand)var O=q,V=O.rangeBand()/2,c=q=function(a){return O(a)+V};else c.rangeBand?c=q:y.call(C,q);r.call(C,c);Q.call(C,q)})}var b=w.scale.linear(),e=gg,m=6,h=6,f=3,g=[10],k=null,p;a.scale=function(e){if(!arguments.length)return b;b=e;return a};a.orient=
function(b){if(!arguments.length)return e;e=b in mi?b+"":gg;return a};a.ticks=function(){if(!arguments.length)return g;g=arguments;return a};a.tickValues=function(b){if(!arguments.length)return k;k=b;return a};a.tickFormat=function(b){if(!arguments.length)return p;p=b;return a};a.tickSize=function(b){var e=arguments.length;if(!e)return m;m=+b;h=+arguments[e-1];return a};a.innerTickSize=function(b){if(!arguments.length)return m;m=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return h;
h=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var gg="bottom",mi={top:1,right:1,bottom:1,left:1};w.svg.brush=function(){function a(f){f.each(function(){var f=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),n=f.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility",
"hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var p=f.selectAll(".resize").data(Q,wa);p.exit().remove();p.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ni[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");p.style("display",
a.empty()?"none":null);f=w.transition(f);n=w.transition(n);g&&(p=pc(g),n.attr("x",p[0]).attr("width",p[1]-p[0]),e(f));k&&(p=pc(k),n.attr("y",p[0]).attr("height",p[1]-p[0]),m(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+p[+/e$/.test(a)]+","+q[+/^s/.test(a)]+")"})}function e(a){a.select(".extent").attr("x",p[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function m(a){a.select(".extent").attr("y",q[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",
q[1]-q[0])}function h(){function h(){var a=w.mouse(H),c=!1;T&&(a[0]+=T[0],a[1]+=T[1]);G||(w.event.altKey?(A||(A=[(p[0]+p[1])/2,(q[0]+q[1])/2]),B[0]=p[+(a[0]<A[0])],B[1]=q[+(a[1]<A[1])]):A=null);V&&Q(a,g,0)&&(e(K),c=!0);U&&Q(a,k,1)&&(m(K),c=!0);c&&(b(K),v({type:"brush",mode:G?"move":"resize"}))}function Q(a,c,b){var e=pc(c);c=e[0];var m=e[1],e=B[b],h=b?q:p,f=h[1]-h[0];G&&(c-=e,m-=f+e);a=(b?y:z)?Math.max(c,Math.min(m,a[b])):a[b];G?c=(a+=e)+f:(A&&(e=Math.max(c,Math.min(m,2*A[b]-a))),e<a?(c=a,a=e):c=
e);if(h[0]!=a||h[1]!=c)return b?t=null:r=null,h[0]=a,h[1]=c,!0}function C(){h();K.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);w.select("body").style("cursor",null);P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);D();v({type:"brushend"})}var H=this,F=w.select(w.event.target),v=f.of(H,arguments),K=w.select(H),O=F.datum(),V=!/^(n|s)$/.test(O)&&g,U=!/^(e|w)$/.test(O)&&
k,G=F.classed("extent"),D=qa(),A,B=w.mouse(H),T,P=w.select(za).on("keydown.brush",function(){32==w.event.keyCode&&(G||(A=null,B[0]-=p[1],B[1]-=q[1],G=2),L())}).on("keyup.brush",function(){32==w.event.keyCode&&2==G&&(B[0]+=p[1],B[1]+=q[1],G=0,L())});if(w.event.changedTouches)P.on("touchmove.brush",h).on("touchend.brush",C);else P.on("mousemove.brush",h).on("mouseup.brush",C);K.interrupt().selectAll("*").interrupt();if(G)B[0]=p[0]-B[0],B[1]=q[0]-B[1];else if(O){var M=+/w$/.test(O),O=+/^n/.test(O);T=
[p[1-M]-B[0],q[1-O]-B[1]];B[0]=p[M];B[1]=q[O]}else w.event.altKey&&(A=B.slice());K.style("pointer-events","none").selectAll(".resize").style("display",null);w.select("body").style("cursor",F.style("cursor"));v({type:"brushstart"});h()}var f=C(a,"brushstart","brush","brushend"),g=null,k=null,p=[0,0],q=[0,0],r,t,z=!0,y=!0,Q=Od[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),c={x:p,y:q,i:r,j:t},b=this.__chart__||c;this.__chart__=c;pb?w.select(this).transition().each("start.brush",
function(){r=b.i;t=b.j;p=b.x;q=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=oc(p,c.x),e=oc(q,c.y);r=t=null;return function(m){p=c.x=b(m);q=c.y=e(m);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=c.i;t=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return g;g=b;Q=Od[!g<<1|!k];return a};a.y=function(b){if(!arguments.length)return k;
k=b;Q=Od[!g<<1|!k];return a};a.clamp=function(b){if(!arguments.length)return g&&k?[z,y]:g?z:k?y:null;g&&k?(z=!!b[0],y=!!b[1]):g?z=!!b:k&&(y=!!b);return a};a.extent=function(b){var e,m,h,f,l;if(!arguments.length)return g&&(r?(e=r[0],m=r[1]):(e=p[0],m=p[1],g.invert&&(e=g.invert(e),m=g.invert(m)),m<e&&(l=e,e=m,m=l))),k&&(t?(h=t[0],f=t[1]):(h=q[0],f=q[1],k.invert&&(h=k.invert(h),f=k.invert(f)),f<h&&(l=h,h=f,f=l))),g&&k?[[e,h],[m,f]]:g?[e,m]:k&&[h,f];g&&(e=b[0],m=b[1],k&&(e=e[0],m=m[0]),r=[e,m],g.invert&&
(e=g(e),m=g(m)),m<e&&(l=e,e=m,m=l),e!=p[0]||m!=p[1])&&(p=[e,m]);k&&(h=b[0],f=b[1],g&&(h=h[1],f=f[1]),t=[h,f],k.invert&&(h=k(h),f=k(f)),f<h&&(l=h,h=f,f=l),h!=q[0]||f!=q[1])&&(q=[h,f]);return a};a.clear=function(){a.empty()||(p=[0,0],q=[0,0],r=t=null);return a};a.empty=function(){return!!g&&p[0]==p[1]||!!k&&q[0]==q[1]};return w.rebind(a,f,"on")};var ni={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Od=["n e s w nw ne se sw".split(" "),
["e","w"],["n","s"],[]],Pd=Z.format=Wf.timeFormat,hg=Pd.utc,ig=hg("%Y-%m-%dT%H:%M:%S.%LZ");Pd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Gd:ig;Gd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Gd.toString=ig.toString;Z.second=fb(function(a){return new ya(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});Z.seconds=Z.second.range;Z.seconds.utc=Z.second.utc.range;Z.minute=fb(function(a){return new ya(6E4*
Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});Z.minutes=Z.minute.range;Z.minutes.utc=Z.minute.utc.range;Z.hour=fb(function(a){var b=a.getTimezoneOffset()/60;return new ya(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});Z.hours=Z.hour.range;Z.hours.utc=Z.hour.utc.range;Z.month=fb(function(a){a=Z.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+
b)},function(a){return a.getMonth()});Z.months=Z.month.range;Z.months.utc=Z.month.utc.range;var vc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Qd=[[Z.second,1],[Z.second,5],[Z.second,15],[Z.second,30],[Z.minute,1],[Z.minute,5],[Z.minute,15],[Z.minute,30],[Z.hour,1],[Z.hour,3],[Z.hour,6],[Z.hour,12],[Z.day,1],[Z.day,2],[Z.week,1],[Z.month,1],[Z.month,3],[Z.year,1]],oi=Pd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],
["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",vb]]),Ph={range:function(a,b,e){return w.range(Math.ceil(a/e)*e,+b,e).map(ob)},floor:wa,ceil:wa};Qd.year=Z.year;Z.scale=function(){return Hd(w.scale.linear(),Qd,oi)};var jg=Qd.map(function(a){return[a[0].utc,a[1]]}),pi=hg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],
[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",vb]]);jg.year=Z.year.utc;Z.scale.utc=function(){return Hd(w.scale.linear(),jg,pi)};w.text=Vc(function(a){return a.responseText});w.json=function(a,b){return Vb(a,"application/json",Qh,b)};w.html=function(a,
b){return Vb(a,"text/html",Rh,b)};w.xml=Vc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(w):"object"===typeof module&&module.exports?module.exports=w:this.d3=w}();
(function(){function J(a,b){return(new Date(b,a+1,0)).getDate()}var v=window.nv||{};v.version="1.1.15b";v.dev=!0;window.nv=v;v.tooltip=v.tooltip||{};v.utils=v.utils||{};v.models=v.models||{};v.charts={};v.graphs=[];v.logs={};v.dispatch=d3.dispatch("render_start","render_end");v.dev&&(v.dispatch.on("render_start",function(a){v.logs.startTime=+new Date}),v.dispatch.on("render_end",function(a){v.logs.endTime=+new Date;v.logs.totalTime=v.logs.endTime-v.logs.startTime;v.log("total",v.logs.totalTime)}));
v.log=function(){v.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):v.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};v.render=function(a){a=a||1;v.render.active=!0;v.dispatch.render_start();setTimeout(function(){for(var b,k,t=0;t<a&&(k=v.render.queue[t]);t++)b=k.generate(),typeof k.callback==typeof Function&&k.callback(b),v.graphs.push(b);v.render.queue.splice(0,
t);v.render.queue.length?setTimeout(arguments.callee,0):(v.dispatch.render_end(),v.render.active=!1)},0)};v.render.active=!1;v.render.queue=[];v.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});v.render.queue.push(a);v.render.active||v.render()};v.identity=function(a){return a};v.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,k){return function(t,p,f){var g=
a(t),r=[];g<t&&b(g);if(1<f)for(;g<p;)t=new Date(+g),0===k(t)%f&&r.push(t),b(g);else for(;g<p;)r.push(new Date(+g)),b(g);return r}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(J(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});v.interactiveGuideline=function(){function a(B){B.each(function(B){function E(){var k=d3.mouse(this),q=k[0],k=k[1],r=!0,t=!1;I&&(q=d3.event.offsetX,k=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(t=!0));r&&(q-=p.left,k-=p.top);0>q||0>k||q>L||k>S||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||t?I&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(g.elementMouseout({mouseX:q,mouseY:k}),a.renderGuideLine(null)):(r=f.invert(q),g.elementMousemove({mouseX:q,mouseY:k,pointXValue:r}),"dblclick"===d3.event.type&&g.elementDblclick({mouseX:q,mouseY:k,pointXValue:r}))}var D=d3.select(this),
L=k||960,S=t||400,C=D.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([B]);C.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");q&&(q.on("mousemove",E,!0).on("mouseout",E,!0).on("dblclick",E),a.renderGuideLine=function(a){r&&(a=C.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[v.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",S).attr("y2",0),a.exit().remove())})})}var b=v.models.tooltip(),k=null,t=null,p={left:0,top:0},f=d3.scale.linear();d3.scale.linear();var g=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),r=!0,q=null,I=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=g;a.tooltip=b;a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return k;
k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.showGuideLine=function(b){if(!arguments.length)return r;r=b;return a};a.svgContainer=function(b){if(!arguments.length)return q;q=b;return a};return a};v.interactiveBisect=function(a,b,k){if(!a instanceof Array)return null;"function"!==typeof k&&(k=function(a,b){return a.x});var t=d3.bisector(k).left,t=d3.max([0,t(a,b)-1]),p=k(a[t],t);"undefined"===typeof p&&
(p=t);if(p===b)return t;var f=d3.min([t+1,a.length-1]);a=k(a[f],f);"undefined"===typeof a&&(a=f);return Math.abs(a-b)>=Math.abs(p-b)?t:f};v.nearestValueIndex=function(a,b,k){var t=Infinity,p=null;a.forEach(function(a,g){var r=Math.abs(b-a);r<=t&&r<k&&(t=r,p=g)});return p};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(A){var b;b=k&&k.series&&0<k.series.length?!0:!1;if(b){if(q){b=d3.select(q);"svg"!==b.node().tagName&&(b=b.select("svg"));var D=b.node()?b.attr("viewBox"):
null;D&&(D=D.split(" "),b=parseInt(b.style("width"))/D[2],B.left*=b,B.top*=b)}b=B.left;var D=null!=g?g:B.top,L;L=S(k);var G;G=q?d3.select(q):d3.select("body");var T=G.select(".nvtooltip");null===T.node()&&(T=G.append("div").attr("class","nvtooltip "+(r?r:"xy-tooltip")).attr("id",E));T.node().innerHTML=L;T.style("top",0).style("left",0).style("opacity",0);T.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);T.classed("nv-pointer-events-none",!0);I=L=T.node();if(q){(T=q.getElementsByTagName("svg")[0])?
T.getBoundingClientRect():q.getBoundingClientRect();var M=0;G=0;if(T){T=T.getBoundingClientRect();M=q.getBoundingClientRect();G=T.top;if(0>G){var R=q.getBoundingClientRect();G=Math.abs(G)>R.height?0:G}G=Math.abs(G-M.top);M=Math.abs(T.left-M.left)}b+=q.offsetLeft+M-2*q.scrollLeft;D+=q.offsetTop+G-2*q.scrollTop}f&&0<f&&(D=Math.floor(D/f)*f);v.tooltip.calcTooltipPosition([b,D],t,p,L);return a}}}var b=null,k=null,t="w",p=50,f=25,g=null,r=null,q=null,I=null,B={left:null,top:null},A=!0,E="nvtooltip-"+Math.floor(1E5*
Math.random()),D=function(a,b){return a},L=function(a){return a},S=function(a){if(null!=b)return b;if(null==a)return"";var f=d3.select(document.createElement("table"));f.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(L(a.value));var g=f.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});g.append("td").classed("key",!0).html(function(a){return a.key});g.append("td").classed("value",!0).html(function(a,b){return D(a.value,b)});g.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});f=f.node().outerHTML;void 0!==a.footer&&(f+="<div class='footer'>"+
a.footer+"</div>");return f};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(f){if(!arguments.length)return b;b=f;return a};a.tooltipElem=function(){return I};a.contentGenerator=function(b){if(!arguments.length)return S;"function"===typeof b&&(S=b);return a};a.data=function(b){if(!arguments.length)return k;k=b;return a};a.gravity=function(b){if(!arguments.length)return t;t=b;return a};a.distance=function(b){if(!arguments.length)return p;p=b;return a};a.snapDistance=function(b){if(!arguments.length)return f;
f=b;return a};a.classes=function(b){if(!arguments.length)return r;r=b;return a};a.chartContainer=function(b){if(!arguments.length)return q;q=b;return a};a.position=function(b){if(!arguments.length)return B;B.left="undefined"!==typeof b.left?b.left:B.left;B.top="undefined"!==typeof b.top?b.top:B.top;return a};a.fixedTop=function(b){if(!arguments.length)return g;g=b;return a};a.enabled=function(b){if(!arguments.length)return A;A=b;return a};a.valueFormatter=function(b){if(!arguments.length)return D;
"function"===typeof b&&(D=b);return a};a.headerFormatter=function(b){if(!arguments.length)return L;"function"===typeof b&&(L=b);return a};a.id=function(){return E};return a};v.tooltip.show=function(a,b,k,t,p,f){var g=document.createElement("div");g.className="nvtooltip "+(f?f:"xy-tooltip");f=p;if(!p||p.tagName.match(/g|svg/i))f=document.getElementsByTagName("body")[0];g.style.left=0;g.style.top=0;g.style.opacity=0;g.innerHTML=b;f.appendChild(g);p&&(a[0]-=p.scrollLeft,a[1]-=p.scrollTop);v.tooltip.calcTooltipPosition(a,
k,t,g)};v.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};v.tooltip.findTotalOffsetTop=function(a,b){var k=b;do isNaN(a.offsetTop)||(k+=a.offsetTop);while(a=a.offsetParent);return k};v.tooltip.findTotalOffsetLeft=function(a,b){var k=b;do isNaN(a.offsetLeft)||(k+=a.offsetLeft);while(a=a.offsetParent);return k};v.tooltip.calcTooltipPosition=function(a,b,k,t){var p=parseInt(t.offsetHeight),f=parseInt(t.offsetWidth),g=v.utils.windowSize().width,
r=v.utils.windowSize().height,q=window.pageYOffset,I=window.pageXOffset,B,A,r=window.innerWidth>=document.body.scrollWidth?r:r-16,g=window.innerHeight>=document.body.scrollHeight?g:g-16;k=k||20;var E=function(a){return v.tooltip.findTotalOffsetTop(a,A)},D=function(a){return v.tooltip.findTotalOffsetLeft(a,B)};switch(b||"s"){case "e":B=a[0]-f-k;A=a[1]-p/2;b=D(t);E=E(t);b<I&&(B=a[0]+k>I?a[0]+k:I-b+B);E<q&&(A=q-E+A);E+p>q+r&&(A=q+r-E+A-p);break;case "w":B=a[0]+k;A=a[1]-p/2;b=D(t);E=E(t);b+f>g&&(B=a[0]-
f-k);E<q&&(A=q+5);E+p>q+r&&(A=q+r-E+A-p);break;case "n":B=a[0]-f/2-5;A=a[1]+k;b=D(t);E=E(t);b<I&&(B=I+5);b+f>g&&(B=B-f/2+5);E+p>q+r&&(A=q+r-E+A-p);break;case "s":B=a[0]-f/2;A=a[1]-p-k;b=D(t);E=E(t);b<I&&(B=I+5);b+f>g&&(B=B-f/2+5);q>E&&(A=q);break;case "none":B=a[0],A=a[1]-k,b=D(t),E=E(t)}t.style.left=B+"px";t.style.top=A+"px";t.style.opacity=1;t.style.position="absolute";return t};v.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();v.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};v.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(k){"function"==typeof b&&b(k);a(k)}}};v.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,k){return b.color||a[k%a.length]}:a:v.utils.defaultColor()};v.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
k){return b.color||a[k%a.length]}};v.utils.customTheme=function(a,b,k){b=b||function(a){return a.key};k=k||d3.scale.category20().range();var t=k.length;return function(p,f){var g=b(p);t||(t=k.length);return"undefined"!==typeof a[g]?"function"===typeof a[g]?a[g]():a[g]:k[--t]}};v.utils.pjax=function(a,b){function k(k){d3.html(k,function(k){var f=d3.select(b).node();f.parentNode.replaceChild(d3.select(k).select(b).node(),f);v.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);k(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&k(d3.event.state)})};v.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};v.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};v.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,k){if("function"===
typeof this[a])this[a](k)}.bind(this));return this};v.models.axis=function(){function a(p){p.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var p=a.select("g");null!==D?b.ticks(D):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(f.range()[1]-f.range()[0])/100);p.transition().call(b);S=S||b.scale();var C=b.tickFormat();null==C&&(C=S.tickFormat());var v=p.selectAll("text.nv-axislabel").data([g||
null]);v.exit().remove();switch(b.orient()){case "top":v.enter().append("text").attr("class","nv-axislabel");var M=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);v.attr("text-anchor","middle").attr("y",0).attr("x",M/2);r&&(M=a.selectAll("g.nv-axisMaxMin").data(f.domain()),M.enter().append("g").attr("class","nv-axisMaxMin").append("text"),M.exit().remove(),M.attr("transform",function(a,b){return"translate("+f(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var f=C(a);return(""+f).match("NaN")?"":f}),M.transition().attr("transform",function(a,b){return"translate("+f.range()[b]+",0)"}));break;case "bottom":var R=36,y=30,F=p.selectAll("g").select("text");I%360&&(F.each(function(a,b){var f=this.getBBox().width;f>y&&(y=f)}),M=Math.abs(Math.sin(I*Math.PI/180)),R=(M?M*y:y)+30,F.attr("transform",function(a,b,f){return"rotate("+I+" 0,0)"}).style("text-anchor",0<I%360?"start":"end"));v.enter().append("text").attr("class",
"nv-axislabel");M=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);v.attr("text-anchor","middle").attr("y",R).attr("x",M/2);r&&(M=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),M.enter().append("g").attr("class","nv-axisMaxMin").append("text"),M.exit().remove(),M.attr("transform",function(a,b){return"translate("+(f(a)+(E?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,f){return"rotate("+I+" 0,0)"}).style("text-anchor",I?0<I%360?"start":"end":"middle").text(function(a,b){var f=C(a);return(""+f).match("NaN")?"":f}),M.transition().attr("transform",function(a,b){return"translate("+(f(a)+(E?f.rangeBand()/2:0))+",0)"}));A&&F.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":v.enter().append("text").attr("class","nv-axislabel");v.style("text-anchor",B?"middle":"begin").attr("transform",B?"rotate(90)":"").attr("y",
B?-Math.max(k.right,t)+12:-10).attr("x",B?f.range()[0]/2:b.tickPadding());r&&(M=a.selectAll("g.nv-axisMaxMin").data(f.domain()),M.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),M.exit().remove(),M.attr("transform",function(a,b){return"translate(0,"+f(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var f=C(a);return(""+f).match("NaN")?"":f}),M.transition().attr("transform",function(a,
b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1));break;case "left":v.enter().append("text").attr("class","nv-axislabel"),v.style("text-anchor",B?"middle":"end").attr("transform",B?"rotate(-90)":"").attr("y",B?-Math.max(k.left,t)+L:-10).attr("x",B?-f.range()[0]/2:-b.tickPadding()),r&&(M=a.selectAll("g.nv-axisMaxMin").data(f.domain()),M.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),M.exit().remove(),M.attr("transform",function(a,b){return"translate(0,"+
S(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var f=C(a);return(""+f).match("NaN")?"":f}),M.transition().attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1))}v.text(function(a){return a});!r||"left"!==b.orient()&&"right"!==b.orient()||(p.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(r&&("top"===b.orient()||"bottom"===b.orient())){var K=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?K.push(f(a)-this.getBBox().width-4):K.push(f(a)+this.getBBox().width+4)}catch(g){b?K.push(f(a)-4):K.push(f(a)+4)}});p.selectAll("g").each(function(a,b){if(f(a)<K[0]||
f(a)>K[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}q&&p.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);S=f.copy()});return a}var b=d3.svg.axis(),k={top:0,right:0,bottom:0,left:0},t=75,p=60,f=d3.scale.linear(),g=null,r=!0,q=!0,I=0,B=!0,A=!1,E=!1,D=null,L=12;b.scale(f).orient("bottom").tickFormat(function(a){return a});var S;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,f,"domain","range","rangeBand","rangeBands");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.ticks=function(b){if(!arguments.length)return D;
D=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.axisLabel=function(b){if(!arguments.length)return g;g=b;return a};a.showMaxMin=function(b){if(!arguments.length)return r;r=b;return a};a.highlightZero=function(b){if(!arguments.length)return q;q=b;return a};a.scale=function(g){if(!arguments.length)return f;f=g;b.scale(f);E="function"===typeof f.rangeBands;d3.rebind(a,f,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return B;
B=b;return a};a.rotateLabels=function(b){if(!arguments.length)return I;I=b;return a};a.staggerLabels=function(b){if(!arguments.length)return A;A=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return L;L=b;return a};return a};v.models.historicalBar=function(){function a(T){T.each(function(a){var T=k-b.left-b.right,y=t-b.top-b.bottom,F=d3.select(this);f.domain(L||d3.extent(a[0].values.map(r).concat(I)));A?f.range(C||[.5*T/a[0].values.length,T*(a[0].values.length-.5)/a[0].values.length]):
f.range(C||[0,T]);g.domain(S||d3.extent(a[0].values.map(q).concat(B))).range(P||[y,0]);f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1]));g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]+.01*g.domain()[0],g.domain()[1]-.01*g.domain()[1]]):g.domain([-1,1]));var K=F.selectAll("g.nv-wrap.nv-historicalBar-"+p).data([a[0].values]),z=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
p),V=z.append("defs"),z=z.append("g"),O=K.select("g");z.append("g").attr("class","nv-bars");K.attr("transform","translate("+b.left+","+b.top+")");F.on("click",function(a,b){N.chartClick({data:a,index:b,pos:d3.event,id:p})});V.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");K.select("#nv-chart-clip-path-"+p+" rect").attr("width",T).attr("height",y);O.attr("clip-path",E?"url(#nv-chart-clip-path-"+p+")":"");y=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return r(a,b)});y.exit().remove();y.enter().append("rect").attr("x",0).attr("y",function(a,b){return v.utils.NaNtoZero(g(Math.max(0,q(a,b))))}).attr("height",function(a,b){return v.utils.NaNtoZero(Math.abs(g(q(a,b))-g(0)))}).attr("transform",function(b,g){return"translate("+(f(r(b,g))-T/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,k){G&&(d3.select(this).classed("hover",!0),N.elementMouseover({point:b,series:a[0],pos:[f(r(b,k)),g(q(b,k))],pointIndex:k,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,f){G&&(d3.select(this).classed("hover",!1),N.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){G&&(N.elementClick({value:q(a,b),data:a,index:b,pos:[f(r(a,b)),g(q(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())}).on("dblclick",function(a,b){G&&(N.elementDblClick({value:q(a,b),data:a,index:b,pos:[f(r(a,b)),g(q(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())});y.attr("fill",function(a,b){return D(a,b)}).attr("class",function(a,
b,f){return(0>q(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+f+"-"+b}).transition().attr("transform",function(b,g){return"translate("+(f(r(b,g))-T/a[0].values.length*.45)+",0)"}).attr("width",T/a[0].values.length*.9);y.transition().attr("y",function(a,b){var f=0>q(a,b)?g(0):1>g(0)-g(q(a,b))?g(0)-1:g(q(a,b));return v.utils.NaNtoZero(f)}).attr("height",function(a,b){return v.utils.NaNtoZero(Math.max(Math.abs(g(q(a,b))-g(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,
p=Math.floor(1E4*Math.random()),f=d3.scale.linear(),g=d3.scale.linear(),r=function(a){return a.x},q=function(a){return a.y},I=[],B=[0],A=!1,E=!0,D=v.utils.defaultColor(),L,S,C,P,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),G=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=N;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};
a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return L;L=b;return a};a.yDomain=function(b){if(!arguments.length)return S;S=b;return a};a.xRange=function(b){if(!arguments.length)return C;C=b;return a};a.yRange=function(b){if(!arguments.length)return P;P=b;return a};a.forceX=function(b){if(!arguments.length)return I;
I=b;return a};a.forceY=function(b){if(!arguments.length)return B;B=b;return a};a.padData=function(b){if(!arguments.length)return A;A=b;return a};a.clipEdge=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return D;D=v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.interactive=function(b){if(!arguments.length)return G;G=!1;return a};return a};v.models.bullet=function(){function a(k){k.each(function(a,k){var v=
q-b.left-b.right,D=I-b.top-b.bottom,B=d3.select(this),G=p.call(this,a,k).slice().sort(d3.descending),T=f.call(this,a,k).slice().sort(d3.descending),M=g.call(this,a,k).slice().sort(d3.descending),R=(a.rangeLabels?a.rangeLabels:[]).slice(),y=(a.markerLabels?a.markerLabels:[]).slice(),F=(a.measureLabels?a.measureLabels:[]).slice(),K=d3.scale.linear().domain(d3.extent(d3.merge([r,G]))).range(t?[v,0]:[0,v]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(K.range());this.__chart__=K;var v=
d3.min(G),z=d3.max(G),G=G[1],B=B.selectAll("g.nv-wrap.nv-bullet").data([a]),V=B.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),O=B.select("g");V.append("rect").attr("class","nv-range nv-rangeMax");V.append("rect").attr("class","nv-range nv-rangeAvg");V.append("rect").attr("class","nv-range nv-rangeMin");V.append("rect").attr("class","nv-measure");V.append("path").attr("class","nv-markerTriangle");B.attr("transform","translate("+b.left+","+b.top+")");var V=function(a){return Math.abs(K(a)-
K(0))},U=function(a){return 0>a?K(a):K(0)};O.select("rect.nv-rangeMax").attr("height",D).attr("width",V(0<z?z:v)).attr("x",U(0<z?z:v)).datum(0<z?z:v);O.select("rect.nv-rangeAvg").attr("height",D).attr("width",V(G)).attr("x",U(G)).datum(G);O.select("rect.nv-rangeMin").attr("height",D).attr("width",V(z)).attr("x",U(z)).attr("width",V(0<z?v:z)).attr("x",U(0<z?v:z)).datum(0<z?v:z);O.select("rect.nv-measure").style("fill",A).attr("height",D/3).attr("y",D/3).attr("width",0>M?K(0)-K(M[0]):K(M[0])-K(0)).attr("x",
U(M)).on("mouseover",function(){E.elementMouseover({value:M[0],label:F[0]||"Current",pos:[K(M[0]),D/2]})}).on("mouseout",function(){E.elementMouseout({value:M[0],label:F[0]||"Current"})});v=D/6;if(T[0])O.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+K(T[0])+","+D/2+")"}).attr("d","M0,"+v+"L"+v+","+-v+" "+-v+","+-v+"Z").on("mouseover",function(){E.elementMouseover({value:T[0],label:y[0]||"Previous",pos:[K(T[0]),D/2]})}).on("mouseout",function(){E.elementMouseout({value:T[0],
label:y[0]||"Previous"})});else O.selectAll("path.nv-markerTriangle").remove();B.selectAll(".nv-range").on("mouseover",function(a,b){E.elementMouseover({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[K(a),D/2]})}).on("mouseout",function(a,b){E.elementMouseout({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},k="left",t=!1,p=function(a){return a.ranges},f=function(a){return a.markers},g=function(a){return a.measures},r=[0],q=
380,I=30,B=null,A=v.utils.getColor(["#1f77b4"]),E=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=E;a.options=v.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return k;k=b;t="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return p;p=b;return a};a.markers=function(b){if(!arguments.length)return f;f=b;return a};a.measures=function(b){if(!arguments.length)return g;g=b;return a};a.forceX=function(b){if(!arguments.length)return r;r=b;return a};
a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;
A=v.utils.getColor(b);return a};return a};v.models.bulletChart=function(){function a(k){k.each(function(C,P){var N=d3.select(this),G=(q||parseInt(N.style("width"))||960)-p.left-p.right,T=I-p.top-p.bottom,M=this;a.update=function(){a(k)};a.container=this;if(C&&f.call(this,C,P))N.selectAll(".nv-noData").remove();else return N=N.selectAll(".nv-noData").data([D]),N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",p.left+G/2).attr("y",18+
p.top+T/2).text(function(a){return a}),a;var R=f.call(this,C,P).slice().sort(d3.descending),y=g.call(this,C,P).slice().sort(d3.descending),F=r.call(this,C,P).slice().sort(d3.descending),K=N.selectAll("g.nv-wrap.nv-bulletChart").data([C]),z=K.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),N=K.select("g");z.append("g").attr("class","nv-bulletWrap");z.append("g").attr("class","nv-titles");K.attr("transform","translate("+p.left+","+p.top+")");var V=d3.scale.linear().domain([0,
Math.max(R[0],y[0],F[0])]).range(t?[G,0]:[0,G]),O=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(V.range());this.__chart__=V;R=z.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(I-p.top-p.bottom)/2+")");R.append("text").attr("class","nv-title").text(function(a){return a.title});R.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(G).height(T);R=N.select(".nv-bulletWrap");d3.transition(R).call(b);
var U=B||V.tickFormat(G/100),G=N.selectAll("g.nv-tick").data(V.ticks(G/50),function(a){return this.textContent||U(a)}),N=G.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+O(a)+",0)"}).style("opacity",1E-6);N.append("line").attr("y1",T).attr("y2",7*T/6);N.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*T/6).text(U);N=d3.transition(G).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1);N.select("line").attr("y1",
T).attr("y2",7*T/6);N.select("text").attr("y",7*T/6);d3.transition(G.exit()).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1E-6).remove();L.on("tooltipShow",function(b){b.key=C.title;if(A){var f=M.parentNode,g=b.pos[0]+(f.offsetLeft||0)+p.left,m=b.pos[1]+(f.offsetTop||0)+p.top,k=E(b.key,b.label,b.value,b,a);v.tooltip.show([g,m],k,0>b.value?"e":"w",null,f)}})});d3.timer.flush();return a}var b=v.models.bullet(),k="left",t=!1,p={top:5,right:40,bottom:20,left:120},f=function(a){return a.ranges},
g=function(a){return a.markers},r=function(a){return a.measures},q=null,I=55,B=null,A=!0,E=function(a,b,f,g,k){return"<h3>"+b+"</h3><p>"+f+"</p>"},D="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){L.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){A&&v.tooltip.cleanup()});a.dispatch=L;a.bullet=b;d3.rebind(a,b,"color");a.options=v.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return k;k=b;t="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return f;f=b;return a};a.markers=function(b){if(!arguments.length)return g;g=b;return a};a.measures=function(b){if(!arguments.length)return r;r=b;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;
p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.tickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.tooltips=function(b){if(!arguments.length)return A;A=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return D;D=b;return a};return a};v.models.cumulativeLineChart=function(){function a(m){m.each(function(m){function H(){oa.data([W]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var J=d3.select(this).classed("nv-chart-"+y,!0),ia=this,Y=(B||parseInt(J.style("width"))||960)-q.left-q.right,fa=(A||parseInt(J.style("height"))||400)-q.top-q.bottom;a.update=function(){J.transition().duration(U).call(a)};a.container=this;F.disabled=m.map(function(a){return!!a.disabled});if(!K){var ja;K={};for(ja in F)K[ja]=F[ja]instanceof Array?F[ja].slice(0):F[ja]}ja=d3.behavior.drag().on("dragstart",function(b,
m){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){W.x=d3.event.x;W.i=Math.round(ba.invert(W.x));H()}).on("dragend",function(b,m){d3.select(a.container).style("cursor","auto");F.index=W.i;O.stateChange(F)});if(m&&m.length&&m.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return ja=J.selectAll(".nv-noData").data([z]),ja.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ja.attr("x",
q.left+Y/2).attr("y",q.top+fa/2).text(function(a){return a}),a;M=k.xScale();R=k.yScale();if(G)k.yDomain(null);else{var ca=m.filter(function(a){return!a.disabled}).map(function(a,b){var m=d3.extent(a.values,k.y());-.95>m[0]&&(m[0]=-.95);return[(m[0]-m[1])/(1+m[1]),(m[1]-m[0])/(1+m[0])]}),ca=[d3.min(ca,function(a){return a[0]}),d3.max(ca,function(a){return a[1]})];k.yDomain(ca)}ba.domain([0,m[0].values.length-1]).range([0,Y]).clamp(!0);m=b(W.i,m);var aa=N?"none":"all",na=J.selectAll("g.nv-wrap.nv-cumulativeLine").data([m]),
ha=na.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ca=na.select("g");ha.append("g").attr("class","nv-interactive");ha.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-background");ha.append("g").attr("class","nv-linesWrap").style("pointer-events",aa);ha.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ha.append("g").attr("class","nv-legendWrap");
ha.append("g").attr("class","nv-controlsWrap");E&&(f.width(Y),ca.select(".nv-legendWrap").datum(m).call(f),q.top!=f.height()&&(q.top=f.height(),fa=(A||parseInt(J.style("height"))||400)-q.top-q.bottom),ca.select(".nv-legendWrap").attr("transform","translate(0,"+-q.top+")"));P&&(aa=[{key:"Re-scale y-axis",disabled:!G}],g.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ca.select(".nv-controlsWrap").datum(aa).attr("transform","translate(0,"+-q.top+")").call(g));
na.attr("transform","translate("+q.left+","+q.top+")");S&&ca.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");aa=m.filter(function(a){return a.tempDisabled});na.select(".tempDisabled").remove();aa.length&&na.append("text").attr("class","tempDisabled").attr("x",Y/2).attr("y","-.71em").style("text-anchor","end").text(aa.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");N&&(r.width(Y).height(fa).margin({left:q.left,top:q.top}).svgContainer(J).xScale(M),
na.select(".nv-interactive").call(r));ha.select(".nv-background").append("rect");ca.select(".nv-background rect").attr("width",Y).attr("height",fa);k.y(function(a){return a.display.y}).width(Y).height(fa).color(m.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!m[b].disabled&&!m[b].tempDisabled}));na=ca.select(".nv-linesWrap").datum(m.filter(function(a){return!a.disabled&&!a.tempDisabled}));na.call(k);m.forEach(function(a,b){a.seriesIndex=b});ha=m.filter(function(a){return!a.disabled&&
!!V(a)});ha=ca.select(".nv-avgLinesWrap").selectAll("line").data(ha,function(a){return a.key});aa=function(a){a=R(V(a));return 0>a?0:a>fa?fa:a};ha.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return k.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",Y).attr("y1",aa).attr("y2",aa);ha.style("stroke-opacity",function(a){a=R(V(a));return 0>a||a>fa?0:1}).attr("x1",0).attr("x2",Y).attr("y1",aa).attr("y2",aa);ha.exit().remove();var oa=na.selectAll(".nv-indexLine").data([W]);
oa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ja);oa.attr("transform",function(a){return"translate("+ba(a.i)+",0)"}).attr("height",fa);D&&(t.scale(M).ticks(Math.min(m[0].values.length,Y/70)).tickSize(-fa,0),ca.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),d3.transition(ca.select(".nv-x.nv-axis")).call(t));L&&(p.scale(R).ticks(fa/36).tickSize(-Y,0),d3.transition(ca.select(".nv-y.nv-axis")).call(p));
ca.select(".nv-background rect").on("click",function(){W.x=d3.mouse(this)[0];W.i=Math.round(ba.invert(W.x));F.index=W.i;O.stateChange(F);H()});k.dispatch.on("elementClick",function(a){W.i=a.pointIndex;W.x=ba(W.i);F.index=W.i;O.stateChange(F);H()});g.dispatch.on("legendClick",function(b,m){b.disabled=!b.disabled;G=!b.disabled;F.rescaleY=G;O.stateChange(F);a.update()});f.dispatch.on("stateChange",function(b){F.disabled=b.disabled;O.stateChange(F);a.update()});r.dispatch.on("elementMousemove",function(b){k.clearHighlights();
var f,g,z,y=[];m.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(m,p){g=v.interactiveBisect(m.values,b.pointXValue,a.x());k.highlightPoint(p,g,!0);var q=m.values[g];"undefined"!==typeof q&&("undefined"===typeof f&&(f=q),"undefined"===typeof z&&(z=a.xScale()(a.x()(q,g))),y.push({key:m.key,value:a.y()(q,g),color:I(m,m.seriesIndex)}))});if(2<y.length){var F=a.yScale().invert(b.mouseY),K=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),F=v.nearestValueIndex(y.map(function(a){return a.value}),
F,K);null!==F&&(y[F].highlight=!0)}F=t.tickFormat()(a.x()(f,g),g);r.tooltip.position({left:z+q.left,top:b.mouseY+q.top}).chartContainer(ia.parentNode).enabled(C).valueFormatter(function(a,b){return p.tickFormat()(a)}).data({value:F,series:y})();r.renderGuideLine(z)});r.dispatch.on("elementMouseout",function(a){O.tooltipHide();k.clearHighlights()});O.on("tooltipShow",function(b){if(C){var m=ia.parentNode,f=b.pos[0]+(m.offsetLeft||0),g=b.pos[1]+(m.offsetTop||0),q=t.tickFormat()(k.x()(b.point,b.pointIndex)),
r=p.tickFormat()(k.y()(b.point,b.pointIndex));b=T(b.series.key,q,r,b,a);v.tooltip.show([f,g],b,null,null,m)}});O.on("changeState",function(b){"undefined"!==typeof b.disabled&&(m.forEach(function(a,m){a.disabled=b.disabled[m]}),F.disabled=b.disabled);"undefined"!==typeof b.index&&(W.i=b.index,W.x=ba(W.i),F.index=b.index,oa.data([W]));"undefined"!==typeof b.rescaleY&&(G=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,f){if(!b.values)return b;var g=b.values[a];if(null==g)return b;
var p=k.y()(g,a);if(-.95>p&&!H)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(k.y()(a,b)-p)/(1+p)};return a});return b})}var k=v.models.line(),t=v.models.axis(),p=v.models.axis(),f=v.models.legend(),g=v.models.legend(),r=v.interactiveGuideline(),q={top:30,right:30,bottom:50,left:60},I=v.utils.defaultColor(),B=null,A=null,E=!0,D=!0,L=!0,S=!1,C=!0,P=!0,N=!1,G=!0,T=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},M,R,y=k.id(),F={index:0,
rescaleY:G},K=null,z="No Data Available.",V=function(a){return a.average},O=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),U=250,H=!1;t.orient("bottom").tickPadding(7);p.orient(S?"right":"left");g.updateState(!1);var ba=d3.scale.linear(),W={i:0,x:0};k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];O.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){C&&v.tooltip.cleanup()});
a.dispatch=O;a.lines=k;a.legend=f;a.xAxis=t;a.yAxis=p;a.interactiveLayer=r;d3.rebind(a,k,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left=
"undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return B;B=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);f.color(I);return a};a.rescaleY=function(b){if(!arguments.length)return G;G=b;return a};a.showControls=function(b){if(!arguments.length)return P;P=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return N;N=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return L;L=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;p.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return C;C=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return F;
F=b;return a};a.defaultState=function(b){if(!arguments.length)return K;K=b;return a};a.noData=function(b){if(!arguments.length)return z;z=b;return a};a.average=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return H;H=b;return a};return a};v.models.discreteBar=function(){function a(p){p.each(function(a){var p=k-b.left-b.right,y=t-b.top-b.bottom,v=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var K=D&&L?[]:a.map(function(a){return a.values.map(function(a,b){return{x:r(a,b),y:q(a,b),y0:a.y0}})});f.domain(D||d3.merge(K).map(function(a){return a.x})).rangeBands(S||[0,p],.1);g.domain(L||d3.extent(d3.merge(K).map(function(a){return a.y}).concat(I)));A?g.range(C||[y-(0>g.domain()[0]?12:0),0<g.domain()[1]?12:0]):g.range(C||[y,0]);G=G||g.copy().range([g(0),g(0)]);p=v.selectAll("g.nv-wrap.nv-discretebar").data([a]);y=p.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");p.select("g");y.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
p.transition().style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();y=p.enter().append("g").attr("transform",function(a,b,k){return"translate("+(f(r(a,b))+.05*f.rangeBand())+", "+g(0)+")"}).on("mouseover",function(b,k){d3.select(this).classed("hover",!0);P.elementMouseover({value:q(b,k),point:b,series:a[b.series],pos:[f(r(b,k))+f.rangeBand()*(b.series+.5)/a.length,g(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,f){d3.select(this).classed("hover",!1);P.elementMouseout({value:q(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){P.elementClick({value:q(b,k),point:b,series:a[b.series],pos:[f(r(b,k))+f.rangeBand()*(b.series+.5)/a.length,g(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,k){P.elementDblClick({value:q(b,k),point:b,series:a[b.series],pos:[f(r(b,k))+f.rangeBand()*(b.series+
.5)/a.length,g(q(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});y.append("rect").attr("height",0).attr("width",.9*f.rangeBand()/a.length);A?(y.append("text").attr("text-anchor","middle"),p.select("text").text(function(a,b){return E(q(a,b))}).transition().attr("x",.9*f.rangeBand()/2).attr("y",function(a,b){return 0>q(a,b)?g(q(a,b))-g(0)+12:-4})):p.selectAll("text").remove();p.attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||B(a,b)}).style("stroke",function(a,b){return a.color||B(a,b)}).select("rect").attr("class",N).transition().attr("width",.9*f.rangeBand()/a.length);p.transition().attr("transform",function(a,b){var k=f(r(a,b))+.05*f.rangeBand(),p=0>q(a,b)?g(0):1>g(0)-g(q(a,b))?g(0)-1:g(q(a,b));return"translate("+k+", "+p+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(g(q(a,b))-g(L&&L[0]||0))||1)});f.copy();G=g.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},k=960,t=500,p=Math.floor(1E4*Math.random()),f=d3.scale.ordinal(),g=d3.scale.linear(),r=function(a){return a.x},q=function(a){return a.y},I=[0],B=v.utils.defaultColor(),A=!1,E=d3.format(",.2f"),D,L,S,C,P=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),N="discreteBar",G;a.dispatch=P;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=
function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;
return a};a.xDomain=function(b){if(!arguments.length)return D;D=b;return a};a.yDomain=function(b){if(!arguments.length)return L;L=b;return a};a.xRange=function(b){if(!arguments.length)return S;S=b;return a};a.yRange=function(b){if(!arguments.length)return C;C=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return B;B=v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.showValues=function(b){if(!arguments.length)return A;
A=b;return a};a.valueFormat=function(b){if(!arguments.length)return E;E=b;return a};a.rectClass=function(b){if(!arguments.length)return N;N=b;return a};return a};v.models.discreteBarChart=function(){function a(r){r.each(function(r){var G=d3.select(this),R=this,y=(f||parseInt(G.style("width"))||960)-p.left-p.right,F=(g||parseInt(G.style("height"))||400)-p.top-p.bottom;a.update=function(){P.beforeUpdate();G.transition().duration(N).call(a)};a.container=this;if(r&&r.length&&r.filter(function(a){return a.values.length}).length)G.selectAll(".nv-noData").remove();
else return r=G.selectAll(".nv-noData").data([C]),r.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),r.attr("x",p.left+y/2).attr("y",p.top+F/2).text(function(a){return a}),a;L=b.xScale();S=b.yScale().clamp(!0);var K=G.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([r]),z=K.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),V=z.append("defs"),K=K.select("g");z.append("g").attr("class","nv-x nv-axis");z.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");z.append("g").attr("class","nv-barsWrap");K.attr("transform","translate("+p.left+","+p.top+")");B&&K.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");b.width(y).height(F);K.select(".nv-barsWrap").datum(r.filter(function(a){return!a.disabled})).transition().call(b);V.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");K.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",L.rangeBand()*(A?2:1)).attr("height",
16).attr("x",-L.rangeBand()/(A?1:2));q&&(k.scale(L).ticks(y/100).tickSize(-F,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+(S.range()[0]+(b.showValues()&&0>S.domain()[0]?16:0))+")"),K.select(".nv-x.nv-axis").transition().call(k),r=K.select(".nv-x.nv-axis").selectAll("g"),A&&r.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?"5":"17")+")"}));I&&(t.scale(S).ticks(F/36).tickSize(-y,0),K.select(".nv-y.nv-axis").transition().call(t));K.select(".nv-zeroLine line").attr("x1",
0).attr("x2",y).attr("y1",S(0)).attr("y2",S(0));P.on("tooltipShow",function(f){if(E){var g=R.parentNode,p=f.pos[0]+(g.offsetLeft||0),q=f.pos[1]+(g.offsetTop||0),r=k.tickFormat()(b.x()(f.point,f.pointIndex)),m=t.tickFormat()(b.y()(f.point,f.pointIndex)),r=D(f.series.key,r,m,f,a);v.tooltip.show([p,q],r,0>f.value?"n":"s",null,g)}})});return a}var b=v.models.discreteBar(),k=v.models.axis(),t=v.models.axis(),p={top:15,right:10,bottom:50,left:60},f=null,g=null,r=v.utils.getColor(),q=!0,I=!0,B=!1,A=!1,E=
!0,D=function(a,b,f,g,k){return"<h3>"+b+"</h3><p>"+f+"</p>"},L,S,C="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),N=250;k.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient(B?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+p.left,a.pos[1]+p.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){E&&
v.tooltip.cleanup()});a.dispatch=P;a.discretebar=b;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return f;
f=b;return a};a.height=function(b){if(!arguments.length)return g;g=b;return a};a.color=function(f){if(!arguments.length)return r;r=v.utils.getColor(f);b.color(r);return a};a.showXAxis=function(b){if(!arguments.length)return q;q=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return B;B=b;t.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return A;A=b;return a};a.tooltips=function(b){if(!arguments.length)return E;
E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return D;D=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return N;N=b;return a};return a};v.models.distribution=function(){function a(k){k.each(function(a){var k="x"==p?"y":"x",v=d3.select(this);q=q||r;a=v.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");v=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=v.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return g(a,b)});v=a.selectAll("line.nv-dist"+p).data(function(a){return a.values});v.enter().append("line").attr(p+"1",function(a,b){return q(f(a,b))}).attr(p+"2",function(a,b){return q(f(a,b))});a.exit().selectAll("line.nv-dist"+p).transition().attr(p+"1",function(a,b){return r(f(a,
b))}).attr(p+"2",function(a,b){return r(f(a,b))}).style("stroke-opacity",0).remove();v.attr("class",function(a,b){return"nv-dist"+p+" nv-dist"+p+"-"+b}).attr(k+"1",0).attr(k+"2",t);v.transition().attr(p+"1",function(a,b){return r(f(a,b))}).attr(p+"2",function(a,b){return r(f(a,b))});q=r.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=400,t=8,p="x",f=function(a){return a[p]},g=v.utils.defaultColor(),r=d3.scale.linear(),q;a.options=v.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.axis=function(b){if(!arguments.length)return p;p=b;return a};a.size=function(b){if(!arguments.length)return t;t=b;return a};a.getData=function(b){if(!arguments.length)return f;f=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return r;
r=b;return a};a.color=function(b){if(!arguments.length)return g;g=v.utils.getColor(b);return a};return a};v.models.historicalBarChart=function(){function a(R){R.each(function(y){var F=d3.select(this),K=this,z=(r||parseInt(F.style("width"))||960)-f.left-f.right,V=(q||parseInt(F.style("height"))||400)-f.top-f.bottom;a.update=function(){F.transition().duration(M).call(a)};a.container=this;P.disabled=y.map(function(a){return!!a.disabled});if(!N){var O;N={};for(O in P)N[O]=P[O]instanceof Array?P[O].slice(0):
P[O]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)F.selectAll(".nv-noData").remove();else return O=F.selectAll(".nv-noData").data([G]),O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",f.left+z/2).attr("y",f.top+V/2).text(function(a){return a}),a;S=b.xScale();C=b.yScale();var U=F.selectAll("g.nv-wrap.nv-historicalBarChart").data([y]);O=U.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var H=U.select("g");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-barsWrap");O.append("g").attr("class","nv-legendWrap");I&&(p.width(z),H.select(".nv-legendWrap").datum(y).call(p),f.top!=p.height()&&(f.top=p.height(),V=(q||parseInt(F.style("height"))||400)-f.top-f.bottom),U.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"));U.attr("transform","translate("+f.left+","+f.top+")");E&&H.select(".nv-y.nv-axis").attr("transform",
"translate("+z+",0)");b.width(z).height(V).color(y.map(function(a,b){return a.color||g(a,b)}).filter(function(a,b){return!y[b].disabled}));H.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);B&&(k.scale(S).tickSize(-V,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")"),H.select(".nv-x.nv-axis").transition().call(k));A&&(t.scale(C).ticks(V/36).tickSize(-z,0),H.select(".nv-y.nv-axis").transition().call(t));p.dispatch.on("legendClick",
function(b,f){b.disabled=!b.disabled;y.filter(function(a){return!a.disabled}).length||y.map(function(a){a.disabled=!1;U.selectAll(".nv-series").classed("disabled",!1);return a});P.disabled=y.map(function(a){return!!a.disabled});T.stateChange(P);R.transition().call(a)});p.dispatch.on("legendDblclick",function(b){y.forEach(function(a){a.disabled=!0});b.disabled=!1;P.disabled=y.map(function(a){return!!a.disabled});T.stateChange(P);a.update()});T.on("tooltipShow",function(f){if(D){var g=K.parentNode;
if(g){var m=d3.select(g).select("svg"),p=m.node()?m.attr("viewBox"):null;p&&(p=p.split(" "),m=parseInt(m.style("width"))/p[2],f.pos[0]*=m,f.pos[1]*=m)}var m=f.pos[0]+(g.offsetLeft||0),p=f.pos[1]+(g.offsetTop||0),q=k.tickFormat()(b.x()(f.point,f.pointIndex)),r=t.tickFormat()(b.y()(f.point,f.pointIndex));f=L(f.series.key,q,r,f,a);v.tooltip.show([m,p],f,null,null,g)}});T.on("changeState",function(b){"undefined"!==typeof b.disabled&&(y.forEach(function(a,m){a.disabled=b.disabled[m]}),P.disabled=b.disabled);
a.update()})});return a}var b=v.models.historicalBar(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f={top:30,right:90,bottom:50,left:90},g=v.utils.defaultColor(),r=null,q=null,I=!1,B=!0,A=!0,E=!1,D=!0,L=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},S,C,P={},N=null,G="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M=250;k.orient("bottom").tickPadding(7);t.orient(E?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+f.left,a.pos[1]+f.top];T.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){T.tooltipHide(a)});T.on("tooltipHide",function(){D&&v.tooltip.cleanup()});a.dispatch=T;a.bars=b;a.legend=p;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=v.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return f;f.top="undefined"!=typeof b.top?b.top:f.top;f.right="undefined"!=typeof b.right?b.right:f.right;f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom;f.left="undefined"!=typeof b.left?b.left:f.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return g;g=v.utils.getColor(b);p.color(g);return a};a.showLegend=function(b){if(!arguments.length)return I;
I=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return A;A=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return E;E=b;t.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return D;D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return L;L=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return N;
N=b;return a};a.noData=function(b){if(!arguments.length)return G;G=b;return a};a.transitionDuration=function(b){if(!arguments.length)return M;M=b;return a};return a};v.models.indentedTree=function(){function a(b){b.each(function(b){function f(b,g,k){d3.event.stopPropagation();if(d3.event.shiftKey&&!k)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&f(a,0,!0)}),!0;if(!v(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function k(a){return a._values&&a._values.length?A:a.values&&a.values.length?E:""}function p(a){return a._values&&a._values.length}function v(a){return(a=a.values||a._values)&&a.length}var C=1,y=d3.select(this),F=d3.layout.tree().children(function(a){return a.values}).size([t,20]);a.update=function(){y.transition().duration(600).call(a)};b[0]||(b[0]={key:q});var C=F.nodes(b[0]),K=d3.select(this).selectAll("div").data([[C]]);b=K.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
K=K.select("table").attr("width","100%").attr("class",B);if(g){var z=b.append("thead").append("tr");I.forEach(function(a){z.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=K.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");C=d3.max(C,function(a){return a.depth});F.size([t,20*C]);var V=b.selectAll("tr").data(function(a){return a.filter(function(a){return r&&!a.children?r(a):!0})},function(a,
b){return a.id||a.id||++S});V.exit().remove();V.select("img.nv-treeicon").attr("src",k).classed("folded",p);var O=V.enter().append("tr");I.forEach(function(a,b){var g=O.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(k(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)g.append("img").classed("nv-treeicon",!0).classed("nv-folded",p).attr("src",k).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return k(a)?
"inline-block":"none"}).on("click",f);g.each(function(f){!b&&L(f)?d3.select(this).append("a").attr("href",L).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(g.append("span").attr("class","nv-childrenCount"),V.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return r?r(a):!0}).length||a._values&&a._values.filter(function(a){return r?r(a):!0}).length||0)+")":""}))});V.order().on("click",function(a){D.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){D.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){D.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){D.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=v.utils.defaultColor(),f=Math.floor(1E4*Math.random()),g=!0,r=!1,q="No Data Available.",I=[{key:"key",label:"Name",type:"text"}],B=null,A="images/grey-plus.png",E="images/grey-minus.png",D=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),L=function(a){return a.url},S=0;a.options=v.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return p;p=v.utils.getColor(b);scatter.color(p);return a};a.id=function(b){if(!arguments.length)return f;f=b;return a};a.header=function(b){if(!arguments.length)return g;g=b;return a};a.noData=
function(b){if(!arguments.length)return q;q=b;return a};a.filterZero=function(b){if(!arguments.length)return r;r=b;return a};a.columns=function(b){if(!arguments.length)return I;I=b;return a};a.tableClass=function(b){if(!arguments.length)return B;B=b;return a};a.iconOpen=function(b){if(!arguments.length)return A;A=b;return a};a.iconClose=function(b){if(!arguments.length)return E;E=b;return a};a.getUrl=function(b){if(!arguments.length)return L;L=b;return a};return a};v.models.legend=function(){function a(A){A.each(function(a){var A=
k-b.left-b.right,L=d3.select(this).selectAll("g.nv-legend").data([a]);L.enter().append("g").attr("class","nvd3 nv-legend").append("g");var S=L.select("g");L.attr("transform","translate("+b.left+","+b.top+")");var L=S.selectAll(".nv-series").data(function(a){return a}),C=L.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){B.legendMouseover(a,b)}).on("mouseout",function(a,b){B.legendMouseout(a,b)}).on("click",function(b,f){B.legendClick(b,f);q&&(I?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),B.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,f){B.legendDblclick(b,f);q&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,B.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);C.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");L.classed("disabled",function(a){return a.disabled});L.exit().remove();L.select("circle").style("fill",function(a,b){return a.color||f(a,b)}).style("stroke",function(a,b){return a.color||f(a,b)});L.select("text").text(p);if(g){var P=[];L.each(function(a,b){var f=d3.select(this).select("text"),g;try{if(g=f.getComputedTextLength(),0>=g)throw Error();}catch(k){g=v.utils.calcApproxTextWidth(f)}P.push(g+28)});for(var N=0,G=0,C=[];G<A&&N<P.length;)C[N]=
P[N],G+=P[N++];for(0===N&&(N=1);G>A&&1<N;){C=[];N--;for(G=0;G<P.length;G++)P[G]>(C[G%N]||0)&&(C[G%N]=P[G]);G=C.reduce(function(a,b,f,g){return a+b})}for(var T=[],M=A=0;A<N;A++)T[A]=M,M+=C[A];L.attr("transform",function(a,b){return"translate("+T[b%N]+","+(5+20*Math.floor(b/N))+")"});r?S.attr("transform","translate("+(k-b.right-G)+","+b.top+")"):S.attr("transform","translate(0,"+b.top+")");t=b.top+b.bottom+20*Math.ceil(P.length/N)}else{var R=5,y=5,F=0,K;L.attr("transform",function(a,f){var g=d3.select(this).select("text").node().getComputedTextLength()+
28;K=y;k<b.left+b.right+K+g&&(y=K=5,R+=20);y+=g;y>F&&(F=y);return"translate("+K+","+R+")"});S.attr("transform","translate("+(k-b.right-F)+","+b.top+")");t=b.top+b.bottom+R+15}});return a}var b={top:5,right:0,bottom:5,left:0},k=400,t=20,p=function(a){return a.key},f=v.utils.defaultColor(),g=!0,r=!0,q=!0,I=!1,B=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=B;a.options=v.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.key=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return f;f=v.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return g;
g=b;return a};a.rightAlign=function(b){if(!arguments.length)return r;r=b;return a};a.updateState=function(b){if(!arguments.length)return q;q=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return I;I=b;return a};return a};v.models.line=function(){function a(C){C.each(function(a){var C=t-k.left-k.right,G=p-k.top-k.bottom,T=d3.select(this);A=b.xScale();E=b.yScale();L=L||A;S=S||E;a=T.selectAll("g.nv-wrap.nv-line").data([a]);var M=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
T=M.append("defs"),R=M.append("g"),M=a.select("g");R.append("g").attr("class","nv-groups");R.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+k.left+","+k.top+")");b.width(C).height(G);R=a.select(".nv-scatterWrap");R.transition().call(b);T.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",C).attr("height",0<G?G:0);M.attr("clip-path",B?"url(#nv-edge-clip-"+b.id()+")":"");R.attr("clip-path",B?"url(#nv-edge-clip-"+
b.id()+")":"");C=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});C.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);C.exit().remove();C.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return f(a,b)}).style("stroke",function(a,b){return f(a,b)});C.transition().style("stroke-opacity",1).style("fill-opacity",.5);G=C.selectAll("path.nv-area").data(function(a){return I(a)?
[a]:[]});G.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(D).defined(q).x(function(a,b){return v.utils.NaNtoZero(L(g(a,b)))}).y0(function(a,b){return v.utils.NaNtoZero(S(r(a,b)))}).y1(function(a,b){return S(0>=E.domain()[0]?0<=E.domain()[1]?0:E.domain()[1]:E.domain()[0])}).apply(this,[a.values])});C.exit().selectAll("path.nv-area").remove();G.transition().attr("d",function(a){return d3.svg.area().interpolate(D).defined(q).x(function(a,b){return v.utils.NaNtoZero(A(g(a,
b)))}).y0(function(a,b){return v.utils.NaNtoZero(E(r(a,b)))}).y1(function(a,b){return E(0>=E.domain()[0]?0<=E.domain()[1]?0:E.domain()[1]:E.domain()[0])}).apply(this,[a.values])});C=C.selectAll("path.nv-line").data(function(a){return[a.values]});C.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(D).defined(q).x(function(a,b){return v.utils.NaNtoZero(L(g(a,b)))}).y(function(a,b){return v.utils.NaNtoZero(S(r(a,b)))}));C.transition().attr("d",d3.svg.line().interpolate(D).defined(q).x(function(a,
b){return v.utils.NaNtoZero(A(g(a,b)))}).y(function(a,b){return v.utils.NaNtoZero(E(r(a,b)))}));L=A.copy();S=E.copy()});return a}var b=v.models.scatter(),k={top:0,right:0,bottom:0,left:0},t=960,p=500,f=v.utils.defaultColor(),g=function(a){return a.x},r=function(a){return a.y},q=function(a,b){return!isNaN(r(a,b))&&null!==r(a,b)},I=function(a){return a.area},B=!1,A,E,D="linear";b.size(16).sizeDomain([16,256]);var L,S;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;
t=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.x=function(f){if(!arguments.length)return g;g=f;b.x(f);return a};a.y=function(f){if(!arguments.length)return r;r=f;b.y(f);return a};a.clipEdge=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(g){if(!arguments.length)return f;f=v.utils.getColor(g);b.color(f);return a};a.interpolate=function(b){if(!arguments.length)return D;D=b;return a};a.defined=function(b){if(!arguments.length)return q;q=b;return a};
a.isArea=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};return a};v.models.lineChart=function(){function a(F){F.each(function(F){var z=d3.select(this),V=this,O=(q||parseInt(z.style("width"))||960)-g.left-g.right,U=(I||parseInt(z.style("height"))||400)-g.top-g.bottom;a.update=function(){z.transition().duration(y).call(a)};a.container=this;G.disabled=F.map(function(a){return!!a.disabled});if(!T){var H;T={};for(H in G)T[H]=G[H]instanceof Array?G[H].slice(0):G[H]}if(F&&F.length&&
F.filter(function(a){return a.values.length}).length)z.selectAll(".nv-noData").remove();else return H=z.selectAll(".nv-noData").data([M]),H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",g.left+O/2).attr("y",g.top+U/2).text(function(a){return a}),a;P=b.xScale();N=b.yScale();H=z.selectAll("g.nv-wrap.nv-lineChart").data([F]);var ba=H.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),W=H.select("g");ba.append("rect").style("opacity",
0);ba.append("g").attr("class","nv-x nv-axis");ba.append("g").attr("class","nv-y nv-axis");ba.append("g").attr("class","nv-linesWrap");ba.append("g").attr("class","nv-legendWrap");ba.append("g").attr("class","nv-interactive");W.select("rect").attr("width",O).attr("height",0<U?U:0);B&&(p.width(O),W.select(".nv-legendWrap").datum(F).call(p),g.top!=p.height()&&(g.top=p.height(),U=(I||parseInt(z.style("height"))||400)-g.top-g.bottom),H.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")"));
H.attr("transform","translate("+g.left+","+g.top+")");D&&W.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)");L&&(f.width(O).height(U).margin({left:g.left,top:g.top}).svgContainer(z).xScale(P),H.select(".nv-interactive").call(f));b.width(O).height(U).color(F.map(function(a,b){return a.color||r(a,b)}).filter(function(a,b){return!F[b].disabled}));W.select(".nv-linesWrap").datum(F.filter(function(a){return!a.disabled})).transition().call(b);A&&(k.scale(P).ticks(O/100).tickSize(-U,0),W.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+N.range()[0]+")"),W.select(".nv-x.nv-axis").transition().call(k));E&&(t.scale(N).ticks(U/36).tickSize(-O,0),W.select(".nv-y.nv-axis").transition().call(t));p.dispatch.on("stateChange",function(b){G=b;R.stateChange(G);a.update()});f.dispatch.on("elementMousemove",function(m){b.clearHighlights();var p,q,y,z=[];F.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(f,g){q=v.interactiveBisect(f.values,m.pointXValue,a.x());b.highlightPoint(g,q,!0);var k=f.values[q];
"undefined"!==typeof k&&("undefined"===typeof p&&(p=k),"undefined"===typeof y&&(y=a.xScale()(a.x()(k,q))),z.push({key:f.key,value:a.y()(k,q),color:r(f,f.seriesIndex)}))});if(2<z.length){var H=a.yScale().invert(m.mouseY),C=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),H=v.nearestValueIndex(z.map(function(a){return a.value}),H,C);null!==H&&(z[H].highlight=!0)}H=k.tickFormat()(a.x()(p,q));f.tooltip.position({left:y+g.left,top:m.mouseY+g.top}).chartContainer(V.parentNode).enabled(S).valueFormatter(function(a,
b){return t.tickFormat()(a)}).data({value:H,series:z})();f.renderGuideLine(y)});f.dispatch.on("elementMouseout",function(a){R.tooltipHide();b.clearHighlights()});R.on("tooltipShow",function(f){if(S){var g=V.parentNode,p=f.pos[0]+(g.offsetLeft||0),q=f.pos[1]+(g.offsetTop||0),r=k.tickFormat()(b.x()(f.point,f.pointIndex)),y=t.tickFormat()(b.y()(f.point,f.pointIndex));f=C(f.series.key,r,y,f,a);v.tooltip.show([p,q],f,null,null,g)}});R.on("changeState",function(b){"undefined"!==typeof b.disabled&&F.length===
b.disabled.length&&(F.forEach(function(a,f){a.disabled=b.disabled[f]}),G.disabled=b.disabled);a.update()})});return a}var b=v.models.line(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f=v.interactiveGuideline(),g={top:30,right:20,bottom:50,left:60},r=v.utils.defaultColor(),q=null,I=null,B=!0,A=!0,E=!0,D=!1,L=!1,S=!0,C=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},P,N,G={},T=null,M="No Data Available.",R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
y=250;k.orient("bottom").tickPadding(7);t.orient(D?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){S&&v.tooltip.cleanup()});a.dispatch=R;a.lines=b;a.legend=p;a.xAxis=k;a.yAxis=t;a.interactiveLayer=f;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=
function(b){if(!arguments.length)return r;r=v.utils.getColor(b);p.color(r);return a};a.showLegend=function(b){if(!arguments.length)return B;B=b;return a};a.showXAxis=function(b){if(!arguments.length)return A;A=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;E=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return D;D=b;t.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return L;L=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return S;S=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.state=function(b){if(!arguments.length)return G;G=b;return a};a.defaultState=function(b){if(!arguments.length)return T;T=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};a.transitionDuration=function(b){if(!arguments.length)return y;y=b;return a};return a};v.models.linePlusBarChart=function(){function a(y){y.each(function(y){var K=
d3.select(this),z=this,B=(q||parseInt(K.style("width"))||960)-r.left-r.right,O=(I||parseInt(K.style("height"))||400)-r.top-r.bottom;a.update=function(){K.transition().call(a)};G.disabled=y.map(function(a){return!!a.disabled});if(!T){var A;T={};for(A in G)T[A]=G[A]instanceof Array?G[A].slice(0):G[A]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return A=K.selectAll(".nv-noData").data([M]),A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),A.attr("x",r.left+B/2).attr("y",r.top+O/2).text(function(a){return a}),a;A=y.filter(function(a){return!a.disabled&&a.bar});var H=y.filter(function(a){return!a.bar});C=H.filter(function(a){return!a.disabled}).length&&H.filter(function(a){return!a.disabled})[0].values.length?b.xScale():k.xScale();P=k.yScale();N=b.yScale();var ba=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([y]),W=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
m=ba.select("g");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y1 nv-axis");W.append("g").attr("class","nv-y2 nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-linesWrap");W.append("g").attr("class","nv-legendWrap");D&&(g.width(B/2),m.select(".nv-legendWrap").datum(y.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(g),r.top!=g.height()&&(r.top=
g.height(),O=(I||parseInt(K.style("height"))||400)-r.top-r.bottom),m.select(".nv-legendWrap").attr("transform","translate("+B/2+","+-r.top+")"));ba.attr("transform","translate("+r.left+","+r.top+")");b.width(B).height(O).color(y.map(function(a,b){return a.color||E(a,b)}).filter(function(a,b){return!y[b].disabled&&!y[b].bar}));k.width(B).height(O).color(y.map(function(a,b){return a.color||E(a,b)}).filter(function(a,b){return!y[b].disabled&&y[b].bar}));ba=m.select(".nv-barsWrap").datum(A.length?A:[{values:[]}]);
W=m.select(".nv-linesWrap").datum(H[0]&&!H[0].disabled?H:[{values:[]}]);d3.transition(ba).call(k);d3.transition(W).call(b);t.scale(C).ticks(B/100).tickSize(-O,0);m.select(".nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");d3.transition(m.select(".nv-x.nv-axis")).call(t);p.scale(P).ticks(O/36).tickSize(-B,0);d3.transition(m.select(".nv-y1.nv-axis")).style("opacity",A.length?1:0).call(p);f.scale(N).ticks(O/36).tickSize(A.length?0:-B,0);m.select(".nv-y2.nv-axis").style("opacity",H.length?
1:0).attr("transform","translate("+B+",0)");d3.transition(m.select(".nv-y2.nv-axis")).call(f);g.dispatch.on("stateChange",function(b){G=b;R.stateChange(G);a.update()});R.on("tooltipShow",function(m){if(L){var g=z.parentNode,k=m.pos[0]+(g.offsetLeft||0),q=m.pos[1]+(g.offsetTop||0),r=t.tickFormat()(b.x()(m.point,m.pointIndex)),y=(m.series.bar?p:f).tickFormat()(b.y()(m.point,m.pointIndex)),r=S(m.series.key,r,y,m,a);v.tooltip.show([k,q],r,0>m.value?"n":"s",null,g)}});R.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(y.forEach(function(a,f){a.disabled=b.disabled[f]}),G.disabled=b.disabled);a.update()})});return a}var b=v.models.line(),k=v.models.historicalBar(),t=v.models.axis(),p=v.models.axis(),f=v.models.axis(),g=v.models.legend(),r={top:30,right:60,bottom:50,left:60},q=null,I=null,B=function(a){return a.x},A=function(a){return a.y},E=v.utils.defaultColor(),D=!0,L=!0,S=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},C,P,N,G={},T=null,M="No Data Available.",R=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");k.padData(!0);b.clipEdge(!1).padData(!0);t.orient("bottom").tickPadding(7).highlightZero(!1);p.orient("left");f.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];R.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",
function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){L&&v.tooltip.cleanup()});a.dispatch=R;a.legend=g;a.lines=b;a.bars=k;a.xAxis=t;a.y1Axis=p;a.y2Axis=f;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=v.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return B;B=f;b.x(f);k.x(f);return a};a.y=function(f){if(!arguments.length)return A;A=f;b.y(f);k.y(f);return a};a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;
r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return E;E=v.utils.getColor(b);g.color(E);return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.tooltips=function(b){if(!arguments.length)return L;
L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return G;G=b;return a};a.defaultState=function(b){if(!arguments.length)return T;T=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};return a};v.models.lineWithFocusChart=function(){function a(z){z.each(function(z){function O(){q.empty()||q.extent(T);fa.data([q.empty()?P.domain():T]).each(function(a,b){var f=P(a[0])-S.range()[0],m=S.range()[1]-P(a[1]);
d3.select(this).select(".left").attr("width",0>f?0:f);d3.select(this).select(".right").attr("x",P(a[1])).attr("width",0>m?0:m)})}function U(){T=q.empty()?null:q.extent();var a=q.empty()?P.domain():q.extent();1>=Math.abs(a[0]-a[1])||(F.brush({extent:a,brush:q}),O(),ia.select(".nv-focus .nv-linesWrap").datum(z.filter(function(a){return!a.disabled}).map(function(f,m){return{key:f.key,values:f.values.filter(function(f,m){return b.x()(f,m)>=a[0]&&b.x()(f,m)<=a[1]})}})).transition().duration(K).call(b),
ia.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(t),ia.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(p))}var H=d3.select(this),ba=this,W=(E||parseInt(H.style("width"))||960)-I.left-I.right,m=(D||parseInt(H.style("height"))||400)-I.top-I.bottom-L,Q=L-B.top-B.bottom;a.update=function(){H.transition().duration(K).call(a)};a.container=this;if(z&&z.length&&z.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else{var da=H.selectAll(".nv-noData").data([y]);
da.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");da.attr("x",I.left+W/2).attr("y",I.top+m/2).text(function(a){return a});return a}S=b.xScale();C=b.yScale();P=k.xScale();N=k.yScale();var da=H.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([z]),J=da.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ia=da.select("g");J.append("g").attr("class","nv-legendWrap");var Y=J.append("g").attr("class","nv-focus");Y.append("g").attr("class",
"nv-x nv-axis");Y.append("g").attr("class","nv-y nv-axis");Y.append("g").attr("class","nv-linesWrap");J=J.append("g").attr("class","nv-context");J.append("g").attr("class","nv-x nv-axis");J.append("g").attr("class","nv-y nv-axis");J.append("g").attr("class","nv-linesWrap");J.append("g").attr("class","nv-brushBackground");J.append("g").attr("class","nv-x nv-brush");G&&(r.width(W),ia.select(".nv-legendWrap").datum(z).call(r),I.top!=r.height()&&(I.top=r.height(),m=(D||parseInt(H.style("height"))||400)-
I.top-I.bottom-L),ia.select(".nv-legendWrap").attr("transform","translate(0,"+-I.top+")"));da.attr("transform","translate("+I.left+","+I.top+")");b.width(W).height(m).color(z.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!z[b].disabled}));k.defined(b.defined()).width(W).height(Q).color(z.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!z[b].disabled}));ia.select(".nv-context").attr("transform","translate(0,"+(m+I.bottom+B.top)+")");da=ia.select(".nv-context .nv-linesWrap").datum(z.filter(function(a){return!a.disabled}));
d3.transition(da).call(k);t.scale(S).ticks(W/100).tickSize(-m,0);p.scale(C).ticks(m/36).tickSize(-W,0);ia.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+m+")");q.x(P).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);U();a.transitionDuration(b)});T&&q.extent(T);var fa=ia.select(".nv-brushBackground").selectAll("g").data([T||q.extent()]),m=fa.enter().append("g");m.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Q);m.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",Q);m=ia.select(".nv-x.nv-brush").call(q);m.selectAll("rect").attr("height",Q);m.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,f=Q/3;return"M"+.5*b+","+f+"A6,6 0 0 "+a+" "+6.5*b+","+(f+6)+"V"+(2*f-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*f+"ZM"+2.5*b+","+(f+8)+"V"+(2*f-8)+"M"+4.5*b+","+(f+8)+"V"+(2*f-8)});U();f.scale(P).ticks(W/100).tickSize(-Q,0);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+
")");d3.transition(ia.select(".nv-context .nv-x.nv-axis")).call(f);g.scale(N).ticks(Q/36).tickSize(-W,0);d3.transition(ia.select(".nv-context .nv-y.nv-axis")).call(g);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");r.dispatch.on("stateChange",function(b){a.update()});F.on("tooltipShow",function(f){if(M){var m=ba.parentNode,g=f.pos[0]+(m.offsetLeft||0),k=f.pos[1]+(m.offsetTop||0),q=t.tickFormat()(b.x()(f.point,f.pointIndex)),r=p.tickFormat()(b.y()(f.point,f.pointIndex));
f=R(f.series.key,q,r,f,a);v.tooltip.show([g,k],f,null,null,m)}})});return a}var b=v.models.line(),k=v.models.line(),t=v.models.axis(),p=v.models.axis(),f=v.models.axis(),g=v.models.axis(),r=v.models.legend(),q=d3.svg.brush(),I={top:30,right:30,bottom:30,left:60},B={top:0,right:30,bottom:20,left:60},A=v.utils.defaultColor(),E=null,D=null,L=100,S,C,P,N,G=!0,T=null,M=!0,R=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},y="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide",
"brush"),K=250;b.clipEdge(!0);k.interactive(!1);t.orient("bottom").tickPadding(5);p.orient("left");f.orient("bottom").tickPadding(5);g.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+I.left,a.pos[1]+I.top];F.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){F.tooltipHide(a)});F.on("tooltipHide",function(){M&&v.tooltip.cleanup()});a.dispatch=F;a.legend=r;a.lines=b;a.lines2=k;a.xAxis=t;a.yAxis=p;a.x2Axis=f;a.y2Axis=g;d3.rebind(a,b,"defined","isArea",
"size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=v.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return b.x;b.x(f);k.x(f);return a};a.y=function(f){if(!arguments.length)return b.y;b.y(f);k.y(f);return a};a.margin=function(b){if(!arguments.length)return I;I.top="undefined"!=typeof b.top?b.top:I.top;I.right="undefined"!=typeof b.right?b.right:I.right;I.bottom="undefined"!=typeof b.bottom?b.bottom:I.bottom;I.left="undefined"!=
typeof b.left?b.left:I.left;return a};a.margin2=function(b){if(!arguments.length)return B;B=b;return a};a.width=function(b){if(!arguments.length)return E;E=b;return a};a.height=function(b){if(!arguments.length)return D;D=b;return a};a.height2=function(b){if(!arguments.length)return L;L=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);r.color(A);return a};a.showLegend=function(b){if(!arguments.length)return G;G=b;return a};a.tooltips=function(b){if(!arguments.length)return M;
M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.interpolate=function(f){if(!arguments.length)return b.interpolate();b.interpolate(f);k.interpolate(f);return a};a.noData=function(b){if(!arguments.length)return y;y=b;return a};a.xTickFormat=function(b){if(!arguments.length)return t.tickFormat();t.tickFormat(b);f.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return p.tickFormat();p.tickFormat(b);g.tickFormat(b);return a};a.brushExtent=
function(b){if(!arguments.length)return T;T=b;return a};a.transitionDuration=function(b){if(!arguments.length)return K;K=b;return a};return a};v.models.linePlusBarWithFocusChart=function(){function a(m){m.each(function(m){function da(){E.empty()||E.extent(R);qb.data([E.empty()?z.domain():R]).each(function(a,b){var f=z(a[0])-z.range()[0],m=z.range()[1]-z(a[1]);d3.select(this).select(".left").attr("width",0>f?0:f);d3.select(this).select(".right").attr("x",z(a[1])).attr("width",0>m?0:m)})}function J(){R=
E.empty()?null:E.extent();M=E.empty()?z.domain():E.extent();W.brush({extent:M,brush:E});da();t.width(fa).height(ja).color(m.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!m[b].disabled&&m[b].bar}));b.width(fa).height(ja).color(m.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!m[b].disabled&&!m[b].bar}));var a=ra.select(".nv-focus .nv-barsWrap").datum(na.length?na.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return t.x()(a,b)>=
M[0]&&t.x()(a,b)<=M[1]})}}):[{values:[]}]),g=ra.select(".nv-focus .nv-linesWrap").datum(ha[0].disabled?[{values:[]}]:ha.map(function(a,f){return{key:a.key,values:a.values.filter(function(a,f){return b.x()(a,f)>=M[0]&&b.x()(a,f)<=M[1]})}}));K=na.length?t.xScale():b.xScale();f.scale(K).ticks(fa/100).tickSize(-ja,0);f.domain([Math.ceil(M[0]),Math.floor(M[1])]);ra.select(".nv-x.nv-axis").transition().duration(0).call(f);a.transition().duration(0).call(t);g.transition().duration(0).call(b);ra.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");r.scale(V).ticks(ja/36).tickSize(-fa,0);ra.select(".nv-focus .nv-y1.nv-axis").style("opacity",na.length?1:0);q.scale(O).ticks(ja/36).tickSize(na.length?0:-fa,0);ra.select(".nv-focus .nv-y2.nv-axis").style("opacity",ha.length?1:0).attr("transform","translate("+K.range()[1]+",0)");ra.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(r);ra.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(q)}var ia=d3.select(this),Y=this,fa=(S||parseInt(ia.style("width"))||
960)-D.left-D.right,ja=(C||parseInt(ia.style("height"))||400)-D.top-D.bottom-100,ca=100-L.top-L.bottom;a.update=function(){ia.transition().duration(0).call(a)};a.container=this;if(m&&m.length&&m.filter(function(a){return a.values.length}).length)ia.selectAll(".nv-noData").remove();else{var aa=ia.selectAll(".nv-noData").data([ba]);aa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");aa.attr("x",D.left+fa/2).attr("y",D.top+ja/2).text(function(a){return a});
return a}var na=m.filter(function(a){return!a.disabled&&a.bar}),ha=m.filter(function(a){return!a.bar});K=t.xScale();z=g.scale();V=t.yScale();O=b.yScale();U=p.yScale();H=k.yScale();var aa=m.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:P(a,b),y:N(a,b)}})}),oa=m.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:P(a,b),y:N(a,b)}})});K.range([0,fa]);z.domain(d3.extent(d3.merge(aa.concat(oa)),
function(a){return a.x})).range([0,fa]);var aa=ia.selectAll("g.nv-wrap.nv-linePlusBar").data([m]),oa=aa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ra=aa.select("g");oa.append("g").attr("class","nv-legendWrap");var Aa=oa.append("g").attr("class","nv-focus");Aa.append("g").attr("class","nv-x nv-axis");Aa.append("g").attr("class","nv-y1 nv-axis");Aa.append("g").attr("class","nv-y2 nv-axis");Aa.append("g").attr("class","nv-barsWrap");Aa.append("g").attr("class","nv-linesWrap");
oa=oa.append("g").attr("class","nv-context");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y1 nv-axis");oa.append("g").attr("class","nv-y2 nv-axis");oa.append("g").attr("class","nv-barsWrap");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-brushBackground");oa.append("g").attr("class","nv-x nv-brush");T&&(A.width(fa/2),ra.select(".nv-legendWrap").datum(m.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(A),D.top!=A.height()&&(D.top=A.height(),ja=(C||parseInt(ia.style("height"))||400)-D.top-D.bottom-100),ra.select(".nv-legendWrap").attr("transform","translate("+fa/2+","+-D.top+")"));aa.attr("transform","translate("+D.left+","+D.top+")");p.width(fa).height(ca).color(m.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!m[b].disabled&&m[b].bar}));k.width(fa).height(ca).color(m.map(function(a,b){return a.color||G(a,b)}).filter(function(a,
b){return!m[b].disabled&&!m[b].bar}));aa=ra.select(".nv-context .nv-barsWrap").datum(na.length?na:[{values:[]}]);oa=ra.select(".nv-context .nv-linesWrap").datum(ha[0].disabled?[{values:[]}]:ha);ra.select(".nv-context").attr("transform","translate(0,"+(ja+D.bottom+L.top)+")");aa.transition().call(p);oa.transition().call(k);E.x(z).on("brush",J);R&&E.extent(R);var qb=ra.select(".nv-brushBackground").selectAll("g").data([R||E.extent()]),aa=qb.enter().append("g");aa.append("rect").attr("class","left").attr("x",
0).attr("y",0).attr("height",ca);aa.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ca);aa=ra.select(".nv-x.nv-brush").call(E);aa.selectAll("rect").attr("height",ca);aa.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,f=ca/3;return"M"+.5*b+","+f+"A6,6 0 0 "+a+" "+6.5*b+","+(f+6)+"V"+(2*f-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*f+"ZM"+2.5*b+","+(f+8)+"V"+(2*f-8)+"M"+4.5*b+","+(f+8)+"V"+(2*f-8)});g.ticks(fa/100).tickSize(-ca,0);ra.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+U.range()[0]+")");ra.select(".nv-context .nv-x.nv-axis").transition().call(g);I.scale(U).ticks(ca/36).tickSize(-fa,0);ra.select(".nv-context .nv-y1.nv-axis").style("opacity",na.length?1:0).attr("transform","translate(0,"+z.range()[0]+")");ra.select(".nv-context .nv-y1.nv-axis").transition().call(I);B.scale(H).ticks(ca/36).tickSize(na.length?0:-fa,0);ra.select(".nv-context .nv-y2.nv-axis").style("opacity",ha.length?1:0).attr("transform","translate("+z.range()[1]+",0)");ra.select(".nv-context .nv-y2.nv-axis").transition().call(B);
A.dispatch.on("stateChange",function(b){a.update()});W.on("tooltipShow",function(m){if(y){var g=Y.parentNode;M&&(m.pointIndex+=Math.ceil(M[0]));var k=m.pos[0]+(g.offsetLeft||0),p=m.pos[1]+(g.offsetTop||0),t=f.tickFormat()(b.x()(m.point,m.pointIndex)),z=(m.series.bar?r:q).tickFormat()(b.y()(m.point,m.pointIndex)),t=F(m.series.key,t,z,m,a);v.tooltip.show([k,p],t,0>m.value?"n":"s",null,g)}});J()});return a}var b=v.models.line(),k=v.models.line(),t=v.models.historicalBar(),p=v.models.historicalBar(),
f=v.models.axis(),g=v.models.axis(),r=v.models.axis(),q=v.models.axis(),I=v.models.axis(),B=v.models.axis(),A=v.models.legend(),E=d3.svg.brush(),D={top:30,right:30,bottom:30,left:60},L={top:0,right:30,bottom:20,left:60},S=null,C=null,P=function(a){return a.x},N=function(a){return a.y},G=v.utils.defaultColor(),T=!0,M,R=null,y=!0,F=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},K,z,V,O,U,H,ba="No Data Available.",W=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);k.interactive(!1);
f.orient("bottom").tickPadding(5);r.orient("left");q.orient("right");g.orient("bottom").tickPadding(5);I.orient("left");B.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+D.left,a.pos[1]+D.top];W.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){W.tooltipHide(a)});t.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+D.left,a.pos[1]+D.top];W.tooltipShow(a)});t.dispatch.on("elementMouseout.tooltip",function(a){W.tooltipHide(a)});
W.on("tooltipHide",function(){y&&v.tooltip.cleanup()});a.dispatch=W;a.legend=A;a.lines=b;a.lines2=k;a.bars=t;a.bars2=p;a.xAxis=f;a.x2Axis=g;a.y1Axis=r;a.y2Axis=q;a.y3Axis=I;a.y4Axis=B;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=v.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return P;P=f;b.x(f);t.x(f);return a};a.y=function(f){if(!arguments.length)return N;N=f;b.y(f);t.y(f);return a};a.margin=function(b){if(!arguments.length)return D;D.top="undefined"!=typeof b.top?
b.top:D.top;D.right="undefined"!=typeof b.right?b.right:D.right;D.bottom="undefined"!=typeof b.bottom?b.bottom:D.bottom;D.left="undefined"!=typeof b.left?b.left:D.left;return a};a.width=function(b){if(!arguments.length)return S;S=b;return a};a.height=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return G;G=v.utils.getColor(b);A.color(G);return a};a.showLegend=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return y;
y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return F;F=b;return a};a.noData=function(b){if(!arguments.length)return ba;ba=b;return a};a.brushExtent=function(b){if(!arguments.length)return R;R=b;return a};return a};v.models.multiBar=function(){function a(v){v.each(function(a){var v=k-b.left-b.right,K=t-b.top-b.bottom,U=d3.select(this);L&&a.length&&(L=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);A&&(a=d3.layout.stack().offset(E).values(function(a){return a.values}).y(q)(!a.length&&
L?L:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});A&&a[0].values.map(function(b,f){var g=0,k=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=k,k-=a.size):(a.y1=a.size+g,g+=a.size)})});var H=N&&G?[]:a.map(function(a){return a.values.map(function(a,b){return{x:r(a,b),y:q(a,b),y0:a.y0,y1:a.y1}})});p.domain(N||d3.merge(H).map(function(a){return a.x})).rangeBands(T||[0,v],R);f.domain(G||d3.extent(d3.merge(H).map(function(a){return A?0<a.y?a.y1:a.y1+a.y:a.y}).concat(I))).range(M||
[K,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));F=F||f;var U=U.selectAll("g.nv-wrap.nv-multibar").data([a]),ba=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),H=ba.append("defs"),ba=ba.append("g"),W=U.select("g");ba.append("g").attr("class","nv-groups");
U.attr("transform","translate("+b.left+","+b.top+")");H.append("clipPath").attr("id","nv-edge-clip-"+g).append("rect");U.select("#nv-edge-clip-"+g+" rect").attr("width",v).attr("height",K);W.attr("clip-path",B?"url(#nv-edge-clip-"+g+")":"");v=U.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});v.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);v.exit().transition().selectAll("rect.nv-bar").delay(function(b,f){return f*P/a[0].values.length}).attr("y",
function(a){return A?F(a.y0):F(0)}).attr("height",0).remove();v.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return D(a,b)}).style("stroke",function(a,b){return D(a,b)});v.transition().style("stroke-opacity",1).style("fill-opacity",.75);v=v.selectAll("rect.nv-bar").data(function(b){return L&&!a.length?L.values:b.values});v.exit().remove();v.enter().append("rect").attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":
"nv-bar positive"}).attr("x",function(b,f,g){return A?0:g*p.rangeBand()/a.length}).attr("y",function(a){return F(A?a.y0:0)}).attr("height",0).attr("width",p.rangeBand()/(A?1:a.length)).attr("transform",function(a,b){return"translate("+p(r(a,b))+",0)"});v.style("fill",function(a,b,f){return D(a,f,b)}).style("stroke",function(a,b,f){return D(a,f,b)}).on("mouseover",function(b,g){d3.select(this).classed("hover",!0);y.elementMouseover({value:q(b,g),point:b,series:a[b.series],pos:[p(r(b,g))+p.rangeBand()*
(A?a.length/2:b.series+.5)/a.length,f(q(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);y.elementMouseout({value:q(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,g){y.elementClick({value:q(b,g),point:b,series:a[b.series],pos:[p(r(b,g))+p.rangeBand()*(A?a.length/2:b.series+.5)/a.length,f(q(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,g){y.elementDblClick({value:q(b,g),point:b,series:a[b.series],pos:[p(r(b,g))+p.rangeBand()*(A?a.length/2:b.series+.5)/a.length,f(q(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});v.attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+p(r(a,b))+",0)"});S&&(C||(C=a.map(function(){return!0})),v.style("fill",function(a,b,f){return d3.rgb(S(a,b)).darker(C.map(function(a,
b){return b}).filter(function(a,b){return!C[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(S(a,b)).darker(C.map(function(a,b){return b}).filter(function(a,b){return!C[b]})[f]).toString()}));A?v.transition().delay(function(b,f){return f*P/a[0].values.length}).attr("y",function(a,b){return f(A?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(f(a.y+(A?a.y0:0))-f(A?a.y0:0)),1)}).attr("x",function(b,f){return A?0:b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/
(A?1:a.length)):v.transition().delay(function(b,f){return f*P/a[0].values.length}).attr("x",function(b,f){return b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/a.length).attr("y",function(a,b){return 0>q(a,b)?f(0):1>f(0)-f(q(a,b))?f(0)-1:f(q(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(f(q(a,b))-f(0)),1)||0});p.copy();F=f.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=d3.scale.ordinal(),f=d3.scale.linear(),g=Math.floor(1E4*Math.random()),r=function(a){return a.x},
q=function(a){return a.y},I=[0],B=!0,A=!1,E="zero",D=v.utils.defaultColor(),L=!1,S=null,C,P=1200,N,G,T,M,R=.1,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=y;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?
f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return p;p=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;return a};a.xDomain=function(b){if(!arguments.length)return N;N=b;return a};a.yDomain=function(b){if(!arguments.length)return G;
G=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return M;M=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return A;A=b;return a};a.stackOffset=function(b){if(!arguments.length)return E;E=b;return a};a.clipEdge=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return D;D=v.utils.getColor(b);return a};a.barColor=
function(b){if(!arguments.length)return S;S=v.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return C;C=b;return a};a.id=function(b){if(!arguments.length)return g;g=b;return a};a.hideable=function(b){if(!arguments.length)return L;L=b;return a};a.delay=function(b){if(!arguments.length)return P;P=b;return a};a.groupSpacing=function(b){if(!arguments.length)return R;R=b;return a};return a};v.models.multiBarChart=function(){function a(V){V.each(function(O){var V=d3.select(this),
H=this,ba=(r||parseInt(V.style("width"))||960)-g.left-g.right,W=(q||parseInt(V.style("height"))||400)-g.top-g.bottom;a.update=function(){V.transition().duration(z).call(a)};a.container=this;R.disabled=O.map(function(a){return!!a.disabled});if(!y){var m;y={};for(m in R)y[m]=R[m]instanceof Array?R[m].slice(0):R[m]}if(O&&O.length&&O.filter(function(a){return a.values.length}).length)V.selectAll(".nv-noData").remove();else return m=V.selectAll(".nv-noData").data([F]),m.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",g.left+ba/2).attr("y",g.top+W/2).text(function(a){return a}),a;T=b.xScale();M=b.yScale();var Q=V.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([O]),da=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");m=Q.select("g");da.append("g").attr("class","nv-x nv-axis");da.append("g").attr("class","nv-y nv-axis");da.append("g").attr("class","nv-barsWrap");da.append("g").attr("class","nv-legendWrap");
da.append("g").attr("class","nv-controlsWrap");A&&(p.width(ba-(B?180:0)),b.barColor()&&O.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),m.select(".nv-legendWrap").datum(O).call(p),g.top!=p.height()&&(g.top=p.height(),W=(q||parseInt(V.style("height"))||400)-g.top-g.bottom),m.select(".nv-legendWrap").attr("transform","translate("+(B?180:0)+","+-g.top+")"));if(B){var J=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];f.width(B?180:0).color(["#444",
"#444","#444"]);m.select(".nv-controlsWrap").datum(J).attr("transform","translate(0,"+-g.top+")").call(f)}Q.attr("transform","translate("+g.left+","+g.top+")");L&&m.select(".nv-y.nv-axis").attr("transform","translate("+ba+",0)");b.disabled(O.map(function(a){return a.disabled})).width(ba).height(W).color(O.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!O[b].disabled}));m.select(".nv-barsWrap").datum(O.filter(function(a){return!a.disabled})).transition().call(b);if(E){k.scale(T).ticks(ba/
100).tickSize(-W,0);m.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")");m.select(".nv-x.nv-axis").transition().call(k);Q=m.select(".nv-x.nv-axis > g").selectAll("g");Q.selectAll("line, text").style("opacity",1);if(C){Q.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?5:17)+")"});var ia=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;m.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+
(0===b||0!==ia%2?17:5)+")"})}S&&Q.filter(function(a,b){return 0!==b%Math.ceil(O[0].values.length/(ba/100))}).selectAll("text, line").style("opacity",0);P&&Q.selectAll(".tick text").attr("transform","rotate("+P+" 0,0)").style("text-anchor",0<P?"start":"end");m.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}D&&(t.scale(M).ticks(W/36).tickSize(-ba,0),m.select(".nv-y.nv-axis").transition().call(t));p.dispatch.on("stateChange",function(b){R=b;K.stateChange(R);a.update()});
f.dispatch.on("legendClick",function(f,m){if(f.disabled){J=J.map(function(a){a.disabled=!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}R.stacked=b.stacked();K.stateChange(R);a.update()}});K.on("tooltipShow",function(f){if(N){var m=H.parentNode,g=f.pos[0]+(m.offsetLeft||0),p=f.pos[1]+(m.offsetTop||0),q=k.tickFormat()(b.x()(f.point,f.pointIndex)),r=t.tickFormat()(b.y()(f.point,f.pointIndex)),q=G(f.series.key,q,r,f,a);v.tooltip.show([g,p],q,
0>f.value?"n":"s",null,m)}});K.on("changeState",function(f){"undefined"!==typeof f.disabled&&(O.forEach(function(a,b){a.disabled=f.disabled[b]}),R.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),R.stacked=f.stacked);a.update()})});return a}var b=v.models.multiBar(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f=v.models.legend(),g={top:30,right:20,bottom:50,left:60},r=null,q=null,I=v.utils.defaultColor(),B=!0,A=!0,E=!0,D=!0,L=!1,S=!0,C=!1,P=0,N=!0,G=function(a,
b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},T,M,R={stacked:!1},y=null,F="No Data Available.",K=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=250;b.stacked(!1);k.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});t.orient(L?"right":"left").tickFormat(d3.format(",.1f"));f.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];K.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){K.tooltipHide(a)});K.on("tooltipHide",function(){N&&v.tooltip.cleanup()});a.dispatch=K;a.multibar=b;a.legend=p;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=
typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);p.color(I);return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;
E=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return L;L=b;t.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return S;S=b;return a};a.rotateLabels=function(b){if(!arguments.length)return P;P=b;return a};a.staggerLabels=function(b){if(!arguments.length)return C;C=b;return a};a.tooltip=function(b){if(!arguments.length)return G;G=b;return a};a.tooltips=function(b){if(!arguments.length)return N;
N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return G;G=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return z;z=b;return a};return a};v.models.multiBarHorizontal=function(){function a(p){p.each(function(a){var p=k-b.left-b.right,v=t-b.top-b.bottom;d3.select(this);
D&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(q)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});D&&a[0].values.map(function(b,f){var g=0,m=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=m-a.size,m-=a.size):(a.y1=g,g+=a.size)})});var K=G&&T?[]:a.map(function(a){return a.values.map(function(a,b){return{x:r(a,b),y:q(a,b),y0:a.y0,y1:a.y1}})});f.domain(G||d3.merge(K).map(function(a){return a.x})).rangeBands(M||[0,v],.1);g.domain(T||
d3.extent(d3.merge(K).map(function(a){return D?0<a.y?a.y1+a.y:a.y1:a.y}).concat(I)));L&&!D?g.range(R||[0>g.domain()[0]?C:0,p-(0<g.domain()[1]?C:0)]):g.range(R||[0,p]);F=F||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);p=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);v=p.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");v.append("defs");v=v.append("g");p.select("g");v.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+
","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return B(a,b)}).style("stroke",function(a,b){return B(a,b)});p.transition().style("stroke-opacity",
1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();v=p.enter().append("g").attr("transform",function(b,g,k){return"translate("+F(D?b.y0:0)+","+(D?0:k*f.rangeBand()/a.length+f(r(b,g)))+")"});v.append("rect").attr("width",0).attr("height",f.rangeBand()/(D?1:a.length));p.on("mouseover",function(b,k){d3.select(this).classed("hover",!0);y.elementMouseover({value:q(b,k),point:b,series:a[b.series],pos:[g(q(b,k)+(D?b.y0:0)),f(r(b,k))+f.rangeBand()*
(D?a.length/2:b.series+.5)/a.length],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);y.elementMouseout({value:q(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){y.elementClick({value:q(b,k),point:b,series:a[b.series],pos:[f(r(b,k))+f.rangeBand()*(D?a.length/2:b.series+.5)/a.length,g(q(b,k)+(D?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,k){y.elementDblClick({value:q(b,k),point:b,series:a[b.series],pos:[f(r(b,k))+f.rangeBand()*(D?a.length/2:b.series+.5)/a.length,g(q(b,k)+(D?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});v.append("text");L&&!D?(p.select("text").attr("text-anchor",function(a,b){return 0>q(a,b)?"end":"start"}).attr("y",f.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return P(q(a,b))}),p.transition().select("text").attr("x",function(a,b){return 0>q(a,
b)?-4:g(q(a,b))-g(0)+4})):p.selectAll("text").text("");S&&!D?(v.append("text").classed("nv-bar-label",!0),p.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>q(a,b)?"start":"end"}).attr("y",f.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return r(a,b)}),p.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>q(a,b)?g(0)-g(q(a,b))+4:-4})):p.selectAll("text.nv-bar-label").text("");p.attr("class",function(a,b){return 0>q(a,b)?"nv-bar negative":
"nv-bar positive"});A&&(E||(E=a.map(function(){return!0})),p.style("fill",function(a,b,f){return d3.rgb(A(a,b)).darker(E.map(function(a,b){return b}).filter(function(a,b){return!E[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(A(a,b)).darker(E.map(function(a,b){return b}).filter(function(a,b){return!E[b]})[f]).toString()}));D?p.transition().attr("transform",function(a,b){return"translate("+g(a.y1)+","+f(r(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(g(q(a,
b)+a.y0)-g(a.y0))}).attr("height",f.rangeBand()):p.transition().attr("transform",function(b,k){return"translate("+(0>q(b,k)?g(q(b,k)):g(0))+","+(b.series*f.rangeBand()/a.length+f(r(b,k)))+")"}).select("rect").attr("height",f.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(g(q(a,b))-g(0)),1)});f.copy();F=g.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=Math.floor(1E4*Math.random()),f=d3.scale.ordinal(),g=d3.scale.linear(),r=function(a){return a.x},q=
function(a){return a.y},I=[0],B=v.utils.defaultColor(),A=null,E,D=!1,L=!1,S=!1,C=60,P=d3.format(",.2f"),N=1200,G,T,M,R,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=y;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return G;G=b;return a};a.yDomain=function(b){if(!arguments.length)return T;
T=b;return a};a.xRange=function(b){if(!arguments.length)return M;M=b;return a};a.yRange=function(b){if(!arguments.length)return R;R=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return B;B=v.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return E;E=b;return a};
a.id=function(b){if(!arguments.length)return p;p=b;return a};a.delay=function(b){if(!arguments.length)return N;N=b;return a};a.showValues=function(b){if(!arguments.length)return L;L=b;return a};a.showBarLabels=function(b){if(!arguments.length)return S;S=b;return a};a.valueFormat=function(b){if(!arguments.length)return P;P=b;return a};a.valuePadding=function(b){if(!arguments.length)return C;C=b;return a};return a};v.models.multiBarHorizontalChart=function(){function a(y){y.each(function(y){var K=d3.select(this),
z=this,J=(r||parseInt(K.style("width"))||960)-g.left-g.right,O=(q||parseInt(K.style("height"))||400)-g.top-g.bottom;a.update=function(){K.transition().duration(R).call(a)};a.container=this;N.disabled=y.map(function(a){return!!a.disabled});if(!G){var U;G={};for(U in N)G[U]=N[U]instanceof Array?N[U].slice(0):N[U]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return U=K.selectAll(".nv-noData").data([T]),U.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",g.left+J/2).attr("y",g.top+O/2).text(function(a){return a}),a;C=b.xScale();P=b.yScale();U=K.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([y]);var H=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),ba=U.select("g");H.append("g").attr("class","nv-x nv-axis");H.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");H.append("g").attr("class",
"nv-barsWrap");H.append("g").attr("class","nv-legendWrap");H.append("g").attr("class","nv-controlsWrap");A&&(p.width(J-(B?180:0)),b.barColor()&&y.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),ba.select(".nv-legendWrap").datum(y).call(p),g.top!=p.height()&&(g.top=p.height(),O=(q||parseInt(K.style("height"))||400)-g.top-g.bottom),ba.select(".nv-legendWrap").attr("transform","translate("+(B?180:0)+","+-g.top+")"));if(B){var W=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];f.width(B?180:0).color(["#444","#444","#444"]);ba.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-g.top+")").call(f)}U.attr("transform","translate("+g.left+","+g.top+")");b.disabled(y.map(function(a){return a.disabled})).width(J).height(O).color(y.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!y[b].disabled}));ba.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);E&&(k.scale(C).ticks(O/24).tickSize(-J,
0),ba.select(".nv-x.nv-axis").transition().call(k),ba.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));D&&(t.scale(P).ticks(J/100).tickSize(-O,0),ba.select(".nv-y.nv-axis").attr("transform","translate(0,"+O+")"),ba.select(".nv-y.nv-axis").transition().call(t));ba.select(".nv-zeroLine line").attr("x1",P(0)).attr("x2",P(0)).attr("y1",0).attr("y2",-O);p.dispatch.on("stateChange",function(b){N=b;M.stateChange(N);a.update()});f.dispatch.on("legendClick",function(f,g){if(f.disabled){W=W.map(function(a){a.disabled=
!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}N.stacked=b.stacked();M.stateChange(N);a.update()}});M.on("tooltipShow",function(f){if(L){var g=z.parentNode,p=f.pos[0]+(g.offsetLeft||0),q=f.pos[1]+(g.offsetTop||0),r=k.tickFormat()(b.x()(f.point,f.pointIndex)),y=t.tickFormat()(b.y()(f.point,f.pointIndex)),r=S(f.series.key,r,y,f,a);v.tooltip.show([p,q],r,0>f.value?"e":"w",null,g)}});M.on("changeState",function(f){"undefined"!==typeof f.disabled&&
(y.forEach(function(a,b){a.disabled=f.disabled[b]}),N.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),N.stacked=f.stacked);a.update()})});return a}var b=v.models.multiBarHorizontal(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend().height(30),f=v.models.legend().height(30),g={top:30,right:20,bottom:50,left:60},r=null,q=null,I=v.utils.defaultColor(),B=!0,A=!0,E=!0,D=!0,L=!0,S=function(a,b,f,g,k){return"<h3>"+a+" - "+b+"</h3><p>"+f+"</p>"},C,P,N={stacked:!1},G=null,
T="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),R=250;b.stacked(!1);k.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient("bottom").tickFormat(d3.format(",.1f"));f.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top];M.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){M.tooltipHide(a)});M.on("tooltipHide",function(){L&&v.tooltip.cleanup()});
a.dispatch=M;a.multibar=b;a.legend=p;a.xAxis=k;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:
g.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);p.color(I);return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;
D=b;return a};a.tooltip=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return L;L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return N;N=b;return a};a.defaultState=function(b){if(!arguments.length)return G;G=b;return a};a.noData=function(b){if(!arguments.length)return T;T=b;return a};a.transitionDuration=function(b){if(!arguments.length)return R;R=b;return a};return a};
v.models.multiChart=function(){function a(F){F.each(function(F){var z=d3.select(this),J=this;a.update=function(){z.transition().call(a)};a.container=this;var O=(t||parseInt(z.style("width"))||960)-b.left-b.right,U=(p||parseInt(z.style("height"))||400)-b.top-b.bottom,H=F.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),ba=F.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),W=F.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),m=F.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),Q=F.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),da=F.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),qa=F.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),ia=F.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});q.domain(d3.extent(d3.merge(qa.concat(ia)),function(a){return a.x})).range([0,
O]);var Y=z.selectAll("g.wrap.multiChart").data([F]),fa=Y.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");fa.append("g").attr("class","x axis");fa.append("g").attr("class","y1 axis");fa.append("g").attr("class","y2 axis");fa.append("g").attr("class","lines1Wrap");fa.append("g").attr("class","lines2Wrap");fa.append("g").attr("class","bars1Wrap");fa.append("g").attr("class","bars2Wrap");fa.append("g").attr("class","stack1Wrap");fa.append("g").attr("class","stack2Wrap");fa.append("g").attr("class",
"legendWrap");Y=Y.select("g");f&&(R.width(O/2),Y.select(".legendWrap").datum(F.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(R),b.top!=R.height()&&(b.top=R.height(),U=(p||parseInt(z.style("height"))||400)-b.top-b.bottom),Y.select(".legendWrap").attr("transform","translate("+O/2+","+-b.top+")"));D.width(O).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,
b){return!F[b].disabled&&1==F[b].yAxis&&"line"==F[b].type}));L.width(O).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"line"==F[b].type}));S.width(O).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"bar"==F[b].type}));C.width(O).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&
2==F[b].yAxis&&"bar"==F[b].type}));P.width(O).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"area"==F[b].type}));N.width(O).height(U).color(F.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"area"==F[b].type}));Y.attr("transform","translate("+b.left+","+b.top+")");var fa=Y.select(".lines1Wrap").datum(H),ja=Y.select(".bars1Wrap").datum(W),ca=Y.select(".stack1Wrap").datum(Q),
aa=Y.select(".lines2Wrap").datum(ba),na=Y.select(".bars2Wrap").datum(m),ha=Y.select(".stack2Wrap").datum(da),oa=Q.length?Q.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[],ra=da.length?da.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[];A.domain(I||d3.extent(d3.merge(qa).concat(oa),function(a){return a.y})).range([0,U]);E.domain(B||
d3.extent(d3.merge(ia).concat(ra),function(a){return a.y})).range([0,U]);D.yDomain(A.domain());S.yDomain(A.domain());P.yDomain(A.domain());L.yDomain(E.domain());C.yDomain(E.domain());N.yDomain(E.domain());Q.length&&d3.transition(ca).call(P);da.length&&d3.transition(ha).call(N);W.length&&d3.transition(ja).call(S);m.length&&d3.transition(na).call(C);H.length&&d3.transition(fa).call(D);ba.length&&d3.transition(aa).call(L);G.ticks(O/100).tickSize(-U,0);Y.select(".x.axis").attr("transform","translate(0,"+
U+")");d3.transition(Y.select(".x.axis")).call(G);T.ticks(U/36).tickSize(-O,0);d3.transition(Y.select(".y1.axis")).call(T);M.ticks(U/36).tickSize(-O,0);d3.transition(Y.select(".y2.axis")).call(M);Y.select(".y2.axis").style("opacity",ia.length?1:0).attr("transform","translate("+q.range()[1]+",0)");R.dispatch.on("stateChange",function(b){a.update()});y.on("tooltipShow",function(b){if(g){var f=J.parentNode,m=b.pos[0]+(f.offsetLeft||0),k=b.pos[1]+(f.offsetTop||0),p=G.tickFormat()(D.x()(b.point,b.pointIndex)),
q=(2==b.series.yAxis?M:T).tickFormat()(D.y()(b.point,b.pointIndex));b=r(b.series.key,p,q,b,a);v.tooltip.show([m,k],b,void 0,void 0,f.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},k=d3.scale.category20().range(),t=null,p=null,f=!0,g=!0,r=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},q,I,B;q=d3.scale.linear();var A=d3.scale.linear(),E=d3.scale.linear(),D=v.models.line().yScale(A),L=v.models.line().yScale(E),S=v.models.multiBar().stacked(!1).yScale(A),C=v.models.multiBar().stacked(!1).yScale(E),
P=v.models.stackedArea().yScale(A),N=v.models.stackedArea().yScale(E),G=v.models.axis().scale(q).orient("bottom").tickPadding(5),T=v.models.axis().scale(A).orient("left"),M=v.models.axis().scale(E).orient("right"),R=v.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide");D.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});D.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});L.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});L.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});S.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});S.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});C.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});C.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});
P.dispatch.on("tooltipShow",function(a){if(!Math.round(100*P.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});P.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)});N.dispatch.on("tooltipShow",function(a){if(!Math.round(100*N.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});N.dispatch.on("tooltipHide",
function(a){y.tooltipHide(a)});D.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});D.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});L.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});L.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});y.on("tooltipHide",function(){g&&v.tooltip.cleanup()});a.dispatch=y;a.lines1=D;a.lines2=L;a.bars1=S;a.bars2=
C;a.stack1=P;a.stack2=N;a.xAxis=G;a.yAxis1=T;a.yAxis2=M;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;D.x(b);S.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;D.y(b);S.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return I;I=b;return a};a.yDomain2=function(b){if(!arguments.length)return B;B=b;return a};a.margin=function(f){if(!arguments.length)return b;b=f;return a};a.width=function(b){if(!arguments.length)return t;
t=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return k;k=b;R.color(b);return a};a.showLegend=function(b){if(!arguments.length)return f;f=b;return a};a.tooltips=function(b){if(!arguments.length)return g;g=b;return a};a.tooltipContent=function(b){if(!arguments.length)return r;r=b;return a};return a};v.models.ohlcBar=function(){function a(v){v.each(function(a){var v=k-b.left-b.right,y=t-b.top-b.bottom,P=d3.select(this);f.domain(N||
d3.extent(a[0].values.map(r).concat(D)));S?f.range(T||[.5*v/a[0].values.length,v*(a[0].values.length-.5)/a[0].values.length]):f.range(T||[0,v]);g.domain(G||[d3.min(a[0].values.map(E).concat(L)),d3.max(a[0].values.map(A).concat(L))]).range(M||[y,0]);f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1]));g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]+.01*g.domain()[0],g.domain()[1]-.01*g.domain()[1]]):
g.domain([-1,1]));var O=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),U=O.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),H=U.append("defs"),U=U.append("g"),J=O.select("g");U.append("g").attr("class","nv-ticks");O.attr("transform","translate("+b.left+","+b.top+")");P.on("click",function(a,b){R.chartClick({data:a,index:b,pos:d3.event,id:p})});H.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");O.select("#nv-chart-clip-path-"+p+" rect").attr("width",
v).attr("height",y);J.attr("clip-path",C?"url(#nv-chart-clip-path-"+p+")":"");y=O.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});y.exit().remove();y.enter().append("path").attr("class",function(a,b,f){return(I(a,b)>B(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b}).attr("d",function(b,f){var k=v/a[0].values.length*.9;return"m0,0l0,"+(g(I(b,f))-g(A(b,f)))+"l"+-k/2+",0l"+k/2+",0l0,"+(g(E(b,f))-g(I(b,f)))+"l0,"+(g(B(b,f))-g(E(b,f)))+"l"+k/2+",0l"+-k/2+",0z"}).attr("transform",
function(a,b){return"translate("+f(r(a,b))+","+g(A(a,b))+")"}).on("mouseover",function(b,m){d3.select(this).classed("hover",!0);R.elementMouseover({point:b,series:a[0],pos:[f(r(b,m)),g(q(b,m))],pointIndex:m,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);R.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event})}).on("click",function(a,b){R.elementClick({value:q(a,b),data:a,index:b,pos:[f(r(a,b)),g(q(a,b))],e:d3.event,id:p});d3.event.stopPropagation()}).on("dblclick",
function(a,b){R.elementDblClick({value:q(a,b),data:a,index:b,pos:[f(r(a,b)),g(q(a,b))],e:d3.event,id:p});d3.event.stopPropagation()});y.attr("class",function(a,b,f){return(I(a,b)>B(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b});d3.transition(y).attr("transform",function(a,b){return"translate("+f(r(a,b))+","+g(A(a,b))+")"}).attr("d",function(b,f){var k=v/a[0].values.length*.9;return"m0,0l0,"+(g(I(b,f))-g(A(b,f)))+"l"+-k/2+",0l"+k/2+",0l0,"+(g(E(b,f))-g(I(b,f)))+"l0,"+(g(B(b,f))-
g(E(b,f)))+"l"+k/2+",0l"+-k/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=Math.floor(1E4*Math.random()),f=d3.scale.linear(),g=d3.scale.linear(),r=function(a){return a.x},q=function(a){return a.y},I=function(a){return a.open},B=function(a){return a.close},A=function(a){return a.high},E=function(a){return a.low},D=[],L=[],S=!1,C=!0,P=v.utils.defaultColor(),N,G,T,M,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
R;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return q;q=b;return a};a.open=function(b){if(!arguments.length)return I;I=b;return a};a.close=function(b){if(!arguments.length)return B;B=b;return a};a.high=function(b){if(!arguments.length)return A;A=b;return a};a.low=function(b){if(!arguments.length)return E;E=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:
b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return g;g=b;return a};a.xDomain=function(b){if(!arguments.length)return N;N=b;return a};a.yDomain=
function(b){if(!arguments.length)return G;G=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return M;M=b;return a};a.forceX=function(b){if(!arguments.length)return D;D=b;return a};a.forceY=function(b){if(!arguments.length)return L;L=b;return a};a.padData=function(b){if(!arguments.length)return S;S=b;return a};a.clipEdge=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return P;P=
v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};return a};v.models.pie=function(){function a(g){g.each(function(a){var g=k-b.left-b.right,v=t-b.top-b.bottom,I=Math.min(g,v)/2,z=I-I/5,M=d3.select(this);a=M.selectAll(".nv-wrap.nv-pie").data(a);var O=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+r).append("g"),U=a.select("g");O.append("g").attr("class","nv-pie");O.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");U.select(".nv-pie").attr("transform","translate("+g/2+","+v/2+")");U.select(".nv-pieLabels").attr("transform","translate("+g/2+","+v/2+")");M.on("click",function(a,b){T.chartClick({data:a,index:b,pos:d3.event,id:r})});var H=d3.svg.arc().outerRadius(z);P&&H.startAngle(P);N&&H.endAngle(N);S&&H.innerRadius(I*G);v=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:f(a)});g=a.select(".nv-pie").selectAll(".nv-slice").data(v);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(v);
g.exit().remove();a.exit().remove();v=g.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);T.elementMouseover({label:p(a.data),value:f(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:r})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);T.elementMouseout({label:p(a.data),value:f(a.data),point:a.data,index:b,id:r})}).on("click",function(a,b){T.elementClick({label:p(a.data),value:f(a.data),point:a.data,
index:b,pos:d3.event,id:r});d3.event.stopPropagation()}).on("dblclick",function(a,b){T.elementDblClick({label:p(a.data),value:f(a.data),point:a.data,index:b,pos:d3.event,id:r});d3.event.stopPropagation()});g.attr("fill",function(a,b){return q(a,b)}).attr("stroke",function(a,b){return q(a,b)});v.append("path").each(function(a){this._current=a});g.select("path").transition().attr("d",H).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
S||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return H(b(a))}});if(B){var J=d3.svg.arc().innerRadius(0);A&&(J=H);E&&(J=d3.svg.arc().outerRadius(H.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var f=d3.select(this);f.attr("transform",function(a){if(C){a.outerRadius=z+10;a.innerRadius=z+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+J.centroid(a)+
") rotate("+b+")"}a.outerRadius=I+10;a.innerRadius=I+15;return"translate("+J.centroid(a)+")"});f.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);f.append("text").style("text-anchor",C?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var W={},m=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(C){a.outerRadius=z+10;a.innerRadius=z+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+J.centroid(a)+") rotate("+b+")"}a.outerRadius=I+10;a.innerRadius=I+15;a=J.centroid(a);b=m(a);W[b]&&(a[1]-=14);W[m(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",C?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var g=(a.endAngle-a.startAngle)/(2*Math.PI),k={key:p(a.data),value:f(a.data),percent:d3.format("%")(g)};return a.value&&g>L?k[D]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},k=500,t=500,p=function(a){return a.x},f=function(a){return a.y},g=function(a){return a.description},r=Math.floor(1E4*Math.random()),q=v.utils.defaultColor(),I=d3.format(",.2f"),B=!0,A=!0,E=!1,D="key",L=.02,S=!1,C=!1,P=!1,N=!1,G=.5,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=T;a.options=v.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.values=function(b){v.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return p;p=b;return a};a.y=function(b){if(!arguments.length)return f;f=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return g;g=b;return a};a.showLabels=function(b){if(!arguments.length)return B;B=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return C;C=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return E;E=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return A;A=b;return a};a.labelType=function(b){if(!arguments.length)return D;D=(D=b)||"key";return a};a.donut=function(b){if(!arguments.length)return S;
S=b;return a};a.donutRatio=function(b){if(!arguments.length)return G;G=b;return a};a.startAngle=function(b){if(!arguments.length)return P;P=b;return a};a.endAngle=function(b){if(!arguments.length)return N;N=b;return a};a.id=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return q;q=v.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return I;I=b;return a};a.labelThreshold=function(b){if(!arguments.length)return L;L=b;return a};
return a};v.models.pieChart=function(){function a(q){q.each(function(q){var r=d3.select(this),v=(p||parseInt(r.style("width"))||960)-t.left-t.right,L=(f||parseInt(r.style("height"))||400)-t.top-t.bottom;a.update=function(){r.transition().call(a)};a.container=this;B.disabled=q.map(function(a){return!!a.disabled});if(!A){var G;A={};for(G in B)A[G]=B[G]instanceof Array?B[G].slice(0):B[G]}if(q&&q.length)r.selectAll(".nv-noData").remove();else return G=r.selectAll(".nv-noData").data([E]),G.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),G.attr("x",t.left+v/2).attr("y",t.top+L/2).text(function(a){return a}),a;G=r.selectAll("g.nv-wrap.nv-pieChart").data([q]);var I=G.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),M=G.select("g");I.append("g").attr("class","nv-pieWrap");I.append("g").attr("class","nv-legendWrap");g&&(k.width(v).key(b.x()),G.select(".nv-legendWrap").datum(q).call(k),t.top!=k.height()&&(t.top=k.height(),L=(f||parseInt(r.style("height"))||
400)-t.top-t.bottom),G.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")"));G.attr("transform","translate("+t.left+","+t.top+")");b.width(v).height(L);v=M.select(".nv-pieWrap").datum([q]);d3.transition(v).call(b);k.dispatch.on("stateChange",function(b){B=b;D.stateChange(B);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){D.tooltipHide(a)});D.on("changeState",function(b){"undefined"!==typeof b.disabled&&(q.forEach(function(a,f){a.disabled=b.disabled[f]}),B.disabled=
b.disabled);a.update()})});return a}var b=v.models.pie(),k=v.models.legend(),t={top:30,right:20,bottom:20,left:20},p=null,f=null,g=!0,r=v.utils.defaultColor(),q=!0,I=function(a,b,f,g){return"<h3>"+a+"</h3><p>"+b+"</p>"},B={},A=null,E="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];D.tooltipShow(a)});D.on("tooltipShow",function(f){if(q){var g=b.description()(f.point)||
b.x()(f.point),k=f.pos[0]+0,p=f.pos[1]+0,r=b.valueFormat()(b.y()(f.point)),g=I(g,r,f,a);v.tooltip.show([k,p],g,0>f.value?"n":"s",null,void 0)}});D.on("tooltipHide",function(){q&&v.tooltip.cleanup()});a.legend=k;a.dispatch=D;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=
typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return f;f=b;return a};a.color=function(f){if(!arguments.length)return r;r=v.utils.getColor(f);k.color(r);b.color(r);return a};a.showLegend=function(b){if(!arguments.length)return g;g=b;return a};a.tooltips=
function(b){if(!arguments.length)return q;q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=function(b){if(!arguments.length)return B;B=b;return a};a.defaultState=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};return a};v.models.scatter=function(){function a(Y){Y.each(function(a){var Y=k-b.left-b.right,ca=t-b.top-b.bottom,aa=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var na=K&&z&&U?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:I(a,b),y:B(a,b),size:A(a,b)}})}));g.domain(K||d3.extent(na.map(function(a){return a.x}).concat(L)));T&&a[0]?g.range(J||[(Y*M+Y)/(2*a[0].values.length),Y-Y*(1+M)/(2*a[0].values.length)]):g.range(J||[0,Y]);r.domain(z||d3.extent(na.map(function(a){return a.y}).concat(S))).range(O||[ca,0]);q.domain(U||d3.extent(na.map(function(a){return a.size}).concat(C))).range(H||[16,256]);if(g.domain()[0]===g.domain()[1]||
r.domain()[0]===r.domain()[1])ba=!0;g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1]));r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-.01*r.domain()[0],r.domain()[1]+.01*r.domain()[1]]):r.domain([-1,1]));isNaN(g.domain()[0])&&g.domain([-1,1]);isNaN(r.domain()[0])&&r.domain([-1,1]);Q=Q||g;da=da||r;var ha=aa.selectAll("g.nv-wrap.nv-scatter").data([a]),na=ha.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+f+(ba?" nv-single-point":"")),aa=na.append("defs"),na=na.append("g"),oa=ha.select("g");na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");ha.attr("transform","translate("+b.left+","+b.top+")");aa.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect");ha.select("#nv-edge-clip-"+f+" rect").attr("width",Y).attr("height",0<ca?ca:0);oa.attr("clip-path",R?"url(#nv-edge-clip-"+f+")":"");ia=!0;Y=ha.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});Y.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);Y.exit().remove();Y.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});Y.transition().style("fill",function(a,b){return p(a,b)}).style("stroke",function(a,b){return p(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);D?(ca=Y.selectAll("circle.nv-point").data(function(a){return a.values},N),ca.enter().append("circle").style("fill",function(a,
b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return v.utils.NaNtoZero(Q(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(da(B(a,b)))}).attr("r",function(a,b){return Math.sqrt(q(A(a,b))/Math.PI)}),ca.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return v.utils.NaNtoZero(g(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(r(B(a,b)))}).remove(),ca.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ca.transition().attr("cx",function(a,b){return v.utils.NaNtoZero(g(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(r(B(a,b)))}).attr("r",function(a,b){return Math.sqrt(q(A(a,b))/Math.PI)})):(ca=Y.selectAll("path.nv-point").data(function(a){return a.values}),ca.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+Q(I(a,b))+","+
da(B(a,b))+")"}).attr("d",d3.svg.symbol().type(E).size(function(a,b){return q(A(a,b))})),ca.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+g(I(a,b))+","+r(B(a,b))+")"}).remove(),ca.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ca.transition().attr("transform",function(a,b){return"translate("+g(I(a,b))+","+r(B(a,b))+")"}).attr("d",d3.svg.symbol().type(E).size(function(a,b){return q(A(a,
b))})));clearTimeout(qa);qa=setTimeout(function(){if(!P)return!1;var p=d3.merge(a.map(function(a,b){return a.values.map(function(a,f){var k=I(a,f),m=B(a,f);return[g(k)+1E-7*Math.random(),r(m)+1E-7*Math.random(),b,f,a]}).filter(function(a,b){return G(a[4],b)})}));if(!0===m){if(y){ha.select("defs").selectAll(".nv-point-clips").data([f]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+f);var q=ha.select("#nv-points-clip-"+f).selectAll("circle").data(p);q.enter().append("circle").attr("r",
F);q.exit().remove();q.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});ha.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+f+")")}p.length&&(p.push([g.range()[0]-20,r.range()[0]-20,null,null]),p.push([g.range()[1]+20,r.range()[1]+20,null,null]),p.push([g.range()[0]-20,r.range()[0]+20,null,null]),p.push([g.range()[1]+20,r.range()[1]-20,null,null]));var v=d3.geom.polygon([[-10,-10],[-10,t+10],[k+10,t+10],[k+10,-10]]),q=d3.geom.voronoi(p).map(function(a,b){return{data:v.clip(a),
series:p[b][2],point:p[b][3]}}),q=ha.select(".nv-point-paths").selectAll("path").data(q);q.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});q.exit().remove();q.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var z=function(f,k){if(ia)return 0;var m=a[f.series];if("undefined"!==typeof m){var p=m.values[f.point];k({point:p,series:m,pos:[g(I(p,f.point))+b.left,r(B(p,f.point))+b.top],seriesIndex:f.series,pointIndex:f.point})}};q.on("click",function(a){z(a,
W.elementClick)}).on("mouseover",function(a){z(a,W.elementMouseover)}).on("mouseout",function(a,b){z(a,W.elementMouseout)})}else ha.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(f,k){if(ia||!a[f.series])return 0;var m=a[f.series],p=m.values[k];W.elementClick({point:p,series:m,pos:[g(I(p,k))+b.left,r(B(p,k))+b.top],seriesIndex:f.series,pointIndex:k})}).on("mouseover",function(f,k){if(ia||!a[f.series])return 0;var m=a[f.series],p=m.values[k];W.elementMouseover({point:p,
series:m,pos:[g(I(p,k))+b.left,r(B(p,k))+b.top],seriesIndex:f.series,pointIndex:k})}).on("mouseout",function(b,f){if(ia||!a[b.series])return 0;var g=a[b.series];W.elementMouseout({point:g.values[f],series:g,seriesIndex:b.series,pointIndex:f})});ia=!1},300);Q=g.copy();da=r.copy();q.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=v.utils.defaultColor(),f=Math.floor(1E5*Math.random()),g=d3.scale.linear(),r=d3.scale.linear(),q=d3.scale.linear(),I=function(a){return a.x},B=function(a){return a.y},
A=function(a){return a.size||1},E=function(a){return a.shape||"circle"},D=!0,L=[],S=[],C=[],P=!0,N=null,G=function(a){return!a.notActive},T=!1,M=.1,R=!1,y=!0,F=function(){return 25},K=null,z=null,J=null,O=null,U=null,H=null,ba=!1,W=d3.dispatch("elementClick","elementMouseover","elementMouseout"),m=!0,Q,da,qa,ia=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+f+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,g){d3.select(".nv-chart-"+f+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",g)};W.on("elementMouseover.point",function(b){P&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});W.on("elementMouseout.point",function(b){P&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=W;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return B;B=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return A;A=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return g;g=b;return a};a.yScale=function(b){if(!arguments.length)return r;r=b;return a};a.zScale=function(b){if(!arguments.length)return q;
q=b;return a};a.xDomain=function(b){if(!arguments.length)return K;K=b;return a};a.yDomain=function(b){if(!arguments.length)return z;z=b;return a};a.sizeDomain=function(b){if(!arguments.length)return U;U=b;return a};a.xRange=function(b){if(!arguments.length)return J;J=b;return a};a.yRange=function(b){if(!arguments.length)return O;O=b;return a};a.sizeRange=function(b){if(!arguments.length)return H;H=b;return a};a.forceX=function(b){if(!arguments.length)return L;L=b;return a};a.forceY=function(b){if(!arguments.length)return S;
S=b;return a};a.forceSize=function(b){if(!arguments.length)return C;C=b;return a};a.interactive=function(b){if(!arguments.length)return P;P=b;return a};a.pointKey=function(b){if(!arguments.length)return N;N=b;return a};a.pointActive=function(b){if(!arguments.length)return G;G=b;return a};a.padData=function(b){if(!arguments.length)return T;T=b;return a};a.padDataOuter=function(b){if(!arguments.length)return M;M=b;return a};a.clipEdge=function(b){if(!arguments.length)return R;R=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return y;y=b;return a};a.useVoronoi=function(b){if(!arguments.length)return m;m=b;!1===m&&(y=!1);return a};a.clipRadius=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return p;p=v.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return E;E=b;return a};a.onlyCircles=function(b){if(!arguments.length)return D;D=b;return a};a.id=function(b){if(!arguments.length)return f;f=b;return a};a.singlePoint=function(b){if(!arguments.length)return ba;
ba=b;return a};return a};v.models.scatterChart=function(){function a(da){da.each(function(da){function ia(){if(F)return ha.select(".nv-point-paths").style("pointer-events","all"),!1;ha.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);E.distortion(y).focus(a[0]);D.distortion(y).focus(a[1]);ha.select(".nv-scatterWrap").call(b);G&&ha.select(".nv-x.nv-axis").call(k);T&&ha.select(".nv-y.nv-axis").call(t);ha.select(".nv-distributionX").datum(da.filter(function(a){return!a.disabled})).call(g);
ha.select(".nv-distributionY").datum(da.filter(function(a){return!a.disabled})).call(r)}var Y=d3.select(this),fa=this,ja=(I||parseInt(Y.style("width"))||960)-q.left-q.right,ca=(B||parseInt(Y.style("height"))||400)-q.top-q.bottom;a.update=function(){Y.transition().duration(m).call(a)};a.container=this;U.disabled=da.map(function(a){return!!a.disabled});if(!H){var aa;H={};for(aa in U)H[aa]=U[aa]instanceof Array?U[aa].slice(0):U[aa]}if(da&&da.length&&da.filter(function(a){return a.values.length}).length)Y.selectAll(".nv-noData").remove();
else return aa=Y.selectAll(".nv-noData").data([W]),aa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),aa.attr("x",q.left+ja/2).attr("y",q.top+ca/2).text(function(a){return a}),a;aa=Y.selectAll("g.nv-wrap.nv-scatterChart").data([da]);var na=aa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),ha=aa.select("g");na.append("rect").attr("class","nvd3 nv-background");na.append("g").attr("class","nv-x nv-axis");
na.append("g").attr("class","nv-y nv-axis");na.append("g").attr("class","nv-scatterWrap");na.append("g").attr("class","nv-distWrap");na.append("g").attr("class","nv-legendWrap");na.append("g").attr("class","nv-controlsWrap");if(N){var oa=J?ja/2:ja;p.width(oa);aa.select(".nv-legendWrap").datum(da).call(p);q.top!=p.height()&&(q.top=p.height(),ca=(B||parseInt(Y.style("height"))||400)-q.top-q.bottom);aa.select(".nv-legendWrap").attr("transform","translate("+(ja-oa)+","+-q.top+")")}J&&(f.width(180).color(["#444"]),
ha.select(".nv-controlsWrap").datum(Q).attr("transform","translate(0,"+-q.top+")").call(f));aa.attr("transform","translate("+q.left+","+q.top+")");M&&ha.select(".nv-y.nv-axis").attr("transform","translate("+ja+",0)");b.width(ja).height(ca).color(da.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!da[b].disabled}));0!==L&&b.xDomain(null);0!==S&&b.yDomain(null);aa.select(".nv-scatterWrap").datum(da.filter(function(a){return!a.disabled})).call(b);0!==L&&(oa=E.domain()[1]-E.domain()[0],
b.xDomain([E.domain()[0]-L*oa,E.domain()[1]+L*oa]));0!==S&&(oa=D.domain()[1]-D.domain()[0],b.yDomain([D.domain()[0]-S*oa,D.domain()[1]+S*oa]));0===S&&0===L||aa.select(".nv-scatterWrap").datum(da.filter(function(a){return!a.disabled})).call(b);G&&(k.scale(E).ticks(k.ticks()&&k.ticks().length?k.ticks():ja/100).tickSize(-ca,0),ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")").call(k));T&&(t.scale(D).ticks(t.ticks()&&t.ticks().length?t.ticks():ca/36).tickSize(-ja,0),ha.select(".nv-y.nv-axis").call(t));
C&&(g.getData(b.x()).scale(E).width(ja).color(da.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!da[b].disabled})),na.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ha.select(".nv-distributionX").attr("transform","translate(0,"+D.range()[0]+")").datum(da.filter(function(a){return!a.disabled})).call(g));P&&(r.getData(b.y()).scale(D).width(ca).color(da.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!da[b].disabled})),na.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),ha.select(".nv-distributionY").attr("transform","translate("+(M?ja:-r.size())+",0)").datum(da.filter(function(a){return!a.disabled})).call(r));d3.fisheye&&(ha.select(".nv-background").attr("width",ja).attr("height",ca),ha.select(".nv-background").on("mousemove",ia),ha.select(".nv-background").on("click",function(){F=!F}),b.dispatch.on("elementClick.freezeFisheye",function(){F=!F}));f.dispatch.on("legendClick",function(f,g){f.disabled=!f.disabled;y=f.disabled?0:2.5;ha.select(".nv-background").style("pointer-events",
f.disabled?"none":"all");ha.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(E.distortion(y).focus(0),D.distortion(y).focus(0),ha.select(".nv-scatterWrap").call(b),ha.select(".nv-x.nv-axis").call(k),ha.select(".nv-y.nv-axis").call(t)):F=!1;a.update()});p.dispatch.on("stateChange",function(b){U.disabled=b.disabled;ba.stateChange(U);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,f){return a.pos[1]-ca});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+g.size());a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];ba.tooltipShow(a)});ba.on("tooltipShow",function(f){if(K){var g=fa.parentNode,m=f.pos[0]+(g.offsetLeft||0),p=f.pos[1]+(g.offsetTop||0),r=f.pos[0]+(g.offsetLeft||0),y=D.range()[0]+q.top+(g.offsetTop||0),B=E.range()[0]+q.left+(g.offsetLeft||0),C=f.pos[1]+(g.offsetTop||0),A=k.tickFormat()(b.x()(f.point,
f.pointIndex)),H=t.tickFormat()(b.y()(f.point,f.pointIndex));null!=z&&v.tooltip.show([r,y],z(f.series.key,A,H,f,a),"n",1,g,"x-nvtooltip");null!=V&&v.tooltip.show([B,C],V(f.series.key,A,H,f,a),"e",1,g,"y-nvtooltip");null!=O&&v.tooltip.show([m,p],O(f.series.key,A,H,f,a),0>f.value?"n":"s",null,g)}});ba.on("changeState",function(b){"undefined"!==typeof b.disabled&&(da.forEach(function(a,f){a.disabled=b.disabled[f]}),U.disabled=b.disabled);a.update()});E.copy();D.copy()});return a}var b=v.models.scatter(),
k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f=v.models.legend(),g=v.models.distribution(),r=v.models.distribution(),q={top:30,right:20,bottom:50,left:75},I=null,B=null,A=v.utils.defaultColor(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),L=0,S=0,C=!1,P=!1,N=!0,G=!0,T=!0,M=!1,J=!!d3.fisheye,y=0,F=!1,K=!0,z=function(a,b,f){return"<strong>"+b+"</strong>"},V=function(a,b,f){return"<strong>"+
f+"</strong>"},O=null,U={},H=null,ba=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),W="No Data Available.",m=250;b.xScale(E).yScale(D);k.orient("bottom").tickPadding(10);t.orient(M?"right":"left").tickPadding(10);g.axis("x");r.axis("y");f.updateState(!1);var Q=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){ba.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",r.size())});ba.on("tooltipHide",function(){K&&v.tooltip.cleanup()});a.dispatch=ba;a.scatter=b;a.legend=p;a.controls=f;a.xAxis=k;a.yAxis=t;a.distX=g;a.distY=r;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=v.utils.optionsFunc.bind(a);
a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);p.color(A);g.color(A);r.color(A);return a};
a.showDistX=function(b){if(!arguments.length)return C;C=b;return a};a.showDistY=function(b){if(!arguments.length)return P;P=b;return a};a.showControls=function(b){if(!arguments.length)return J;J=b;return a};a.showLegend=function(b){if(!arguments.length)return N;N=b;return a};a.showXAxis=function(b){if(!arguments.length)return G;G=b;return a};a.showYAxis=function(b){if(!arguments.length)return T;T=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;t.orient(b?"right":"left");
return a};a.fisheye=function(b){if(!arguments.length)return y;y=b;return a};a.xPadding=function(b){if(!arguments.length)return L;L=b;return a};a.yPadding=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return K;K=b;return a};a.tooltipContent=function(b){if(!arguments.length)return O;O=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return V;V=b;return a};a.state=
function(b){if(!arguments.length)return U;U=b;return a};a.defaultState=function(b){if(!arguments.length)return H;H=b;return a};a.noData=function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return m;m=b;return a};return a};v.models.scatterPlusLineChart=function(){function a(m){m.each(function(m){function da(){if(J)return aa.select(".nv-point-paths").style("pointer-events","all"),!1;aa.select(".nv-point-paths").style("pointer-events","none");
var a=d3.mouse(this);E.distortion(M).focus(a[0]);D.distortion(M).focus(a[1]);aa.select(".nv-scatterWrap").datum(m.filter(function(a){return!a.disabled})).call(b);P&&aa.select(".nv-x.nv-axis").call(k);N&&aa.select(".nv-y.nv-axis").call(t);aa.select(".nv-distributionX").datum(m.filter(function(a){return!a.disabled})).call(g);aa.select(".nv-distributionY").datum(m.filter(function(a){return!a.disabled})).call(r)}var qa=d3.select(this),ia=this,Y=(I||parseInt(qa.style("width"))||960)-q.left-q.right,fa=
(B||parseInt(qa.style("height"))||400)-q.top-q.bottom;a.update=function(){qa.transition().duration(ba).call(a)};a.container=this;V.disabled=m.map(function(a){return!!a.disabled});if(!O){var ja;O={};for(ja in V)O[ja]=V[ja]instanceof Array?V[ja].slice(0):V[ja]}if(m&&m.length&&m.filter(function(a){return a.values.length}).length)qa.selectAll(".nv-noData").remove();else return ja=qa.selectAll(".nv-noData").data([H]),ja.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor",
"middle"),ja.attr("x",q.left+Y/2).attr("y",q.top+fa/2).text(function(a){return a}),a;E=b.xScale();D=b.yScale();var ca=qa.selectAll("g.nv-wrap.nv-scatterChart").data([m]);ja=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var aa=ca.select("g");ja.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ja.append("g").attr("class","nv-x nv-axis");ja.append("g").attr("class","nv-y nv-axis");ja.append("g").attr("class","nv-scatterWrap");
ja.append("g").attr("class","nv-regressionLinesWrap");ja.append("g").attr("class","nv-distWrap");ja.append("g").attr("class","nv-legendWrap");ja.append("g").attr("class","nv-controlsWrap");ca.attr("transform","translate("+q.left+","+q.top+")");G&&aa.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");C&&(p.width(Y/2),ca.select(".nv-legendWrap").datum(m).call(p),q.top!=p.height()&&(q.top=p.height(),fa=(B||parseInt(qa.style("height"))||400)-q.top-q.bottom),ca.select(".nv-legendWrap").attr("transform",
"translate("+Y/2+","+-q.top+")"));T&&(f.width(180).color(["#444"]),aa.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-q.top+")").call(f));b.width(Y).height(fa).color(m.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!m[b].disabled}));ca.select(".nv-scatterWrap").datum(m.filter(function(a){return!a.disabled})).call(b);ca.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");ca=ca.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
ca.enter().append("g").attr("class","nv-regLines");ca=ca.selectAll(".nv-regLine").data(function(a){return[a]});ca.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);ca.transition().attr("x1",E.range()[0]).attr("x2",E.range()[1]).attr("y1",function(a,b){return D(E.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return D(E.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,f){return A(a,f)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===
typeof a.slope||"undefined"===typeof a.intercept?0:1});P&&(k.scale(E).ticks(k.ticks()?k.ticks():Y/100).tickSize(-fa,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")").call(k));N&&(t.scale(D).ticks(t.ticks()?t.ticks():fa/36).tickSize(-Y,0),aa.select(".nv-y.nv-axis").call(t));L&&(g.getData(b.x()).scale(E).width(Y).color(m.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!m[b].disabled})),ja.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),
aa.select(".nv-distributionX").attr("transform","translate(0,"+D.range()[0]+")").datum(m.filter(function(a){return!a.disabled})).call(g));S&&(r.getData(b.y()).scale(D).width(fa).color(m.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!m[b].disabled})),ja.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),aa.select(".nv-distributionY").attr("transform","translate("+(G?Y:-r.size())+",0)").datum(m.filter(function(a){return!a.disabled})).call(r));d3.fisheye&&(aa.select(".nv-background").attr("width",
Y).attr("height",fa),aa.select(".nv-background").on("mousemove",da),aa.select(".nv-background").on("click",function(){J=!J}),b.dispatch.on("elementClick.freezeFisheye",function(){J=!J}));f.dispatch.on("legendClick",function(f,g){f.disabled=!f.disabled;M=f.disabled?0:2.5;aa.select(".nv-background").style("pointer-events",f.disabled?"none":"all");aa.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(E.distortion(M).focus(0),D.distortion(M).focus(0),aa.select(".nv-scatterWrap").call(b),
aa.select(".nv-x.nv-axis").call(k),aa.select(".nv-y.nv-axis").call(t)):J=!1;a.update()});p.dispatch.on("stateChange",function(b){V=b;U.stateChange(V);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-fa);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+g.size());a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];U.tooltipShow(a)});U.on("tooltipShow",
function(f){if(y){var g=ia.parentNode,m=f.pos[0]+(g.offsetLeft||0),p=f.pos[1]+(g.offsetTop||0),r=f.pos[0]+(g.offsetLeft||0),B=D.range()[0]+q.top+(g.offsetTop||0),C=E.range()[0]+q.left+(g.offsetLeft||0),A=f.pos[1]+(g.offsetTop||0),O=k.tickFormat()(b.x()(f.point,f.pointIndex)),H=t.tickFormat()(b.y()(f.point,f.pointIndex));null!=F&&v.tooltip.show([r,B],F(f.series.key,O,H,f,a),"n",1,g,"x-nvtooltip");null!=K&&v.tooltip.show([C,A],K(f.series.key,O,H,f,a),"e",1,g,"y-nvtooltip");null!=z&&v.tooltip.show([m,
p],z(f.series.key,O,H,f.point.tooltip,f,a),0>f.value?"n":"s",null,g)}});U.on("changeState",function(b){"undefined"!==typeof b.disabled&&(m.forEach(function(a,f){a.disabled=b.disabled[f]}),V.disabled=b.disabled);a.update()});E.copy();D.copy()});return a}var b=v.models.scatter(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f=v.models.legend(),g=v.models.distribution(),r=v.models.distribution(),q={top:30,right:20,bottom:50,left:75},I=null,B=null,A=v.utils.defaultColor(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),L=!1,S=!1,C=!0,P=!0,N=!0,G=!1,T=!!d3.fisheye,M=0,J=!1,y=!0,F=function(a,b,f){return"<strong>"+b+"</strong>"},K=function(a,b,f){return"<strong>"+f+"</strong>"},z=function(a,b,f,g){return"<h3>"+a+"</h3><p>"+g+"</p>"},V={},O=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),H="No Data Available.",ba=250;b.xScale(E).yScale(D);k.orient("bottom").tickPadding(10);t.orient(G?"right":"left").tickPadding(10);
g.axis("x");r.axis("y");f.updateState(!1);var W=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",r.size())});U.on("tooltipHide",function(){y&&v.tooltip.cleanup()});a.dispatch=U;a.scatter=b;a.legend=p;a.controls=f;a.xAxis=k;a.yAxis=t;a.distX=g;a.distY=r;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:
q.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);p.color(A);g.color(A);r.color(A);return a};a.showDistX=function(b){if(!arguments.length)return L;L=b;return a};a.showDistY=function(b){if(!arguments.length)return S;S=b;return a};a.showControls=function(b){if(!arguments.length)return T;T=b;return a};a.showLegend=function(b){if(!arguments.length)return C;
C=b;return a};a.showXAxis=function(b){if(!arguments.length)return P;P=b;return a};a.showYAxis=function(b){if(!arguments.length)return N;N=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return G;G=b;t.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return M;M=b;return a};a.tooltips=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return F;
F=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return K;K=b;return a};a.state=function(b){if(!arguments.length)return V;V=b;return a};a.defaultState=function(b){if(!arguments.length)return O;O=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};a.transitionDuration=function(b){if(!arguments.length)return ba;ba=b;return a};return a};v.models.sparkline=function(){function a(p){p.each(function(a){var p=k-b.left-b.right,v=t-b.top-b.bottom,L=d3.select(this);f.domain(B||
d3.extent(a,r)).range(E||[0,p]);g.domain(A||d3.extent(a,q)).range(D||[v,0]);a=L.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");p=a.selectAll("path").data(function(a){return[a]});p.enter().append("path");p.exit().remove();p.style("stroke",function(a,b){return a.color||I(a,b)}).attr("d",d3.svg.line().x(function(a,b){return f(r(a,b))}).y(function(a,b){return g(q(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(f){if(-1!=f){var g=a[f];g.pointIndex=f;return g}return null}var f=a.map(function(a,b){return q(a,b)}),k=b(f.lastIndexOf(g.domain()[1])),p=b(f.indexOf(g.domain()[0])),f=b(f.length-1);return[p,k,f].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return f(r(a,a.pointIndex))}).attr("cy",function(a,b){return g(q(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return r(a,
a.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":q(a,a.pointIndex)==g.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},k=400,t=32,p=!0,f=d3.scale.linear(),g=d3.scale.linear(),r=function(a){return a.x},q=function(a){return a.y},I=v.utils.getColor(["#000"]),B,A,E,D;a.options=v.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:
b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.x=function(b){if(!arguments.length)return r;r=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return q;q=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return g;
g=b;return a};a.xDomain=function(b){if(!arguments.length)return B;B=b;return a};a.yDomain=function(b){if(!arguments.length)return A;A=b;return a};a.xRange=function(b){if(!arguments.length)return E;E=b;return a};a.yRange=function(b){if(!arguments.length)return D;D=b;return a};a.animate=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);return a};return a};v.models.sparklinePlus=function(){function a(v){v.each(function(A){function P(){if(!q){var a=
y.selectAll(".nv-hoverValue").data(r),g=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+f(b.x()(A[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);r.length&&(g.append("line").attr("x1",0).attr("y1",-k.top).attr("x2",0).attr("y2",J),g.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-k.top).attr("text-anchor","end").attr("dy",".9em"),y.select(".nv-hoverValue .nv-xValue").text(I(b.x()(A[r[0]],r[0]))),g.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-k.top).attr("text-anchor","start").attr("dy",".9em"),y.select(".nv-hoverValue .nv-yValue").text(B(b.y()(A[r[0]],r[0]))))}}var N=d3.select(this),G=(t||parseInt(N.style("width"))||960)-k.left-k.right,J=(p||parseInt(N.style("height"))||400)-k.top-k.bottom;a.update=function(){a(v)};a.container=
this;if(A&&A.length)N.selectAll(".nv-noData").remove();else{var M=N.selectAll(".nv-noData").data([L]);M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");M.attr("x",k.left+G/2).attr("y",k.top+J/2).text(function(a){return a});return a}M=b.y()(A[A.length-1],A.length-1);f=b.xScale();g=b.yScale();var R=N.selectAll("g.nv-wrap.nv-sparklineplus").data([A]),N=R.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),y=R.select("g");
N.append("g").attr("class","nv-sparklineWrap");N.append("g").attr("class","nv-valueWrap");N.append("g").attr("class","nv-hoverArea");R.attr("transform","translate("+k.left+","+k.top+")");R=y.select(".nv-sparklineWrap");b.width(G).height(J);R.call(b);R=y.select(".nv-valueWrap").selectAll(".nv-currentValue").data([M]);R.enter().append("text").attr("class","nv-currentValue").attr("dx",D?-8:8).attr("dy",".9em").style("text-anchor",D?"end":"start");R.attr("x",G+(D?k.right:0)).attr("y",E?function(a){return g(a)}:
0).style("fill",b.color()(A[A.length-1],A.length-1)).text(B(M));N.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!q){for(var a=d3.mouse(this)[0]-k.left,a=Math.round(f.invert(a)),g=Math.abs(b.x()(A[0],0)-a),p=0,t=0;t<A.length;t++)Math.abs(b.x()(A[t],t)-a)<g&&(g=Math.abs(b.x()(A[t],t)-a),p=t);r=[p];P()}}).on("click",function(){q=!q}).on("mouseout",function(){r=[];P()});y.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-k.left+","+-k.top+")"}).attr("width",
G+k.left+k.right).attr("height",J+k.top)});return a}var b=v.models.sparkline(),k={top:15,right:100,bottom:10,left:50},t=null,p=null,f,g,r=[],q=!1,I=d3.format(",r"),B=d3.format(",.2f"),A=!0,E=!0,D=!1,L="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?
b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.xTickFormat=function(b){if(!arguments.length)return I;I=b;return a};a.yTickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.showValue=function(b){if(!arguments.length)return A;A=b;return a};a.alignValue=function(b){if(!arguments.length)return E;E=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return D;
D=b;return a};a.noData=function(b){if(!arguments.length)return L;L=b;return a};return a};v.models.stackedArea=function(){function a(q){q.each(function(q){var v=k-b.left-b.right,P=t-b.top-b.bottom,M=d3.select(this);D=J.xScale();L=J.yScale();var R=q;q.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,f){a.index=f;a.seriesIndex=b;return a})});q=q.filter(function(a){return!a.disabled});q=d3.layout.stack().order(B).offset(I).values(function(a){return a.values}).x(g).y(r).out(function(a,
b,f){f=0===r(a)?0:f;a.display={y:f,y0:b}})(q);var M=M.selectAll("g.nv-wrap.nv-stackedarea").data([q]),y=M.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),F=y.append("defs"),y=y.append("g"),K=M.select("g");y.append("g").attr("class","nv-areaWrap");y.append("g").attr("class","nv-scatterWrap");M.attr("transform","translate("+b.left+","+b.top+")");J.width(v).height(P).x(g).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(q.map(function(a,b){return a.color||p(a,a.seriesIndex)}));
K.select(".nv-scatterWrap").datum(q).call(J);F.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect");M.select("#nv-edge-clip-"+f+" rect").attr("width",v).attr("height",P);K.attr("clip-path",E?"url(#nv-edge-clip-"+f+")":"");var z=d3.svg.area().x(function(a,b){return D(g(a,b))}).y0(function(a){return L(a.display.y0)}).y1(function(a){return L(a.display.y+a.display.y0)}).interpolate(A),V=d3.svg.area().x(function(a,b){return D(g(a,b))}).y0(function(a){return L(a.display.y0)}).y1(function(a){return L(a.display.y0)}),
v=K.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});v.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return V(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);C.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);C.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);C.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});v.exit().remove();v.style("fill",function(a,b){return a.color||p(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||p(a,a.seriesIndex)});v.transition().attr("d",function(a,b){return z(a.values,b)});J.dispatch.on("elementMouseover.area",function(a){K.select(".nv-chart-"+f+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});J.dispatch.on("elementMouseout.area",function(a){K.select(".nv-chart-"+f+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,f=a[0].length,g=1/b,k,m,p,q=[];for(m=0;m<f;++m){for(p=k=0;k<R.length;k++)p+=r(R[k].values[m]);if(p)for(k=0;k<b;k++)a[k][m][1]/=p;else for(k=0;k<b;k++)a[k][m][1]=g}for(m=0;m<f;++m)q[m]=0;return q}});return a}var b={top:0,right:0,bottom:0,left:0},k=960,t=500,p=v.utils.defaultColor(),
f=Math.floor(1E5*Math.random()),g=function(a){return a.x},r=function(a){return a.y},q="stack",I="zero",B="default",A="linear",E=!1,D,L,J=v.models.scatter(),C=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");J.size(2.2).sizeDomain([2.2,2.2]);J.dispatch.on("elementClick.area",function(a){C.areaClick(a)});J.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];C.tooltipShow(a)});J.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a)});
a.dispatch=C;a.scatter=J;d3.rebind(a,J,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return g;g=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return r;r=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.clipEdge=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return p;p=v.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return I;
I=b;return a};a.order=function(b){if(!arguments.length)return B;B=b;return a};a.style=function(b){if(!arguments.length)return q;q=b;switch(q){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return A;
A=b;return a};return a};v.models.stackedAreaChart=function(){function a(H){H.each(function(H){var W=d3.select(this),m=this,Q=(q||parseInt(W.style("width"))||960)-r.left-r.right,da=(I||parseInt(W.style("height"))||400)-r.top-r.bottom;a.update=function(){W.transition().duration(U).call(a)};a.container=this;R.disabled=H.map(function(a){return!!a.disabled});if(!y){var qa;y={};for(qa in R)y[qa]=R[qa]instanceof Array?R[qa].slice(0):R[qa]}if(H&&H.length&&H.filter(function(a){return a.values.length}).length)W.selectAll(".nv-noData").remove();
else return qa=W.selectAll(".nv-noData").data([F]),qa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),qa.attr("x",r.left+Q/2).attr("y",r.top+da/2).text(function(a){return a}),a;G=b.xScale();T=b.yScale();qa=W.selectAll("g.nv-wrap.nv-stackedAreaChart").data([H]);var ia=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Y=qa.select("g");ia.append("rect").style("opacity",0);ia.append("g").attr("class","nv-x nv-axis");
ia.append("g").attr("class","nv-y nv-axis");ia.append("g").attr("class","nv-stackedWrap");ia.append("g").attr("class","nv-legendWrap");ia.append("g").attr("class","nv-controlsWrap");ia.append("g").attr("class","nv-interactive");Y.select("rect").attr("width",Q).attr("height",da);E&&(ia=A?Q-z:Q,p.width(ia),Y.select(".nv-legendWrap").datum(H).call(p),r.top!=p.height()&&(r.top=p.height(),da=(I||parseInt(W.style("height"))||400)-r.top-r.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+
(Q-ia)+","+-r.top+")"));if(A){var fa=[{key:O.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:O.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:O.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:O.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];z=V.length/3*260;fa=fa.filter(function(a){return-1!==V.indexOf(a.metaKey)});f.width(z).color(["#444",
"#444","#444"]);Y.select(".nv-controlsWrap").datum(fa).call(f);r.top!=Math.max(f.height(),p.height())&&(r.top=Math.max(f.height(),p.height()),da=(I||parseInt(W.style("height"))||400)-r.top-r.bottom);Y.select(".nv-controlsWrap").attr("transform","translate(0,"+-r.top+")")}qa.attr("transform","translate("+r.left+","+r.top+")");S&&Y.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)");C&&(g.width(Q).height(da).margin({left:r.left,top:r.top}).svgContainer(W).xScale(G),qa.select(".nv-interactive").call(g));
b.width(Q).height(da);Y.select(".nv-stackedWrap").datum(H).transition().call(b);D&&(k.scale(G).ticks(Q/100).tickSize(-da,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+da+")"),Y.select(".nv-x.nv-axis").transition().duration(0).call(k));J&&(t.scale(T).ticks("wiggle"==b.offset()?0:da/36).tickSize(-Q,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):M),Y.select(".nv-y.nv-axis").transition().duration(0).call(t));b.dispatch.on("areaClick.toggle",function(b){1===
H.filter(function(a){return!a.disabled}).length?H.forEach(function(a){a.disabled=!1}):H.forEach(function(a,f){a.disabled=f!=b.seriesIndex});R.disabled=H.map(function(a){return!!a.disabled});K.stateChange(R);a.update()});p.dispatch.on("stateChange",function(b){R.disabled=b.disabled;K.stateChange(R);a.update()});f.dispatch.on("legendClick",function(f,g){f.disabled&&(fa=fa.map(function(a){a.disabled=!0;return a}),f.disabled=!1,b.style(f.style),R.style=b.style(),K.stateChange(R),a.update())});g.dispatch.on("elementMousemove",
function(f){b.clearHighlights();var p,q,y,z=[];H.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(g,k){q=v.interactiveBisect(g.values,f.pointXValue,a.x());b.highlightPoint(k,q,!0);var m=g.values[q];if("undefined"!==typeof m){"undefined"===typeof p&&(p=m);"undefined"===typeof y&&(y=a.xScale()(a.x()(m,q)));var r="expand"==b.style()?m.display.y:a.y()(m,q);z.push({key:g.key,value:r,color:B(g,g.seriesIndex),stackedValue:m.display})}});z.reverse();if(2<z.length){var A=a.yScale().invert(f.mouseY),
C=null;z.forEach(function(a,b){A=Math.abs(A);var f=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);A>=f&&A<=g+f&&(C=b)});null!=C&&(z[C].highlight=!0)}var D=k.tickFormat()(a.x()(p,q)),I="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return t.tickFormat()(a)};g.tooltip.position({left:y+r.left,top:f.mouseY+r.top}).chartContainer(m.parentNode).enabled(P).valueFormatter(I).data({value:D,series:z})();g.renderGuideLine(y)});g.dispatch.on("elementMouseout",function(a){K.tooltipHide();
b.clearHighlights()});K.on("tooltipShow",function(f){if(P){var g=m.parentNode,p=f.pos[0]+(g.offsetLeft||0),q=f.pos[1]+(g.offsetTop||0),r=k.tickFormat()(b.x()(f.point,f.pointIndex)),y=t.tickFormat()(b.y()(f.point,f.pointIndex)),r=N(f.series.key,r,y,f,a);v.tooltip.show([p,q],r,0>f.value?"n":"s",null,g)}});K.on("changeState",function(f){"undefined"!==typeof f.disabled&&H.length===f.disabled.length&&(H.forEach(function(a,b){a.disabled=f.disabled[b]}),R.disabled=f.disabled);"undefined"!==typeof f.style&&
b.style(f.style);a.update()})});return a}var b=v.models.stackedArea(),k=v.models.axis(),t=v.models.axis(),p=v.models.legend(),f=v.models.legend(),g=v.interactiveGuideline(),r={top:30,right:25,bottom:50,left:60},q=null,I=null,B=v.utils.defaultColor(),A=!0,E=!0,D=!0,J=!0,S=!1,C=!1,P=!0,N=function(a,b,f,g,k){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},G,T,M=d3.format(",.2f"),R={style:b.style()},y=null,F="No Data Available.",K=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=250,
V=["Stacked","Stream","Expanded"],O={},U=250;k.orient("bottom").tickPadding(7);t.orient(S?"right":"left");f.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];K.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){K.tooltipHide(a)});K.on("tooltipHide",function(){P&&v.tooltip.cleanup()});a.dispatch=K;a.stacked=b;a.legend=p;a.controls=f;a.xAxis=k;a.yAxis=t;a.interactiveLayer=g;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=
function(b){if(!arguments.length)return I;I=b;return a};a.color=function(f){if(!arguments.length)return B;B=v.utils.getColor(f);p.color(B);b.color(B);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return J;J=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;t.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return C;C=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return N;N=b;return a};a.tooltips=function(b){if(!arguments.length)return P;P=b;return a};a.tooltipContent=function(b){if(!arguments.length)return N;N=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=
function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.controlsData=function(b){if(!arguments.length)return V;V=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return O;O=b;return a};t.setTickFormat=t.tickFormat;t.tickFormat=function(a){if(!arguments.length)return M;M=a;return t};return a}})();
(function(J,v){var a=0;J.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=a;a+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=J(this.element),k=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var t=a.find(".pt-chart");this.chart=t.length?t.first():null;k.renderFilter||k.renderOptions?(t="#"+a.attr("id"),k.renderOptions?(J(t+"-options").show(),k.collapseOptions&&(J(t+"-options legend").siblings().toggle(),J(t+"-options legend").children().toggle())):J(t+
"-options").hide(),k.renderFilter?(J(t+"-filters").show(),k.collapseFilter&&(J(t+"-filters legend").siblings().toggle(),J(t+"-filters legend").children().toggle())):J(t+"-options").hide()):a.find(".pt-form-container").hide();k.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());k.numberFormatter=function(a){var b=k.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");
a=b[0];b=1<b.length?"."+b[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+k.thousandGrouping+"})+(?!\\d))","g"),k.thousandSeparator);return a+b};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=J(this.element),k=null;this._unbindEvents();var t=a.find('input[type="hidden"][name="pivotdata"]');t.length&&(k=JSON.parse(J(t).first().val()));k?"count"==k.method&&(this.options.precision=0,this.options.minTickSize=1):(k={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=k;k.nodata?(a.find(".pt-table").first().empty().append(J('<div class="pt-no-data">'+k.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();k.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
J(this.element),k=a.find(".pt-table").first().empty();this.table=null;var t=this.data;if(!t.empty)if(this.options.renderTable){var p=t.cells,f=t.cols,g=t.rows,r=t.total,q=t.labels,v=this.options,B=v.showTotals,A=!1;1==f.length&&null===f[0][4]&&(A=!0);p=t.cells.slice(0);if(A&&B)for(f=[],t=0;t<g.length;t++)p[t]=[];else{for(t=0;t<g.length;t++)p[t]=p[t].filter(function(a,b){return"__other__"!=f[b][0]});f=f.filter(function(a){return"__other__"!=a[0]})}t=!1;1==f.length&&null===f[0][4]&&(t=!0);t&&B?(g=[],
p=[]):(p=p.filter(function(a,b){return"__other__"!=g[b][0]}),g=g.filter(function(a){return"__other__"!=a[0]}));k=d3.select(k.get(0)).append("table").attr("class","dataTable display report");k.append("thead").call(this._renderHeader,f,q,v).call(this._renderColumns,f,q,v);k.append("tbody").call(this._renderRows,this,g,f,q,p,v);v.showTotals&&k.append("tfoot").call(this._renderFooter,g,f,q,r);this.table=J(k.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,k,t,p){a=a.append("tr");a.append("th").attr("scope","col").text(t.layer);k.length&&a.append("th").attr({scope:"col",colspan:k.length}).text(t.cols);p.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(t.total);return a},_renderColumns:function(a,k,t,p){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(t.rows);var f=!1;1==k.length&&null===k[0][4]&&(f=!0);a.selectAll("th.pt-data").data(k).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return f?"":a[4]});return a},_renderRows:function(a,k,t,p,f,g,r){t=a.selectAll("tr.pt-row").data(t).enter().append("tr").attr("class",function(a,b){return b%2?"odd":"even"});var q=!1;1==t.length&&null===t[0][4]&&(q=!0);t.append("td").text(function(a){return q?"":a[4]});t.selectAll("td.pt-cell").data(function(a,
b){return g[b]}).enter().append("td").attr("class","pt-cell").each(k._renderCell,f);r.showTotals&&t.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return t},_renderCell:function(a,k,t){k=d3.select(this);for(var p=a.items,f,g=0,r=p.length;g<r;g++){f=p[g];var q=k.append("div").attr("class","pt-cell-value");null===f?q.text(t.none):J.isArray(f)?q.append("ul").selectAll("li").data(f).enter().append("li").html(function(a){return a}):q.text(f);f=a.keys[g];p&&f&&f.length&&(J(q.node()).data("keys",
f).data("fact",g),q.append("div").attr("class","pt-cell-zoom"));1<r-g&&q.append("span").text(" / ")}},_renderFooter:function(a,k,t,p,f){k=k.length%2?"odd":"even";a=a.append("tr").attr("class",k+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(p.total);a.selectAll("td.pt-col-total").data(t).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(f);return a},_renderChartOptions:function(){var a=
J(this.element),k=a.find(".pt-chart-controls").first().empty(),t=this.data;if(!t.empty&&this.options.renderChart){var t=t.labels,p=a.attr("id"),a=t.layer,f=t.rows,g=t.cols,r=t.per,q=J('<div class="pt-chart-opts">'),v=p+"-pchart-rows",B=p+"-vchart-rows",A=p+"-hchart-rows",E=p+"-schart-rows",D=p+"-pchart-cols",L=p+"-vchart-cols",S=p+"-hchart-cols",p=p+"-schart-cols";a&&J(q).append(J('<span class="pt-chart-label">'+a+": </span>"));f&&J(q).append(J('<div id="'+v+'" class="pt-chart-icon pt-pchart"/><div id="'+
B+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+r+" "+f+"</span>"));g&&J(q).append(J('<div id="'+D+'" class="pt-chart-icon pt-pchart"/><div id="'+L+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+r+" "+g+"</span>"));f&&g&&J(q).append(J('<span class="pt-chart-label">| '+t.breakdown+': </span><div id="'+E+'" class="pt-chart-icon pt-schart"/><div id="'+A+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+r+" "+f+'</span><div id="'+p+'"  class="pt-chart-icon pt-schart"/><div id="'+
S+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+r+" "+g+"</span>"));J(k).append(q)}},_truncateLabel:function(a,k){return a&&a.length>k?a.substring(0,k-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var k=J(this.element),t=this.data;k.find(".pt-chart-contents").hide();if(k=this.chart)if(J(k).unbind("plothover").unbind("plotclick").empty(),!t.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{k=this.options.collapseChart;if("undefined"==typeof a||
!a){if(k)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(k)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;k=a.type;a=a.axis;var p=t.labels,f=p.per,g=p.layer+" "+f+" "+p.rows,p=p.layer+" "+f+" "+p.cols,f=t.filter,r=f[0],q=f[1];"piechart"==k?"rows"==a?this._renderPieChart(t.rows,g,r):this._renderPieChart(t.cols,p,q):"barchart"==k?"rows"==a?this._renderBarChart(t.rows,t.facts,g,r):this._renderBarChart(t.cols,
t.facts,p,q):"breakdown"==k?"rows"==a?this._renderBreakDown(t,0,g,f):this._renderBreakDown(t,1,p,f):"spectrum"==k&&this._renderSpectrum(t,a,f)}}},_renderPieChart:function(a,k,t){var p=this.chart;if(p){J(p).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});k?J(p).siblings(".pt-chart-title").html("<h4>"+k+"</h4>"):J(p).siblings(".pt-chart-title").empty();var f=[],g=0;for(k=0;k<a.length;k++){var r=a[k];!r[1]&&0<=r[2][0]&&(f.push({index:r[0],label:r[4],value:r[2][0],key:r[3]}),
g+=r[2][0])}var q=this;q.chartOptions.currentDataIndex=null;var v=function(a){if(q.chartOptions.currentDataIndex!=a.pointIndex){q._removeChartTooltip();q.chartOptions.currentDataIndex=a.pointIndex;var b=a.value;q._renderChartTooltip(a.pos[0],a.pos[1],'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+b+" ("+Math.round(b/g*100)+"%)</div>"));J(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).pieLabelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0).tooltips(!1);
a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",v).on("elementMouseout",function(a){J(".pt-tooltip").remove();q.chartOptions.currentDataIndex=null;q.chartOptions.currentSeriesIndex=null});if(q.options.exploreChart&&t)a.pie.dispatch.on("elementClick",function(a){a=a.point;q._chartExplore([["__other__"==a.index?t+"__belongs":t,a.key]])});d3.select(J(p).get(0)).append("svg").attr("class","nv").datum(f).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},
_renderBarChart:function(a,k,t,p){var f=this.chart;if(f){J(f).closest(".pt-chart-contents").show().css({width:"96%"});for(var g=[],r=this._truncateLabel,q,v,B,A=0;A<k.length;A++){q={key:k[A][2]};v=[];for(var E=0;E<a.length;E++)B=a[E],v.push({label:B[4],value:B[2][A],filterIndex:B[0],filterKey:B[3]});q.values=v;g.push(q)}J(f).css({height:"360px"});t?J(f).siblings(".pt-chart-title").html("<h4>"+t+"</h4>"):J(f).siblings(".pt-chart-title").empty();var D=function(a,b,f,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},g.pointIndex)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},L=this,S=this.options.numberFormatter;nv.addGraph(function(){var a,b;1<g.length?(a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(D).showControls(!1),b=a.multibar):(a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(D).showValues(!0),
a.valueFormat(S),b=a.discretebar);a.yAxis.tickFormat(S);a.xAxis.tickFormat(function(a){return r(a,18)});d3.select(J(f).get(0)).append("svg").attr("class","nv").datum(g).transition().duration(500).call(a);if(L.options.exploreChart&&p)b.dispatch.on("elementClick",function(a){var b=a.point.filterKey;null===b&&(b="None");var f=p;"__other__"==a.point.filterIndex&&(f+="__belongs");L._chartExplore([[f,b]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,k,t,p){var f=this.chart;
if(f){J(f).closest(".pt-chart-contents").show().css({width:"96%"});var g=a.cells,r,q,v=[],B=[],A,E;0===k?(r=a.rows,q=a.cols,a=function(a,b){return g[v[a]][B[b]].values[0]},A=p[0],E=p[1]):(r=a.cols,q=a.rows,a=function(a,b){return g[B[b]][v[a]].values[0]},A=p[1],E=p[0]);var D,L;p=[];k=[];D=0;for(L=r.length;D<L;D++)r[D][1]||(p.push(r[D]),v.push(D));D=0;for(L=q.length;D<L;D++)q[D][1]||(k.push(q[D]),B.push(D));var S=[];for(r=0;r<k.length;r++){q={key:k[r][4],filterIndex:k[r][0],filterKey:k[r][3]};D=[];
for(L=0;L<p.length;L++)D.push({label:p[L][4],filterIndex:p[L][0],filterKey:p[L][3],value:a(L,r)});q.values=D;S.push(q)}a=Math.max(p.length*Math.max(16*(k.length+1),50)+70,360);J(f).css({height:a+"px"});t?J(f).siblings(".pt-chart-title").html("<h4>"+t+"</h4>"):J(f).siblings(".pt-chart-title").empty();var C=function(a,b,f,g){b=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},g.seriesIndex)+'">'+a+'</div><div class="pt-tooltip-text">'+b.label+
': <span class="pt-tooltip-value">'+b.value+"</span></div></div>"},P=this,N=this.options.numberFormatter,G=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).tooltips(!0).tooltipContent(C).transitionDuration(350).showControls(!0);a.valueFormat(N);a.yAxis.tickFormat(N);a.xAxis.tickFormat(function(a){return G(a,24)});d3.select(J(f).get(0)).append("svg").attr("class",
"nv").datum(S).call(a);if(P.options.exploreChart&&A&&E)a.multibar.dispatch.on("elementClick",function(a){var b=a.series.filterKey,f;null===b&&(b="None");f="__other__"==a.series.filterIndex?E+"__belongs":E;var g=a.point.filterKey;null===g&&(g="None");P._chartExplore([["__other__"==a.point.filterIndex?A+"__belongs":A,g],[f,b]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(a,k,t){var p=this.chart;if(p){var f=this,g=a.cells,r=a.labels,q,I,B,A,E,D;"rows"==k?(q=a.rows,I=a.cols,
k=r.rows,B=r.cols,A=t[0],E=t[1],D=function(a,b){return g[a][b]}):(q=a.cols,I=a.rows,k=r.cols,B=r.rows,A=t[1],E=t[0],D=function(a,b){return g[b][a]});var L=function(a,b){return null===a?I[b]:null===b?q[a]:D(a,b)},S=function(a,b){b===v&&(b="silver");for(var f=[],g,k,m=0;m<I.length;m++)g=L(null,m),k=null===a?g[2][0]:L(a,m).values[0],!g[1]&&0<=g[2][0]&&f.push({filterIndex:g[0],filterKey:g[3],label:g[4],value:k,color:b});return f},C=[],P=0;for(t=0;t<q.length;t++){var N=L(t,null);!N[1]&&0<=N[2][0]&&(C.push({position:t,
filterIndex:N[0],filterKey:N[3],label:N[4],value:N[2][0]}),P+=N[2][0])}f.chartOptions.currentDataIndex=null;J(p).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();J(p).siblings(".pt-chart-title").empty();t=J('<div class="pt-spectrum-pie">').appendTo(p);var p=J('<div class="pt-spectrum-bar">').appendTo(p),G=this.options.numberFormatter,T=this._truncateLabel,M=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!0).tooltipContent(function(a,
b,f,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+G(a.value)+"</div></div>"}).showValues(!0);M.valueFormat(G);M.yAxis.tickFormat(G);M.xAxis.tickFormat(function(a){return T(a,18)});var R=d3.select(J(p).get(0)).append("svg").attr("class","nv"),p=Math.floor(t.width()/2)-30,y=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(p).margin({top:-20,
left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35).tooltips(!1);y.legend.align(!0).rightAlign(!1);y.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});y.pie.dispatch.on("elementMouseover",function(a){if(f.chartOptions.currentDataIndex!=a.pointIndex){f._removeChartTooltip();f.chartOptions.currentDataIndex=a.pointIndex;var b=a.value;f._renderChartTooltip(a.pos[0],a.pos[1],'<div class="pt-tooltip-label">'+
a.label+"</div>"+('<div class="pt-tooltip-text">'+b+" ("+Math.round(b/P*100)+"%)</div>"));J(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}}).on("elementMouseout",function(a){J(".pt-tooltip").remove();f.chartOptions.currentDataIndex=null;f.chartOptions.currentSeriesIndex=null});var F=d3.select(J(t).get(0)).append("svg").attr("class","nv").style({"min-width":p-30+"px"}),p=d3.select(J(t).get(0)).append("div").attr("class","pt-spectrum-form");p.append("h4").html(r.layer+" "+
r.per+" "+B);p.append("label").html(k+":");var K=p.append("select");K.append("option").attr("value","null").style("font-weight","bold").html(f.options.textAll);K.selectAll(".pt-series-item").data(C).enter().append("option").attr("class","pt-series-item").attr("value",function(a,b){return b}).html(function(a){return a.label});p.append("label").html(r.total+":");var z=p.append("span").text(a.total),V=function(g){var k;if(null===g||f.chartOptions.currentSpectrumIndex==g)k=function(a,b){return nv.utils.defaultColor()({},
b)},F.selectAll(".nv-slice").style("fill",k).style("stroke",k),k=S(null),R.datum([{key:null,filterIndex:null,filterKey:null,values:k}]),M.update(),f.chartOptions.currentSpectrumIndex=null,K.property("value","null"),z.text(a.total);else{var p=C[g],q=nv.utils.defaultColor()({},g);k=function(a,b){return b==g?q:"silver"};F.selectAll(".nv-slice").style("fill",k).style("stroke",k);k=S(p.position,q);R.datum([{key:p.position,filterIndex:p.filterIndex,filterKey:p.filterKey,values:k}]);M.update();f.chartOptions.currentSpectrumIndex=
g;K.property("value",g);z.text(C[g].value)}};y.pie.dispatch.on("elementClick",function(a){V(a.index)});K.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?V(null):V(a)});nv.addGraph(function(){F.datum(C).transition().duration(1200).call(y);nv.utils.windowResize(y.update);return y});nv.addGraph(function(){R.datum([{key:null,filterIndex:null,filterKey:null,values:S(null)}]).transition().duration(500).call(M);if(f.options.exploreChart&&A&&E)M.discretebar.dispatch.on("elementClick",
function(a){var b=a.series.filterIndex,g=a.series.filterKey,k=a.point.filterIndex;a=a.point.filterKey;var p=[];null!==b&&p.push(["__other__"==b?A+"__belongs":A,g||"None"]);null!==k&&p.push(["__other__"==k?E+"__belongs":E,a||"None"]);f._chartExplore(p)});nv.utils.windowResize(M.update);return M})}},_chartExplore:function(a){var k=this.options,t=J(this.element).closest(".ui-tabs"),p=k.filterTab;if(t.length&&!1!==p)k=(k=k.filterForm)?J("#"+k):v,S3.search.setCurrentFilters(k,a),a=p?J("#"+p).index():0,
t.tabs("option","active",a);else if(t=k.filterURL)a=this._updateURL(t,a),window.open(a,"_blank")},_renderChartTooltip:function(a,k,t){J('<div class="pt-tooltip">'+t+"</div>").css({position:"absolute",display:"none",top:k-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){J(".pt-tooltip").remove();this.chartOptions.currentDataIndex=
null;this.chartOptions.currentSeriesIndex=null},_getOptions:function(){var a="#"+J(this.element).attr("id");return{rows:J(a+"-rows").val(),cols:J(a+"-cols").val(),fact:J(a+"-fact").val(),totals:J(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+J(this.element).attr("id"),k=null,a=J(a+"-filters");if(a.length)try{k=S3.search.getCurrentFilters(a.first())}catch(t){}return k},_updateURL:function(a,k){var t,p,f=[],g={},r,q,v,B;if(k)for(r=0,q=k.length;r<q;r++)t=k[r],B=t[0],g[B]=!0,f.push(B+
"="+t[1]);t=this.options.ajaxURL.split("?");if(1<t.length){p=t[1].split("&");t={};r=0;for(q=p.length;r<q;r++)v=p[r].split("="),1<v.length&&(B=decodeURIComponent(v[0]),g[B]||(f.push(B+"="+decodeURIComponent(v[1])),t[B]=!0));for(B in t)g[B]=!0}t=a.split("?");if(1<t.length)for(p=t[1].split("&"),r=0,q=p.length;r<q;r++)v=p[r].split("="),1<v.length&&(B=decodeURIComponent(v[0]),g[B]||f.push(B+"="+decodeURIComponent(v[1])));f=f.join("&");g=t[0];f&&(g=g+"?"+f);return g},_updateAjaxURL:function(a,k){var t=
this.options.ajaxURL.split("?"),p=[],f=!1,g;1<t.length?(g=t[1],g=g.split("&")):g=[];var r,q,v;if(a)for(r in a)v=a[r],q=r+"="+v,"totals"==r?this.options.showTotals=v?!0:!1:f||-1!=J.inArray(q,g)||(f=!0),p.push(q);r={};v={};var B,A,E;if(k)for(B=0,A=k.length;B<A;B++)q=k[B],E=q[0],q=q[1],null===q?r[E]||(v[E]=!0):(v[E]&&(v[E]=!1),q=E+"="+encodeURIComponent(q),r[E]?r[E].push(q):r[E]=[q]);B=0;for(A=g.length;B<A;B++)q=g[B].split("="),1<q.length&&(E=decodeURIComponent(q[0]),q=decodeURIComponent(q[1]),v[E]?
f=!0:r[E]?f||-1!=J.inArray(E+"="+q,r[E])||(f=!0):"aggregate"!=E&&(a&&a.hasOwnProperty(E)||p.push(g[B])));for(E in r)for(B=0,A=r[E].length;B<A;B++)f||-1!=J.inArray(r[E][B],g)||(f=!0),p.push(r[E][B]);p=p.join("&");t=t[0];p&&(t=t+"?"+p);this.options.ajaxURL=t;return f},reload:function(a,k,t){t="undefined"!=typeof t?t:!0;"undefined"==typeof k&&(k=this._getFilters());var p=this,f=this.element,g,r=f.find('input[type="hidden"][name="pivotdata"]');if(r.length){f.find(".pt-throbber").show();if(a||k)g=this._updateAjaxURL(a,
k);g||t?(a=this.options.ajaxURL,k=this.options.timeout,t=J.ajaxS3,J.searchS3!==v&&(t=J.searchS3),f.find(".pt-empty").hide(),p.openRequest&&(p.openRequest.onreadystatechange=null,p.openRequest.abort()),p.openRequest=t({timeout:k,url:a,dataType:"json",type:"GET",success:function(a){p.openRequest=null;r.first().val(JSON.stringify(a));p.refresh()},error:function(a,b,f){console.log("UNAUTHORIZED"==f?i18n.gis_requires_login:a.responseText)}})):p.refresh()}},_bindEvents:function(){var a=this,k=J(this.element),
t=this.data,p="#"+k.attr("id");J(p+"-options legend").click(function(){J(this).siblings().toggle();J(this).children().toggle()});J(p+"-filters legend").click(function(){J(this).siblings().toggle();J(this).children().toggle()});k.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;k.find(".pt-table").hide();J(this).siblings(".pt-show-table").show();J(this).hide()});k.find(".pt-show-table").click(function(){a.table_options.hidden=!1;k.find(".pt-table").show();J(this).siblings(".pt-hide-table").show();
J(this).hide()});J(p+"-totals").click(function(){var f=J(this).is(":checked");a.options.showTotals!=f&&a.reload({totals:f},null,!1)});J(p+"-rows,"+p+"-cols,"+p+"-fact").on("change.autosubmit",function(){J(p+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var f=this.options.autoSubmit;J(p+"-pt-form").on("optionChanged",function(){var g=J(this);if(!g.data("noAutoSubmit")){var k=g.data("autoSubmitTimeout");k&&clearTimeout(k);k=setTimeout(function(){var f=a._getOptions(),g=a._getFilters();
a.reload(f,g,!1)},f);g.data("autoSubmitTimeout",k)}})}else J(p+"-pt-form input.pt-submit").click(function(){var f=a._getOptions(),k=a._getFilters();a.reload(f,k,!1)});J(p+" div.pt-table div.pt-cell-zoom").click(function(a){a=J(a.currentTarget);var b=a.closest(".pt-cell-value"),f=b.find(".pt-cell-records");if(0<f.length)f.remove(),a.removeClass("opened");else{for(var k=b.data("keys"),f=b.data("fact"),b=t.lookups[t.facts[f][0]],f=J("<div/>").addClass("pt-cell-records"),p=J("<ul/>"),v=0;v<k.length;v++)p.append("<li>"+
b[k[v]]+"</li>");f.append(p);a.addClass("opened").after(f)}});J(p+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});J(p+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});J(p+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});J(p+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});J(p+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});J(p+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});J(p+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});J(p+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});k.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=J(this.element),k="#"+a.attr("id");J(k+" div.pt-table div.pt-cell-zoom").unbind("click");J(k+"-options legend").unbind("click");J(k+"-filters legend").unbind("click");J(k+"-totals").unbind("click");J(k+"-rows,"+k+"-cols,"+
k+"-fact").unbind("change.autosubmit");J(k+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");J(k+"-pchart-rows,"+k+"-vchart-rows,"+k+"-schart-rows,"+k+"-hchart-rows,"+k+"-pchart-cols,"+k+"-vchart-cols,"+k+"-schart-cols,"+k+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
