/*
 2013-2018 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,f={next:function(){if(e<c.length){var k=e++;return{value:a(k,c[k]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(c,a,e,f){if(a){e=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var k=c[f];k in e||(e[k]={});e=e[k]}c=c[c.length-1];f=e[c];a=a(f);a!=f&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},a=Object.create(new $jscomp.global.Proxy(c,{get:function(e,f,k){return e==c&&"q"==f&&k==a}}));return!0===a.q}catch(e){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var a=c[Symbol.iterator];return a?a.call(c):$jscomp.arrayIterator(c)};$jscomp.owns=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)};
$jscomp.polyfill("WeakMap",function(c){function a(){if(!c||!Object.seal)return!1;try{var a=Object.seal({}),e=Object.seal({}),f=new c([[a,2],[e,3]]);if(2!=f.get(a)||3!=f.get(e))return!1;f.delete(a);f.set(e,4);return!f.has(a)&&4==f.get(e)}catch(v){return!1}}function e(a){$jscomp.owns(a,k)||$jscomp.defineProperty(a,k,{value:{}})}function f(a){var c=Object[a];c&&(Object[a]=function(a){e(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(a())return c;
var k="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var g=0,n=function(a){this.id_=(g+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};n.prototype.set=function(a,c){e(a);if(!$jscomp.owns(a,k))throw Error("WeakMap key fail: "+a);a[k][this.id_]=c;return this};n.prototype.get=function(a){return $jscomp.owns(a,k)?a[k][this.id_]:void 0};n.prototype.has=
function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)};n.prototype.delete=function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)?delete a[k][this.id_]:!1};return n},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function a(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),e=new c($jscomp.makeIterator([[a,"s"]]));if("s"!=e.get(a)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var f=e.entries(),k=f.next();if(k.done||k.value[0]!=a||"s"!=k.value[1])return!1;k=f.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!f.next().done?!1:!0}catch(D){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(a())return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap,f=function(a){this.data_={};this.head_=n();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};f.prototype.set=function(a,c){var e=k(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};f.prototype.delete=function(a){a=k(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};f.prototype.has=function(a){return!!k(this,a).entry};
f.prototype.get=function(a){return(a=k(this,a).entry)&&a.value};f.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};f.prototype.keys=function(){return g(this,function(a){return a.key})};f.prototype.values=function(){return g(this,function(a){return a.value})};f.prototype.forEach=function(a,c){for(var e=this.entries(),f;!(f=e.next()).done;)f=f.value,a.call(c,f[1],f[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var k=function(a,c){var f=c&&typeof c;"object"==
f||"function"==f?e.has(c)?f=e.get(c):(f=""+ ++r,e.set(c,f)):f="p_"+c;var k=a.data_[f];if(k&&$jscomp.owns(a.data_,f))for(a=0;a<k.length;a++){var g=k[a];if(c!==c&&g.key!==g.key||c===g.key)return{id:f,list:k,index:a,entry:g}}return{id:f,list:k,index:-1,entry:void 0}},g=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},n=function(){var a={};return a.previous=
a.next=a.head=a},r=0;return f},"es6","es3");
$jscomp.polyfill("Set",function(c){function a(){if($jscomp.ASSUME_NO_NATIVE_SET||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),e=new c($jscomp.makeIterator([a]));if(!e.has(a)||1!=e.size||e.add(a)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var g=e.entries(),n=g.next();if(n.done||n.value[0]!=a||n.value[1]!=a)return!1;n=g.next();return n.done||n.value[0]==a||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:g.next().done}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(a())return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};e.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};e.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};e.prototype.clear=function(){this.map_.clear();
this.size=0};e.prototype.has=function(a){return this.map_.has(a)};e.prototype.entries=function(){return this.map_.entries()};e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(a,c){var e=this;this.map_.forEach(function(f){return a.call(c,f,f,e)})};return e},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6","es3");$jscomp.findInternal=function(c,a,e){c instanceof String&&(c=String(c));for(var f=c.length,k=0;k<f;k++){var g=c[k];if(a.call(e,g,k,c))return{i:k,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
!function(){function c(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function e(b){return null===b?NaN:+b}function f(b){return!isNaN(b)}function k(b){return{left:function(d,h,m,F){3>arguments.length&&(m=0);4>arguments.length&&(F=d.length);for(;m<F;){var a=m+F>>>1;0>b(d[a],h)?m=a+1:F=a}return m},right:function(d,h,m,F){3>arguments.length&&(m=0);4>arguments.length&&(F=d.length);for(;m<F;){var a=m+F>>>1;0<b(d[a],
h)?F=a:m=a+1}return m}}}function g(b){return b.length}function n(b,d){for(var h in d)Object.defineProperty(b.prototype,h,{value:d[h],enumerable:!1})}function r(){this._=Object.create(null)}function l(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function t(b){return"\x00"===(b+="")[0]?b.slice(1):b}function v(b){return l(b)in this._}function z(b){return(b=l(b))in this._&&delete this._[b]}function D(){var b=[],d;for(d in this._)b.push(t(d));return b}function E(){var b=0,d;for(d in this._)++b;
return b}function G(){for(var b in this._)return!1;return!0}function H(){this._=Object.create(null)}function A(b){return b}function M(b,d,h){return function(){var m=h.apply(d,arguments);return m===d?b:m}}function B(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var h=0,m=de.length;h<m;++h){var F=de[h]+d;if(F in b)return F}}function L(){}function C(){}function u(b){function d(){for(var d=h,m=-1,a=d.length,c;++m<a;)(c=d[m].on)&&c.apply(this,arguments);return b}var h=[],m=new r;d.on=
function(d,a){var F=m.get(d),P;if(2>arguments.length)return F&&F.on;F&&(F.on=null,h=h.slice(0,P=h.indexOf(F)).concat(h.slice(P+1)),m.remove(d));a&&h.push(m.set(d,{on:a}));return b};return d}function R(){y.event.preventDefault()}function O(){for(var b=y.event,d;d=b.sourceEvent;)b=d;return b}function N(b){for(var d=new C,h=0,m=arguments.length;++h<m;)d[arguments[h]]=u(d);d.of=function(h,m){return function(F){try{var a=F.sourceEvent=y.event;F.target=b;y.event=F;d[F.type].apply(h,m)}finally{y.event=a}}};
return d}function I(b){$b(b,ta);return b}function w(b){return"function"===typeof b?b:function(){return ad(b,this)}}function K(b){return"function"===typeof b?b:function(){return bd(b,this)}}function S(b,d){function h(){this.removeAttribute(b)}function m(){this.removeAttributeNS(b.space,b.local)}function F(){this.setAttribute(b,d)}function a(){this.setAttributeNS(b.space,b.local,d)}function c(){var h=d.apply(this,arguments);null==h?this.removeAttribute(b):this.setAttribute(b,h)}function Q(){var h=d.apply(this,
arguments);null==h?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,h)}b=y.ns.qualify(b);return null==d?b.local?m:h:"function"===typeof d?b.local?Q:c:b.local?a:F}function J(b){return new RegExp("(?:^|\\s+)"+y.requote(b)+"(?:\\s+|$)","g")}function p(b,d){function h(){for(var h=-1;++h<F;)b[h](this,d)}function m(){for(var h=-1,m=d.apply(this,arguments);++h<F;)b[h](this,m)}b=(b+"").trim().split(/^|\s+/).map(q);var F=b.length;return"function"===typeof d?m:h}function q(b){var d=
J(b);return function(h,m){if(F=h.classList)return m?F.add(b):F.remove(b);var F=h.getAttribute("class")||"";m?(d.lastIndex=0,d.test(F)||h.setAttribute("class",(F+" "+b).trim().replace(/\s+/g," "))):h.setAttribute("class",F.replace(d," ").trim().replace(/\s+/g," "))}}function V(b,d,h){function m(){this.style.removeProperty(b)}function F(){this.style.setProperty(b,d,h)}function a(){var m=d.apply(this,arguments);null==m?this.style.removeProperty(b):this.style.setProperty(b,m,h)}return null==d?m:"function"===
typeof d?a:F}function ba(b,d){function h(){delete this[b]}function m(){this[b]=d}function F(){var h=d.apply(this,arguments);null==h?delete this[b]:this[b]=h}return null==d?h:"function"===typeof d?F:m}function W(b){function d(){var d=this.ownerDocument,h=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===h&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(h,b)}function h(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=y.ns.qualify(b)).local?h:d}function U(){var b=this.parentNode;b&&b.removeChild(this)}function x(b){return function(){return ac(this,b)}}function T(b){arguments.length||(b=a);return function(d,h){return d&&h?b(d.__data__,h.__data__):!d-!h}}function X(b,d){for(var h=0,m=b.length;h<m;h++)for(var a=b[h],P=0,c=a.length,Q;P<c;P++)(Q=a[P])&&d(Q,P,h);return b}function ra(b){$b(b,Ya);return b}function pa(b){var d,h;return function(m,a,P){m=b[P].update;var F=m.length;P!=h&&(h=P,d=0);for(a>=d&&
(d=a+1);!(a=m[d])&&++d<F;);return a}}function Y(b,d,h){function m(){var d=this[c];d&&(this.removeEventListener(b,d,d.$),delete this[c])}function a(){var a=e(d,Va(arguments));m.call(this);this.addEventListener(b,this[c]=a,a.$=h);a._=d}function P(){var d=new RegExp("^__on([^.]+)"+y.requote(b)+"$"),h,m;for(m in this)if(h=m.match(d)){var a=this[m];this.removeEventListener(h[1],a,a.$);delete this[m]}}var c="__on"+b,Q=b.indexOf("."),e=ha;0<Q&&(b=b.slice(0,Q));var f=cd.get(b);f&&(b=f,e=la);return Q?d?a:
m:d?L:P}function ha(b,d){return function(h){var m=y.event;y.event=h;d[0]=this.__data__;try{b.apply(this,d)}finally{y.event=m}}}function la(b,d){var h=ha(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||h.call(this,b)}}function za(b){var d=".dragsuppress-"+ ++qg,h="click"+d,m=y.select(c(b)).on("touchmove"+d,R).on("dragstart"+d,R).on("selectstart"+d,R);null==kb&&(kb="onselectstart"in b?!1:B(b.style,"userSelect"));if(kb){var a=(b&&(b.ownerDocument||b.document||
b).documentElement).style,P=a[kb];a[kb]="none"}return function(b){m.on(d,null);kb&&(a[kb]=P);if(b){var F=function(){m.on(h,null)};m.on(h,function(){R();F()},!0);setTimeout(F,0)}}}function Aa(b,d){d.changedTouches&&(d=d.changedTouches[0]);var h=b.ownerSVGElement||b;if(h.createSVGPoint){var m=h.createSVGPoint();if(0>dd&&(h=c(b),h.scrollX||h.scrollY)){h=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=h[0][0].getScreenCTM();dd=
!(a.f||a.e);h.remove()}dd?(m.x=d.pageX,m.y=d.pageY):(m.x=d.clientX,m.y=d.clientY);m=m.matrixTransform(b.getScreenCTM().inverse());return[m.x,m.y]}m=b.getBoundingClientRect();return[d.clientX-m.left-b.clientLeft,d.clientY-m.top-b.clientTop]}function ma(){return y.event.changedTouches[0].identifier}function da(b,d,h){return(d[0]-b[0])*(h[1]-b[1])-(d[1]-b[1])*(h[0]-b[0])}function fa(b){return 1<b?0:-1>b?ia:Math.acos(b)}function sa(b){return 1<b?Da:-1>b?-Da:Math.asin(b)}function ya(b){return((b=Math.exp(b))+
1/b)/2}function wa(b){return(b=Math.sin(b/2))*b}function ua(){}function Ja(b,d,h){return this instanceof Ja?void(this.h=+b,this.s=+d,this.l=+h):2>arguments.length?b instanceof Ja?new Ja(b.h,b.s,b.l):bc(""+b,cc,Ja):new Ja(b,d,h)}function va(b,d,h){function m(b){360<b?b-=360:0>b&&(b+=360);return 60>b?P+(a-P)*b/60:180>b?a:240>b?P+(a-P)*(240-b)/60:P}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;h=0>h?0:1<h?1:h;var a=.5>=h?h*(1+d):h+d-h*d;var P=2*h-a;return new Ka(Math.round(255*m(b+120)),
Math.round(255*m(b)),Math.round(255*m(b-120)))}function na(b,d,h){return this instanceof na?void(this.h=+b,this.c=+d,this.l=+h):2>arguments.length?b instanceof na?new na(b.h,b.c,b.l):b instanceof oa?ea(b.l,b.a,b.b):ea((b=dc((b=y.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new na(b,d,h)}function Ha(b,d,h){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new oa(h,Math.cos(b*=ja)*d,Math.sin(b)*d)}function oa(b,d,h){return this instanceof oa?void(this.l=+b,this.a=+d,this.b=+h):2>arguments.length?b instanceof oa?new oa(b.l,
b.a,b.b):b instanceof na?Ha(b.h,b.c,b.l):dc((b=Ka(b)).r,b.g,b.b):new oa(b,d,h)}function Ba(b,d,h){b=(b+16)/116;h=b-h/200;d=Fa(b+d/500)*ee;b=Fa(b)*fe;h=Fa(h)*ge;return new Ka(lb(3.2404542*d-1.5371385*b-.4985314*h),lb(-.969266*d+1.8760108*b+.041556*h),lb(.0556434*d-.2040259*b+1.0572252*h))}function ea(b,d,h){return 0<b?new na(Math.atan2(h,d)*Ca,Math.sqrt(d*d+h*h),b):new na(NaN,NaN,b)}function Fa(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Ga(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function lb(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ka(b,d,h){return this instanceof Ka?void(this.r=~~b,this.g=~~d,this.b=~~h):2>arguments.length?b instanceof Ka?new Ka(b.r,b.g,b.b):bc(""+b,Ka,va):new Ka(b,d,h)}function wb(b){return new Ka(b>>16,b>>8&255,b&255)+""}function cb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function bc(b,d,h){var m=0,a=0,P=0,c;if(c=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var e=c[2].split(",");
switch(c[1]){case "hsl":return h(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return d(ed(e[0]),ed(e[1]),ed(e[2]))}}if(h=ec.get(b))return d(h.r,h.g,h.b);null==b||"#"!==b.charAt(0)||isNaN(h=parseInt(b.slice(1),16))||(4===b.length?(m=(h&3840)>>4,m|=m>>4,a=h&240,a|=a>>4,P=h&15,P|=P<<4):7===b.length&&(m=(h&16711680)>>16,a=(h&65280)>>8,P=h&255));return d(m,a,P)}function cc(b,d,h){var m=Math.min(b/=255,d/=255,h/=255),a=Math.max(b,d,h),P=a-m,c=(a+m)/2;P?(m=.5>c?P/(a+m):P/(2-a-m),
b=60*(b==a?(d-h)/P+(d<h?6:0):d==a?(h-b)/P+2:(b-d)/P+4)):(b=NaN,m=0<c&&1>c?0:b);return new Ja(b,m,c)}function dc(b,d,h){b=Jb(b);d=Jb(d);h=Jb(h);var m=Ga((.4124564*b+.3575761*d+.1804375*h)/ee),a=Ga((.2126729*b+.7151522*d+.072175*h)/fe);b=Ga((.0193339*b+.119192*d+.9503041*h)/ge);return oa(116*a-16,500*(m-a),200*(a-b))}function Jb(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function ed(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function xa(b){return"function"===
typeof b?b:function(){return b}}function fd(b){return function(d,h,m){2===arguments.length&&"function"===typeof h&&(m=h,h=null);return Kb(d,h,b,m)}}function Kb(b,d,h,m){function a(){var b=Z.status,d;if(d=!b)d=(d=Z.responseType)&&"text"!==d?Z.response:Z.responseText;if(d||200<=b&&300>b||304===b){try{var m=h.call(P,Z)}catch(pg){c.error.call(P,pg);return}c.load.call(P,m)}else c.error.call(P,Z)}var P={},c=y.dispatch("beforesend","progress","load","error"),e={},Z=new XMLHttpRequest,f=null;!this.XDomainRequest||
"withCredentials"in Z||!/^(http(s)?:)?\/\//.test(b)||(Z=new XDomainRequest);"onload"in Z?Z.onload=Z.onerror=a:Z.onreadystatechange=function(){3<Z.readyState&&a()};Z.onprogress=function(b){var d=y.event;y.event=b;try{c.progress.call(P,Z)}finally{y.event=d}};P.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return e[b];null==d?delete e[b]:e[b]=d+"";return P};P.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return P};P.responseType=function(b){if(!arguments.length)return f;
f=b;return P};P.response=function(b){h=b;return P};["get","post"].forEach(function(b){P[b]=function(){return P.send.apply(P,[b].concat(Va(arguments)))}});P.send=function(h,m,a){2===arguments.length&&"function"===typeof m&&(a=m,m=null);Z.open(h,b,!0);null==d||"accept"in e||(e.accept=d+",*/*");if(Z.setRequestHeader)for(var F in e)Z.setRequestHeader(F,e[F]);null!=d&&Z.overrideMimeType&&Z.overrideMimeType(d);null!=f&&(Z.responseType=f);if(null!=a)P.on("error",a).on("load",function(b){a(null,b)});c.beforesend.call(P,
Z);Z.send(null==m?null:m);return P};P.abort=function(){Z.abort();return P};y.rebind(P,c,"on");return null==m?P:P.get(rg(m))}function rg(b){return 1===b.length?function(d,h){b(null==d?h:null)}:b}function fc(b,d,h){var m=arguments.length;2>m&&(d=0);3>m&&(h=Date.now());m={c:b,t:h+d,n:null};gc?gc.n=m:hc=m;gc=m;ic||(jc=clearTimeout(jc),ic=1,he(kc));return m}function kc(){var b=ie();b=je()-b;24<b?(isFinite(b)&&(clearTimeout(jc),jc=setTimeout(kc,b)),ic=0):(ic=1,he(kc))}function ie(){for(var b=Date.now(),
d=hc;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function je(){for(var b,d=hc,h=Infinity;d;)d.c?(d.t<h&&(h=d.t),d=(b=d).n):d=b?b.n=d.n:hc=d.n;gc=b;return h}function gd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function sg(b){var d=b.decimal,h=b.thousands,m=b.grouping,a=b.currency,P=m&&h?function(b,d){for(var a=b.length,F=[],P=0,c=m[0],e=0;0<a&&0<c;){e+c+1>d&&(c=Math.max(1,d-e));F.push(b.substring(a-=c,a+c));if((e+=c+1)>d)break;c=m[P=(P+1)%m.length]}return F.reverse().join(h)}:A;return function(b){b=
ke.exec(b);var h=b[1]||" ",m=b[2]||">",F=b[3]||"-",c=b[4]||"",e=b[5],f=+b[6],qa=b[7],k=b[8],g=b[9],p=1,q="",n="",l=!1,u=!0;k&&(k=+k.substring(1));if(e||"0"===h&&"="===m)e=h="0",m="=";switch(g){case "n":qa=!0;g="g";break;case "%":p=100;n="%";g="f";break;case "p":p=100;n="%";g="r";break;case "b":case "o":case "x":case "X":"#"===c&&(q="0"+g.toLowerCase());case "c":u=!1;case "d":l=!0;k=0;break;case "s":p=-1,g="r"}"$"===c&&(q=a[0],n=a[1]);"r"!=g||k||(g="g");if(null!=k)if("g"==g)k=Math.max(1,Math.min(21,
k));else if("e"==g||"f"==g)k=Math.max(0,Math.min(20,k));g=tg.get(g)||ug;var r=e&&qa;return function(b){var a=n;if(l&&b%1)return"";var c=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===F?"":F;0>p?(a=y.formatPrefix(b,k),b=a.scale(b),a=a.symbol+n):b*=p;b=g(b,k);var Q=b.lastIndexOf(".");if(0>Q)if(Q=u?b.lastIndexOf("e"):-1,0>Q){var Z=b;b=""}else Z=b.substring(0,Q),b=b.substring(Q);else Z=b.substring(0,Q),b=d+b.substring(Q+1);!e&&qa&&(Z=P(Z,Infinity));Q=q.length+Z.length+b.length+(r?0:c.length);var aa=Q<f?Array(Q=f-
Q+1).join(h):"";r&&(Z=P(aa+Z,aa.length?f-b.length:Infinity));c+=q;b=Z+b;return("<"===m?c+b+aa:">"===m?aa+c+b:"^"===m?aa.substring(0,Q>>=1)+c+b+aa.substring(Q):c+(r?b:aa+b))+a}}}function ug(b){return b+""}function Za(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function mb(b,d,h){function m(d){var h=b(d),m=c(h,1);return d-h<m-d?h:m}function a(h){d(h=b(new La(h-1)),1);return h}function c(b,h){d(b=new La(+b),h);return b}function e(b,m,F){b=a(b);var c=[];if(1<F)for(;b<
m;)h(b)%F||c.push(new Date(+b)),d(b,1);else for(;b<m;)c.push(new Date(+b)),d(b,1);return c}b.floor=b;b.round=m;b.ceil=a;b.offset=c;b.range=e;var Q=b.utc=mc(b);Q.floor=Q;Q.round=mc(m);Q.ceil=mc(a);Q.offset=mc(c);Q.range=function(b,d,h){try{La=Za;var m=new Za;m._=b;return e(m,d,h)}finally{La=Date}};return b}function mc(b){return function(d,h){try{La=Za;var m=new Za;m._=d;return b(m,h)._}finally{La=Date}}}function vg(b){function d(b){function d(d){for(var h=[],a=-1,F=0,c,P;++a<m;)if(37===b.charCodeAt(a)){h.push(b.slice(F,
a));null!=(c=le[F=b.charAt(++a)])&&(F=b.charAt(++a));if(P=w[F])F=P(d,null==c?"e"===F?" ":"0":c);h.push(F);F=a+1}h.push(b.slice(F,a));return h.join("")}var m=b.length;d.parse=function(d){var m={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(m,b,d,0)!=d.length)return null;"p"in m&&(m.H=m.H%12+12*m.p);d=null!=m.Z&&La!==Za;var a=new (d?Za:La);"j"in m?a.setFullYear(m.y,0,m.j):"W"in m||"U"in m?("w"in m||(m.w="W"in m?1:0),a.setFullYear(m.y,0,1),a.setFullYear(m.y,0,"W"in m?(m.w+6)%7+7*m.W-(a.getDay()+5)%7:m.w+
7*m.U-(a.getDay()+6)%7)):a.setFullYear(m.y,m.m,m.d);a.setHours(m.H+(m.Z/100|0),m.M+m.Z%100,m.S,m.L);return d?a._:a};d.toString=function(){return b};return d}function h(b,d,h,m){for(var a,F=0,c=d.length,P=h.length;F<c;){if(m>=P)return-1;a=d.charCodeAt(F++);if(37===a){if(a=d.charAt(F++),a=t[a in le?d.charAt(F++):a],!a||0>(m=a(b,h,m)))return-1}else if(a!=h.charCodeAt(m++))return-1}return m}var m=b.dateTime,a=b.date,c=b.time,e=b.periods,Q=b.days,f=b.shortDays,aa=b.months,k=b.shortMonths;d.utc=function(b){function h(b){try{La=
Za;var d=new La;d._=b;return m(d)}finally{La=Date}}var m=d(b);h.parse=function(b){try{La=Za;var d=m.parse(b);return d&&d._}finally{La=Date}};h.toString=m.toString;return h};d.multi=d.utc.multi=wg;var g=y.map(),p=nc(Q),q=oc(Q),n=nc(f),l=oc(f),u=nc(aa),r=oc(aa),x=nc(k),C=oc(k);e.forEach(function(b,d){g.set(b.toLowerCase(),d)});var w={a:function(b){return f[b.getDay()]},A:function(b){return Q[b.getDay()]},b:function(b){return k[b.getMonth()]},B:function(b){return aa[b.getMonth()]},c:d(m),d:function(b,
d){return Oa(b.getDate(),d,2)},e:function(b,d){return Oa(b.getDate(),d,2)},H:function(b,d){return Oa(b.getHours(),d,2)},I:function(b,d){return Oa(b.getHours()%12||12,d,2)},j:function(b,d){return Oa(1+ca.dayOfYear(b),d,3)},L:function(b,d){return Oa(b.getMilliseconds(),d,3)},m:function(b,d){return Oa(b.getMonth()+1,d,2)},M:function(b,d){return Oa(b.getMinutes(),d,2)},p:function(b){return e[+(12<=b.getHours())]},S:function(b,d){return Oa(b.getSeconds(),d,2)},U:function(b,d){return Oa(ca.sundayOfYear(b),
d,2)},w:function(b){return b.getDay()},W:function(b,d){return Oa(ca.mondayOfYear(b),d,2)},x:d(a),X:d(c),y:function(b,d){return Oa(b.getFullYear()%100,d,2)},Y:function(b,d){return Oa(b.getFullYear()%1E4,d,4)},Z:xg,"%":function(){return"%"}},t={a:function(b,d,h){n.lastIndex=0;return(d=n.exec(d.slice(h)))?(b.w=l.get(d[0].toLowerCase()),h+d[0].length):-1},A:function(b,d,h){p.lastIndex=0;return(d=p.exec(d.slice(h)))?(b.w=q.get(d[0].toLowerCase()),h+d[0].length):-1},b:function(b,d,h){x.lastIndex=0;return(d=
x.exec(d.slice(h)))?(b.m=C.get(d[0].toLowerCase()),h+d[0].length):-1},B:function(b,d,h){u.lastIndex=0;return(d=u.exec(d.slice(h)))?(b.m=r.get(d[0].toLowerCase()),h+d[0].length):-1},c:function(b,d,m){return h(b,w.c.toString(),d,m)},d:me,e:me,H:ne,I:ne,j:yg,L:zg,m:Ag,M:Bg,p:function(b,d,h){d=g.get(d.slice(h,h+=2).toLowerCase());return null==d?-1:(b.p=d,h)},S:Cg,U:Dg,w:Eg,W:Fg,x:function(b,d,m){return h(b,w.x.toString(),d,m)},X:function(b,d,m){return h(b,w.X.toString(),d,m)},y:Gg,Y:Hg,Z:Ig,"%":Jg};return d}
function Oa(b,d,h){var m=0>b?"-":"";b=(m?-b:b)+"";var a=b.length;return m+(a<h?Array(h-a+1).join(d)+b:b)}function nc(b){return new RegExp("^(?:"+b.map(y.requote).join("|")+")","i")}function oc(b){for(var d=new r,h=-1,m=b.length;++h<m;)d.set(b[h].toLowerCase(),h);return d}function Eg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+1)))?(b.w=+d[0],h+d[0].length):-1}function Dg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h)))?(b.U=+d[0],h+d[0].length):-1}function Fg(b,d,h){Ea.lastIndex=0;return(d=
Ea.exec(d.slice(h)))?(b.W=+d[0],h+d[0].length):-1}function Hg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+4)))?(b.y=+d[0],h+d[0].length):-1}function Gg(b,d,h){Ea.lastIndex=0;if(d=Ea.exec(d.slice(h,h+2))){var m=+d[0];b=(b.y=m+(68<m?1900:2E3),h+d[0].length)}else b=-1;return b}function Ig(b,d,h){return/^[+-]\d{4}$/.test(d=d.slice(h,h+5))?(b.Z=-d,h+5):-1}function Ag(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+2)))?(b.m=d[0]-1,h+d[0].length):-1}function me(b,d,h){Ea.lastIndex=0;return(d=
Ea.exec(d.slice(h,h+2)))?(b.d=+d[0],h+d[0].length):-1}function yg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+3)))?(b.j=+d[0],h+d[0].length):-1}function ne(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+2)))?(b.H=+d[0],h+d[0].length):-1}function Bg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+2)))?(b.M=+d[0],h+d[0].length):-1}function Cg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,h+2)))?(b.S=+d[0],h+d[0].length):-1}function zg(b,d,h){Ea.lastIndex=0;return(d=Ea.exec(d.slice(h,
h+3)))?(b.L=+d[0],h+d[0].length):-1}function xg(b){var d=b.getTimezoneOffset();b=0<d?"-":"+";var h=ka(d)/60|0;d=ka(d)%60;return b+Oa(h,"0",2)+Oa(d,"0",2)}function Jg(b,d,h){oe.lastIndex=0;return(b=oe.exec(d.slice(h,h+1)))?h+b[0].length:-1}function wg(b){for(var d=b.length,h=-1;++h<d;)b[h][0]=this(b[h][0]);return function(d){for(var h=0,m=b[h];!m[1](d);)m=b[++h];return m[0](d)}}function hd(){}function pe(b,d,h){var m=h.s=b+d,a=m-b;h.t=b-(m-a)+(d-a)}function pc(b,d){if(b&&qe.hasOwnProperty(b.type))qe[b.type](b,
d)}function id(b,d,h){var m=-1;h=b.length-h;for(d.lineStart();++m<h;){var a=b[m];d.point(a[0],a[1],a[2])}d.lineEnd()}function re(b,d){var h=-1,m=b.length;for(d.polygonStart();++h<m;)id(b[h],d,1);d.polygonEnd()}function Kg(){function b(b,d){b*=ja;d=d*ja/2+ia/4;var h=b-m,F=0<=h?1:-1;h*=F;var P=Math.cos(d);d=Math.sin(d);var e=c*d;nb.add(Math.atan2(e*F*Math.sin(h),a*P+e*Math.cos(h)));m=b;a=P;c=d}var d,h,m,a,c;Pa.point=function(F,P){Pa.point=b;m=(d=F)*ja;a=Math.cos(P=(h=P)*ja/2+ia/4);c=Math.sin(P)};Pa.lineEnd=
function(){b(d,h)}}function ob(b){var d=b[0];b=b[1];var h=Math.cos(b);return[h*Math.cos(d),h*Math.sin(d),Math.sin(b)]}function qc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function xb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function jd(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function rc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function sc(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function tc(b){return[Math.atan2(b[1],b[0]),sa(b[2])]}function uc(b,
d){return 1E-6>ka(b[0]-d[0])&&1E-6>ka(b[1]-d[1])}function kd(b,d){b*=ja;var h=Math.cos(d*=ja);Lb(h*Math.cos(b),h*Math.sin(b),Math.sin(d))}function Lb(b,d,h){++Mb;pb+=(b-pb)/Mb;qb+=(d-qb)/Mb;$a+=(h-$a)/Mb}function se(){function b(b,a){b*=ja;var F=Math.cos(a*=ja),c=F*Math.cos(b);b=F*Math.sin(b);a=Math.sin(a);var P=Math.atan2(Math.sqrt((P=h*a-m*b)*P+(P=m*c-d*a)*P+(P=d*b-h*c)*P),d*c+h*b+m*a);vc+=P;db+=P*(d+(d=c));eb+=P*(h+(h=b));Wa+=P*(m+(m=a));Lb(d,h,m)}var d,h,m;Sa.point=function(a,c){a*=ja;var F=Math.cos(c*=
ja);d=F*Math.cos(a);h=F*Math.sin(a);m=Math.sin(c);Sa.point=b;Lb(d,h,m)}}function te(){Sa.point=kd}function Lg(){function b(b,d){b*=ja;var h=Math.cos(d*=ja),F=h*Math.cos(b);b=h*Math.sin(b);d=Math.sin(d);h=a*d-c*b;var P=c*F-m*d,e=m*b-a*F,Q=Math.sqrt(h*h+P*P+e*e),f=m*F+a*b+c*d,qa=Q&&-fa(f)/Q;Q=Math.atan2(Q,f);yb+=qa*h;zb+=qa*P;fb+=qa*e;vc+=Q;db+=Q*(m+(m=F));eb+=Q*(a+(a=b));Wa+=Q*(c+(c=d));Lb(m,a,c)}var d,h,m,a,c;Sa.point=function(F,P){d=F;h=P;Sa.point=b;F*=ja;var e=Math.cos(P*=ja);m=e*Math.cos(F);a=
e*Math.sin(F);c=Math.sin(P);Lb(m,a,c)};Sa.lineEnd=function(){b(d,h);Sa.lineEnd=te;Sa.point=kd}}function ue(b,d){function h(h,a){return h=b(h,a),d(h[0],h[1])}b.invert&&d.invert&&(h.invert=function(h,a){return h=d.invert(h,a),h&&b.invert(h[0],h[1])});return h}function Nb(){return!0}function ve(b,d,h,m,a){var c=[],F=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,h=b[0],m=b[d];if(uc(h,m)){a.lineStart();for(m=0;m<d;++m)a.point((h=b[m])[0],h[1]);a.lineEnd()}else d=new wc(h,b,null,!0),h=new wc(h,
null,d,!1),d.o=h,c.push(d),F.push(h),d=new wc(m,b,null,!1),h=new wc(m,null,d,!0),d.o=h,c.push(d),F.push(h)}});F.sort(d);we(c);we(F);if(c.length){b=0;d=h;for(h=F.length;b<h;++b)F[b].e=d=!d;d=c[0];for(var e,f;;){for(var aa=d,k=!0;aa.v;)if((aa=aa.n)===d)return;e=aa.z;a.lineStart();do{aa.v=aa.o.v=!0;if(aa.e){if(k)for(b=0,h=e.length;b<h;++b)a.point((f=e[b])[0],f[1]);else m(aa.x,aa.n.x,1,a);aa=aa.n}else{if(k)for(e=aa.p.z,b=e.length-1;0<=b;--b)a.point((f=e[b])[0],f[1]);else m(aa.x,aa.p.x,-1,a);aa=aa.p}aa=
aa.o;e=aa.z;k=!k}while(!aa.v);a.lineEnd()}}}function we(b){if(d=b.length){for(var d,h=0,m=b[0],a;++h<d;)m.n=a=b[h],a.p=m,m=a;m.n=a=b[0];a.p=m}}function wc(b,d,h,m){this.x=b;this.z=d;this.o=h;this.e=m;this.v=!1;this.n=this.p=null}function xe(b,d,h,m){return function(a,c){function F(d,h){var m=a(d,h);b(d=m[0],h=m[1])&&c.point(d,h)}function P(b,d){b=a(b,d);q.point(b[0],b[1])}function e(){l.point=P;q.lineStart()}function f(){l.point=F;q.lineEnd()}function k(b,d){t.push([b,d]);b=a(b,d);x.point(b[0],b[1])}
function g(){x.lineStart();t=[]}function p(){k(t[0][0],t[0][1]);x.lineEnd();var b=x.clean(),d=r.buffer(),h=d.length;t.pop();C.push(t);t=null;if(h)if(b&1){b=d[0];h=b.length-1;d=-1;var m;if(0<h){w||(c.polygonStart(),w=!0);for(c.lineStart();++d<h;)c.point((m=b[d])[0],m[1]);c.lineEnd()}}else 1<h&&b&2&&d.push(d.pop().concat(d.shift())),u.push(d.filter(Mg))}var q=d(c),n=a.invert(m[0],m[1]),l={point:F,lineStart:e,lineEnd:f,polygonStart:function(){l.point=k;l.lineStart=g;l.lineEnd=p;u=[];C=[]},polygonEnd:function(){l.point=
F;l.lineStart=e;l.lineEnd=f;u=y.merge(u);var b=n;var d=C;var m=b[0],a=b[1],P=[Math.sin(m),-Math.cos(m),0],Q=0,Z=0;nb.reset();for(var qa=0,aa=d.length;qa<aa;++qa){var k=d[qa],g=k.length;if(g){var p=k[0],Na=p[0];b=p[1]/2+ia/4;for(var q=Math.sin(b),r=Math.cos(b),x=1;;){x===g&&(x=0);b=k[x];var t=b[0],Ib=b[1]/2+ia/4,B=Math.sin(Ib);Ib=Math.cos(Ib);var J=t-Na,N=0<=J?1:-1,v=N*J,I=v>ia;q*=B;nb.add(Math.atan2(q*N*Math.sin(v),r*Ib+q*Math.cos(v)));Q+=I?J+N*Qa:J;I^Na>=m^t>=m&&(p=xb(ob(p),ob(b)),sc(p),Na=xb(P,
p),sc(Na),Na=(I^0<=J?-1:1)*sa(Na[2]),a>Na||a===Na&&(p[0]||p[1]))&&(Z+=I^0<=J?1:-1);if(!x++)break;Na=t;q=B;r=Ib;p=b}}}d=(-1E-6>Q||1E-6>Q&&-1E-6>nb)^Z&1;u.length?(w||(c.polygonStart(),w=!0),ve(u,Ng,d,h,c)):d&&(w||(c.polygonStart(),w=!0),c.lineStart(),h(null,null,1,c),c.lineEnd());w&&(c.polygonEnd(),w=!1);u=C=null},sphere:function(){c.polygonStart();c.lineStart();h(null,null,1,c);c.lineEnd();c.polygonEnd()}},u,r=ye(),x=d(r),w=!1,C,t;return l}}function Mg(b){return 1<b.length}function ye(){var b=[],d;
return{lineStart:function(){b.push(d=[])},point:function(b,m){d.push([b,m])},lineEnd:L,buffer:function(){var h=b;b=[];d=null;return h},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Ng(b,d){return(0>(b=b.x)[0]?b[1]-Da-1E-6:Da-b[1])-(0>(d=d.x)[0]?d[1]-Da-1E-6:Da-d[1])}function Og(b){function d(b,d){return Math.cos(b)*Math.cos(d)>a}function h(b,d,h){var m=ob(b),c=ob(d),F=[1,0,0];c=xb(m,c);var P=qc(c,c);m=c[0];var e=P-m*m;if(!e)return!h&&b;P=a*P/e;e=-a*m/e;m=xb(F,c);F=rc(F,
P);c=rc(c,e);jd(F,c);c=qc(F,m);P=qc(m,m);e=c*c-P*(qc(F,F)-1);if(!(0>e)){var Q=Math.sqrt(e);e=rc(m,(-c-Q)/P);jd(e,F);e=tc(e);if(!h)return e;h=b[0];var f=d[0];b=b[1];d=d[1];if(f<h){var Z=h;h=f;f=Z}var qa=f-h,aa=1E-6>ka(qa-ia);!aa&&d<b&&(Z=b,b=d,d=Z);if(aa||1E-6>qa?aa?0<b+d^e[1]<(1E-6>ka(e[0]-h)?b:d):b<=e[1]&&e[1]<=d:qa>ia^(h<=e[0]&&e[0]<=f))return d=rc(m,(-c+Q)/P),jd(d,F),[e,tc(d)]}}function m(d,h){var m=c?b:ia-b,a=0;d<-m?a|=1:d>m&&(a|=2);h<-m?a|=4:h>m&&(a|=8);return a}var a=Math.cos(b),c=0<a,e=1E-6<
ka(a),Q=ld(b,6*ja);return xe(d,function(b){var a,F,P,Q,f;return{lineStart:function(){Q=P=!1;f=1},point:function(Z,qa){var aa=[Z,qa],k=d(Z,qa);qa=c?k?0:m(Z,qa):k?m(Z+(0>Z?ia:-ia),qa):0;!a&&(Q=P=k)&&b.lineStart();k!==P&&(Z=h(a,aa),uc(a,Z)||uc(aa,Z))&&(aa[0]+=1E-6,aa[1]+=1E-6,k=d(aa[0],aa[1]));if(k!==P)f=0,k?(b.lineStart(),Z=h(aa,a),b.point(Z[0],Z[1])):(Z=h(a,aa),b.point(Z[0],Z[1]),b.lineEnd()),a=Z;else if(e&&a&&c^k){var g;qa&F||!(g=h(aa,a,!0))||(f=0,c?(b.lineStart(),b.point(g[0][0],g[0][1]),b.point(g[1][0],
g[1][1]),b.lineEnd()):(b.point(g[1][0],g[1][1]),b.lineEnd(),b.lineStart(),b.point(g[0][0],g[0][1])))}!k||a&&uc(a,aa)||b.point(aa[0],aa[1]);a=aa;P=k;F=qa},lineEnd:function(){P&&b.lineEnd();a=null},clean:function(){return f|(Q&&P)<<1}}},Q,c?[0,-b]:[-ia,b-ia])}function ze(b,d,h,m){return function(a){var c=a.a,F=a.b,e=c.x;c=c.y;var f=0,aa=1,k=F.x-e;F=F.y-c;var g=b-e;if(k||!(0<g)){g/=k;if(0>k){if(g<f)return;g<aa&&(aa=g)}else if(0<k){if(g>aa)return;g>f&&(f=g)}g=h-e;if(k||!(0>g)){g/=k;if(0>k){if(g>aa)return;
g>f&&(f=g)}else if(0<k){if(g<f)return;g<aa&&(aa=g)}g=d-c;if(F||!(0<g)){g/=F;if(0>F){if(g<f)return;g<aa&&(aa=g)}else if(0<F){if(g>aa)return;g>f&&(f=g)}g=m-c;if(F||!(0>g)){g/=F;if(0>F){if(g>aa)return;g>f&&(f=g)}else if(0<F){if(g<f)return;g<aa&&(aa=g)}0<f&&(a.a={x:e+f*k,y:c+f*F});1>aa&&(a.b={x:e+aa*k,y:c+aa*F});return a}}}}}}function Ae(b,d,h,m){function a(m,a){return 1E-6>ka(m[0]-b)?0<a?0:3:1E-6>ka(m[0]-h)?0<a?2:1:1E-6>ka(m[1]-d)?0<a?1:0:0<a?3:2}function c(b,d){return e(b.x,d.x)}function e(b,d){var h=
a(b,1),m=a(d,1);return h!==m?h-m:0===h?d[1]-b[1]:1===h?b[0]-d[0]:2===h?b[1]-d[1]:d[0]-b[0]}return function(F){function P(c,F,P,f){var Q=0,qa=0;if(null==c||(Q=a(c,P))!==(qa=a(F,P))||0>e(c,F)^0<P){do f.point(0===Q||3===Q?b:h,1<Q?m:d);while((Q=(Q+P+4)%4)!==qa)}else f.point(F[0],F[1])}function f(a,c){b<=a&&a<=h&&d<=c&&c<=m&&F.point(a,c)}function Q(a,c){a=Math.max(-1E9,Math.min(1E9,a));c=Math.max(-1E9,Math.min(1E9,c));var P=b<=a&&a<=h&&d<=c&&c<=m;q&&n.push([a,c]);if(B)u=a,r=c,x=P,B=!1,P&&(F.lineStart(),
F.point(a,c));else if(P&&t)F.point(a,c);else{var e={a:{x:w,y:C},b:{x:a,y:c}};k(e)?(t||(F.lineStart(),F.point(e.a.x,e.a.y)),F.point(e.b.x,e.b.y),P||F.lineEnd(),J=!1):P&&(F.lineStart(),F.point(a,c),J=!1)}w=a;C=c;t=P}var qa=F,g=ye(),k=ze(b,d,h,m),p,q,n,l={point:f,lineStart:function(){l.point=Q;q&&q.push(n=[]);B=!0;t=!1;w=C=NaN},lineEnd:function(){p&&(Q(u,r),x&&t&&g.rejoin(),p.push(g.buffer()));l.point=f;t&&F.lineEnd()},polygonStart:function(){F=g;p=[];q=[];J=!0},polygonEnd:function(){F=qa;p=y.merge(p);
var d=[b,m];for(var h=0,a=q.length,e=d[1],f=0;f<a;++f)for(var Q=1,Z=q[f],aa=Z.length,g=Z[0],k;Q<aa;++Q)k=Z[Q],g[1]<=e?k[1]>e&&0<da(g,k,d)&&++h:k[1]<=e&&0>da(g,k,d)&&--h,g=k;d=0!==h;h=J&&d;a=p.length;if(h||a)F.polygonStart(),h&&(F.lineStart(),P(null,null,1,F),F.lineEnd()),a&&ve(p,c,d,P,F),F.polygonEnd();p=q=n=null}},u,r,x,w,C,t,B,J;return l}}function md(b){var d=0,h=ia/3,m=nd(b);b=m(d,h);b.parallels=function(b){return arguments.length?m(d=b[0]*ia/180,h=b[1]*ia/180):[d/ia*180,h/ia*180]};return b}function Be(b,
d){function h(b,d){d=Math.sqrt(a-2*m*Math.sin(d))/m;return[d*Math.sin(b*=m),c-d*Math.cos(b)]}b=Math.sin(b);var m=(b+Math.sin(d))/2,a=1+b*(2*m-b),c=Math.sqrt(a)/m;h.invert=function(b,d){d=c-d;return[Math.atan2(b,d)/m,sa((a-(b*b+d*d)*m*m)/(2*m))]};return h}function Pg(){function b(b,d){od+=a*b-m*d;m=b;a=d}var d,h,m,a;gb.point=function(c,F){gb.point=b;d=m=c;h=a=F};gb.lineEnd=function(){b(d,h)}}function Qg(){function b(b,d){e.push("M",b,",",d,c)}function d(b,d){e.push("M",b,",",d);f.point=h}function h(b,
d){e.push("L",b,",",d)}function m(){f.point=b}function a(){e.push("Z")}var c=Ce(4.5),e=[],f={point:b,lineStart:function(){f.point=d},lineEnd:m,polygonStart:function(){f.lineEnd=a},polygonEnd:function(){f.lineEnd=m;f.point=b},pointRadius:function(b){c=Ce(b);return f},result:function(){if(e.length){var b=e.join("");e=[];return b}}};return f}function Ce(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function rb(b,d){pb+=b;qb+=d;++$a}function De(){function b(b,a){var m=
b-d,c=a-h;m=Math.sqrt(m*m+c*c);db+=m*(d+b)/2;eb+=m*(h+a)/2;Wa+=m;rb(d=b,h=a)}var d,h;Ta.point=function(m,a){Ta.point=b;rb(d=m,h=a)}}function Ee(){Ta.point=rb}function Rg(){function b(b,d){var h=b-m,c=d-a;h=Math.sqrt(h*h+c*c);db+=h*(m+b)/2;eb+=h*(a+d)/2;Wa+=h;h=a*b-m*d;yb+=h*(m+b);zb+=h*(a+d);fb+=3*h;rb(m=b,a=d)}var d,h,m,a;Ta.point=function(c,F){Ta.point=b;rb(d=m=c,h=a=F)};Ta.lineEnd=function(){b(d,h)}}function Sg(b){function d(d,h){b.moveTo(d+e,h);b.arc(d,h,e,0,Qa)}function h(d,h){b.moveTo(d,h);
f.point=m}function m(d,h){b.lineTo(d,h)}function a(){f.point=d}function c(){b.closePath()}var e=4.5,f={point:d,lineStart:function(){f.point=h},lineEnd:a,polygonStart:function(){f.lineEnd=c},polygonEnd:function(){f.lineEnd=a;f.point=d},pointRadius:function(b){e=b;return f},result:L};return f}function Fe(b){function d(b){return(Q?a:h)(b)}function h(d){return Ge(d,function(h,a){h=b(h,a);d.point(h[0],h[1])})}function a(d){function h(h,a){h=b(h,a);d.point(h[0],h[1])}function a(){l=NaN;C.point=m;d.lineStart()}
function m(h,a){var m=ob([h,a]);a=b(h,a);c(l,u,n,r,x,w,l=a[0],u=a[1],n=h,r=m[0],x=m[1],w=m[2],Q,d);d.point(l,u)}function F(){C.point=h;d.lineEnd()}function e(){a();C.point=P;C.lineEnd=f}function P(b,d){m(qa=b,d);Z=l;g=u;k=r;p=x;q=w;C.point=m}function f(){c(l,u,n,r,x,w,Z,g,qa,k,p,q,Q,d);C.lineEnd=F;F()}var qa,Z,g,k,p,q,n,l,u,r,x,w,C={point:h,lineStart:a,lineEnd:F,polygonStart:function(){d.polygonStart();C.lineStart=e},polygonEnd:function(){d.polygonEnd();C.lineStart=a}};return C}function c(d,h,a,m,
F,P,Q,qa,g,k,p,q,l,n){var Z=Q-d,aa=qa-h,u=Z*Z+aa*aa;if(u>4*e&&l--){var Na=m+k,r=F+p,x=P+q,C=Math.sqrt(Na*Na+r*r+x*x),w=Math.asin(x/=C),t=1E-6>ka(ka(x)-1)||1E-6>ka(a-g)?(a+g)/2:Math.atan2(r,Na),B=b(t,w);w=B[0];B=B[1];var J=w-d,N=B-h,v=aa*J-Z*N;if(v*v/u>e||.3<ka((Z*J+aa*N)/u-.5)||m*k+F*p+P*q<f)c(d,h,a,m,F,P,w,B,t,Na/=C,r/=C,x,l,n),n.point(w,B),c(w,B,t,Na,r,x,Q,qa,g,k,p,q,l,n)}}var e=.5,f=Math.cos(30*ja),Q=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(e);Q=0<(e=b*b)&&16;return d};
return d}function Tg(b){var d=Fe(function(d,a){return b([d*Ca,a*Ca])});return function(b){return He(d(b))}}function Ie(b){this.stream=b}function Ge(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function hb(b){return nd(function(){return b})()}function nd(b){function d(b){b=Q(b[0]*ja,b[1]*ja);return[b[0]*g+x,w-b[1]*g]}function h(b){return(b=Q.invert((b[0]-
x)/g,(w-b[1])/g))&&[b[0]*Ca,b[1]*Ca]}function a(){Q=ue(f=pd(n,u,r),e);var b=e(q,l);x=k-b[0]*g;w=p+b[1]*g;return c()}function c(){N&&(N.valid=!1,N=null);return d}var e,f,Q,Z=Fe(function(b,d){b=e(b,d);return[b[0]*g+x,w-b[1]*g]}),g=150,k=480,p=250,q=0,l=0,n=0,u=0,r=0,x,w,C=Je,t=A,B=null,J=null,N;d.stream=function(b){N&&(N.valid=!1);N=He(C(f,Z(t(b))));N.valid=!0;return N};d.clipAngle=function(b){if(!arguments.length)return B;C=null==b?(B=b,Je):Og((B=+b)*ja);return c()};d.clipExtent=function(b){if(!arguments.length)return J;
t=(J=b)?Ae(b[0][0],b[0][1],b[1][0],b[1][1]):A;return c()};d.scale=function(b){if(!arguments.length)return g;g=+b;return a()};d.translate=function(b){if(!arguments.length)return[k,p];k=+b[0];p=+b[1];return a()};d.center=function(b){if(!arguments.length)return[q*Ca,l*Ca];q=b[0]%360*ja;l=b[1]%360*ja;return a()};d.rotate=function(b){if(!arguments.length)return[n*Ca,u*Ca,r*Ca];n=b[0]%360*ja;u=b[1]%360*ja;r=2<b.length?b[2]%360*ja:0;return a()};y.rebind(d,Z,"precision");return function(){e=b.apply(this,
arguments);d.invert=e.invert&&h;return a()}}function He(b){return Ge(b,function(d,h){b.point(d*ja,h*ja)})}function Ob(b,d){return[b,d]}function Ke(b,d){return[b>ia?b-Qa:b<-ia?b+Qa:b,d]}function pd(b,d,h){return b?d||h?ue(Le(b),Me(d,h)):Le(b):d||h?Me(d,h):Ke}function Ne(b){return function(d,h){return d+=b,[d>ia?d-Qa:d<-ia?d+Qa:d,h]}}function Le(b){var d=Ne(b);d.invert=Ne(-b);return d}function Me(b,d){function h(b,d){var h=Math.cos(d),m=Math.cos(b)*h;b=Math.sin(b)*h;d=Math.sin(d);h=d*a+m*c;return[Math.atan2(b*
e-h*f,m*a-d*c),sa(h*e+b*f)]}var a=Math.cos(b),c=Math.sin(b),e=Math.cos(d),f=Math.sin(d);h.invert=function(b,d){var h=Math.cos(d),m=Math.cos(b)*h;b=Math.sin(b)*h;d=Math.sin(d);h=d*e-b*f;return[Math.atan2(b*e+d*f,m*a+h*c),sa(h*a-m*c)]};return h}function ld(b,d){var h=Math.cos(b),a=Math.sin(b);return function(m,c,e,f){var F=e*d;if(null!=m){if(m=Oe(h,m),c=Oe(h,c),0<e?m<c:m>c)m+=e*Qa}else m=b+e*Qa,c=b-.5*F;for(var P;0<e?m>c:m<c;m-=F)f.point((P=tc([h,-a*Math.cos(m),-a*Math.sin(m)]))[0],P[1])}}function Oe(b,
d){d=ob(d);d[0]-=b;sc(d);b=fa(-d[1]);return((0>-d[2]?-b:b)+2*Math.PI-1E-6)%(2*Math.PI)}function Pe(b,d,h){var a=y.range(b,d-1E-6,h).concat(d);return function(b){return a.map(function(d){return[b,d]})}}function Qe(b,d,h){var a=y.range(b,d-1E-6,h).concat(d);return function(b){return a.map(function(d){return[d,b]})}}function qd(b){return b.source}function rd(b){return b.target}function Ug(b,d,h,a){var m=Math.cos(d),c=Math.sin(d),e=Math.cos(a),f=Math.sin(a),g=m*Math.cos(b),k=m*Math.sin(b),p=e*Math.cos(h),
q=e*Math.sin(h),l=2*Math.asin(Math.sqrt(wa(a-d)+m*e*wa(h-b))),n=1/Math.sin(l);h=l?function(b){var d=Math.sin(b*=l)*n;b=Math.sin(l-b)*n;var h=b*g+d*p,a=b*k+d*q;return[Math.atan2(a,h)*Ca,Math.atan2(b*c+d*f,Math.sqrt(h*h+a*a))*Ca]}:function(){return[b*Ca,d*Ca]};h.distance=l;return h}function Pb(b,d){function h(d,h){var a=Math.cos(h),m=b(Math.cos(d)*a);return[m*a*Math.sin(d),m*Math.sin(h)]}h.invert=function(b,h){var a=Math.sqrt(b*b+h*h),m=d(a),c=Math.sin(m);return[Math.atan2(b*c,a*Math.cos(m)),Math.asin(a&&
h*c/a)]};return h}function Re(b,d){function h(b,d){0<e?d<-Da+1E-6&&(d=-Da+1E-6):d>Da-1E-6&&(d=Da-1E-6);d=e/Math.pow(Math.tan(ia/4+d/2),c);return[d*Math.sin(c*b),e-d*Math.cos(c*b)]}var a=Math.cos(b),c=b===d?Math.sin(b):Math.log(a/Math.cos(d))/Math.log(Math.tan(ia/4+d/2)/Math.tan(ia/4+b/2)),e=a*Math.pow(Math.tan(ia/4+b/2),c)/c;if(!c)return xc;h.invert=function(b,d){d=e-d;return[Math.atan2(b,d)/c,2*Math.atan(Math.pow(e/((0<c?1:0>c?-1:0)*Math.sqrt(b*b+d*d)),1/c))-Da]};return h}function Se(b,d){function h(b,
d){d=e-d;return[d*Math.sin(c*b),e-d*Math.cos(c*b)]}var a=Math.cos(b),c=b===d?Math.sin(b):(a-Math.cos(d))/(d-b),e=a/c+b;if(1E-6>ka(c))return Ob;h.invert=function(b,d){d=e-d;return[Math.atan2(b,d)/c,e-(0<c?1:0>c?-1:0)*Math.sqrt(b*b+d*d)]};return h}function xc(b,d){return[b,Math.log(Math.tan(ia/4+d/2))]}function Te(b){var d=hb(b),h=d.scale,a=d.translate,c=d.clipExtent,e;d.scale=function(){var b=h.apply(d,arguments);return b===d?e?d.clipExtent(null):d:b};d.translate=function(){var b=a.apply(d,arguments);
return b===d?e?d.clipExtent(null):d:b};d.clipExtent=function(b){var m=c.apply(d,arguments);if(m===d){if(e=null==b){var F=ia*h(),P=a();c([[P[0]-F,P[1]-F],[P[0]+F,P[1]+F]])}}else e&&(m=null);return m};return d.clipExtent(null)}function sd(b,d){return[Math.log(Math.tan(ia/4+d/2)),-b]}function Ab(b){return b[0]}function Qb(b){return b[1]}function Ue(b){for(var d=b.length,h=[0,1],a=2,c=2;c<d;c++){for(;1<a&&0>=da(b[h[a-2]],b[h[a-1]],b[c]);)--a;h[a++]=c}return h.slice(0,a)}function Vg(b,d){return b[0]-d[0]||
b[1]-d[1]}function td(b,d,h){return(h[0]-d[0])*(b[1]-d[1])<(h[1]-d[1])*(b[0]-d[0])}function ud(b,d,h,a){var m=b[0],c=h[0],e=d[0]-m,f=a[0]-c;b=b[1];h=h[1];d=d[1]-b;a=a[1]-h;c=(f*(b-h)-a*(m-c))/(a*e-f*d);return[m+c*e,b+c*d]}function Ve(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Wg(){yc(this);this.edge=this.site=this.circle=null}function We(b){var d=Xe.pop()||new Wg;d.site=b;return d}function vd(b){Bb(b);Cb.remove(b);Xe.push(b);yc(b)}function Ye(b,d){var h=b.site,a=h.x,c=h.y,
e=c-d;if(!e)return a;b=b.P;if(!b)return-Infinity;h=b.site;b=h.x;h=h.y;d=h-d;if(!d)return b;var f=b-a,Q=1/e-1/d,g=f/d;return Q?(-g+Math.sqrt(g*g-2*Q*(f*f/(-2*d)-h+d/2+c-e/2)))/Q+a:(a+b)/2}function Ze(b){this.site=b;this.edges=[]}function $e(b,d){return d.angle-b.angle}function Xg(){yc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Db(b){var d=b.P,h=b.N;if(d&&h){var a=d.site;d=b.site;var c=h.site;if(a!==c){h=d.x;var e=d.y,f=a.x-h,Q=a.y-e;a=c.x-h;c=c.y-e;var g=2*(f*c-Q*a);if(!(-1E-12<=
g)){var k=f*f+Q*Q,p=a*a+c*c;Q=(c*k-Q*p)/g;f=(f*p-a*k)/g;c=f+e;e=af.pop()||new Xg;e.arc=b;e.site=d;e.x=Q+h;e.y=c+Math.sqrt(Q*Q+f*f);e.cy=c;b.circle=e;b=null;for(d=Rb._;d;)if(e.y<d.y||e.y===d.y&&e.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Rb.insert(b,e);b||(wd=e)}}}}function Bb(b){var d=b.circle;d&&(d.P||(wd=d.N),Rb.remove(d),af.push(d),yc(d),b.circle=null)}function Yg(b,d){var h=b.b;if(h)return!0;var a=b.a;h=d[0][0];var c=d[1][0],e=d[0][1];d=d[1][1];var f=b.l,Q=b.r,g=f.x;
f=f.y;var k=Q.x;Q=Q.y;var p=(g+k)/2;if(Q===f){if(p<h||p>=c)return;if(g>k){if(!a)a={x:p,y:e};else if(a.y>=d)return;h={x:p,y:d}}else{if(!a)a={x:p,y:d};else if(a.y<e)return;h={x:p,y:e}}}else{var q=(g-k)/(Q-f);p=(f+Q)/2-q*p;if(-1>q||1<q)if(g>k){if(!a)a={x:(e-p)/q,y:e};else if(a.y>=d)return;h={x:(d-p)/q,y:d}}else{if(!a)a={x:(d-p)/q,y:d};else if(a.y<e)return;h={x:(e-p)/q,y:e}}else if(f<Q){if(!a)a={x:h,y:q*h+p};else if(a.x>=c)return;h={x:c,y:q*c+p}}else{if(!a)a={x:c,y:q*c+p};else if(a.x<h)return;h={x:h,
y:q*h+p}}}b.a=a;b.b=h;return!0}function bf(b,d){this.l=b;this.r=d;this.a=this.b=null}function Sb(b,d,h,a){var m=new bf(b,d);Eb.push(m);h&&zc(m,b,d,h);a&&zc(m,d,b,a);sb[b.i].edges.push(new Ac(m,b,d));sb[d.i].edges.push(new Ac(m,d,b));return m}function Zg(b,d,h){b=new bf(b,null);b.a=d;b.b=h;Eb.push(b);return b}function zc(b,d,h,a){b.a||b.b?b.l===h?b.b=a:b.a=a:(b.a=a,b.l=d,b.r=h)}function Ac(b,d,h){var a=b.a,c=b.b;this.edge=b;this.site=d;this.angle=h?Math.atan2(h.y-d.y,h.x-d.x):b.l===d?Math.atan2(c.x-
a.x,a.y-c.y):Math.atan2(a.x-c.x,c.y-a.y)}function xd(){this._=null}function yc(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Tb(b,d){var h=d.R,a=d.U;a?a.L===d?a.L=h:a.R=h:b._=h;h.U=a;d.U=h;d.R=h.L;d.R&&(d.R.U=d);h.L=d}function Ub(b,d){var h=d.L,a=d.U;a?a.L===d?a.L=h:a.R=h:b._=h;h.U=a;d.U=h;d.L=h.R;d.L&&(d.L.U=d);h.R=d}function cf(b){for(;b.L;)b=b.L;return b}function yd(b,d){var h=b.sort($g).pop(),a;Eb=[];sb=Array(b.length);Cb=new xd;for(Rb=new xd;;){var c=wd;if(h&&(!c||h.y<c.y||h.y===c.y&&h.x<c.x)){if(h.x!==
a||h.y!==e){sb[h.i]=new Ze(h);var e=a=void 0;c=h;for(var f=c.x,Q=c.y,g=Cb._;g;){var k=Ye(g,Q)-f;if(1E-6<k)g=g.L;else{var p=g;var q=Q;var l=p.N;l?q=Ye(l,q):(p=p.site,q=p.y===q?p.x:Infinity);q=f-q;if(1E-6<q){if(!g.R){e=g;break}g=g.R}else{-1E-6<k?(e=g.P,a=g):-1E-6<q?(e=g,a=g.N):e=a=g;break}}}k=We(c);Cb.insert(e,k);if(e||a)if(e===a)Bb(e),a=We(e.site),Cb.insert(k,a),k.edge=a.edge=Sb(e.site,k.site),Db(e),Db(a);else if(a){Bb(e);Bb(a);f=e.site;g=f.x;q=f.y;p=c.x-g;l=c.y-q;Q=a.site;var n=Q.x-g,u=Q.y-q,r=2*
(p*u-l*n),x=p*p+l*l,w=n*n+u*u;g={x:(u*x-l*w)/r+g,y:(p*w-n*x)/r+q};zc(a.edge,f,Q,g);k.edge=Sb(f,c,null,g);a.edge=Sb(c,Q,null,g);Db(e);Db(a)}else k.edge=Sb(e.site,k.site);a=h.x;e=h.y}h=b.pop()}else if(c){Q=c.arc;c=Q.circle;f=c.x;g=c.cy;c={x:f,y:g};p=Q.P;q=Q.N;k=[Q];vd(Q);for(Q=p;Q.circle&&1E-6>ka(f-Q.circle.x)&&1E-6>ka(g-Q.circle.cy);)p=Q.P,k.unshift(Q),vd(Q),Q=p;k.unshift(Q);Bb(Q);for(p=q;p.circle&&1E-6>ka(f-p.circle.x)&&1E-6>ka(g-p.circle.cy);)q=p.N,k.push(p),vd(p),p=q;k.push(p);Bb(p);g=k.length;
for(f=1;f<g;++f)p=k[f],Q=k[f-1],zc(p.edge,Q.site,p.site,c);Q=k[0];p=k[g-1];p.edge=Sb(Q.site,p.site,null,c);Db(Q);Db(p)}else break}if(d){b=Eb;h=ze(d[0][0],d[0][1],d[1][0],d[1][1]);for(a=b.length;a--;)if(e=b[a],!Yg(e,d)||!h(e)||1E-6>ka(e.a.x-e.b.x)&&1E-6>ka(e.a.y-e.b.y))e.a=e.b=null,b.splice(a,1);b=d[0][0];h=d[1][0];a=d[0][1];d=d[1][1];f=sb;for(Q=f.length;Q--;)if((g=f[Q])&&g.prepare())for(p=g.edges,l=p.length,q=0;q<l;)if(n=p[q].end(),c=n.x,k=n.y,u=p[++q%l].start(),e=u.x,u=u.y,1E-6<ka(c-e)||1E-6<ka(k-
u))p.splice(q,0,new Ac(Zg(g.site,n,1E-6>ka(c-b)&&1E-6<d-k?{x:b,y:1E-6>ka(e-b)?u:d}:1E-6>ka(k-d)&&1E-6<h-c?{x:1E-6>ka(u-d)?e:h,y:d}:1E-6>ka(c-h)&&1E-6<k-a?{x:h,y:1E-6>ka(e-h)?u:a}:1E-6>ka(k-a)&&1E-6<c-b?{x:1E-6>ka(u-a)?e:b,y:a}:null),g.site,null)),++l}d={cells:sb,edges:Eb};Cb=Rb=Eb=sb=null;return d}function $g(b,d){return d.y-b.y||d.x-b.x}function ah(b){return b.x}function bh(b){return b.y}function df(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Vb(b,d,h,a,c,e){if(!b(d,h,a,c,e)){var m=
.5*(h+c),f=.5*(a+e);d=d.nodes;d[0]&&Vb(b,d[0],h,a,m,f);d[1]&&Vb(b,d[1],m,a,c,f);d[2]&&Vb(b,d[2],h,f,m,e);d[3]&&Vb(b,d[3],m,f,c,e)}}function ch(b,d,h,a,c,e,f){var m=Infinity,F;(function lc(b,P,Q,g,k){if(!(P>e||Q>f||g<a||k<c)){if(p=b.point){var p,q=d-b.x,Z=h-b.y;q=q*q+Z*Z;q<m&&(q=Math.sqrt(m=q),a=d-q,c=h-q,e=d+q,f=h+q,F=p)}p=b.nodes;q=.5*(P+g);Z=.5*(Q+k);for(var qa=(h>=Z)<<1|d>=q,l=qa+4;qa<l;++qa)if(b=p[qa&3])switch(qa&3){case 0:lc(b,P,Q,q,Z);break;case 1:lc(b,q,Q,g,Z);break;case 2:lc(b,P,Z,q,k);break;
case 3:lc(b,q,Z,g,k)}}})(b,a,c,e,f);return F}function zd(b,d){b=y.rgb(b);d=y.rgb(d);var h=b.r,a=b.g,c=b.b,e=d.r-h,f=d.g-a,Q=d.b-c;return function(b){return"#"+cb(Math.round(h+e*b))+cb(Math.round(a+f*b))+cb(Math.round(c+Q*b))}}function ef(b,d){var h={},a={},c;for(c in b)c in d?h[c]=tb(b[c],d[c]):a[c]=b[c];for(c in d)c in b||(a[c]=d[c]);return function(b){for(c in h)a[c]=h[c](b);return a}}function ab(b,d){b=+b;d=+d;return function(h){return b*(1-h)+d*h}}function ff(b,d){var h=Ad.lastIndex=Bd.lastIndex=
0,a,c,e,f=-1,Q=[],g=[];b+="";for(d+="";(a=Ad.exec(b))&&(c=Bd.exec(d));)(e=c.index)>h&&(e=d.slice(h,e),Q[f]?Q[f]+=e:Q[++f]=e),(a=a[0])===(c=c[0])?Q[f]?Q[f]+=c:Q[++f]=c:(Q[++f]=null,g.push({i:f,x:ab(a,c)})),h=Bd.lastIndex;h<d.length&&(e=d.slice(h),Q[f]?Q[f]+=e:Q[++f]=e);return 2>Q.length?g[0]?(d=g[0].x,function(b){return d(b)+""}):function(){return d}:(d=g.length,function(b){for(var h=0,a;h<d;++h)Q[(a=g[h]).i]=a.x(b);return Q.join("")})}function tb(b,d){for(var h=y.interpolators.length,a;0<=--h&&!(a=
y.interpolators[h](b,d)););return a}function Bc(b,d){var h=[],a=[],c=b.length,e=d.length,f=Math.min(b.length,d.length),g;for(g=0;g<f;++g)h.push(tb(b[g],d[g]));for(;g<c;++g)a[g]=b[g];for(;g<e;++g)a[g]=d[g];return function(b){for(g=0;g<f;++g)a[g]=h[g](b);return a}}function dh(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function gf(b){return function(d){return 1-b(1-d)}}function hf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function eh(b){return b*b}function fh(b){return b*b*b}function gh(b){if(0>=
b)return 0;if(1<=b)return 1;var d=b*b,h=d*b;return 4*(.5>b?h:3*(b-d)+h-.75)}function hh(b){return 1-Math.cos(b*Da)}function ih(b){return Math.pow(2,10*(b-1))}function jh(b){return 1-Math.sqrt(1-b*b)}function kh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function jf(b,d){d-=b;return function(h){return Math.round(b+d*h)}}function kf(b){var d=[b.a,b.b],h=[b.c,b.d],a=lf(d),c=d[0]*h[0]+d[1]*h[1],e=-c;h[0]+=
e*d[0];h[1]+=e*d[1];e=lf(h)||0;d[0]*h[1]<h[0]*d[1]&&(d[0]*=-1,d[1]*=-1,a*=-1,c*=-1);this.rotate=(a?Math.atan2(d[1],d[0]):Math.atan2(-h[0],h[1]))*Ca;this.translate=[b.e,b.f];this.scale=[a,e];this.skew=e?Math.atan2(c,e)*Ca:0}function lf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function Fb(b){return b.length?b.pop()+",":""}function lh(b,d,h,a){b[0]!==d[0]||b[1]!==d[1]?(h=h.push("translate(",null,",",null,")"),a.push({i:h-4,x:ab(b[0],d[0])},{i:h-2,x:ab(b[1],d[1])})):(d[0]||
d[1])&&h.push("translate("+d+")")}function mh(b,d,h,a){b!==d?(180<b-d?d+=360:180<d-b&&(b+=360),a.push({i:h.push(Fb(h)+"rotate(",null,")")-2,x:ab(b,d)})):d&&h.push(Fb(h)+"rotate("+d+")")}function nh(b,d,h,a){b!==d?a.push({i:h.push(Fb(h)+"skewX(",null,")")-2,x:ab(b,d)}):d&&h.push(Fb(h)+"skewX("+d+")")}function oh(b,d,h,a){b[0]!==d[0]||b[1]!==d[1]?(h=h.push(Fb(h)+"scale(",null,",",null,")"),a.push({i:h-4,x:ab(b[0],d[0])},{i:h-2,x:ab(b[1],d[1])})):1===d[0]&&1===d[1]||h.push(Fb(h)+"scale("+d+")")}function mf(b,
d){var h=[],a=[];b=y.transform(b);d=y.transform(d);lh(b.translate,d.translate,h,a);mh(b.rotate,d.rotate,h,a);nh(b.skew,d.skew,h,a);oh(b.scale,d.scale,h,a);b=d=null;return function(b){for(var d=-1,c=a.length,m;++d<c;)h[(m=a[d]).i]=m.x(b);return h.join("")}}function ph(b,d){d=(d-=b=+b)||1/d;return function(h){return(h-b)/d}}function qh(b,d){d=(d-=b=+b)||1/d;return function(h){return Math.max(0,Math.min(1,(h-b)/d))}}function rh(b){var d=b.source;b=b.target;var h=b;if(d===h)var a=d;else{a=nf(d);h=nf(h);
for(var c=a.pop(),e=h.pop(),f=null;c===e;)f=c,c=a.pop(),e=h.pop();a=f}for(h=[d];d!==a;)d=d.parent,h.push(d);for(d=h.length;b!==a;)h.splice(d,0,b),b=b.parent;return h}function nf(b){for(var d=[],h=b.parent;null!=h;)d.push(b),b=h,h=h.parent;d.push(b);return d}function sh(b){b.fixed|=2}function th(b){b.fixed&=-7}function uh(b){b.fixed|=4;b.px=b.x;b.py=b.y}function vh(b){b.fixed&=-5}function of(b,d,h){var a=0,c=0;b.charge=0;if(!b.leaf)for(var e=b.nodes,f=e.length,g=-1,k;++g<f;)k=e[g],null!=k&&(of(k,d,
h),b.charge+=k.charge,a+=k.charge*k.cx,c+=k.charge*k.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=h[b.point.index],b.charge+=b.pointCharge=d,a+=d*b.point.x,c+=d*b.point.y);b.cx=a/b.charge;b.cy=c/b.charge}function Wb(b,d){y.rebind(b,d,"sort","children","value");b.nodes=b;b.links=wh;return b}function Xb(b,d){for(var h=[b];null!=(b=h.pop());)if(d(b),(c=b.children)&&(a=c.length))for(var a,c;0<=--a;)h.push(c[a])}function Xa(b,d){for(var h=[b],a=[];null!=(b=h.pop());)if(a.push(b),
(e=b.children)&&(c=e.length)){b=-1;for(var c,e;++b<c;)h.push(e[b])}for(;null!=(b=a.pop());)d(b)}function xh(b){return b.children}function yh(b){return b.value}function zh(b,d){return d.value-b.value}function wh(b){return y.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function Ah(b){return b.x}function Bh(b){return b.y}function Ch(b,d,h){b.y0=d;b.y=h}function Cd(b){return y.range(b.length)}function Dd(b){var d=-1;b=b[0].length;for(var h=[];++d<b;)h[d]=
0;return h}function Dh(b){for(var d=1,h=0,a=b[0][1],c,e=b.length;d<e;++d)(c=b[d][1])>a&&(h=d,a=c);return h}function Eh(b){return b.reduce(Fh,0)}function Fh(b,d){return b+d[1]}function Gh(b,d){return pf(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function pf(b,d){var h=-1,a=+b[0];b=(b[1]-a)/d;for(var c=[];++h<=d;)c[h]=b*h+a;return c}function Hh(b){return[y.min(b),y.max(b)]}function Ih(b,d){return b.value-d.value}function Ed(b,d){var h=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=h;h._pack_prev=
d}function qf(b,d){b._pack_next=d;d._pack_prev=b}function rf(b,d){var h=d.x-b.x,a=d.y-b.y;b=b.r+d.r;return.999*b*b>h*h+a*a}function sf(b){function d(b){a=Math.min(b.x-b.r,a);c=Math.max(b.x+b.r,c);e=Math.min(b.y-b.r,e);f=Math.max(b.y+b.r,f)}if((h=b.children)&&(q=h.length)){var h,a=Infinity,c=-Infinity,e=Infinity,f=-Infinity,g,k,p,q;h.forEach(Jh);var l=h[0];l.x=-l.r;l.y=0;d(l);if(1<q){var n=h[1];n.x=n.r;n.y=0;d(n);if(2<q){var u=h[2];tf(l,n,u);d(u);Ed(l,u);l._pack_prev=u;Ed(u,n);n=l._pack_next;for(g=
3;g<q;g++){tf(l,n,u=h[g]);var r=0,x=1,w=1;for(k=n._pack_next;k!==n;k=k._pack_next,x++)if(rf(k,u)){r=1;break}if(1==r)for(p=l._pack_prev;p!==k._pack_prev&&!rf(p,u);p=p._pack_prev,w++);r?(x<w||x==w&&n.r<l.r?qf(l,n=k):qf(l=p,n),g--):(Ed(l,u),n=u,d(u))}}}l=(a+c)/2;n=(e+f)/2;for(g=k=0;g<q;g++)u=h[g],u.x-=l,u.y-=n,k=Math.max(k,u.r+Math.sqrt(u.x*u.x+u.y*u.y));b.r=k;h.forEach(Kh)}}function Jh(b){b._pack_next=b._pack_prev=b}function Kh(b){delete b._pack_next;delete b._pack_prev}function uf(b,d,h,a){var c=b.children;
b.x=d+=a*b.x;b.y=h+=a*b.y;b.r*=a;if(c){b=-1;for(var m=c.length;++b<m;)uf(c[b],d,h,a)}}function tf(b,d,h){var a=b.r+h.r,c=d.x-b.x,e=d.y-b.y;if(a&&(c||e)){var f=d.r+h.r,g=c*c+e*e;f*=f;a*=a;d=.5+(a-f)/(2*g);f=Math.sqrt(Math.max(0,2*f*(a+g)-(a-=g)*a-f*f))/(2*g);h.x=b.x+d*c+f*e;h.y=b.y+d*e-f*c}else h.x=b.x+a,h.y=b.y}function vf(b,d){return b.parent==d.parent?1:2}function Fd(b){var d=b.children;return d.length?d[0]:b.t}function Gd(b){var d=b.children,h;return(h=d.length)?d[h-1]:b.t}function Lh(b){return 1+
y.max(b,function(b){return b.y})}function Mh(b){return b.reduce(function(b,h){return b+h.x},0)/b.length}function wf(b){var d=b.children;return d&&d.length?wf(d[0]):b}function xf(b){var d=b.children,h;return d&&(h=d.length)?xf(d[h-1]):b}function Hd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function yf(b,d){var h=b.x+d[3],a=b.y+d[0],c=b.dx-d[1]-d[3];b=b.dy-d[0]-d[2];0>c&&(h+=c/2,c=0);0>b&&(a+=b/2,b=0);return{x:h,y:a,dx:c,dy:b}}function Gb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function Cc(b){return b.rangeExtent?
b.rangeExtent():Gb(b.range())}function Nh(b,d,h,a){var c=h(b[0],b[1]),m=a(d[0],d[1]);return function(b){return m(c(b))}}function Dc(b,d){var h=0,a=b.length-1,c=b[h],e=b[a];if(e<c){var f=h;h=a;a=f;f=c;c=e;e=f}b[h]=d.floor(c);b[a]=d.ceil(e);return b}function zf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Oh}function Ph(b,d,h,a){var c=[],e=[],m=0,f=Math.min(b.length,d.length)-1;b[f]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++m<=
f;)c.push(h(b[m-1],b[m])),e.push(a(d[m-1],d[m]));return function(d){var h=y.bisect(b,d,1,f)-1;return e[h](c[h](d))}}function Af(b,d,h,a){function c(){var c=2<Math.min(b.length,d.length)?Ph:Nh,F=a?qh:ph;m=c(b,d,F,h);f=c(d,b,F,tb);return e}function e(b){return m(b)}var m,f;e.invert=function(b){return f(b)};e.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return c()};e.range=function(b){if(!arguments.length)return d;d=b;return c()};e.rangeRound=function(b){return e.range(b).interpolate(jf)};
e.clamp=function(b){if(!arguments.length)return a;a=b;return c()};e.interpolate=function(b){if(!arguments.length)return h;h=b;return c()};e.ticks=function(d){return y.range.apply(y,ib(b,d))};e.tickFormat=function(d,h){return Id(b,d,h)};e.nice=function(d){Bf(b,d);return c()};e.copy=function(){return Af(b,d,h,a)};return c()}function Jd(b,d){return y.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Bf(b,d){Dc(b,zf(ib(b,d)[2]));Dc(b,zf(ib(b,d)[2]));return b}function ib(b,d){null==d&&(d=
10);b=Gb(b);var h=b[1]-b[0],a=Math.pow(10,Math.floor(Math.log(h/d)/Math.LN10));d=d/h*a;.15>=d?a*=10:.35>=d?a*=5:.75>=d&&(a*=2);b[0]=Math.ceil(b[0]/a)*a;b[1]=Math.floor(b[1]/a)*a+.5*a;b[2]=a;return b}function Id(b,d,h){b=ib(b,d);if(h){d=ke.exec(h);d.shift();if("s"===d[8]){var a=y.formatPrefix(Math.max(ka(b[0]),ka(b[1])));d[7]||(d[7]="."+Ec(a.scale(b[2])));d[8]="f";h=y.format(d.join(""));return function(b){return h(a.scale(b))+a.symbol}}d[7]||(d[7]="."+Qh(d[8],b));h=d.join("")}else h=",."+Ec(b[2])+
"f";return y.format(h)}function Ec(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Qh(b,d){var h=Ec(d[2]);return b in Rh?Math.abs(h-Ec(Math.max(ka(d[0]),ka(d[1]))))+ +("e"!==b):h-2*("%"===b)}function Cf(b,d,h,a){function c(b){return(h?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function e(b){return h?Math.pow(d,b):-Math.pow(d,-b)}function m(d){return b(c(d))}m.invert=function(d){return e(b.invert(d))};m.domain=function(d){if(!arguments.length)return a;h=0<=d[0];b.domain((a=d.map(Number)).map(c));
return m};m.base=function(h){if(!arguments.length)return d;d=+h;b.domain(a.map(c));return m};m.nice=function(){var d=Dc(a.map(c),h?Math:Sh);b.domain(d);a=d.map(e);return m};m.ticks=function(){var b=Gb(a),m=[],f=b[0];b=b[1];var F=Math.floor(c(f)),g=Math.ceil(c(b)),P=d%1?2:d;if(isFinite(g-F)){if(h){for(;F<g;F++)for(var k=1;k<P;k++)m.push(e(F)*k);m.push(e(F))}else for(m.push(e(F));F++<g;)for(k=P-1;0<k;k--)m.push(e(F)*k);for(F=0;m[F]<f;F++);for(g=m.length;m[g-1]>b;g--);m=m.slice(F,g)}return m};m.tickFormat=
function(b,h){if(!arguments.length)return Df;2>arguments.length?h=Df:"function"!==typeof h&&(h=y.format(h));var a=Math.max(1,d*b/m.ticks().length);return function(b){var m=b/e(Math.round(c(b)));m*d<d-.5&&(m*=d);return m<=a?h(b):""}};m.copy=function(){return Cf(b.copy(),d,h,a)};return Jd(m,b)}function Ef(b,d,h){function a(d){return b(c(d))}var c=Fc(d),e=Fc(1/d);a.invert=function(d){return e(b.invert(d))};a.domain=function(d){if(!arguments.length)return h;b.domain((h=d.map(Number)).map(c));return a};
a.ticks=function(b){return y.range.apply(y,ib(h,b))};a.tickFormat=function(b,d){return Id(h,b,d)};a.nice=function(b){return a.domain(Bf(h,b))};a.exponent=function(m){if(!arguments.length)return d;c=Fc(d=m);e=Fc(1/d);b.domain(h.map(c));return a};a.copy=function(){return Ef(b.copy(),d,h)};return Jd(a,b)}function Fc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ff(b,d){function h(a){return e[((c.get(a)||("range"===d.t?c.set(a,b.push(a)):NaN))-1)%e.length]}function a(d,a){return y.range(b.length).map(function(b){return d+
a*b})}var c,e,f;h.domain=function(a){if(!arguments.length)return b;b=[];c=new r;for(var e=-1,m=a.length,f;++e<m;)c.has(f=a[e])||c.set(f,b.push(f));return h[d.t].apply(h,d.a)};h.range=function(b){if(!arguments.length)return e;e=b;f=0;d={t:"range",a:arguments};return h};h.rangePoints=function(c,m){2>arguments.length&&(m=0);var F=c[0],g=c[1];g=2>b.length?(F=(F+g)/2,0):(g-F)/(b.length-1+m);e=a(F+g*m/2,g);f=0;d={t:"rangePoints",a:arguments};return h};h.rangeRoundPoints=function(c,m){2>arguments.length&&
(m=0);var F=c[0],g=c[1],P=2>b.length?(F=g=Math.round((F+g)/2),0):(g-F)/(b.length-1+m)|0;e=a(F+Math.round(P*m/2+(g-F-(b.length-1+m)*P)/2),P);f=0;d={t:"rangeRoundPoints",a:arguments};return h};h.rangeBands=function(c,m,F){2>arguments.length&&(m=0);3>arguments.length&&(F=m);var g=c[1]<c[0],P=c[g-0],k=(c[1-g]-P)/(b.length-m+2*F);e=a(P+k*F,k);g&&e.reverse();f=k*(1-m);d={t:"rangeBands",a:arguments};return h};h.rangeRoundBands=function(c,m,F){2>arguments.length&&(m=0);3>arguments.length&&(F=m);var g=c[1]<
c[0],P=c[g-0],k=c[1-g],p=Math.floor((k-P)/(b.length-m+2*F));e=a(P+Math.round((k-P-(b.length-m)*p)/2),p);g&&e.reverse();f=Math.round(p*(1-m));d={t:"rangeRoundBands",a:arguments};return h};h.rangeBand=function(){return f};h.rangeExtent=function(){return Gb(d.a[0])};h.copy=function(){return Ff(b,d)};return h.domain(b)}function Gf(b,d){function h(){var a=0,h=d.length;for(F=[];++a<h;)F[a-1]=y.quantile(b,a/h);return c}function c(b){if(!isNaN(b=+b))return d[y.bisect(F,b)]}var F;c.domain=function(d){if(!arguments.length)return b;
b=d.map(e).filter(f).sort(a);return h()};c.range=function(b){if(!arguments.length)return d;d=b;return h()};c.quantiles=function(){return F};c.invertExtent=function(a){a=d.indexOf(a);return 0>a?[NaN,NaN]:[0<a?F[a-1]:b[0],a<F.length?F[a]:b[b.length-1]]};c.copy=function(){return Gf(b,d)};return h()}function Hf(b,d,a){function h(d){return a[Math.max(0,Math.min(f,Math.floor(e*(d-b))))]}function c(){e=a.length/(d-b);f=a.length-1;return h}var e,f;h.domain=function(a){if(!arguments.length)return[b,d];b=+a[0];
d=+a[a.length-1];return c()};h.range=function(b){if(!arguments.length)return a;a=b;return c()};h.invertExtent=function(d){d=a.indexOf(d);d=0>d?NaN:d/e+b;return[d,d+1/e]};h.copy=function(){return Hf(b,d,a)};return c()}function If(b,d){function a(a){if(a<=a)return d[y.bisect(b,a)]}a.domain=function(d){if(!arguments.length)return b;b=d;return a};a.range=function(b){if(!arguments.length)return d;d=b;return a};a.invertExtent=function(a){a=d.indexOf(a);return[b[a-1],b[a]]};a.copy=function(){return If(b,
d)};return a}function Jf(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(a){if(!arguments.length)return b;b=a.map(d);return d};d.ticks=function(d){return y.range.apply(y,ib(b,d))};d.tickFormat=function(d,a){return Id(b,d,a)};d.copy=function(){return Jf(b)};return d}function Th(){return 0}function Uh(b){return b.innerRadius}function Vh(b){return b.outerRadius}function Kf(b){return b.startAngle}function Lf(b){return b.endAngle}function Wh(b){return b&&b.padAngle}function Gc(b,d,a,c){return 0<
(b-a)*d-(d-c)*b?0:1}function Hc(b,d,a,c,e){var h=b[0]-d[0],m=b[1]-d[1];e=(e?c:-c)/Math.sqrt(h*h+m*m);m*=e;h*=-e;var f=b[0]+m,F=b[1]+h,g=d[0]+m,k=d[1]+h;b=(f+g)/2;d=(F+k)/2;e=g-f;var p=k-F,q=e*e+p*p;c=a-c;k=f*k-g*F;var l=(0>p?-1:1)*Math.sqrt(Math.max(0,c*c*q-k*k));f=(k*p-e*l)/q;F=(-k*e-p*l)/q;g=(k*p+e*l)/q;e=(-k*e+p*l)/q;p=f-b;q=F-d;b=g-b;d=e-d;p*p+q*q>b*b+d*d&&(f=g,F=e);return[[f-m,F-h],[f*a/c,F*a/c]]}function Mf(b){function d(d){function h(){m.push("M",f(b(F),k))}for(var m=[],F=[],g=-1,P=d.length,
p,q=xa(a),Q=xa(c);++g<P;)e.call(this,p=d[g],g)?F.push([+q.call(this,p,g),+Q.call(this,p,g)]):F.length&&(h(),F=[]);F.length&&h();return m.length?m.join(""):null}var a=Ab,c=Qb,e=Nb,f=Ua,g=f.key,k=.7;d.x=function(b){if(!arguments.length)return a;a=b;return d};d.y=function(b){if(!arguments.length)return c;c=b;return d};d.defined=function(b){if(!arguments.length)return e;e=b;return d};d.interpolate=function(b){if(!arguments.length)return g;g="function"===typeof b?f=b:(f=Kd.get(b)||Ua).key;return d};d.tension=
function(b){if(!arguments.length)return k;k=b;return d};return d}function Ua(b){return 1<b.length?b.join("L"):b+"Z"}function Nf(b){return b.join("L")+"Z"}function Ld(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("V",(c=b[d])[1],"H",c[0]);return e.join("")}function Md(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c=b[d])[0],"V",c[1]);return e.join("")}function Ic(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Ua(b);var a=b.length!=d.length,
c="",e=b[0],f=b[1],g=d[0],k=g,p=1;a&&(c+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=b[1],p=2);if(1<d.length)for(k=d[1],f=b[p],p++,c+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1],e=2;e<d.length;e++,p++)f=b[p],k=d[e],c+="S"+(f[0]-k[0])+","+(f[1]-k[1])+","+f[0]+","+f[1];a&&(b=b[p],c+="Q"+(f[0]+2*k[0]/3)+","+(f[1]+2*k[1]/3)+","+b[0]+","+b[1]);return c}function Nd(b,d){var a=[];d=(1-d)/2;for(var c,e=b[0],f=b[1],g=1,k=b.length;++g<k;)c=e,e=f,f=b[g],
a.push([d*(f[0]-c[0]),d*(f[1]-c[1])]);return a}function Of(b){if(3>b.length)return Ua(b);var d=1,a=b.length,c=b[0],e=c[0],f=c[1],g=[e,e,e,(c=b[1])[0]],k=[f,f,f,c[1]];e=[e,",",f,"L",Ra(jb,g),",",Ra(jb,k)];for(b.push(b[a-1]);++d<=a;)c=b[d],g.shift(),g.push(c[0]),k.shift(),k.push(c[1]),Od(e,g,k);b.pop();e.push("L",c);return e.join("")}function Ra(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Od(b,d,a){b.push("C",Ra(Pf,d),",",Ra(Pf,a),",",Ra(Qf,d),",",Ra(Qf,a),",",Ra(jb,d),",",Ra(jb,a))}
function Pd(b,d){return(d[1]-b[1])/(d[0]-b[0])}function Rf(b){for(var d,a=-1,c=b.length,e,f;++a<c;)d=b[a],e=d[0],f=d[1]-Da,d[0]=e*Math.cos(f),d[1]=e*Math.sin(f);return b}function Sf(b){function d(d){function h(){m.push("M",k(b(P),n),l,q(b(F.reverse()),n),"Z")}for(var m=[],F=[],P=[],p=-1,Q=d.length,u,r=xa(a),x=xa(e),aa=a===c?function(){return C}:xa(c),w=e===f?function(){return Z}:xa(f),C,Z;++p<Q;)g.call(this,u=d[p],p)?(F.push([C=+r.call(this,u,p),Z=+x.call(this,u,p)]),P.push([+aa.call(this,u,p),+w.call(this,
u,p)])):F.length&&(h(),F=[],P=[]);F.length&&h();return m.length?m.join(""):null}var a=Ab,c=Ab,e=0,f=Qb,g=Nb,k=Ua,p=k.key,q=k,l="L",n=.7;d.x=function(b){if(!arguments.length)return c;a=c=b;return d};d.x0=function(b){if(!arguments.length)return a;a=b;return d};d.x1=function(b){if(!arguments.length)return c;c=b;return d};d.y=function(b){if(!arguments.length)return f;e=f=b;return d};d.y0=function(b){if(!arguments.length)return e;e=b;return d};d.y1=function(b){if(!arguments.length)return f;f=b;return d};
d.defined=function(b){if(!arguments.length)return g;g=b;return d};d.interpolate=function(b){if(!arguments.length)return p;p="function"===typeof b?k=b:(k=Kd.get(b)||Ua).key;q=k.reverse||k;l=k.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return n;n=b;return d};return d}function Xh(b){return b.radius}function Tf(b){return[b.x,b.y]}function Yh(b){return function(){var d=b.apply(this,arguments),a=d[0];d=d[1]-Da;return[a*Math.cos(d),a*Math.sin(d)]}}function Zh(){return 64}function $h(){return"circle"}
function Uf(b){b=Math.sqrt(b/ia);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Vf(b){return function(){var d,a,c;(d=this[b])&&(c=d[a=d.active])&&(c.timer.c=null,c.timer.t=NaN,--d.count?delete d[a]:delete this[b],d.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Yb(b,d,a){$b(b,Ia);b.namespace=d;b.id=a;return b}function Qd(b,d,a,c){var h=b.id,e=b.namespace;return X(b,"function"===typeof a?function(b,m,f){b[e][h].tween.set(d,c(a.call(b,
b.__data__,m,f)))}:(a=c(a),function(b){b[e][h].tween.set(d,a)}))}function ai(b){null==b&&(b="");return function(){this.textContent=b}}function Rd(b){return null==b?"__transition__":"__transition_"+b+"__"}function Jc(b,d,a,c,e){function h(b){var d=F.delay;n.t=d+l;if(d<=b)return m(b-d);n.c=m}function m(a){var h=g.active,e=g[h];e&&(e.timer.c=null,e.timer.t=NaN,--g.count,delete g[h],e.event&&e.event.interrupt.call(b,b.__data__,e.index));for(var m in g)+m<c&&(h=g[m],h.timer.c=null,h.timer.t=NaN,--g.count,
delete g[m]);n.c=f;fc(function(){n.c&&f(a||1)&&(n.c=null,n.t=NaN);return 1},0,l);g.active=c;F.event&&F.event.start.call(b,b.__data__,d);q=[];F.tween.forEach(function(a,h){(h=h.call(b,b.__data__,d))&&q.push(h)});p=F.ease;k=F.duration}function f(h){h/=k;for(var e=p(h),m=q.length;0<m;)q[--m].call(b,e);if(1<=h)return F.event&&F.event.end.call(b,b.__data__,d),--g.count?delete g[c]:delete b[a],1}var g=b[a]||(b[a]={active:0,count:0}),F=g[c],k,p,q;if(!F){var l=e.time;var n=fc(h,0,l);F=g[c]={tween:new r,time:l,
timer:n,delay:e.delay,duration:e.duration,ease:e.ease,index:d};e=null;++g.count}}function bi(b,d,a){b.attr("transform",function(b){var h=d(b);return"translate("+(isFinite(h)?h:a(b))+",0)"})}function ci(b,d,a){b.attr("transform",function(b){var h=d(b);return"translate(0,"+(isFinite(h)?h:a(b))+")"})}function Sd(b){return b.toISOString()}function Td(b,d,a){function h(d){return b(d)}function c(b,a){var h=(b[1]-b[0])/a,c=y.bisect(Kc,h);return c==Kc.length?[d.year,ib(b.map(function(b){return b/31536E6}),
a)[2]]:c?d[h/Kc[c-1]<Kc[c]/h?c-1:c]:[di,ib(b,a)[2]]}h.invert=function(d){return ub(b.invert(d))};h.domain=function(d){if(!arguments.length)return b.domain().map(ub);b.domain(d);return h};h.nice=function(b,d){function a(a){return!isNaN(a)&&!b.range(a,ub(+a+1),d).length}var e=h.domain(),m=Gb(e);if(m=null==b?c(m,10):"number"===typeof b&&c(m,b))b=m[0],d=m[1];return h.domain(Dc(e,1<d?{floor:function(d){for(;a(d=b.floor(d));)d=ub(d-1);return d},ceil:function(d){for(;a(d=b.ceil(d));)d=ub(+d+1);return d}}:
b))};h.ticks=function(b,d){var a=Gb(h.domain()),e=null==b?c(a,10):"number"===typeof b?c(a,b):!b.range&&[{range:b},d];e&&(b=e[0],d=e[1]);return b.range(a[0],ub(+a[1]+1),1>d?1:d)};h.tickFormat=function(){return a};h.copy=function(){return Td(b.copy(),d,a)};return Jd(h,b)}function ub(b){return new Date(b)}function ei(b){return JSON.parse(b.responseText)}function fi(b){var d=Ma.createRange();d.selectNode(Ma.body);return d.createContextualFragment(b.responseText)}var y={version:"3.5.17"},Wf=[].slice,Va=
function(b){return Wf.call(b)},Ma=this.document;if(Ma)try{Va(Ma.documentElement.childNodes)[0].nodeType}catch(b){Va=function(b){for(var d=b.length,a=Array(d);d--;)a[d]=b[d];return a}}Date.now||(Date.now=function(){return+new Date});if(Ma)try{Ma.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Lc=this.Element.prototype,gi=Lc.setAttribute,hi=Lc.setAttributeNS,Xf=this.CSSStyleDeclaration.prototype,ii=Xf.setProperty;Lc.setAttribute=function(b,a){gi.call(this,b,a+"")};Lc.setAttributeNS=
function(b,a,c){hi.call(this,b,a,c+"")};Xf.setProperty=function(b,a,c){ii.call(this,b,a+"",c)}}y.ascending=a;y.descending=function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};y.min=function(b,d){var a=-1,c=b.length,e;if(1===arguments.length){for(;++a<c;)if(null!=(e=b[a])&&e>=e){var f=e;break}for(;++a<c;)null!=(e=b[a])&&f>e&&(f=e)}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&f>e&&(f=e)}return f};y.max=function(b,d){var a=-1,c=b.length,e;if(1===arguments.length){for(;++a<
c;)if(null!=(e=b[a])&&e>=e){var f=e;break}for(;++a<c;)null!=(e=b[a])&&e>f&&(f=e)}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&e>f&&(f=e)}return f};y.extent=function(b,d){var a=-1,c=b.length,e,f;if(1===arguments.length){for(;++a<c;)if(null!=(e=b[a])&&e>=e){var g=f=e;break}for(;++a<c;)null!=(e=b[a])&&(g>e&&(g=e),f<e&&(f=e))}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){g=f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&(g>e&&(g=e),
f<e&&(f=e))}return[g,f]};y.sum=function(b,d){var a=0,c=b.length,e,f=-1;if(1===arguments.length)for(;++f<c;)isNaN(e=+b[f])||(a+=e);else for(;++f<c;)isNaN(e=+d.call(b,b[f],f))||(a+=e);return a};y.mean=function(b,d){var a=0,c=b.length,f,g=-1,k=c;if(1===arguments.length)for(;++g<c;)isNaN(f=e(b[g]))?--k:a+=f;else for(;++g<c;)isNaN(f=e(d.call(b,b[g],g)))?--k:a+=f;if(k)return a/k};y.quantile=function(b,d){var a=(b.length-1)*d+1;d=Math.floor(a);var c=+b[d-1];return(a-=d)?c+a*(b[d]-c):c};y.median=function(b,
d){var h=[],c=b.length,f,g=-1;if(1===arguments.length)for(;++g<c;)isNaN(f=e(b[g]))||h.push(f);else for(;++g<c;)isNaN(f=e(d.call(b,b[g],g)))||h.push(f);if(h.length)return y.quantile(h.sort(a),.5)};y.variance=function(b,d){var a=b.length,c=0,f,g=0,k=-1,p=0;if(1===arguments.length)for(;++k<a;){if(!isNaN(f=e(b[k]))){var q=f-c;c+=q/++p;g+=q*(f-c)}}else for(;++k<a;)isNaN(f=e(d.call(b,b[k],k)))||(q=f-c,c+=q/++p,g+=q*(f-c));if(1<p)return g/(p-1)};y.deviation=function(){var b=y.variance.apply(this,arguments);
return b?Math.sqrt(b):b};var Yf=k(a);y.bisectLeft=Yf.left;y.bisect=y.bisectRight=Yf.right;y.bisector=function(b){return k(1===b.length?function(d,h){return a(b(d),h)}:b)};y.shuffle=function(b,d,a){3>(h=arguments.length)&&(a=b.length,2>h&&(d=0));for(var h=a-d,c,e;h;)e=Math.random()*h--|0,c=b[h+d],b[h+d]=b[e+d],b[e+d]=c;return b};y.permute=function(b,d){for(var a=d.length,c=Array(a);a--;)c[a]=b[d[a]];return c};y.pairs=function(b){for(var d=0,a=b.length-1,c=b[0],e=Array(0>a?0:a);d<a;)e[d]=[c,c=b[++d]];
return e};y.transpose=function(b){if(!(f=b.length))return[];for(var d=-1,a=y.min(b,g),c=Array(a);++d<a;)for(var e=-1,f,k=c[d]=Array(f);++e<f;)k[e]=b[e][d];return c};y.zip=function(){return y.transpose(arguments)};y.keys=function(b){var d=[],a;for(a in b)d.push(a);return d};y.values=function(b){var d=[],a;for(a in b)d.push(b[a]);return d};y.entries=function(b){var d=[],a;for(a in b)d.push({key:a,value:b[a]});return d};y.merge=function(b){var d=b.length;var a=-1;for(var c=0,e,f;++a<d;)c+=b[a].length;
for(e=Array(c);0<=--d;)for(f=b[d],a=f.length;0<=--a;)e[--c]=f[a];return e};var ka=Math.abs;y.range=function(b,d,a){3>arguments.length&&(a=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/a)throw Error("infinite range");var h=[];var c=ka(a);for(var e=1;c*e%1;)e*=10;c=e;e=-1;var f;b*=c;d*=c;a*=c;if(0>a)for(;(f=b+a*++e)>d;)h.push(f/c);else for(;(f=b+a*++e)<d;)h.push(f/c);return h};y.map=function(b,d){var a=new r;if(b instanceof r)b.forEach(function(b,d){a.set(b,d)});else if(Array.isArray(b)){var c=
-1,e=b.length,f;if(1===arguments.length)for(;++c<e;)a.set(c,b[c]);else for(;++c<e;)a.set(d.call(b,f=b[c],c),f)}else for(c in b)a.set(c,b[c]);return a};n(r,{has:v,get:function(b){return this._[l(b)]},set:function(b,d){return this._[l(b)]=d},remove:z,keys:D,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:t(d),value:this._[d]});return b},size:E,empty:G,forEach:function(b){for(var d in this._)b.call(this,t(d),this._[d])}});
y.nest=function(){function b(d,h,e){if(e>=c.length)return g?g.call(a,h):f?h.sort(f):h;for(var m=-1,k=h.length,p=c[e++],F,q,l=new r,n;++m<k;)(n=l.get(F=p(q=h[m])))?n.push(q):l.set(F,[q]);d?(q=d(),h=function(a,c){q.set(a,b(d,c,e))}):(q={},h=function(a,c){q[a]=b(d,c,e)});l.forEach(h);return q}function d(b,a){if(a>=c.length)return b;var h=[],f=e[a++];b.forEach(function(b,c){h.push({key:b,values:d(c,a)})});return f?h.sort(function(b,d){return f(b.key,d.key)}):h}var a={},c=[],e=[],f,g;a.map=function(d,
a){return b(a,d,0)};a.entries=function(a){return d(b(y.map,a,0),0)};a.key=function(b){c.push(b);return a};a.sortKeys=function(b){e[c.length-1]=b;return a};a.sortValues=function(b){f=b;return a};a.rollup=function(b){g=b;return a};return a};y.set=function(b){var d=new H;if(b)for(var a=0,c=b.length;a<c;++a)d.add(b[a]);return d};n(H,{has:v,add:function(b){this._[l(b+="")]=!0;return b},remove:z,values:D,size:E,empty:G,forEach:function(b){for(var d in this._)b.call(this,t(d))}});y.behavior={};y.rebind=
function(b,d){for(var a=1,c=arguments.length,e;++a<c;)b[e=arguments[a]]=M(b,d,d[e]);return b};var de="webkit ms moz Moz o O".split(" ");y.dispatch=function(){for(var b=new C,d=-1,a=arguments.length;++d<a;)b[arguments[d]]=u(b);return b};C.prototype.on=function(b,d){var a=b.indexOf("."),c="";0<=a&&(c=b.slice(a+1),b=b.slice(0,a));if(b)return 2>arguments.length?this[b].on(c):this[b].on(c,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(c,null);return this}};y.event=
null;y.requote=function(b){return b.replace(ji,"\\$&")};var ji=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$b={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var a in d)b[a]=d[a]},ad=function(b,d){return d.querySelector(b)},bd=function(b,d){return d.querySelectorAll(b)},ac=function(b,d){var a=b.matches||b[B(b,"matchesSelector")];ac=function(b,d){return a.call(b,d)};return ac(b,d)};"function"===typeof Sizzle&&(ad=function(b,d){return Sizzle(b,d)[0]||null},bd=Sizzle,ac=Sizzle.matchesSelector);y.selection=
function(){return y.select(Ma.documentElement)};var ta=y.selection.prototype=[];ta.select=function(b){var d=[],a,c,e,f;b=w(b);for(var g=-1,k=this.length;++g<k;){d.push(a=[]);a.parentNode=(e=this[g]).parentNode;for(var p=-1,q=e.length;++p<q;)(f=e[p])?(a.push(c=b.call(f,f.__data__,p,g)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return I(d)};ta.selectAll=function(b){var d=[],a,c;b=K(b);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],k=-1,p=g.length;++k<p;)if(c=g[k])d.push(a=Va(b.call(c,
c.__data__,k,e))),a.parentNode=c;return I(d)};var Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:Ud,qualify:function(b){var d=b.indexOf(":"),a=b;0<=d&&"xmlns"!==(a=b.slice(0,d))&&(b=b.slice(d+1));return Ud.hasOwnProperty(a)?{space:Ud[a],local:b}:b}};ta.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node();b=y.ns.qualify(b);
return b.local?a.getAttributeNS(b.space,b.local):a.getAttribute(b)}for(d in b)this.each(S(d,b[d]));return this}return this.each(S(b,d))};ta.classed=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node(),c=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(d=a.classList)for(;++e<c;){if(!d.contains(b[e]))return!1}else for(d=a.getAttribute("class");++e<c;)if(!J(b[e]).test(d))return!1;return!0}for(d in b)this.each(p(d,b[d]));return this}return this.each(p(b,d))};ta.style=function(b,
d,a){var h=arguments.length;if(3>h){if("string"!==typeof b){2>h&&(d="");for(a in b)this.each(V(a,b[a],d));return this}if(2>h)return h=this.node(),c(h).getComputedStyle(h,null).getPropertyValue(b);a=""}return this.each(V(b,d,a))};ta.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(ba(d,b[d]));return this}return this.each(ba(b,d))};ta.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,
arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};ta.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};ta.append=function(b){b=W(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};ta.insert=function(b,
d){b=W(b);d=w(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};ta.remove=function(){return this.each(U)};ta.data=function(b,d){function a(b,a){var c,h=b.length,e=a.length,f=Math.min(h,e),m=Array(e),g=Array(e),F=Array(h),l,n;if(d){f=new r;var u=Array(h),P;for(c=-1;++c<h;)if(l=b[c])f.has(P=d.call(l,l.__data__,c))?F[c]=l:f.set(P,l),u[c]=P;for(c=-1;++c<e;)(l=f.get(P=d.call(a,n=a[c],c)))?!0!==l&&(m[c]=l,l.__data__=n):g[c]={__data__:n},
f.set(P,!0);for(c=-1;++c<h;)c in u&&!0!==f.get(u[c])&&(F[c]=b[c])}else{for(c=-1;++c<f;)l=b[c],n=a[c],l?(l.__data__=n,m[c]=l):g[c]={__data__:n};for(;c<e;++c)g[c]={__data__:a[c]};for(;c<h;++c)F[c]=b[c]}g.update=m;g.parentNode=m.parentNode=F.parentNode=b.parentNode;k.push(g);p.push(m);q.push(F)}var c=-1,e=this.length,f,g;if(!arguments.length){for(b=Array(e=(f=this[0]).length);++c<e;)if(g=f[c])b[c]=g.__data__;return b}var k=ra([]),p=I([]),q=I([]);if("function"===typeof b)for(;++c<e;)a(f=this[c],b.call(f,
f.parentNode.__data__,c));else for(;++c<e;)a(f=this[c],b);p.enter=function(){return k};p.exit=function(){return q};return p};ta.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};ta.filter=function(b){var d=[],a,c,e;"function"!==typeof b&&(b=x(b));for(var f=0,g=this.length;f<g;f++){d.push(a=[]);a.parentNode=(c=this[f]).parentNode;for(var k=0,p=c.length;k<p;k++)(e=c[k])&&b.call(e,e.__data__,k,f)&&a.push(e)}return I(d)};ta.order=function(){for(var b=-1,
d=this.length;++b<d;)for(var a=this[b],c=a.length-1,e=a[c],f;0<=--c;)if(f=a[c])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};ta.sort=function(b){b=T.apply(this,arguments);for(var d=-1,a=this.length;++d<a;)this[d].sort(b);return this.order()};ta.each=function(b){return X(this,function(d,a,c){b.call(d,d.__data__,a,c)})};ta.call=function(b){var d=Va(arguments);b.apply(d[0]=this,d);return this};ta.empty=function(){return!this.node()};ta.node=function(){for(var b=0,d=this.length;b<
d;b++)for(var a=this[b],c=0,e=a.length;c<e;c++){var f=a[c];if(f)return f}return null};ta.size=function(){var b=0;X(this,function(){++b});return b};var Ya=[];y.selection.enter=ra;y.selection.enter.prototype=Ya;Ya.append=ta.append;Ya.empty=ta.empty;Ya.node=ta.node;Ya.call=ta.call;Ya.size=ta.size;Ya.select=function(b){for(var d=[],a,c,e,f,g,k=-1,p=this.length;++k<p;){e=(f=this[k]).update;d.push(a=[]);a.parentNode=f.parentNode;for(var q=-1,l=f.length;++q<l;)(g=f[q])?(a.push(e[q]=c=b.call(f.parentNode,
g.__data__,q,k)),c.__data__=g.__data__):a.push(null)}return I(d)};Ya.insert=function(b,d){2>arguments.length&&(d=pa(this));return ta.insert.call(this,b,d)};y.select=function(b){if("string"===typeof b){var d=[ad(b,Ma)];d.parentNode=Ma.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return I([d])};y.selectAll=function(b){"string"===typeof b?(b=Va(bd(b,Ma)),b.parentNode=Ma.documentElement):(b=Va(b),b.parentNode=null);return I([b])};ta.on=function(b,d,a){var c=
arguments.length;if(3>c){if("string"!==typeof b){2>c&&(d=!1);for(a in b)this.each(Y(a,b[a],d));return this}if(2>c)return(c=this.node()["__on"+b])&&c._;a=!1}return this.each(Y(b,d,a))};var cd=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ma&&cd.forEach(function(b){"on"+b in Ma&&cd.remove(b)});var kb,qg=0;y.mouse=function(b){return Aa(b,O())};var dd=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;y.touch=function(b,d,a){3>arguments.length&&(a=d,d=O().changedTouches);if(d)for(var c=
0,h=d.length,e;c<h;++c)if((e=d[c]).identifier===a)return Aa(b,e)};y.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function d(b,d,c,h,f){return function(){var m=y.event.target.correspondingElement||y.event.target,g=this.parentNode,k=a.of(this,arguments),p=0,q=b(),F=".drag"+(null==q?"":"-"+q),l=y.select(c(m)).on(h+F,function(){var b=d(g,q);if(b){var a=b[0]-u[0];var c=b[1]-u[1];p|=a|c;u=b;k({type:"drag",x:b[0]+P[0],y:b[1]+P[1],dx:a,dy:c})}}).on(f+F,function(){d(g,
q)&&(l.on(h+F,null).on(f+F,null),n(p),k({type:"dragend"}))}),n=za(m),u=d(g,q);if(e){var P=e.apply(this,arguments);P=[P.x-u[0],P.y-u[1]]}else P=[0,0];k({type:"dragstart"})}}var a=N(b,"drag","dragstart","dragend"),e=null,f=d(L,y.mouse,c,"mousemove","mouseup"),g=d(ma,y.touch,A,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return e;e=d;return b};return y.rebind(b,a,"on")};y.touches=function(b,d){2>arguments.length&&(d=O().touches);return d?Va(d).map(function(d){var a=Aa(b,d);a.identifier=
d.identifier;return a}):[]};var ia=Math.PI,Qa=2*ia,ki=Qa-1E-6,Da=ia/2,ja=ia/180,Ca=180/ia,Zb=Math.SQRT2;y.interpolateZoom=function(b,d){var a=b[0],c=b[1],e=b[2];b=d[2];var f=d[0]-a,g=d[1]-c,k=f*f+g*g;if(1E-12>k){var p=Math.log(b/e)/Zb;b=function(b){return[a+b*f,c+b*g,e*Math.exp(Zb*b*p)]}}else{var q=Math.sqrt(k);d=(b*b-e*e+4*k)/(4*e*q);b=(b*b-e*e-4*k)/(4*b*q);var l=Math.log(Math.sqrt(d*d+1)-d);p=(Math.log(Math.sqrt(b*b+1)-b)-l)/Zb;b=function(b){b*=p;var d=ya(l),h=Zb*b+l;var m=((h=Math.exp(2*h))-1)/
(h+1);var k=l;h=((k=Math.exp(k))-1/k)/2;m=e/(2*q)*(d*m-h);return[a+m*f,c+m*g,e*d/ya(Zb*b+l)]}}b.duration=1E3*p;return b};y.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",l).on(Vd+".zoom",u).on("dblclick.zoom",r).on("touchstart.zoom",n)}function d(b){return[(b[0]-x.x)/x.k,(b[1]-x.y)/x.k]}function a(b){x.k=Math.max(J[0],Math.min(J[1],b))}function e(b,d){d=[d[0]*x.k+x.x,d[1]*x.k+x.y];x.x+=b[0]-d[0];x.y+=b[1]-d[1]}function f(d,c,h,f){d.__chart__={x:x.x,y:x.y,k:x.k};a(Math.pow(2,f));e(C=
c,h);d=y.select(d);0<v&&(d=d.transition().duration(v));d.call(b.event)}function g(){S&&S.domain(A.range().map(function(b){return(b-x.x)/x.k}).map(A.invert));V&&V.domain(O.range().map(function(b){return(b-x.y)/x.k}).map(O.invert))}function k(b){I++||b({type:"zoomstart"})}function p(b){g();b({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function q(b){--I||(b({type:"zoomend"}),C=null)}function l(){var b=this,a=Y.of(b,arguments),h=0,f=y.select(c(b)).on("mousemove.zoom",function(){h=1;e(y.mouse(b),m);p(a)}).on("mouseup.zoom",
function(){f.on("mousemove.zoom",null).on("mouseup.zoom",null);g(h);q(a)}),m=d(y.mouse(b)),g=za(b);Mc.call(b);k(a)}function n(){function b(){var b=y.touches(g);r=x.k;b.forEach(function(b){b.identifier in u&&(u[b.identifier]=d(b))});return b}function c(){var d=y.event.target;y.select(d).on(C,h).on(Q,m);t.push(d);d=y.event.changedTouches;for(var a=0,c=d.length;a<c;++a)u[d[a].identifier]=null;a=b();c=Date.now();1===a.length?(500>c-K&&(d=a[0],f(g,d,u[d.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),
R()),K=c):1<a.length&&(d=a[0],c=a[1],a=d[0]-c[0],d=d[1]-c[1],P=a*a+d*d)}function h(){var b=y.touches(g),d;Mc.call(g);for(var c=0,h=b.length;c<h;++c,d=null){var f=b[c];if(d=u[f.identifier]){if(k)break;var m=f;var k=d}}if(d){var q=(q=f[0]-m[0])*q+(q=f[1]-m[1])*q;b=P&&Math.sqrt(q/P);m=[(m[0]+f[0])/2,(m[1]+f[1])/2];k=[(k[0]+d[0])/2,(k[1]+d[1])/2];a(b*r)}K=null;e(m,k);p(F)}function m(){if(y.event.touches.length){for(var d=y.event.changedTouches,a=0,c=d.length;a<c;++a)delete u[d[a].identifier];for(var h in u)return void b()}y.selectAll(t).on(w,
null);aa.on("mousedown.zoom",l).on("touchstart.zoom",n);B();q(F)}var g=this,F=Y.of(g,arguments),u={},P=0,r,w=".zoom-"+y.event.changedTouches[0].identifier,C="touchmove"+w,Q="touchend"+w,t=[],aa=y.select(g),B=za(g);c();k(F);aa.on("mousedown.zoom",null).on("touchstart.zoom",c)}function u(){var b=Y.of(this,arguments);U?clearTimeout(U):(Mc.call(this),w=d(C=t||y.mouse(this)),k(b));U=setTimeout(function(){U=null;q(b)},50);R();a(Math.pow(2,.002*Nc())*x.k);e(C,w);p(b)}function r(){var b=y.mouse(this),a=Math.log(x.k)/
Math.LN2;f(this,b,d(b),y.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var x={x:0,y:0,k:1},w,C,t,B=[960,500],J=Zf,v=250,I=0,U,K,Y=N(b,"zoomstart","zoom","zoomend"),A,S,O,V;Vd||(Vd="onwheel"in Ma?(Nc=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(Nc=function(){return y.event.wheelDelta},"mousewheel"):(Nc=function(){return-y.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=Y.of(this,arguments),d=x;vb?y.select(this).transition().each("start.zoom",
function(){x=this.__chart__||{x:0,y:0,k:1};k(b)}).tween("zoom:zoom",function(){var a=B[0],c=B[1],h=C?C[0]:a/2,e=C?C[1]:c/2,f=y.interpolateZoom([(h-x.x)/x.k,(e-x.y)/x.k,a/x.k],[(h-d.x)/d.k,(e-d.y)/d.k,a/d.k]);return function(d){d=f(d);var c=a/d[2];this.__chart__=x={x:h-d[0]*c,y:e-d[1]*c,k:c};p(b)}}).each("interrupt.zoom",function(){q(b)}).each("end.zoom",function(){q(b)}):(this.__chart__=x,k(b),p(b),q(b))})};b.translate=function(d){if(!arguments.length)return[x.x,x.y];x={x:+d[0],y:+d[1],k:x.k};g();
return b};b.scale=function(d){if(!arguments.length)return x.k;x={x:x.x,y:x.y,k:null};a(+d);g();return b};b.scaleExtent=function(d){if(!arguments.length)return J;J=null==d?Zf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return t;t=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return B;B=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return v;v=+d;return b};b.x=function(d){if(!arguments.length)return S;S=d;A=d.copy();x={x:0,y:0,k:1};
return b};b.y=function(d){if(!arguments.length)return V;V=d;O=d.copy();x={x:0,y:0,k:1};return b};return y.rebind(b,Y,"on")};var Zf=[0,Infinity],Nc,Vd;y.color=ua;ua.prototype.toString=function(){return this.rgb()+""};y.hsl=Ja;var Wd=Ja.prototype=new ua;Wd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ja(this.h,this.s,this.l/b)};Wd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ja(this.h,this.s,b*this.l)};Wd.rgb=function(){return va(this.h,this.s,this.l)};y.hcl=
na;var Xd=na.prototype=new ua;Xd.brighter=function(b){return new na(this.h,this.c,Math.min(100,this.l+Oc*(arguments.length?b:1)))};Xd.darker=function(b){return new na(this.h,this.c,Math.max(0,this.l-Oc*(arguments.length?b:1)))};Xd.rgb=function(){return Ha(this.h,this.c,this.l).rgb()};y.lab=oa;var Oc=18,ee=.95047,fe=1,ge=1.08883,Yd=oa.prototype=new ua;Yd.brighter=function(b){return new oa(Math.min(100,this.l+Oc*(arguments.length?b:1)),this.a,this.b)};Yd.darker=function(b){return new oa(Math.max(0,
this.l-Oc*(arguments.length?b:1)),this.a,this.b)};Yd.rgb=function(){return Ba(this.l,this.a,this.b)};y.rgb=Ka;var Pc=Ka.prototype=new ua;Pc.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var d=this.r,a=this.g,c=this.b;if(!d&&!a&&!c)return new Ka(30,30,30);d&&30>d&&(d=30);a&&30>a&&(a=30);c&&30>c&&(c=30);return new Ka(Math.min(255,d/b),Math.min(255,a/b),Math.min(255,c/b))};Pc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ka(b*this.r,b*this.g,b*this.b)};Pc.hsl=function(){return cc(this.r,
this.g,this.b)};Pc.toString=function(){return"#"+cb(this.r)+cb(this.g)+cb(this.b)};var ec=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ec.forEach(function(b,d){ec.set(b,new Ka(d>>16,d>>8&255,d&255))});y.functor=xa;y.xhr=fd(A);y.dsv=function(b,d){function a(b,a,h){3>arguments.length&&(h=a,a=null);var f=Kb(b,d,null==a?c:e(a),h);f.row=function(b){return arguments.length?f.response(null==(a=
b)?c:e(b)):a};return f}function c(b){return a.parse(b.responseText)}function e(b){return function(d){return a.parse(d.responseText,b)}}function f(d){return d.map(g).join(b)}function g(b){return k.test(b)?'"'+b.replace(/"/g,'""')+'"':b}var k=new RegExp('["'+b+"\n]"),p=b.charCodeAt(0);a.parse=function(b,d){var c;return a.parseRows(b,function(b,a){if(c)return c(b,a-1);var h=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");c=d?function(b,a){return d(h(b),
a)}:h})};a.parseRows=function(b,d){function a(){if(m>=f)return h;if(q)return q=!1,c;var d=m;if(34===b.charCodeAt(d)){for(var a=d;a++<f;)if(34===b.charCodeAt(a)){if(34!==b.charCodeAt(a+1))break;++a}m=a+2;var e=b.charCodeAt(a+1);13===e?(q=!0,10===b.charCodeAt(a+2)&&++m):10===e&&(q=!0);return b.slice(d+1,a).replace(/""/g,'"')}for(;m<f;){e=b.charCodeAt(m++);a=1;if(10===e)q=!0;else if(13===e)q=!0,10===b.charCodeAt(m)&&(++m,++a);else if(e!==p)continue;return b.slice(d,m-a)}return b.slice(d)}for(var c={},
h={},e=[],f=b.length,m=0,g=0,k,q;(k=a())!==h;){for(var F=[];k!==c&&k!==h;)F.push(k),k=a();d&&null==(F=d(F,g++))||e.push(F)}return e};a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);var c=new H,h=[];d.forEach(function(b){for(var d in b)c.has(d)||h.push(c.add(d))});return[h.map(g).join(b)].concat(d.map(function(d){return h.map(function(b){return g(d[b])}).join(b)})).join("\n")};a.formatRows=function(b){return b.map(f).join("\n")};return a};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t",
"text/tab-separated-values");var hc,gc,ic,jc,he=this[B(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};y.timer=function(){fc.apply(this,arguments)};y.timer.flush=function(){ie();je()};y.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var li="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var a=Math.pow(10,3*ka(8-d));return{scale:8<d?function(b){return b/a}:function(b){return b*a},symbol:b}});y.formatPrefix=function(b,d){var a=0;if(b=
+b)0>b&&(b*=-1),d&&(b=y.round(b,gd(b,d))),a=1+Math.floor(1E-12+Math.log(b)/Math.LN10),a=Math.max(-24,Math.min(24,3*Math.floor((a-1)/3)));return li[8+a/3]};var ke=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,tg=y.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,
d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=y.round(b,gd(b,d))).toFixed(Math.max(0,Math.min(20,gd(b*(1+1E-15),d))))}}),ca=y.time={},La=Date;Za.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bb.setUTCDate.apply(this._,arguments)},setDay:function(){bb.setUTCDay.apply(this._,arguments)},setFullYear:function(){bb.setUTCFullYear.apply(this._,arguments)},setHours:function(){bb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bb.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){bb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bb.setUTCSeconds.apply(this._,arguments)},setTime:function(){bb.setTime.apply(this._,arguments)}};var bb=Date.prototype;ca.year=mb(function(b){b=ca.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});ca.years=ca.year.range;ca.years.utc=ca.year.utc.range;ca.day=mb(function(b){var d=
new La(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});ca.days=ca.day.range;ca.days.utc=ca.day.utc.range;ca.dayOfYear=function(b){var d=ca.year(b);return Math.floor((b-d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var a=ca[b]=mb(function(b){(b=ca.day(b)).setDate(b.getDate()-(b.getDay()+d)%
7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var a=ca.year(b).getDay();return Math.floor((ca.dayOfYear(b)+(a+d)%7)/7)-(a!==d)});ca[b+"s"]=a.range;ca[b+"s"].utc=a.utc.range;ca[b+"OfYear"]=function(b){var a=ca.year(b).getDay();return Math.floor((ca.dayOfYear(b)+(a+d)%7)/7)}});ca.week=ca.sunday;ca.weeks=ca.sunday.range;ca.weeks.utc=ca.sunday.utc.range;ca.weekOfYear=ca.sundayOfYear;var le={"-":"",_:" ",0:"0"},Ea=/^\s*\d+/,oe=/^%/;y.locale=function(b){return{numberFormat:sg(b),
timeFormat:vg(b)}};var $f=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});y.format=$f.numberFormat;
y.geo={};hd.prototype={s:0,t:0,add:function(b){pe(b,this.t,Qc);pe(Qc.s,this.s,this);this.s?this.t+=Qc.t:this.s=Qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Qc=new hd;y.geo.stream=function(b,d){if(b&&ag.hasOwnProperty(b.type))ag[b.type](b,d);else pc(b,d)};var ag={Feature:function(b,d){pc(b.geometry,d)},FeatureCollection:function(b,d){b=b.features;for(var a=-1,c=b.length;++a<c;)pc(b[a].geometry,d)}},qe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;
d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)b=a[c],d.point(b[0],b[1],b[2])},LineString:function(b,d){id(b.coordinates,d,0)},MultiLineString:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)id(b[a],d,0)},Polygon:function(b,d){re(b.coordinates,d)},MultiPolygon:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)re(b[a],d)},GeometryCollection:function(b,d){b=b.geometries;for(var a=-1,c=b.length;++a<c;)pc(b[a],d)}};y.geo.area=function(b){Rc=
0;y.geo.stream(b,Pa);return Rc};var Rc,nb=new hd,Pa={sphere:function(){Rc+=4*ia},point:L,lineStart:L,lineEnd:L,polygonStart:function(){nb.reset();Pa.lineStart=Kg},polygonEnd:function(){var b=2*nb;Rc+=0>b?4*ia+b:b;Pa.lineStart=Pa.lineEnd=Pa.point=L}};y.geo.bounds=function(){function b(b,d){J.push(N=[l=b,u=b]);d<n&&(n=d);d>x&&(x=d)}function d(d,a){var c=ob([d*ja,a*ja]);if(t){var h=xb(t,c);h=xb([h[1],-h[0],0],h);sc(h);h=tc(h);var e=d-r,f=0<e?1:-1,g=h[0]*Ca*f;e=180<ka(e);e^(f*r<g&&g<f*d)?(a=h[1]*Ca,a>
x&&(x=a)):(g=(g+360)%360-180,e^(f*r<g&&g<f*d))?(a=-h[1]*Ca,a<n&&(n=a)):(a<n&&(n=a),a>x&&(x=a));e?d<r?k(l,d)>k(l,u)&&(u=d):k(d,u)>k(l,u)&&(l=d):u>=l?(d<l&&(l=d),d>u&&(u=d)):d>r?k(l,d)>k(l,u)&&(u=d):k(d,u)>k(l,u)&&(l=d)}else b(d,a);t=c;r=d}function a(){v.point=d}function c(){N[0]=l;N[1]=u;v.point=b;t=null}function e(b,a){if(t){var c=b-r;B+=180<ka(c)?c+(0<c?360:-360):c}else w=b,C=a;Pa.point(b,a);d(b,a)}function f(){Pa.lineStart()}function g(){e(w,C);Pa.lineEnd();1E-6<ka(B)&&(l=-(u=180));N[0]=l;N[1]=
u;t=null}function k(b,d){return 0>(d-=b)?d+360:d}function p(b,d){return b[0]-d[0]}function q(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var l,n,u,x,r,w,C,t,B,J,N,v={point:b,lineStart:a,lineEnd:c,polygonStart:function(){v.point=e;v.lineStart=f;v.lineEnd=g;B=0;Pa.polygonStart()},polygonEnd:function(){Pa.polygonEnd();v.point=b;v.lineStart=a;v.lineEnd=c;0>nb?(l=-(u=180),n=-(x=90)):1E-6<B?x=90:-1E-6>B&&(n=-90);N[0]=l;N[1]=u}};return function(b){x=u=-(l=n=Infinity);J=[];y.geo.stream(b,v);if(b=
J.length){J.sort(p);for(var d=1,a=J[0],c,h=[a];d<b;++d)c=J[d],q(c[0],a)||q(c[1],a)?(k(a[0],c[1])>k(a[0],a[1])&&(a[1]=c[1]),k(c[0],a[1])>k(a[0],a[1])&&(a[0]=c[0])):h.push(a=c);var e=-Infinity,f;b=h.length-1;d=0;for(a=h[b];d<=b;a=c,++d)c=h[d],(f=k(a[1],c[0]))>e&&(e=f,l=c[0],u=a[1])}J=N=null;return Infinity===l||Infinity===n?[[NaN,NaN],[NaN,NaN]]:[[l,n],[u,x]]}}();y.geo.centroid=function(b){Mb=vc=pb=qb=$a=db=eb=Wa=yb=zb=fb=0;y.geo.stream(b,Sa);b=yb;var d=zb,a=fb,c=b*b+d*d+a*a;return 1E-12>c&&(b=db,d=
eb,a=Wa,1E-6>vc&&(b=pb,d=qb,a=$a),c=b*b+d*d+a*a,1E-12>c)?[NaN,NaN]:[Math.atan2(d,b)*Ca,sa(a/Math.sqrt(c))*Ca]};var Mb,vc,pb,qb,$a,db,eb,Wa,yb,zb,fb,Sa={sphere:L,point:kd,lineStart:se,lineEnd:te,polygonStart:function(){Sa.lineStart=Lg},polygonEnd:function(){Sa.lineStart=se}},Je=xe(Nb,function(b){var d=NaN,a=NaN,c=NaN,e;return{lineStart:function(){b.lineStart();e=1},point:function(h,f){var g=0<h?ia:-ia,m=ka(h-d);if(1E-6>ka(m-ia))b.point(d,a=0<(a+f)/2?Da:-Da),b.point(c,a),b.lineEnd(),b.lineStart(),b.point(g,
a),b.point(h,a),e=0;else if(c!==g&&m>=ia){1E-6>ka(d-c)&&(d-=1E-6*c);1E-6>ka(h-g)&&(h-=1E-6*g);m=d;var k=a,p=h,q,l,F=Math.sin(m-p);a=1E-6<ka(F)?Math.atan((Math.sin(k)*(l=Math.cos(f))*Math.sin(p)-Math.sin(f)*(q=Math.cos(k))*Math.sin(m))/(q*l*F)):(k+f)/2;b.point(c,a);b.lineEnd();b.lineStart();b.point(g,a);e=0}b.point(d=h,a=f);c=g},lineEnd:function(){b.lineEnd();d=a=NaN},clean:function(){return 2-e}}},function(b,d,a,c){null==b?(a*=Da,c.point(-ia,a),c.point(0,a),c.point(ia,a),c.point(ia,0),c.point(ia,
-a),c.point(0,-a),c.point(-ia,-a),c.point(-ia,0),c.point(-ia,a)):1E-6<ka(b[0]-d[0])?(b=b[0]<d[0]?ia:-ia,a=a*b/2,c.point(-b,a),c.point(0,a),c.point(b,a)):c.point(d[0],d[1])},[-ia,-ia/2]);y.geo.clipExtent=function(){var b,d,a,c,e,f,g={stream:function(b){e&&(e.valid=!1);e=f(b);e.valid=!0;return e},extent:function(h){if(!arguments.length)return[[b,d],[a,c]];f=Ae(b=+h[0][0],d=+h[0][1],a=+h[1][0],c=+h[1][1]);e&&(e.valid=!1,e=null);return g}};return g.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return md(Be)}).raw=
Be;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];e=null;(g(d,b),e)||(k(d,b),e)||p(d,b);return e}var d=y.geo.albers(),a=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(b,d){e=[b,d]}},g,k,p;b.invert=function(b){var e=d.scale(),h=d.translate(),
f=(b[0]-h[0])/e;e=(b[1]-h[1])/e;return(.12<=e&&.234>e&&-.425<=f&&-.214>f?a:.166<=e&&.234>e&&-.214<=f&&-.115>f?c:d).invert(b)};b.stream=function(b){var e=d.stream(b),h=a.stream(b),f=c.stream(b);return{point:function(b,d){e.point(b,d);h.point(b,d);f.point(b,d)},sphere:function(){e.sphere();h.sphere();f.sphere()},lineStart:function(){e.lineStart();h.lineStart();f.lineStart()},lineEnd:function(){e.lineEnd();h.lineEnd();f.lineEnd()},polygonStart:function(){e.polygonStart();h.polygonStart();f.polygonStart()},
polygonEnd:function(){e.polygonEnd();h.polygonEnd();f.polygonEnd()}}};b.precision=function(e){if(!arguments.length)return d.precision();d.precision(e);a.precision(e);c.precision(e);return b};b.scale=function(e){if(!arguments.length)return d.scale();d.scale(e);a.scale(.35*e);c.scale(e);return b.translate(d.translate())};b.translate=function(e){if(!arguments.length)return d.translate();var h=d.scale(),m=+e[0],q=+e[1];g=d.translate(e).clipExtent([[m-.455*h,q-.238*h],[m+.455*h,q+.238*h]]).stream(f).point;
k=a.translate([m-.307*h,q+.201*h]).clipExtent([[m-.425*h+1E-6,q+.12*h+1E-6],[m-.214*h-1E-6,q+.234*h-1E-6]]).stream(f).point;p=c.translate([m-.205*h,q+.212*h]).clipExtent([[m-.214*h+1E-6,q+.166*h+1E-6],[m-.115*h-1E-6,q+.234*h-1E-6]]).stream(f).point;return b};return b.scale(1070)};var Zd,od,gb={point:L,lineStart:L,lineEnd:L,polygonStart:function(){od=0;gb.lineStart=Pg},polygonEnd:function(){gb.lineStart=gb.lineEnd=gb.point=L;Zd+=ka(od/2)}},Sc,Tc,Uc,Vc,mi={point:function(b,d){b<Sc&&(Sc=b);b>Uc&&(Uc=
b);d<Tc&&(Tc=d);d>Vc&&(Vc=d)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L},Ta={point:rb,lineStart:De,lineEnd:Ee,polygonStart:function(){Ta.lineStart=Rg},polygonEnd:function(){Ta.point=rb;Ta.lineStart=De;Ta.lineEnd=Ee}};y.geo.path=function(){function b(b){b&&("function"===typeof a&&g.pointRadius(+a.apply(this,arguments)),k&&k.valid||(k=f(g)),y.geo.stream(b,k));return g.result()}function d(){k=null;return b}var a=4.5,c,e,f,g,k;b.area=function(b){Zd=0;y.geo.stream(b,f(gb));return Zd};b.centroid=
function(b){pb=qb=$a=db=eb=Wa=yb=zb=fb=0;y.geo.stream(b,f(Ta));return fb?[yb/fb,zb/fb]:Wa?[db/Wa,eb/Wa]:$a?[pb/$a,qb/$a]:[NaN,NaN]};b.bounds=function(b){Uc=Vc=-(Sc=Tc=Infinity);y.geo.stream(b,f(mi));return[[Sc,Tc],[Uc,Vc]]};b.projection=function(b){if(!arguments.length)return c;f=(c=b)?b.stream||Tg(b):A;return d()};b.context=function(b){if(!arguments.length)return e;g=null==(e=b)?new Qg:new Sg(b);"function"!==typeof a&&g.pointRadius(a);return d()};b.pointRadius=function(d){if(!arguments.length)return a;
a="function"===typeof d?d:(g.pointRadius(+d),+d);return b};return b.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(b){return{stream:function(d){d=new Ie(d);for(var a in b)d[a]=b[a];return d}}};Ie.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
y.geo.projection=hb;y.geo.projectionMutator=nd;(y.geo.equirectangular=function(){return hb(Ob)}).raw=Ob.invert=Ob;y.geo.rotation=function(b){function d(d){d=b(d[0]*ja,d[1]*ja);return d[0]*=Ca,d[1]*=Ca,d}b=pd(b[0]%360*ja,b[1]*ja,2<b.length?b[2]*ja:0);d.invert=function(d){d=b.invert(d[0]*ja,d[1]*ja);return d[0]*=Ca,d[1]*=Ca,d};return d};Ke.invert=Ob;y.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,a=pd(-b[0]*ja,-b[1]*ja,0).invert,c=[];e(null,null,1,{point:function(b,
d){c.push(b=a(b,d));b[0]*=Ca;b[1]*=Ca}});return{type:"Polygon",coordinates:[c]}}var d=[0,0],a,c=6,e;b.origin=function(a){if(!arguments.length)return d;d=a;return b};b.angle=function(d){if(!arguments.length)return a;e=ld((a=+d)*ja,c*ja);return b};b.precision=function(d){if(!arguments.length)return c;e=ld(a*ja,(c=+d)*ja);return b};return b.angle(90)};y.geo.distance=function(b,d){var a=(d[0]-b[0])*ja,c=b[1]*ja,e=d[1]*ja;d=Math.cos(a);b=Math.sin(c);c=Math.cos(c);var f=Math.sin(e);e=Math.cos(e);var g;
return Math.atan2(Math.sqrt((g=e*Math.sin(a))*g+(g=c*f-b*e*d)*g),b*f+c*e*d)};y.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return y.range(Math.ceil(f/u)*u,e,u).map(C).concat(y.range(Math.ceil(q/x)*x,p,x).map(t)).concat(y.range(Math.ceil(c/l)*l,a,l).filter(function(b){return 1E-6<ka(b%u)}).map(r)).concat(y.range(Math.ceil(k/n)*n,g,n).filter(function(b){return 1E-6<ka(b%x)}).map(w))}var a,c,e,f,g,k,p,q,l=10,n=l,u=90,x=360,r,w,C,t,B=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",
coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[C(f).concat(t(p).slice(1),C(e).reverse().slice(1),t(q).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[f,q],[e,p]];f=+d[0][0];e=+d[1][0];q=+d[0][1];p=+d[1][1];f>e&&(d=f,f=e,e=d);q>p&&(d=q,q=p,p=d);return b.precision(B)};b.minorExtent=function(d){if(!arguments.length)return[[c,k],[a,g]];c=+d[0][0];a=+d[1][0];
k=+d[0][1];g=+d[1][1];c>a&&(d=c,c=a,a=d);k>g&&(d=k,k=g,g=d);return b.precision(B)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[u,x];u=+d[0];x=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[l,n];l=+d[0];n=+d[1];return b};b.precision=function(d){if(!arguments.length)return B;B=+d;r=Pe(k,g,90);w=Qe(c,a,B);C=Pe(q,p,90);t=Qe(f,e,B);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};y.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[a||d.apply(this,arguments),e||c.apply(this,arguments)]}}var d=qd,a,c=rd,e;b.distance=function(){return y.geo.distance(a||d.apply(this,arguments),e||c.apply(this,arguments))};b.source=function(c){if(!arguments.length)return d;d=c;a="function"===typeof c?null:c;return b};b.target=function(d){if(!arguments.length)return c;c=d;e="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?
b:0};return b};y.geo.interpolate=function(b,d){return Ug(b[0]*ja,b[1]*ja,d[0]*ja,d[1]*ja)};y.geo.length=function(b){$d=0;y.geo.stream(b,Hb);return $d};var $d,Hb={sphere:L,point:L,lineStart:function(){function b(b,e){var h=Math.sin(e*=ja);e=Math.cos(e);var f=ka((b*=ja)-d),g=Math.cos(f);$d+=Math.atan2(Math.sqrt((f=e*Math.sin(f))*f+(f=c*h-a*e*g)*f),a*h+c*e*g);d=b;a=h;c=e}var d,a,c;Hb.point=function(e,h){d=e*ja;a=Math.sin(h*=ja);c=Math.cos(h);Hb.point=b};Hb.lineEnd=function(){Hb.point=Hb.lineEnd=L}},
lineEnd:L,polygonStart:L,polygonEnd:L},bg=Pb(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(y.geo.azimuthalEqualArea=function(){return hb(bg)}).raw=bg;var cg=Pb(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},A);(y.geo.azimuthalEquidistant=function(){return hb(cg)}).raw=cg;(y.geo.conicConformal=function(){return md(Re)}).raw=Re;(y.geo.conicEquidistant=function(){return md(Se)}).raw=Se;var dg=Pb(function(b){return 1/b},Math.atan);(y.geo.gnomonic=function(){return hb(dg)}).raw=
dg;xc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-Da]};(y.geo.mercator=function(){return Te(xc)}).raw=xc;var eg=Pb(function(){return 1},Math.asin);(y.geo.orthographic=function(){return hb(eg)}).raw=eg;var fg=Pb(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(y.geo.stereographic=function(){return hb(fg)}).raw=fg;sd.invert=function(b,d){return[-d,2*Math.atan(Math.exp(b))-Da]};(y.geo.transverseMercator=function(){var b=Te(sd),d=b.center,a=b.rotate;b.center=function(b){return b?
d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?a([b[0],b[1],2<b.length?b[2]+90:90]):(b=a(),[b[0],b[1],b[2]-90])};return a([0,0,90])}).raw=sd;y.geom={};y.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=xa(a),e=xa(c),h,f=b.length,g=[],k=[];for(h=0;h<f;h++)g.push([+d.call(this,b[h],h),+e.call(this,b[h],h),h]);g.sort(Vg);for(h=0;h<f;h++)k.push([g[h][0],-g[h][1]]);d=Ue(g);k=Ue(k);e=k[0]===d[0];f=k[k.length-1]===d[d.length-1];var m=[];for(h=d.length-1;0<=h;--h)m.push(b[g[d[h]][2]]);
for(h=+e;h<k.length-f;++h)m.push(b[g[k[h]][2]]);return m}var a=Ab,c=Qb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(a=b,d):a};d.y=function(b){return arguments.length?(c=b,d):c};return d};y.geom.polygon=function(b){$b(b,Wc);return b};var Wc=y.geom.polygon.prototype=[];Wc.area=function(){for(var b=-1,d=this.length,a,c=this[d-1],e=0;++b<d;)a=c,c=this[b],e+=a[1]*c[0]-a[0]*c[1];return.5*e};Wc.centroid=function(b){var d=-1,a=this.length,c=0,e=0,f=this[a-1];for(arguments.length||
(b=-1/(6*this.area()));++d<a;){var g=f;f=this[d];var k=g[0]*f[1]-f[0]*g[1];c+=(g[0]+f[0])*k;e+=(g[1]+f[1])*k}return[c*b,e*b]};Wc.clip=function(b){for(var d,a=Ve(b),c=-1,e=this.length-Ve(this),f,g,k=this[e-1],p,q,l;++c<e;){d=b.slice();b.length=0;p=this[c];q=d[(g=d.length-a)-1];for(f=-1;++f<g;)l=d[f],td(l,k,p)?(td(q,k,p)||b.push(ud(q,l,k,p)),b.push(l)):td(q,k,p)&&b.push(ud(q,l,k,p)),q=l;a&&b.push(b[0]);k=p}return b};var Eb,sb,Cb,Xe=[],wd,Rb,af=[];Ze.prototype.prepare=function(){for(var b=this.edges,
d=b.length,a;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);b.sort($e);return b.length};Ac.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};xd.prototype={insert:function(b,d){var a;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var c=b}else this._?(b=cf(this._),d.P=null,d.N=b,b.P=b.L=d,c=b):(d.P=d.N=null,this._=d,c=null);d.L=d.R=null;d.U=c;d.C=!0;for(b=d;c&&c.C;)d=
c.U,c===d.L?(a=d.R)&&a.C?(c.C=a.C=!1,d.C=!0,b=d):(b===c.R&&(Tb(this,c),b=c,c=b.U),c.C=!1,d.C=!0,Ub(this,d)):(a=d.L)&&a.C?(c.C=a.C=!1,d.C=!0,b=d):(b===c.L&&(Ub(this,c),b=c,c=b.U),c.C=!1,d.C=!0,Tb(this,d)),c=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,a=b.L,c=b.R;var e=a?c?cf(c):a:c;d?d.L===b?d.L=e:d.R=e:this._=e;if(a&&c){var f=e.C;e.C=b.C;e.L=a;a.U=e;e!==c?(d=e.U,e.U=b.U,b=e.R,d.L=b,e.R=c,c.U=e):(e.U=d,d=e,b=e.R)}else f=b.C,b=e;b&&(b.U=d);if(!f)if(b&&
b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Tb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Ub(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Tb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Ub(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Tb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Ub(this,d);b=this._;break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};y.geom.voronoi=function(b){function d(b){var d=Array(b.length),c=k[0][0],
e=k[0][1],h=k[1][0],f=k[1][1];yd(a(b),k).cells.forEach(function(a,g){var k=a.edges;a=a.site;(d[g]=k.length?k.map(function(b){b=b.start();return[b.x,b.y]}):a.x>=c&&a.x<=h&&a.y>=e&&a.y<=f?[[c,f],[h,f],[h,e],[c,e]]:[]).point=b[g]});return d}function a(b){return b.map(function(b,d){return{x:1E-6*Math.round(f(b,d)/1E-6),y:1E-6*Math.round(g(b,d)/1E-6),i:d}})}var c=Ab,e=Qb,f=c,g=e,k=Xc;if(b)return d(b);d.links=function(b){return yd(a(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],
target:b[d.r.i]}})};d.triangles=function(b){var d=[];yd(a(b)).cells.forEach(function(a,c){var e=a.site;a=a.edges.sort($e);var h=-1,f=a.length,g=a[f-1].edge;for(g=g.l===e?g.r:g.l;++h<f;){var k=g;g=a[h].edge;g=g.l===e?g.r:g.l;c<k.i&&c<g.i&&0>(e.x-g.x)*(k.y-e.y)-(e.x-k.x)*(g.y-e.y)&&d.push([b[c],b[k.i],b[g.i]])}});return d};d.x=function(b){return arguments.length?(f=xa(c=b),d):c};d.y=function(b){return arguments.length?(g=xa(e=b),d):e};d.clipExtent=function(b){if(!arguments.length)return k===Xc?null:
k;k=null==b?Xc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):k===Xc?null:k&&k[1]};return d};var Xc=[[-1E6,-1E6],[1E6,1E6]];y.geom.delaunay=function(b){return y.geom.voronoi().triangles(b)};y.geom.quadtree=function(b,d,a,c,e){function h(b){function h(b,d,a,c,e,h,f,g){if(!isNaN(a)&&!isNaN(c))if(b.leaf){var k=b.x,p=b.y;if(null!=k){if(!(.01>ka(k-a)+ka(p-c))){var q=b.point;b.x=b.y=b.point=null;m(b,q,k,p,e,h,f,g)}m(b,d,a,c,e,h,f,g)}else b.x=a,b.y=c,b.point=d}else m(b,
d,a,c,e,h,f,g)}function m(b,d,a,c,e,f,g,k){var m=.5*(e+g),p=.5*(f+k),q=a>=m,l=c>=p,n=l<<1|q;b.leaf=!1;b=b.nodes[n]||(b.nodes[n]=df());q?e=m:g=m;l?f=p:k=p;h(b,d,a,c,e,f,g,k)}var p=xa(f),q=xa(g),l;if(null!=d){var n=d;var u=a;var x=c;var r=e}else{x=r=-(n=u=Infinity);var F=[];var w=[];var C=b.length;if(k)for(l=0;l<C;++l){var t=b[l];t.x<n&&(n=t.x);t.y<u&&(u=t.y);t.x>x&&(x=t.x);t.y>r&&(r=t.y);F.push(t.x);w.push(t.y)}else for(l=0;l<C;++l){var B=+p(t=b[l],l);t=+q(t,l);B<n&&(n=B);t<u&&(u=t);B>x&&(x=B);t>r&&
(r=t);F.push(B);w.push(t)}}B=x-n;t=r-u;B>t?r=u+B:x=n+t;var J=df();J.add=function(b){h(J,b,+p(b,++l),+q(b,l),n,u,x,r)};J.visit=function(b){Vb(b,J,n,u,x,r)};J.find=function(b){return ch(J,b[0],b[1],n,u,x,r)};l=-1;if(null==d){for(;++l<C;)h(J,b[l],F[l],w[l],n,u,x,r);--l}else b.forEach(J.add);F=w=b=t=null;return J}var f=Ab,g=Qb,k;if(k=arguments.length)return f=ah,g=bh,3===k&&(e=a,c=d,a=d=0),h(b);h.x=function(b){return arguments.length?(f=b,h):f};h.y=function(b){return arguments.length?(g=b,h):g};h.extent=
function(b){if(!arguments.length)return null==d?null:[[d,a],[c,e]];null==b?d=a=c=e=null:(d=+b[0][0],a=+b[0][1],c=+b[1][0],e=+b[1][1]);return h};h.size=function(b){if(!arguments.length)return null==d?null:[c-d,e-a];null==b?d=a=c=e=null:(d=a=0,c=+b[0],e=+b[1]);return h};return h};y.interpolateRgb=zd;y.interpolateObject=ef;y.interpolateNumber=ab;y.interpolateString=ff;var Ad=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bd=new RegExp(Ad.source,"g");y.interpolate=tb;y.interpolators=[function(b,d){var a=
typeof d;return("string"===a?ec.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?zd:ff:d instanceof ua?zd:Array.isArray(d)?Bc:"object"===a&&isNaN(d)?ef:ab)(b,d)}];y.interpolateArray=Bc;var gg=function(){return A},ni=y.map({linear:gg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return eh},cubic:function(){return fh},sin:function(){return hh},exp:function(){return ih},circle:function(){return jh},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var a=
d/Qa*Math.asin(1/b);else b=1,a=d/4;return function(c){return 1+b*Math.pow(2,-10*c)*Math.sin((c-a)*Qa/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return kh}}),oi=y.map({"in":A,out:gf,"in-out":hf,"out-in":function(b){return hf(gf(b))}});y.ease=function(b){var d=b.indexOf("-"),a=0<=d?b.slice(0,d):b;d=0<=d?b.slice(d+1):"in";a=ni.get(a)||gg;d=oi.get(d)||A;return dh(d(a.apply(null,Wf.call(arguments,1))))};y.interpolateHcl=function(b,d){b=y.hcl(b);d=
y.hcl(d);var a=b.h,c=b.c,e=b.l,f=d.h-a,g=d.c-c,k=d.l-e;isNaN(g)&&(g=0,c=isNaN(c)?d.c:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return Ha(a+f*b,c+g*b,e+k*b)+""}};y.interpolateHsl=function(b,d){b=y.hsl(b);d=y.hsl(d);var a=b.h,c=b.s,e=b.l,f=d.h-a,g=d.s-c,k=d.l-e;isNaN(g)&&(g=0,c=isNaN(c)?d.s:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return va(a+f*b,c+g*b,e+k*b)+""}};y.interpolateLab=function(b,d){b=y.lab(b);d=y.lab(d);
var a=b.l,c=b.a,e=b.b,f=d.l-a,g=d.a-c,k=d.b-e;return function(b){return Ba(a+f*b,c+g*b,e+k*b)+""}};y.interpolateRound=jf;y.transform=function(b){var d=Ma.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(b){if(null!=b){d.setAttribute("transform",b);var a=d.transform.baseVal.consolidate()}return new kf(a?a.matrix:pi)})(b)};kf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pi={a:1,b:0,c:0,d:1,e:0,
f:0};y.interpolateTransform=mf;y.layout={};y.layout.bundle=function(){return function(b){for(var d=[],a=-1,c=b.length;++a<c;)d.push(rh(b[a]));return d}};y.layout.chord=function(){function b(){var b={},a=[],h=y.range(g),m=[],n,u;c=[];e=[];var x=0;for(n=-1;++n<g;){var r=0;for(u=-1;++u<g;)r+=f[n][u];a.push(r);m.push(y.range(g));x+=r}p&&h.sort(function(b,d){return p(a[b],a[d])});q&&m.forEach(function(b,d){b.sort(function(b,a){return q(f[d][b],f[d][a])})});x=(Qa-k*g)/x;r=0;for(n=-1;++n<g;){var w=r;for(u=
-1;++u<g;){var F=h[n],C=m[F][u],t=f[F][C],B=r,J=r+=t*x;b[F+"-"+C]={index:F,subindex:C,startAngle:B,endAngle:J,value:t}}e[F]={index:F,startAngle:w,endAngle:r,value:a[F]};r+=k}for(n=-1;++n<g;)for(u=n-1;++u<g;)h=b[n+"-"+u],m=b[u+"-"+n],(h.value||m.value)&&c.push(h.value<m.value?{source:m,target:h}:{source:h,target:m});l&&d()}function d(){c.sort(function(b,d){return l((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var a={},c,e,f,g,k=0,p,q,l;a.matrix=function(b){if(!arguments.length)return f;
g=(f=b)&&f.length;c=e=null;return a};a.padding=function(b){if(!arguments.length)return k;k=b;c=e=null;return a};a.sortGroups=function(b){if(!arguments.length)return p;p=b;c=e=null;return a};a.sortSubgroups=function(b){if(!arguments.length)return q;q=b;c=null;return a};a.sortChords=function(b){if(!arguments.length)return l;l=b;c&&d();return a};a.chords=function(){c||b();return c};a.groups=function(){e||b();return e};return a};y.layout.force=function(){function b(b){return function(d,a,c,e){if(d.point!==
b){c=d.cx-b.x;var h=d.cy-b.y;a=e-a;e=c*c+h*h;if(a*a/r<e)return e<u&&(a=d.charge/e,b.px-=c*a,b.py-=h*a),!0;d.point&&e&&e<u&&(a=d.pointCharge/e,b.px-=c*a,b.py-=h*a)}return!d.charge}}function d(b){b.px=y.event.x;b.py=y.event.y;a.resume()}var a={},c=y.dispatch("start","tick","end"),e,f=[1,1],g,k,p=.9,q=qi,l=ri,n=-30,u=si,x=.1,r=.64,w=[],C=[],t,B,J;a.tick=function(){if(.005>(k*=.99))return e=null,c.end({type:"end",alpha:k=0}),!0;var d=w.length,a=C.length,h,g;for(h=0;h<a;++h){var m=C[h];var q=m.source;
var l=m.target;var u=l.x-q.x;var r=l.y-q.y;if(g=u*u+r*r)g=k*B[h]*((g=Math.sqrt(g))-t[h])/g,u*=g,r*=g,l.x-=u*(g=q.weight+l.weight?q.weight/(q.weight+l.weight):.5),l.y-=r*g,q.x+=u*(g=1-g),q.y+=r*g}if(g=k*x)if(u=f[0]/2,r=f[1]/2,h=-1,g)for(;++h<d;)m=w[h],m.x+=(u-m.x)*g,m.y+=(r-m.y)*g;if(n)for(of(a=y.geom.quadtree(w),k,J),h=-1;++h<d;)(m=w[h]).fixed||a.visit(b(m));for(h=-1;++h<d;)m=w[h],m.fixed?(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*p,m.y-=(m.py-(m.py=m.y))*p);c.tick({type:"tick",alpha:k})};a.nodes=
function(b){if(!arguments.length)return w;w=b;return a};a.links=function(b){if(!arguments.length)return C;C=b;return a};a.size=function(b){if(!arguments.length)return f;f=b;return a};a.linkDistance=function(b){if(!arguments.length)return q;q="function"===typeof b?b:+b;return a};a.distance=a.linkDistance;a.linkStrength=function(b){if(!arguments.length)return l;l="function"===typeof b?b:+b;return a};a.friction=function(b){if(!arguments.length)return p;p=+b;return a};a.charge=function(b){if(!arguments.length)return n;
n="function"===typeof b?b:+b;return a};a.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(u);u=b*b;return a};a.gravity=function(b){if(!arguments.length)return x;x=+b;return a};a.theta=function(b){if(!arguments.length)return Math.sqrt(r);r=b*b;return a};a.alpha=function(b){if(!arguments.length)return k;b=+b;k?0<b?k=b:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:k=0})):0<b&&(c.start({type:"start",alpha:k=b}),e=fc(a.tick));return a};a.start=function(){function b(b,a){if(!k){k=Array(c);
for(f=0;f<c;++f)k[f]=[];for(f=0;f<e;++f){var h=C[f];k[h.source.index].push(h.target);k[h.target.index].push(h.source)}}h=k[d];for(var f=-1,g=h.length,m;++f<g;)if(!isNaN(m=h[f][b]))return m;return Math.random()*a}var d,c=w.length,e=C.length,h=f[0],g=f[1],k,m;for(d=0;d<c;++d)(m=w[d]).index=d,m.weight=0;for(d=0;d<e;++d)m=C[d],"number"==typeof m.source&&(m.source=w[m.source]),"number"==typeof m.target&&(m.target=w[m.target]),++m.source.weight,++m.target.weight;for(d=0;d<c;++d)m=w[d],isNaN(m.x)&&(m.x=
b("x",h)),isNaN(m.y)&&(m.y=b("y",g)),isNaN(m.px)&&(m.px=m.x),isNaN(m.py)&&(m.py=m.y);t=[];if("function"===typeof q)for(d=0;d<e;++d)t[d]=+q.call(this,C[d],d);else for(d=0;d<e;++d)t[d]=q;B=[];if("function"===typeof l)for(d=0;d<e;++d)B[d]=+l.call(this,C[d],d);else for(d=0;d<e;++d)B[d]=l;J=[];if("function"===typeof n)for(d=0;d<c;++d)J[d]=+n.call(this,w[d],d);else for(d=0;d<c;++d)J[d]=n;return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){g||
(g=y.behavior.drag().origin(A).on("dragstart.force",sh).on("drag.force",d).on("dragend.force",th));if(!arguments.length)return g;this.on("mouseover.force",uh).on("mouseout.force",vh).call(g)};return y.rebind(a,c,"on")};var qi=20,ri=1,si=Infinity;y.layout.hierarchy=function(){function b(e){var h=[e],f=[],g;for(e.depth=0;null!=(g=h.pop());)if(f.push(g),(m=a.call(b,g,g.depth))&&(k=m.length)){for(var k,m,p;0<=--k;)h.push(p=m[k]),p.parent=g,p.depth=g.depth+1;c&&(g.value=0);g.children=m}else c&&(g.value=
+c.call(b,g,g.depth)||0),delete g.children;Xa(e,function(b){var a,e;d&&(a=b.children)&&a.sort(d);c&&(e=b.parent)&&(e.value+=b.value)});return f}var d=zh,a=xh,c=yh;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(d){if(!arguments.length)return a;a=d;return b};b.value=function(d){if(!arguments.length)return c;c=d;return b};b.revalue=function(d){c&&(Xb(d,function(b){b.children&&(b.value=0)}),Xa(d,function(d){var a;d.children||(d.value=+c.call(b,d,d.depth)||0);if(a=d.parent)a.value+=
d.value}));return d};return b};y.layout.partition=function(){function b(d,a,c,e){var h=d.children;d.x=a;d.y=d.depth*e;d.dx=c;d.dy=e;if(h&&(g=h.length)){var f=-1,g,k;for(c=d.value?c/d.value:0;++f<g;)b(k=h[f],a,d=k.value*c,e),a+=d}}function d(b){b=b.children;var a=0;if(b&&(e=b.length))for(var c=-1,e;++c<e;)a=Math.max(a,d(b[c]));return 1+a}function a(a,h){a=c.call(this,a,h);b(a[0],0,e[0],e[1]/d(a[0]));return a}var c=y.layout.hierarchy(),e=[1,1];a.size=function(b){if(!arguments.length)return e;e=b;return a};
return Wb(a,c)};y.layout.pie=function(){function b(h){var g=h.length,k=h.map(function(a,c){return+d.call(b,a,c)}),m=+("function"===typeof c?c.apply(this,arguments):c),p=("function"===typeof e?e.apply(this,arguments):e)-m,q=Math.min(Math.abs(p)/g,+("function"===typeof f?f.apply(this,arguments):f)),l=q*(0>p?-1:1),n=y.sum(k),u=n?(p-g*l)/n:0;g=y.range(g);var x=[],r;null!=a&&g.sort(a===hg?function(b,d){return k[d]-k[b]}:function(b,d){return a(h[b],h[d])});g.forEach(function(b){x[b]={data:h[b],value:r=
k[b],startAngle:m,endAngle:m+=r*u+l,padAngle:q}});return x}var d=Number,a=hg,c=0,e=Qa,f=0;b.value=function(a){if(!arguments.length)return d;d=a;return b};b.sort=function(d){if(!arguments.length)return a;a=d;return b};b.startAngle=function(d){if(!arguments.length)return c;c=d;return b};b.endAngle=function(d){if(!arguments.length)return e;e=d;return b};b.padAngle=function(d){if(!arguments.length)return f;f=d;return b};return b};var hg={};y.layout.stack=function(){function b(h,k){if(!(l=h.length))return h;
var m=h.map(function(a,c){return d.call(b,a,c)}),p=m.map(function(d){return d.map(function(d,a){return[f.call(b,d,a),g.call(b,d,a)]})}),q=a.call(b,p,k);m=y.permute(m,q);p=y.permute(p,q);k=c.call(b,p,k);q=m[0].length;var l,n,u,x;for(u=0;u<q;++u)for(e.call(b,m[0][u],x=k[u],p[0][u][1]),n=1;n<l;++n)e.call(b,m[n][u],x+=p[n-1][u][1],p[n][u][1]);return h}var d=A,a=Cd,c=Dd,e=Ch,f=Ah,g=Bh;b.values=function(a){if(!arguments.length)return d;d=a;return b};b.order=function(d){if(!arguments.length)return a;a="function"===
typeof d?d:ti.get(d)||Cd;return b};b.offset=function(d){if(!arguments.length)return c;c="function"===typeof d?d:ui.get(d)||Dd;return b};b.x=function(d){if(!arguments.length)return f;f=d;return b};b.y=function(d){if(!arguments.length)return g;g=d;return b};b.out=function(d){if(!arguments.length)return e;e=d;return b};return b};var ti=y.map({"inside-out":function(b){var d=b.length,a=b.map(Dh),c=b.map(Eh),e=y.range(d).sort(function(b,d){return a[b]-a[d]}),f=0,g=0,k=[],p=[];for(b=0;b<d;++b){var q=e[b];
f<g?(f+=c[q],k.push(q)):(g+=c[q],p.push(q))}return p.reverse().concat(k)},reverse:function(b){return y.range(b.length).reverse()},"default":Cd}),ui=y.map({silhouette:function(b){var d=b.length,a=b[0].length,c=[],e=0,f,g,k,p=[];for(g=0;g<a;++g){for(k=f=0;f<d;f++)k+=b[f][g][1];k>e&&(e=k);c.push(k)}for(g=0;g<a;++g)p[g]=(e-c[g])/2;return p},wiggle:function(b){var d=b.length,a=b[0],c=a.length,e,f,g,k,p,q,l,n=[];n[0]=q=l=0;for(f=1;f<c;++f){for(g=e=0;e<d;++e)g+=b[e][f][1];var u=e=0;for(p=a[f][0]-a[f-1][0];e<
d;++e){var x=0;for(k=(b[e][f][1]-b[e][f-1][1])/(2*p);x<e;++x)k+=(b[x][f][1]-b[x][f-1][1])/p;u+=k*b[e][f][1]}n[f]=q-=g?u/g*p:0;q<l&&(l=q)}for(f=0;f<c;++f)n[f]-=l;return n},expand:function(b){var d=b.length,a=b[0].length,c=1/d,e,f,g,k=[];for(f=0;f<a;++f){for(g=e=0;e<d;e++)g+=b[e][f][1];if(g)for(e=0;e<d;e++)b[e][f][1]/=g;else for(e=0;e<d;e++)b[e][f][1]=c}for(f=0;f<a;++f)k[f]=0;return k},zero:Dd});y.layout.histogram=function(){function b(b,f){var h=[],g=b.map(a,this),k=c.call(this,g,f),m=e.call(this,
k,g,f);f=-1;for(var p=g.length,q=m.length-1,l=d?1:1/p;++f<q;){var n=h[f]=[];n.dx=m[f+1]-(n.x=m[f]);n.y=0}if(0<q)for(f=-1;++f<p;)n=g[f],n>=k[0]&&n<=k[1]&&(n=h[y.bisect(m,n,1,q)-1],n.y+=l,n.push(b[f]));return h}var d=!0,a=Number,c=Hh,e=Gh;b.value=function(d){if(!arguments.length)return a;a=d;return b};b.range=function(d){if(!arguments.length)return c;c=xa(d);return b};b.bins=function(d){if(!arguments.length)return e;e="number"===typeof d?function(b){return pf(b,d)}:xa(d);return b};b.frequency=function(a){if(!arguments.length)return d;
d=!!a;return b};return b};y.layout.pack=function(){function b(b,f){b=d.call(this,b,f);f=b[0];var h=c[0],g=c[1],k=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};f.x=f.y=0;Xa(f,function(b){b.r=+k(b.value)});Xa(f,sf);if(a){var p=a*(e?1:Math.max(2*f.r/h,2*f.r/g))/2;Xa(f,function(b){b.r+=p});Xa(f,sf);Xa(f,function(b){b.r-=p})}uf(f,h/2,g/2,e?1:1/Math.max(2*f.r/h,2*f.r/g));return b}var d=y.layout.hierarchy().sort(Ih),a=0,c=[1,1],e;b.size=function(d){if(!arguments.length)return c;c=d;return b};
b.radius=function(d){if(!arguments.length)return e;e=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return a;a=+d;return b};return Wb(b,d)};y.layout.tree=function(){function b(b,h){b=f.call(this,b,h);h=b[0];var m=d(h);Xa(m,a);m.parent.m=-m.z;Xb(m,c);if(p)Xb(h,e);else{var q=h,l=h,n=h;Xb(h,function(b){b.x<q.x&&(q=b);b.x>l.x&&(l=b);b.depth>n.depth&&(n=b)});var u=g(q,l)/2-q.x,x=k[0]/(l.x+g(l,q)/2+u),r=k[1]/(n.depth||1);Xb(h,function(b){b.x=(b.x+u)*x;b.y=b.depth*
r})}return b}function d(b){b={A:null,children:[b]};for(var d=[b],a;null!=(a=d.pop());)for(var c=a.children,e,f=0,h=c.length;f<h;++f)d.push((c[f]=e={_:c[f],parent:a,children:(e=c[f].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:f}).a=e);return b.children[0]}function a(b){var d=b.children,a=b.parent.children,c=b.i?a[b.i-1]:null;if(d.length){for(var e=0,f=0,h=b.children,k=h.length,p;0<=--k;)p=h[k],p.z+=e,p.m+=e,e+=p.s+(f+=p.c);d=(d[0].z+d[d.length-1].z)/2;c?(b.z=c.z+g(b._,c._),b.m=
b.z-d):b.z=d}else c&&(b.z=c.z+g(b._,c._));d=b.parent;a=b.parent.A||a[0];if(c){f=e=b;h=e.parent.children[0];k=e.m;p=f.m;for(var m=c.m,q=h.m,l;c=Gd(c),e=Fd(e),c&&e;){h=Fd(h);f=Gd(f);f.a=b;l=c.z+m-e.z-k+g(c._,e._);if(0<l){var n=c.a.parent===b.parent?c.a:a,u=b,x=l,r=x/(u.i-n.i);u.c-=r;u.s+=x;n.c+=r;u.z+=x;u.m+=x;k+=l;p+=l}m+=c.m;k+=e.m;q+=h.m;p+=f.m}c&&!Gd(f)&&(f.t=c,f.m+=m-p);e&&!Fd(h)&&(h.t=e,h.m+=k-q,a=b)}d.A=a}function c(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=k[0];b.y=b.depth*
k[1]}var f=y.layout.hierarchy().sort(null).value(null),g=vf,k=[1,1],p=null;b.separation=function(d){if(!arguments.length)return g;g=d;return b};b.size=function(d){if(!arguments.length)return p?null:k;p=null==(k=d)?e:null;return b};b.nodeSize=function(d){if(!arguments.length)return p?k:null;p=null==(k=d)?null:e;return b};return Wb(b,f)};y.layout.cluster=function(){function b(b,f){b=d.call(this,b,f);var h=b[0],g,k=0;Xa(h,function(b){var d=b.children;d&&d.length?(b.x=Mh(d),b.y=Lh(d)):(b.x=g?k+=a(b,g):
0,b.y=0,g=b)});f=wf(h);var p=xf(h),m=f.x-a(f,p)/2,q=p.x+a(p,f)/2;Xa(h,e?function(b){b.x=(b.x-h.x)*c[0];b.y=(h.y-b.y)*c[1]}:function(b){b.x=(b.x-m)/(q-m)*c[0];b.y=(1-(h.y?b.y/h.y:1))*c[1]});return b}var d=y.layout.hierarchy().sort(null).value(null),a=vf,c=[1,1],e=!1;b.separation=function(d){if(!arguments.length)return a;a=d;return b};b.size=function(d){if(!arguments.length)return e?null:c;e=null==(c=d);return b};b.nodeSize=function(d){if(!arguments.length)return e?c:null;e=null!=(c=d);return b};return Wb(b,
d)};y.layout.treemap=function(){function b(b,d){for(var a=-1,c=b.length,e,f;++a<c;)f=(e=b[a]).value*(0>d?0:d),e.area=isNaN(f)||0>=f?0:f}function d(a){var e=a.children;if(e&&e.length){var f=q(a),h=[],g=e.slice(),k=Infinity,p,m="slice"===u?f.dx:"dice"===u?f.dy:"slice-dice"===u?a.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);b(g,f.dx*f.dy/a.value);for(h.area=0;0<(a=g.length);){h.push(a=g[a-1]);h.area+=a.area;if(!(a="squarify"!==u)){a=m;for(var l=h.area,n=0,r=Infinity,w=-1,C=h.length;++w<C;)if(p=h[w].area)p<
r&&(r=p),p>n&&(n=p);l*=l;a*=a;a=(p=l?Math.max(a*n*x/l,l/(a*r*x)):Infinity)<=k}a?(g.pop(),k=p):(h.area-=h.pop().area,c(h,m,f,!1),m=Math.min(f.dx,f.dy),h.length=h.area=0,k=Infinity)}h.length&&(c(h,m,f,!0),h.length=h.area=0);e.forEach(d)}}function a(d){var e=d.children;if(e&&e.length){var f=q(d),h=e.slice(),g=[];b(h,f.dx*f.dy/d.value);for(g.area=0;d=h.pop();)g.push(d),g.area+=d.area,null!=d.z&&(c(g,d.z?f.dx:f.dy,f,!h.length),g.length=g.area=0);e.forEach(a)}}function c(b,d,a,c){var e=-1,f=b.length,h=
a.x,k=a.y,p=d?g(b.area/d):0;if(d==a.dx){if(c||p>a.dy)p=a.dy;for(;++e<f;){var m=b[e];m.x=h;m.y=k;m.dy=p;h+=m.dx=Math.min(a.x+a.dx-h,p?g(m.area/p):0)}m.z=!0;m.dx+=a.x+a.dx-h;a.y+=p;a.dy-=p}else{if(c||p>a.dx)p=a.dx;for(;++e<f;)m=b[e],m.x=h,m.y=k,m.dx=p,k+=m.dy=Math.min(a.y+a.dy-k,p?g(m.area/p):0);m.z=!1;m.dy+=a.y+a.dy-k;a.x+=p;a.dx-=p}}function e(c){c=n||f(c);var e=c[0];e.x=e.y=0;e.value?(e.dx=k[0],e.dy=k[1]):e.dx=e.dy=0;n&&f.revalue(e);b([e],e.dx*e.dy/e.value);(n?a:d)(e);l&&(n=c);return c}var f=y.layout.hierarchy(),
g=Math.round,k=[1,1],p=null,q=Hd,l=!1,n,u="squarify",x=.5*(1+Math.sqrt(5));e.size=function(b){if(!arguments.length)return k;k=b;return e};e.padding=function(b){function d(d){var a=b.call(e,d,d.depth);return null==a?Hd(d):yf(d,"number"===typeof a?[a,a,a,a]:a)}function a(d){return yf(d,b)}if(!arguments.length)return p;var c;q=null==(p=b)?Hd:"function"===(c=typeof b)?d:"number"===c?(b=[b,b,b,b],a):a;return e};e.round=function(b){if(!arguments.length)return g!=Number;g=b?Math.round:Number;return e};e.sticky=
function(b){if(!arguments.length)return l;l=b;n=null;return e};e.ratio=function(b){if(!arguments.length)return x;x=b;return e};e.mode=function(b){if(!arguments.length)return u;u=b+"";return e};return Wb(e,f)};y.random={normal:function(b,d){var a=arguments.length;2>a&&(d=1);1>a&&(b=0);return function(){do{var a=2*Math.random()-1;var c=2*Math.random()-1;c=a*a+c*c}while(!c||1<c);return b+d*a*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var b=y.random.normal.apply(y,arguments);return function(){return Math.exp(b())}},
bates:function(b){var d=y.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,a=0;a<b;a++)d+=Math.random();return d}}};y.scale={};var Oh={floor:A,ceil:A};y.scale.linear=function(){return Af([0,1],[0,1],tb,!1)};var Rh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return Cf(y.scale.linear().domain([0,1]),10,!0,[1,10])};var Df=y.format(".0e"),Sh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};y.scale.pow=function(){return Ef(y.scale.linear(),
1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return Ff([],{t:"range",a:[[]]})};y.scale.category10=function(){return y.scale.ordinal().range(vi)};y.scale.category20=function(){return y.scale.ordinal().range(wi)};y.scale.category20b=function(){return y.scale.ordinal().range(xi)};y.scale.category20c=function(){return y.scale.ordinal().range(yi)};var vi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wb),wi=[2062260,
11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wb),xi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wb),yi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,
6513507,9868950,12434877,14277081].map(wb);y.scale.quantile=function(){return Gf([],[])};y.scale.quantize=function(){return Hf(0,1,[0,1])};y.scale.threshold=function(){return If([.5],[0,1])};y.scale.identity=function(){return Jf([0,1])};y.svg={};y.svg.arc=function(){function b(){var b=Math.max(0,+a.apply(this,arguments)),h=Math.max(0,+c.apply(this,arguments)),m=g.apply(this,arguments)-Da,q=k.apply(this,arguments)-Da,l=Math.abs(q-m),n=m>q?0:1;if(h<b){var u=h;h=b;b=u}if(l>=ki)return d(h,n)+(b?d(b,1-
n):"")+"Z";var x,r=0,w=0,C=[];if(x=(+p.apply(this,arguments)||0)/2){var t=f===Yc?Math.sqrt(b*b+h*h):+f.apply(this,arguments);n||(w*=-1);h&&(w=sa(t/h*Math.sin(x)));b&&(r=sa(t/b*Math.sin(x)))}if(h){t=h*Math.cos(m+w);x=h*Math.sin(m+w);var B=h*Math.cos(q-w);var J=h*Math.sin(q-w);var N=Math.abs(q-m-2*w)<=ia?0:1;w&&Gc(t,x,B,J)===n^N&&(B=(m+q)/2,t=h*Math.cos(B),x=h*Math.sin(B),B=J=null)}else t=x=0;if(b){w=b*Math.cos(q-r);var v=b*Math.sin(q-r);var I=b*Math.cos(m+r);var F=b*Math.sin(m+r);var U=Math.abs(m-
q+2*r)<=ia?0:1;r&&Gc(w,v,I,F)===1-n^U&&(I=(m+q)/2,w=b*Math.cos(I),v=b*Math.sin(I),I=F=null)}else w=v=0;1E-6<l&&.001<(u=Math.min(Math.abs(h-b)/2,+e.apply(this,arguments)))?(N=b<h^n?0:1,U=m=u,l<ia&&(l=null==I?[w,v]:null==B?[t,x]:ud([t,x],[I,F],[B,J],[w,v]),U=t-l[0],m=x-l[1],q=B-l[0],r=J-l[1],m=1/Math.sin(Math.acos((U*q+m*r)/(Math.sqrt(U*U+m*m)*Math.sqrt(q*q+r*r)))/2),l=Math.sqrt(l[0]*l[0]+l[1]*l[1]),U=Math.min(u,(b-l)/(m-1)),m=Math.min(u,(h-l)/(m+1))),null!=B?(l=Hc(null==I?[w,v]:[I,F],[t,x],h,m,n),
q=Hc([B,J],[w,v],h,m,n),u===m?C.push("M",l[0],"A",m,",",m," 0 0,",N," ",l[1],"A",h,",",h," 0 ",1-n^Gc(l[1][0],l[1][1],q[1][0],q[1][1]),",",n," ",q[1],"A",m,",",m," 0 0,",N," ",q[0]):C.push("M",l[0],"A",m,",",m," 0 1,",N," ",q[0])):C.push("M",t,",",x),null!=I?(h=Hc([t,x],[I,F],b,-U,n),B=Hc([w,v],null==B?[t,x]:[B,J],b,-U,n),u===U?C.push("L",B[0],"A",U,",",U," 0 0,",N," ",B[1],"A",b,",",b," 0 ",n^Gc(B[1][0],B[1][1],h[1][0],h[1][1]),",",1-n," ",h[1],"A",U,",",U," 0 0,",N," ",h[0]):C.push("L",B[0],"A",
U,",",U," 0 0,",N," ",h[0])):C.push("L",w,",",v)):(C.push("M",t,",",x),null!=B&&C.push("A",h,",",h," 0 ",N,",",n," ",B,",",J),C.push("L",w,",",v),null!=I&&C.push("A",b,",",b," 0 ",U,",",1-n," ",I,",",F));C.push("Z");return C.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var a=Uh,c=Vh,e=Th,f=Yc,g=Kf,k=Lf,p=Wh;b.innerRadius=function(d){if(!arguments.length)return a;a=xa(d);return b};b.outerRadius=function(d){if(!arguments.length)return c;c=xa(d);
return b};b.cornerRadius=function(d){if(!arguments.length)return e;e=xa(d);return b};b.padRadius=function(d){if(!arguments.length)return f;f=d==Yc?Yc:xa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=xa(d);return b};b.endAngle=function(d){if(!arguments.length)return k;k=xa(d);return b};b.padAngle=function(d){if(!arguments.length)return p;p=xa(d);return b};b.centroid=function(){var b=(+a.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+g.apply(this,arguments)+ +k.apply(this,
arguments))/2-Da;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Yc="auto";y.svg.line=function(){return Mf(A)};var Kd=y.map({linear:Ua,"linear-closed":Nf,step:function(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c[0]+(c=b[d])[0])/2,"V",c[1]);1<a&&e.push("H",c[0]);return e.join("")},"step-before":Ld,"step-after":Md,basis:Of,"basis-open":function(b){if(4>b.length)return Ua(b);for(var d=[],a=-1,c=b.length,e,f=[0],g=[0];3>++a;)e=b[a],f.push(e[0]),g.push(e[1]);d.push(Ra(jb,
f)+","+Ra(jb,g));for(--a;++a<c;)e=b[a],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),Od(d,f,g);return d.join("")},"basis-closed":function(b){for(var d,a=-1,c=b.length,e=c+4,f,g=[],k=[];4>++a;)f=b[a%c],g.push(f[0]),k.push(f[1]);d=[Ra(jb,g),",",Ra(jb,k)];for(--a;++a<e;)f=b[a%c],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),Od(d,g,k);return d.join("")},bundle:function(b,d){var a=b.length-1;if(a)for(var c=b[0][0],e=b[0][1],f=b[a][0]-c,g=b[a][1]-e,k=-1,p,q;++k<=a;)p=b[k],q=k/a,p[0]=d*p[0]+(1-d)*(c+q*f),
p[1]=d*p[1]+(1-d)*(e+q*g);return Of(b)},cardinal:function(b,d){return 3>b.length?Ua(b):b[0]+Ic(b,Nd(b,d))},"cardinal-open":function(b,d){return 4>b.length?Ua(b):b[1]+Ic(b.slice(1,-1),Nd(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Nf(b):b[0]+Ic((b.push(b[0]),b),Nd([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Ua(b);else{var d=b[0],a=[],c;var e=0;var f=b.length-1;var g=[];var k=b[1];for(c=g[0]=Pd(b[0],k);++e<f;)g[e]=(c+(c=Pd(k,k=b[e+1])))/2;g[e]=c;for(var p=
-1,q=b.length-1;++p<q;)e=Pd(b[p],b[p+1]),1E-6>ka(e)?g[p]=g[p+1]=0:(f=g[p]/e,k=g[p+1]/e,c=f*f+k*k,9<c&&(c=3*e/Math.sqrt(c),g[p]=c*f,g[p+1]=c*k));for(p=-1;++p<=q;)c=(b[Math.min(q,p+1)][0]-b[Math.max(0,p-1)][0])/(6*(1+g[p]*g[p])),a.push([c||0,g[p]*c||0]);b=d+Ic(b,a)}return b}});Kd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Pf=[0,2/3,1/3,0],Qf=[0,1/3,2/3,0],jb=[0,1/6,2/3,1/6];y.svg.line.radial=function(){var b=Mf(Rf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Ld.reverse=
Md;Md.reverse=Ld;y.svg.area=function(){return Sf(A)};y.svg.area.radial=function(){var b=Sf(Rf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};y.svg.chord=function(){function b(b,f){var h=d(this,c,b,f);b=d(this,e,b,f);return"M"+h.p0+a(h.r,h.p1,h.a1-h.a0)+(h.a0==b.a0&&h.a1==b.a1?"Q 0,0 "+h.p0:"Q 0,0 "+b.p0+a(b.r,b.p1,b.a1-b.a0)+("Q 0,0 "+h.p0))+"Z"}function d(b,d,a,c){var e=
d.call(b,a,c);d=f.call(b,e,c);a=g.call(b,e,c)-Da;b=k.call(b,e,c)-Da;return{r:d,a0:a,a1:b,p0:[d*Math.cos(a),d*Math.sin(a)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function a(b,d,a){return"A"+b+","+b+" 0 "+ +(a>ia)+",1 "+d}var c=qd,e=rd,f=Xh,g=Kf,k=Lf;b.radius=function(d){if(!arguments.length)return f;f=xa(d);return b};b.source=function(d){if(!arguments.length)return c;c=xa(d);return b};b.target=function(d){if(!arguments.length)return e;e=xa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;
g=xa(d);return b};b.endAngle=function(d){if(!arguments.length)return k;k=xa(d);return b};return b};y.svg.diagonal=function(){function b(b,e){var f=d.call(this,b,e);b=a.call(this,b,e);e=(f.y+b.y)/2;f=[f,{x:f.x,y:e},{x:b.x,y:e},b];f=f.map(c);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var d=qd,a=rd,c=Tf;b.source=function(a){if(!arguments.length)return d;d=xa(a);return b};b.target=function(d){if(!arguments.length)return a;a=xa(d);return b};b.projection=function(d){if(!arguments.length)return c;c=d;return b};
return b};y.svg.diagonal.radial=function(){var b=y.svg.diagonal(),d=Tf,a=b.projection;b.projection=function(b){return arguments.length?a(Yh(d=b)):d};return b};y.svg.symbol=function(){function b(b,c){return(ig.get(d.call(this,b,c))||Uf)(a.call(this,b,c))}var d=$h,a=Zh;b.type=function(a){if(!arguments.length)return d;d=xa(a);return b};b.size=function(d){if(!arguments.length)return a;a=xa(d);return b};return b};var ig=y.map({circle:Uf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+
"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*jg));var d=b*jg;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Zc);var d=b*Zc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Zc);var d=b*Zc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});y.svg.symbolTypes=
ig.keys();var Zc=Math.sqrt(3),jg=Math.tan(30*ja);ta.transition=function(b){var d=vb||++kg;b=Rd(b);for(var a=[],c,e,f=$c||{time:Date.now(),ease:gh,delay:0,duration:250},g=-1,k=this.length;++g<k;){a.push(c=[]);for(var p=this[g],q=-1,l=p.length;++q<l;)(e=p[q])&&Jc(e,q,b,d,f),c.push(e)}return Yb(a,b,d)};ta.interrupt=function(b){return this.each(null==b?Mc:Vf(Rd(b)))};var Mc=Vf(Rd()),Ia=[],kg=0,vb,$c;Ia.call=ta.call;Ia.empty=ta.empty;Ia.node=ta.node;Ia.size=ta.size;y.transition=function(b,d){return b&&
b.transition?vb?b.transition(d):b:y.selection().transition(b)};y.transition.prototype=Ia;Ia.select=function(b){var d=this.id,a=this.namespace,c=[],e,f,g;b=w(b);for(var k=-1,p=this.length;++k<p;){c.push(e=[]);for(var q=this[k],l=-1,n=q.length;++l<n;)(g=q[l])&&(f=b.call(g,g.__data__,l,k))?("__data__"in g&&(f.__data__=g.__data__),Jc(f,l,a,d,g[a][d]),e.push(f)):e.push(null)}return Yb(c,a,d)};Ia.selectAll=function(b){var d=this.id,a=this.namespace,c=[],e,f;b=K(b);for(var g=-1,k=this.length;++g<k;)for(var p=
this[g],q=-1,l=p.length;++q<l;)if(e=p[q]){var n=e[a][d];var u=b.call(e,e.__data__,q,g);c.push(e=[]);for(var x=-1,r=u.length;++x<r;)(f=u[x])&&Jc(f,x,a,d,n),e.push(f)}return Yb(c,a,d)};Ia.filter=function(b){var d=[],a,c;"function"!==typeof b&&(b=x(b));for(var e=0,f=this.length;e<f;e++){d.push(a=[]);var g=this[e];for(var k=0,p=g.length;k<p;k++)(c=g[k])&&b.call(c,c.__data__,k,e)&&a.push(c)}return Yb(d,this.namespace,this.id)};Ia.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?
this.node()[c][a].tween.get(b):X(this,null==d?function(d){d[c][a].tween.remove(b)}:function(e){e[c][a].tween.set(b,d)})};Ia.attr=function(b,d){function a(){this.removeAttribute(k)}function c(){this.removeAttributeNS(k.space,k.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(k),a;return d!==b&&(a=g(d,b),function(b){this.setAttribute(k,a(b))})})}function f(b){return null==b?c:(b+="",function(){var d=this.getAttributeNS(k.space,k.local),a;return d!==b&&(a=g(d,b),function(b){this.setAttributeNS(k.space,
k.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var g="transform"==b?mf:tb,k=y.ns.qualify(b);return Qd(this,"attr."+b,d,k.local?f:e)};Ia.attrTween=function(b,d){function a(b,a){var c=d.call(this,b,a,this.getAttribute(e));return c&&function(b){this.setAttribute(e,c(b))}}function c(b,a){var c=d.call(this,b,a,this.getAttributeNS(e.space,e.local));return c&&function(b){this.setAttributeNS(e.space,e.local,c(b))}}var e=y.ns.qualify(b);return this.tween("attr."+b,e.local?
c:a)};Ia.style=function(b,d,a){function e(){this.style.removeProperty(b)}var f=arguments.length;if(3>f){if("string"!==typeof b){2>f&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Qd(this,"style."+b,d,function(d){return null==d?e:(d+="",function(){var e=c(this).getComputedStyle(this,null).getPropertyValue(b),f;return e!==d&&(f=tb(e,d),function(d){this.style.setProperty(b,f(d),a)})})})};Ia.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(e,
f){var h=d.call(this,e,f,c(this).getComputedStyle(this,null).getPropertyValue(b));return h&&function(d){this.style.setProperty(b,h(d),a)}})};Ia.text=function(b){return Qd(this,"text",b,ai)};Ia.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Ia.ease=function(b){var d=this.id,a=this.namespace;if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=y.ease.apply(y,arguments));return X(this,
function(c){c[a][d].ease=b})};Ia.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:X(this,"function"===typeof b?function(c,e,f){c[a][d].delay=+b.call(c,c.__data__,e,f)}:(b=+b,function(c){c[a][d].delay=b}))};Ia.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:X(this,"function"===typeof b?function(c,e,f){c[a][d].duration=Math.max(1,b.call(c,c.__data__,e,f))}:(b=Math.max(1,b),function(c){c[a][d].duration=
b}))};Ia.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=$c,f=vb;try{vb=a,X(this,function(d,e,f){$c=d[c][a];b.call(d,d.__data__,e,f)})}finally{$c=e,vb=f}}else X(this,function(e){e=e[c][a];(e.event||(e.event=y.dispatch("start","end","interrupt"))).on(b,d)});return this};Ia.transition=function(){for(var b=this.id,d=++kg,a=this.namespace,c=[],e,f,g,k,p=0,q=this.length;p<q;p++){c.push(e=[]);f=this[p];for(var l=0,n=f.length;l<n;l++){if(g=f[l])k=g[a][b],Jc(g,l,a,d,{time:k.time,
ease:k.ease,delay:k.delay+k.duration,duration:k.duration});e.push(g)}}return Yb(c,a,d)};y.svg.axis=function(){function b(b){b.each(function(){var b=y.select(this),h=this.__chart__||d,q=this.__chart__=d.copy(),l=null==k?q.ticks?q.ticks.apply(q,g):q.domain():k,m=null==p?q.tickFormat?q.tickFormat.apply(q,g):A:p,n=b.selectAll(".tick").data(l,q);l=n.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var u=y.transition(n.exit()).style("opacity",1E-6).remove(),x=y.transition(n.order()).style("opacity",
1),r=Math.max(c,0)+f,w=Cc(q);b=b.selectAll(".domain").data([0]);b=(b.enter().append("path").attr("class","domain"),y.transition(b));l.append("line");l.append("text");var C=l.select("line"),t=x.select("line");n=n.select("text").text(m);var B=l.select("text"),J=x.select("text"),N="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){m=bi;var v="x";var I="y";var U="x2";var K="y2";n.attr("dy",0>N?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+w[0]+","+N*e+"V0H"+w[1]+"V"+N*e)}else m=ci,v=
"y",I="x",U="y2",K="x2",n.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),b.attr("d","M"+N*e+","+w[0]+"H0V"+w[1]+"H"+N*e);C.attr(K,N*c);B.attr(I,N*r);t.attr(U,0).attr(K,N*c);J.attr(v,0).attr(I,N*r);if(q.rangeBand){var Y=q,R=Y.rangeBand()/2;h=q=function(b){return Y(b)+R}}else h.rangeBand?h=q:u.call(m,q,h);l.call(m,h,q);x.call(m,q,q)})}var d=y.scale.linear(),a=lg,c=6,e=6,f=3,g=[10],k=null,p;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;
a=d in zi?d+"":lg;return b};b.ticks=function(){if(!arguments.length)return g;g=Va(arguments);return b};b.tickValues=function(d){if(!arguments.length)return k;k=d;return b};b.tickFormat=function(d){if(!arguments.length)return p;p=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return f;
f=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var lg="bottom",zi={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function b(c){c.each(function(){var c=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),h=c.selectAll(".background").data([0]);h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var g=c.selectAll(".resize").data(w,A);g.exit().remove();g.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return Ai[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");g.style("display",b.empty()?"none":null);c=y.transition(c);h=y.transition(h);k&&(g=Cc(k),h.attr("x",g[0]).attr("width",
g[1]-g[0]),a(c));p&&(g=Cc(p),h.attr("y",g[0]).attr("height",g[1]-g[0]),e(c));d(c)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+q[+/e$/.test(b)]+","+l[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",q[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function e(b){b.select(".extent").attr("y",l[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function f(){function f(){var b=y.mouse(w),c=!1;V&&(b[0]+=V[0],
b[1]+=V[1]);I||(y.event.altKey?(K||(K=[(q[0]+q[1])/2,(l[0]+l[1])/2]),Y[0]=q[+(b[0]<K[0])],Y[1]=l[+(b[1]<K[1])]):K=null);N&&h(b,k,0)&&(a(B),c=!0);v&&h(b,p,1)&&(e(B),c=!0);c&&(d(B),t({type:"brush",mode:I?"move":"resize"}))}function h(b,d,a){var c=Cc(d);d=c[0];var e=c[1];c=Y[a];var f=a?l:q,h=f[1]-f[0];I&&(d-=c,e-=h+c);b=(a?r:x)?Math.max(d,Math.min(e,b[a])):b[a];I?d=(b+=c)+h:(K&&(c=Math.max(d,Math.min(e,2*K[a]-b))),c<b?(d=b,b=c):d=c);if(f[0]!=b||f[1]!=d)return a?u=null:n=null,f[0]=b,f[1]=d,!0}function m(){f();
B.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);y.select("body").style("cursor",null);A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);U();t({type:"brushend"})}var w=this,C=y.select(y.event.target),t=g.of(w,arguments),B=y.select(w),J=C.datum(),N=!/^(n|s)$/.test(J)&&k,v=!/^(e|w)$/.test(J)&&p,I=C.classed("extent"),U=za(w),K,Y=y.mouse(w),A=y.select(c(w)).on("keydown.brush",
function(){32==y.event.keyCode&&(I||(K=null,Y[0]-=q[1],Y[1]-=l[1],I=2),R())}).on("keyup.brush",function(){32==y.event.keyCode&&2==I&&(Y[0]+=q[1],Y[1]+=l[1],I=0,R())});if(y.event.changedTouches)A.on("touchmove.brush",f).on("touchend.brush",m);else A.on("mousemove.brush",f).on("mouseup.brush",m);B.interrupt().selectAll("*").interrupt();if(I)Y[0]=q[0]-Y[0],Y[1]=l[0]-Y[1];else if(J){var S=+/w$/.test(J);J=+/^n/.test(J);var V=[q[1-S]-Y[0],l[1-J]-Y[1]];Y[0]=q[S];Y[1]=l[J]}else y.event.altKey&&(K=Y.slice());
B.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",C.style("cursor"));t({type:"brushstart"});f()}var g=N(b,"brushstart","brush","brushend"),k=null,p=null,q=[0,0],l=[0,0],n,u,x=!0,r=!0,w=ae[0];b.event=function(b){b.each(function(){var b=g.of(this,arguments),d={x:q,y:l,i:n,j:u},a=this.__chart__||d;this.__chart__=d;vb?y.select(this).transition().each("start.brush",function(){n=a.i;u=a.j;q=a.x;l=a.y;b({type:"brushstart"})}).tween("brush:brush",
function(){var a=Bc(q,d.x),c=Bc(l,d.y);n=u=null;return function(e){q=d.x=a(e);l=d.y=c(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){n=d.i;u=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return k;k=d;w=ae[!k<<1|!p];return b};b.y=function(d){if(!arguments.length)return p;p=d;w=ae[!k<<1|!p];return b};b.clamp=function(d){if(!arguments.length)return k&&
p?[x,r]:k?x:p?r:null;k&&p?(x=!!d[0],r=!!d[1]):k?x=!!d:p&&(r=!!d);return b};b.extent=function(d){if(!arguments.length){if(k)if(n){var a=n[0];var c=n[1]}else if(a=q[0],c=q[1],k.invert&&(a=k.invert(a),c=k.invert(c)),c<a){var e=a;a=c;c=e}if(p)if(u){var f=u[0];var h=u[1]}else f=l[0],h=l[1],p.invert&&(f=p.invert(f),h=p.invert(h)),h<f&&(e=f,f=h,h=e);return k&&p?[[a,f],[c,h]]:k?[a,c]:p&&[f,h]}k&&(a=d[0],c=d[1],p&&(a=a[0],c=c[0]),n=[a,c],k.invert&&(a=k(a),c=k(c)),c<a&&(e=a,a=c,c=e),a!=q[0]||c!=q[1])&&(q=[a,
c]);p&&(f=d[0],h=d[1],k&&(f=f[1],h=h[1]),u=[f,h],p.invert&&(f=p(f),h=p(h)),h<f&&(e=f,f=h,h=e),f!=l[0]||h!=l[1])&&(l=[f,h]);return b};b.clear=function(){b.empty()||(q=[0,0],l=[0,0],n=u=null);return b};b.empty=function(){return!!k&&q[0]==q[1]||!!p&&l[0]==l[1]};return y.rebind(b,g,"on")};var Ai={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ae=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],be=ca.format=$f.timeFormat,
mg=be.utc,ng=mg("%Y-%m-%dT%H:%M:%S.%LZ");be.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sd:ng;Sd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Sd.toString=ng.toString;ca.second=mb(function(b){return new La(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});ca.seconds=ca.second.range;ca.seconds.utc=ca.second.utc.range;ca.minute=mb(function(b){return new La(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+
6E4*Math.floor(d))},function(b){return b.getMinutes()});ca.minutes=ca.minute.range;ca.minutes.utc=ca.minute.utc.range;ca.hour=mb(function(b){var d=b.getTimezoneOffset()/60;return new La(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});ca.hours=ca.hour.range;ca.hours.utc=ca.hour.utc.range;ca.month=mb(function(b){b=ca.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});ca.months=
ca.month.range;ca.months.utc=ca.month.utc.range;var Kc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],ce=[[ca.second,1],[ca.second,5],[ca.second,15],[ca.second,30],[ca.minute,1],[ca.minute,5],[ca.minute,15],[ca.minute,30],[ca.hour,1],[ca.hour,3],[ca.hour,6],[ca.hour,12],[ca.day,1],[ca.day,2],[ca.week,1],[ca.month,1],[ca.month,3],[ca.year,1]],Bi=be.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],
["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Nb]]),di={range:function(b,d,a){return y.range(Math.ceil(b/a)*a,+d,a).map(ub)},floor:A,ceil:A};ce.year=ca.year;ca.scale=function(){return Td(y.scale.linear(),ce,Bi)};var og=ce.map(function(b){return[b[0].utc,b[1]]}),Ci=mg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],
[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Nb]]);og.year=ca.year.utc;ca.scale.utc=function(){return Td(y.scale.linear(),og,Ci)};y.text=fd(function(b){return b.responseText});y.json=function(b,d){return Kb(b,"application/json",ei,d)};y.html=function(b,
d){return Kb(b,"text/html",fi,d)};y.xml=fd(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=y,define(y)):"object"===typeof module&&module.exports?module.exports=y:this.d3=y}();
(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};"undefined"!==typeof module&&"undefined"!==typeof exports&&"undefined"==typeof d3&&(d3=require("d3"));c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,
1),f=this,k=function(){},g=function(){return f.apply(this instanceof k&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};k.prototype=this.prototype;g.prototype=new k;return g});c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,
arguments):c.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};c.render=function(a){a=a||1;c.render.active=!0;c.dispatch.render_start();var e=function(){for(var f,k,g=0;g<a&&(k=c.render.queue[g]);g++)f=k.generate(),typeof k.callback==typeof Function&&
k.callback(f);c.render.queue.splice(0,g);c.render.queue.length?setTimeout(e):(c.dispatch.render_end(),c.render.active=!1)};setTimeout(e)};c.render.active=!1;c.render.queue=[];c.addGraph=function(a,e){typeof a===typeof Function&&(a={generate:a,callback:e});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):
a()};c.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()};c.interactiveGuideline=function(){function a(z){z.each(function(D){function z(){var c=d3.mouse(this),f=c[0];c=c[1];var k=!0,l=!1;v&&(f=d3.event.offsetX,c=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(k=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0));k&&(f-=e.left,c-=e.top);if("mouseout"===d3.event.type||0>f||0>c||f>H||c>A||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||
l)v&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(t.nvPointerEventsClass))||(n.elementMouseout({mouseX:f,mouseY:c}),a.renderGuideLine(null),t.hidden(!0));else{t.hidden(!1);if("function"===typeof g.rangeBands)if(k=d3.bisect(g.range(),f)-1,g.range()[k]+g.rangeBand()>=f)k=g.domain()[d3.bisect(g.range(),f)-1];else{n.elementMouseout({mouseX:f,mouseY:c});a.renderGuideLine(null);t.hidden(!0);return}else k=
g.invert(f);n.elementMousemove({mouseX:f,mouseY:c,pointXValue:k});"dblclick"===d3.event.type&&n.elementDblclick({mouseX:f,mouseY:c,pointXValue:k});"click"===d3.event.type&&n.elementClick({mouseX:f,mouseY:c,pointXValue:k});"mousedown"===d3.event.type&&n.elementMouseDown({mouseX:f,mouseY:c,pointXValue:k});"mouseup"===d3.event.type&&n.elementMouseUp({mouseX:f,mouseY:c,pointXValue:k})}}var G=d3.select(this),H=f||960,A=k||400,M=G.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([D]);M.enter().append("g").attr("class",
" nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");l&&(l.on("touchmove",z).on("mousemove",z,!0).on("mouseout",z,!0).on("mousedown",z,!0).on("mouseup",z,!0).on("dblclick",z).on("click",z),a.guideLine=null,a.renderGuideLine=function(e){r&&(a.guideLine&&a.guideLine.attr("x1")===e||c.dom.write(function(){var a=M.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[c.utils.NaNtoZero(e)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",
function(a){return a}).attr("x2",function(a){return a}).attr("y1",A).attr("y2",0);a.exit().remove()}))})})}var e={left:0,top:0},f=null,k=null,g=d3.scale.linear(),n=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),r=!0,l=null,t=c.models.tooltip(),v=window.ActiveXObject;t.duration(0).hideDelay(0).hidden(!1);a.dispatch=n;a.tooltip=t;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.left=
"undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.height=function(c){if(!arguments.length)return k;k=c;return a};a.xScale=function(c){if(!arguments.length)return g;g=c;return a};a.showGuideLine=function(c){if(!arguments.length)return r;r=c;return a};a.svgContainer=function(c){if(!arguments.length)return l;l=c;return a};return a};c.interactiveBisect=function(a,c,f){if(!(a instanceof Array))return null;var e="function"!==typeof f?function(a){return a.x}:
f;f=d3.bisector(function(a,c){return e(a)-c}).left;f=d3.max([0,f(a,c)-1]);var g=e(a[f]);"undefined"===typeof g&&(g=f);if(g===c)return f;var n=d3.min([f+1,a.length-1]);a=e(a[n]);"undefined"===typeof a&&(a=n);return Math.abs(a-c)>=Math.abs(g-c)?f:n};c.nearestValueIndex=function(a,c,f){var e=Infinity,g=null;a.forEach(function(a,k){var l=Math.abs(c-a);null!=a&&l<=e&&l<f&&(e=l,g=k)});return g};c.models.tooltip=function(){function a(){if(E&&u(f))return c.dom.write(function(){v&&v.node()||(v=d3.select(document.body).select("#"+
e).data([1]),v.enter().append("div").attr("class","nvtooltip "+(r?r:"xy-tooltip")).attr("id",e).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0).classed("nv-pointer-events-none",!0),v.exit().remove());var a=L(f);a&&(v.node().innerHTML=a);O()}),a}var e="nvtooltip-"+Math.floor(1E5*Math.random()),f=null,k="w",g=25,n=0,r=null,l=!0,t=200,v=null,z=null,D=null,E=!0,G=100,H=!0,A=function(a,c){return a},M=function(a){return a},
B=function(a,c){return a},L=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));H&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(M(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",
function(a){return a.color});e.append("td").classed("key",!0).classed("total",function(a){return!!a.total}).html(function(a,c){return B(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return A(a.value,c)});e.filter(function(a,c){return void 0!==a.percent}).append("td").classed("percent",!0).html(function(a,c){return"("+d3.format("%")(a.percent)+")"});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",
a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},C=function(){var a={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var c=document.body.getBoundingClientRect();a.left-=c.left;a.top-=c.top}return a},u=function(a){if(a&&a.series){if(c.utils.isArray(a.series))return!0;if(c.utils.isObject(a.series))return a.series=[a.series],!0}return!1},
R=function(a){var c=v.node().offsetHeight,e=v.node().offsetWidth,f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,n;switch(k){case "e":var p=-e-g;var q=-(c/2);0>a.left+p&&(p=g);0>(n=a.top+q)&&(q-=n);(n=a.top+q+c)>l&&(q-=n-l);break;case "w":p=g;q=-(c/2);a.left+p+e>f&&(p=-e-g);0>(n=a.top+q)&&(q-=n);(n=a.top+q+c)>l&&(q-=n-l);break;case "n":p=-(e/2)-5;q=g;a.top+q+c>l&&(q=-c-g);0>(n=a.left+p)&&(p-=n);(n=a.left+p+e)>f&&(p-=n-f);break;case "s":p=-(e/2);q=-c-g;0>a.top+q&&(q=
g);0>(n=a.left+p)&&(p-=n);(n=a.left+p+e)>f&&(p-=n-f);break;case "center":p=-(e/2);q=-(c/2);break;default:q=p=0}return{left:p,top:q}},O=function(){c.dom.read(function(){var a=C(),c=R(a),e=a.left+c.left;a=a.top+c.top;if(l)v.interrupt().transition().delay(t).duration(0).style("opacity",0);else{c="translate("+Math.round(e)+"px, "+Math.round(a)+"px)";var f=d3.interpolateString("translate("+z+"px, "+D+"px)",c),g=.1>v.style("opacity");v.interrupt().transition().duration(g?0:G).styleTween("transform",function(a){return f},
"important").styleTween("-webkit-transform",function(a){return f}).style("-ms-transform",c).style("opacity",1)}z=e;D=a})};a.nvPointerEventsClass="nv-pointer-events-none";a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{duration:{get:function(){return G},set:function(a){G=a}},gravity:{get:function(){return k},set:function(a){k=a}},distance:{get:function(){return g},set:function(a){g=a}},snapDistance:{get:function(){return n},set:function(a){n=a}},classes:{get:function(){return r},
set:function(a){r=a}},enabled:{get:function(){return E},set:function(a){E=a}},hideDelay:{get:function(){return t},set:function(a){t=a}},contentGenerator:{get:function(){return L},set:function(a){L=a}},valueFormatter:{get:function(){return A},set:function(a){A=a}},headerFormatter:{get:function(){return M},set:function(a){M=a}},keyFormatter:{get:function(){return B},set:function(a){B=a}},headerEnabled:{get:function(){return H},set:function(a){H=a}},position:{get:function(){return C},set:function(a){C=
a}},chartContainer:{get:function(){return document.body},set:function(a){c.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(a){c.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(a){c.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return l},set:function(c){l!=c&&(l=!!c,a())}},data:{get:function(){return f},set:function(a){a.point&&(a.value=
a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color);f=a}},node:{get:function(){return v.node()},set:function(a){}},id:{get:function(){return e},set:function(a){}}});c.utils.initOptions(a);return a};c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=
document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};c.utils.isArray=Array.isArray;c.utils.isObject=function(a){return null!==a&&"object"===typeof a};c.utils.isFunction=function(a){return"function"===typeof a};c.utils.isDate=function(a){return"[object Date]"===toString.call(a)};c.utils.isNumber=function(a){return!isNaN(a)&&"number"===typeof a};
c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(void 0===a)return c.utils.defaultColor();if(c.utils.isArray(a)){var e=d3.scale.ordinal().range(a);return function(a,c){return a.color||e(void 0===c?a:c)}}return a};c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};
c.utils.customTheme=function(a,e,f){e=e||function(a){return a.key};f=f||d3.scale.category20().range();var k=f.length;return function(g,n){g=e(g);if(c.utils.isFunction(a[g]))return a[g]();if(void 0!==a[g])return a[g];k||(k=f.length);--k;return f[k]}};c.utils.pjax=function(a,e){var f=function(f){d3.html(f,function(f){var g=d3.select(e).node();g.parentNode.replaceChild(d3.select(f).select(e).node(),g);c.utils.pjax(a,e)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,
this.href);f(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&f(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if(c.utils.isFunction(a.style)&&c.utils.isFunction(a.text)){var e=parseInt(a.style("font-size").replace("px",""),10);a=a.text().length;return c.utils.NaNtoZero(a*e*.5)}return 0};c.utils.NaNtoZero=function(a){return!c.utils.isNumber(a)||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=
[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};c.utils.renderWatch=function(a,e){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,e);var f=void 0!==e?e:250,k=[],g=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=!0;g.renderEnd("model")})})(a);0>k.indexOf(a)&&k.push(a)});return this};this.reset=function(a){void 0!==a&&(f=a);k=[]};this.transition=
function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==f?f:250;a.__rendered=!1;0>k.indexOf(a)&&k.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var l=0;return a.transition().duration(e).each(function(){++l}).each("end",function(e,f){0===--l&&(a.__rendered=!0,g.renderEnd.apply(this,c))})};this.renderEnd=
function(){k.every(function(a){return a.__rendered})&&(k.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};c.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(e){for(var f in e){var k=c.utils.isArray(a[f]),g=c.utils.isObject(a[f]),n=c.utils.isObject(e[f]);g&&!k&&n?c.utils.deepExtend(a[f],e[f]):a[f]=e[f]}})};c.utils.state=function(){if(!(this instanceof c.utils.state))return new c.utils.state;var a={},e=function(){},f=function(){return{}},
k=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){e(a,!0)});this.getter=function(a){f=a;return this};this.setter=function(a,c){c||(c=function(){});e=function(e,f){a(e);f&&c()};return this};this.init=function(a){k=k||{};c.utils.deepExtend(k,a)};this.update=function(){k&&(e(k,!1),k=null);var c=f();if(JSON.stringify(c)===JSON.stringify(a))c=!1;else{for(var n in c)void 0===a[n]&&(a[n]={}),a[n]=c[n];c=!0}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&
d3.map(a).forEach(function(a,f){if(c.utils.isFunction(this[a]))this[a](f)}.bind(this));return this};c.utils.calcTicksX=function(a,e){for(var f=1,k=0;k<e.length;k+=1){var g=e[k]&&e[k].values?e[k].values.length:0;f=g>f?g:f}c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.calcTicksY=function(a,e){for(var f=1,k=0;k<e.length;k+=1)for(var g=e[k]&&e[k].values?e[k].values:[],n,r=0;r<
g.length;r+=1)n=g[r]&&g[r].value?g[r].value:0,f=n>f?n:f;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]||(a._options[c]=e);return a})};
c.utils.initOptions=function(a){a._overrides=a._overrides||{};var e=Object.getOwnPropertyNames(a._options||{}),f=Object.getOwnPropertyNames(a._calls||{});e=e.concat(f);for(var k in e)c.utils.initOption(a,e[k])};c.utils.inheritOptionsD3=function(a,c,f){a._d3options=f.concat(a._d3options||[]);f.unshift(c);f.unshift(a);d3.rebind.apply(this,f)};c.utils.arrayUnique=function(a){return a.sort().filter(function(c,f){return!f||c!=a[f-1]})};c.utils.symbolMap=d3.map();c.utils.symbol=function(){function a(a,
g){var k=e.call(this,a,g);a=f.call(this,a,g);return-1!==d3.svg.symbolTypes.indexOf(k)?d3.svg.symbol().type(k).size(a)():c.utils.symbolMap.get(k)(a)}var e,f=64;a.type=function(c){if(!arguments.length)return e;e=d3.functor(c);return a};a.size=function(c){if(!arguments.length)return f;f=d3.functor(c);return a};return a};c.utils.inheritOptions=function(a,e){var f=Object.getOwnPropertyNames(e._options||{}),k=Object.getOwnPropertyNames(e._calls||{}),g=e._inherited||[],n=e._d3options||[],r=f.concat(k).concat(g).concat(n);
r.unshift(e);r.unshift(a);d3.rebind.apply(this,r);a._inherited=c.utils.arrayUnique(f.concat(k).concat(g).concat(f).concat(a._inherited||[]));a._d3options=c.utils.arrayUnique(n.concat(a._d3options||[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};c.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};c.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};c.utils.availableHeight=function(a,e,f){return Math.max(0,c.utils.sanitizeHeight(a,
e)-f.top-f.bottom)};c.utils.availableWidth=function(a,e,f){return Math.max(0,c.utils.sanitizeWidth(a,e)-f.left-f.right)};c.utils.noData=function(a,e){var f=a.options();a=f.margin();f=f.noData();f=null==f?["No Data Available."]:[f];var k=c.utils.availableHeight(null,e,a),g=c.utils.availableWidth(null,e,a);g=a.left+g/2;a=a.top+k/2;e.selectAll("g").remove();e=e.selectAll(".nv-noData").data(f);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");e.attr("x",
g).attr("y",a).text(function(a){return a})};c.utils.wrapTicks=function(a,c){a.each(function(){for(var a=d3.select(this),e=a.text().split(/\s+/).reverse(),g,n=[],r=0,l=a.attr("y"),t=parseFloat(a.attr("dy")),v=a.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",t+"em");g=e.pop();)n.push(g),v.text(n.join(" ")),v.node().getComputedTextLength()>c&&(n.pop(),v.text(n.join(" ")),n=[g],v=a.append("tspan").attr("x",0).attr("y",l).attr("dy",1.1*++r+t+"em").text(g))})};c.utils.arrayEquals=function(a,
e){if(a===e)return!0;if(!a||!e||a.length!=e.length)return!1;for(var f=0,k=a.length;f<k;f++)if(a[f]instanceof Array&&e[f]instanceof Array){if(!c.arrayEquals(a[f],e[f]))return!1}else if(a[f]!=e[f])return!1;return!0};c.models.axis=function(){function a(n){L.reset();n.each(function(a){var n=d3.select(this);c.utils.initSVG(n);a=n.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");n=a.select("g");null!==E?e.ticks(E):("top"==e.orient()||"bottom"==
e.orient())&&e.ticks(Math.abs(f.range()[1]-f.range()[0])/100);n.watchTransition(L,"axis").call(e);B=B||e.scale();var u=e.tickFormat();null==u&&(u=B.tickFormat());var C=n.selectAll("text.nv-axislabel").data([r||null]);C.exit().remove();void 0!==H&&n.selectAll("g").select("text").style("font-size",H);switch(e.orient()){case "top":C.enter().append("text").attr("class","nv-axislabel");var I=0;1===f.range().length?I=D?2*f.range()[0]+f.rangeBand():0:2===f.range().length?I=D?f.range()[0]+f.range()[1]+f.rangeBand():
f.range()[1]:2<f.range().length&&(I=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));C.attr("text-anchor","middle").attr("y",0).attr("x",I/2);if(l){var w=a.selectAll("g.nv-axisMaxMin").data(f.domain());w.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");w.exit().remove();w.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-e.tickPadding()).attr("text-anchor","middle").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a});w.watchTransition(L,"min-max top").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f.range()[e])+",0)"})}break;case "bottom":w=G+36;var K=30,A=0;I=n.selectAll("g").select("text");var J="";t%360?(I.attr("transform",""),I.each(function(a,c){a=this.getBoundingClientRect();c=a.width;A=a.height;c>K&&(K=c)}),J="rotate("+t+" 0,"+(A/2+e.tickPadding())+")",w=Math.abs(Math.sin(t*Math.PI/
180)),w=(w?w*K:K)+30,I.attr("transform",J).style("text-anchor",0<t%360?"start":"end")):z?I.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"}):I.attr("transform","translate(0,0)");C.enter().append("text").attr("class","nv-axislabel");I=0;1===f.range().length?I=D?2*f.range()[0]+f.rangeBand():0:2===f.range().length?I=D?f.range()[0]+f.range()[1]+f.rangeBand():f.range()[1]:2<f.range().length&&(I=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));C.attr("text-anchor","middle").attr("y",
w).attr("x",I/2);l&&(w=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),w.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),w.exit().remove(),w.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a)+(D?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",J).style("text-anchor",t?0<t%360?"start":
"end":"middle").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),w.watchTransition(L,"min-max bottom").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(f(a)+(D?f.rangeBand()/2:0))+",0)"}));break;case "right":C.enter().append("text").attr("class","nv-axislabel");C.style("text-anchor",v?"middle":"begin").attr("transform",v?"rotate(90)":"").attr("y",v?-Math.max(k.right,g)+12-(G||0):-10).attr("x",v?d3.max(f.range())/2:e.tickPadding());l&&(w=a.selectAll("g.nv-axisMaxMin").data(f.domain()),
w.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(f(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),w.watchTransition(L,"min-max right").attr("transform",function(a,e){return"translate(0,"+
c.utils.NaNtoZero(f.range()[e])+")"}).select("text").style("opacity",1));break;case "left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",v?"middle":"end").attr("transform",v?"rotate(-90)":"").attr("y",v?-Math.max(k.left,g)+25-(G||0):-10).attr("x",v?-d3.max(f.range())/2:-e.tickPadding()),l&&(w=a.selectAll("g.nv-axisMaxMin").data(f.domain()),w.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",
0),w.exit().remove(),w.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(B(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),w.watchTransition(L,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(f.range()[e])+")"}).select("text").style("opacity",1))}C.text(function(a){return a});!l||"left"!==e.orient()&&"right"!==e.orient()||
(n.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(l&&("top"===e.orient()||"bottom"===e.orient())){var p=[];a.selectAll("g.nv-axisMaxMin").each(function(a,c){try{c?p.push(f(a)-this.getBoundingClientRect().width-
4):p.push(f(a)+this.getBoundingClientRect().width+4)}catch(ba){c?p.push(f(a)-4):p.push(f(a)+4)}});n.selectAll("g").each(function(a,c){if(f(a)<p[0]||f(a)>p[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);B=f.copy()});L.renderEnd("axis immediate");return a}var e=d3.svg.axis(),f=d3.scale.linear(),k={top:0,right:0,bottom:0,left:0},g=75,n=60,r=null,l=
!0,t=0,v=!0,z=!1,D=!1,E=null,G=0,H=void 0,A=250,M=d3.dispatch("renderEnd");e.scale(f).orient("bottom").tickFormat(function(a){return a});var B,L=c.utils.renderWatch(M,A);a.axis=e;a.dispatch=M;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return G},set:function(a){G=a}},staggerLabels:{get:function(){return z},set:function(a){z=a}},rotateLabels:{get:function(){return t},set:function(a){t=a}},rotateYLabel:{get:function(){return v},set:function(a){v=
a}},showMaxMin:{get:function(){return l},set:function(a){l=a}},axisLabel:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return n},set:function(a){n=a}},ticks:{get:function(){return E},set:function(a){E=a}},width:{get:function(){return g},set:function(a){g=a}},fontSize:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return k},set:function(a){k.top=void 0!==a.top?a.top:k.top;k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;
k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return A},set:function(a){A=a;L.reset(A)}},scale:{get:function(){return f},set:function(g){f=g;e.scale(f);D="function"===typeof f.rangeBands;c.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,e,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));c.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=
function(){function a(g){J.reset();g.each(function(a){var g=f-e.left-e.right,p=k-e.top-e.bottom;C=d3.select(this);c.utils.initSVG(C);n.domain(u||a.map(function(a,c){return l(a,c)})).rangeBands(R||[0,g],.1);g=[];if(!O){var q=[];a.forEach(function(a,c){c=t(a);var e=z(a),f=D(a),g=E(a);(a=H(a))&&a.forEach(function(a,c){q.push(A(a,c,void 0))});f&&q.push(f);c&&q.push(c);e&&q.push(e);g&&q.push(g)});g=d3.min(q);var U=d3.max(q);g=[g,U]}r.domain(O||g);r.range(N||[p,0]);S=S||r.copy().range([r(0),r(0)]);p=C.selectAll("g.nv-wrap").data([a]);
p.enter().append("g").attr("class","nvd3 nv-wrap");p.attr("transform","translate("+e.left+","+e.top+")");var x=p.selectAll(".nv-boxplot").data(function(a){return a}),T=x.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);x.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(n(l(a,c))+.05*n.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});x.watchTransition(J,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",
.75).delay(function(c,e){return e*w/a.length}).attr("transform",function(a,c){return"translate("+(n(l(a,c))+.05*n.rangeBand())+", 0)"});x.exit().remove();T.each(function(a,c){var e=d3.select(this);[D,E].forEach(function(f){void 0!==f(a)&&null!==f(a)&&(f=f===D?"low":"high",e.append("line").style("stroke",G(a)||L(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+f),e.append("line").style("stroke",G(a)||L(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+f))})});var X=function(){return null===K?.9*
n.rangeBand():Math.min(75,.9*n.rangeBand())},ra=function(){return.45*n.rangeBand()-X()/2},pa=function(){return.45*n.rangeBand()+X()/2};[D,E].forEach(function(a){var c=a===D?"low":"high",e=a===D?t:z;x.select("line.nv-boxplot-whisker.nv-boxplot-"+c).watchTransition(J,"nv-boxplot: boxplots").attr("x1",.45*n.rangeBand()).attr("y1",function(c,e){return r(a(c))}).attr("x2",.45*n.rangeBand()).attr("y2",function(a,c){return r(e(a))});x.select("line.nv-boxplot-tick.nv-boxplot-"+c).watchTransition(J,"nv-boxplot: boxplots").attr("x1",
ra).attr("y1",function(c,e){return r(a(c))}).attr("x2",pa).attr("y2",function(c,e){return r(a(c))})});[D,E].forEach(function(a){T.selectAll(".nv-boxplot-"+(a===D?"low":"high")).on("mouseover",function(c,e,f){d3.select(this).classed("hover",!0);I.elementMouseover({series:{key:a(c),color:G(c)||L(c,f)},e:d3.event})}).on("mouseout",function(c,e,f){d3.select(this).classed("hover",!1);I.elementMouseout({series:{key:a(c),color:G(c)||L(c,f)},e:d3.event})}).on("mousemove",function(a,c){I.elementMousemove({e:d3.event})})});
T.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.elementMouseover({key:l(a),value:l(a),series:[{key:"Q3",value:z(a),color:G(a)||L(a,c)},{key:"Q2",value:v(a),color:G(a)||L(a,c)},{key:"Q1",value:t(a),color:G(a)||L(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.elementMouseout({key:l(a),value:l(a),series:[{key:"Q3",value:z(a),color:G(a)||L(a,c)},{key:"Q2",value:v(a),color:G(a)||L(a,
c)},{key:"Q1",value:t(a),color:G(a)||L(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){I.elementMousemove({e:d3.event})});x.select("rect.nv-boxplot-box").watchTransition(J,"nv-boxplot: boxes").attr("y",function(a,c){return r(z(a))}).attr("width",X).attr("x",ra).attr("height",function(a,c){return Math.abs(r(z(a))-r(t(a)))||1}).style("fill",function(a,c){return G(a)||L(a,c)}).style("stroke",function(a,c){return G(a)||L(a,c)});T.append("line").attr("class","nv-boxplot-median");x.select("line.nv-boxplot-median").watchTransition(J,
"nv-boxplot: boxplots line").attr("x1",ra).attr("y1",function(a,c){return r(v(a))}).attr("x2",pa).attr("y2",function(a,c){return r(v(a))});p=x.selectAll(".nv-boxplot-outlier").data(function(a){return H(a)||[]});p.enter().append("circle").style("fill",function(a,c,e){return B(a,c,e)||L(a,e)}).style("stroke",function(a,c,e){return B(a,c,e)||L(a,e)}).style("z-index",9E3).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);I.elementMouseover({series:{key:M(a,c,e),color:B(a,c,e)||L(a,e)},
e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);I.elementMouseout({series:{key:M(a,c,e),color:B(a,c,e)||L(a,e)},e:d3.event})}).on("mousemove",function(a,c){I.elementMousemove({e:d3.event})});p.attr("class","nv-boxplot-outlier");p.watchTransition(J,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*n.rangeBand()).attr("cy",function(a,c,e){return r(A(a,c,e))}).attr("r","3");p.exit().remove();n.copy();S=r.copy()});J.renderEnd("nv-boxplot immediate");return a}var e={top:0,
right:0,bottom:0,left:0},f=960,k=500,g=Math.floor(1E4*Math.random()),n=d3.scale.ordinal(),r=d3.scale.linear(),l=function(a){return a.label},t=function(a){return a.values.Q1},v=function(a){return a.values.Q2},z=function(a){return a.values.Q3},D=function(a){return a.values.whisker_low},E=function(a){return a.values.whisker_high},G=function(a){return a.color},H=function(a){return a.values.outliers},A=function(a,c,e){return a},M=function(a,c,e){return a},B=function(a,c,e){},L=c.utils.defaultColor(),C=
null,u,R,O,N,I=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=250,K=null,S,J=c.utils.renderWatch(I,w);a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},maxBoxWidth:{get:function(){return K},set:function(a){K=a}},x:{get:function(){return l},set:function(a){l=a}},q1:{get:function(){return t},set:function(a){t=a}},q2:{get:function(){return v},
set:function(a){v=a}},q3:{get:function(){return z},set:function(a){z=a}},wl:{get:function(){return D},set:function(a){D=a}},wh:{get:function(){return E},set:function(a){E=a}},itemColor:{get:function(){return G},set:function(a){G=a}},outliers:{get:function(){return H},set:function(a){H=a}},outlierValue:{get:function(){return A},set:function(a){A=a}},outlierLabel:{get:function(){return M},set:function(a){M=a}},outlierColor:{get:function(){return B},set:function(a){B=a}},xScale:{get:function(){return n},
set:function(a){n=a}},yScale:{get:function(){return r},set:function(a){r=a}},xDomain:{get:function(){return u},set:function(a){u=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return N},set:function(a){N=a}},id:{get:function(){return g},set:function(a){g=a}},y:{get:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");return{}},set:function(a){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},
margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}},duration:{get:function(){return w},set:function(a){w=a;J.reset(w)}}});c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(l){L.reset();L.models(e);t&&L.models(f);v&&L.models(k);l.each(function(l){var u=
d3.select(this);c.utils.initSVG(u);var C=(n||parseInt(u.style("width"))||960)-g.left-g.right,N=(r||parseInt(u.style("height"))||400)-g.top-g.bottom;a.update=function(){M.beforeUpdate();u.transition().duration(B).call(a)};a.container=this;if(l&&l.length)u.selectAll(".nv-noData").remove();else return l=u.selectAll(".nv-noData").data([A]),l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",g.left+C/2).attr("y",g.top+N/2).text(function(a){return a}),
a;G=e.xScale();H=e.yScale().clamp(!0);var I=u.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([l]),w=I.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),K=w.append("defs");I=I.select("g");w.append("g").attr("class","nv-x nv-axis");w.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");w.append("g").attr("class","nv-barsWrap");I.attr("transform","translate("+g.left+","+g.top+")");z&&I.select(".nv-y.nv-axis").attr("transform","translate("+
C+",0)");e.width(C).height(N);I.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(e);K.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");I.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",G.rangeBand()*(D?2:1)).attr("height",16).attr("x",-G.rangeBand()/(D?1:2));t&&(f.scale(G).ticks(c.utils.calcTicksX(C/100,l)).tickSize(-N,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")"),I.select(".nv-x.nv-axis").call(f),
l=I.select(".nv-x.nv-axis").selectAll("g"),D&&l.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0===e%2?"5":"17")+")"}));v&&(k.scale(H).ticks(Math.floor(N/36)).tickSize(-C,0),I.select(".nv-y.nv-axis").call(k));I.select(".nv-zeroLine line").attr("x1",0).attr("x2",C).attr("y1",H(0)).attr("y2",H(0))});L.renderEnd("nv-boxplot chart immediate");return a}var e=c.models.boxPlot(),f=c.models.axis(),k=c.models.axis(),g={top:15,right:10,bottom:50,left:60},n=null,r=null,l=c.utils.getColor(),
t=!0,v=!0,z=!1,D=!1,E=c.models.tooltip(),G,H,A="No Data Available.",M=d3.dispatch("beforeUpdate","renderEnd"),B=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});k.orient(z?"right":"left").tickFormat(d3.format(",.1f"));E.duration(0);var L=c.utils.renderWatch(M,B);e.dispatch.on("elementMouseover.tooltip",function(a){E.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){E.data(a).hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){E()});a.dispatch=
M;a.boxplot=e;a.xAxis=f;a.yAxis=k;a.tooltip=E;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return r},set:function(a){r=a}},staggerLabels:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return t},set:function(a){t=a}},showYAxis:{get:function(){return v},set:function(a){v=a}},tooltipContent:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return A},set:function(a){A=
a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},duration:{get:function(){return B},set:function(a){B=a;L.reset(B);e.duration(B);f.duration(B);k.duration(B)}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a);e.color(l)}},rightAlignYAxis:{get:function(){return z},set:function(a){z=a;k.orient(a?"right":"left")}}});c.utils.inheritOptions(a,
e);c.utils.initOptions(a);return a};c.models.bullet=function(){function a(a,c){var e=a.slice();a.sort(function(a,f){a=e.indexOf(a);f=e.indexOf(f);return d3.descending(c[a],c[f])})}function e(k){k.each(function(e,k){var u=v-f.left-f.right,C=z-f.top-f.bottom;D=d3.select(this);c.utils.initSVG(D);var N=n.call(this,e,k).slice(),I=r.call(this,e,k).slice(),w=(e.markerLines?e.markerLines:[0]).slice(),K=l.call(this,e,k).slice(),S=(e.rangeLabels?e.rangeLabels:[]).slice(),J=(e.markerLabels?e.markerLabels:[]).slice(),
p=(e.markerLineLabels?e.markerLineLabels:[]).slice(),q=(e.measureLabels?e.measureLabels:[]).slice();a(S,N);a(J,I);a(p,w);a(q,K);N.sort(d3.descending);I.sort(d3.descending);w.sort(d3.descending);K.sort(d3.descending);var E=d3.scale.linear().domain(d3.extent(d3.merge([t,N]))).range(g?[u,0]:[0,u]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(E.range());this.__chart__=E;d3.min(N);d3.max(N);e=D.selectAll("g.nv-wrap.nv-bullet").data([e]);u=e.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g");
var L=e.select("g");k=0;for(var W=N.length;k<W;k++){var U="nv-range nv-range"+k;2>=k&&(U=U+" nv-range"+M[k]);u.append("rect").attr("class",U)}u.append("rect").attr("class","nv-measure");e.attr("transform","translate("+f.left+","+f.top+")");k=0;for(W=N.length;k<W;k++)U=N[k],L.select("rect.nv-range"+k).datum(U).attr("height",C).transition().duration(B).attr("width",Math.abs(E(U)-E(0))).attr("x",0>U?E(U):E(0));L.select("rect.nv-measure").style("fill",G).attr("height",C/3).attr("y",C/3).on("mouseover",
function(){H.elementMouseover({value:K[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){H.elementMousemove({value:K[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){H.elementMouseout({value:K[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(B).attr("width",0>K?E(0)-E(K[0]):E(K[0])-E(0)).attr("x",0>K?E(K):E(0));k=C/6;I=I.map(function(a,c){return{value:a,label:J[c]}});u.selectAll("path.nv-markerTriangle").data(I).enter().append("path").attr("class",
"nv-markerTriangle").attr("d","M0,"+k+"L"+k+","+-k+" "+-k+","+-k+"Z").on("mouseover",function(a){H.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[E(a.value),C/2]})}).on("mousemove",function(a){H.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});L.selectAll("path.nv-markerTriangle").data(I).transition().duration(B).attr("transform",
function(a){return"translate("+E(a.value)+","+C/2+")"});w=w.map(function(a,c){return{value:a,label:p[c]}});u.selectAll("line.nv-markerLine").data(w).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(a){return E(a.value)}).attr("y1","2").attr("x2",function(a){return E(a.value)}).attr("y2",C-2).on("mouseover",function(a){H.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[E(a.value),C/2]})}).on("mousemove",function(a){H.elementMousemove({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});L.selectAll("line.nv-markerLine").data(w).transition().duration(B).attr("x1",function(a){return E(a.value)}).attr("x2",function(a){return E(a.value)});e.selectAll(".nv-range").on("mouseover",function(a,c){H.elementMouseover({value:a,label:S[c]||A[c],color:d3.select(this).style("fill")})}).on("mousemove",function(){H.elementMousemove({value:K[0],
label:q[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a,label:S[c]||A[c],color:d3.select(this).style("fill")})})});return e}var f={top:0,right:0,bottom:0,left:0},k="left",g=!1,n=function(a){return a.ranges},r=function(a){return a.markers?a.markers:[]},l=function(a){return a.measures},t=[0],v=380,z=30,D=null,E=null,G=c.utils.getColor(["#1f77b4"]),H=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),A=["Maximum","Mean",
"Minimum"],M=["Max","Avg","Min"],B=1E3;e.dispatch=H;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{ranges:{get:function(){return n},set:function(a){n=a}},markers:{get:function(){return r},set:function(a){r=a}},measures:{get:function(){return l},set:function(a){l=a}},forceX:{get:function(){return t},set:function(a){t=a}},width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return z},set:function(a){z=a}},tickFormat:{get:function(){return E},set:function(a){E=
a}},duration:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},orient:{get:function(){return k},set:function(a){k=a;g="right"==k||"bottom"==k}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a)}}});c.utils.initOptions(e);return e};c.models.bulletChart=function(){function a(f){f.each(function(k,
B){var A=d3.select(this);c.utils.initSVG(A);var C=c.utils.availableWidth(v,A,n),u=z-n.top-n.bottom;a.update=function(){a(f)};a.container=this;if(k&&r.call(this,k,B))A.selectAll(".nv-noData").remove();else return c.utils.noData(a,A),a;var R=r.call(this,k,B).slice().sort(d3.descending),O=l.call(this,k,B).slice().sort(d3.descending);B=t.call(this,k,B).slice().sort(d3.descending);A=A.selectAll("g.nv-wrap.nv-bulletChart").data([k]);var N=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g");
k=A.select("g");N.append("g").attr("class","nv-bulletWrap");N.append("g").attr("class","nv-titles");A.attr("transform","translate("+n.left+","+n.top+")");var I=d3.scale.linear().domain([0,Math.max(R[0],O[0]||0,B[0])]).range(g?[C,0]:[0,C]),w=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(I.range());this.__chart__=I;R=N.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(z-n.top-n.bottom)/2+")");R.append("text").attr("class","nv-title").text(function(a){return a.title});
R.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});e.width(C).height(u);R=k.select(".nv-bulletWrap");d3.transition(R).call(e);var K=D||I.tickFormat(C/100);C=k.selectAll("g.nv-tick").data(I.ticks(E?E:C/50),function(a){return this.textContent||K(a)});R=C.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+w(a)+",0)"}).style("opacity",1E-6);R.append("line").attr("y1",u).attr("y2",7*u/6);R.append("text").attr("text-anchor",
"middle").attr("dy","1em").attr("y",7*u/6).text(K);R=d3.transition(C).transition().duration(e.duration()).attr("transform",function(a){return"translate("+I(a)+",0)"}).style("opacity",1);R.select("line").attr("y1",u).attr("y2",7*u/6);R.select("text").attr("y",7*u/6);d3.transition(C.exit()).transition().duration(e.duration()).attr("transform",function(a){return"translate("+I(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var e=c.models.bullet(),f=c.models.tooltip(),k="left",g=
!1,n={top:5,right:40,bottom:20,left:120},r=function(a){return a.ranges},l=function(a){return a.markers?a.markers:[]},t=function(a){return a.measures},v=null,z=55,D=null,E=null,G=null,H=d3.dispatch();f.duration(0).headerEnabled(!1);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};f.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){f()});a.bullet=e;a.dispatch=
H;a.tooltip=f;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return r},set:function(a){r=a}},markers:{get:function(){return l},set:function(a){l=a}},measures:{get:function(){return t},set:function(a){t=a}},width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return z},set:function(a){z=a}},tickFormat:{get:function(){return D},set:function(a){D=a}},ticks:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return G},
set:function(a){G=a}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},orient:{get:function(){return k},set:function(a){k=a;g="right"==k||"bottom"==k}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.candlestickBar=function(){function a(w){w.each(function(a){n=d3.select(this);var w=c.utils.availableWidth(f,n,e),J=c.utils.availableHeight(k,
n,e);c.utils.initSVG(n);var p=w/a[0].values.length*.45;r.domain(u||d3.extent(a[0].values.map(t).concat(H)));M?r.range(O||[.5*w/a[0].values.length,w*(a[0].values.length-.5)/a[0].values.length]):r.range(O||[5+p/2,w-p/2-5]);l.domain(R||[d3.min(a[0].values.map(G).concat(A)),d3.max(a[0].values.map(E).concat(A))]).range(N||[J,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-.01*r.domain()[0],r.domain()[1]+.01*r.domain()[1]]):r.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?
l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var q=a.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),C=q.append("defs");q=q.append("g");var K=a.select("g");q.append("g").attr("class","nv-ticks");a.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){I.chartClick({data:a,index:c,pos:d3.event,id:g})});C.append("clipPath").attr("id",
"nv-chart-clip-path-"+g).append("rect");a.select("#nv-chart-clip-path-"+g+" rect").attr("width",w).attr("height",J);K.attr("clip-path",B?"url(#nv-chart-clip-path-"+g+")":"");w=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});w.exit().remove();J=w.enter().append("g");w.attr("class",function(a,c,e){return(z(a,c)>D(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});J.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+
r(t(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return l(E(a,c))}).attr("x2",0).attr("y2",function(a,c){return l(G(a,c))});J.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(r(t(a,c))-p/2)+","+(l(v(a,c))-(z(a,c)>D(a,c)?l(D(a,c))-l(z(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",p).attr("height",function(a,c){var e=z(a,c);a=D(a,c);return e>a?l(a)-l(e):l(e)-l(a)});w.select(".nv-candlestick-lines").transition().attr("transform",
function(a,c){return"translate("+r(t(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return l(E(a,c))}).attr("x2",0).attr("y2",function(a,c){return l(G(a,c))});w.select(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+(r(t(a,c))-p/2)+","+(l(v(a,c))-(z(a,c)>D(a,c)?l(D(a,c))-l(z(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",p).attr("height",function(a,c){var e=z(a,c);a=D(a,c);return e>a?l(a)-l(e):l(e)-l(a)})});return a}var e={top:0,right:0,bottom:0,left:0},
f=null,k=null,g=Math.floor(1E4*Math.random()),n,r=d3.scale.linear(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},z=function(a){return a.open},D=function(a){return a.close},E=function(a){return a.high},G=function(a){return a.low},H=[],A=[],M=!1,B=!0,L=c.utils.defaultColor(),C=!1,u,R,O,N,I=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();
n.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return u},set:function(a){u=
a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return N},set:function(a){N=a}},forceX:{get:function(){return H},set:function(a){H=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return M},set:function(a){M=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return g},set:function(a){g=a}},interactive:{get:function(){return C},set:function(a){C=a}},
x:{get:function(){return t},set:function(a){t=a}},y:{get:function(){return v},set:function(a){v=a}},open:{get:function(){return z()},set:function(a){z=a}},close:{get:function(){return D()},set:function(a){D=a}},high:{get:function(){return E},set:function(a){E=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?
a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(q){W.reset();W.models(f);A&&W.models(k);M&&W.models(g);q.each(function(q){function t(){sa.data([ba]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var K=d3.select(this);c.utils.initSVG(K);K.classed("nv-chart-"+N,!0);var X=c.utils.availableWidth(E,K,v),T=c.utils.availableHeight(G,K,v);a.update=function(){0===p?K.call(a):
K.transition().duration(p).call(a)};a.container=this;I.setter(x(q),a.update).getter(U(q)).update();I.disabled=q.map(function(a){return!!a.disabled});if(!w)for(ra in w={},I)w[ra]=I[ra]instanceof Array?I[ra].slice(0):I[ra];var ra=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){ba.x=d3.event.x;ba.i=Math.round(V.invert(ba.x));t()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");I.index=ba.i;J.stateChange(I)});
if(q&&q.length&&q.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return c.utils.noData(a,K),a;R=f.xScale();O=f.yScale();if(u)f.yDomain(null);else{var W=q.filter(function(a){return!a.disabled}).map(function(a,c){a=d3.extent(a.values,f.y());-.95>a[0]&&(a[0]=-.95);return[(a[0]-a[1])/(1+a[1]),(a[1]-a[0])/(1+a[0])]});W=[d3.min(W,function(a){return a[0]}),d3.max(W,function(a){return a[1]})];f.yDomain(W)}V.domain([0,q[0].values.length-1]).range([0,X]).clamp(!0);
q=e(ba.i,q);var ma=C?"none":"all",da=K.selectAll("g.nv-wrap.nv-cumulativeLine").data([q]),fa=da.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");W=da.select("g");fa.append("g").attr("class","nv-interactive");fa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-background");fa.append("g").attr("class","nv-linesWrap").style("pointer-events",ma);fa.append("g").attr("class",
"nv-avgLinesWrap").style("pointer-events","none");fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");H?(n.width(X),W.select(".nv-legendWrap").datum(q).call(n),z||n.height()===v.top||(v.top=n.height(),T=c.utils.availableHeight(G,K,v)),W.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")")):W.select(".nv-legendWrap").selectAll("*").remove();L?(ma=[{key:"Re-scale y-axis",disabled:!u}],r.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,
right:0,bottom:5,left:20}),W.select(".nv-controlsWrap").datum(ma).attr("transform","translate(0,"+-v.top+")").call(r)):W.select(".nv-controlsWrap").selectAll("*").remove();da.attr("transform","translate("+v.left+","+v.top+")");B&&W.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");ma=q.filter(function(a){return a.tempDisabled});da.select(".tempDisabled").remove();ma.length&&da.append("text").attr("class","tempDisabled").attr("x",X/2).attr("y","-.71em").style("text-anchor","end").text(ma.map(function(a){return a.key}).join(", ")+
" values cannot be calculated for this time period.");C&&(l.width(X).height(T).margin({left:v.left,top:v.top}).svgContainer(K).xScale(R),da.select(".nv-interactive").call(l));fa.select(".nv-background").append("rect");W.select(".nv-background rect").attr("width",X).attr("height",T);f.y(function(a){return a.display.y}).width(X).height(T).color(q.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!q[c].disabled&&!q[c].tempDisabled}));da=W.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled&&
!a.tempDisabled}));da.call(f);q.forEach(function(a,c){a.seriesIndex=c});fa=q.filter(function(a){return!a.disabled&&!!S(a)});fa=W.select(".nv-avgLinesWrap").selectAll("line").data(fa,function(a){return a.key});ma=function(a){a=O(S(a));return 0>a?0:a>T?T:a};fa.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,c){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",X).attr("y1",ma).attr("y2",ma);fa.style("stroke-opacity",function(a){a=O(S(a));
return 0>a||a>T?0:1}).attr("x1",0).attr("x2",X).attr("y1",ma).attr("y2",ma);fa.exit().remove();var sa=da.selectAll(".nv-indexLine").data([ba]);sa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ra);sa.attr("transform",function(a){return"translate("+V(a.i)+",0)"}).attr("height",T);A&&(k.scale(R)._ticks(c.utils.calcTicksX(X/70,q)).tickSize(-T,0),W.select(".nv-x.nv-axis").attr("transform","translate(0,"+
O.range()[0]+")"),W.select(".nv-x.nv-axis").call(k));M&&(g.scale(O)._ticks(c.utils.calcTicksY(T/36,q)).tickSize(-X,0),W.select(".nv-y.nv-axis").call(g));W.select(".nv-background rect").on("click",function(){ba.x=d3.mouse(this)[0];ba.i=Math.round(V.invert(ba.x));I.index=ba.i;J.stateChange(I);t()});f.dispatch.on("elementClick",function(a){ba.i=a.pointIndex;ba.x=V(ba.i);I.index=ba.i;J.stateChange(I);t()});r.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;u=!c.disabled;I.rescaleY=u;J.stateChange(I);
a.update()});n.dispatch.on("stateChange",function(c){for(var e in c)I[e]=c[e];J.stateChange(I);a.update()});l.dispatch.on("elementMousemove",function(e){f.clearHighlights();var p,n,u,x=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,k){n=c.interactiveBisect(g.values,e.pointXValue,a.x());f.highlightPoint(k,n,!0);k=g.values[n];"undefined"!==typeof k&&("undefined"===typeof p&&(p=k),"undefined"===typeof u&&(u=a.xScale()(a.x()(k,n))),x.push({key:g.key,value:a.y()(k,n),
color:D(g,g.seriesIndex)}))});if(2<x.length){var r=a.yScale().invert(e.mouseY),t=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]);r=c.nearestValueIndex(x.map(function(a){return a.value}),r,t);null!==r&&(x[r].highlight=!0)}r=k.tickFormat()(a.x()(p,n),n);l.tooltip.valueFormatter(function(a,c){return g.tickFormat()(a)}).data({value:r,series:x})();l.renderGuideLine(u)});l.dispatch.on("elementMouseout",function(a){f.clearHighlights()});J.on("changeState",function(c){"undefined"!==typeof c.disabled&&
(q.forEach(function(a,e){a.disabled=c.disabled[e]}),I.disabled=c.disabled);"undefined"!==typeof c.index&&(ba.i=c.index,ba.x=V(ba.i),I.index=c.index,sa.data([ba]));"undefined"!==typeof c.rescaleY&&(u=c.rescaleY);a.update()})});W.renderEnd("cumulativeLineChart immediate");return a}function e(a,c){T||(T=f.y());return c.map(function(c,e){if(!c.values)return c;e=c.values[a];if(null==e)return c;var f=T(e,a);if(-.95>f&&!q)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display=
{y:(T(a,c)-f)/(1+f)};return a});return c})}var f=c.models.line(),k=c.models.axis(),g=c.models.axis(),n=c.models.legend(),r=c.models.legend(),l=c.interactiveGuideline(),t=c.models.tooltip(),v={top:30,right:30,bottom:50,left:60},z=null,D=c.utils.defaultColor(),E=null,G=null,H=!0,A=!0,M=!0,B=!1,L=!0,C=!1,u=!0,R,O,N=f.id(),I=c.utils.state(),w=null,K=null,S=function(a){return a.average},J=d3.dispatch("stateChange","changeState","renderEnd"),p=250,q=!1;I.index=0;I.rescaleY=u;k.orient("bottom").tickPadding(7);
g.orient(B?"right":"left");t.valueFormatter(function(a,c){return g.tickFormat()(a,c)}).headerFormatter(function(a,c){return k.tickFormat()(a,c)});r.updateState(!1);var V=d3.scale.linear(),ba={i:0,x:0},W=c.utils.renderWatch(J,p),U=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:ba.i,rescaleY:u}}},x=function(a){return function(c){void 0!==c.index&&(ba.i=c.index);void 0!==c.rescaleY&&(u=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};
f.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;t.data(c).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});var T=null;a.dispatch=J;a.lines=f;a.legend=n;a.controls=r;a.xAxis=k;a.yAxis=g;a.interactiveLayer=l;a.state=I;a.tooltip=t;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return G},set:function(a){G=
a}},rescaleY:{get:function(){return u},set:function(a){u=a}},showControls:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return H},set:function(a){H=a}},average:{get:function(){return S},set:function(a){S=a}},defaultState:{get:function(){return w},set:function(a){w=a}},noData:{get:function(){return K},set:function(a){K=a}},showXAxis:{get:function(){return A},set:function(a){A=a}},showYAxis:{get:function(){return M},set:function(a){M=a}},noErrorCheck:{get:function(){return q},
set:function(a){q=a}},margin:{get:function(){return v},set:function(a){void 0!==a.top&&(z=v.top=a.top);v.right=void 0!==a.right?a.right:v.right;v.bottom=void 0!==a.bottom?a.bottom:v.bottom;v.left=void 0!==a.left?a.left:v.left}},color:{get:function(){return D},set:function(a){D=c.utils.getColor(a);n.color(D)}},useInteractiveGuideline:{get:function(){return C},set:function(c){C=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;g.orient(a?
"right":"left")}},duration:{get:function(){return p},set:function(a){p=a;f.duration(p);k.duration(p);g.duration(p);W.reset(p)}}});c.utils.inheritOptions(a,f);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(g){O.reset();g.each(function(a){var g=f-e.left-e.right,u=k-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var I=H&&A?[]:a.map(function(a){return a.values.map(function(a,c){return{x:t(a,c),y:v(a,
c),y0:a.y0}})});r.domain(H||d3.merge(I).map(function(a){return a.x})).rangeBands(M||[0,g],.1);l.domain(A||d3.extent(d3.merge(I).map(function(a){return a.y}).concat(z)));E?l.range(B||[u-(0>l.domain()[0]?12:0),0<l.domain()[1]?12:0]):l.range(B||[u,0]);R=R||l.copy().range([l(0),l(0)]);g=n.selectAll("g.nv-wrap.nv-discretebar").data([a]);u=g.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");g.select("g");u.append("g").attr("class","nv-groups");g.attr("transform","translate("+e.left+
","+e.top+")");g=g.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});g.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);g.exit().watchTransition(O,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();g.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});g.watchTransition(O,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",
.75);g=g.selectAll("g.nv-bar").data(function(a){return a.values});g.exit().remove();u=g.enter().append("g").attr("transform",function(a,c,e){return"translate("+(r(t(a,c))+.05*r.rangeBand())+", "+l(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,
c){L.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){L.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){L.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});u.append("rect").attr("height",0).attr("width",.9*r.rangeBand()/a.length);E?(u.append("text").attr("text-anchor","middle"),g.select("text").text(function(a,
c){return G(v(a,c))}).watchTransition(O,"discreteBar: bars text").attr("x",.9*r.rangeBand()/2).attr("y",function(a,c){return 0>v(a,c)?l(v(a,c))-l(0)+12:-4})):g.selectAll("text").remove();g.attr("class",function(a,c){return 0>v(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||D(a,c)}).style("stroke",function(a,c){return a.color||D(a,c)}).select("rect").attr("class",C).watchTransition(O,"discreteBar: bars rect").attr("width",.9*r.rangeBand()/a.length);g.watchTransition(O,
"discreteBar: bars").attr("transform",function(a,c){var e=r(t(a,c))+.05*r.rangeBand();a=0>v(a,c)?l(0):1>l(0)-l(v(a,c))?l(0)-1:l(v(a,c));return"translate("+e+", "+a+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(l(v(a,c))-l(0)),1)});r.copy();R=l.copy()});O.renderEnd("discreteBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,k=500,g=Math.floor(1E4*Math.random()),n,r=d3.scale.ordinal(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},
z=[0],D=c.utils.defaultColor(),E=!1,G=d3.format(",.2f"),H,A,M,B,L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C="discreteBar",u=250,R,O=c.utils.renderWatch(L,u);a.dispatch=L;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},forceY:{get:function(){return z},set:function(a){z=a}},showValues:{get:function(){return E},
set:function(a){E=a}},x:{get:function(){return t},set:function(a){t=a}},y:{get:function(){return v},set:function(a){v=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return H},set:function(a){H=a}},yDomain:{get:function(){return A},set:function(a){A=a}},xRange:{get:function(){return M},set:function(a){M=a}},yRange:{get:function(){return B},set:function(a){B=a}},valueFormat:{get:function(){return G},set:function(a){G=
a}},id:{get:function(){return g},set:function(a){g=a}},rectClass:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return D},set:function(a){D=c.utils.getColor(a)}},duration:{get:function(){return u},set:function(a){u=a;O.reset(u)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=
function(){function a(n){N.reset();N.models(e);E&&N.models(f);G&&N.models(k);n.each(function(n){var u=d3.select(this);c.utils.initSVG(u);var w=c.utils.availableWidth(t,u,r),J=c.utils.availableHeight(v,u,r);a.update=function(){R.beforeUpdate();u.transition().duration(O).call(a)};a.container=this;if(n&&n.length&&n.filter(function(a){return a.values.length}).length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;L=e.xScale();C=e.yScale().clamp(!0);var p=u.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),
q=p.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),I=q.append("defs"),z=p.select("g");q.append("g").attr("class","nv-x nv-axis");q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");q.append("g").attr("class","nv-barsWrap");q.append("g").attr("class","nv-legendWrap");z.attr("transform","translate("+r.left+","+r.top+")");D?(g.width(w),z.select(".nv-legendWrap").datum(n).call(g),l||g.height()===r.top||(r.top=g.height(),
J=c.utils.availableHeight(v,u,r)),p.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")):z.select(".nv-legendWrap").selectAll("*").remove();H&&z.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)");e.width(w).height(J);z.select(".nv-barsWrap").datum(n.filter(function(a){return!a.disabled})).transition().call(e);I.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");z.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",L.rangeBand()*(A?2:1)).attr("height",
16).attr("x",-L.rangeBand()/(A?1:2));E&&(f.scale(L)._ticks(c.utils.calcTicksX(w/100,n)).tickSize(-J,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+(C.range()[0]+(e.showValues()&&0>C.domain()[0]?16:0))+")"),z.select(".nv-x.nv-axis").call(f),p=z.select(".nv-x.nv-axis").selectAll("g"),A&&p.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}),B&&p.selectAll(".tick text").attr("transform","rotate("+B+" 0,0)").style("text-anchor",0<B?"start":"end"),
M&&z.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand()));G&&(k.scale(C)._ticks(c.utils.calcTicksY(J/36,n)).tickSize(-w,0),z.select(".nv-y.nv-axis").call(k));z.select(".nv-zeroLine line").attr("x1",0).attr("x2",H?-w:w).attr("y1",C(0)).attr("y2",C(0))});N.renderEnd("discreteBar chart immediate");return a}var e=c.models.discreteBar(),f=c.models.axis(),k=c.models.axis(),g=c.models.legend(),n=c.models.tooltip(),r={top:15,right:10,bottom:50,left:60},l=null,t=null,v=null,z=c.utils.getColor(),
D=!1,E=!0,G=!0,H=!1,A=!1,M=!1,B=0,L,C,u=null,R=d3.dispatch("beforeUpdate","renderEnd"),O=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});k.orient(H?"right":"left").tickFormat(d3.format(",.1f"));n.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return k.tickFormat()(a,c)}).keyFormatter(function(a,c){return f.tickFormat()(a,c)});var N=c.utils.renderWatch(R,O);e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};
n.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){n.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){n()});a.dispatch=R;a.discretebar=e;a.legend=g;a.xAxis=f;a.yAxis=k;a.tooltip=n;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return v},set:function(a){v=a}},showLegend:{get:function(){return D},set:function(a){D=a}},staggerLabels:{get:function(){return A},set:function(a){A=
a}},rotateLabels:{get:function(){return B},set:function(a){B=a}},wrapLabels:{get:function(){return M},set:function(a){M=!!a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return r},set:function(a){void 0!==a.top&&(l=r.top=a.top);r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},
duration:{get:function(){return O},set:function(a){O=a;N.reset(O);e.duration(O);f.duration(O);k.duration(O)}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a);e.color(z);g.color(z)}},rightAlignYAxis:{get:function(){return H},set:function(a){H=a;k.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.distribution=function(){function a(f){D.reset();f.each(function(a){var f="x"==g?"y":"x",t=d3.select(this);c.utils.initSVG(t);z=z||l;a=
t.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");t=a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");a=t.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return r(a,c)});t=a.selectAll("line.nv-dist"+g).data(function(a){return a.values});t.enter().append("line").attr(g+"1",function(a,
c){return z(n(a,c))}).attr(g+"2",function(a,c){return z(n(a,c))});D.transition(a.exit().selectAll("line.nv-dist"+g),"dist exit").attr(g+"1",function(a,c){return l(n(a,c))}).attr(g+"2",function(a,c){return l(n(a,c))}).style("stroke-opacity",0).remove();t.attr("class",function(a,c){return"nv-dist"+g+" nv-dist"+g+"-"+c}).attr(f+"1",0).attr(f+"2",k);D.transition(t,"dist").attr(g+"1",function(a,c){return l(n(a,c))}).attr(g+"2",function(a,c){return l(n(a,c))});z=l.copy()});D.renderEnd("distribution immediate");
return a}var e={top:0,right:0,bottom:0,left:0},f=400,k=8,g="x",n=function(a){return a[g]},r=c.utils.defaultColor(),l=d3.scale.linear(),t=250,v=d3.dispatch("renderEnd"),z,D=c.utils.renderWatch(v,t);a.options=c.utils.optionsFunc.bind(a);a.dispatch=v;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.right="undefined"!=typeof c.right?c.right:e.right;e.bottom="undefined"!=typeof c.bottom?c.bottom:e.bottom;e.left="undefined"!=typeof c.left?c.left:e.left;return a};
a.width=function(c){if(!arguments.length)return f;f=c;return a};a.axis=function(c){if(!arguments.length)return g;g=c;return a};a.size=function(c){if(!arguments.length)return k;k=c;return a};a.getData=function(c){if(!arguments.length)return n;n=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return l;l=c;return a};a.color=function(e){if(!arguments.length)return r;r=c.utils.getColor(e);return a};a.duration=function(c){if(!arguments.length)return t;t=c;D.reset(t);return a};return a};
c.models.focus=function(a){function e(C){L.reset();L.models(a);v&&L.models(f);z&&L.models(k);C.each(function(u){function C(){g.empty()||g.extent(H);p.data([g.empty()?E.domain():H]).each(function(a,c){c=E(a[0])-E.range()[0];var e=I-E(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c);d3.select(this).select(".right").attr("x",E(a[1])).attr("width",0>e?0:e)})}function O(a){H=g.empty()?null:g.extent();var c=g.empty()?E.domain():g.extent();M.brush({extent:c,brush:g});C();if(a)M.onBrush(c)}var N=
d3.select(this);c.utils.initSVG(N);var I=c.utils.availableWidth(l,N,n),w=t-n.top-n.bottom;e.update=function(){0===A?N.call(e):N.transition().duration(A).call(e)};e.container=this;E=a.xScale();G=a.yScale();var K=N.selectAll("g.nv-focus").data([u]),S=K.enter().append("g").attr("class","nvd3 nv-focus").append("g"),J=K.select("g");K.attr("transform","translate("+n.left+","+n.top+")");S.append("g").attr("class","nv-background").append("rect");S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class",
"nv-y nv-axis");S.append("g").attr("class","nv-contentWrap");S.append("g").attr("class","nv-brushBackground");S.append("g").attr("class","nv-x nv-brush");D&&J.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)");J.select(".nv-background rect").attr("width",I).attr("height",w);a.width(I).height(w).color(u.map(function(a,c){return a.color||r(a,c)}).filter(function(a,c){return!u[c].disabled}));K=J.select(".nv-contentWrap").datum(u.filter(function(a){return!a.disabled}));d3.transition(K).call(a);
g.x(E).on("brush",function(){O(B)});g.on("brushend",function(){if(!B)M.onBrush(g.empty()?E.domain():g.extent())});H&&g.extent(H);var p=J.select(".nv-brushBackground").selectAll("g").data([H||g.extent()]);K=p.enter().append("g");K.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",w);K.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",w);K=J.select(".nv-x.nv-brush").call(g);K.selectAll("rect").attr("height",w);K.selectAll(".resize").append("path").attr("d",
function(a){var c=(a=+("e"==a))?1:-1,e=w/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});O(!0);J.select(".nv-background rect").attr("width",I).attr("height",w);v&&(f.scale(E)._ticks(c.utils.calcTicksX(I/100,u)).tickSize(-w,0),J.select(".nv-x.nv-axis").attr("transform","translate(0,"+G.range()[0]+")"),d3.transition(J.select(".nv-x.nv-axis")).call(f));z&&(k.scale(G)._ticks(c.utils.calcTicksY(w/
36,u)).tickSize(-I,0),d3.transition(J.select(".nv-y.nv-axis")).call(k));J.select(".nv-x.nv-axis").attr("transform","translate(0,"+G.range()[0]+")")});L.renderEnd("focus immediate");return e}a=a||c.models.line();var f=c.models.axis(),k=c.models.axis(),g=d3.svg.brush(),n={top:10,right:0,bottom:30,left:0},r=c.utils.defaultColor(),l=null,t=70,v=!0,z=!1,D=!1,E,G,H=null,A=250,M=d3.dispatch("brush","onBrush","renderEnd"),B=!0;a.interactive(!1);a.pointActive(function(a){return!1});var L=c.utils.renderWatch(M,
A);e.dispatch=M;e.content=a;e.brush=g;e.xAxis=f;e.yAxis=k;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return t},set:function(a){t=a}},showXAxis:{get:function(){return v},set:function(a){v=a}},showYAxis:{get:function(){return z},set:function(a){z=a}},brushExtent:{get:function(){return H},set:function(a){H=a}},syncBrushing:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return n},
set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return A},set:function(c){A=c;L.reset(A);a.duration(A);f.duration(A);k.duration(A)}},color:{get:function(){return r},set:function(e){r=c.utils.getColor(e);a.color(r)}},interpolate:{get:function(){return a.interpolate()},set:function(c){a.interpolate(c)}},xTickFormat:{get:function(){return f.tickFormat()},
set:function(a){f.tickFormat(a)}},yTickFormat:{get:function(){return k.tickFormat()},set:function(a){k.tickFormat(a)}},x:{get:function(){return a.x()},set:function(c){a.x(c)}},y:{get:function(){return a.y()},set:function(c){a.y(c)}},rightAlignYAxis:{get:function(){return D},set:function(a){D=a;k.orient(D?"right":"left")}}});c.utils.inheritOptions(e,a);c.utils.initOptions(e);return e};c.models.forceDirectedGraph=function(){function a(n){C.reset();n.each(function(n){g=d3.select(this);c.utils.initSVG(g);
var u=c.utils.availableWidth(f,g,e),t=c.utils.availableHeight(k,g,e);g.attr("width",u).attr("height",t);if(n&&n.links&&n.nodes)g.selectAll(".nv-noData").remove();else return c.utils.noData(a,g),a;g.selectAll("*").remove();var C=new Set;n.nodes.forEach(function(a){Object.keys(a).forEach(function(a){C.add(a)})});u=d3.layout.force().nodes(n.nodes).links(n.links).size([u,t]).linkStrength(v).friction(z).linkDistance(D).charge(E).gravity(G).theta(H).alpha(A).start();var w=g.selectAll(".link").data(n.links).enter().append("line").attr("class",
"nv-force-link").style("stroke-width",function(a){return Math.sqrt(a.value)}),K=g.selectAll(".node").data(n.nodes).enter().append("g").attr("class","nv-force-node").call(u.drag);K.append("circle").attr("r",M).style("fill",function(a){return r(a)}).on("mouseover",function(a){g.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.py);g.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.px);var c=r(a);a.series=[];C.forEach(function(e){a.series.push({color:c,
key:e,value:a[e]})});l.data(a).hidden(!1)}).on("mouseout",function(a){l.hidden(!0)});l.headerFormatter(function(a){return"Node"});L(w);B(K);u.on("tick",function(){w.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y});K.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"})})});return a}var e={top:2,right:0,bottom:2,left:0},f=400,k=32,g=null,n=d3.dispatch("renderEnd"),r=c.utils.getColor(["#000"]),
l=c.models.tooltip(),t=null,v=.1,z=.9,D=30,E=-120,G=.1,H=.8,A=.1,M=5,B=function(a){},L=function(a){},C=c.utils.renderWatch(n);a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},linkStrength:{get:function(){return v},set:function(a){v=a}},friction:{get:function(){return z},set:function(a){z=a}},linkDist:{get:function(){return D},set:function(a){D=a}},charge:{get:function(){return E},
set:function(a){E=a}},gravity:{get:function(){return G},set:function(a){G=a}},theta:{get:function(){return H},set:function(a){H=a}},alpha:{get:function(){return A},set:function(a){A=a}},radius:{get:function(){return M},set:function(a){M=a}},x:{get:function(){return getX},set:function(a){getX=d3.functor(a)}},y:{get:function(){return getY},set:function(a){getY=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}},noData:{get:function(){return t},set:function(a){t=a}},nodeExtras:{get:function(){return B},set:function(a){B=a}},linkExtras:{get:function(){return L},set:function(a){L=a}}});a.dispatch=n;a.tooltip=l;c.utils.initOptions(a);return a};c.models.furiousLegend=function(){function a(M){function B(a,c){if("furious"!=A)return"#000";if(G)return a.disengaged?r(a,
c):"#fff";if(!G)return a.disabled?r(a,c):"#fff"}function L(a,c){return G&&"furious"==A?a.disengaged?"#fff":r(a,c):a.disabled?"#fff":r(a,c)}M.each(function(a){var u=f-e.left-e.right,C=d3.select(this);c.utils.initSVG(C);C=C.selectAll("g.nv-legend").data([a]);C.enter().append("g").attr("class","nvd3 nv-legend").append("g");a=C.select("g");C.attr("transform","translate("+e.left+","+e.top+")");var O=a.selectAll(".nv-series").data(function(a){return"furious"!=A?a:a.filter(function(a){return G?!0:!a.disengaged})});
C=O.enter().append("g").attr("class","nv-series");if("classic"==A){C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var N=O.select("circle")}else"furious"==A&&(C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),N=O.select("rect"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),O.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",B(a,c))}));C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var I=O.select("text.nv-legend-text");O.on("mouseover",function(a,c){H.legendMouseover(a,c)}).on("mouseout",function(a,c){H.legendMouseout(a,c)}).on("click",function(a,c){H.legendClick(a,c);c=O.data();D&&("classic"==A?E?(c.forEach(function(a){a.disabled=!0}),
a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1})):"furious"==A&&(G?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):G||(a.disabled=!a.disabled,a.userDisabled=a.disabled,c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1}))),H.stateChange({disabled:c.map(function(a){return!!a.disabled}),
disengaged:c.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){"furious"==A&&G||(H.legendDblclick(a,c),D&&(c=O.data(),c.forEach(function(a){a.disabled=!0;"furious"==A&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==A&&(a.userDisabled=a.disabled),H.stateChange({disabled:c.map(function(a){return!!a.disabled})})))});O.classed("nv-disabled",function(a){return a.userDisabled});O.exit().remove();I.attr("fill",B).text(function(a){return n(g(a))});switch(A){case "furious":var w=
23;break;case "classic":w=20}if(t){var K=[];O.each(function(a,e){n(g(a))&&n(g(a)).length>l?(e=n(g(a)).substring(0,l),e=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(n(g(a)))):e=d3.select(this).select("text");try{var f=e.node().getComputedTextLength();if(0>=f)throw Error();}catch(ra){f=c.utils.calcApproxTextWidth(e)}K.push(f+v)});var M=0,J=0;for(C=[];J<u&&M<K.length;)C[M]=K[M],J+=K[M++];for(0===M&&(M=1);J>u&&1<M;){C=[];M--;for(J=0;J<K.length;J++)K[J]>(C[J%M]||
0)&&(C[J%M]=K[J]);J=C.reduce(function(a,c,e,f){return a+c})}for(var p=[],q=u=0;u<M;u++)p[u]=q,q+=C[u];O.attr("transform",function(a,c){return"translate("+p[c%M]+","+(5+Math.floor(c/M)*w)+")"});z?a.attr("transform","translate("+(f-e.right-J)+","+e.top+")"):a.attr("transform","translate(0,"+e.top+")");k=e.top+e.bottom+Math.ceil(K.length/M)*w}else{var V=5,ba=5,W=0,U;O.attr("transform",function(a,c){a=d3.select(this).select("text").node().getComputedTextLength()+v;U=ba;f<e.left+e.right+U+a&&(ba=U=5,V+=
w);ba+=a;ba>W&&(W=ba);return"translate("+U+","+V+")"});a.attr("transform","translate("+(f-e.right-W)+","+e.top+")");k=e.top+e.bottom+V+15}"furious"==A&&N.attr("width",function(a,c){return I[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);N.style("fill",L).style("stroke",function(a,c){return a.color||r(a,c)})});return a}var e={top:5,right:0,bottom:5,left:0},f=400,k=20,g=function(a){return a.key},n=function(a){return a},r=c.utils.getColor(),l=20,t=!0,v=28,z=!0,D=!0,E=
!1,G=!1,H=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),A="classic";a.dispatch=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},key:{get:function(){return g},set:function(a){g=a}},keyFormatter:{get:function(){return n},set:function(a){n=a}},align:{get:function(){return t},set:function(a){t=a}},rightAlign:{get:function(){return z},
set:function(a){z=a}},maxKeyLength:{get:function(){return l},set:function(a){l=a}},padding:{get:function(){return v},set:function(a){v=a}},updateState:{get:function(){return D},set:function(a){D=a}},radioButtonMode:{get:function(){return E},set:function(a){E=a}},expanded:{get:function(){return G},set:function(a){G=a}},vers:{get:function(){return A},set:function(a){A=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(O){O.each(function(a){R.reset();n=d3.select(this);var I=c.utils.availableWidth(f,n,e),w=c.utils.availableHeight(k,n,e);c.utils.initSVG(n);r.domain(A||d3.extent(a[0].values.map(t).concat(z)));E?r.range(B||[.5*I/a[0].values.length,I*(a[0].values.length-.5)/a[0].values.length]):
r.range(B||[0,I]);l.domain(M||d3.extent(a[0].values.map(v).concat(D))).range(L||[w,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-.01*r.domain()[0],r.domain()[1]+.01*r.domain()[1]]):r.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var K=n.selectAll("g.nv-wrap.nv-historicalBar-"+g).data([a[0].values]),O=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
g),J=O.append("defs");O=O.append("g");var p=K.select("g");O.append("g").attr("class","nv-bars");K.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){C.chartClick({data:a,index:c,pos:d3.event,id:g})});J.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect");K.select("#nv-chart-clip-path-"+g+" rect").attr("width",I).attr("height",w);p.attr("clip-path",G?"url(#nv-chart-clip-path-"+g+")":"");w=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},
function(a,c){return t(a,c)});w.exit().remove();w.enter().append("rect").attr("x",0).attr("y",function(a,e){return c.utils.NaNtoZero(l(Math.max(0,v(a,e))))}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.abs(l(v(a,e))-l(0)))}).attr("transform",function(c,e){return"translate("+(r(t(c,e))-I/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){u&&(d3.select(this).classed("hover",!0),C.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,
c){u&&(d3.select(this).classed("hover",!1),C.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){u&&C.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){u&&(C.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(a,c){u&&(C.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});
w.attr("fill",function(a,c){return H(a,c)}).attr("class",function(a,c,e){return(0>v(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(R,"bars").attr("transform",function(c,e){return"translate("+(r(t(c,e))-I/a[0].values.length*.45)+",0)"}).attr("width",I/a[0].values.length*.9);w.watchTransition(R,"bars").attr("y",function(a,e){a=0>v(a,e)?l(0):1>l(0)-l(v(a,e))?l(0)-1:l(v(a,e));return c.utils.NaNtoZero(a)}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.max(Math.abs(l(v(a,
e))-l(0)),1))})});R.renderEnd("historicalBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=null,k=null,g=Math.floor(1E4*Math.random()),n=null,r=d3.scale.linear(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},z=[],D=[0],E=!1,G=!0,H=c.utils.defaultColor(),A,M,B,L,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),u=!0,R=c.utils.renderWatch(C,0);a.highlightPoint=function(a,c){n.select(".nv-bars .nv-bar-0-"+
a).classed("hover",c)};a.clearHighlights=function(){n.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=C;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},forceX:{get:function(){return z},set:function(a){z=a}},forceY:{get:function(){return D},set:function(a){D=a}},padData:{get:function(){return E},set:function(a){E=a}},x:{get:function(){return t},set:function(a){t=
a}},y:{get:function(){return v},set:function(a){v=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return A},set:function(a){A=a}},yDomain:{get:function(){return M},set:function(a){M=a}},xRange:{get:function(){return B},set:function(a){B=a}},yRange:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return g},set:function(a){g=a}},interactive:{get:function(){return u},
set:function(a){u=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBarChart=function(a){function e(a){a.each(function(l){w.reset();w.models(f);H&&w.models(k);A&&w.models(g);var J=d3.select(this);c.utils.initSVG(J);
var p=c.utils.availableWidth(D,J,t),q=c.utils.availableHeight(E,J,t);e.update=function(){J.transition().duration(I).call(e)};e.container=this;u.disabled=l.map(function(a){return!!a.disabled});if(!R)for(O in R={},u)R[O]=u[O]instanceof Array?u[O].slice(0):u[O];if(l&&l.length&&l.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return c.utils.noData(e,J),e;L=f.xScale();C=f.yScale();var K=J.selectAll("g.nv-wrap.nv-historicalBarChart").data([l]);var O=K.enter().append("g").attr("class",
"nvd3 nv-wrap nv-historicalBarChart").append("g");var S=K.select("g");O.append("g").attr("class","nv-x nv-axis");O.append("g").attr("class","nv-y nv-axis");O.append("g").attr("class","nv-barsWrap");O.append("g").attr("class","nv-legendWrap");O.append("g").attr("class","nv-interactive");G?(n.width(p),S.select(".nv-legendWrap").datum(l).call(n),v||n.height()===t.top||(t.top=n.height(),q=c.utils.availableHeight(E,J,t)),K.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")")):S.select(".nv-legendWrap").selectAll("*").remove();
K.attr("transform","translate("+t.left+","+t.top+")");M&&S.select(".nv-y.nv-axis").attr("transform","translate("+p+",0)");B&&(r.width(p).height(q).margin({left:t.left,top:t.top}).svgContainer(J).xScale(L),K.select(".nv-interactive").call(r));f.width(p).height(q).color(l.map(function(a,c){return a.color||z(a,c)}).filter(function(a,c){return!l[c].disabled}));S.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(f);H&&(k.scale(L)._ticks(c.utils.calcTicksX(p/100,l)).tickSize(-q,
0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")"),S.select(".nv-x.nv-axis").transition().call(k));A&&(g.scale(C)._ticks(c.utils.calcTicksY(q/36,l)).tickSize(-p,0),S.select(".nv-y.nv-axis").transition().call(g));r.dispatch.on("elementMousemove",function(a){f.clearHighlights();var p,q,n,u=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,k){q=c.interactiveBisect(g.values,a.pointXValue,e.x());f.highlightPoint(q,!0);k=g.values[q];void 0!==k&&
(void 0===p&&(p=k),void 0===n&&(n=e.xScale()(e.x()(k,q))),u.push({key:g.key,value:e.y()(k,q),color:z(g,g.seriesIndex),data:g.values[q]}))});var t=k.tickFormat()(e.x()(p,q));r.tooltip.valueFormatter(function(a,c){return g.tickFormat()(a)}).data({value:t,index:q,series:u})();r.renderGuideLine(n)});r.dispatch.on("elementMouseout",function(a){N.tooltipHide();f.clearHighlights()});n.dispatch.on("legendClick",function(c,f){c.disabled=!c.disabled;l.filter(function(a){return!a.disabled}).length||l.map(function(a){a.disabled=
!1;K.selectAll(".nv-series").classed("disabled",!1);return a});u.disabled=l.map(function(a){return!!a.disabled});N.stateChange(u);a.transition().call(e)});n.dispatch.on("legendDblclick",function(a){l.forEach(function(a){a.disabled=!0});a.disabled=!1;u.disabled=l.map(function(a){return!!a.disabled});N.stateChange(u);e.update()});N.on("changeState",function(a){"undefined"!==typeof a.disabled&&(l.forEach(function(c,e){c.disabled=a.disabled[e]}),u.disabled=a.disabled);e.update()})});w.renderEnd("historicalBarChart immediate");
return e}var f=a||c.models.historicalBar(),k=c.models.axis(),g=c.models.axis(),n=c.models.legend(),r=c.interactiveGuideline(),l=c.models.tooltip(),t={top:30,right:90,bottom:50,left:90},v=null,z=c.utils.defaultColor(),D=null,E=null,G=!1,H=!0,A=!0,M=!1,B=!1,L,C,u={},R=null,O=null,N=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),I=250;k.orient("bottom").tickPadding(7);g.orient(M?"right":"left");l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return g.tickFormat()(a,c)}).headerFormatter(function(a,
c){return k.tickFormat()(a,c)});var w=c.utils.renderWatch(N,0);f.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:e.x()(a.data),value:e.y()(a.data),color:a.color};l.data(a).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});f.dispatch.on("elementMousemove.tooltip",function(a){l()});e.dispatch=N;e.bars=f;e.legend=n;e.xAxis=k;e.yAxis=g;e.interactiveLayer=r;e.tooltip=l;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{width:{get:function(){return D},
set:function(a){D=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return R},set:function(a){R=a}},noData:{get:function(){return O},set:function(a){O=a}},margin:{get:function(){return t},set:function(a){void 0!==a.top&&(v=t.top=a.top);t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==
a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a);n.color(z);f.color(z)}},duration:{get:function(){return I},set:function(a){I=a;w.reset(I);g.duration(I);k.duration(I)}},rightAlignYAxis:{get:function(){return M},set:function(a){M=a;g.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return B},set:function(a){B=a;!0===a&&e.interactive(!1)}}});c.utils.inheritOptions(e,f);c.utils.initOptions(e);return e};
c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+
a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+
a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(M){function B(a,c){if("furious"!=A)return"#000";if(G)return a.disengaged?"#000":"#fff";if(!G)return a.color||(a.color=r(a,c)),a.disabled?a.color:"#fff"}function L(a,c){return G&&"furious"==A?a.disengaged?"#eee":a.color||r(a,c):a.color||r(a,c)}function C(a,c){return G&&"furious"==A?1:a.disabled?0:1}M.each(function(a){var u=f-e.left-e.right,
r=d3.select(this);c.utils.initSVG(r);var N=r.selectAll("g.nv-legend").data([a]);a=N.enter().append("g").attr("class","nvd3 nv-legend").append("g");r=N.select("g");z?N.attr("transform","translate("+-e.right+","+e.top+")"):N.attr("transform","translate("+e.left+","+e.top+")");var I=r.selectAll(".nv-series").data(function(a){return"furious"!=A?a:a.filter(function(a){return G?!0:!a.disengaged})});N=I.enter().append("g").attr("class","nv-series");switch(A){case "furious":var w=23;break;case "classic":w=
20}if("classic"==A){N.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var K=I.select(".nv-legend-symbol")}else"furious"==A&&(N.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),K=I.select(".nv-legend-symbol"),N.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),I.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",B(a,c))}));N.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var M=I.select("text.nv-legend-text");I.on("mouseover",function(a,c){H.legendMouseover(a,c)}).on("mouseout",function(a,c){H.legendMouseout(a,c)}).on("click",function(a,c){H.legendClick(a,c);c=I.data();D&&("classic"==A?E?(c.forEach(function(a){a.disabled=!0}),
a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1})):"furious"==A&&(G?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):G||(a.disabled=!a.disabled,a.userDisabled=a.disabled,c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1}))),H.stateChange({disabled:c.map(function(a){return!!a.disabled}),
disengaged:c.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){"furious"==A&&G||(H.legendDblclick(a,c),D&&(c=I.data(),c.forEach(function(a){a.disabled=!0;"furious"==A&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==A&&(a.userDisabled=a.disabled),H.stateChange({disabled:c.map(function(a){return!!a.disabled})})))});I.classed("nv-disabled",function(a){return a.userDisabled});I.exit().remove();M.attr("fill",B).text(function(a){return n(g(a))});var J=0;if(t){var p=[];I.each(function(a,
e){n(g(a))&&n(g(a)).length>l?(e=n(g(a)).substring(0,l),e=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(n(g(a)))):e=d3.select(this).select("text");try{var f=e.node().getComputedTextLength();if(0>=f)throw Error();}catch(Y){f=c.utils.calcApproxTextWidth(e)}p.push(f+v)});var q=0;N=[];for(J=0;J<u&&q<p.length;)N[q]=p[q],J+=p[q++];for(0===q&&(q=1);J>u&&1<q;){N=[];q--;for(var V=0;V<p.length;V++)p[V]>(N[V%q]||0)&&(N[V%q]=p[V]);J=N.reduce(function(a,c,e,f){return a+c})}var ba=
[];for(V=u=0;u<q;u++)ba[u]=V,V+=N[u];I.attr("transform",function(a,c){return"translate("+ba[c%q]+","+(5+Math.floor(c/q)*w)+")"});z?r.attr("transform","translate("+(f-e.right-J)+","+e.top+")"):r.attr("transform","translate(0,"+e.top+")");k=e.top+e.bottom+Math.ceil(p.length/q)*w}else{var W=5,U=5,x=0,T;I.attr("transform",function(a,c){a=d3.select(this).select("text").node().getComputedTextLength()+v;T=U;f<e.left+e.right+T+a&&(U=T=5,W+=w);U+=a;U>x&&(x=U);J<T+x&&(J=T+x);return"translate("+T+","+W+")"});
r.attr("transform","translate("+(f-e.right-x)+","+e.top+")");k=e.top+e.bottom+W+15}"furious"==A&&(K.attr("width",function(a,c){return M[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),r.select(".nv-legend-bg").transition().duration(300).attr("x",-w).attr("width",J+w-12).attr("height",k+10).attr("y",-e.top-10).attr("opacity",G?1:0));K.style("fill",L).style("fill-opacity",
C).style("stroke",L)});return a}var e={top:5,right:0,bottom:5,left:0},f=400,k=20,g=function(a){return a.key},n=function(a){return a},r=c.utils.getColor(),l=20,t=!0,v=32,z=!0,D=!0,E=!1,G=!1,H=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),A="classic";a.dispatch=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},key:{get:function(){return g},
set:function(a){g=a}},keyFormatter:{get:function(){return n},set:function(a){n=a}},align:{get:function(){return t},set:function(a){t=a}},maxKeyLength:{get:function(){return l},set:function(a){l=a}},rightAlign:{get:function(){return z},set:function(a){z=a}},padding:{get:function(){return v},set:function(a){v=a}},updateState:{get:function(){return D},set:function(a){D=a}},radioButtonMode:{get:function(){return E},set:function(a){E=a}},expanded:{get:function(){return G},set:function(a){G=a}},vers:{get:function(){return A},
set:function(a){A=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.line=function(){function a(u){C.reset();C.models(e);u.each(function(a){n=d3.select(this);var u=c.utils.availableWidth(k,n,f),A=c.utils.availableHeight(g,n,f);
c.utils.initSVG(n);E=e.xScale();G=e.yScale();B=B||E;L=L||G;a=n.selectAll("g.nv-wrap.nv-line").data([a]);var I=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),w=I.append("defs"),K=I.append("g");I=a.select("g");K.append("g").attr("class","nv-groups");K.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+f.left+","+f.top+")");e.width(u).height(A);K=a.select(".nv-scatterWrap");K.call(e);w.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");a.select("#nv-edge-clip-"+
e.id()+" rect").attr("width",u).attr("height",0<A?A:0);I.attr("clip-path",D?"url(#nv-edge-clip-"+e.id()+")":"");K.attr("clip-path",D?"url(#nv-edge-clip-"+e.id()+")":"");u=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});u.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);u.exit().remove();u.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return r(a,c)}).style("stroke",function(a,c){return r(a,c)});u.watchTransition(C,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});A=u.selectAll("path.nv-area").data(function(a){return z(a)?[a]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(H).defined(v).x(function(a,e){return c.utils.NaNtoZero(B(l(a,e)))}).y0(function(a,
e){return c.utils.NaNtoZero(L(t(a,e)))}).y1(function(a,c){return L(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});u.exit().selectAll("path.nv-area").remove();A.watchTransition(C,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(H).defined(v).x(function(a,e){return c.utils.NaNtoZero(E(l(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(G(t(a,e)))}).y1(function(a,c){return G(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,
[a.values])});u=u.selectAll("path.nv-line").data(function(a){return[a.values]});u.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(H).defined(v).x(function(a,e){return c.utils.NaNtoZero(B(l(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(L(t(a,e)))}));u.watchTransition(C,"line: linePaths").attr("d",d3.svg.line().interpolate(H).defined(v).x(function(a,e){return c.utils.NaNtoZero(E(l(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(G(t(a,e)))}));B=E.copy();L=G.copy()});
C.renderEnd("line immediate");return a}var e=c.models.scatter(),f={top:0,right:0,bottom:0,left:0},k=960,g=500,n=null,r=c.utils.defaultColor(),l=function(a){return a.x},t=function(a){return a.y},v=function(a,c){return!isNaN(t(a,c))&&null!==t(a,c)},z=function(a){return a.area},D=!1,E,G,H="linear",A=250,M=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var B,L,C=c.utils.renderWatch(M,A);a.dispatch=M;a.scatter=e;e.dispatch.on("elementClick",
function(){M.elementClick.apply(this,arguments)});e.dispatch.on("elementMouseover",function(){M.elementMouseover.apply(this,arguments)});e.dispatch.on("elementMouseout",function(){M.elementMouseout.apply(this,arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return g},set:function(a){g=a}},defined:{get:function(){return v},set:function(a){v=a}},interpolate:{get:function(){return H},set:function(a){H=
a}},clipEdge:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},duration:{get:function(){return A},set:function(a){A=a;C.reset(A);e.duration(A)}},isArea:{get:function(){return z},set:function(a){z=d3.functor(a)}},x:{get:function(){return l},set:function(a){l=a;e.x(a)}},y:{get:function(){return t},
set:function(a){t=a;e.y(a)}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a);e.color(r)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(q){S.reset();S.models(e);A&&S.models(f);M&&S.models(k);q.each(function(q){function r(){A&&Y.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(f)}function I(){M&&Y.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(k)}function U(a){Y.select(".nv-focus .nv-linesWrap").datum(q.filter(function(a){return!a.disabled}).map(function(c,
f){return{key:c.key,area:c.area,classed:c.classed,values:c.values.filter(function(c,f){return e.x()(c,f)>=a[0]&&e.x()(c,f)<=a[1]}),disableTooltip:c.disableTooltip}})).transition().duration(K).call(e);r();I()}var x=d3.select(this);c.utils.initSVG(x);var T=c.utils.availableWidth(D,x,t),X=c.utils.availableHeight(E,x,t)-(R?l.height():0);a.update=function(){0===K?x.call(a):x.transition().duration(K).call(a)};a.container=this;O.setter(p(q),a.update).getter(J(q)).update();O.disabled=q.map(function(a){return!!a.disabled});
if(!N)for(V in N={},O)N[V]=O[V]instanceof Array?O[V].slice(0):O[V];if(q&&q.length&&q.filter(function(a){return a.values.length}).length)x.selectAll(".nv-noData").remove();else return c.utils.noData(a,x),a;l.dispatch.on("onBrush",function(a){U(a)});C=e.xScale();u=e.yScale();var V=x.selectAll("g.nv-wrap.nv-lineChart").data([q]);var S=V.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),Y=V.select("g");S.append("g").attr("class","nv-legendWrap");var ha=S.append("g").attr("class",
"nv-focus");ha.append("g").attr("class","nv-background").append("rect");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-linesWrap");ha.append("g").attr("class","nv-interactive");S.append("g").attr("class","nv-focusWrap");G?(g.width(T),Y.select(".nv-legendWrap").datum(q).call(g),"bottom"===H?V.select(".nv-legendWrap").attr("transform","translate(0,"+X+")"):"top"===H&&(v||g.height()===t.top||(t.top=g.height(),X=c.utils.availableHeight(E,
x,t)-(R?l.height():0)),V.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")"))):Y.select(".nv-legendWrap").selectAll("*").remove();V.attr("transform","translate("+t.left+","+t.top+")");B&&Y.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)");L&&(n.width(T).height(X).margin({left:t.left,top:t.top}).svgContainer(x).xScale(C),V.select(".nv-interactive").call(n));Y.select(".nv-focus .nv-background rect").attr("width",T).attr("height",X);e.width(T).height(X).color(q.map(function(a,
c){return a.color||z(a,c)}).filter(function(a,c){return!q[c].disabled}));V=Y.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled}));A&&f.scale(C)._ticks(c.utils.calcTicksX(T/100,q)).tickSize(-X,0);M&&k.scale(u)._ticks(c.utils.calcTicksY(X/36,q)).tickSize(-T,0);Y.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+X+")");R?(l.width(T),Y.select(".nv-focusWrap").attr("transform","translate(0,"+(X+t.bottom+l.margin().top)+")").datum(q.filter(function(a){return!a.disabled})).call(l),
T=l.brush.empty()?l.xDomain():l.brush.extent(),null!==T&&U(T)):(V.call(e),r(),I());g.dispatch.on("stateChange",function(c){for(var e in c)O[e]=c[e];w.stateChange(O);a.update()});n.dispatch.on("elementMousemove",function(f){e.clearHighlights();var g,p,u,r=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled&&!a.disableTooltip}).forEach(function(k,q){var n=R?l.brush.empty()?l.xScale().domain():l.brush.extent():C.domain(),x=k.values.filter(function(a,c){return n[0]<=n[1]?e.x()(a,c)>=n[0]&&e.x()(a,
c)<=n[1]:e.x()(a,c)>=n[1]&&e.x()(a,c)<=n[0]});p=c.interactiveBisect(x,f.pointXValue,e.x());x=x[p];var t=a.y()(x,p);null!==t&&e.highlightPoint(q,p,!0);void 0!==x&&(void 0===g&&(g=x),void 0===u&&(u=a.xScale()(a.x()(x,p))),r.push({key:k.key,value:t,color:z(k,k.seriesIndex),data:x}))});if(2<r.length){var x=a.yScale().invert(f.mouseY),t=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]);x=c.nearestValueIndex(r.map(function(a){return a.value}),x,t);null!==x&&(r[x].highlight=!0)}x=function(a,c){return null==
a?"N/A":k.tickFormat()(a)};n.tooltip.valueFormatter(n.tooltip.valueFormatter()||x).data({value:a.x()(g,p),index:p,series:r})();n.renderGuideLine(u)});n.dispatch.on("elementClick",function(f){var g,k=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(e){var l=c.interactiveBisect(e.values,f.pointXValue,a.x()),p=e.values[l];if("undefined"!==typeof p){"undefined"===typeof g&&(g=a.xScale()(a.x()(p,l)));var q=a.yScale()(a.y()(p,l));k.push({point:p,pointIndex:l,pos:[g,q],seriesIndex:e.seriesIndex,
series:e})}});e.dispatch.elementClick(k)});n.dispatch.on("elementMouseout",function(a){e.clearHighlights()});w.on("changeState",function(c){"undefined"!==typeof c.disabled&&q.length===c.disabled.length&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),O.disabled=c.disabled);a.update()})});S.renderEnd("lineChart immediate");return a}var e=c.models.line(),f=c.models.axis(),k=c.models.axis(),g=c.models.legend(),n=c.interactiveGuideline(),r=c.models.tooltip(),l=c.models.focus(c.models.line()),t={top:30,
right:20,bottom:50,left:60},v=null,z=c.utils.defaultColor(),D=null,E=null,G=!0,H="top",A=!0,M=!0,B=!1,L=!1,C,u,R=!1,O=c.utils.state(),N=null,I=null,w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),K=250;f.orient("bottom").tickPadding(7);k.orient(B?"right":"left");e.clipEdge(!0).duration(0);r.valueFormatter(function(a,c){return k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});n.tooltip.valueFormatter(function(a,c){return k.tickFormat()(a,
c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});var S=c.utils.renderWatch(w,K),J=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},p=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){a.series.disableTooltip||r.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){r.hidden(!0)});a.dispatch=w;a.lines=e;a.legend=g;a.focus=l;a.xAxis=
f;a.x2Axis=l.xAxis;a.yAxis=k;a.y2Axis=l.yAxis;a.interactiveLayer=n;a.tooltip=r;a.state=O;a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return D},set:function(a){D=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return G},set:function(a){G=a}},legendPosition:{get:function(){return H},set:function(a){H=a}},showXAxis:{get:function(){return A},set:function(a){A=a}},showYAxis:{get:function(){return M},set:function(a){M=
a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return I},set:function(a){I=a}},focusEnable:{get:function(){return R},set:function(a){R=a}},focusHeight:{get:function(){return l.height()},set:function(a){l.height(a)}},focusShowAxisX:{get:function(){return l.showXAxis()},set:function(a){l.showXAxis(a)}},focusShowAxisY:{get:function(){return l.showYAxis()},set:function(a){l.showYAxis(a)}},brushExtent:{get:function(){return l.brushExtent()},set:function(a){l.brushExtent(a)}},
focusMargin:{get:function(){return l.margin},set:function(a){void 0!==a.top&&(v=t.top=a.top);l.margin.right=void 0!==a.right?a.right:l.margin.right;l.margin.bottom=void 0!==a.bottom?a.bottom:l.margin.bottom;l.margin.left=void 0!==a.left?a.left:l.margin.left}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},duration:{get:function(){return K},
set:function(a){K=a;S.reset(K);e.duration(K);l.duration(K);f.duration(K);k.duration(K)}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a);g.color(z);e.color(z);l.color(z)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a);l.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a);l.xTickFormat(a)}},yTickFormat:{get:function(){return k.tickFormat()},set:function(a){k.tickFormat(a);l.yTickFormat(a)}},
x:{get:function(){return e.x()},set:function(a){e.x(a);l.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);l.y(a)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;k.orient(B?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(a){if(L=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){return c.models.lineChart().margin({bottom:30}).focusEnable(!0)};c.models.linePlusBarChart=
function(){function a(x){x.each(function(x){function G(){E.empty()||E.extent(J);Ga.data([E.empty()?q.domain():J]).each(function(a,c){c=q(a[0])-q.range()[0];var e=q.range()[1]-q(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c);d3.select(this).select(".right").attr("x",q(a[1])).attr("width",0>e?0:e)})}function da(){J=E.empty()?null:E.extent();S=E.empty()?q.domain():E.extent();T.brush({extent:S,brush:E});G();k.width(ua).height(fa).color(x.map(function(a,c){return a.color||R(a,c)}).filter(function(a,
c){return!x[c].disabled&&x[c].bar}));e.width(ua).height(fa).color(x.map(function(a,c){return a.color||R(a,c)}).filter(function(a,c){return!x[c].disabled&&!x[c].bar}));var a=ea.select(".nv-focus .nv-barsWrap").datum(na.length?na.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return k.x()(a,c)>=S[0]&&k.x()(a,c)<=S[1]})}}):[{values:[]}]),f=ea.select(".nv-focus .nv-linesWrap").datum(ma(Ha)?[{values:[]}]:Ha.filter(function(a){return!a.disabled}).map(function(a,c){return{area:a.area,
fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,key:a.key,values:a.values.filter(function(a,c){return e.x()(a,c)>=S[0]&&e.x()(a,c)<=S[1]})}}));p=na.length&&!la?k.xScale():e.xScale();n.scale(p)._ticks(c.utils.calcTicksX(ua/100,x)).tickSize(-fa,0);n.domain([Math.ceil(S[0]),Math.floor(S[1])]);ea.select(".nv-x.nv-axis").transition().duration(X).call(n);a.transition().duration(X).call(k);f.transition().duration(X).call(e);ea.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+
")");l.scale(V)._ticks(c.utils.calcTicksY(fa/36,x)).tickSize(-ua,0);t.scale(ba)._ticks(c.utils.calcTicksY(fa/36,x));la?t.tickSize(Ha.length?0:-ua,0):t.tickSize(na.length?0:-ua,0);f=na.length?1:0;var g=Ha.length&&!ma(Ha)?1:0;a=la?g:f;f=la?f:g;ea.select(".nv-focus .nv-y1.nv-axis").style("opacity",a);ea.select(".nv-focus .nv-y2.nv-axis").style("opacity",f).attr("transform","translate("+p.range()[1]+",0)");ea.select(".nv-focus .nv-y1.nv-axis").transition().duration(X).call(l);ea.select(".nv-focus .nv-y2.nv-axis").transition().duration(X).call(t)}
var wa=d3.select(this);c.utils.initSVG(wa);var ua=c.utils.availableWidth(B,wa,H),fa=c.utils.availableHeight(L,wa,H)-(N?K:0),va=K-M.top-M.bottom;a.update=function(){wa.transition().duration(X).call(a)};a.container=this;ra.setter(Aa(x),a.update).getter(za(x)).update();ra.disabled=x.map(function(a){return!!a.disabled});if(!pa)for(oa in pa={},ra)pa[oa]=ra[oa]instanceof Array?ra[oa].slice(0):ra[oa];if(x&&x.length&&x.filter(function(a){return a.values.length}).length)wa.selectAll(".nv-noData").remove();
else return c.utils.noData(a,wa),a;var na=x.filter(function(a){return!a.disabled&&a.bar}),Ha=x.filter(function(a){return!a.bar});p=na.length&&!la?k.xScale():e.xScale();q=r.scale();V=la?e.yScale():k.yScale();ba=la?k.yScale():e.yScale();W=la?f.yScale():g.yScale();U=la?g.yScale():f.yScale();var oa=x.filter(function(a){return!a.disabled&&(la?!a.bar:a.bar)}).map(function(a){return a.values.map(function(a,c){return{x:C(a,c),y:u(a,c)}})});var Ba=x.filter(function(a){return!a.disabled&&(la?a.bar:!a.bar)}).map(function(a){return a.values.map(function(a,
c){return{x:C(a,c),y:u(a,c)}})});p.range([0,ua]);q.domain(d3.extent(d3.merge(oa.concat(Ba)),function(a){return a.x})).range([0,ua]);oa=wa.selectAll("g.nv-wrap.nv-linePlusBar").data([x]);Ba=oa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var ea=oa.select("g");Ba.append("g").attr("class","nv-legendWrap");var Fa=Ba.append("g").attr("class","nv-focus");Fa.append("g").attr("class","nv-x nv-axis");Fa.append("g").attr("class","nv-y1 nv-axis");Fa.append("g").attr("class","nv-y2 nv-axis");
Fa.append("g").attr("class","nv-barsWrap");Fa.append("g").attr("class","nv-linesWrap");Ba=Ba.append("g").attr("class","nv-context");Ba.append("g").attr("class","nv-x nv-axis");Ba.append("g").attr("class","nv-y1 nv-axis");Ba.append("g").attr("class","nv-y2 nv-axis");Ba.append("g").attr("class","nv-barsWrap");Ba.append("g").attr("class","nv-linesWrap");Ba.append("g").attr("class","nv-brushBackground");Ba.append("g").attr("class","nv-x nv-brush");O?(Ba=D.align()?ua/2:ua,Fa=D.align()?Ba:0,D.width(Ba),
ea.select(".nv-legendWrap").datum(x.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=la?a.originalKey+(a.bar?ha:Y):a.originalKey+(a.bar?Y:ha);return a})).call(D),A||D.height()===H.top||(H.top=D.height(),fa=c.utils.availableHeight(L,wa,H)-K),ea.select(".nv-legendWrap").attr("transform","translate("+Fa+","+-H.top+")")):ea.select(".nv-legendWrap").selectAll("*").remove();oa.attr("transform","translate("+H.left+","+H.top+")");ea.select(".nv-context").style("display",N?"initial":
"none");g.width(ua).height(va).color(x.map(function(a,c){return a.color||R(a,c)}).filter(function(a,c){return!x[c].disabled&&x[c].bar}));f.width(ua).height(va).color(x.map(function(a,c){return a.color||R(a,c)}).filter(function(a,c){return!x[c].disabled&&!x[c].bar}));oa=ea.select(".nv-context .nv-barsWrap").datum(na.length?na:[{values:[]}]);Ba=ea.select(".nv-context .nv-linesWrap").datum(ma(Ha)?[{values:[]}]:Ha.filter(function(a){return!a.disabled}));ea.select(".nv-context").attr("transform","translate(0,"+
(fa+H.bottom+M.top)+")");oa.transition().call(g);Ba.transition().call(f);w&&(r._ticks(c.utils.calcTicksX(ua/100,x)).tickSize(-va,0),ea.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+W.range()[0]+")"),ea.select(".nv-context .nv-x.nv-axis").transition().call(r));I&&(v.scale(W)._ticks(va/36).tickSize(-ua,0),z.scale(U)._ticks(va/36).tickSize(na.length?0:-ua,0),ea.select(".nv-context .nv-y3.nv-axis").style("opacity",na.length?1:0).attr("transform","translate(0,"+q.range()[0]+")"),
ea.select(".nv-context .nv-y2.nv-axis").style("opacity",Ha.length?1:0).attr("transform","translate("+q.range()[1]+",0)"),ea.select(".nv-context .nv-y1.nv-axis").transition().call(v),ea.select(".nv-context .nv-y2.nv-axis").transition().call(z));E.x(q).on("brush",da);J&&E.extent(J);var Ga=ea.select(".nv-brushBackground").selectAll("g").data([J||E.extent()]);oa=Ga.enter().append("g");oa.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",va);oa.append("rect").attr("class","right").attr("x",
0).attr("y",0).attr("height",va);oa=ea.select(".nv-x.nv-brush").call(E);oa.selectAll("rect").attr("height",va);oa.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=va/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});D.dispatch.on("stateChange",function(c){for(var e in c)ra[e]=c[e];T.stateChange(ra);a.update()});T.on("changeState",function(c){"undefined"!==
typeof c.disabled&&(x.forEach(function(a,e){a.disabled=c.disabled[e]}),ra.disabled=c.disabled);a.update()});da()});return a}var e=c.models.line(),f=c.models.line(),k=c.models.historicalBar(),g=c.models.historicalBar(),n=c.models.axis(),r=c.models.axis(),l=c.models.axis(),t=c.models.axis(),v=c.models.axis(),z=c.models.axis(),D=c.models.legend(),E=d3.svg.brush(),G=c.models.tooltip(),H={top:30,right:30,bottom:30,left:60},A=null,M={top:0,right:30,bottom:20,left:60},B=null,L=null,C=function(a){return a.x},
u=function(a){return a.y},R=c.utils.defaultColor(),O=!0,N=!0,I=!1,w=!0,K=50,S,J=null,p,q,V,ba,W,U,x=null,T=d3.dispatch("brush","stateChange","changeState"),X=0,ra=c.utils.state(),pa=null,Y=" (left axis)",ha=" (right axis)",la=!1;e.clipEdge(!0);f.interactive(!1);f.pointActive(function(a){return!1});n.orient("bottom").tickPadding(5);l.orient("left");t.orient("right");r.orient("bottom").tickPadding(5);v.orient("left");z.orient("right");G.headerEnabled(!0).headerFormatter(function(a,c){return n.tickFormat()(a,
c)});var za=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},Aa=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},ma=function(a){return a.every(function(a){return a.disabled})};e.dispatch.on("elementMouseover.tooltip",function(a){G.duration(100).valueFormatter(function(a,c){return(la?{main:l,focus:v}:{main:t,focus:z}).main.tickFormat()(a,c)}).data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)});
k.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};G.duration(0).valueFormatter(function(a,c){return(la?{main:t,focus:z}:{main:l,focus:v}).main.tickFormat()(a,c)}).data(c).hidden(!1)});k.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)});k.dispatch.on("elementMousemove.tooltip",function(a){G()});a.dispatch=T;a.legend=D;a.lines=e;a.lines2=f;a.bars=k;a.bars2=g;a.xAxis=n;a.x2Axis=r;a.y1Axis=l;a.y2Axis=t;a.y3Axis=v;a.y4Axis=
z;a.tooltip=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return O},set:function(a){O=a}},brushExtent:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return x},set:function(a){x=a}},focusEnable:{get:function(){return N},set:function(a){N=a}},focusHeight:{get:function(){return K},set:function(a){K=a}},focusShowAxisX:{get:function(){return w},
set:function(a){w=a}},focusShowAxisY:{get:function(){return I},set:function(a){I=a}},legendLeftAxisHint:{get:function(){return Y},set:function(a){Y=a}},legendRightAxisHint:{get:function(){return ha},set:function(a){ha=a}},margin:{get:function(){return H},set:function(a){void 0!==a.top&&(A=H.top=a.top);H.right=void 0!==a.right?a.right:H.right;H.bottom=void 0!==a.bottom?a.bottom:H.bottom;H.left=void 0!==a.left?a.left:H.left}},focusMargin:{get:function(){return M},set:function(a){M.top=void 0!==a.top?
a.top:M.top;M.right=void 0!==a.right?a.right:M.right;M.bottom=void 0!==a.bottom?a.bottom:M.bottom;M.left=void 0!==a.left?a.left:M.left}},duration:{get:function(){return X},set:function(a){X=a}},color:{get:function(){return R},set:function(a){R=c.utils.getColor(a);D.color(R)}},x:{get:function(){return C},set:function(a){C=a;e.x(a);f.x(a);k.x(a);g.x(a)}},y:{get:function(){return u},set:function(a){u=a;e.y(a);f.y(a);k.y(a);g.y(a)}},switchYAxisOrder:{get:function(){return la},set:function(a){if(la!==
a){var c=l;l=t;t=c;c=v;v=z;z=c}la=a;l.orient("left");t.orient("right");v.orient("left");z.orient("right")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(p){S.reset();p.each(function(a){var p=f-e.left-e.right,q=k-e.top-e.bottom;l=d3.select(this);c.utils.initSVG(l);var W=0;A&&a.length&&(A=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(E){var U=d3.layout.stack().offset(G).values(function(a){return a.values}).y(v)(!a.length&&
A?A:a);U.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=W++,U[e]=a[e]):0<e&&U[e-1].nonStackable&&U[e].values.map(function(a,c){a.y0-=U[e-1].values[c].y;a.y1=a.y0+a.y})});a=U}a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});E&&0<a.length&&a[0].values.map(function(c,e){var f=0,g=0;a.map(function(c,k){a[k].nonStackable||(c=c.values[e],c.size=Math.abs(c.y),0>c.y?(c.y1=g,g-=c.size):(c.y1=c.size+f,f+=c.size))})});var x=C&&u?[]:a.map(function(a,c){return a.values.map(function(a,
e){return{x:t(a,e),y:v(a,e),y0:a.y0,y1:a.y1,idx:c}})});g.domain(C||d3.merge(x).map(function(a){return a.x})).rangeBands(R||[0,p],N);n.domain(u||d3.extent(d3.merge(x).map(function(c){var e=c.y;E&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+c.y);return e}).concat(z))).range(O||[q,0]);g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1]));n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],
n.domain()[1]-.01*n.domain()[1]]):n.domain([-1,1]));K=K||n;x=l.selectAll("g.nv-wrap.nv-multibar").data([a]);var T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),X=T.append("defs");T=T.append("g");var ra=x.select("g");T.append("g").attr("class","nv-groups");x.attr("transform","translate("+e.left+","+e.top+")");X.append("clipPath").attr("id","nv-edge-clip-"+r).append("rect");x.select("#nv-edge-clip-"+r+" rect").attr("width",p).attr("height",q);ra.attr("clip-path",D?"url(#nv-edge-clip-"+
r+")":"");p=x.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);q=S.transition(p.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,L)).attr("y",function(c,e,f){e=K(0)||0;E&&a[c.series]&&!a[c.series].nonStackable&&(e=K(c.y0));return e}).attr("height",0).remove();q.delay&&q.delay(function(a,c){return L/(J+1)*c-c});p.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return H(a,c)}).style("stroke",function(a,c){return H(a,c)});p.style("stroke-opacity",1).style("fill-opacity",I);p=p.selectAll("rect.nv-bar").data(function(c){return A&&!a.length?A.values:c.values});p.exit().remove();p.enter().append("rect").attr("class",function(a,c){return 0>v(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,f){return E&&!a[f].nonStackable?0:f*g.rangeBand()/a.length}).attr("y",function(c,
e,f){return K(E&&!a[f].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,f){return g.rangeBand()/(E&&!a[f].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+g(t(a,c))+",0)"});p.style("fill",function(a,c,e){return H(a,e,c)}).style("stroke",function(a,c,e){return H(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);w.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);w.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){w.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){w.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){w.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});p.attr("class",function(a,c){return 0>v(a,
c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+g(t(a,c))+",0)"});M&&(B||(B=a.map(function(){return!0})),p.style("fill",function(a,c,e){return d3.rgb(M(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(M(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}));p=p.watchTransition(S,"multibar",Math.min(250,L)).delay(function(c,
e){return e*L/a[0].values.length});E?p.attr("y",function(c,e,f){return a[f].nonStackable?0>v(c,e)?n(0):-1>n(0)-n(v(c,e))?n(0)-1:n(v(c,e))||0:n(c.y1)}).attr("height",function(c,e,f){return a[f].nonStackable?Math.max(Math.abs(n(v(c,e))-n(0)),0)||0:Math.max(Math.abs(n(c.y+c.y0)-n(c.y0)),0)}).attr("x",function(c,e,f){e=0;a[f].nonStackable&&(e=c.series*g.rangeBand()/a.length,a.length!==W&&(e=a[f].nonStackableSeries*g.rangeBand()/(2*W)));return e}).attr("width",function(c,e,f){return a[f].nonStackable?
(c=g.rangeBand()/W,a.length!==W&&(c=g.rangeBand()/(2*W)),c):g.rangeBand()}):p.attr("x",function(c,e){return c.series*g.rangeBand()/a.length}).attr("width",g.rangeBand()/a.length).attr("y",function(a,c){return 0>v(a,c)?n(0):1>n(0)-n(v(a,c))?n(0)-1:n(v(a,c))||0}).attr("height",function(a,c){return Math.max(Math.abs(n(v(a,c))-n(0)),1)||0});g.copy();K=n.copy();a[0]&&a[0].values&&(J=a[0].values.length)});S.renderEnd("multibar immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,k=500,g=d3.scale.ordinal(),
n=d3.scale.linear(),r=Math.floor(1E4*Math.random()),l=null,t=function(a){return a.x},v=function(a){return a.y},z=[0],D=!0,E=!1,G="zero",H=c.utils.defaultColor(),A=!1,M=null,B,L=500,C,u,R,O,N=.1,I=.75,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K,S=c.utils.renderWatch(w,L),J=0;a.dispatch=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},
set:function(a){k=a}},x:{get:function(){return t},set:function(a){t=a}},y:{get:function(){return v},set:function(a){v=a}},xScale:{get:function(){return g},set:function(a){g=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return u},set:function(a){u=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return O},set:function(a){O=a}},forceY:{get:function(){return z},set:function(a){z=
a}},stacked:{get:function(){return E},set:function(a){E=a}},stackOffset:{get:function(){return G},set:function(a){G=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},disabled:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return r},set:function(a){r=a}},hideable:{get:function(){return A},set:function(a){A=a}},groupSpacing:{get:function(){return N},set:function(a){N=a}},fillOpacity:{get:function(){return I},set:function(a){I=a}},margin:{get:function(){return e},set:function(a){e.top=
void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return L},set:function(a){L=a;S.reset(L)}},color:{get:function(){return H},set:function(a){H=c.utils.getColor(a)}},barColor:{get:function(){return M},set:function(a){M=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(x){V.reset();V.models(e);M&&V.models(f);B&&V.models(k);
x.each(function(x){var T=d3.select(this);c.utils.initSVG(T);var S=c.utils.availableWidth(z,T,t),V=c.utils.availableHeight(D,T,t);a.update=function(){0===p?T.call(a):T.transition().duration(p).call(a)};a.container=this;w.setter(U(x),a.update).getter(W(x)).update();w.disabled=x.map(function(a){return!!a.disabled});if(!K)for(Y in K={},w)K[Y]=w[Y]instanceof Array?w[Y].slice(0):w[Y];if(x&&x.length&&x.filter(function(a){return a.values.length}).length)T.selectAll(".nv-noData").remove();else return c.utils.noData(a,
T),a;N=e.xScale();I=e.yScale();var Y=T.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([x]);var ha=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),la=Y.select("g");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-barsWrap");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");ha.append("g").attr("class","nv-interactive");A?(n.width(S-(G?180:0)),la.select(".nv-legendWrap").datum(x).call(n),
v||n.height()===t.top||(t.top=n.height(),V=c.utils.availableHeight(D,T,t)),la.select(".nv-legendWrap").attr("transform","translate("+(G?180:0)+","+-t.top+")")):la.select(".nv-legendWrap").selectAll("*").remove();if(G){var za=[{key:H.grouped||"Grouped",disabled:e.stacked()},{key:H.stacked||"Stacked",disabled:!e.stacked()}];r.width(G?180:0).color(["#444","#444","#444"]);la.select(".nv-controlsWrap").datum(za).attr("transform","translate(0,"+-t.top+")").call(r)}else la.select(".nv-controlsWrap").selectAll("*").remove();
Y.attr("transform","translate("+t.left+","+t.top+")");L&&la.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)");e.disabled(x.map(function(a){return a.disabled})).width(S).height(V).color(x.map(function(a,c){return a.color||E(a,c)}).filter(function(a,c){return!x[c].disabled}));la.select(".nv-barsWrap").datum(x.filter(function(a){return!a.disabled})).call(e);if(M){f.scale(N)._ticks(c.utils.calcTicksX(S/100,x)).tickSize(-V,0);la.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+
")");la.select(".nv-x.nv-axis").call(f);ha=la.select(".nv-x.nv-axis > g").selectAll("g");ha.selectAll("line, text").style("opacity",1);if(u){ha.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var Aa=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;la.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==Aa%2?17:5)+")"})}R&&la.selectAll(".tick text").call(c.utils.wrapTicks,a.xAxis.rangeBand());
C&&ha.filter(function(a,c){return 0!==c%Math.ceil(x[0].values.length/(S/100))}).selectAll("text, line").style("opacity",0);O&&ha.selectAll(".tick text").attr("transform","rotate("+O+" 0,0)").style("text-anchor",0<O?"start":"end");la.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}B&&(k.scale(I)._ticks(c.utils.calcTicksY(V/36,x)).tickSize(-S,0),la.select(".nv-y.nv-axis").call(k));q&&(g.width(S).height(V).margin({left:t.left,top:t.top}).svgContainer(T).xScale(N),Y.select(".nv-interactive").call(g));
n.dispatch.on("stateChange",function(c){for(var e in c)w[e]=c[e];J.stateChange(w);a.update()});r.dispatch.on("legendClick",function(c,f){if(c.disabled){za=za.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case H.grouped:e.stacked(!1);break;case "Stacked":case H.stacked:e.stacked(!0)}w.stacked=e.stacked();J.stateChange(w);a.update()}});J.on("changeState",function(c){"undefined"!==typeof c.disabled&&(x.forEach(function(a,e){a.disabled=c.disabled[e]}),w.disabled=
c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),ba=w.stacked=c.stacked);a.update()});q?(g.dispatch.on("elementMousemove",function(c){if(void 0!=c.pointXValue){var e,f,k,l,p=[];x.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,n){f=N.domain().indexOf(c.pointXValue);n=g.values[f];void 0!==n&&(l=n.x,void 0===e&&(e=n),void 0===k&&(k=c.mouseX),p.push({key:g.key,value:a.y()(n,f),color:E(g,g.seriesIndex),data:g.values[f]}))});g.tooltip.data({value:l,index:f,
series:p})();g.renderGuideLine(k)}}),g.dispatch.on("elementMouseout",function(a){g.tooltip.hidden(!0)})):(e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};l.data(c).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){l()}))});V.renderEnd("multibarchart immediate");return a}var e=c.models.multiBar(),f=c.models.axis(),k=c.models.axis(),
g=c.interactiveGuideline(),n=c.models.legend(),r=c.models.legend(),l=c.models.tooltip(),t={top:30,right:20,bottom:50,left:60},v=null,z=null,D=null,E=c.utils.defaultColor(),G=!0,H={},A=!0,M=!0,B=!0,L=!1,C=!0,u=!1,R=!1,O=0,N,I,w=c.utils.state(),K=null,S=null,J=d3.dispatch("stateChange","changeState","renderEnd"),p=250,q=!1;w.stacked=!1;e.stacked(!1);f.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});k.orient(L?"right":"left").tickFormat(d3.format(",.1f"));l.duration(0).valueFormatter(function(a,
c){return k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});g.tooltip.valueFormatter(function(a,c){return null==a?"N/A":k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});g.tooltip.valueFormatter(function(a,c){return null==a?"N/A":k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});g.tooltip.duration(0).valueFormatter(function(a,c){return k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,
c)});r.updateState(!1);var V=c.utils.renderWatch(J),ba=!1,W=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:ba}}},U=function(a){return function(c){void 0!==c.stacked&&(ba=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=J;a.multibar=e;a.legend=n;a.controls=r;a.xAxis=f;a.yAxis=k;a.state=w;a.tooltip=l;a.interactiveLayer=g;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},
set:function(a){z=a}},height:{get:function(){return D},set:function(a){D=a}},showLegend:{get:function(){return A},set:function(a){A=a}},showControls:{get:function(){return G},set:function(a){G=a}},controlLabels:{get:function(){return H},set:function(a){H=a}},showXAxis:{get:function(){return M},set:function(a){M=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return K},set:function(a){K=a}},noData:{get:function(){return S},set:function(a){S=a}},reduceXTicks:{get:function(){return C},
set:function(a){C=a}},rotateLabels:{get:function(){return O},set:function(a){O=a}},staggerLabels:{get:function(){return u},set:function(a){u=a}},wrapLabels:{get:function(){return R},set:function(a){R=!!a}},margin:{get:function(){return t},set:function(a){void 0!==a.top&&(v=t.top=a.top);t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},duration:{get:function(){return p},set:function(a){p=a;e.duration(p);f.duration(p);k.duration(p);
V.reset(p)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a);n.color(E)}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;k.orient(L?"right":"left")}},useInteractiveGuideline:{get:function(){return q},set:function(a){q=a}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);n.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBarHorizontal=function(){function a(g){J.reset();
g.each(function(a){var g=f-e.left-e.right,p=k-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);A&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(v)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});A&&a[0].values.map(function(c,e){var f=0,g=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=g-a.size,g-=a.size):(a.y1=f,f+=a.size)})});var q=R&&O?[]:a.map(function(a){return a.values.map(function(a,c){return{x:t(a,c),y:v(a,
c),y0:a.y0,y1:a.y1}})});r.domain(R||d3.merge(q).map(function(a){return a.x})).rangeBands(N||[0,p],L);l.domain(O||d3.extent(d3.merge(q).map(function(a){return A?0<a.y?a.y1+a.y:a.y1:a.y}).concat(D)));M&&!A?l.range(I||[0>l.domain()[0]?B:0,g-(0<l.domain()[1]?B:0)]):l.range(I||[0,g]);S=S||d3.scale.linear().domain(l.domain()).range([l(0),l(0)]);g=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);p=g.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");p.append("defs");
p=p.append("g");g.select("g");p.append("g").attr("class","nv-groups");g.attr("transform","translate("+e.left+","+e.top+")");g=g.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});g.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);g.exit().watchTransition(J,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();g.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",
function(a){return a.hover}).style("fill",function(a,c){return E(a,c)}).style("stroke",function(a,c){return E(a,c)});g.watchTransition(J,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",C);g=g.selectAll("g.nv-bar").data(function(a){return a.values});g.exit().remove();p=g.enter().append("g").attr("transform",function(c,e,f){return"translate("+S(A?c.y0:0)+","+(A?0:f*r.rangeBand()/a.length+r(t(c,e)))+")"});p.append("rect").attr("width",0).attr("height",r.rangeBand()/(A?1:
a.length));g.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);K.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);K.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){K.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){K.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){K.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){K.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});z(a[0],0)&&(p.append("polyline"),g.select("polyline").attr("fill","none").attr("points",function(c,e){c=z(c,e);e=.8*r.rangeBand()/(2*(A?1:a.length));c=c.length?c:[-Math.abs(c),Math.abs(c)];c=c.map(function(a){return l(a)-l(0)});return[[c[0],
-e],[c[0],e],[c[0],0],[c[1],0],[c[1],-e],[c[1],e]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var f=r.rangeBand()/(2*(A?1:a.length));return"translate("+(0>v(c,e)?0:l(v(c,e))-l(0))+", "+f+")"}));p.append("text");M&&!A?(g.select("text").attr("text-anchor",function(a,c){return 0>v(a,c)?"end":"start"}).attr("y",r.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=u(v(a,c));a=z(a,c);return void 0===a?e:a.length?e+"+"+u(Math.abs(a[1]))+"-"+u(Math.abs(a[0])):
e+"\u00b1"+u(Math.abs(a))}),g.watchTransition(J,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>v(a,c)?-4:l(v(a,c))-l(0)+4})):g.selectAll("text").text("");g.selectAll("text.nv-bar-label").text("");g.attr("class",function(a,c){return 0>v(a,c)?"nv-bar negative":"nv-bar positive"});G&&(H||(H=a.map(function(){return!0})),g.style("fill",function(a,c,e){return d3.rgb(G(a,c)).darker(H.map(function(a,c){return c}).filter(function(a,c){return!H[c]})[e]).toString()}).style("stroke",
function(a,c,e){return d3.rgb(G(a,c)).darker(H.map(function(a,c){return c}).filter(function(a,c){return!H[c]})[e]).toString()}));A?g.watchTransition(J,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+l(a.y1)+","+r(t(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(l(v(a,c)+a.y0)-l(a.y0))||0}).attr("height",r.rangeBand()):g.watchTransition(J,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>v(c,e)?l(v(c,e)):l(0))+","+
(c.series*r.rangeBand()/a.length+r(t(c,e)))+")"}).select("rect").attr("height",r.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(l(v(a,c))-l(0)),1)||0});r.copy();S=l.copy()});J.renderEnd("multibarHorizontal immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,k=500,g=Math.floor(1E4*Math.random()),n=null,r=d3.scale.ordinal(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},z=function(a){return a.yErr},D=[0],E=c.utils.defaultColor(),G=null,
H,A=!1,M=!1,B=60,L=.1,C=.75,u=d3.format(",.2f"),R,O,N,I,w=250,K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),S,J=c.utils.renderWatch(K,w);a.dispatch=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},x:{get:function(){return t},set:function(a){t=a}},y:{get:function(){return v},set:function(a){v=
a}},yErr:{get:function(){return z},set:function(a){z=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return R},set:function(a){R=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return I},set:function(a){I=a}},forceY:{get:function(){return D},set:function(a){D=a}},stacked:{get:function(){return A},set:function(a){A=a}},showValues:{get:function(){return M},
set:function(a){M=a}},disabled:{get:function(){return H},set:function(a){H=a}},id:{get:function(){return g},set:function(a){g=a}},valueFormat:{get:function(){return u},set:function(a){u=a}},valuePadding:{get:function(){return B},set:function(a){B=a}},groupSpacing:{get:function(){return L},set:function(a){L=a}},fillOpacity:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return w},set:function(a){w=a;J.reset(w)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}},barColor:{get:function(){return G},set:function(a){G=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarHorizontalChart=function(){function a(r){S.reset();S.models(e);A&&S.models(f);M&&S.models(k);r.each(function(p){var q=d3.select(this);c.utils.initSVG(q);
var r=c.utils.availableWidth(v,q,l),J=c.utils.availableHeight(z,q,l);a.update=function(){q.transition().duration(I).call(a)};a.container=this;B=e.stacked();u.setter(K(p),a.update).getter(w(p)).update();u.disabled=p.map(function(a){return!!a.disabled});if(!R)for(O in R={},u)R[O]=u[O]instanceof Array?u[O].slice(0):u[O];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return c.utils.noData(a,q),a;L=e.xScale();C=e.yScale().clamp(!0);var O=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([p]);
var U=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),x=O.select("g");U.append("g").attr("class","nv-x nv-axis");U.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");U.append("g").attr("class","nv-barsWrap");U.append("g").attr("class","nv-legendWrap");U.append("g").attr("class","nv-controlsWrap");H?(g.width(r-(E?180:0)),x.select(".nv-legendWrap").datum(p).call(g),t||g.height()===l.top||(l.top=g.height(),J=c.utils.availableHeight(z,
q,l)),x.select(".nv-legendWrap").attr("transform","translate("+(E?180:0)+","+-l.top+")")):x.select(".nv-legendWrap").selectAll("*").remove();if(E){var T=[{key:G.grouped||"Grouped",disabled:e.stacked()},{key:G.stacked||"Stacked",disabled:!e.stacked()}];n.width(E?180:0).color(["#444","#444","#444"]);x.select(".nv-controlsWrap").datum(T).attr("transform","translate(0,"+-l.top+")").call(n)}else x.select(".nv-controlsWrap").selectAll("*").remove();O.attr("transform","translate("+l.left+","+l.top+")");
e.disabled(p.map(function(a){return a.disabled})).width(r).height(J).color(p.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!p[c].disabled}));x.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(e);A&&(f.scale(L)._ticks(c.utils.calcTicksX(J/24,p)).tickSize(-r,0),x.select(".nv-x.nv-axis").call(f),x.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));M&&(k.scale(C)._ticks(c.utils.calcTicksY(r/100,p)).tickSize(-J,0),x.select(".nv-y.nv-axis").attr("transform",
"translate(0,"+J+")"),x.select(".nv-y.nv-axis").call(k));x.select(".nv-zeroLine line").attr("x1",C(0)).attr("x2",C(0)).attr("y1",0).attr("y2",-J);g.dispatch.on("stateChange",function(c){for(var e in c)u[e]=c[e];N.stateChange(u);a.update()});n.dispatch.on("legendClick",function(c,f){if(c.disabled){T=T.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case G.grouped:e.stacked(!1);break;case "Stacked":case G.stacked:e.stacked(!0)}u.stacked=e.stacked();N.stateChange(u);
B=e.stacked();a.update()}});N.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),u.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),B=u.stacked=c.stacked);a.update()})});S.renderEnd("multibar horizontal chart immediate");return a}var e=c.models.multiBarHorizontal(),f=c.models.axis(),k=c.models.axis(),g=c.models.legend().height(30),n=c.models.legend().height(30),r=c.models.tooltip(),l={top:30,right:20,bottom:50,
left:60},t=null,v=null,z=null,D=c.utils.defaultColor(),E=!0,G={},H=!0,A=!0,M=!0,B=!1,L,C,u=c.utils.state(),R=null,O=null,N=d3.dispatch("stateChange","changeState","renderEnd"),I=250;u.stacked=!1;e.stacked(B);f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});k.orient("bottom").tickFormat(d3.format(",.1f"));r.duration(0).valueFormatter(function(a,c){return k.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});n.updateState(!1);var w=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
stacked:B}}},K=function(a){return function(c){void 0!==c.stacked&&(B=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},S=c.utils.renderWatch(N,I);e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};r.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){r.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){r()});a.dispatch=N;a.multibar=e;a.legend=g;a.controls=
n;a.xAxis=f;a.yAxis=k;a.state=u;a.tooltip=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return z},set:function(a){z=a}},showLegend:{get:function(){return H},set:function(a){H=a}},showControls:{get:function(){return E},set:function(a){E=a}},controlLabels:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return A},set:function(a){A=a}},showYAxis:{get:function(){return M},set:function(a){M=
a}},defaultState:{get:function(){return R},set:function(a){R=a}},noData:{get:function(){return O},set:function(a){O=a}},margin:{get:function(){return l},set:function(a){void 0!==a.top&&(t=l.top=a.top);l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return I},set:function(a){I=a;S.reset(I);e.duration(I);f.duration(I);k.duration(I)}},color:{get:function(){return D},set:function(a){D=c.utils.getColor(a);
g.color(D)}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);g.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(l){l.each(function(l){function B(a){var c=2===l[a.seriesIndex].yAxis?V:q;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};W.duration(0).headerFormatter(function(a,c){return p.tickFormat()(a,c)}).valueFormatter(function(a,
e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function G(a){var c=2===l[a.seriesIndex].yAxis?V:q;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};W.duration(100).headerFormatter(function(a,c){return p.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function U(a){var c=2===l[a.seriesIndex].yAxis?V:q;a.point.x=S.x()(a.point);a.point.y=S.y()(a.point);W.duration(0).headerFormatter(function(a,c){return p.tickFormat()(a,
c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function T(a){var c=2===l[a.data.series].yAxis?V:q;a.value=w.x()(a.data);a.series={value:w.y()(a.data),color:a.color,key:a.data.key};W.duration(0).headerFormatter(function(a,c){return p.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function X(){for(var a=0,c=x.length;a<c;a++){var e=x[a];try{e.clearHighlights()}catch(Kb){}}}function za(a,c,e){for(var f=0,g=x.length;f<
g;f++){var k=x[f];try{k.highlightPoint(a,c,e)}catch(kc){}}}var Aa=d3.select(this);c.utils.initSVG(Aa);a.update=function(){Aa.transition().call(a)};a.container=this;var ma=c.utils.availableWidth(g,Aa,e),da=c.utils.availableHeight(n,Aa,e),fa=l.filter(function(a){return"line"==a.type&&1==a.yAxis}),sa=l.filter(function(a){return"line"==a.type&&2==a.yAxis}),ya=l.filter(function(a){return"scatter"==a.type&&1==a.yAxis}),wa=l.filter(function(a){return"scatter"==a.type&&2==a.yAxis}),ua=l.filter(function(a){return"bar"==
a.type&&1==a.yAxis}),Ja=l.filter(function(a){return"bar"==a.type&&2==a.yAxis}),va=l.filter(function(a){return"area"==a.type&&1==a.yAxis}),na=l.filter(function(a){return"area"==a.type&&2==a.yAxis});if(l&&l.length&&l.filter(function(a){return a.values.length}).length)Aa.selectAll(".nv-noData").remove();else return c.utils.noData(a,Aa),a;var Ha=l.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:z(a),y:D(a)}})}),oa=l.filter(function(a){return!a.disabled&&
2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:z(a),y:D(a)}})});L.domain(d3.extent(d3.merge(Ha.concat(oa)),function(a){return a.x})).range([0,ma]);var Ba=Aa.selectAll("g.wrap.multiChart").data([l]),ea=Ba.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y1 nv-axis");ea.append("g").attr("class","nv-y2 nv-axis");ea.append("g").attr("class","stack1Wrap");ea.append("g").attr("class",
"stack2Wrap");ea.append("g").attr("class","bars1Wrap");ea.append("g").attr("class","bars2Wrap");ea.append("g").attr("class","scatters1Wrap");ea.append("g").attr("class","scatters2Wrap");ea.append("g").attr("class","lines1Wrap");ea.append("g").attr("class","lines2Wrap");ea.append("g").attr("class","legendWrap");ea.append("g").attr("class","nv-interactive");ea=Ba.select("g");var Fa=l.map(function(a,c){return l[c].color||k(a,c)});if(r){var Ga=ba.align()?ma/2:ma,lb=ba.align()?Ga:0;ba.width(Ga);ba.color(Fa);
ea.select(".legendWrap").datum(l.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":M);return a})).call(ba);f||ba.height()===e.top||(e.top=ba.height(),da=c.utils.availableHeight(n,Aa,e));ea.select(".legendWrap").attr("transform","translate("+lb+","+-e.top+")")}else ea.select(".legendWrap").selectAll("*").remove();R.width(ma).height(da).interpolate(E).color(Fa.filter(function(a,c){return!l[c].disabled&&1==l[c].yAxis&&"line"==l[c].type}));O.width(ma).height(da).interpolate(E).color(Fa.filter(function(a,
c){return!l[c].disabled&&2==l[c].yAxis&&"line"==l[c].type}));N.width(ma).height(da).color(Fa.filter(function(a,c){return!l[c].disabled&&1==l[c].yAxis&&"scatter"==l[c].type}));I.width(ma).height(da).color(Fa.filter(function(a,c){return!l[c].disabled&&2==l[c].yAxis&&"scatter"==l[c].type}));w.width(ma).height(da).color(Fa.filter(function(a,c){return!l[c].disabled&&1==l[c].yAxis&&"bar"==l[c].type}));K.width(ma).height(da).color(Fa.filter(function(a,c){return!l[c].disabled&&2==l[c].yAxis&&"bar"==l[c].type}));
S.width(ma).height(da).interpolate(E).color(Fa.filter(function(a,c){return!l[c].disabled&&1==l[c].yAxis&&"area"==l[c].type}));J.width(ma).height(da).interpolate(E).color(Fa.filter(function(a,c){return!l[c].disabled&&2==l[c].yAxis&&"area"==l[c].type}));ea.attr("transform","translate("+e.left+","+e.top+")");Fa=ea.select(".lines1Wrap").datum(fa.filter(function(a){return!a.disabled}));Ga=ea.select(".scatters1Wrap").datum(ya.filter(function(a){return!a.disabled}));lb=ea.select(".bars1Wrap").datum(ua.filter(function(a){return!a.disabled}));
var Ka=ea.select(".stack1Wrap").datum(va.filter(function(a){return!a.disabled})),wb=ea.select(".lines2Wrap").datum(sa.filter(function(a){return!a.disabled})),cb=ea.select(".scatters2Wrap").datum(wa.filter(function(a){return!a.disabled})),bc=ea.select(".bars2Wrap").datum(Ja.filter(function(a){return!a.disabled})),cc=ea.select(".stack2Wrap").datum(na.filter(function(a){return!a.disabled})),dc=va.length?va.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,
y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],Jb=na.length?na.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[];C.domain(t||d3.extent(d3.merge(Ha).concat(dc),function(a){return a.y})).range([0,da]);u.domain(v||d3.extent(d3.merge(oa).concat(Jb),function(a){return a.y})).range([0,da]);R.yDomain(C.domain());N.yDomain(C.domain());w.yDomain(C.domain());S.yDomain(C.domain());O.yDomain(u.domain());I.yDomain(u.domain());K.yDomain(u.domain());
J.yDomain(u.domain());va.length&&d3.transition(Ka).call(S);na.length&&d3.transition(cc).call(J);ua.length&&d3.transition(lb).call(w);Ja.length&&d3.transition(bc).call(K);fa.length&&d3.transition(Fa).call(R);sa.length&&d3.transition(wb).call(O);ya.length&&d3.transition(Ga).call(N);wa.length&&d3.transition(cb).call(I);p._ticks(c.utils.calcTicksX(ma/100,l)).tickSize(-da,0);ea.select(".nv-x.nv-axis").attr("transform","translate(0,"+da+")");d3.transition(ea.select(".nv-x.nv-axis")).call(p);q._ticks(c.utils.calcTicksY(da/
36,l)).tickSize(-ma,0);d3.transition(ea.select(".nv-y1.nv-axis")).call(q);V._ticks(c.utils.calcTicksY(da/36,l)).tickSize(-ma,0);d3.transition(ea.select(".nv-y2.nv-axis")).call(V);ea.select(".nv-y1.nv-axis").classed("nv-disabled",Ha.length?!1:!0).attr("transform","translate("+L.range()[0]+",0)");ea.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+L.range()[1]+",0)");ba.dispatch.on("stateChange",function(c){a.update()});A&&(H.width(ma).height(da).margin({left:e.left,
top:e.top}).svgContainer(Aa).xScale(L),Ba.select(".nv-interactive").call(H));A?(H.dispatch.on("elementMousemove",function(e){X();var f,g,n,u=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(l,p){var r=L.domain(),t=l.values.filter(function(c,e){return a.x()(c,e)>=r[0]&&a.x()(c,e)<=r[1]});g=c.interactiveBisect(t,e.pointXValue,a.x());t=t[g];var w=a.y()(t,g);null!==w&&za(p,g,!0);void 0!==t&&(void 0===f&&(f=t),void 0===n&&(n=L(a.x()(t,g))),u.push({key:l.key,value:w,color:k(l,
l.seriesIndex),data:t,yAxis:2==l.yAxis?V:q}))});var r=function(a,c){c=u[c].yAxis;return null==a?"N/A":c.tickFormat()(a)};H.tooltip.headerFormatter(function(a,c){return p.tickFormat()(a,c)}).valueFormatter(H.tooltip.valueFormatter()||r).data({value:a.x()(f,g),index:g,series:u})();H.renderGuideLine(n)}),H.dispatch.on("elementMouseout",function(a){X()})):(R.dispatch.on("elementMouseover.tooltip",B),O.dispatch.on("elementMouseover.tooltip",B),R.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),
O.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),N.dispatch.on("elementMouseover.tooltip",G),I.dispatch.on("elementMouseover.tooltip",G),N.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),I.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),S.dispatch.on("elementMouseover.tooltip",U),J.dispatch.on("elementMouseover.tooltip",U),S.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),J.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),
w.dispatch.on("elementMouseover.tooltip",T),K.dispatch.on("elementMouseover.tooltip",T),w.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),K.dispatch.on("elementMouseout.tooltip",function(a){W.hidden(!0)}),w.dispatch.on("elementMousemove.tooltip",function(a){W()}),K.dispatch.on("elementMousemove.tooltip",function(a){W()}))});return a}var e={top:30,right:20,bottom:50,left:60},f=null,k=c.utils.defaultColor(),g=null,n=null,r=!0,l=null,t,v,z=function(a){return a.x},D=function(a){return a.y},
E="linear",G=!0,H=c.interactiveGuideline(),A=!1,M=" (right axis)",B=250,L=d3.scale.linear(),C=d3.scale.linear(),u=d3.scale.linear(),R=c.models.line().yScale(C).duration(B),O=c.models.line().yScale(u).duration(B),N=c.models.scatter().yScale(C).duration(B),I=c.models.scatter().yScale(u).duration(B),w=c.models.multiBar().stacked(!1).yScale(C).duration(B),K=c.models.multiBar().stacked(!1).yScale(u).duration(B),S=c.models.stackedArea().yScale(C).duration(B),J=c.models.stackedArea().yScale(u).duration(B),
p=c.models.axis().scale(L).orient("bottom").tickPadding(5).duration(B),q=c.models.axis().scale(C).orient("left").duration(B),V=c.models.axis().scale(u).orient("right").duration(B),ba=c.models.legend().height(30),W=c.models.tooltip(),U=d3.dispatch(),x=[R,O,N,I,w,K,S,J];a.dispatch=U;a.legend=ba;a.lines1=R;a.lines2=O;a.scatters1=N;a.scatters2=I;a.bars1=w;a.bars2=K;a.stack1=S;a.stack2=J;a.xAxis=p;a.yAxis1=q;a.yAxis2=V;a.tooltip=W;a.interactiveLayer=H;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return n},set:function(a){n=a}},showLegend:{get:function(){return r},set:function(a){r=a}},yDomain1:{get:function(){return t},set:function(a){t=a}},yDomain2:{get:function(){return v},set:function(a){v=a}},noData:{get:function(){return l},set:function(a){l=a}},interpolate:{get:function(){return E},set:function(a){E=a}},legendRightAxisHint:{get:function(){return M},set:function(a){M=a}},margin:{get:function(){return e},set:function(a){void 0!==
a.top&&(f=e.top=a.top);e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return k},set:function(a){k=c.utils.getColor(a)}},x:{get:function(){return z},set:function(a){z=a;R.x(a);O.x(a);N.x(a);I.x(a);w.x(a);K.x(a);S.x(a);J.x(a)}},y:{get:function(){return D},set:function(a){D=a;R.y(a);O.y(a);N.y(a);I.y(a);S.y(a);J.y(a);w.y(a);K.y(a)}},useVoronoi:{get:function(){return G},set:function(a){G=a;R.useVoronoi(a);
O.useVoronoi(a);S.useVoronoi(a);J.useVoronoi(a)}},useInteractiveGuideline:{get:function(){return A},set:function(a){if(A=a)R.interactive(!1),R.useVoronoi(!1),O.interactive(!1),O.useVoronoi(!1),S.interactive(!1),S.useVoronoi(!1),J.interactive(!1),J.useVoronoi(!1),N.interactive(!1),I.interactive(!1)}},duration:{get:function(){return B},set:function(a){B=a;[R,O,S,J,N,I,p,q,V].forEach(function(a){a.duration(B)})}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(w){w.each(function(a){n=
d3.select(this);var w=c.utils.availableWidth(f,n,e),C=c.utils.availableHeight(k,n,e);c.utils.initSVG(n);var p=w/a[0].values.length*.9;r.domain(u||d3.extent(a[0].values.map(t).concat(H)));M?r.range(O||[.5*w/a[0].values.length,w*(a[0].values.length-.5)/a[0].values.length]):r.range(O||[5+p/2,w-p/2-5]);l.domain(R||[d3.min(a[0].values.map(G).concat(A)),d3.max(a[0].values.map(E).concat(A))]).range(N||[C,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-.01*r.domain()[0],r.domain()[1]+
.01*r.domain()[1]]):r.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var q=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),K=q.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),ba=K.append("defs");K=K.append("g");var W=q.select("g");K.append("g").attr("class","nv-ticks");q.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){I.chartClick({data:a,
index:c,pos:d3.event,id:g})});ba.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect");q.select("#nv-chart-clip-path-"+g+" rect").attr("width",w).attr("height",C);W.attr("clip-path",B?"url(#nv-chart-clip-path-"+g+")":"");C=q.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});C.exit().remove();C.enter().append("path").attr("class",function(a,c,e){return(z(a,c)>D(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+
(l(z(a,c))-l(E(a,c)))+"l"+-p/2+",0l"+p/2+",0l0,"+(l(G(a,c))-l(z(a,c)))+"l0,"+(l(D(a,c))-l(G(a,c)))+"l"+p/2+",0l"+-p/2+",0z"}).attr("transform",function(a,c){return"translate("+r(t(a,c))+","+l(E(a,c))+")"}).attr("fill",function(a,c){return L[0]}).attr("stroke",function(a,c){return L[0]}).attr("x",0).attr("y",function(a,c){return l(Math.max(0,v(a,c)))}).attr("height",function(a,c){return Math.abs(l(v(a,c))-l(0))});C.attr("class",function(a,c,e){return(z(a,c)>D(a,c)?"nv-tick negative":"nv-tick positive")+
" nv-tick-"+e+"-"+c});d3.transition(C).attr("transform",function(a,c){return"translate("+r(t(a,c))+","+l(E(a,c))+")"}).attr("d",function(c,e){var f=w/a[0].values.length*.9;return"m0,0l0,"+(l(z(c,e))-l(E(c,e)))+"l"+-f/2+",0l"+f/2+",0l0,"+(l(G(c,e))-l(z(c,e)))+"l0,"+(l(D(c,e))-l(G(c,e)))+"l"+f/2+",0l"+-f/2+",0z"})});return a}var e={top:0,right:0,bottom:0,left:0},f=null,k=null,g=Math.floor(1E4*Math.random()),n=null,r=d3.scale.linear(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},
z=function(a){return a.open},D=function(a){return a.close},E=function(a){return a.high},G=function(a){return a.low},H=[],A=[],M=!1,B=!0,L=c.utils.defaultColor(),C=!1,u,R,O,N,I=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-ohlcBar .nv-tick.hover").classed("hover",
!1)};a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return u},set:function(a){u=a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return N},
set:function(a){N=a}},forceX:{get:function(){return H},set:function(a){H=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return M},set:function(a){M=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return g},set:function(a){g=a}},interactive:{get:function(){return C},set:function(a){C=a}},x:{get:function(){return t},set:function(a){t=a}},y:{get:function(){return v},set:function(a){v=a}},open:{get:function(){return z()},set:function(a){z=
a}},close:{get:function(){return D()},set:function(a){D=a}},high:{get:function(){return E},set:function(a){E=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return L},set:function(a){L=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=
function(){function a(K){w.reset();K.each(function(a){function w(a){return O(z.map(function(c){if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key]))||pa){var e=l[c.key].domain(),f=l[c.key].range(),g=e[0]-(e[1]-e[0])/9;0>B.indexOf(c.key)&&(e=d3.scale.linear().domain([g,e[1]]).range([n-12,f[1]]),l[c.key].brush.y(e),B.push(c.key));if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key])))return[r(c.key),l[c.key](g)]}void 0!==ma&&(0<B.length||pa?(ma.style("display","inline"),da.style("display",
"inline")):(ma.style("display","none"),da.style("display","none")));return[r(c.key),l[c.key](a.values[c.key])]}))}function p(a){H.forEach(function(c){var e=l[c.dimension].brush.y().domain();c.hasOnlyNaN&&(c.extent[1]=(l[c.dimension].domain()[1]-e[0])*(c.extent[1]-c.extent[0])/(ra[c.dimension]-c.extent[0])+e[0]);c.hasNaN&&(c.extent[0]=e[0]);a&&l[c.dimension].brush.extent(c.extent)});R.select(".nv-brushBackground").each(function(a){d3.select(this).call(l[a.key].brush)}).selectAll("rect").attr("x",-8).attr("width",
16);S()}function q(){!1===E&&(E=!0,p(!0))}function K(){fa=D.filter(function(a){return!l[a].brush.empty()});sa=fa.map(function(a){return l[a].brush.extent()});H=[];fa.forEach(function(a,c){H[c]={dimension:a,extent:sa[c],hasNaN:!1,hasOnlyNaN:!1}});A=[];C.style("display",function(a){var c=fa.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&sa[e][0]==l[c].brush.y().domain()[0]?!0:sa[e][0]<=a.values[c]&&a.values[c]<=sa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&A.push(a);
return c?null:"none"});S();I.brush({filters:H,active:A})}function ba(){var a=0<fa.length?!0:!1;H.forEach(function(a){a.extent[0]===l[a.dimension].brush.y().domain()[0]&&0<=B.indexOf(a.dimension)&&(a.hasNaN=!0);a.extent[1]<l[a.dimension].domain()[0]&&(a.hasOnlyNaN=!0)});I.brushEnd(A,a)}function S(){R.select(".nv-axis").each(function(a,c){c=H.filter(function(c){return c.dimension==a.key});Y[a.key]=l[a.key].domain();0!=c.length&&E&&(Y[a.key]=[],c[0].extent[1]>l[a.key].domain()[0]&&(Y[a.key]=[c[0].extent[1]]),
c[0].extent[0]>=l[a.key].domain()[0]&&Y[a.key].push(c[0].extent[0]));d3.select(this).call(N.scale(l[a.key]).tickFormat(a.format).tickValues(Y[a.key]))})}function U(a){var c=M[a];return null==c?r(a):c}var x=d3.select(this);g=c.utils.availableWidth(f,x,e);n=c.utils.availableHeight(k,x,e);c.utils.initSVG(x);if(void 0===a[0].values){var T=[];a.forEach(function(a){var c={};Object.keys(a).forEach(function(e){"name"!==e&&(c[e]=a[e])});T.push({key:a.name,values:c})});a=T}var X=a.map(function(a){return a.values});
0===A.length&&(A=a);D=v.sort(function(a,c){return a.currentPosition-c.currentPosition}).map(function(a){return a.key});z=v.filter(function(a){return!a.disabled});r.rangePoints([0,g],1).domain(z.map(function(a){return a.key}));var ra={},pa=!1,Y=[];D.forEach(function(a){var c=d3.extent(X,function(c){return+c[a]}),e=c[0];c=c[1];var f=!1;if(isNaN(e)||isNaN(c))f=!0,c=e=0;e===c&&(--e,c+=1);var g=H.filter(function(c){return c.dimension==a});0!==g.length&&(f?(e=l[a].domain()[0],c=l[a].domain()[1]):!g[0].hasOnlyNaN&&
E?(e=e>g[0].extent[0]?g[0].extent[0]:e,c=c<g[0].extent[1]?g[0].extent[1]:c):g[0].hasNaN&&(c=c<g[0].extent[1]?g[0].extent[1]:c,ra[a]=l[a].domain()[1],pa=!0));l[a]=d3.scale.linear().domain([e,c]).range([.9*(n-12),0]);B=[];l[a].brush=d3.svg.brush().y(l[a]).on("brushstart",q).on("brush",K).on("brushend",ba)});x=x.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]);var ha=x.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),la=x.select("g");ha.append("g").attr("class",
"nv-parallelCoordinates background");ha.append("g").attr("class","nv-parallelCoordinates foreground");ha.append("g").attr("class","nv-parallelCoordinates missingValuesline");x.attr("transform","translate("+e.left+","+e.top+")");O.interpolate("cardinal").tension(L);N.orient("left");ha=d3.behavior.drag().on("dragstart",function(a){M[a.key]=this.parentNode.__origin__=r(a.key);u.attr("visibility","hidden")}).on("drag",function(a){M[a.key]=Math.min(g,Math.max(0,this.parentNode.__origin__+=d3.event.x));
C.attr("d",w);z.sort(function(a,c){return U(a.key)-U(c.key)});z.forEach(function(a,c){return a.currentPosition=c});r.domain(z.map(function(a){return a.key}));R.attr("transform",function(a){return"translate("+U(a.key)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete M[a.key];d3.select(this.parentNode).attr("transform","translate("+r(a.key)+")");C.attr("d",w);u.attr("d",w).attr("visibility",null);I.dimensionsOrder(z)});var za=r.range()[1]-r.range()[0];za=isNaN(za)?r.range()[0]:
za;if(!isNaN(za)){var Aa=[za/2,n-12,g-za/2,n-12];var ma=x.select(".missingValuesline").selectAll("line").data([Aa]);ma.enter().append("line");ma.exit().remove();ma.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var da=x.select(".missingValuesline").selectAll("text").data([t]);da.append("text").data([t]);da.enter().append("text");da.exit().remove();da.attr("y",n).attr("x",g-92-za/2).text(function(a){return a})}u=
x.select(".background").selectAll("path").data(a);u.enter().append("path");u.exit().remove();u.attr("d",w);C=x.select(".foreground").selectAll("path").data(a);C.enter().append("path");C.exit().remove();C.attr("d",w).style("stroke-width",function(a,c){isNaN(a.strokeWidth)&&(a.strokeWidth=1);return a.strokeWidth}).attr("stroke",function(a,c){return a.color||G(a,c)});C.on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("stroke-width",a.strokeWidth+2+"px").style("stroke-opacity",1);
I.elementMouseover({label:a.name,color:a.color||G(a,c),values:a.values,dimensions:z})});C.on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("stroke-width",a.strokeWidth+"px").style("stroke-opacity",.7);I.elementMouseout({label:a.name,index:c})});C.on("mousemove",function(a,c){I.elementMousemove()});C.on("click",function(a){I.elementClick({id:a.id})});R=la.selectAll(".dimension").data(z);a=R.enter().append("g").attr("class","nv-parallelCoordinates dimension");R.attr("transform",
function(a){return"translate("+r(a.key)+",0)"});a.append("g").attr("class","nv-axis");a.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(a,c){I.elementMouseover({label:a.tooltip||a.key,color:a.color})}).on("mouseout",function(a,c){I.elementMouseout({label:a.tooltip})}).on("mousemove",function(a,c){I.elementMousemove()}).call(ha);a.append("g").attr("class","nv-brushBackground");R.exit().remove();R.select(".nv-label").text(function(a){return a.key});
p(E);var fa=D.filter(function(a){return!l[a].brush.empty()}),sa=fa.map(function(a){return l[a].brush.extent()});a=A.slice(0);A=[];C.style("display",function(a){var c=fa.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&sa[e][0]==l[c].brush.y().domain()[0]?!0:sa[e][0]<=a.values[c]&&a.values[c]<=sa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&A.push(a);return c?null:"none"});(0<H.length||!c.utils.arrayEquals(A,a))&&I.activeChanged(A)});return a}var e={top:30,right:0,bottom:10,
left:0},f=null,k=null,g=null,n=null,r=d3.scale.ordinal(),l={},t="undefined values",v=[],z=[],D=[],E=!0,G=c.utils.defaultColor(),H=[],A=[],M=[],B=[],L=1,C,u,R,O=d3.svg.line(),N=d3.svg.axis(),I=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),w=c.utils.renderWatch(I);a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},
set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},dimensionData:{get:function(){return v},set:function(a){v=a}},displayBrush:{get:function(){return E},set:function(a){E=a}},filters:{get:function(){return H},set:function(a){H=a}},active:{get:function(){return A},set:function(a){A=a}},lineTension:{get:function(){return L},set:function(a){L=a}},undefinedValuesLabel:{get:function(){return t},set:function(a){t=a}},dimensions:{get:function(){return v.map(function(a){return a.key})},
set:function(a){c.deprecated("dimensions","use dimensionData instead");0===v.length?a.forEach(function(a){v.push({key:a})}):a.forEach(function(a,c){v[c].key=a})}},dimensionNames:{get:function(){return v.map(function(a){return a.key})},set:function(a){c.deprecated("dimensionNames","use dimensionData instead");D=[];0===v.length?a.forEach(function(a){v.push({key:a})}):a.forEach(function(a,c){v[c].key=a})}},dimensionFormats:{get:function(){return v.map(function(a){return a.format})},set:function(a){c.deprecated("dimensionFormats",
"use dimensionData instead");0===v.length?a.forEach(function(a){v.push({format:a})}):a.forEach(function(a,c){v[c].format=a})}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinatesChart=function(){function a(k){B.reset();
B.models(e);k.each(function(k){var u=d3.select(this);c.utils.initSVG(u);var B=c.utils.availableWidth(r,u,g),v=c.utils.availableHeight(l,u,g);a.update=function(){u.call(a)};a.container=this;z.setter(C(D),a.update).getter(L(D)).update();z.disabled=D.map(function(a){return!!a.disabled});D=D.map(function(a){a.disabled=!!a.disabled;return a});D.forEach(function(a,c){a.originalPosition=isNaN(a.originalPosition)?c:a.originalPosition;a.currentPosition=isNaN(a.currentPosition)?c:a.currentPosition});if(!G)for(w in G=
{},z)G[w]=z[w]instanceof Array?z[w].slice(0):z[w];if(k&&k.length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;var w=u.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([k]);var A=w.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),H=w.select("g");A.append("g").attr("class","nv-parallelCoordinatesWrap");A.append("g").attr("class","nv-legendWrap");H.select("rect").attr("width",B).attr("height",0<v?v:0);t?(f.width(B).color(function(a){return"rgb(188,190,192)"}),
H.select(".nv-legendWrap").datum(D.sort(function(a,c){return a.originalPosition-c.originalPosition})).call(f),n||f.height()===g.top||(g.top=f.height(),v=c.utils.availableHeight(l,u,g)),w.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-g.top+")")):H.select(".nv-legendWrap").selectAll("*").remove();w.attr("transform","translate("+g.left+","+g.top+")");e.width(B).height(v).dimensionData(D).displayBrush(E);H.select(".nv-parallelCoordinatesWrap ").datum(k).transition().call(e);e.dispatch.on("brushEnd",
function(a,c){c?(E=!0,M.brushEnd(a)):E=!1});f.dispatch.on("stateChange",function(c){for(var e in c)z[e]=c[e];M.stateChange(z);a.update()});e.dispatch.on("dimensionsOrder",function(a){D.sort(function(a,c){return a.currentPosition-c.currentPosition});var c=!1;D.forEach(function(a,e){a.currentPosition=e;a.currentPosition!==a.originalPosition&&(c=!0)});M.dimensionsOrder(D,c)});M.on("changeState",function(c){"undefined"!==typeof c.disabled&&(D.forEach(function(a,e){a.disabled=c.disabled[e]}),z.disabled=
c.disabled);a.update()})});B.renderEnd("parraleleCoordinateChart immediate");return a}var e=c.models.parallelCoordinates(),f=c.models.legend(),k=c.models.tooltip();c.models.tooltip();var g={top:0,right:0,bottom:0,left:0},n=null,r=null,l=null,t=!0,v=c.utils.defaultColor(),z=c.utils.state(),D=[],E=!0,G=null,H=null,A="undefined",M=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),B=c.utils.renderWatch(M),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
C=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};k.contentGenerator(function(a){var c='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td><strong>'+a.key+"</strong></td></tr></thead>";0!==a.series.length&&(c+='<tbody><tr><td height ="10px"></td></tr>',a.series.forEach(function(a){c=c+'<tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td class="key">'+
a.key+'</td><td class="value">'+a.value+"</td></tr>"}),c+="</tbody>");return c+="</table>"});e.dispatch.on("elementMouseover.tooltip",function(a){var c={key:a.label,color:a.color,series:[]};a.values&&(Object.keys(a.values).forEach(function(e){var f=a.dimensions.filter(function(a){return a.key===e})[0];if(f){var g=isNaN(a.values[e])||isNaN(parseFloat(a.values[e]))?A:f.format(a.values[e]);c.series.push({idx:f.currentPosition,key:e,value:g,color:f.color})}}),c.series.sort(function(a,c){return a.idx-
c.idx}));k.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(){k()});a.dispatch=M;a.parallelCoordinates=e;a.legend=f;a.tooltip=k;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return G},set:function(a){G=
a}},dimensionData:{get:function(){return D},set:function(a){D=a}},displayBrush:{get:function(){return E},set:function(a){E=a}},noData:{get:function(){return H},set:function(a){H=a}},nanValue:{get:function(){return A},set:function(a){A=a}},margin:{get:function(){return g},set:function(a){void 0!==a.top&&(n=g.top=a.top);g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},color:{get:function(){return v},set:function(a){v=c.utils.getColor(a);
f.color(v);e.color(v)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.pie=function(){function a(q){p.reset();q.each(function(a){var q=f-e.left-e.right,V=k-e.top-e.bottom,U=Math.min(q,V)/2,x=[],T=[];l=d3.select(this);if(0===w.length)for(var X=U-U/5,ra=N*U,pa=0;pa<a[0].length;pa++)x.push(X),T.push(ra);else M?(x=w.map(function(a){return(a.outer-a.outer/5)*U}),T=w.map(function(a){return(a.inner-a.inner/5)*U}),N=d3.min(w.map(function(a){return a.inner-a.inner/5}))):(x=w.map(function(a){return a.outer*
U}),T=w.map(function(a){return a.inner*U}),N=d3.min(w.map(function(a){return a.inner})));c.utils.initSVG(l);X=l.selectAll(".nv-wrap.nv-pie").data(a);pa=X.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+r).append("g");var Y=X.select("g");ra=pa.append("g").attr("class","nv-pie");pa.append("g").attr("class","nv-pieLabels");X.attr("transform","translate("+e.left+","+e.top+")");Y.select(".nv-pie").attr("transform","translate("+q/2+","+V/2+")");Y.select(".nv-pieLabels").attr("transform",
"translate("+q/2+","+V/2+")");l.on("click",function(a,c){K.chartClick({data:a,index:c,pos:d3.event,id:r})});S=[];J=[];for(pa=0;pa<a[0].length;pa++){Y=d3.svg.arc().outerRadius(x[pa]);var ha=d3.svg.arc().outerRadius(x[pa]+5);!1!==C&&(Y.startAngle(C),ha.startAngle(C));!1!==R&&(Y.endAngle(R),ha.endAngle(R));H&&(Y.innerRadius(T[pa]),ha.innerRadius(T[pa]));Y.cornerRadius&&O&&(Y.cornerRadius(O),ha.cornerRadius(O));S.push(Y);J.push(ha)}T=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:n(a)});
T.padAngle&&u&&T.padAngle(u);H&&A&&(ra.append("text").attr("class","nv-pie-title"),X.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return A}).style("font-size",Math.min(q,V)*N*2/(A.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+B+")"}));q=X.select(".nv-pie").selectAll(".nv-slice").data(T);V=X.select(".nv-pieLabels").selectAll(".nv-label").data(T);q.exit().remove();V.exit().remove();T=q.enter().append("g");T.attr("class","nv-slice");
T.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);M&&d3.select(this).select("path").transition().duration(70).attr("d",J[c]);K.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill"),percent:(a.endAngle-a.startAngle)/(2*Math.PI)})});T.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);M&&d3.select(this).select("path").transition().duration(50).attr("d",S[c]);K.elementMouseout({data:a.data,index:c})});T.on("mousemove",function(a,c){K.elementMousemove({data:a.data,
index:c})});T.on("click",function(a,c){K.elementClick({data:a.data,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this})});T.on("dblclick",function(a,c){K.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});q.attr("fill",function(a,c){return t(a.data,c)});q.attr("stroke",function(a,c){return t(a.data,c)});T.append("path").each(function(a){this._current=a});q.select("path").transition().duration(I).attr("d",function(a,c){return S[c](a)}).attrTween("d",function(a,
c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;H||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return S[c](e(a))}});if(z){var la=[];for(pa=0;pa<a[0].length;pa++)la.push(S[pa]),D?H&&(la[pa]=d3.svg.arc().outerRadius(S[pa].outerRadius()),!1!==C&&la[pa].startAngle(C),!1!==R&&la[pa].endAngle(R)):H||la[pa].innerRadius(0);V.enter().append("g").classed("nv-label",!0).each(function(a,c){c=d3.select(this);c.attr("transform",
function(a,c){if(L){a.outerRadius=x[c]+10;a.innerRadius=x[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI);e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+la[c].centroid(a)+") rotate("+e+")"}a.outerRadius=U+10;a.innerRadius=U+15;return"translate("+la[c].centroid(a)+")"});c.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);c.append("text").style("text-anchor",L?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});
var za={},Aa=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};V.watchTransition(p,"pie labels").attr("transform",function(a,c){if(L){a.outerRadius=x[c]+10;a.innerRadius=x[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI);e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+la[c].centroid(a)+") rotate("+e+")"}a.outerRadius=U+10;a.innerRadius=U+15;c=la[c].centroid(a);e=(a.endAngle-a.startAngle)/(2*Math.PI);a.value&&e>=G&&(a=Aa(c),za[a]&&(c[1]-=14),za[Aa(c)]=
!0);return"translate("+c+")"});V.select(".nv-label text").style("text-anchor",function(a,c){return L?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),f="";if(!a.value||e<G)return"";if("function"===typeof E)f=E(a,c,{key:g(a.data),value:n(a.data),percent:v(e)});else switch(E){case "key":f=g(a.data);break;case "value":f=v(n(a.data));break;case "percent":f=d3.format("%")(e)}return f})}});p.renderEnd("pie immediate");return a}var e=
{top:0,right:0,bottom:0,left:0},f=500,k=500,g=function(a){return a.x},n=function(a){return a.y},r=Math.floor(1E4*Math.random()),l=null,t=c.utils.defaultColor(),v=d3.format(",.2f"),z=!0,D=!1,E="key",G=.02,H=!1,A=!1,M=!0,B=0,L=!1,C=!1,u=!1,R=!1,O=0,N=.5,I=250,w=[],K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),S=[],J=[],p=c.utils.renderWatch(K);a.dispatch=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return w},set:function(a){w=a}},width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},showLabels:{get:function(){return z},set:function(a){z=a}},title:{get:function(){return A},set:function(a){A=a}},titleOffset:{get:function(){return B},set:function(a){B=a}},labelThreshold:{get:function(){return G},set:function(a){G=a}},valueFormat:{get:function(){return v},set:function(a){v=a}},x:{get:function(){return g},set:function(a){g=
a}},id:{get:function(){return r},set:function(a){r=a}},endAngle:{get:function(){return R},set:function(a){R=a}},startAngle:{get:function(){return C},set:function(a){C=a}},padAngle:{get:function(){return u},set:function(a){u=a}},cornerRadius:{get:function(){return O},set:function(a){O=a}},donutRatio:{get:function(){return N},set:function(a){N=a}},labelsOutside:{get:function(){return D},set:function(a){D=a}},labelSunbeamLayout:{get:function(){return L},set:function(a){L=a}},donut:{get:function(){return H},
set:function(a){H=a}},growOnHover:{get:function(){return M},set:function(a){M=a}},pieLabelsOutside:{get:function(){return D},set:function(a){D=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return D},set:function(a){D=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return v},set:function(a){v=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(a){e.top=
"undefined"!=typeof a.top?a.top:e.top;e.right="undefined"!=typeof a.right?a.right:e.right;e.bottom="undefined"!=typeof a.bottom?a.bottom:e.bottom;e.left="undefined"!=typeof a.left?a.left:e.left}},duration:{get:function(){return I},set:function(a){I=a;p.reset(I)}},y:{get:function(){return n},set:function(a){n=d3.functor(a)}},color:{get:function(){return t},set:function(a){t=c.utils.getColor(a)}},labelType:{get:function(){return E},set:function(a){E=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=
function(){function a(k){B.reset();B.models(e);k.each(function(k){var u=d3.select(this);c.utils.initSVG(u);var t=c.utils.availableWidth(r,u,g),B=c.utils.availableHeight(l,u,g);a.update=function(){u.transition().call(a)};a.container=this;E.setter(C(k),a.update).getter(L(k)).update();E.disabled=k.map(function(a){return!!a.disabled});if(!G)for(w in G={},E)G[w]=E[w]instanceof Array?E[w].slice(0):E[w];if(k&&k.length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;var w=u.selectAll("g.nv-wrap.nv-pieChart").data([k]);
var D=w.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),A=w.select("g");D.append("g").attr("class","nv-pieWrap");D.append("g").attr("class","nv-legendWrap");v?"top"===z?(f.width(t).key(e.x()),w.select(".nv-legendWrap").datum(k).call(f),n||f.height()===g.top||(g.top=f.height(),B=c.utils.availableHeight(l,u,g)),w.select(".nv-legendWrap").attr("transform","translate(0,"+-g.top+")")):"right"===z&&(D=c.models.legend().width(),t/2<D&&(D=t/2),f.height(B).key(e.x()),f.width(D),t-=
f.width(),w.select(".nv-legendWrap").datum(k).call(f).attr("transform","translate("+t+",0)")):A.select(".nv-legendWrap").selectAll("*").remove();w.attr("transform","translate("+g.left+","+g.top+")");e.width(t).height(B);t=A.select(".nv-pieWrap").datum([k]);d3.transition(t).call(e);f.dispatch.on("stateChange",function(c){for(var e in c)E[e]=c[e];M.stateChange(E);a.update()});M.on("changeState",function(c){"undefined"!==typeof c.disabled&&(k.forEach(function(a,e){a.disabled=c.disabled[e]}),E.disabled=
c.disabled);a.update()})});B.renderEnd("pieChart immediate");return a}var e=c.models.pie(),f=c.models.legend(),k=c.models.tooltip(),g={top:30,right:20,bottom:20,left:20},n=null,r=null,l=null,t=!1,v=!0,z="top",D=c.utils.defaultColor(),E=c.utils.state(),G=null,H=null,A=250,M=d3.dispatch("stateChange","changeState","renderEnd");k.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return e.valueFormat()(a,c)});var B=c.utils.renderWatch(M),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
C=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color,percent:c.percent};t||(delete c.percent,delete c.series.percent);k.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){k()});a.legend=f;a.dispatch=M;a.pie=e;a.tooltip=k;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return l},set:function(a){l=a}},noData:{get:function(){return H},set:function(a){H=a}},showTooltipPercent:{get:function(){return t},set:function(a){t=a}},showLegend:{get:function(){return v},set:function(a){v=a}},legendPosition:{get:function(){return z},set:function(a){z=a}},defaultState:{get:function(){return G},set:function(a){G=a}},color:{get:function(){return D},set:function(a){D=a;f.color(D);
e.color(D)}},duration:{get:function(){return A},set:function(a){A=a;B.reset(A);e.duration(A)}},margin:{get:function(){return g},set:function(a){void 0!==a.top&&(n=g.top=a.top);g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sankey=function(){function a(){E.forEach(function(a){a.sourceLinks=[];a.targetLinks=[]});G.forEach(function(a){var c=a.source,e=
a.target;"number"===typeof c&&(c=a.source=E[a.source]);"number"===typeof e&&(e=a.target=E[a.target]);c.sourceLinks.push(a);e.targetLinks.push(a)})}function e(){E.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,l),d3.sum(a.targetLinks,l))})}function f(){for(var a=E,c,e=0;a.length&&e<E.length;)c=[],a.forEach(function(a){a.x=e;a.dx=v;a.sourceLinks.forEach(function(a){0>c.indexOf(a.target)&&c.push(a.target)})}),a=c,++e;H&&k(e);g((D[0]-v)/(e-1))}function k(a){E.forEach(function(c){c.sourceLinks.length||
(c.x=a-1)})}function g(a){E.forEach(function(c){c.x*=a})}function n(a){function c(a){function c(a){return(a.source.y+a.sy+a.dy/2)*a.value}k.forEach(function(e,f){e.forEach(function(e){if(e.targetLinks.length){var f=d3.sum(e.targetLinks,c)/d3.sum(e.targetLinks,l);e.y+=(f-M(e))*a}})})}function e(a){function c(a){return(a.target.y+a.ty+a.dy/2)*a.value}k.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var f=d3.sum(e.sourceLinks,c)/d3.sum(e.sourceLinks,l);e.y+=(f-M(e))*
a}})})}function f(){k.forEach(function(a){var c=0;var e=a.length,f;a.sort(g);for(f=0;f<e;++f){var k=a[f];c-=k.y;0<c&&(k.y+=c);c=k.y+k.dy+z}c=c-z-D[1];if(0<c)for(c=k.y-=c,f=e-2;0<=f;--f)k=a[f],c=k.y+k.dy+z-c,0<c&&(k.y-=c),c=k.y})}function g(a,c){return a.y-c.y}var k=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(E).map(function(a){return a.values});(function(){var a=d3.min(k,function(a){return(D[1]-(a.length-1)*z)/d3.sum(a,l)});k.forEach(function(c){c.forEach(function(c,e){c.y=
e;c.dy=c.value*a})});G.forEach(function(c){c.dy=c.value*a})})();f();r();for(var n=1;0<a;--a)e(n*=.99),f(),r(),c(n),f(),r()}function r(){function a(a,c){return a.source.y-c.source.y}function c(a,c){return a.target.y-c.target.y}E.forEach(function(e){e.sourceLinks.sort(c);e.targetLinks.sort(a)});E.forEach(function(a){var c=0,e=0;a.sourceLinks.forEach(function(a){a.sy=c;c+=a.dy});a.targetLinks.forEach(function(a){a.ty=e;e+=a.dy})})}function l(a){return a.value}var t={},v=24,z=8,D=[1,1],E=[],G=[],H=!0,
A=function(){function a(a){var e=a.source.x+a.source.dx,f=a.target.x,g=d3.interpolateNumber(e,f),k=g(c);g=g(1-c);var l=a.source.y+a.sy+a.dy/2;a=a.target.y+a.ty+a.dy/2;return"M"+e+","+l+"C"+k+","+l+" "+g+","+a+" "+f+","+a}var c=.5;a.curvature=function(e){if(!arguments.length)return c;c=+e;return a};return a},M=function(a){return a.y+a.dy/2};t.options=c.utils.optionsFunc.bind(t);t._options=Object.create({},{nodeWidth:{get:function(){return v},set:function(a){v=+a}},nodePadding:{get:function(){return z},
set:function(a){z=a}},nodes:{get:function(){return E},set:function(a){E=a}},links:{get:function(){return G},set:function(a){G=a}},size:{get:function(){return D},set:function(a){D=a}},sinksRight:{get:function(){return H},set:function(a){H=a}},layout:{get:function(){a();e();f();n(32)},set:function(c){a();e();f();n(c)}},relayout:{get:function(){r()},set:function(a){}},center:{get:function(){return M()},set:function(a){"function"===typeof a&&(M=a)}},link:{get:function(){return A()},set:function(a){"function"===
typeof a&&(A=a);return A()}}});c.utils.initOptions(t);return t};c.models.sankeyChart=function(){function a(c){c.each(function(a){var e={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},
{source:3,target:5,value:186}]},l=!1,v=!1;0<=("object"===typeof a.nodes&&a.nodes.length)&&0<=("object"===typeof a.links&&a.links.length)&&(l=!0);a.nodes&&0<a.nodes.length&&a.links&&0<a.links.length&&(v=!0);if(!l)return console.error("NVD3 Sankey chart error:","invalid data format for",a),console.info("Valid data format is: ",e,JSON.stringify(e)),M(c,"Error loading chart, data is invalid"),!1;if(!v)return M(c,"No data available"),!1;e=c.append("svg").attr("width",k).attr("height",g).append("g").attr("class",
"nvd3 nv-wrap nv-sankeyChart");f.nodeWidth(n).nodePadding(r).size([k,g]);var B=f.link();f.nodes(a.nodes).links(a.links).layout(32).center(t);var D=e.append("g").selectAll(".link").data(a.links).enter().append("path").attr("class","link").attr("d",B).style("stroke-width",function(a){return Math.max(1,a.dy)}).sort(function(a,c){return c.dy-a.dy});D.append("title").text(E);a=e.append("g").selectAll(".node").data(a.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+
a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(g-a.dy,d3.event.y)))+")");f.relayout();D.attr("d",B)}));a.append("rect").attr("height",function(a){return a.dy}).attr("width",f.nodeWidth()).style("fill",G).style("stroke",H).append("title").text(A);a.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",
".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<k/2}).attr("x",6+f.nodeWidth()).attr("text-anchor","start")});return a}var e={top:5,right:0,bottom:5,left:0},f=c.models.sankey(),k=600,g=400,n=36,r=40,l="units",t=void 0,v=d3.format(",.0f"),z=function(a){return v(a)+" "+l},D=d3.scale.category20(),E=function(a){return a.source.name+" \u2192 "+a.target.name+"\n"+z(a.value)},G=function(a){return a.color=D(a.name.replace(/ .*/,""))},
H=function(a){return d3.rgb(a.color).darker(2)},A=function(a){return a.name+"\n"+z(a.value)},M=function(a,c){a.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(c)};a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{units:{get:function(){return l},set:function(a){l=a}},width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return g},set:function(a){g=a}},format:{get:function(){return z},set:function(a){z=
a}},linkTitle:{get:function(){return E},set:function(a){E=a}},nodeWidth:{get:function(){return n},set:function(a){n=a}},nodePadding:{get:function(){return r},set:function(a){r=a}},center:{get:function(){return t},set:function(a){t=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},nodeStyle:{get:function(){return{}},set:function(a){G=void 0!==
a.fillColor?a.fillColor:G;H=void 0!==a.strokeColor?a.strokeColor:H;A=void 0!==a.title?a.title:A}}});c.utils.initOptions(a);return a};c.models.scatter=function(){function a(a){delete ya[a[0].series+":"+a[1]]}function e(a){var c=a[0].series+":"+a[1];var e=ya[c]=ya[c]||{};var f=!1;for(c=1;c<arguments.length;c+=2){var g=arguments[c];var k=arguments[c+1](a[0],a[1]);e[g]===k&&e.hasOwnProperty(g)||(e[g]=k,f=!0)}return f}function f(X){fa.reset();X.each(function(X){function wa(){da=!1;if(!u)return!1;if(!0===
T){var a=d3.merge(X.map(function(a,e){return a.values.map(function(a,f){var g=G(a,f),k=H(a,f);return[c.utils.NaNtoZero(z(g))+1E-4*Math.random(),c.utils.NaNtoZero(D(k))+1E-4*Math.random(),e,f,a]}).filter(function(a,c){return R(a[4],c)})}));if(0==a.length)return!1;3>a.length&&(a.push([z.range()[0]-20,D.range()[0]-20,null,null]),a.push([z.range()[1]+20,D.range()[1]+20,null,null]),a.push([z.range()[0]-20,D.range()[0]+20,null,null]),a.push([z.range()[1]+20,D.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,
-10],[-10,n+10],[g+10,n+10],[g+10,-10]]),f=d3.geom.voronoi(a).map(function(c,f){return{data:e.clip(c),series:a[f][2],point:a[f][3]}});Ga.select(".nv-point-paths").selectAll("path").remove();f=Ga.select(".nv-point-paths").selectAll("path").data(f);var l=f.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+t+"-"+c+")"});K&&l.style("fill",
d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));w&&(Ga.select(".nv-point-clips").selectAll("*").remove(),Ga.select(".nv-point-clips").selectAll("clipPath").data(a).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+t+"-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",S));var p=function(a,c,e){if(da)return 0;var f=X[c.series];if(void 0!==f){var g=f.values[c.point];
g.color=r(f,c.series);g.x=G(g);g.y=H(g);var l=v.node().getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop,p=window.pageXOffset||document.documentElement.scrollLeft;l={left:z(G(g,c.point))+l.left+p+k.left+10,top:D(H(g,c.point))+l.top+n+k.top+10};e({point:g,series:f,pos:l,relativePos:[z(G(g,c.point))+k.left,D(H(g,c.point))+k.top],seriesIndex:c.series,pointIndex:c.point,event:d3.event,element:a})}};f.on("click",function(a){p(this,a,x.elementClick)}).on("dblclick",function(a){p(this,
a,x.elementDblClick)}).on("mouseover",function(a){p(this,a,x.elementMouseover)}).on("mouseout",function(a,c){p(this,a,x.elementMouseout)})}else Ga.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementClick({point:f,series:e,pos:[z(G(f,c))+k.left,D(H(f,c))+k.top],relativePos:[z(G(f,c))+k.left,D(H(f,c))+k.top],seriesIndex:a.series,pointIndex:c,event:d3.event,element:this})}).on("dblclick",function(a,
c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementDblClick({point:f,series:e,pos:[z(G(f,c))+k.left,D(H(f,c))+k.top],relativePos:[z(G(f,c))+k.left,D(H(f,c))+k.top],seriesIndex:a.series,pointIndex:c})}).on("mouseover",function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementMouseover({point:f,series:e,pos:[z(G(f,c))+k.left,D(H(f,c))+k.top],relativePos:[z(G(f,c))+k.left,D(H(f,c))+k.top],seriesIndex:a.series,pointIndex:c,color:r(a,c)})}).on("mouseout",
function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementMouseout({point:f,series:e,pos:[z(G(f,c))+k.left,D(H(f,c))+k.top],relativePos:[z(G(f,c))+k.left,D(H(f,c))+k.top],seriesIndex:a.series,pointIndex:c,color:r(a,c)})})}v=d3.select(this);var va=c.utils.availableWidth(g,v,k),na=c.utils.availableHeight(n,v,k);c.utils.initSVG(v);X.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Ha=f.yScale().name===d3.scale.log().name?!0:!1,oa=J&&p&&ba?[]:d3.merge(X.map(function(a){return a.values.map(function(a,
c){return{x:G(a,c),y:H(a,c),size:A(a,c)}})}));z.domain(J||d3.extent(oa.map(function(a){return a.x}).concat(B)));O&&X[0]?z.range(q||[(va*N+va)/(2*X[0].values.length),va-va*(1+N)/(2*X[0].values.length)]):z.range(q||[0,va]);if(Ha){var Ba=d3.min(oa.map(function(a){if(0!==a.y)return a.y}));D.clamp(!0).domain(p||d3.extent(oa.map(function(a){return 0!==a.y?a.y:.1*Ba}).concat(L))).range(V||[na,0])}else D.domain(p||d3.extent(oa.map(function(a){return a.y}).concat(L))).range(V||[na,0]);E.domain(ba||d3.extent(oa.map(function(a){return a.size}).concat(C))).range(W||
sa);U=z.domain()[0]===z.domain()[1]||D.domain()[0]===D.domain()[1];z.domain()[0]===z.domain()[1]&&(z.domain()[0]?z.domain([z.domain()[0]-.01*z.domain()[0],z.domain()[1]+.01*z.domain()[1]]):z.domain([-1,1]));D.domain()[0]===D.domain()[1]&&(D.domain()[0]?D.domain([D.domain()[0]-.01*D.domain()[0],D.domain()[1]+.01*D.domain()[1]]):D.domain([-1,1]));isNaN(z.domain()[0])&&z.domain([-1,1]);isNaN(D.domain()[0])&&D.domain([-1,1]);Y=Y||z;ha=ha||D;la=la||E;var ea=z(1)!==Y(1)||D(1)!==ha(1)||E(1)!==la(1);za=za||
g;Aa=Aa||n;var ua=za!==g||Aa!==n,Ga=v.selectAll("g.nv-wrap.nv-scatter").data([X]);Ha=Ga.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+t);oa=Ha.append("defs");var ya=Ha.append("g"),Ka=Ga.select("g");Ga.classed("nv-single-point",U);ya.append("g").attr("class","nv-groups");ya.append("g").attr("class","nv-point-paths");Ha.append("g").attr("class","nv-point-clips");Ga.attr("transform","translate("+k.left+","+k.top+")");oa.append("clipPath").attr("id","nv-edge-clip-"+t).append("rect").attr("transform",
"translate( -10, -10)");Ga.select("#nv-edge-clip-"+t+" rect").attr("width",va+20).attr("height",0<na?na+20:0);Ka.attr("clip-path",I?"url(#nv-edge-clip-"+t+")":"");da=!0;va=Ga.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});va.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);va.exit().remove();va.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("nv-noninteractive",!u).classed("hover",function(a){return a.hover});
va.watchTransition(fa,"scatter: groups").style("fill",function(a,c){return r(a,c)}).style("stroke",function(a,c){return a.pointBorderColor||l||r(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);na=va.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return R(a[0],c)})});na.enter().append("path").attr("class",function(a){return"nv-point nv-point-"+a[1]}).style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",
function(a){return"translate("+c.utils.NaNtoZero(Y(G(a[0],a[1])))+","+c.utils.NaNtoZero(ha(H(a[0],a[1])))+")"}).attr("d",c.utils.symbol().type(function(a){return M(a[0])}).size(function(a){return E(A(a[0],a[1]))}));na.exit().each(a).remove();va.exit().selectAll("path.nv-point").watchTransition(fa,"scatter exit").attr("transform",function(a){return"translate("+c.utils.NaNtoZero(z(G(a[0],a[1])))+","+c.utils.NaNtoZero(D(H(a[0],a[1])))+")"}).remove();na.filter(function(a){return ea||ua||e(a,"x",G,"y",
H)}).watchTransition(fa,"scatter points").attr("transform",function(a){return"translate("+c.utils.NaNtoZero(z(G(a[0],a[1])))+","+c.utils.NaNtoZero(D(H(a[0],a[1])))+")"});na.filter(function(a){return ea||ua||e(a,"shape",M,"size",A)}).watchTransition(fa,"scatter points").attr("d",c.utils.symbol().type(function(a){return M(a[0])}).size(function(a){return E(A(a[0],a[1]))}));pa&&(na=va.selectAll(".nv-label").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return R(a[0],
c)})}),na.enter().append("text").style("fill",function(a,c){return a.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(Y(G(a[0],a[1])))+Math.sqrt(E(A(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(ha(H(a[0],a[1])))+")"}).text(function(a,c){return a[0].label}),na.exit().remove(),va.exit().selectAll("path.nv-label").watchTransition(fa,"scatter exit").attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(z(G(a[0],
a[1])))+Math.sqrt(E(A(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(D(H(a[0],a[1])))+")"}).remove(),na.each(function(a){d3.select(this).classed("nv-label",!0).classed("nv-label-"+a[1],!1).classed("hover",!1)}),na.watchTransition(fa,"scatter labels").attr("transform",function(a){return"translate("+(c.utils.NaNtoZero(z(G(a[0],a[1])))+Math.sqrt(E(A(a[0],a[1]))/Math.PI)+2)+","+c.utils.NaNtoZero(D(H(a[0],a[1])))+")"}));ra?(clearTimeout(ma),ma=setTimeout(wa,ra)):wa();Y=z.copy();ha=D.copy();la=E.copy();
za=g;Aa=n});fa.renderEnd("scatter immediate");return f}var k={top:0,right:0,bottom:0,left:0},g=null,n=null,r=c.utils.defaultColor(),l=null,t=Math.floor(1E5*Math.random()),v=null,z=d3.scale.linear(),D=d3.scale.linear(),E=d3.scale.linear(),G=function(a){return a.x},H=function(a){return a.y},A=function(a){return a.size||1},M=function(a){return a.shape||"circle"},B=[],L=[],C=[],u=!0,R=function(a){return!a.notActive},O=!1,N=.1,I=!1,w=!0,K=!1,S=function(){return 25},J=null,p=null,q=null,V=null,ba=null,
W=null,U=!1,x=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),T=!0,X=250,ra=300,pa=!1,Y,ha,la,za,Aa,ma,da=!1,fa=c.utils.renderWatch(x,X),sa=[16,256],ya={};f.dispatch=x;f.options=c.utils.optionsFunc.bind(f);f._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){v.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,e,f){c.dom.write(function(){v.select(".nv-groups").selectAll(".nv-series-"+
a).selectAll(".nv-point-"+e).classed("hover",f)})}};x.on("elementMouseover.point",function(a){u&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!0)});x.on("elementMouseout.point",function(a){u&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!1)});f._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return n},set:function(a){n=a}},xScale:{get:function(){return z},set:function(a){z=a}},yScale:{get:function(){return D},set:function(a){D=a}},
pointScale:{get:function(){return E},set:function(a){E=a}},xDomain:{get:function(){return J},set:function(a){J=a}},yDomain:{get:function(){return p},set:function(a){p=a}},pointDomain:{get:function(){return ba},set:function(a){ba=a}},xRange:{get:function(){return q},set:function(a){q=a}},yRange:{get:function(){return V},set:function(a){V=a}},pointRange:{get:function(){return W},set:function(a){W=a}},forceX:{get:function(){return B},set:function(a){B=a}},forceY:{get:function(){return L},set:function(a){L=
a}},forcePoint:{get:function(){return C},set:function(a){C=a}},interactive:{get:function(){return u},set:function(a){u=a}},pointActive:{get:function(){return R},set:function(a){R=a}},padDataOuter:{get:function(){return N},set:function(a){N=a}},padData:{get:function(){return O},set:function(a){O=a}},clipEdge:{get:function(){return I},set:function(a){I=a}},clipVoronoi:{get:function(){return w},set:function(a){w=a}},clipRadius:{get:function(){return S},set:function(a){S=a}},showVoronoi:{get:function(){return K},
set:function(a){K=a}},id:{get:function(){return t},set:function(a){t=a}},interactiveUpdateDelay:{get:function(){return ra},set:function(a){ra=a}},showLabels:{get:function(){return pa},set:function(a){pa=a}},pointBorderColor:{get:function(){return l},set:function(a){l=a}},x:{get:function(){return G},set:function(a){G=d3.functor(a)}},y:{get:function(){return H},set:function(a){H=d3.functor(a)}},pointSize:{get:function(){return A},set:function(a){A=d3.functor(a)}},pointShape:{get:function(){return M},
set:function(a){M=d3.functor(a)}},margin:{get:function(){return k},set:function(a){k.top=void 0!==a.top?a.top:k.top;k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return X},set:function(a){X=a;fa.reset(X)}},color:{get:function(){return r},set:function(a){r=c.utils.getColor(a)}},useVoronoi:{get:function(){return T},set:function(a){T=a;!1===T&&(w=!1)}}});c.utils.initOptions(f);return f};c.models.scatterChart=
function(){function a(w){J.reset();J.models(e);C&&J.models(f);u&&J.models(k);M&&J.models(n);B&&J.models(r);w.each(function(w){E=d3.select(this);c.utils.initSVG(E);var ba=c.utils.availableWidth(z,E,t),U=c.utils.availableHeight(D,E,t);a.update=function(){0===K?E.call(a):E.transition().duration(K).call(a)};a.container=this;O.setter(q(w),a.update).getter(p(w)).update();O.disabled=w.map(function(a){return!!a.disabled});if(!N)for(T in N={},O)N[T]=O[T]instanceof Array?O[T].slice(0):O[T];if(w&&w.length&&
w.filter(function(a){return a.values.length}).length)E.selectAll(".nv-noData").remove();else return c.utils.noData(a,E),J.renderEnd("scatter immediate"),a;H=e.xScale();A=e.yScale();var x=E.selectAll("g.nv-wrap.nv-scatterChart").data([w]);var T=x.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g");var V=x.select("g");T.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");T.append("g").attr("class","nv-x nv-axis");T.append("g").attr("class",
"nv-y nv-axis");T.append("g").attr("class","nv-scatterWrap");T.append("g").attr("class","nv-regressionLinesWrap");T.append("g").attr("class","nv-distWrap");T.append("g").attr("class","nv-legendWrap");R&&V.select(".nv-y.nv-axis").attr("transform","translate("+ba+",0)");L?(g.width(ba),x.select(".nv-legendWrap").datum(w).call(g),v||g.height()===t.top||(t.top=g.height(),U=c.utils.availableHeight(D,E,t)),x.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")")):V.select(".nv-legendWrap").selectAll("*").remove();
x.attr("transform","translate("+t.left+","+t.top+")");e.width(ba).height(U).color(w.map(function(a,c){a.color=a.color||G(a,c);return a.color}).filter(function(a,c){return!w[c].disabled})).showLabels(S);x.select(".nv-scatterWrap").datum(w.filter(function(a){return!a.disabled})).call(e);x.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");x=x.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});x.enter().append("g").attr("class","nv-regLines");
x=x.selectAll(".nv-regLine").data(function(a){return[a]});x.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);x.filter(function(a){return a.intercept&&a.slope}).watchTransition(J,"scatterPlusLineChart: regline").attr("x1",H.range()[0]).attr("x2",H.range()[1]).attr("y1",function(a,c){return A(H.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return A(H.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return G(a,e)}).style("stroke-opacity",function(a,
c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});C&&(f.scale(H)._ticks(c.utils.calcTicksX(ba/100,w)).tickSize(-U,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+A.range()[0]+")").call(f));u&&(k.scale(A)._ticks(c.utils.calcTicksY(U/36,w)).tickSize(-ba,0),V.select(".nv-y.nv-axis").call(k));M&&(n.getData(e.x()).scale(H).width(ba).color(w.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!w[c].disabled})),T.select(".nv-distWrap").append("g").attr("class",
"nv-distributionX"),V.select(".nv-distributionX").attr("transform","translate(0,"+A.range()[0]+")").datum(w.filter(function(a){return!a.disabled})).call(n));B&&(r.getData(e.y()).scale(A).width(U).color(w.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!w[c].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(R?ba:-r.size())+",0)").datum(w.filter(function(a){return!a.disabled})).call(r));
g.dispatch.on("stateChange",function(c){for(var e in c)O[e]=c[e];I.stateChange(O);a.update()});I.on("changeState",function(c){"undefined"!==typeof c.disabled&&(w.forEach(function(a,e){a.disabled=c.disabled[e]}),O.disabled=c.disabled);a.update()});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0);E.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);E.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",
r.size())});e.dispatch.on("elementMouseover.tooltip",function(a){E.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-U);E.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+n.size());l.data(a).hidden(!1)});H.copy();A.copy()});J.renderEnd("scatter with line immediate");return a}var e=c.models.scatter(),f=c.models.axis(),k=c.models.axis(),g=c.models.legend(),n=c.models.distribution(),r=c.models.distribution(),l=c.models.tooltip(),
t={top:30,right:20,bottom:50,left:75},v=null,z=null,D=null,E=null,G=c.utils.defaultColor(),H=e.xScale(),A=e.yScale(),M=!1,B=!1,L=!0,C=!0,u=!0,R=!1,O=c.utils.state(),N=null,I=d3.dispatch("stateChange","changeState","renderEnd"),w=null,K=250,S=!1;e.xScale(H).yScale(A);f.orient("bottom").tickPadding(10);k.orient(R?"right":"left").tickPadding(10);n.axis("x");r.axis("y");l.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return k.tickFormat()(a,c)});var J=c.utils.renderWatch(I,
K),p=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},q=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=I;a.scatter=e;a.legend=g;a.xAxis=f;a.yAxis=k;a.distX=n;a.distY=r;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return D},set:function(a){D=a}},container:{get:function(){return E},set:function(a){E=
a}},showDistX:{get:function(){return M},set:function(a){M=a}},showDistY:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return L},set:function(a){L=a}},showXAxis:{get:function(){return C},set:function(a){C=a}},showYAxis:{get:function(){return u},set:function(a){u=a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return w},set:function(a){w=a}},duration:{get:function(){return K},set:function(a){K=a}},showLabels:{get:function(){return S},
set:function(a){S=a}},margin:{get:function(){return t},set:function(a){void 0!==a.top&&(v=t.top=a.top);t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},rightAlignYAxis:{get:function(){return R},set:function(a){R=a;k.orient(a?"right":"left")}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a);g.color(G);n.color(G);r.color(G)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sparkline=
function(){function a(n){L.reset();n.each(function(a){var n=f-e.left-e.right,u=k-e.top-e.bottom;g=d3.select(this);c.utils.initSVG(g);r.domain(D||d3.extent(a,t)).range(G||[0,n]);l.domain(E||d3.extent(a,v)).range(H||[u,0]);a=g.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();
n.style("stroke",function(a,c){return a.color||z(a,c)}).attr("d",d3.svg.line().x(function(a,c){return r(t(a,c))}).y(function(a,c){return l(v(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return v(a,c)}),f=c(e.lastIndexOf(l.domain()[1])),g=c(e.indexOf(l.domain()[0]));e=c(e.length-1);return[A?g:null,A?f:null,M?e:null].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();
a.attr("cx",function(a,c){return r(t(a,a.pointIndex))}).attr("cy",function(a,c){return l(v(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return t(a,a.pointIndex)==r.domain()[1]?"nv-point nv-currentValue":v(a,a.pointIndex)==l.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});L.renderEnd("sparkline immediate");return a}var e={top:2,right:0,bottom:2,left:0},f=400,k=32,g=null,n=!0,r=d3.scale.linear(),l=d3.scale.linear(),t=function(a){return a.x},v=function(a){return a.y},z=c.utils.getColor(["#000"]),
D,E,G,H,A=!0,M=!0,B=d3.dispatch("renderEnd"),L=c.utils.renderWatch(B);a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return D},set:function(a){D=a}},yDomain:{get:function(){return E},set:function(a){E=a}},xRange:{get:function(){return G},set:function(a){G=a}},yRange:{get:function(){return H},set:function(a){H=a}},xScale:{get:function(){return r},
set:function(a){r=a}},yScale:{get:function(){return l},set:function(a){l=a}},animate:{get:function(){return n},set:function(a){n=a}},showMinMaxPoints:{get:function(){return A},set:function(a){A=a}},showCurrentPoint:{get:function(){return M},set:function(a){M=a}},x:{get:function(){return t},set:function(a){t=d3.functor(a)}},y:{get:function(){return v},set:function(a){v=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:
e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return z},set:function(a){z=c.utils.getColor(a)}}});a.dispatch=B;c.utils.initOptions(a);return a};c.models.sparklinePlus=function(){function a(B){M.reset();M.models(e);B.each(function(B){function C(){if(!t){var a=K.selectAll(".nv-hoverValue").data(l),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+n(e.x()(B[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);l.length&&(c.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",H),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),K.select(".nv-hoverValue .nv-xValue").text(v(e.x()(B[l[0]],l[0]))),c.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em"),K.select(".nv-hoverValue .nv-yValue").text(z(e.y()(B[l[0]],l[0]))))}}var u=d3.select(this);c.utils.initSVG(u);var A=c.utils.availableWidth(k,u,f),H=c.utils.availableHeight(g,u,f);a.update=function(){u.call(a)};a.container=this;if(B&&B.length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;var L=e.y()(B[B.length-1],B.length-1);n=e.xScale();r=e.yScale();var I=u.selectAll("g.nv-wrap.nv-sparklineplus").data([B]),w=
I.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),K=I.select("g");w.append("g").attr("class","nv-sparklineWrap");w.append("g").attr("class","nv-valueWrap");w.append("g").attr("class","nv-hoverArea");I.attr("transform","translate("+f.left+","+f.top+")");I=K.select(".nv-sparklineWrap");e.width(A).height(H);I.call(e);D&&(I=K.select(".nv-valueWrap").selectAll(".nv-currentValue").data([L]),I.enter().append("text").attr("class","nv-currentValue").attr("dx",G?-8:8).attr("dy",
".9em").style("text-anchor",G?"end":"start"),I.attr("x",A+(G?f.right:0)).attr("y",E?function(a){return r(a)}:0).style("fill",e.color()(B[B.length-1],B.length-1)).text(z(L)));w.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!t){var a=d3.mouse(this)[0]-f.left;a=Math.round(n.invert(a));for(var c=Math.abs(e.x()(B[0],0)-a),g=0,k=0;k<B.length;k++)Math.abs(e.x()(B[k],k)-a)<c&&(c=Math.abs(e.x()(B[k],k)-a),g=k);l=[g];C()}}).on("click",function(){t=!t}).on("mouseout",function(){l=[];C()});
K.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+","+-f.top+")"}).attr("width",A+f.left+f.right).attr("height",H+f.top)});M.renderEnd("sparklinePlus immediate");return a}var e=c.models.sparkline(),f={top:15,right:100,bottom:10,left:50},k=null,g=null,n,r,l=[],t=!1,v=d3.format(",r"),z=d3.format(",.2f"),D=!0,E=!0,G=!1,H=null,A=d3.dispatch("renderEnd"),M=c.utils.renderWatch(A);a.dispatch=A;a.sparkline=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return g},set:function(a){g=a}},xTickFormat:{get:function(){return v},set:function(a){v=a}},yTickFormat:{get:function(){return z},set:function(a){z=a}},showLastValue:{get:function(){return D},set:function(a){D=a}},alignValue:{get:function(){return E},set:function(a){E=a}},rightAlignValue:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return f},
set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(z){u.reset();u.models(B);z.each(function(z){var L=f-e.left-e.right,I=k-e.top-e.bottom;r=d3.select(this);c.utils.initSVG(r);A=B.xScale();M=B.yScale();var w=z;z.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,
e){a.index=e;a.seriesIndex=c;return a})});z=z.filter(function(a){return!a.disabled});z=d3.layout.stack().order(E).offset(D).values(function(a){return a.values}).x(l).y(t).out(function(a,c,e){a.display={y:e,y0:c}})(z);var K=r.selectAll("g.nv-wrap.nv-stackedarea").data([z]),R=K.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),J=R.append("defs");R=R.append("g");var p=K.select("g");R.append("g").attr("class","nv-areaWrap");R.append("g").attr("class","nv-scatterWrap");K.attr("transform",
"translate("+e.left+","+e.top+")");0==B.forceY().length&&B.forceY().push(0);B.width(L).height(I).x(l).y(function(a){if(void 0!==a.display)return a.display.y+a.display.y0}).color(z.map(function(a,c){a.color=a.color||g(a,a.seriesIndex);return a.color}));p.select(".nv-scatterWrap").datum(z).call(B);J.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");K.select("#nv-edge-clip-"+n+" rect").attr("width",L).attr("height",I);p.attr("clip-path",H?"url(#nv-edge-clip-"+n+")":"");var q=d3.svg.area().defined(v).x(function(a,
c){return A(l(a,c))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y+a.display.y0)}).interpolate(G),O=d3.svg.area().defined(v).x(function(a,c){return A(l(a,c))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y0)});L=p.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});L.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return O(a.values,a.seriesIndex)}).on("mouseover",
function(a,c){d3.select(this).classed("hover",!0);C.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);C.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);C.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});L.exit().remove();L.style("fill",
function(a,c){return a.color||g(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||g(a,a.seriesIndex)});L.watchTransition(u,"stackedArea path").attr("d",function(a,c){return q(a.values,c)});B.dispatch.on("elementMouseover.area",function(a){p.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!0)});B.dispatch.on("elementMouseout.area",function(a){p.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,
e=a[0].length,f,g,k,l=[];for(g=0;g<e;++g){for(k=f=0;f<w.length;f++)k+=t(w[f].values[g]);if(k)for(f=0;f<c;f++)a[f][g][1]/=k;else for(f=0;f<c;f++)a[f][g][1]=0}for(g=0;g<e;++g)l[g]=0;return l}});u.renderEnd("stackedArea immediate");return a}var e={top:0,right:0,bottom:0,left:0},f=960,k=500,g=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),r=null,l=function(a){return a.x},t=function(a){return a.y},v=function(a,c){return!isNaN(t(a,c))&&null!==t(a,c)},z="stack",D="zero",E="default",G="linear",H=
!1,A,M,B=c.models.scatter(),L=250,C=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");B.pointSize(2.2).pointDomain([2.2,2.2]);var u=c.utils.renderWatch(C,L);a.dispatch=C;a.scatter=B;B.dispatch.on("elementClick",function(){C.elementClick.apply(this,arguments)});B.dispatch.on("elementMouseover",function(){C.elementMouseover.apply(this,arguments)});B.dispatch.on("elementMouseout",function(){C.elementMouseout.apply(this,arguments)});
a.interpolate=function(c){if(!arguments.length)return G;G=c;return a};a.duration=function(c){if(!arguments.length)return L;L=c;u.reset(L);B.duration(L);return a};a.dispatch=C;a.scatter=B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return k},set:function(a){k=a}},defined:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return H},set:function(a){H=a}},offset:{get:function(){return D},
set:function(a){D=a}},order:{get:function(){return E},set:function(a){E=a}},interpolate:{get:function(){return G},set:function(a){G=a}},x:{get:function(){return l},set:function(a){l=d3.functor(a)}},y:{get:function(){return t},set:function(a){t=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return g},set:function(a){g=
c.utils.getColor(a)}},style:{get:function(){return z},set:function(c){z=c;switch(z){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return L},set:function(a){L=a;u.reset(L);B.duration(L)}}});c.utils.inheritOptions(a,
B);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(l){T.reset();T.models(e);B&&T.models(f);L&&T.models(k);l.each(function(l){function J(){B&&wa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+fa+")").transition().duration(W).call(f)}function Y(){if(L){if("expand"===e.style()||"stack_percent"===e.style()){var a=k.tickFormat();U&&a===pa||(U=a);k.tickFormat(pa)}else U&&(k.tickFormat(U),U=null);wa.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(k)}}
function T(a){wa.select(".nv-focus .nv-stackedWrap").datum(l.filter(function(a){return!a.disabled}).map(function(c,f){return{key:c.key,area:c.area,classed:c.classed,values:c.values.filter(function(c,f){return e.x()(c,f)>=a[0]&&e.x()(c,f)<=a[1]}),disableTooltip:c.disableTooltip}})).transition().duration(W).call(e);J();Y()}var ha=d3.select(this);c.utils.initSVG(ha);var da=c.utils.availableWidth(D,ha,v),fa=c.utils.availableHeight(E,ha,v)-(u?t.height():0);a.update=function(){ha.transition().duration(W).call(a)};
a.container=this;K.setter(ra(l),a.update).getter(X(l)).update();K.disabled=l.map(function(a){return!!a.disabled});if(!S)for(sa in S={},K)S[sa]=K[sa]instanceof Array?K[sa].slice(0):K[sa];if(l&&l.length&&l.filter(function(a){return a.values.length}).length)ha.selectAll(".nv-noData").remove();else return c.utils.noData(a,ha),a;I=e.xScale();w=e.yScale();var sa=ha.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]);var ya=sa.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),
wa=sa.select("g");ya.append("g").attr("class","nv-legendWrap");ya.append("g").attr("class","nv-controlsWrap");var ua=ya.append("g").attr("class","nv-focus");ua.append("g").attr("class","nv-background").append("rect");ua.append("g").attr("class","nv-x nv-axis");ua.append("g").attr("class","nv-y nv-axis");ua.append("g").attr("class","nv-stackedWrap");ua.append("g").attr("class","nv-interactive");ya.append("g").attr("class","nv-focusWrap");A?(ya=H&&"top"===M?da-q:da,g.width(ya),wa.select(".nv-legendWrap").datum(l).call(g),
"bottom"===M?(ya=(B?12:0)+10,v.bottom=Math.max(g.height()+ya,v.bottom),fa=c.utils.availableHeight(E,ha,v)-(u?t.height():0),ya=fa+ya,wa.select(".nv-legendWrap").attr("transform","translate(0,"+ya+")")):"top"===M&&(z||v.top==g.height()||(v.top=g.height(),fa=c.utils.availableHeight(E,ha,v)-(u?t.height():0)),wa.select(".nv-legendWrap").attr("transform","translate("+(da-ya)+","+-v.top+")"))):wa.select(".nv-legendWrap").selectAll("*").remove();if(H){var Ja=[{key:ba.stacked||"Stacked",metaKey:"Stacked",
disabled:"stack"!=e.style(),style:"stack"},{key:ba.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:ba.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:ba.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];q=V.length/3*260;Ja=Ja.filter(function(a){return-1!==V.indexOf(a.metaKey)});n.width(q).color(["#444","#444","#444"]);wa.select(".nv-controlsWrap").datum(Ja).call(n);
ya=Math.max(n.height(),A&&"top"===M?g.height():0);v.top!=ya&&(v.top=ya,fa=c.utils.availableHeight(E,ha,v)-(u?t.height():0));wa.select(".nv-controlsWrap").attr("transform","translate(0,"+-v.top+")")}else wa.select(".nv-controlsWrap").selectAll("*").remove();sa.attr("transform","translate("+v.left+","+v.top+")");C&&wa.select(".nv-y.nv-axis").attr("transform","translate("+da+",0)");R&&(r.width(da).height(fa).margin({left:v.left,top:v.top}).svgContainer(ha).xScale(I),sa.select(".nv-interactive").call(r));
wa.select(".nv-focus .nv-background rect").attr("width",da).attr("height",fa);e.width(da).height(fa).color(l.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!l[c].disabled}));sa=wa.select(".nv-focus .nv-stackedWrap").datum(l.filter(function(a){return!a.disabled}));B&&f.scale(I)._ticks(c.utils.calcTicksX(da/100,l)).tickSize(-fa,0);L&&(ya="wiggle"===e.offset()?0:c.utils.calcTicksY(fa/36,l),k.scale(w)._ticks(ya).tickSize(-da,0));u?(t.width(da),wa.select(".nv-focusWrap").attr("transform",
"translate(0,"+(fa+v.bottom+t.margin().top)+")").datum(l.filter(function(a){return!a.disabled})).call(t),da=t.brush.empty()?t.xDomain():t.brush.extent(),null!==da&&T(da)):(sa.transition().call(e),J(),Y());e.dispatch.on("areaClick.toggle",function(c){1===l.filter(function(a){return!a.disabled}).length?l.forEach(function(a){a.disabled=!1}):l.forEach(function(a,e){a.disabled=e!=c.seriesIndex});K.disabled=l.map(function(a){return!!a.disabled});p.stateChange(K);a.update()});g.dispatch.on("stateChange",
function(c){for(var e in c)K[e]=c[e];p.stateChange(K);a.update()});n.dispatch.on("legendClick",function(c,f){c.disabled&&(Ja=Ja.map(function(a){a.disabled=!0;return a}),c.disabled=!1,e.style(c.style),K.style=e.style(),p.stateChange(K),a.update())});r.dispatch.on("elementMousemove",function(f){e.clearHighlights();var g,k,n,p=[],q=0,t=!0;l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(l,r){k=c.interactiveBisect(l.values,f.pointXValue,a.x());var u=l.values[k];null!=a.y()(u,
k)&&e.highlightPoint(r,k,!0);"undefined"!==typeof u&&("undefined"===typeof g&&(g=u),"undefined"===typeof n&&(n=a.xScale()(a.x()(u,k))),r="expand"==e.style()?u.display.y:a.y()(u,k),p.push({key:l.key,value:r,color:G(l,l.seriesIndex),point:u}),O&&"expand"!=e.style()&&null!=r&&(q+=r,t=!1))});p.reverse();if(2<p.length){var u=a.yScale().invert(f.mouseY),v=null;p.forEach(function(a,c){u=Math.abs(u);var e=Math.abs(a.point.display.y0);a=Math.abs(a.point.display.y);u>=e&&u<=a+e&&(v=c)});null!=v&&(p[v].highlight=
!0)}O&&"expand"!=e.style()&&2<=p.length&&!t&&p.push({key:N,value:q,total:!0});var w=a.x()(g,k),z=r.tooltip.valueFormatter();"expand"===e.style()||"stack_percent"===e.style()?(x||(x=z),z=d3.format(".1%")):x&&(z=x,x=null);r.tooltip.valueFormatter(z).data({value:w,series:p})();r.renderGuideLine(n)});r.dispatch.on("elementMouseout",function(a){e.clearHighlights()});t.dispatch.on("onBrush",function(a){T(a)});p.on("changeState",function(c){"undefined"!==typeof c.disabled&&l.length===c.disabled.length&&
(l.forEach(function(a,e){a.disabled=c.disabled[e]}),K.disabled=c.disabled);"undefined"!==typeof c.style&&e.style(c.style);a.update()})});T.renderEnd("stacked Area chart immediate");return a}var e=c.models.stackedArea(),f=c.models.axis(),k=c.models.axis(),g=c.models.legend(),n=c.models.legend(),r=c.interactiveGuideline(),l=c.models.tooltip(),t=c.models.focus(c.models.stackedArea()),v={top:10,right:25,bottom:50,left:60},z=null,D=null,E=null,G=c.utils.defaultColor(),H=!0,A=!0,M="top",B=!0,L=!0,C=!1,
u=!1,R=!1,O=!0,N="TOTAL",I,w,K=c.utils.state(),S=null,J=null,p=d3.dispatch("stateChange","changeState","renderEnd"),q=250,V=["Stacked","Stream","Expanded"],ba={},W=250;K.style=e.style();f.orient("bottom").tickPadding(7);k.orient(C?"right":"left");l.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return k.tickFormat()(a,c)});r.tooltip.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return null==a?"N/A":k.tickFormat()(a,
c)});var U=null,x=null;n.updateState(!1);var T=c.utils.renderWatch(p);e.style();var X=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:e.style()}}},ra=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},pa=d3.format("%");e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point);a.point.y=e.y()(a.point);l.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});
a.dispatch=p;a.stacked=e;a.legend=g;a.controls=n;a.xAxis=f;a.x2Axis=t.xAxis;a.yAxis=k;a.y2Axis=t.yAxis;a.interactiveLayer=r;a.tooltip=l;a.focus=t;a.dispatch=p;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return D},set:function(a){D=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return A},set:function(a){A=a}},legendPosition:{get:function(){return M},set:function(a){M=a}},showXAxis:{get:function(){return B},set:function(a){B=
a}},showYAxis:{get:function(){return L},set:function(a){L=a}},defaultState:{get:function(){return S},set:function(a){S=a}},noData:{get:function(){return J},set:function(a){J=a}},showControls:{get:function(){return H},set:function(a){H=a}},controlLabels:{get:function(){return ba},set:function(a){ba=a}},controlOptions:{get:function(){return V},set:function(a){V=a}},showTotalInTooltip:{get:function(){return O},set:function(a){O=a}},totalLabel:{get:function(){return N},set:function(a){N=a}},focusEnable:{get:function(){return u},
set:function(a){u=a}},focusHeight:{get:function(){return t.height()},set:function(a){t.height(a)}},brushExtent:{get:function(){return t.brushExtent()},set:function(a){t.brushExtent(a)}},margin:{get:function(){return v},set:function(a){void 0!==a.top&&(z=v.top=a.top);v.right=void 0!==a.right?a.right:v.right;v.bottom=void 0!==a.bottom?a.bottom:v.bottom;v.left=void 0!==a.left?a.left:v.left}},focusMargin:{get:function(){return t.margin},set:function(a){t.margin.top=void 0!==a.top?a.top:t.margin.top;t.margin.right=
void 0!==a.right?a.right:t.margin.right;t.margin.bottom=void 0!==a.bottom?a.bottom:t.margin.bottom;t.margin.left=void 0!==a.left?a.left:t.margin.left}},duration:{get:function(){return W},set:function(a){W=a;T.reset(W);e.duration(W);f.duration(W);k.duration(W)}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a);g.color(G);e.color(G);t.color(G)}},x:{get:function(){return e.x()},set:function(a){e.x(a);t.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);t.y(a)}},rightAlignYAxis:{get:function(){return C},
set:function(a){C=a;k.orient(C?"right":"left")}},useInteractiveGuideline:{get:function(){return R},set:function(c){R=!!c;a.interactive(!c);a.useVoronoi(!c);e.scatter.interactive(!c)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedAreaWithFocusChart=function(){return c.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)};c.models.sunburst=function(){function a(a){var c=Math.max(0,Math.min(2*Math.PI,I(a.x)));a=Math.max(0,Math.min(2*Math.PI,I(a.x+a.dx)));return(c+
a)/2*(180/Math.PI)-90}function e(a){var c=Math.max(0,Math.min(2*Math.PI,I(a.x)));return(Math.max(0,Math.min(2*Math.PI,I(a.x+a.dx)))-c)/(2*Math.PI)}function f(a){var c=Math.max(0,Math.min(2*Math.PI,I(a.x)));return Math.max(0,Math.min(2*Math.PI,I(a.x+a.dx)))-c>L}function k(a,c){var e=d3.interpolate(I.domain(),[S.x,S.x+S.dx]),f=d3.interpolate(w.domain(),[S.y,1]),g=d3.interpolate(w.range(),[S.y?20:0,q]);return 0===c?function(){return ba(a)}:function(c){I.domain(e(c));w.domain(f(c)).range(g(c));return ba(a)}}
function g(a){var c=d3.interpolate({x:a.x0,dx:a.dx0,y:a.y0,dy:a.dy0},a);return function(e){e=c(e);a.x0=e.x;a.dx0=e.dx;a.y0=e.y;a.dy0=e.dy;return ba(e)}}function n(a){a.forEach(function(a){var c=u(a);(c=V[c])?(a.dx0=c.dx,a.x0=c.x,a.dy0=c.dy,a.y0=c.y):(a.dx0=a.dx,a.x0=a.x,a.dy0=a.dy,a.y0=a.y);c=u(a);V[c]||(V[c]={});c=V[c];c.dx=a.dx;c.x=a.x;c.dy=a.dy;c.y=a.y})}function r(c){var e=H.selectAll("text"),g=H.selectAll("path");e.transition().attr("opacity",0);S=c;g.transition().duration(O).attrTween("d",k).each("end",
function(e){e.x>=c.x&&e.x<c.x+c.dx&&e.depth>=c.depth&&d3.select(this.parentNode).select("text").transition().duration(O).text(function(a){return B(a)}).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(){var f=this.getBBox().width;if(0===e.depth)return"translate("+f/2*-1+",0)";if(e.depth===c.depth)return"translate("+(w(e.y)+5)+",0)";var g=a(e),k=90<a(e)?180:0;return 0===k?"rotate("+g+")translate("+(w(e.y)+5)+",0)":"rotate("+g+")translate("+(w(e.y)+f+5)+",0)rotate("+k+")"})})}
function l(k){W.reset();k.each(function(k){H=d3.select(this);J=c.utils.availableWidth(v,H,t);p=c.utils.availableHeight(z,H,t);q=Math.min(J,p)/2;w.range([0,q]);var l=H.select("g.nvd3.nv-wrap.nv-sunburst");l[0][0]?l.attr("transform","translate("+(J/2+t.left+t.right)+","+(p/2+t.top+t.bottom)+")"):l=H.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+G).attr("transform","translate("+(J/2+t.left+t.right)+","+(p/2+t.top+t.bottom)+")");H.on("click",function(a,c){N.chartClick({data:a,index:c,
pos:d3.event,id:G})});K.value(E[D]||E.count);k=K.nodes(k[0]).reverse();n(k);l=l.selectAll(".arc-container").data(k,u);l.enter().append("g").attr("class","arc-container").append("path").attr("d",ba).style("fill",function(a){return a.color?a.color:R?A((a.children?a:a.parent).name):A(a.name)}).style("stroke","#FFF").on("click",function(a,c){r(a);N.elementClick({data:a,index:c})}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("opacity",.8);N.elementMouseover({data:a,color:d3.select(this).style("fill"),
percent:e(a)})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);N.elementMouseout({data:a})}).on("mousemove",function(a,c){N.elementMousemove({data:a})});l.each(function(a){d3.select(this).select("path").transition().duration(O).attrTween("d",g)});M&&(l.selectAll("text").remove(),l.append("text").text(function(a){return B(a)}).transition().duration(O).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(c){var e=this.getBBox().width;if(0===c.depth)return"rotate(0)translate("+
e/2*-1+",0)";var f=a(c),g=90<a(c)?180:0;return 0===g?"rotate("+f+")translate("+(w(c.y)+5)+",0)":"rotate("+f+")translate("+(w(c.y)+e+5)+",0)rotate("+g+")"}));r(k[k.length-1]);l.exit().transition().duration(O).attr("opacity",0).each("end",function(a){a=u(a);V[a]=void 0}).remove()});W.renderEnd("sunburst immediate");return l}var t={top:0,right:0,bottom:0,left:0},v=600,z=600,D="count",E={count:function(a){return 1},value:function(a){return a.value||a.size},size:function(a){return a.value||a.size}},G=
Math.floor(1E4*Math.random()),H=null,A=c.utils.defaultColor(),M=!1,B=function(a){return"count"===D?a.name+" #"+a.value:a.name+" "+(a.value||a.size)},L=.02,C=function(a,c){return a.name>c.name},u=function(a,c){return a.name},R=!0,O=500,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),I=d3.scale.linear().range([0,2*Math.PI]),w=d3.scale.sqrt(),K=d3.layout.partition().sort(C),S,J,p,q,V={},ba=d3.svg.arc().startAngle(function(a){return Math.max(0,
Math.min(2*Math.PI,I(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,I(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,w(a.y))}).outerRadius(function(a){return Math.max(0,w(a.y+a.dy))}),W=c.utils.renderWatch(N);l.dispatch=N;l.options=c.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return z},set:function(a){z=a}},mode:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return G},
set:function(a){G=a}},duration:{get:function(){return O},set:function(a){O=a}},groupColorByParent:{get:function(){return R},set:function(a){R=!!a}},showLabels:{get:function(){return M},set:function(a){M=!!a}},labelFormat:{get:function(){return B},set:function(a){B=a}},labelThreshold:{get:function(){return L},set:function(a){L=a}},sort:{get:function(){return C},set:function(a){C=a}},key:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return t},set:function(a){t.top=void 0!=a.top?
a.top:t.top;t.right=void 0!=a.right?a.right:t.right;t.bottom=void 0!=a.bottom?a.bottom:t.bottom;t.left=void 0!=a.left?a.left:t.left}},color:{get:function(){return A},set:function(a){A=c.utils.getColor(a)}}});c.utils.initOptions(l);return l};c.models.sunburstChart=function(){function a(f){z.reset();z.models(e);f.each(function(f){var g=d3.select(this);c.utils.initSVG(g);var l=c.utils.availableWidth(null,g,k),n=c.utils.availableHeight(null,g,k);a.update=function(){0===t?g.call(a):g.transition().duration(t).call(a)};
a.container=g;if(f&&f.length)g.selectAll(".nv-noData").remove();else return c.utils.noData(a,g),a;e.width(l).height(n).margin(k);g.call(e)});z.renderEnd("sunburstChart immediate");return a}var e=c.models.sunburst(),f=c.models.tooltip(),k={top:30,right:20,bottom:20,left:20},g=c.utils.defaultColor(),n=!1,r=null,l=null,t=250,v=d3.dispatch("stateChange","changeState","renderEnd"),z=c.utils.renderWatch(v);f.duration(0).headerEnabled(!1).valueFormatter(function(a){return a});e.dispatch.on("elementMouseover.tooltip",
function(a){a.series={key:a.data.name,value:a.data.value||a.data.size,color:a.color,percent:a.percent};n||(delete a.percent,delete a.series.percent);f.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){f()});a.dispatch=v;a.sunburst=e;a.tooltip=f;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return l},set:function(a){l=a}},defaultState:{get:function(){return r},set:function(a){r=
a}},showTooltipPercent:{get:function(){return n},set:function(a){n=a}},color:{get:function(){return g},set:function(a){g=a;e.color(g)}},duration:{get:function(){return t},set:function(a){t=a;z.reset(t);e.duration(t)}},margin:{get:function(){return k},set:function(a){k.top=void 0!==a.top?a.top:k.top;k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;k.left=void 0!==a.left?a.left:k.left;e.margin(k)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.version=
"1.8.5"})();
(function(c,a){var e=0;c.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=e;e+=1;this.openRequest=this.chart=
this.table=null;this.eventNamespace=".pt"},_init:function(){var a=c(this.element),e=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var g=a.find(".pt-chart");this.chart=g.length?g.first():null;e.renderFilter||e.renderOptions?(g="#"+a.attr("id"),e.renderOptions?(c(g+"-options").show(),e.collapseOptions&&(c(g+"-options legend").siblings().toggle(),c(g+"-options legend").children().toggle())):
c(g+"-options").hide(),e.renderFilter?(c(g+"-filters").show(),e.collapseFilter&&(c(g+"-filters legend").siblings().toggle(),c(g+"-filters legend").children().toggle())):c(g+"-options").hide()):a.find(".pt-form-container").hide();e.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());e.numberFormatter=function(a){var c=e.precision;if(null===a||"undefined"==typeof a)return"-";c=c||0==c?a.toFixed(c):a.toString();c=c.split(".");
a=c[0];c=1<c.length?"."+c[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+e.thousandGrouping+"})+(?!\\d))","g"),e.thousandSeparator);return a+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=c(this.element),e=null;this._unbindEvents();var g=a.find('input[type="hidden"][name="pivotdata"]');g.length&&(e=JSON.parse(c(g).first().val()));e?"count"==e.method&&(this.options.precision=0,this.options.minTickSize=1):(e={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide(),a.find(".pt-export-opt").hide());this.data=e;e.nodata?(a.find(".pt-table").first().empty().append(c('<div class="pt-no-data">'+e.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide(),a.find(".pt-export-opt").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();e.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();
a.find(".pt-throbber").hide()},_renderTable:function(){var a=c(this.element),e=a.find(".pt-table").first().empty();this.table=null;var g=this.data;if(!g.empty)if(this.options.renderTable){var n=g.cells.slice(0),r=g.cols,l=g.rows,t=g.total,v=g.labels,z=!1,D=!1;g=g.facts;1==g.length&&"list"!=g[0][1]&&(1==l.length&&null===l[0][4]&&(z=!0),1==r.length&&null===r[0][4]&&(D=!0));g=this.options;var E=g.showTotals,G;if(D&&E)for(r=[],G=0;G<l.length;G++)n[G]=[];else{var H=function(a,c){return"__other__"!=r[c][0]};
for(G=0;G<l.length;G++)n[G]=n[G].filter(H);r=r.filter(function(a){return"__other__"!=a[0]})}z&&E?(l=[],n=[]):(n=n.filter(function(a,c){return"__other__"!=l[c][0]}),l=l.filter(function(a){return"__other__"!=a[0]}));e=d3.select(e.get(0)).append("table").attr("class","dataTable display report");e.append("thead").call(this._renderHeader,r,v,g).call(this._renderColumns,r,v,D);z&&E||e.append("tbody").call(this._renderRows,this,l,r,v,n,g);E&&e.append("tfoot").call(this._renderFooter,l,r,v,t);this.table=
c(e.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide(),a.find(".pt-export-opt").hide()):(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show(),a.find(".pt-export-opt").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide(),a.find(".pt-export-opt").hide()},_renderHeader:function(a,c,e,n){a=a.append("tr");a.append("th").attr("scope","col").text(e.layer);c.length&&a.append("th").attr({scope:"col",colspan:c.length}).text(e.cols);
n.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(e.total);return a},_renderColumns:function(a,c,e,n){a=a.append("tr");a.append("th").attr({scope:"col","class":"pt-rows-header"}).text(e.rows);a.selectAll("th.pt-data").data(c).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return n?"":a[4]});return a},_renderRows:function(a,c,e,n,r,l,t){e=a.selectAll("tr.pt-row").data(e).enter().append("tr").attr("class",function(a,
c){return c%2?"odd":"even"});e.append("td").text(function(a){return a[4]});e.selectAll("td.pt-cell").data(function(a,c){return l[c]}).enter().append("td").attr("class","pt-cell").each(c._renderCell,r);t.showTotals&&e.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return e},_renderCell:function(a,e,g){e=d3.select(this);for(var f=a.items,k,l=0,t=f.length;l<t;l++){k=f[l];var v=e.append("div").attr("class","pt-cell-value");null===k?v.text(g.none):c.isArray(k)?v.append("ul").selectAll("li").data(k).enter().append("li").html(function(a){return a}):
v.text(k);k=a.keys[l];f&&k&&k.length&&(c(v.node()).data("keys",k).data("fact",l),v.append("div").attr("class","pt-cell-zoom"));1<t-l&&v.append("span").text(" / ")}},_renderFooter:function(a,c,e,n,r){c=c.length%2?"odd":"even";a=a.append("tr").attr("class",c+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(n.total);a.selectAll("td.pt-col-total").data(e).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class",
"pt-total").text(r);return a},_renderChartOptions:function(){var a=c(this.element),e=a.find(".pt-chart-controls").first().empty(),g=this.data;if(!g.empty&&this.options.renderChart){g=g.labels;var n=a.attr("id");a=g.layer;var r=g.rows,l=g.cols,t=g.per,v=c('<div class="pt-chart-opts">'),z=n+"-pchart-rows",D=n+"-vchart-rows",E=n+"-hchart-rows",G=n+"-schart-rows",H=n+"-pchart-cols",A=n+"-vchart-cols",M=n+"-hchart-cols";n+="-schart-cols";a&&c(v).append(c('<span class="pt-chart-label">'+a+": </span>"));
r&&c(v).append(c('<div id="'+z+'" class="pt-chart-icon pt-pchart"/><div id="'+D+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+r+"</span>"));l&&c(v).append(c('<div id="'+H+'" class="pt-chart-icon pt-pchart"/><div id="'+A+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+l+"</span>"));r&&l&&c(v).append(c('<span class="pt-chart-label">| '+g.breakdown+': </span><div id="'+G+'" class="pt-chart-icon pt-schart"/><div id="'+E+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+
t+" "+r+'</span><div id="'+n+'"  class="pt-chart-icon pt-schart"/><div id="'+M+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+t+" "+l+"</span>"));c(e).append(v)}},_truncateLabel:function(a,c){return a&&a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var e=c(this.element),f=this.data;e.find(".pt-chart-contents").hide();if(e=this.chart)if(c(e).unbind("plothover").unbind("plotclick").empty(),!f.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=
!0;else{e=this.options.collapseChart;if("undefined"==typeof a||!a){if(e)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;e=a.type;a=a.axis;var n=f.labels,r=n.per,l=n.layer+" "+r+" "+n.rows;n=n.layer+" "+r+" "+n.cols;r=f.filter;var t=r[0],v=r[1];"piechart"==e?"rows"==a?this._renderPieChart(f.rows,l,t):this._renderPieChart(f.cols,n,v):"barchart"==e?
"rows"==a?this._renderBarChart(f.rows,f.facts,l,t):this._renderBarChart(f.cols,f.facts,n,v):"breakdown"==e?"rows"==a?this._renderBreakDown(f,0,l,r):this._renderBreakDown(f,1,n,r):"spectrum"==e&&this._renderSpectrum(f,a,r)}}},_renderPieChart:function(a,e,g){var f=this.chart;if(f){c(f).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});e?c(f).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):c(f).siblings(".pt-chart-title").empty();var k=[],l=0;for(e=0;e<a.length;e++){var t=
a[e];!t[1]&&0<=t[2][0]&&(k.push({index:t[0],label:t[4],value:t[2][0],key:t[3]}),l+=t[2][0])}var v=this;v.chartOptions.currentDataIndex=null;var z=function(a){var e=a.index;if(v.chartOptions.currentDataIndex!=e){v._removeChartTooltip();v.chartOptions.currentDataIndex=e;a=a.data;var f=a.value,g=d3.event;v._renderChartTooltip(g.pageX,g.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+f+" ("+Math.round(f/l*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},
e)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).labelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0);a.tooltip.enabled(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",z).on("elementMouseout",function(){c(".pt-tooltip").remove();v.chartOptions.currentDataIndex=null;v.chartOptions.currentSeriesIndex=null});if(v.options.exploreChart&&g)a.pie.dispatch.on("elementClick",function(a){a=
a.data;v._chartExplore([["__other__"==a.index?g+"__belongs":g,a.key]])});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(k).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},_renderBarChart:function(a,e,g,n){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"96%"});for(var k=[],t=this._truncateLabel,v,z,D,E=0;E<e.length;E++){v={key:e[E][2]};z=[];for(var G=0;G<a.length;G++)D=a[G],z.push({label:D[4],value:D[2][E],filterIndex:D[0],
filterKey:D[3]});v.values=z;k.push(v)}c(f).css({height:"360px"});g?c(f).siblings(".pt-chart-title").html("<h4>"+g+"</h4>"):c(f).siblings(".pt-chart-title").empty();var H=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},A=this,M=this.options.numberFormatter;nv.addGraph(function(){if(1<k.length){var a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showControls(!1);
var e=a.multibar}else a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showValues(!0),a.valueFormat(M),e=a.discretebar;a.tooltip.contentGenerator(H);a.yAxis.tickFormat(M);a.xAxis.tickFormat(function(a){return t(a,18)});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(k).transition().duration(500).call(a);if(A.options.exploreChart&&n)e.dispatch.on("elementClick",function(a){var c=a.data.filterKey;null===c&&(c="None");var e=
n;"__other__"==a.data.filterIndex&&(e+="__belongs");A._chartExplore([[e,c]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,e,g,n){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"96%"});var k=a.cells,t=[],v=[];if(0===e){var z=a.rows;var D=a.cols;a=function(a,c){return k[t[a]][v[c]].values[0]};var E=n[0];var G=n[1]}else z=a.cols,D=a.rows,a=function(a,c){return k[v[c]][t[a]].values[0]},E=n[1],G=n[0];var H;n=[];e=[];var A=0;for(H=z.length;A<H;A++)z[A][1]||
(n.push(z[A]),t.push(A));A=0;for(H=D.length;A<H;A++)D[A][1]||(e.push(D[A]),v.push(A));var M=[];for(z=0;z<e.length;z++){D={key:e[z][4],filterIndex:e[z][0],filterKey:e[z][3]};A=[];for(H=0;H<n.length;H++)A.push({label:n[H][4],filterIndex:n[H][0],filterKey:n[H][3],value:a(H,z)});D.values=A;M.push(D)}a=Math.max(n.length*Math.max(16*(e.length+1),50)+70,360);c(f).css({height:a+"px"});g?c(f).siblings(".pt-chart-title").html("<h4>"+g+"</h4>"):c(f).siblings(".pt-chart-title").empty();var B=function(a){a=a.data;
return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.series+'</div><div class="pt-tooltip-text">'+a.label+': <span class="pt-tooltip-value">'+a.value+"</span></div></div>"},L=this,C=this.options.numberFormatter,u=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).duration(350).showControls(!0);
a.tooltip.contentGenerator(B);a.valueFormat(C);a.yAxis.tickFormat(C);a.xAxis.tickFormat(function(a){return u(a,24)});d3.select(c(f).get(0)).append("svg").attr("class","nv").datum(M).call(a);if(L.options.exploreChart&&E&&G)a.multibar.dispatch.on("elementClick",function(a){a=a.data;var c=d3.event.currentTarget.parentElement.__data__,e=c.filterKey;null===e&&(e="None");c="__other__"==c.filterIndex?G+"__belongs":G;var f=a.filterKey;null===f&&(f="None");L._chartExplore([["__other__"==a.filterIndex?E+"__belongs":
E,f],[c,e]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(e,k,g){var f=this.chart;if(f){var r=this,l=e.cells,t=e.labels;if("rows"==k){var v=e.rows;var z=e.cols;k=t.rows;var D=t.cols;var E=g[0];var G=g[1];var H=function(a,c){return l[a][c]}}else v=e.cols,z=e.rows,k=t.cols,D=t.rows,E=g[1],G=g[0],H=function(a,c){return l[c][a]};var A=function(a,c){return null===a?z[c]:null===c?v[a]:H(a,c)},M=function(c,e){e===a&&(e="silver");for(var f=[],g,k,l=0;l<z.length;l++)g=A(null,l),
k=null===c?g[2][0]:A(c,l).values[0],!g[1]&&0<=g[2][0]&&f.push({filterIndex:g[0],filterKey:g[3],label:g[4],value:k,color:e});return f},B=[],L=0;for(g=0;g<v.length;g++){var C=A(g,null);!C[1]&&0<=C[2][0]&&(B.push({position:g,filterIndex:C[0],filterKey:C[3],label:C[4],value:C[2][0]}),L+=C[2][0])}r.chartOptions.currentDataIndex=null;c(f).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();c(f).siblings(".pt-chart-title").empty();g=c('<div class="pt-spectrum-pie">').appendTo(f);
f=c('<div class="pt-spectrum-bar">').appendTo(f);var u=this.options.numberFormatter,R=this._truncateLabel,O=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0);O.tooltip.contentGenerator(function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+u(a.value)+"</div></div>"});O.valueFormat(u);O.yAxis.tickFormat(u);
O.xAxis.tickFormat(function(a){return R(a,18)});var N=d3.select(c(f).get(0)).append("svg").attr("class","nv");f=Math.floor(g.width()/2)-30;var I=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(f).margin({top:-20,left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35);I.tooltip.enabled(!1);I.legend.align(!0).rightAlign(!1);I.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/
2-Math.PI/2});I.pie.dispatch.on("elementMouseover",function(a){var e=a.index;if(r.chartOptions.currentDataIndex!=e){r._removeChartTooltip();r.chartOptions.currentDataIndex=e;a=a.data;var f=a.value,g=d3.event;r._renderChartTooltip(g.pageX,g.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+f+" ("+Math.round(f/L*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}}).on("elementMouseout",function(){c(".pt-tooltip").remove();r.chartOptions.currentDataIndex=
null;r.chartOptions.currentSeriesIndex=null});var w=d3.select(c(g).get(0)).append("svg").attr("class","nv").style({"min-width":f-30+"px"});f=d3.select(c(g).get(0)).append("div").attr("class","pt-spectrum-form");f.append("h4").html(t.layer+" "+t.per+" "+D);f.append("label").html(k+":");var K=f.append("select");K.append("option").attr("value","null").style("font-weight","bold").html(r.options.textAll);K.selectAll(".pt-series-item").data(B).enter().append("option").attr("class","pt-series-item").attr("value",
function(a,c){return c}).html(function(a){return a.label});f.append("label").html(t.total+":");var S=f.append("span").text(e.total),J=function(a){if(null===a||r.chartOptions.currentSpectrumIndex==a){var c=function(a,c){return nv.utils.defaultColor()({},c)};w.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=M(null);N.datum([{key:null,filterIndex:null,filterKey:null,values:c}]);O.update();r.chartOptions.currentSpectrumIndex=null;K.property("value","null");S.text(e.total)}else{var f=B[a],g=
nv.utils.defaultColor()({},a);c=function(c,e){return e==a?g:"silver"};w.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=M(f.position,g);N.datum([{key:f.position,filterIndex:f.filterIndex,filterKey:f.filterKey,values:c}]);O.update();r.chartOptions.currentSpectrumIndex=a;K.property("value",a);S.text(B[a].value)}};I.pie.dispatch.on("elementClick",function(a){J(a.index)});K.on("change.pt",function(){var a=d3.select(this).property("value");"null"==a?J(null):J(a)});nv.addGraph(function(){w.datum(B).transition().duration(1200).call(I);
nv.utils.windowResize(I.update);return I});nv.addGraph(function(){N.datum([{key:null,filterIndex:null,filterKey:null,values:M(null)}]).transition().duration(500).call(O);if(r.options.exploreChart&&E&&G)O.discretebar.dispatch.on("elementClick",function(a){var c=a.data,e=d3.event.currentTarget.parentElement.__data__;a=e.filterIndex;e=e.filterKey;var f=c.filterIndex;c=c.filterKey;var g=[];null!==a&&g.push(["__other__"==a?E+"__belongs":E,e||"None"]);null!==f&&g.push(["__other__"==f?G+"__belongs":G,c||
"None"]);r._chartExplore(g)});nv.utils.windowResize(O.update);return O})}},_chartExplore:function(e){var f=this.options,g=c(this.element).closest(".ui-tabs"),n=f.filterTab;if(g.length&&!1!==n)f=(f=f.filterForm)?c("#"+f):a,S3.search.setCurrentFilters(f,e),e=n?c("#"+n).index():0,g.tabs("option","active",e);else if(g=f.filterURL)e=this._updateURL(g,e),window.open(e,"_blank")},_renderChartTooltip:function(a,e,g){c('<div class="pt-tooltip">'+g+"</div>").css({position:"absolute",display:"none",top:e-50,
left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=null},_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?
1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),e=null;a=c(a+"-filters");if(a.length)try{e=S3.search.getCurrentFilters(a.first())}catch(g){}return e},_updateURL:function(a,c){var e=[],f={},k;if(c){var l=0;for(k=c.length;l<k;l++){var t=c[l];var v=t[0];f[v]=!0;e.push(v+"="+t[1])}}c=this.options.ajaxURL.split("?");if(1<c.length){t=c[1].split("&");c={};l=0;for(k=t.length;l<k;l++){var z=t[l].split("=");1<z.length&&(v=decodeURIComponent(z[0]),f[v]||(e.push(v+"="+decodeURIComponent(z[1])),
c[v]=!0))}for(v in c)f[v]=!0}c=a.split("?");if(1<c.length)for(t=c[1].split("&"),l=0,k=t.length;l<k;l++)z=t[l].split("="),1<z.length&&(v=decodeURIComponent(z[0]),f[v]||e.push(v+"="+decodeURIComponent(z[1])));a=e.join("&");e=c[0];a&&(e=e+"?"+a);return e},_updateAjaxURL:function(a,e,g){var f=this.options.ajaxURL.split("?"),k=[],l=!1;if(1<f.length){var t=f[1];t=t.split("&")}else t="",t=[];if(a)for(D in a){var v=a[D];var z=D+"="+v;"totals"==D?this.options.showTotals=v?!0:!1:l||-1!=c.inArray(z,t)||(l=!0);
k.push(z)}var D={};var E={},G;if(e){var H=function(a){var c,e,f=[];["contains","anyof","belongs","eq"].forEach(function(g){c=new RegExp("__"+g+"$","g");a.match(c)?e=c:f.push(g)});e&&f.forEach(function(c){E[a.replace(e,"__"+c)]=!0})};v=0;for(G=e.length;v<G;v++){z=e[v];var A=z[0];z=z[1];H(A);null===z?D[A]||(E[A]=!0):(E[A]&&(E[A]=!1),z=A+"="+encodeURIComponent(z),D[A]?D[A].push(z):D[A]=[z])}}v=0;for(G=t.length;v<G;v++)z=t[v].split("="),1<z.length&&(A=decodeURIComponent(z[0]),z=decodeURIComponent(z[1]),
E[A]?l=!0:D[A]?l||-1!=c.inArray(A+"="+z,D[A])||(l=!0):"aggregate"!=A&&(a&&a.hasOwnProperty(A)||k.push(t[v])));for(A in D)for(v=0,G=D[A].length;v<G;v++)l||-1!=c.inArray(D[A][v],t)||(l=!0),k.push(D[A][v]);a=k.join("&");f=f[0];a&&(f=f+"?"+a);if(g)return f;this.options.ajaxURL=f;return l},_setExtension:function(a,c){var e=document.createElement("a");e.href=a;a=e.pathname.split("/");var f=[];a.length&&(a.forEach(function(a){var c=a.lastIndexOf(".");-1!=c?f.push(a.slice(0,c)):f.push(a)}),f[f.length-1]+=
"."+c,e.pathname=f.join("/"));var k=e.search;k&&(f=k.slice(1).split().filter(function(a){return"format"!=a.split("=")[0]}),a.length||f.push("format="+c),e.search="?"+f.join("&"));return e.href},reload:function(e,k,g){g="undefined"!=typeof g?g:!0;"undefined"==typeof k&&(k=this._getFilters());var f=this,r=this.element,l=r.find('input[type="hidden"][name="pivotdata"]');if(l.length){r.find(".pt-throbber").show();if(e||k)var t=this._updateAjaxURL(e,k);t||g?(e=this.options.ajaxURL,k=this.options.timeout,
g=c.ajaxS3,c.searchS3!==a&&(g=c.searchS3),r.find(".pt-empty").hide(),f.openRequest&&(f.openRequest.onreadystatechange=null,f.openRequest.abort()),f.openRequest=g({timeout:k,url:e,dataType:"json",type:"GET",success:function(a){f.openRequest=null;l.first().val(JSON.stringify(a));f.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):f.refresh()}},_downloadXLS:function(){if(this.element.find('input[type="hidden"][name="pivotdata"]').length){var e=
this._getOptions(),k=this._getFilters();e=this._updateAjaxURL(e,k,!0);e=this._setExtension(e,"xls");c.searchDownloadS3!==a?c.searchDownloadS3(e,"_blank"):window.open(e)}},_bindEvents:function(){var a=this,e=c(this.element),g=this.data,n=this.eventNamespace,r="#"+e.attr("id");c(r+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c(r+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=
!0;e.find(".pt-table").hide();c(this).siblings(".pt-show-table").show();e.find(".pt-export-opt").hide();c(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();c(this).siblings(".pt-hide-table").show();e.find(".pt-export-opt").show();c(this).hide()});e.find(".pt-export-xls").on("click"+n,function(){a._downloadXLS()});c(r+"-totals").click(function(){var e=c(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});c(r+"-rows,"+
r+"-cols,"+r+"-fact").on("change.autosubmit",function(){c(r+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var l=this.options.autoSubmit;c(r+"-pt-form").on("optionChanged",function(){var e=c(this);if(!e.data("noAutoSubmit")){var f=e.data("autoSubmitTimeout");f&&clearTimeout(f);f=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)},l);e.data("autoSubmitTimeout",f)}})}else c(r+"-pt-form input.pt-submit").click(function(){var c=a._getOptions(),e=a._getFilters();
a.reload(c,e,!1)});c(r+" div.pt-table div.pt-cell-zoom").click(function(a){a=c(a.currentTarget);var e=a.closest(".pt-cell-value"),f=e.find(".pt-cell-records");if(0<f.length)f.remove(),a.removeClass("opened");else{var k=e.data("keys");f=e.data("fact");e=g.lookups[g.facts[f][0]];f=c("<div/>").addClass("pt-cell-records");for(var l=c("<ul/>"),n=0;n<k.length;n++)l.append("<li>"+e[k[n]]+"</li>");f.append(l);a.addClass("opened").after(f)}});c(r+"-pchart-rows").click(function(){a._renderChart({type:"piechart",
axis:"rows"})});c(r+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});c(r+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});c(r+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});c(r+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});c(r+"-vchart-cols").click(function(){a._renderChart({type:"barchart",axis:"cols"})});c(r+"-schart-cols").click(function(){a._renderChart({type:"spectrum",
axis:"cols"})});c(r+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=c(this.element),e="#"+a.attr("id"),g=this.eventNamespace;c(e+" div.pt-table div.pt-cell-zoom").unbind("click");c(e+"-options legend").unbind("click");c(e+"-filters legend").unbind("click");c(e+"-totals").unbind("click");c(e+"-rows,"+e+"-cols,"+e+"-fact").unbind("change.autosubmit");c(e+"-pt-form").unbind("optionChanged");
a.find("input.pt-submit").unbind("click");a.find(".pt-export-xls").off("click"+g);c(e+"-pchart-rows,"+e+"-vchart-rows,"+e+"-schart-rows,"+e+"-hchart-rows,"+e+"-pchart-cols,"+e+"-vchart-cols,"+e+"-schart-cols,"+e+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
