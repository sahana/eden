/*
: 2013-14 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory
 requires: D3.js 3.4.9+

*/
!function(){function I(c,q){return c<q?-1:c>q?1:c>=q?0:NaN}function u(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(q,a,p,g){3>arguments.length&&(p=0);4>arguments.length&&(g=q.length);for(;p<g;){var m=p+g>>>1;0>c(q[m],a)?p=m+1:g=m}return p},right:function(q,a,p,g){3>arguments.length&&(p=0);4>arguments.length&&(g=q.length);for(;p<g;){var m=p+g>>>1;0<c(q[m],a)?g=m:p=m+1}return p}}}function b(c){return c.length}function k(c,q){try{for(var a in q)Object.defineProperty(c.prototype,a,
{value:q[a],enumerable:!1})}catch(p){c.prototype=q}}function r(){}function n(c){return hb+c in this}function e(){var c=[];this.forEach(function(q){c.push(q)});return c}function h(){var c=0,q;for(q in this)q.charCodeAt(0)===Rb&&++c;return c}function t(){for(var c in this)if(c.charCodeAt(0)===Rb)return!1;return!0}function s(){}function H(c,q,a){return function(){var p=a.apply(q,arguments);return p===q?c:p}}function A(c,q){if(q in c)return q;q=q.charAt(0).toUpperCase()+q.substring(1);for(var a=0,p=Qd.length;a<
p;++a){var g=Qd[a]+q;if(g in c)return g}}function z(){}function D(){}function B(c){function q(){for(var q=a,p=-1,$=q.length,w;++p<$;)(w=q[p].on)&&w.apply(this,arguments);return c}var a=[],p=new r;q.on=function(q,m){var $=p.get(q),w;if(2>arguments.length)return $&&$.on;$&&($.on=null,a=a.slice(0,w=a.indexOf($)).concat(a.slice(w+1)),p.remove(q));m&&a.push(p.set(q,{on:m}));return c};return q}function M(){v.event.preventDefault()}function S(){for(var c=v.event,q;q=c.sourceEvent;)c=q;return c}function E(c){for(var q=
new D,a=0,p=arguments.length;++a<p;)q[arguments[a]]=B(q);q.of=function(a,f){return function(p){try{var w=p.sourceEvent=v.event;p.target=c;v.event=p;q[p.type].apply(a,f)}finally{v.event=w}}};return q}function O(c){Sb(c,na);return c}function P(c){return"function"===typeof c?c:function(){return Mc(c,this)}}function K(c){return"function"===typeof c?c:function(){return Nc(c,this)}}function Q(c,q){function a(){this.removeAttribute(c)}function p(){this.removeAttributeNS(c.space,c.local)}function g(){this.setAttribute(c,
q)}function m(){this.setAttributeNS(c.space,c.local,q)}function $(){var a=q.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function w(){var a=q.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=v.ns.qualify(c);return null==q?c.local?p:a:"function"===typeof q?c.local?w:$:c.local?m:g}function N(c){return c.trim().replace(/\s+/g," ")}function R(c){return new RegExp("(?:^|\\s+)"+v.requote(c)+"(?:\\s+|$)","g")}function x(c,
q){function a(){for(var f=-1;++f<g;)c[f](this,q)}function p(){for(var a=-1,f=q.apply(this,arguments);++a<g;)c[a](this,f)}c=(c+"").trim().split(/^|\s+/).map(C);var g=c.length;return"function"===typeof q?p:a}function C(c){var q=R(c);return function(a,p){if(g=a.classList)return p?g.add(c):g.remove(c);var g=a.getAttribute("class")||"";p?(q.lastIndex=0,q.test(g)||a.setAttribute("class",N(g+" "+c))):a.setAttribute("class",N(g.replace(q," ")))}}function L(c,q,a){function p(){this.style.removeProperty(c)}
function g(){this.style.setProperty(c,q,a)}function m(){var p=q.apply(this,arguments);null==p?this.style.removeProperty(c):this.style.setProperty(c,p,a)}return null==q?p:"function"===typeof q?m:g}function y(c,q){function a(){delete this[c]}function p(){this[c]=q}function g(){var a=q.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==q?a:"function"===typeof q?g:p}function V(c){return"function"===typeof c?c:(c=v.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function G(c){return function(){return Rd(this,c)}}function U(c){arguments.length||(c=I);return function(q,a){return q&&a?c(q.__data__,a.__data__):!q-!a}}function F(c,q){for(var a=0,p=c.length;a<p;a++)for(var g=c[a],m=0,$=g.length,w;m<$;m++)(w=g[m])&&q(w,m,a);return c}function aa(c){Sb(c,Ra);return c}function W(c){var q,a;return function(p,g,m){p=c[m].update;var $=p.length;m!=a&&(a=m,q=0);for(g>=q&&(q=g+1);!(g=p[q])&&
++q<$;);return g}}function l(){var c=this.__transition__;c&&++c.active}function J(c,q,a){function p(){var q=this[$];q&&(this.removeEventListener(c,q,q.$),delete this[$])}function g(){var g=T(q,ab(arguments));p.call(this);this.addEventListener(c,this[$]=g,g.$=a);g._=q}function m(){var q=new RegExp("^__on([^.]+)"+v.requote(c)+"$"),a,f;for(f in this)if(a=f.match(q)){var p=this[f];this.removeEventListener(a[1],p,p.$);delete this[f]}}var $="__on"+c,w=c.indexOf("."),T=ca;0<w&&(c=c.substring(0,w));var b=
Oc.get(c);b&&(c=b,T=oa);return w?q?g:p:q?z:m}function ca(c,q){return function(a){var p=v.event;v.event=a;q[0]=this.__data__;try{c.apply(this,q)}finally{v.event=p}}}function oa(c,q){var a=ca(c,q);return function(c){var q=c.relatedTarget;q&&(q===this||q.compareDocumentPosition(this)&8)||a.call(this,c)}}function ga(){var c=".dragsuppress-"+ ++jg,q="click"+c,a=v.select(xa).on("touchmove"+c,M).on("dragstart"+c,M).on("selectstart"+c,M);if(Db){var p=Ua.style,g=p[Db];p[Db]="none"}return function(m){a.on(c,
null);Db&&(p[Db]=g);if(m){var $=function(){a.on(q,null)};a.on(q,function(){M();$()},!0);setTimeout($,0)}}}function X(c,q){q.changedTouches&&(q=q.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var p=a.createSVGPoint();if(0>Pc&&(xa.scrollX||xa.scrollY)){var a=v.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),g=a[0][0].getScreenCTM();Pc=!(g.f||g.e);a.remove()}Pc?(p.x=q.pageX,p.y=q.pageY):(p.x=q.clientX,p.y=q.clientY);
p=p.matrixTransform(c.getScreenCTM().inverse());return[p.x,p.y]}a=c.getBoundingClientRect();return[q.clientX-a.left-c.clientLeft,q.clientY-a.top-c.clientTop]}function fa(){return v.event.changedTouches[0].identifier}function ha(){return v.event.target}function ba(){return xa}function Y(c,q,a){return(q[0]-c[0])*(a[1]-c[1])-(q[1]-c[1])*(a[0]-c[0])}function la(c){return 1<c?0:-1>c?ja:Math.acos(c)}function ea(c){return 1<c?va:-1>c?-va:Math.asin(c)}function ma(c){return((c=Math.exp(c))+1/c)/2}function ra(c){return(c=
Math.sin(c/2))*c}function Ba(){}function Ca(c,q,a){return this instanceof Ca?void(this.h=+c,this.s=+q,this.l=+a):2>arguments.length?c instanceof Ca?new Ca(c.h,c.s,c.l):Td(""+c,Ud,Ca):new Ca(c,q,a)}function Qc(c,q,a){function p(c){360<c?c-=360:0>c&&(c+=360);return 60>c?g+(m-g)*c/60:180>c?m:240>c?g+(m-g)*(240-c)/60:g}var g,m;c=isNaN(c)?0:0>(c%=360)?c+360:c;q=isNaN(q)?0:0>q?0:1<q?1:q;a=0>a?0:1<a?1:a;m=.5>=a?a*(1+q):a+q-a*q;g=2*a-m;return new ya(Math.round(255*p(c+120)),Math.round(255*p(c)),Math.round(255*
p(c-120)))}function Ja(c,q,a){return this instanceof Ja?void(this.h=+c,this.c=+q,this.l=+a):2>arguments.length?c instanceof Ja?new Ja(c.h,c.c,c.l):c instanceof Ka?Vd(c.l,c.a,c.b):Vd((c=Wd((c=v.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ja(c,q,a)}function Rc(c,q,a){isNaN(c)&&(c=0);isNaN(q)&&(q=0);return new Ka(a,Math.cos(c*=ia)*q,Math.sin(c)*q)}function Ka(c,q,a){return this instanceof Ka?void(this.l=+c,this.a=+q,this.b=+a):2>arguments.length?c instanceof Ka?new Ka(c.l,c.a,c.b):c instanceof Ja?Rc(c.l,c.c,
c.h):Wd((c=ya(c)).r,c.g,c.b):new Ka(c,q,a)}function Xd(c,q,a){c=(c+16)/116;a=c-a/200;q=Sc(c+q/500)*Yd;c=Sc(c)*Zd;a=Sc(a)*$d;return new ya(Tc(3.2404542*q-1.5371385*c-.4985314*a),Tc(-.969266*q+1.8760108*c+.041556*a),Tc(.0556434*q-.2040259*c+1.0572252*a))}function Vd(c,q,a){return 0<c?new Ja(Math.atan2(a,q)*qa,Math.sqrt(q*q+a*a),c):new Ja(NaN,NaN,c)}function Sc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Uc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Tc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function ya(c,q,a){return this instanceof ya?void(this.r=~~c,this.g=~~q,this.b=~~a):2>arguments.length?c instanceof ya?new ya(c.r,c.g,c.b):Td(""+c,ya,Qc):new ya(c,q,a)}function Tb(c){return new ya(c>>16,c>>8&255,c&255)+""}function rb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Td(c,q,a){var p=0,g=0,m=0,$,w;if($=/([a-z]+)\((.*)\)/i.exec(c))switch(w=$[2].split(","),$[1]){case "hsl":return a(parseFloat(w[0]),parseFloat(w[1])/
100,parseFloat(w[2])/100);case "rgb":return q(Vc(w[0]),Vc(w[1]),Vc(w[2]))}if(a=Ub.get(c))return q(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(p=(a&3840)>>4,p|=p>>4,g=a&240,g|=g>>4,m=a&15,m|=m<<4):7===c.length&&(p=(a&16711680)>>16,g=(a&65280)>>8,m=a&255));return q(p,g,m)}function Ud(c,q,a){var p=Math.min(c/=255,q/=255,a/=255),g=Math.max(c,q,a),m=g-p,$=(g+p)/2;m?(p=.5>$?m/(g+p):m/(2-g-p),c=60*(c==g?(q-a)/m+(q<a?6:0):q==g?(a-c)/m+2:(c-q)/m+4)):(c=NaN,
p=0<$&&1>$?0:c);return new Ca(c,p,$)}function Wd(c,q,a){c=Wc(c);q=Wc(q);a=Wc(a);var p=Uc((.4124564*c+.3575761*q+.1804375*a)/Yd),g=Uc((.2126729*c+.7151522*q+.072175*a)/Zd);c=Uc((.0193339*c+.119192*q+.9503041*a)/$d);return Ka(116*g-16,500*(p-g),200*(g-c))}function Wc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Vc(c){var q=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*q):q}function pa(c){return"function"===typeof c?c:function(){return c}}function ua(c){return c}
function Xc(c){return function(q,a,p){2===arguments.length&&"function"===typeof a&&(p=a,a=null);return Vb(q,a,c,p)}}function Vb(c,q,a,p){function g(){var c=T.status,q;if(!c&&T.responseText||200<=c&&300>c||304===c){try{q=a.call(m,T)}catch(p){$.error.call(m,p);return}$.load.call(m,q)}else $.error.call(m,T)}var m={},$=v.dispatch("beforesend","progress","load","error"),w={},T=new XMLHttpRequest,b=null;!xa.XDomainRequest||"withCredentials"in T||!/^(http(s)?:)?\/\//.test(c)||(T=new XDomainRequest);"onload"in
T?T.onload=T.onerror=g:T.onreadystatechange=function(){3<T.readyState&&g()};T.onprogress=function(c){var q=v.event;v.event=c;try{$.progress.call(m,T)}finally{v.event=q}};m.header=function(c,q){c=(c+"").toLowerCase();if(2>arguments.length)return w[c];null==q?delete w[c]:w[c]=q+"";return m};m.mimeType=function(c){if(!arguments.length)return q;q=null==c?null:c+"";return m};m.responseType=function(c){if(!arguments.length)return b;b=c;return m};m.response=function(c){a=c;return m};["get","post"].forEach(function(c){m[c]=
function(){return m.send.apply(m,[c].concat(ab(arguments)))}});m.send=function(a,f,p){2===arguments.length&&"function"===typeof f&&(p=f,f=null);T.open(a,c,!0);null==q||"accept"in w||(w.accept=q+",*/*");if(T.setRequestHeader)for(var g in w)T.setRequestHeader(g,w[g]);null!=q&&T.overrideMimeType&&T.overrideMimeType(q);null!=b&&(T.responseType=b);if(null!=p)m.on("error",p).on("load",function(c){p(null,c)});$.beforesend.call(m,T);T.send(null==f?null:f);return m};m.abort=function(){T.abort();return m};
v.rebind(m,$,"on");return null==p?m:m.get(kg(p))}function kg(c){return 1===c.length?function(q,a){c(null==q?a:null)}:c}function Yc(){var c=ae(),c=be()-c;24<c?(isFinite(c)&&(clearTimeout(Wb),Wb=setTimeout(Yc,c)),Xb=0):(Xb=1,ce(Yc))}function ae(){var c=Date.now();for(Va=Yb;Va;)c>=Va.t&&(Va.f=Va.c(c-Va.t)),Va=Va.n;return c}function be(){for(var c,q=Yb,a=Infinity;q;)q.f?q=c?c.n=q.n:Yb=q.n:(q.t<a&&(a=q.t),q=(c=q).n);Zb=c;return a}function Zc(c,q){return q-(c?Math.ceil(Math.log(c)/Math.LN10):1)}function lg(c){var q=
c.decimal,a=c.thousands,p=c.grouping,g=c.currency,m=p?function(c){for(var q=c.length,g=[],m=0,b=p[0];0<q&&0<b;)g.push(c.substring(q-=b,q+b)),b=p[m=(m+1)%p.length];return g.reverse().join(a)}:ua;return function(c){c=de.exec(c);var a=c[1]||" ",f=c[2]||">",p=c[3]||"",b=c[4]||"",l=c[5],e=+c[6],h=c[7],k=c[8],n=c[9],s=1,t="",r="",y=!1;k&&(k=+k.substring(1));if(l||"0"===a&&"="===f)l=a="0",f="=",h&&(e-=Math.floor((e-1)/4));switch(n){case "n":h=!0;n="g";break;case "%":s=100;r="%";n="f";break;case "p":s=100;
r="%";n="r";break;case "b":case "o":case "x":case "X":"#"===b&&(t="0"+n.toLowerCase());case "c":case "d":y=!0;k=0;break;case "s":s=-1,n="r"}"$"===b&&(t=g[0],r=g[1]);"r"!=n||k||(n="g");if(null!=k)if("g"==n)k=Math.max(1,Math.min(21,k));else if("e"==n||"f"==n)k=Math.max(0,Math.min(20,k));var n=mg.get(n)||ng,x=l&&h;return function(c){var g=r;if(y&&c%1)return"";var b=0>c||0===c&&0>1/c?(c=-c,"-"):p;0>s?(g=v.formatPrefix(c,k),c=g.scale(c),g=g.symbol+r):c*=s;c=n(c,k);var $=c.lastIndexOf("."),Sa=0>$?c:c.substring(0,
$);c=0>$?"":q+c.substring($+1);!l&&h&&(Sa=m(Sa));var $=t.length+Sa.length+c.length+(x?0:b.length),J=$<e?Array($=e-$+1).join(a):"";x&&(Sa=m(J+Sa));b+=t;c=Sa+c;return("<"===f?b+c+J:">"===f?J+b+c:"^"===f?J.substring(0,$>>=1)+b+c+J.substring($):b+(x?c:J+c))+g}}}function ng(c){return c+""}function Wa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function ib(c,q,a){function p(q){var a=c(q),f=m(a,1);return q-a<f-q?a:f}function g(a){q(a=c(new wa(a-1)),1);return a}function m(c,
a){q(c=new wa(+c),a);return c}function b(c,p,m){c=g(c);var w=[];if(1<m)for(;c<p;)a(c)%m||w.push(new Date(+c)),q(c,1);else for(;c<p;)w.push(new Date(+c)),q(c,1);return w}c.floor=c;c.round=p;c.ceil=g;c.offset=m;c.range=b;var w=c.utc=$b(c);w.floor=w;w.round=$b(p);w.ceil=$b(g);w.offset=$b(m);w.range=function(c,q,a){try{wa=Wa;var f=new Wa;f._=c;return b(f,q,a)}finally{wa=Date}};return c}function $b(c){return function(a,f){try{wa=Wa;var p=new Wa;p._=a;return c(p,f)._}finally{wa=Date}}}function og(c){function a(c){function q(a){for(var f=
[],g=-1,m=0,w,b;++g<p;)if(37===c.charCodeAt(g)){f.push(c.substring(m,g));null!=(w=ee[m=c.charAt(++g)])&&(m=c.charAt(++g));if(b=J[m])m=b(a,null==w?"e"===m?" ":"0":w);f.push(m);m=g+1}f.push(c.substring(m,g));return f.join("")}var p=c.length;q.parse=function(a){var q={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(q,c,a,0)!=a.length)return null;"p"in q&&(q.H=q.H%12+12*q.p);a=null!=q.Z&&wa!==Wa;var p=new (a?Wa:wa);"j"in q?p.setFullYear(q.y,0,q.j):"w"in q&&("W"in q||"U"in q)?(p.setFullYear(q.y,0,1),p.setFullYear(q.y,
0,"W"in q?(q.w+6)%7+7*q.W-(p.getDay()+5)%7:q.w+7*q.U-(p.getDay()+6)%7)):p.setFullYear(q.y,q.m,q.d);p.setHours(q.H+Math.floor(q.Z/100),q.M+q.Z%100,q.S,q.L);return a?p._:p};q.toString=function(){return c};return q}function f(c,q,a,f){for(var p,g=0,m=q.length,w=a.length;g<m;){if(f>=w)return-1;p=q.charCodeAt(g++);if(37===p){if(p=q.charAt(g++),p=F[p in ee?q.charAt(g++):p],!p||0>(f=p(c,a,f)))return-1}else if(p!=a.charCodeAt(f++))return-1}return f}var p=c.dateTime,g=c.date,m=c.time,b=c.periods,w=c.days,
T=c.shortDays,da=c.months,l=c.shortMonths;a.utc=function(c){function f(c){try{wa=Wa;var q=new wa;q._=c;return p(q)}finally{wa=Date}}var p=a(c);f.parse=function(c){try{wa=Wa;var q=p.parse(c);return q&&q._}finally{wa=Date}};f.toString=p.toString;return f};a.multi=a.utc.multi=pg;var e=v.map(),h=ac(w),k=bc(w),n=ac(T),s=bc(T),r=ac(da),t=bc(da),y=ac(l),x=bc(l);b.forEach(function(c,q){e.set(c.toLowerCase(),q)});var J={a:function(c){return T[c.getDay()]},A:function(c){return w[c.getDay()]},b:function(c){return l[c.getMonth()]},
B:function(c){return da[c.getMonth()]},c:a(p),d:function(c,q){return za(c.getDate(),q,2)},e:function(c,q){return za(c.getDate(),q,2)},H:function(c,q){return za(c.getHours(),q,2)},I:function(c,q){return za(c.getHours()%12||12,q,2)},j:function(c,q){return za(1+Z.dayOfYear(c),q,3)},L:function(c,q){return za(c.getMilliseconds(),q,3)},m:function(c,q){return za(c.getMonth()+1,q,2)},M:function(c,q){return za(c.getMinutes(),q,2)},p:function(c){return b[+(12<=c.getHours())]},S:function(c,q){return za(c.getSeconds(),
q,2)},U:function(c,q){return za(Z.sundayOfYear(c),q,2)},w:function(c){return c.getDay()},W:function(c,q){return za(Z.mondayOfYear(c),q,2)},x:a(g),X:a(m),y:function(c,q){return za(c.getFullYear()%100,q,2)},Y:function(c,q){return za(c.getFullYear()%1E4,q,4)},Z:qg,"%":function(){return"%"}},F={a:function(c,q,a){n.lastIndex=0;return(q=n.exec(q.substring(a)))?(c.w=s.get(q[0].toLowerCase()),a+q[0].length):-1},A:function(c,q,a){h.lastIndex=0;return(q=h.exec(q.substring(a)))?(c.w=k.get(q[0].toLowerCase()),
a+q[0].length):-1},b:function(c,q,a){y.lastIndex=0;return(q=y.exec(q.substring(a)))?(c.m=x.get(q[0].toLowerCase()),a+q[0].length):-1},B:function(c,q,a){r.lastIndex=0;return(q=r.exec(q.substring(a)))?(c.m=t.get(q[0].toLowerCase()),a+q[0].length):-1},c:function(c,q,a){return f(c,J.c.toString(),q,a)},d:fe,e:fe,H:ge,I:ge,j:rg,L:sg,m:tg,M:ug,p:function(c,q,a){q=e.get(q.substring(a,a+=2).toLowerCase());return null==q?-1:(c.p=q,a)},S:vg,U:wg,w:xg,W:yg,x:function(c,q,a){return f(c,J.x.toString(),q,a)},X:function(c,
q,a){return f(c,J.X.toString(),q,a)},y:zg,Y:Ag,Z:Bg,"%":Cg};return a}function za(c,q,a){var p=0>c?"-":"";c=(p?-c:c)+"";var g=c.length;return p+(g<a?Array(a-g+1).join(q)+c:c)}function ac(c){return new RegExp("^(?:"+c.map(v.requote).join("|")+")","i")}function bc(c){for(var q=new r,a=-1,p=c.length;++a<p;)q.set(c[a].toLowerCase(),a);return q}function xg(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+1)))?(c.w=+q[0],a+q[0].length):-1}function wg(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a)))?
(c.U=+q[0],a+q[0].length):-1}function yg(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a)))?(c.W=+q[0],a+q[0].length):-1}function Ag(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+4)))?(c.y=+q[0],a+q[0].length):-1}function zg(c,q,a){sa.lastIndex=0;if(q=sa.exec(q.substring(a,a+2))){var p=+q[0];c=(c.y=p+(68<p?1900:2E3),a+q[0].length)}else c=-1;return c}function Bg(c,q,a){return/^[+-]\d{4}$/.test(q=q.substring(a,a+5))?(c.Z=-q,a+5):-1}function tg(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,
a+2)))?(c.m=q[0]-1,a+q[0].length):-1}function fe(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+2)))?(c.d=+q[0],a+q[0].length):-1}function rg(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+3)))?(c.j=+q[0],a+q[0].length):-1}function ge(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+2)))?(c.H=+q[0],a+q[0].length):-1}function ug(c,q,a){sa.lastIndex=0;return(q=sa.exec(q.substring(a,a+2)))?(c.M=+q[0],a+q[0].length):-1}function vg(c,a,f){sa.lastIndex=0;return(a=sa.exec(a.substring(f,
f+2)))?(c.S=+a[0],f+a[0].length):-1}function sg(c,a,f){sa.lastIndex=0;return(a=sa.exec(a.substring(f,f+3)))?(c.L=+a[0],f+a[0].length):-1}function qg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var f=~~(ka(a)/60),a=ka(a)%60;return c+za(f,"0",2)+za(a,"0",2)}function Cg(c,a,f){he.lastIndex=0;return(c=he.exec(a.substring(f,f+1)))?f+c[0].length:-1}function pg(c){for(var a=c.length,f=-1;++f<a;)c[f][0]=this(c[f][0]);return function(a){for(var q=0,f=c[q];!f[1](a);)f=c[++q];return f[0](a)}}function $c(){}
function ie(c,a,f){var p=f.s=c+a,g=p-c;f.t=c-(p-g)+(a-g)}function cc(c,a){if(c&&je.hasOwnProperty(c.type))je[c.type](c,a)}function ad(c,a,f){var p=-1;f=c.length-f;var g;for(a.lineStart();++p<f;)g=c[p],a.point(g[0],g[1],g[2]);a.lineEnd()}function ke(c,a){var f=-1,p=c.length;for(a.polygonStart();++f<p;)ad(c[f],a,1);a.polygonEnd()}function Dg(){function c(c,a){c*=ia;a=a*ia/2+ja/4;var q=c-p,f=0<=q?1:-1,b=f*q,q=Math.cos(a),l=Math.sin(a),e=m*l,h=g*q+e*Math.cos(b),f=e*f*Math.sin(b);jb.add(Math.atan2(f,h));
p=c;g=q;m=l}var a,f,p,g,m;Da.point=function(b,w){Da.point=c;p=(a=b)*ia;g=Math.cos(w=(f=w)*ia/2+ja/4);m=Math.sin(w)};Da.lineEnd=function(){c(a,f)}}function kb(c){var a=c[0];c=c[1];var f=Math.cos(c);return[f*Math.cos(a),f*Math.sin(a),Math.sin(c)]}function dc(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function sb(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function bd(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function ec(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function fc(c){var a=
Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function gc(c){return[Math.atan2(c[1],c[0]),ea(c[2])]}function hc(c,a){return 1E-6>ka(c[0]-a[0])&&1E-6>ka(c[1]-a[1])}function cd(c,a){c*=ia;var f=Math.cos(a*=ia);Eb(f*Math.cos(c),f*Math.sin(c),Math.sin(a))}function Eb(c,a,f){++Fb;Xa+=(c-Xa)/Fb;Ya+=(a-Ya)/Fb;Oa+=(f-Oa)/Fb}function le(){function c(c,m){c*=ia;var b=Math.cos(m*=ia),w=b*Math.cos(c),b=b*Math.sin(c),T=Math.sin(m),da=Math.atan2(Math.sqrt((da=f*T-p*b)*da+(da=p*w-a*T)*da+(da=
a*b-f*w)*da),a*w+f*b+p*T);tb+=da;Ga+=da*(a+(a=w));Ha+=da*(f+(f=b));Aa+=da*(p+(p=T));Eb(a,f,p)}var a,f,p;La.point=function(g,m){g*=ia;var b=Math.cos(m*=ia);a=b*Math.cos(g);f=b*Math.sin(g);p=Math.sin(m);La.point=c;Eb(a,f,p)}}function me(){La.point=cd}function Eg(){function c(c,a){c*=ia;var q=Math.cos(a*=ia),f=q*Math.cos(c),q=q*Math.sin(c),b=Math.sin(a),l=g*b-m*q,e=m*f-p*b,h=p*q-g*f,k=Math.sqrt(l*l+e*e+h*h),n=p*f+g*q+m*b,s=k&&-la(n)/k,k=Math.atan2(k,n);bb+=s*l;cb+=s*e;Pa+=s*h;tb+=k;Ga+=k*(p+(p=f));Ha+=
k*(g+(g=q));Aa+=k*(m+(m=b));Eb(p,g,m)}var a,f,p,g,m;La.point=function(b,w){a=b;f=w;La.point=c;b*=ia;var T=Math.cos(w*=ia);p=T*Math.cos(b);g=T*Math.sin(b);m=Math.sin(w);Eb(p,g,m)};La.lineEnd=function(){c(a,f);La.lineEnd=me;La.point=cd}}function ub(){return!0}function ne(c,a,f,p,g){var m=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,q=c[0],f=c[a];if(hc(q,f)){g.lineStart();for(f=0;f<a;++f)g.point((q=c[f])[0],q[1]);g.lineEnd()}else a=new ic(q,c,null,!0),q=new ic(q,null,a,!1),a.o=q,m.push(a),
b.push(q),a=new ic(f,c,null,!1),q=new ic(f,null,a,!0),a.o=q,m.push(a),b.push(q)}});b.sort(a);oe(m);oe(b);if(m.length){c=0;a=f;for(f=b.length;c<f;++c)b[c].e=a=!a;a=m[0];for(var w,T;;){for(var da=a,l=!0;da.v;)if((da=da.n)===a)return;w=da.z;g.lineStart();do{da.v=da.o.v=!0;if(da.e){if(l)for(c=0,f=w.length;c<f;++c)g.point((T=w[c])[0],T[1]);else p(da.x,da.n.x,1,g);da=da.n}else{if(l)for(w=da.p.z,c=w.length-1;0<=c;--c)g.point((T=w[c])[0],T[1]);else p(da.x,da.p.x,-1,g);da=da.p}da=da.o;w=da.z;l=!l}while(!da.v);
g.lineEnd()}}}function oe(c){if(a=c.length){for(var a,f=0,p=c[0],g;++f<a;)p.n=g=c[f],g.p=p,p=g;p.n=g=c[0];g.p=p}}function ic(c,a,f,p){this.x=c;this.z=a;this.o=f;this.e=p;this.v=!1;this.n=this.p=null}function pe(c,a,f,p){return function(g,m){function b(a,q){var f=g(a,q);c(a=f[0],q=f[1])&&m.point(a,q)}function w(c,a){var q=g(c,a);k.point(q[0],q[1])}function T(){s.point=w;k.lineStart()}function da(){s.point=b;k.lineEnd()}function l(c,a){F.push([c,a]);var q=g(c,a);y.point(q[0],q[1])}function e(){y.lineStart();
F=[]}function h(){l(F[0][0],F[0][1]);y.lineEnd();var c=y.clean(),a=t.buffer(),q=a.length;F.pop();x.push(F);F=null;if(q)if(c&1){var c=a[0],q=c.length-1,a=-1,f;if(0<q){J||(m.polygonStart(),J=!0);for(m.lineStart();++a<q;)m.point((f=c[a])[0],f[1]);m.lineEnd()}}else 1<q&&c&2&&a.push(a.pop().concat(a.shift())),r.push(a.filter(Fg))}var k=a(m),n=g.invert(p[0],p[1]),s={point:b,lineStart:T,lineEnd:da,polygonStart:function(){s.point=l;s.lineStart=e;s.lineEnd=h;r=[];x=[]},polygonEnd:function(){s.point=b;s.lineStart=
T;s.lineEnd=da;r=v.merge(r);var c,a=n;c=x;var q=a[0],p=a[1],g=[Math.sin(q),-Math.cos(q),0],w=0,l=0;jb.reset();for(var e=0,k=c.length;e<k;++e){var h=c[e],Sa=h.length;if(Sa)for(var Ta=h[0],t=Ta[0],a=Ta[1]/2+ja/4,y=Math.sin(a),Sd=Math.cos(a),F=1;;){F===Sa&&(F=0);var a=h[F],E=a[0],C=a[1]/2+ja/4,L=Math.sin(C),C=Math.cos(C),G=E-t,u=0<=G?1:-1,V=u*G,B=V>ja,y=y*L;jb.add(Math.atan2(y*u*Math.sin(V),Sd*C+y*Math.cos(V)));w+=B?G+u*Ea:G;B^t>=q^E>=q&&(Ta=sb(kb(Ta),kb(a)),fc(Ta),t=sb(g,Ta),fc(t),t=(B^0<=G?-1:1)*ea(t[2]),
p>t||p===t&&(Ta[0]||Ta[1]))&&(l+=B^0<=G?1:-1);if(!F++)break;t=E;y=L;Sd=C;Ta=a}}c=(-1E-6>w||1E-6>w&&0>jb)^l&1;r.length?(J||(m.polygonStart(),J=!0),ne(r,Gg,c,f,m)):c&&(J||(m.polygonStart(),J=!0),m.lineStart(),f(null,null,1,m),m.lineEnd());J&&(m.polygonEnd(),J=!1);r=x=null},sphere:function(){m.polygonStart();m.lineStart();f(null,null,1,m);m.lineEnd();m.polygonEnd()}},r,t=qe(),y=a(t),J=!1,x,F;return s}}function Fg(c){return 1<c.length}function qe(){var c=[],a;return{lineStart:function(){c.push(a=[])},
point:function(c,p){a.push([c,p])},lineEnd:z,buffer:function(){var f=c;c=[];a=null;return f},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Gg(c,a){return(0>(c=c.x)[0]?c[1]-va-1E-6:va-c[1])-(0>(a=a.x)[0]?a[1]-va-1E-6:va-a[1])}function Hg(c){function a(c,q){return Math.cos(c)*Math.cos(q)>g}function f(c,a,q){var f=kb(c),p=kb(a),m=[1,0,0],p=sb(f,p),b=dc(p,p),f=p[0],w=b-f*f;if(!w)return!q&&c;b=g*b/w;w=-g*f/w;f=sb(m,p);m=ec(m,b);p=ec(p,w);bd(m,p);p=dc(m,f);b=dc(f,f);w=p*p-b*
(dc(m,m)-1);if(!(0>w)){var $=Math.sqrt(w),w=ec(f,(-p-$)/b);bd(w,m);w=gc(w);if(!q)return w;q=c[0];var l=a[0];c=c[1];a=a[1];var e;l<q&&(e=q,q=l,l=e);var h=l-q,k=1E-6>ka(h-ja);!k&&a<c&&(e=c,c=a,a=e);if(k||1E-6>h?k?0<c+a^w[1]<(1E-6>ka(w[0]-q)?c:a):c<=w[1]&&w[1]<=a:h>ja^(q<=w[0]&&w[0]<=l))return a=ec(f,(-p+$)/b),bd(a,m),[w,gc(a)]}}function p(a,q){var f=m?c:ja-c,p=0;a<-f?p|=1:a>f&&(p|=2);q<-f?p|=4:q>f&&(p|=8);return p}var g=Math.cos(c),m=0<g,b=1E-6<ka(g),w=dd(c,6*ia);return pe(a,function(c){var g,w,l,e,
h;return{lineStart:function(){e=l=!1;h=1},point:function(k,n){var s=[k,n],t,r=a(k,n),y=m?r?0:p(k,n):r?p(k+(0>k?ja:-ja),n):0;!g&&(e=l=r)&&c.lineStart();r!==l&&(t=f(g,s),hc(g,t)||hc(s,t))&&(s[0]+=1E-6,s[1]+=1E-6,r=a(s[0],s[1]));if(r!==l)h=0,r?(c.lineStart(),t=f(s,g),c.point(t[0],t[1])):(t=f(g,s),c.point(t[0],t[1]),c.lineEnd()),g=t;else if(b&&g&&m^r){var J;y&w||!(J=f(s,g,!0))||(h=0,m?(c.lineStart(),c.point(J[0][0],J[0][1]),c.point(J[1][0],J[1][1]),c.lineEnd()):(c.point(J[1][0],J[1][1]),c.lineEnd(),c.lineStart(),
c.point(J[0][0],J[0][1])))}!r||g&&hc(g,s)||c.point(s[0],s[1]);g=s;l=r;w=y},lineEnd:function(){l&&c.lineEnd();g=null},clean:function(){return h|(e&&l)<<1}}},w,m?[0,-c]:[-ja,c-ja])}function re(c,a,f,p){return function(g){var m=g.a,b=g.b,w=m.x,m=m.y,T=0,da=1,l=b.x-w,b=b.y-m,e;e=c-w;if(l||!(0<e)){e/=l;if(0>l){if(e<T)return;e<da&&(da=e)}else if(0<l){if(e>da)return;e>T&&(T=e)}e=f-w;if(l||!(0>e)){e/=l;if(0>l){if(e>da)return;e>T&&(T=e)}else if(0<l){if(e<T)return;e<da&&(da=e)}e=a-m;if(b||!(0<e)){e/=b;if(0>
b){if(e<T)return;e<da&&(da=e)}else if(0<b){if(e>da)return;e>T&&(T=e)}e=p-m;if(b||!(0>e)){e/=b;if(0>b){if(e>da)return;e>T&&(T=e)}else if(0<b){if(e<T)return;e<da&&(da=e)}0<T&&(g.a={x:w+T*l,y:m+T*b});1>da&&(g.b={x:w+da*l,y:m+da*b});return g}}}}}}function se(c,a,f,p){function g(p,g){return 1E-6>ka(p[0]-c)?0<g?0:3:1E-6>ka(p[0]-f)?0<g?2:1:1E-6>ka(p[1]-a)?0<g?1:0:0<g?3:2}function m(c,a){return b(c.x,a.x)}function b(c,a){var q=g(c,1),f=g(a,1);return q!==f?q-f:0===q?a[1]-c[1]:1===q?c[0]-a[0]:2===q?c[1]-a[1]:
a[0]-c[0]}return function(w){function T(m,w,T,da){var l=0,e=0;if(null==m||(l=g(m,T))!==(e=g(w,T))||0>b(m,w)^0<T){do da.point(0===l||3===l?c:f,1<l?p:a);while((l=(l+T+4)%4)!==e)}else da.point(w[0],w[1])}function da(g,m){c<=g&&g<=f&&a<=m&&m<=p&&w.point(g,m)}function l(g,m){g=Math.max(-1E9,Math.min(1E9,g));m=Math.max(-1E9,Math.min(1E9,m));var b=c<=g&&g<=f&&a<=m&&m<=p;s&&t.push([g,m]);if(L)y=g,J=m,x=b,L=!1,b&&(w.lineStart(),w.point(g,m));else if(b&&C)w.point(g,m);else{var $={a:{x:F,y:E},b:{x:g,y:m}};k($)?
(C||(w.lineStart(),w.point($.a.x,$.a.y)),w.point($.b.x,$.b.y),b||w.lineEnd(),G=!1):b&&(w.lineStart(),w.point(g,m),G=!1)}F=g;E=m;C=b}var e=w,h=qe(),k=re(c,a,f,p),n,s,t,r={point:da,lineStart:function(){r.point=l;s&&s.push(t=[]);L=!0;C=!1;F=E=NaN},lineEnd:function(){n&&(l(y,J),x&&C&&h.rejoin(),n.push(h.buffer()));r.point=da;C&&w.lineEnd()},polygonStart:function(){w=h;n=[];s=[];G=!0},polygonEnd:function(){w=e;n=v.merge(n);var a;a=[c,p];for(var q=0,f=s.length,g=a[1],b=0;b<f;++b)for(var $=1,da=s[b],l=da.length,
h=da[0],k;$<l;++$)k=da[$],h[1]<=g?k[1]>g&&0<Y(h,k,a)&&++q:k[1]<=g&&0>Y(h,k,a)&&--q,h=k;a=0!==q;q=G&&a;f=n.length;if(q||f)w.polygonStart(),q&&(w.lineStart(),T(null,null,1,w),w.lineEnd()),f&&ne(n,m,a,T,w),w.polygonEnd();n=s=t=null}},y,J,x,F,E,C,L,G;return r}}function te(c,a){function f(f,g){return f=c(f,g),a(f[0],f[1])}c.invert&&a.invert&&(f.invert=function(f,g){return f=a.invert(f,g),f&&c.invert(f[0],f[1])});return f}function ed(c){var a=0,f=ja/3,p=fd(c);c=p(a,f);c.parallels=function(c){return arguments.length?
p(a=c[0]*ja/180,f=c[1]*ja/180):[a/ja*180,f/ja*180]};return c}function ue(c,a){function f(c,a){var q=Math.sqrt(m-2*g*Math.sin(a))/g;return[q*Math.sin(c*=g),b-q*Math.cos(c)]}var p=Math.sin(c),g=(p+Math.sin(a))/2,m=1+p*(2*g-p),b=Math.sqrt(m)/g;f.invert=function(c,a){var q=b-a;return[Math.atan2(c,q)/g,ea((m-(c*c+q*q)*g*g)/(2*g))]};return f}function Ig(){function c(c,a){jc+=g*c-p*a;p=c;g=a}var a,f,p,g;db.point=function(m,b){db.point=c;a=p=m;f=g=b};db.lineEnd=function(){c(a,f)}}function Jg(){function c(c,
a){b.push("M",c,",",a,m)}function a(c,q){b.push("M",c,",",q);w.point=f}function f(c,a){b.push("L",c,",",a)}function p(){w.point=c}function g(){b.push("Z")}var m=ve(4.5),b=[],w={point:c,lineStart:function(){w.point=a},lineEnd:p,polygonStart:function(){w.lineEnd=g},polygonEnd:function(){w.lineEnd=p;w.point=c},pointRadius:function(c){m=ve(c);return w},result:function(){if(b.length){var c=b.join("");b=[];return c}}};return w}function ve(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+
2*c+"z"}function lb(c,a){Xa+=c;Ya+=a;++Oa}function we(){function c(c,g){var m=c-a,b=g-f,m=Math.sqrt(m*m+b*b);Ga+=m*(a+c)/2;Ha+=m*(f+g)/2;Aa+=m;lb(a=c,f=g)}var a,f;Ma.point=function(p,g){Ma.point=c;lb(a=p,f=g)}}function xe(){Ma.point=lb}function Kg(){function c(c,a){var q=c-p,f=a-g,q=Math.sqrt(q*q+f*f);Ga+=q*(p+c)/2;Ha+=q*(g+a)/2;Aa+=q;q=g*c-p*a;bb+=q*(p+c);cb+=q*(g+a);Pa+=3*q;lb(p=c,g=a)}var a,f,p,g;Ma.point=function(m,b){Ma.point=c;lb(a=p=m,f=g=b)};Ma.lineEnd=function(){c(a,f)}}function Lg(c){function a(q,
f){c.moveTo(q,f);c.arc(q,f,b,0,Ea)}function f(a,q){c.moveTo(a,q);w.point=p}function p(a,q){c.lineTo(a,q)}function g(){w.point=a}function m(){c.closePath()}var b=4.5,w={point:a,lineStart:function(){w.point=f},lineEnd:g,polygonStart:function(){w.lineEnd=m},polygonEnd:function(){w.lineEnd=g;w.point=a},pointRadius:function(c){b=c;return w},result:z};return w}function ye(c){function a(c){return(w?p:f)(c)}function f(a){return ze(a,function(q,f){q=c(q,f);a.point(q[0],q[1])})}function p(a){function q(f,p){f=
c(f,p);a.point(f[0],f[1])}function f(){y=NaN;v.point=p;a.lineStart()}function p(q,f){var m=kb([q,f]),b=c(q,f);g(y,J,r,x,F,C,y=b[0],J=b[1],r=q,x=m[0],F=m[1],C=m[2],w,a);a.point(y,J)}function m(){v.point=q;a.lineEnd()}function b(){f();v.point=$;v.lineEnd=l}function $(c,a){p(e=c,a);h=y;k=J;n=x;s=F;t=C;v.point=p}function l(){g(y,J,r,x,F,C,h,k,e,n,s,t,w,a);v.lineEnd=m;m()}var e,h,k,n,s,t,r,y,J,x,F,C,v={point:q,lineStart:f,lineEnd:m,polygonStart:function(){a.polygonStart();v.lineStart=b},polygonEnd:function(){a.polygonEnd();
v.lineStart=f}};return v}function g(a,q,f,p,w,l,e,h,k,n,s,t,r,y){var J=e-a,x=h-q,F=J*J+x*x;if(F>4*m&&r--){var v=p+n,C=w+s,E=l+t,L=Math.sqrt(v*v+C*C+E*E),G=Math.asin(E/=L),u=1E-6>ka(ka(E)-1)||1E-6>ka(f-k)?(f+k)/2:Math.atan2(C,v),V=c(u,G),G=V[0],V=V[1],B=G-a,U=V-q,K=x*B-J*U;if(K*K/F>m||.3<ka((J*B+x*U)/F-.5)||p*n+w*s+l*t<b)g(a,q,f,p,w,l,G,V,u,v/=L,C/=L,E,r,y),y.point(G,V),g(G,V,u,v,C,E,e,h,k,n,s,t,r,y)}}var m=.5,b=Math.cos(30*ia),w=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(m);
w=0<(m=c*c)&&16;return a};return a}function Mg(c){var a=ye(function(a,q){return c([a*qa,q*qa])});return function(c){return Ae(a(c))}}function Be(c){this.stream=c}function ze(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function eb(c){return fd(function(){return c})()}function fd(c){function a(c){c=w(c[0]*ia,c[1]*ia);return[c[0]*l+y,J-c[1]*l]}function f(c){return(c=
w.invert((c[0]-y)/l,(J-c[1])/l))&&[c[0]*qa,c[1]*qa]}function p(){w=te(b=gd(s,t,r),m);var c=m(h,n);y=e-c[0]*l;J=k+c[1]*l;return g()}function g(){G&&(G.valid=!1,G=null);return a}var m,b,w,T=ye(function(c,a){c=m(c,a);return[c[0]*l+y,J-c[1]*l]}),l=150,e=480,k=250,h=0,n=0,s=0,t=0,r=0,y,J,x=Ce,F=ua,C=null,E=null,G;a.stream=function(c){G&&(G.valid=!1);G=Ae(x(b,T(F(c))));G.valid=!0;return G};a.clipAngle=function(c){if(!arguments.length)return C;x=null==c?(C=c,Ce):Hg((C=+c)*ia);return g()};a.clipExtent=function(c){if(!arguments.length)return E;
F=(E=c)?se(c[0][0],c[0][1],c[1][0],c[1][1]):ua;return g()};a.scale=function(c){if(!arguments.length)return l;l=+c;return p()};a.translate=function(c){if(!arguments.length)return[e,k];e=+c[0];k=+c[1];return p()};a.center=function(c){if(!arguments.length)return[h*qa,n*qa];h=c[0]%360*ia;n=c[1]%360*ia;return p()};a.rotate=function(c){if(!arguments.length)return[s*qa,t*qa,r*qa];s=c[0]%360*ia;t=c[1]%360*ia;r=2<c.length?c[2]%360*ia:0;return p()};v.rebind(a,T,"precision");return function(){m=c.apply(this,
arguments);a.invert=m.invert&&f;return p()}}function Ae(c){return ze(c,function(a,f){c.point(a*ia,f*ia)})}function Gb(c,a){return[c,a]}function De(c,a){return[c>ja?c-Ea:c<-ja?c+Ea:c,a]}function gd(c,a,f){return c?a||f?te(Ee(c),Fe(a,f)):Ee(c):a||f?Fe(a,f):De}function Ge(c){return function(a,f){return a+=c,[a>ja?a-Ea:a<-ja?a+Ea:a,f]}}function Ee(c){var a=Ge(c);a.invert=Ge(-c);return a}function Fe(c,a){function f(c,a){var q=Math.cos(a),f=Math.cos(c)*q,q=Math.sin(c)*q,l=Math.sin(a),e=l*p+f*g;return[Math.atan2(q*
m-e*b,f*p-l*g),ea(e*m+q*b)]}var p=Math.cos(c),g=Math.sin(c),m=Math.cos(a),b=Math.sin(a);f.invert=function(c,a){var q=Math.cos(a),f=Math.cos(c)*q,q=Math.sin(c)*q,l=Math.sin(a),e=l*m-q*b;return[Math.atan2(q*m+l*b,f*p+e*g),ea(e*p-f*g)]};return f}function dd(c,a){var f=Math.cos(c),p=Math.sin(c);return function(g,m,b,w){var T=b*a;if(null!=g){if(g=He(f,g),m=He(f,m),0<b?g<m:g>m)g+=b*Ea}else g=c+b*Ea,m=c-.5*T;for(var l;0<b?g>m:g<m;g-=T)w.point((l=gc([f,-p*Math.cos(g),-p*Math.sin(g)]))[0],l[1])}}function He(c,
a){var f=kb(a);f[0]-=c;fc(f);var p=la(-f[1]);return((0>-f[2]?-p:p)+2*Math.PI-1E-6)%(2*Math.PI)}function Ie(c,a,f){var p=v.range(c,a-1E-6,f).concat(a);return function(c){return p.map(function(a){return[c,a]})}}function Je(c,a,f){var p=v.range(c,a-1E-6,f).concat(a);return function(c){return p.map(function(a){return[a,c]})}}function hd(c){return c.source}function id(c){return c.target}function Ng(c,a,f,p){var g=Math.cos(a),m=Math.sin(a),b=Math.cos(p),w=Math.sin(p),T=g*Math.cos(c),l=g*Math.sin(c),e=b*
Math.cos(f),k=b*Math.sin(f),h=2*Math.asin(Math.sqrt(ra(p-a)+g*b*ra(f-c))),n=1/Math.sin(h);f=h?function(c){var a=Math.sin(c*=h)*n,q=Math.sin(h-c)*n;c=q*T+a*e;var f=q*l+a*k,a=q*m+a*w;return[Math.atan2(f,c)*qa,Math.atan2(a,Math.sqrt(c*c+f*f))*qa]}:function(){return[c*qa,a*qa]};f.distance=h;return f}function Hb(c,a){function f(a,q){var f=Math.cos(a),b=Math.cos(q),f=c(f*b);return[f*b*Math.sin(a),f*Math.sin(q)]}f.invert=function(c,f){var m=Math.sqrt(c*c+f*f),b=a(m),w=Math.sin(b),b=Math.cos(b);return[Math.atan2(c*
w,m*b),Math.asin(m&&f*w/m)]};return f}function Ke(c,a){function f(c,a){0<m?a<-va+1E-6&&(a=-va+1E-6):a>va-1E-6&&(a=va-1E-6);var q=m/Math.pow(Math.tan(ja/4+a/2),g);return[q*Math.sin(g*c),m-q*Math.cos(g*c)]}var p=Math.cos(c),g=c===a?Math.sin(c):Math.log(p/Math.cos(a))/Math.log(Math.tan(ja/4+a/2)/Math.tan(ja/4+c/2)),m=p*Math.pow(Math.tan(ja/4+c/2),g)/g;if(!g)return kc;f.invert=function(c,a){var q=m-a,f=(0<g?1:0>g?-1:0)*Math.sqrt(c*c+q*q);return[Math.atan2(c,q)/g,2*Math.atan(Math.pow(m/f,1/g))-va]};return f}
function Le(c,a){function f(c,a){var q=m-a;return[q*Math.sin(g*c),m-q*Math.cos(g*c)]}var p=Math.cos(c),g=c===a?Math.sin(c):(p-Math.cos(a))/(a-c),m=p/g+c;if(1E-6>ka(g))return Gb;f.invert=function(c,a){var q=m-a;return[Math.atan2(c,q)/g,m-(0<g?1:0>g?-1:0)*Math.sqrt(c*c+q*q)]};return f}function kc(c,a){return[c,Math.log(Math.tan(ja/4+a/2))]}function Me(c){var a=eb(c),f=a.scale,p=a.translate,g=a.clipExtent,m;a.scale=function(){var c=f.apply(a,arguments);return c===a?m?a.clipExtent(null):a:c};a.translate=
function(){var c=p.apply(a,arguments);return c===a?m?a.clipExtent(null):a:c};a.clipExtent=function(c){var b=g.apply(a,arguments);if(b===a){if(m=null==c){var T=ja*f(),l=p();g([[l[0]-T,l[1]-T],[l[0]+T,l[1]+T]])}}else m&&(b=null);return b};return a.clipExtent(null)}function jd(c,a){return[Math.log(Math.tan(ja/4+a/2)),-c]}function vb(c){return c[0]}function Ib(c){return c[1]}function Ne(c){for(var a=c.length,f=[0,1],p=2,g=2;g<a;g++){for(;1<p&&0>=Y(c[f[p-2]],c[f[p-1]],c[g]);)--p;f[p++]=g}return f.slice(0,
p)}function Og(c,a){return c[0]-a[0]||c[1]-a[1]}function kd(c,a,f){return(f[0]-a[0])*(c[1]-a[1])<(f[1]-a[1])*(c[0]-a[0])}function Oe(c,a,f,p){var g=c[0],m=f[0],b=a[0]-g,w=p[0]-m;c=c[1];f=f[1];a=a[1]-c;p=p[1]-f;m=(w*(c-f)-p*(g-m))/(p*b-w*a);return[g+m*b,c+m*a]}function Pe(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Pg(){lc(this);this.edge=this.site=this.circle=null}function Qe(c){var a=Re.pop()||new Pg;a.site=c;return a}function ld(c){wb(c);xb.remove(c);Re.push(c);lc(c)}function Se(c,
a){var f=c.site,p=f.x,g=f.y,m=g-a;if(!m)return p;var b=c.P;if(!b)return-Infinity;var f=b.site,b=f.x,f=f.y,w=f-a;if(!w)return b;var T=b-p,l=1/m-1/w,e=T/w;return l?(-e+Math.sqrt(e*e-2*l*(T*T/(-2*w)-f+w/2+g-m/2)))/l+p:(p+b)/2}function Te(c){this.site=c;this.edges=[]}function Ue(c,a){return a.angle-c.angle}function Qg(){lc(this);this.x=this.y=this.arc=this.site=this.cy=null}function yb(c){var a=c.P,f=c.N;if(a&&f){var p=a.site,a=c.site,g=f.site;if(p!==g){var f=a.x,m=a.y,b=p.x-f,w=p.y-m,p=g.x-f,g=g.y-m,
T=2*(b*g-w*p);if(!(-1E-12<=T)){var l=b*b+w*w,e=p*p+g*g,w=(g*l-w*e)/T,b=(b*e-p*l)/T,g=b+m,m=Ve.pop()||new Qg;m.arc=c;m.site=a;m.x=w+f;m.y=g+Math.sqrt(w*w+b*b);m.cy=g;c.circle=m;c=null;for(a=Jb._;a;)if(m.y<a.y||m.y===a.y&&m.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Jb.insert(c,m);c||(md=m)}}}}function wb(c){var a=c.circle;a&&(a.P||(md=a.N),Jb.remove(a),Ve.push(a),lc(a),c.circle=null)}function Rg(c,a){var f=c.b;if(f)return!0;var p=c.a,f=a[0][0],g=a[1][0],m=a[0][1],b=a[1][1],
w=c.l,T=c.r,l=w.x,w=w.y,e=T.x,T=T.y,h=(l+e)/2,k;if(T===w){if(h<f||h>=g)return;if(l>e){if(!p)p={x:h,y:m};else if(p.y>=b)return;f={x:h,y:b}}else{if(!p)p={x:h,y:b};else if(p.y<m)return;f={x:h,y:m}}}else if(k=(l-e)/(T-w),h=(w+T)/2-k*h,-1>k||1<k)if(l>e){if(!p)p={x:(m-h)/k,y:m};else if(p.y>=b)return;f={x:(b-h)/k,y:b}}else{if(!p)p={x:(b-h)/k,y:b};else if(p.y<m)return;f={x:(m-h)/k,y:m}}else if(w<T){if(!p)p={x:f,y:k*f+h};else if(p.x>=g)return;f={x:g,y:k*g+h}}else{if(!p)p={x:g,y:k*g+h};else if(p.x<f)return;
f={x:f,y:k*f+h}}c.a=p;c.b=f;return!0}function We(c,a){this.l=c;this.r=a;this.a=this.b=null}function Kb(c,a,f,p){var g=new We(c,a);zb.push(g);f&&mc(g,c,a,f);p&&mc(g,a,c,p);mb[c.i].edges.push(new nc(g,c,a));mb[a.i].edges.push(new nc(g,a,c));return g}function Sg(c,a,f){c=new We(c,null);c.a=a;c.b=f;zb.push(c);return c}function mc(c,a,f,p){c.a||c.b?c.l===f?c.b=p:c.a=p:(c.a=p,c.l=a,c.r=f)}function nc(c,a,f){var p=c.a,g=c.b;this.edge=c;this.site=a;this.angle=f?Math.atan2(f.y-a.y,f.x-a.x):c.l===a?Math.atan2(g.x-
p.x,p.y-g.y):Math.atan2(p.x-g.x,g.y-p.y)}function nd(){this._=null}function lc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Lb(c,a){var f=a.R,p=a.U;p?p.L===a?p.L=f:p.R=f:c._=f;f.U=p;a.U=f;a.R=f.L;a.R&&(a.R.U=a);f.L=a}function Mb(c,a){var f=a.L,p=a.U;p?p.L===a?p.L=f:p.R=f:c._=f;f.U=p;a.U=f;a.L=f.R;a.L&&(a.L.U=a);f.R=a}function Xe(c){for(;c.L;)c=c.L;return c}function od(c,a){var f=c.sort(Tg).pop(),p,g,m;zb=[];mb=Array(c.length);xb=new nd;for(Jb=new nd;;)if(m=md,f&&(!m||f.y<m.y||f.y===m.y&&f.x<m.x)){if(f.x!==
p||f.y!==g){mb[f.i]=new Te(f);p=f;for(var b=p.x,w=p.y,T=m=g=void 0,l=void 0,e=xb._;e;)if(T=Se(e,w)-b,1E-6<T)e=e.L;else{var h=e,l=w,k=h.N;k?l=Se(k,l):(h=h.site,l=h.y===l?h.x:Infinity);l=b-l;if(1E-6<l){if(!e.R){g=e;break}e=e.R}else{-1E-6<T?(g=e.P,m=e):-1E-6<l?(g=e,m=e.N):g=m=e;break}}b=Qe(p);xb.insert(g,b);if(g||m)if(g===m)wb(g),m=Qe(g.site),xb.insert(b,m),b.edge=m.edge=Kb(g.site,b.site),yb(g),yb(m);else if(m){wb(g);wb(m);var w=g.site,e=w.x,l=w.y,h=p.x-e,k=p.y-l,T=m.site,n=T.x-e,s=T.y-l,t=2*(h*s-k*
n),r=h*h+k*k,y=n*n+s*s,e={x:(s*r-k*y)/t+e,y:(h*y-n*r)/t+l};mc(m.edge,w,T,e);b.edge=Kb(w,p,null,e);m.edge=Kb(p,T,null,e);yb(g);yb(m)}else b.edge=Kb(g.site,b.site);p=f.x;g=f.y}f=c.pop()}else if(m){T=m.arc;m=T.circle;w=m.x;e=m.cy;m={x:w,y:e};h=T.P;l=T.N;b=[T];ld(T);for(T=h;T.circle&&1E-6>ka(w-T.circle.x)&&1E-6>ka(e-T.circle.cy);)h=T.P,b.unshift(T),ld(T),T=h;b.unshift(T);wb(T);for(h=l;h.circle&&1E-6>ka(w-h.circle.x)&&1E-6>ka(e-h.circle.cy);)l=h.N,b.push(h),ld(h),h=l;b.push(h);wb(h);w=b.length;e=void 0;
for(e=1;e<w;++e)h=b[e],T=b[e-1],mc(h.edge,T.site,h.site,m);T=b[0];h=b[w-1];h.edge=Kb(T.site,h.site,null,m);yb(T);yb(h)}else break;if(a){f=zb;p=re(a[0][0],a[0][1],a[1][0],a[1][1]);for(g=f.length;g--;)if(m=f[g],!Rg(m,a)||!p(m)||1E-6>ka(m.a.x-m.b.x)&&1E-6>ka(m.a.y-m.b.y))m.a=m.b=null,f.splice(g,1);f=a[0][0];p=a[1][0];g=a[0][1];m=a[1][1];e=mb;for(l=e.length;l--;)if((h=e[l])&&h.prepare())for(n=h.edges,s=n.length,k=0;k<s;)if(t=n[k].end(),w=t.x,T=t.y,r=n[++k%s].start(),b=r.x,r=r.y,1E-6<ka(w-b)||1E-6<ka(T-
r))n.splice(k,0,new nc(Sg(h.site,t,1E-6>ka(w-f)&&1E-6<m-T?{x:f,y:1E-6>ka(b-f)?r:m}:1E-6>ka(T-m)&&1E-6<p-w?{x:1E-6>ka(r-m)?b:p,y:m}:1E-6>ka(w-p)&&1E-6<T-g?{x:p,y:1E-6>ka(b-p)?r:g}:1E-6>ka(T-g)&&1E-6<w-f?{x:1E-6>ka(r-g)?b:f,y:g}:null),h.site,null)),++s}f={cells:mb,edges:zb};xb=Jb=zb=mb=null;return f}function Tg(c,a){return a.y-c.y||a.x-c.x}function Ug(c){return c.x}function Vg(c){return c.y}function Ye(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Nb(c,a,f,p,g,m){if(!c(a,f,p,g,m)){var b=
.5*(f+g),w=.5*(p+m);a=a.nodes;a[0]&&Nb(c,a[0],f,p,b,w);a[1]&&Nb(c,a[1],b,p,g,w);a[2]&&Nb(c,a[2],f,w,b,m);a[3]&&Nb(c,a[3],b,w,g,m)}}function pd(c,a){c=v.rgb(c);a=v.rgb(a);var f=c.r,p=c.g,g=c.b,m=a.r-f,b=a.g-p,w=a.b-g;return function(c){return"#"+rb(Math.round(f+m*c))+rb(Math.round(p+b*c))+rb(Math.round(g+w*c))}}function Ze(c,a){var f={},p={},g;for(g in c)g in a?f[g]=nb(c[g],a[g]):p[g]=c[g];for(g in a)g in c||(p[g]=a[g]);return function(c){for(g in f)p[g]=f[g](c);return p}}function Za(c,a){a-=c=+c;
return function(f){return c+a*f}}function $e(c,a){var f=qd.lastIndex=rd.lastIndex=0,p,g,m,b=-1,w=[],l=[];c+="";for(a+="";(p=qd.exec(c))&&(g=rd.exec(a));)(m=g.index)>f&&(m=a.substring(f,m),w[b]?w[b]+=m:w[++b]=m),(p=p[0])===(g=g[0])?w[b]?w[b]+=g:w[++b]=g:(w[++b]=null,l.push({i:b,x:Za(p,g)})),f=rd.lastIndex;f<a.length&&(m=a.substring(f),w[b]?w[b]+=m:w[++b]=m);return 2>w.length?l[0]?(a=l[0].x,function(c){return a(c)+""}):function(){return a}:(a=l.length,function(c){for(var f=0,p;f<a;++f)w[(p=l[f]).i]=
p.x(c);return w.join("")})}function nb(c,a){for(var f=v.interpolators.length,p;0<=--f&&!(p=v.interpolators[f](c,a)););return p}function oc(c,a){var f=[],p=[],g=c.length,m=a.length,b=Math.min(c.length,a.length),w;for(w=0;w<b;++w)f.push(nb(c[w],a[w]));for(;w<g;++w)p[w]=c[w];for(;w<m;++w)p[w]=a[w];return function(c){for(w=0;w<b;++w)p[w]=f[w](c);return p}}function Wg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function af(c){return function(a){return 1-c(1-a)}}function bf(c){return function(a){return.5*
(.5>a?c(2*a):2-c(2-2*a))}}function Xg(c){return c*c}function Yg(c){return c*c*c}function Zg(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,f=a*c;return 4*(.5>c?f:3*(c-a)+f-.75)}function $g(c){return 1-Math.cos(c*va)}function ah(c){return Math.pow(2,10*(c-1))}function bh(c){return 1-Math.sqrt(1-c*c)}function ch(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function cf(c,a){a-=c;return function(f){return Math.round(c+
a*f)}}function df(c){var a=[c.a,c.b],f=[c.c,c.d],p=ef(a),g=a[0]*f[0]+a[1]*f[1],m=-g;f[0]+=m*a[0];f[1]+=m*a[1];m=ef(f)||0;a[0]*f[1]<f[0]*a[1]&&(a[0]*=-1,a[1]*=-1,p*=-1,g*=-1);this.rotate=(p?Math.atan2(a[1],a[0]):Math.atan2(-f[0],f[1]))*qa;this.translate=[c.e,c.f];this.scale=[p,m];this.skew=m?Math.atan2(g,m)*qa:0}function ef(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function ff(c,a){var f=[],p=[],g,m=v.transform(c),b=v.transform(a),w=m.translate,l=b.translate,e=m.rotate,
h=b.rotate,k=m.skew,n=b.skew,m=m.scale,b=b.scale;w[0]!=l[0]||w[1]!=l[1]?(f.push("translate(",null,",",null,")"),p.push({i:1,x:Za(w[0],l[0])},{i:3,x:Za(w[1],l[1])})):l[0]||l[1]?f.push("translate("+l+")"):f.push("");e!=h?(180<e-h?h+=360:180<h-e&&(e+=360),p.push({i:f.push(f.pop()+"rotate(",null,")")-2,x:Za(e,h)})):h&&f.push(f.pop()+"rotate("+h+")");k!=n?p.push({i:f.push(f.pop()+"skewX(",null,")")-2,x:Za(k,n)}):n&&f.push(f.pop()+"skewX("+n+")");m[0]!=b[0]||m[1]!=b[1]?(g=f.push(f.pop()+"scale(",null,",",
null,")"),p.push({i:g-4,x:Za(m[0],b[0])},{i:g-2,x:Za(m[1],b[1])})):1==b[0]&&1==b[1]||f.push(f.pop()+"scale("+b+")");g=p.length;return function(c){for(var a=-1,q;++a<g;)f[(q=p[a]).i]=q.x(c);return f.join("")}}function dh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return(f-c)*a}}function eh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return Math.max(0,Math.min(1,(f-c)*a))}}function fh(c){var a=c.source;c=c.target;var f;var p=c;if(a===p)f=a;else{f=gf(a);for(var p=gf(p),g=f.pop(),m=p.pop(),b=null;g===
m;)b=g,g=f.pop(),m=p.pop();f=b}for(p=[a];a!==f;)a=a.parent,p.push(a);for(a=p.length;c!==f;)p.splice(a,0,c),c=c.parent;return p}function gf(c){for(var a=[],f=c.parent;null!=f;)a.push(c),c=f,f=f.parent;a.push(c);return a}function gh(c){c.fixed|=2}function hh(c){c.fixed&=-7}function ih(c){c.fixed|=4;c.px=c.x;c.py=c.y}function jh(c){c.fixed&=-5}function hf(c,a,f){var p=0,g=0;c.charge=0;if(!c.leaf)for(var m=c.nodes,b=m.length,w=-1,l;++w<b;)l=m[w],null!=l&&(hf(l,a,f),c.charge+=l.charge,p+=l.charge*l.cx,
g+=l.charge*l.cy);c.point&&(c.leaf||(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=f[c.point.index],c.charge+=c.pointCharge=a,p+=a*c.point.x,g+=a*c.point.y);c.cx=p/c.charge;c.cy=g/c.charge}function Ob(c,a){v.rebind(c,a,"sort","children","value");c.nodes=c;c.links=kh;return c}function Pb(c,a){for(var f=[c];null!=(c=f.pop());)if(a(c),(g=c.children)&&(p=g.length))for(var p,g;0<=--p;)f.push(g[p])}function Qa(c,a){for(var f=[c],p=[];null!=(c=f.pop());)if(p.push(c),(b=c.children)&&(m=b.length))for(var g=
-1,m,b;++g<m;)f.push(b[g]);for(;null!=(c=p.pop());)a(c)}function lh(c){return c.children}function mh(c){return c.value}function nh(c,a){return a.value-c.value}function kh(c){return v.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function oh(c){return c.x}function ph(c){return c.y}function qh(c,a,f){c.y0=a;c.y=f}function sd(c){return v.range(c.length)}function td(c){var a=-1;c=c[0].length;for(var f=[];++a<c;)f[a]=0;return f}function rh(c){for(var a=1,
f=0,p=c[0][1],g,m=c.length;a<m;++a)(g=c[a][1])>p&&(f=a,p=g);return f}function sh(c){return c.reduce(th,0)}function th(c,a){return c+a[1]}function uh(c,a){return jf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function jf(c,a){for(var f=-1,p=+c[0],g=(c[1]-p)/a,m=[];++f<=a;)m[f]=g*f+p;return m}function vh(c){return[v.min(c),v.max(c)]}function wh(c,a){return c.value-a.value}function ud(c,a){var f=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=f;f._pack_prev=a}function kf(c,a){c._pack_next=a;
a._pack_prev=c}function lf(c,a){var f=a.x-c.x,p=a.y-c.y,g=c.r+a.r;return.999*g*g>f*f+p*p}function mf(c){function a(c){p=Math.min(c.x-c.r,p);g=Math.max(c.x+c.r,g);m=Math.min(c.y-c.r,m);b=Math.max(c.y+c.r,b)}if((f=c.children)&&(s=f.length)){var f,p=Infinity,g=-Infinity,m=Infinity,b=-Infinity,w,l,e,h,k,n,s;f.forEach(xh);w=f[0];w.x=-w.r;w.y=0;a(w);if(1<s&&(l=f[1],l.x=l.r,l.y=0,a(l),2<s))for(e=f[2],nf(w,l,e),a(e),ud(w,e),w._pack_prev=e,ud(e,l),l=w._pack_next,h=3;h<s;h++){nf(w,l,e=f[h]);var r=0,t=1,y=1;
for(k=l._pack_next;k!==l;k=k._pack_next,t++)if(lf(k,e)){r=1;break}if(1==r)for(n=w._pack_prev;n!==k._pack_prev&&!lf(n,e);n=n._pack_prev,y++);r?(t<y||t==y&&l.r<w.r?kf(w,l=k):kf(w=n,l),h--):(ud(w,e),l=e,a(e))}w=(p+g)/2;l=(m+b)/2;for(h=k=0;h<s;h++)e=f[h],e.x-=w,e.y-=l,k=Math.max(k,e.r+Math.sqrt(e.x*e.x+e.y*e.y));c.r=k;f.forEach(yh)}}function xh(c){c._pack_next=c._pack_prev=c}function yh(c){delete c._pack_next;delete c._pack_prev}function of(c,a,f,p){var g=c.children;c.x=a+=p*c.x;c.y=f+=p*c.y;c.r*=p;if(g){c=
-1;for(var m=g.length;++c<m;)of(g[c],a,f,p)}}function nf(c,a,f){var p=c.r+f.r,g=a.x-c.x,m=a.y-c.y;if(p&&(g||m)){var b=a.r+f.r,w=g*g+m*m,b=b*b,p=p*p;a=.5+(p-b)/(2*w);b=Math.sqrt(Math.max(0,2*b*(p+w)-(p-=w)*p-b*b))/(2*w);f.x=c.x+a*g+b*m;f.y=c.y+a*m-b*g}else f.x=c.x+p,f.y=c.y}function pf(c,a){return c.parent==a.parent?1:2}function vd(c){var a=c.children;return a.length?a[0]:c.t}function wd(c){var a=c.children,f;return(f=a.length)?a[f-1]:c.t}function zh(c){return 1+v.max(c,function(c){return c.y})}function Ah(c){return c.reduce(function(c,
a){return c+a.x},0)/c.length}function qf(c){var a=c.children;return a&&a.length?qf(a[0]):c}function rf(c){var a=c.children,f;return a&&(f=a.length)?rf(a[f-1]):c}function xd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function sf(c,a){var f=c.x+a[3],p=c.y+a[0],g=c.dx-a[1]-a[3],m=c.dy-a[0]-a[2];0>g&&(f+=g/2,g=0);0>m&&(p+=m/2,m=0);return{x:f,y:p,dx:g,dy:m}}function Ab(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function pc(c){return c.rangeExtent?c.rangeExtent():Ab(c.range())}function Bh(c,a,f,p){var g=
f(c[0],c[1]),m=p(a[0],a[1]);return function(c){return m(g(c))}}function qc(c,a){var f=0,p=c.length-1,g=c[f],m=c[p],b;m<g&&(b=f,f=p,p=b,b=g,g=m,m=b);c[f]=a.floor(g);c[p]=a.ceil(m);return c}function tf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Ch}function Dh(c,a,f,p){var g=[],b=[],l=0,w=Math.min(c.length,a.length)-1;c[w]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++l<=w;)g.push(f(c[l-1],c[l])),b.push(p(a[l-1],a[l]));return function(a){var q=
v.bisect(c,a,1,w)-1;return b[q](g[q](a))}}function uf(c,a,f,p){function g(){var g=2<Math.min(c.length,a.length)?Dh:Bh,e=p?eh:dh;l=g(c,a,e,f);w=g(a,c,e,nb);return b}function b(c){return l(c)}var l,w;b.invert=function(c){return w(c)};b.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return g()};b.range=function(c){if(!arguments.length)return a;a=c;return g()};b.rangeRound=function(c){return b.range(c).interpolate(cf)};b.clamp=function(c){if(!arguments.length)return p;p=c;return g()};
b.interpolate=function(c){if(!arguments.length)return f;f=c;return g()};b.ticks=function(a){return v.range.apply(v,fb(c,a))};b.tickFormat=function(a,q){return yd(c,a,q)};b.nice=function(a){qc(c,tf(fb(c,a)[2]));return g()};b.copy=function(){return uf(c,a,f,p)};return g()}function zd(c,a){return v.rebind(c,a,"range","rangeRound","interpolate","clamp")}function fb(c,a){null==a&&(a=10);var f=Ab(c),p=f[1]-f[0],g=Math.pow(10,Math.floor(Math.log(p/a)/Math.LN10)),p=a/p*g;.15>=p?g*=10:.35>=p?g*=5:.75>=p&&
(g*=2);f[0]=Math.ceil(f[0]/g)*g;f[1]=Math.floor(f[1]/g)*g+.5*g;f[2]=g;return f}function yd(c,a,f){c=fb(c,a);if(f){a=de.exec(f);a.shift();if("s"===a[8]){var p=v.formatPrefix(Math.max(ka(c[0]),ka(c[1])));a[7]||(a[7]="."+rc(p.scale(c[2])));a[8]="f";f=v.format(a.join(""));return function(c){return f(p.scale(c))+p.symbol}}a[7]||(a[7]="."+Eh(a[8],c));f=a.join("")}else f=",."+rc(c[2])+"f";return v.format(f)}function rc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Eh(c,a){var f=rc(a[2]);return c in
Fh?Math.abs(f-rc(Math.max(ka(a[0]),ka(a[1]))))+ +("e"!==c):f-2*("%"===c)}function vf(c,a,f,p){function g(c){return(f?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function b(c){return f?Math.pow(a,c):-Math.pow(a,-c)}function l(a){return c(g(a))}l.invert=function(a){return b(c.invert(a))};l.domain=function(a){if(!arguments.length)return p;f=0<=a[0];c.domain((p=a.map(Number)).map(g));return l};l.base=function(f){if(!arguments.length)return a;a=+f;c.domain(p.map(g));return l};l.nice=function(){var a=
qc(p.map(g),f?Math:Gh);c.domain(a);p=a.map(b);return l};l.ticks=function(){var c=Ab(p),l=[],e=c[0],c=c[1],h=Math.floor(g(e)),k=Math.ceil(g(c)),n=a%1?2:a;if(isFinite(k-h)){if(f){for(;h<k;h++)for(var $=1;$<n;$++)l.push(b(h)*$);l.push(b(h))}else for(l.push(b(h));h++<k;)for($=n-1;0<$;$--)l.push(b(h)*$);for(h=0;l[h]<e;h++);for(k=l.length;l[k-1]>c;k--);l=l.slice(h,k)}return l};l.tickFormat=function(c,a){if(!arguments.length)return wf;2>arguments.length?a=wf:"function"!==typeof a&&(a=v.format(a));var q=
Math.max(.1,c/l.ticks().length),p=f?(e=1E-12,Math.ceil):(e=-1E-12,Math.floor),e;return function(c){return c/b(p(g(c)+e))<=q?a(c):""}};l.copy=function(){return vf(c.copy(),a,f,p)};return zd(l,c)}function xf(c,a,f){function p(a){return c(g(a))}var g=sc(a),b=sc(1/a);p.invert=function(a){return b(c.invert(a))};p.domain=function(a){if(!arguments.length)return f;c.domain((f=a.map(Number)).map(g));return p};p.ticks=function(c){return v.range.apply(v,fb(f,c))};p.tickFormat=function(c,a){return yd(f,c,a)};
p.nice=function(c){return p.domain(qc(f,tf(fb(f,c)[2])))};p.exponent=function(l){if(!arguments.length)return a;g=sc(a=l);b=sc(1/a);c.domain(f.map(g));return p};p.copy=function(){return xf(c.copy(),a,f)};return zd(p,c)}function sc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function yf(c,a){function f(f){return b[((g.get(f)||("range"===a.t?g.set(f,c.push(f)):NaN))-1)%b.length]}function p(a,q){return v.range(c.length).map(function(c){return a+q*c})}var g,b,l;f.domain=function(p){if(!arguments.length)return c;
c=[];g=new r;for(var b=-1,m=p.length,l;++b<m;)g.has(l=p[b])||g.set(l,c.push(l));return f[a.t].apply(f,a.a)};f.range=function(c){if(!arguments.length)return b;b=c;l=0;a={t:"range",a:arguments};return f};f.rangePoints=function(g,e){2>arguments.length&&(e=0);var h=g[0],k=g[1],n=(k-h)/(Math.max(1,c.length-1)+e);b=p(2>c.length?(h+k)/2:h+n*e/2,n);l=0;a={t:"rangePoints",a:arguments};return f};f.rangeBands=function(g,e,h){2>arguments.length&&(e=0);3>arguments.length&&(h=e);var k=g[1]<g[0],n=g[k-0],s=(g[1-
k]-n)/(c.length-e+2*h);b=p(n+s*h,s);k&&b.reverse();l=s*(1-e);a={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(g,e,h){2>arguments.length&&(e=0);3>arguments.length&&(h=e);var k=g[1]<g[0],n=g[k-0],s=g[1-k],r=Math.floor((s-n)/(c.length-e+2*h));b=p(n+Math.round((s-n-(c.length-e)*r)/2),r);k&&b.reverse();l=Math.round(r*(1-e));a={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return l};f.rangeExtent=function(){return Ab(a.a[0])};f.copy=function(){return yf(c,a)};return f.domain(c)}
function zf(c,a){function f(){var f=0,b=a.length;for(g=[];++f<b;)g[f-1]=v.quantile(c,f/b);return p}function p(c){if(!isNaN(c=+c))return a[v.bisect(g,c)]}var g;p.domain=function(a){if(!arguments.length)return c;c=a.filter(u).sort(I);return f()};p.range=function(c){if(!arguments.length)return a;a=c;return f()};p.quantiles=function(){return g};p.invertExtent=function(f){f=a.indexOf(f);return 0>f?[NaN,NaN]:[0<f?g[f-1]:c[0],f<g.length?g[f]:c[c.length-1]]};p.copy=function(){return zf(c,a)};return f()}function Af(c,
a,f){function p(a){return f[Math.max(0,Math.min(l,Math.floor(m*(a-c))))]}function b(){m=f.length/(a-c);l=f.length-1;return p}var m,l;p.domain=function(f){if(!arguments.length)return[c,a];c=+f[0];a=+f[f.length-1];return b()};p.range=function(c){if(!arguments.length)return f;f=c;return b()};p.invertExtent=function(a){a=f.indexOf(a);a=0>a?NaN:a/m+c;return[a,a+1/m]};p.copy=function(){return Af(c,a,f)};return b()}function Bf(c,a){function f(f){if(f<=f)return a[v.bisect(c,f)]}f.domain=function(a){if(!arguments.length)return c;
c=a;return f};f.range=function(c){if(!arguments.length)return a;a=c;return f};f.invertExtent=function(f){f=a.indexOf(f);return[c[f-1],c[f]]};f.copy=function(){return Bf(c,a)};return f}function Cf(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(f){if(!arguments.length)return c;c=f.map(a);return a};a.ticks=function(a){return v.range.apply(v,fb(c,a))};a.tickFormat=function(a,q){return yd(c,a,q)};a.copy=function(){return Cf(c)};return a}function Hh(c){return c.innerRadius}function Ih(c){return c.outerRadius}
function Df(c){return c.startAngle}function Ef(c){return c.endAngle}function Ff(c){function a(q){function l(){e.push("M",m(c(h),w))}for(var e=[],h=[],k=-1,n=q.length,s,$=pa(f),r=pa(p);++k<n;)b.call(this,s=q[k],k)?h.push([+$.call(this,s,k),+r.call(this,s,k)]):h.length&&(l(),h=[]);h.length&&l();return e.length?e.join(""):null}var f=vb,p=Ib,b=ub,m=Fa,l=m.key,w=.7;a.x=function(c){if(!arguments.length)return f;f=c;return a};a.y=function(c){if(!arguments.length)return p;p=c;return a};a.defined=function(c){if(!arguments.length)return b;
b=c;return a};a.interpolate=function(c){if(!arguments.length)return l;l="function"===typeof c?m=c:(m=Ad.get(c)||Fa).key;return a};a.tension=function(c){if(!arguments.length)return w;w=c;return a};return a}function Fa(c){return c.join("L")}function Bd(c){for(var a=0,f=c.length,p=c[0],b=[p[0],",",p[1]];++a<f;)b.push("V",(p=c[a])[1],"H",p[0]);return b.join("")}function Cd(c){for(var a=0,f=c.length,p=c[0],b=[p[0],",",p[1]];++a<f;)b.push("H",(p=c[a])[0],"V",p[1]);return b.join("")}function tc(c,a){if(1>
a.length||c.length!=a.length&&c.length!=a.length+2)return Fa(c);var f=c.length!=a.length,p="",b=c[0],m=c[1],l=a[0],w=l,e=1;f&&(p+="Q"+(m[0]-2*l[0]/3)+","+(m[1]-2*l[1]/3)+","+m[0]+","+m[1],b=c[1],e=2);if(1<a.length)for(w=a[1],m=c[e],e++,p+="C"+(b[0]+l[0])+","+(b[1]+l[1])+","+(m[0]-w[0])+","+(m[1]-w[1])+","+m[0]+","+m[1],b=2;b<a.length;b++,e++)m=c[e],w=a[b],p+="S"+(m[0]-w[0])+","+(m[1]-w[1])+","+m[0]+","+m[1];f&&(f=c[e],p+="Q"+(m[0]+2*w[0]/3)+","+(m[1]+2*w[1]/3)+","+f[0]+","+f[1]);return p}function Dd(c,
a){for(var f=[],p=(1-a)/2,b,m=c[0],l=c[1],w=1,e=c.length;++w<e;)b=m,m=l,l=c[w],f.push([p*(l[0]-b[0]),p*(l[1]-b[1])]);return f}function Gf(c){if(3>c.length)return Fa(c);var a=1,f=c.length,p=c[0],b=p[0],m=p[1],l=[b,b,b,(p=c[1])[0]],w=[m,m,m,p[1]],b=[b,",",m,"L",Ia(gb,l),",",Ia(gb,w)];for(c.push(c[f-1]);++a<=f;)p=c[a],l.shift(),l.push(p[0]),w.shift(),w.push(p[1]),Ed(b,l,w);c.pop();b.push("L",p);return b.join("")}function Ia(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Ed(c,a,f){c.push("C",
Ia(Hf,a),",",Ia(Hf,f),",",Ia(If,a),",",Ia(If,f),",",Ia(gb,a),",",Ia(gb,f))}function Fd(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Jf(c){for(var a,f=-1,p=c.length,b,m;++f<p;)a=c[f],b=a[0],m=a[1]+ob,a[0]=b*Math.cos(m),a[1]=b*Math.sin(m);return c}function Kf(c){function a(q){function e(){T.push("M",w(c(r),n),k,h(c(s.reverse()),n),"Z")}for(var T=[],s=[],r=[],t=-1,y=q.length,J,x=pa(f),F=pa(b),C=f===p?function(){return E}:pa(p),v=b===m?function(){return G}:pa(m),E,G;++t<y;)l.call(this,J=q[t],t)?(s.push([E=
+x.call(this,J,t),G=+F.call(this,J,t)]),r.push([+C.call(this,J,t),+v.call(this,J,t)])):s.length&&(e(),s=[],r=[]);s.length&&e();return T.length?T.join(""):null}var f=vb,p=vb,b=0,m=Ib,l=ub,w=Fa,e=w.key,h=w,k="L",n=.7;a.x=function(c){if(!arguments.length)return p;f=p=c;return a};a.x0=function(c){if(!arguments.length)return f;f=c;return a};a.x1=function(c){if(!arguments.length)return p;p=c;return a};a.y=function(c){if(!arguments.length)return m;b=m=c;return a};a.y0=function(c){if(!arguments.length)return b;
b=c;return a};a.y1=function(c){if(!arguments.length)return m;m=c;return a};a.defined=function(c){if(!arguments.length)return l;l=c;return a};a.interpolate=function(c){if(!arguments.length)return e;e="function"===typeof c?w=c:(w=Ad.get(c)||Fa).key;h=w.reverse||w;k=w.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return n;n=c;return a};return a}function Jh(c){return c.radius}function Lf(c){return[c.x,c.y]}function Kh(c){return function(){var a=c.apply(this,arguments),f=a[0],a=a[1]+
ob;return[f*Math.cos(a),f*Math.sin(a)]}}function Lh(){return 64}function Mh(){return"circle"}function Mf(c){c=Math.sqrt(c/ja);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Qb(c,a){Sb(c,ta);c.id=a;return c}function Gd(c,a,f,p){var b=c.id;return F(c,"function"===typeof f?function(c,l,w){c.__transition__[b].tween.set(a,p(f.call(c,c.__data__,l,w)))}:(f=p(f),function(c){c.__transition__[b].tween.set(a,f)}))}function Nh(c){null==c&&(c="");return function(){this.textContent=
c}}function uc(c,a,f,p){var b=c.__transition__||(c.__transition__={active:0,count:0}),m=b[f];if(!m){var l=p.time,m=b[f]={tween:new r,time:l,ease:p.ease,delay:p.delay,duration:p.duration};++b.count;v.timer(function(p){function e(p){if(b.active>f)return k();b.active=f;m.event&&m.event.start.call(c,n,a);m.tween.forEach(function(f,p){(p=p.call(c,n,a))&&J.push(p)});v.timer(function(){y.c=h(p||1)?ub:h;return 1},0,l)}function h(p){if(b.active!==f)return k();p/=t;for(var l=s(p),w=J.length;0<w;)J[--w].call(c,
l);if(1<=p)return m.event&&m.event.end.call(c,n,a),k()}function k(){--b.count?delete b[f]:delete c.__transition__;return 1}var n=c.__data__,s=m.ease,r=m.delay,t=m.duration,y=Va,J=[];y.t=r+l;if(r<=p)return e(p-r);y.c=e},0,l)}}function Nf(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Of(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Hd(c){return c.toISOString()}function Id(c,a,f){function p(a){return c(a)}function b(c,f){var p=(c[1]-c[0])/
f,g=v.bisect(vc,p);return g==vc.length?[a.year,fb(c.map(function(c){return c/31536E6}),f)[2]]:g?a[p/vc[g-1]<vc[g]/p?g-1:g]:[Oh,fb(c,f)[2]]}p.invert=function(a){return pb(c.invert(a))};p.domain=function(a){if(!arguments.length)return c.domain().map(pb);c.domain(a);return p};p.nice=function(c,a){function f(q){return!isNaN(q)&&!c.range(q,pb(+q+1),a).length}var q=p.domain(),l=Ab(q);if(l=null==c?b(l,10):"number"===typeof c&&b(l,c))c=l[0],a=l[1];return p.domain(qc(q,1<a?{floor:function(a){for(;f(a=c.floor(a));)a=
pb(a-1);return a},ceil:function(a){for(;f(a=c.ceil(a));)a=pb(+a+1);return a}}:c))};p.ticks=function(c,a){var f=Ab(p.domain()),q=null==c?b(f,10):"number"===typeof c?b(f,c):!c.range&&[{range:c},a];q&&(c=q[0],a=q[1]);return c.range(f[0],pb(+f[1]+1),1>a?1:a)};p.tickFormat=function(){return f};p.copy=function(){return Id(c.copy(),a,f)};return zd(p,c)}function pb(c){return new Date(c)}function Ph(c){return JSON.parse(c.responseText)}function Qh(c){var a=Na.createRange();a.selectNode(Na.body);return a.createContextualFragment(c.responseText)}
var v={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Pf=[].slice,ab=function(c){return Pf.call(c)},Na=document,Ua=Na.documentElement,xa=window;try{ab(Ua.childNodes)[0].nodeType}catch(pi){ab=function(c){for(var a=c.length,f=Array(a);a--;)f[a]=c[a];return f}}try{Na.createElement("div").style.setProperty("opacity",0,"")}catch(qi){var wc=xa.Element.prototype,Rh=wc.setAttribute,Sh=wc.setAttributeNS,Qf=xa.CSSStyleDeclaration.prototype,Th=Qf.setProperty;wc.setAttribute=function(c,
a){Rh.call(this,c,a+"")};wc.setAttributeNS=function(c,a,f){Sh.call(this,c,a,f+"")};Qf.setProperty=function(c,a,f){Th.call(this,c,a+"",f)}}v.ascending=I;v.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};v.min=function(c,a){var f=-1,p=c.length,b,m;if(1===arguments.length){for(;++f<p&&!(null!=(b=c[f])&&b<=b);)b=void 0;for(;++f<p;)null!=(m=c[f])&&b>m&&(b=m)}else{for(;++f<p&&!(null!=(b=a.call(c,c[f],f))&&b<=b);)b=void 0;for(;++f<p;)null!=(m=a.call(c,c[f],f))&&b>m&&(b=m)}return b};v.max=function(c,
a){var f=-1,p=c.length,b,m;if(1===arguments.length){for(;++f<p&&!(null!=(b=c[f])&&b<=b);)b=void 0;for(;++f<p;)null!=(m=c[f])&&m>b&&(b=m)}else{for(;++f<p&&!(null!=(b=a.call(c,c[f],f))&&b<=b);)b=void 0;for(;++f<p;)null!=(m=a.call(c,c[f],f))&&m>b&&(b=m)}return b};v.extent=function(c,a){var f=-1,b=c.length,g,m,l;if(1===arguments.length){for(;++f<b&&!(null!=(g=l=c[f])&&g<=g);)g=l=void 0;for(;++f<b;)null!=(m=c[f])&&(g>m&&(g=m),l<m&&(l=m))}else{for(;++f<b&&!(null!=(g=l=a.call(c,c[f],f))&&g<=g);)g=void 0;
for(;++f<b;)null!=(m=a.call(c,c[f],f))&&(g>m&&(g=m),l<m&&(l=m))}return[g,l]};v.sum=function(c,a){var f=0,b=c.length,g,m=-1;if(1===arguments.length)for(;++m<b;)isNaN(g=+c[m])||(f+=g);else for(;++m<b;)isNaN(g=+a.call(c,c[m],m))||(f+=g);return f};v.mean=function(c,a){var f=0,b=c.length,g,m=-1,l=b;if(1===arguments.length)for(;++m<b;)u(g=c[m])?f+=g:--l;else for(;++m<b;)u(g=a.call(c,c[m],m))?f+=g:--l;return l?f/l:void 0};v.quantile=function(c,a){var f=(c.length-1)*a+1,b=Math.floor(f),g=+c[b-1];return(f-=
b)?g+f*(c[b]-g):g};v.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(u);return c.length?v.quantile(c.sort(I),.5):void 0};var Rf=a(I);v.bisectLeft=Rf.left;v.bisect=v.bisectRight=Rf.right;v.bisector=function(c){return a(1===c.length?function(a,f){return I(c(a),f)}:c)};v.shuffle=function(c){for(var a=c.length,f,b;a;)b=Math.random()*a--|0,f=c[a],c[a]=c[b],c[b]=f;return c};v.permute=function(c,a){for(var f=a.length,b=Array(f);f--;)b[f]=c[a[f]];return b};v.pairs=function(c){for(var a=0,
f=c.length-1,b=c[0],g=Array(0>f?0:f);a<f;)g[a]=[b,b=c[++a]];return g};v.zip=function(){if(!(g=arguments.length))return[];for(var c=-1,a=v.min(arguments,b),f=Array(a);++c<a;)for(var p=-1,g,m=f[c]=Array(g);++p<g;)m[p]=arguments[p][c];return f};v.transpose=function(c){return v.zip.apply(v,c)};v.keys=function(c){var a=[],f;for(f in c)a.push(f);return a};v.values=function(c){var a=[],f;for(f in c)a.push(c[f]);return a};v.entries=function(c){var a=[],f;for(f in c)a.push({key:f,value:c[f]});return a};v.merge=
function(c){var a=c.length,f;f=-1;for(var b=0,g,m;++f<a;)b+=c[f].length;for(g=Array(b);0<=--a;)for(m=c[a],f=m.length;0<=--f;)g[--b]=m[f];return g};var ka=Math.abs;v.range=function(c,a,f){3>arguments.length&&(f=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/f)throw Error("infinite range");var b=[],g;g=ka(f);for(var m=1;g*m%1;)m*=10;g=m;var m=-1,l;c*=g;a*=g;f*=g;if(0>f)for(;(l=c+f*++m)>a;)b.push(l/g);else for(;(l=c+f*++m)<a;)b.push(l/g);return b};v.map=function(c){var a=new r;if(c instanceof r)c.forEach(function(c,
f){a.set(c,f)});else for(var f in c)a.set(f,c[f]);return a};k(r,{has:n,get:function(c){return this[hb+c]},set:function(c,a){return this[hb+c]=a},remove:function(c){c=hb+c;return c in this&&delete this[c]},keys:e,values:function(){var c=[];this.forEach(function(a,f){c.push(f)});return c},entries:function(){var c=[];this.forEach(function(a,f){c.push({key:a,value:f})});return c},size:h,empty:t,forEach:function(c){for(var a in this)a.charCodeAt(0)===Rb&&c.call(this,a.substring(1),this[a])}});var hb="\x00",
Rb=hb.charCodeAt(0);v.nest=function(){function c(a,q,g){if(g>=b.length)return l?l.call(f,q):m?q.sort(m):q;for(var e=-1,h=q.length,k=b[g++],n,s,t=new r,y;++e<h;)(y=t.get(n=k(s=q[e])))?y.push(s):t.set(n,[s]);a?(s=a(),q=function(f,b){s.set(f,c(a,b,g))}):(s={},q=function(f,b){s[f]=c(a,b,g)});t.forEach(q);return s}function a(c,f){if(f>=b.length)return c;var m=[],l=g[f++];c.forEach(function(c,b){m.push({key:c,values:a(b,f)})});return l?m.sort(function(c,a){return l(c.key,a.key)}):m}var f={},b=[],g=[],m,
l;f.map=function(a,f){return c(f,a,0)};f.entries=function(f){return a(c(v.map,f,0),0)};f.key=function(c){b.push(c);return f};f.sortKeys=function(c){g[b.length-1]=c;return f};f.sortValues=function(c){m=c;return f};f.rollup=function(c){l=c;return f};return f};v.set=function(c){var a=new s;if(c)for(var f=0,b=c.length;f<b;++f)a.add(c[f]);return a};k(s,{has:n,add:function(c){this[hb+c]=!0;return c},remove:function(c){c=hb+c;return c in this&&delete this[c]},values:e,size:h,empty:t,forEach:function(c){for(var a in this)a.charCodeAt(0)===
Rb&&c.call(this,a.substring(1))}});v.behavior={};v.rebind=function(c,a){for(var f=1,b=arguments.length,g;++f<b;)c[g=arguments[f]]=H(c,a,a[g]);return c};var Qd="webkit ms moz Moz o O".split(" ");v.dispatch=function(){for(var c=new D,a=-1,f=arguments.length;++a<f;)c[arguments[a]]=B(c);return c};D.prototype.on=function(c,a){var f=c.indexOf("."),b="";0<=f&&(b=c.substring(f+1),c=c.substring(0,f));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,
null);return this}};v.event=null;v.requote=function(c){return c.replace(Uh,"\\$&")};var Uh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sb={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var f in a)c[f]=a[f]},Mc=function(c,a){return a.querySelector(c)},Nc=function(c,a){return a.querySelectorAll(c)},Vh=Ua.matches||Ua[A(Ua,"matchesSelector")],Rd=function(c,a){return Vh.call(c,a)};"function"===typeof Sizzle&&(Mc=function(c,a){return Sizzle(c,a)[0]||null},Nc=Sizzle,Rd=Sizzle.matchesSelector);v.selection=
function(){return Sf};var na=v.selection.prototype=[];na.select=function(c){var a=[],f,b,g,m;c=P(c);for(var l=-1,w=this.length;++l<w;){a.push(f=[]);f.parentNode=(g=this[l]).parentNode;for(var e=-1,h=g.length;++e<h;)(m=g[e])?(f.push(b=c.call(m,m.__data__,e,l)),b&&"__data__"in m&&(b.__data__=m.__data__)):f.push(null)}return O(a)};na.selectAll=function(c){var a=[],f,b;c=K(c);for(var g=-1,m=this.length;++g<m;)for(var l=this[g],e=-1,h=l.length;++e<h;)if(b=l[e])a.push(f=ab(c.call(b,b.__data__,e,g))),f.parentNode=
b;return O(a)};var Jd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};v.ns={prefix:Jd,qualify:function(c){var a=c.indexOf(":"),f=c;0<=a&&(f=c.substring(0,a),c=c.substring(a+1));return Jd.hasOwnProperty(f)?{space:Jd[f],local:c}:c}};na.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node();c=v.ns.qualify(c);return c.local?f.getAttributeNS(c.space,
c.local):f.getAttribute(c)}for(a in c)this.each(Q(a,c[a]));return this}return this.each(Q(c,a))};na.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,g=-1;if(a=f.classList)for(;++g<b;){if(!a.contains(c[g]))return!1}else for(a=f.getAttribute("class");++g<b;)if(!R(c[g]).test(a))return!1;return!0}for(a in c)this.each(x(a,c[a]));return this}return this.each(x(c,a))};na.style=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==
typeof c){2>b&&(a="");for(f in c)this.each(L(f,c[f],a));return this}if(2>b)return xa.getComputedStyle(this.node(),null).getPropertyValue(c);f=""}return this.each(L(c,a,f))};na.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(y(a,c[a]));return this}return this.each(y(c,a))};na.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=
""}:function(){this.textContent=c}):this.node().textContent};na.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};na.append=function(c){c=V(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};na.insert=function(c,a){c=V(c);a=P(a);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),a.apply(this,arguments)||null)})};na.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};na.data=function(c,a){function f(c,f){var b,p=c.length,g=f.length,m=Math.min(p,g),l=Array(g),n=Array(g),s=Array(p),t,y;if(a){var m=new r,J=new r,$=[],x;for(b=-1;++b<p;)x=a.call(t=c[b],t.__data__,b),m.has(x)?s[b]=t:m.set(x,t),$.push(x);for(b=-1;++b<g;)x=a.call(f,y=f[b],b),(t=m.get(x))?(l[b]=t,t.__data__=y):J.has(x)||(n[b]={__data__:y}),J.set(x,y),m.remove(x);
for(b=-1;++b<p;)m.has($[b])&&(s[b]=c[b])}else{for(b=-1;++b<m;)t=c[b],y=f[b],t?(t.__data__=y,l[b]=t):n[b]={__data__:y};for(;b<g;++b)n[b]={__data__:f[b]};for(;b<p;++b)s[b]=c[b]}n.update=l;n.parentNode=l.parentNode=s.parentNode=c.parentNode;e.push(n);h.push(l);k.push(s)}var b=-1,g=this.length,m,l;if(!arguments.length){for(c=Array(g=(m=this[0]).length);++b<g;)if(l=m[b])c[b]=l.__data__;return c}var e=aa([]),h=O([]),k=O([]);if("function"===typeof c)for(;++b<g;)f(m=this[b],c.call(m,m.parentNode.__data__,
b));else for(;++b<g;)f(m=this[b],c);h.enter=function(){return e};h.exit=function(){return k};return h};na.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};na.filter=function(c){var a=[],f,b,g;"function"!==typeof c&&(c=G(c));for(var m=0,l=this.length;m<l;m++){a.push(f=[]);f.parentNode=(b=this[m]).parentNode;for(var e=0,h=b.length;e<h;e++)(g=b[e])&&c.call(g,g.__data__,e,m)&&f.push(g)}return O(a)};na.order=function(){for(var c=-1,a=this.length;++c<a;)for(var f=
this[c],b=f.length-1,g=f[b],m;0<=--b;)if(m=f[b])g&&g!==m.nextSibling&&g.parentNode.insertBefore(m,g),g=m;return this};na.sort=function(c){c=U.apply(this,arguments);for(var a=-1,f=this.length;++a<f;)this[a].sort(c);return this.order()};na.each=function(c){return F(this,function(a,f,b){c.call(a,a.__data__,f,b)})};na.call=function(c){var a=ab(arguments);c.apply(a[0]=this,a);return this};na.empty=function(){return!this.node()};na.node=function(){for(var c=0,a=this.length;c<a;c++)for(var f=this[c],b=0,
g=f.length;b<g;b++){var m=f[b];if(m)return m}return null};na.size=function(){var c=0;this.each(function(){++c});return c};var Ra=[];v.selection.enter=aa;v.selection.enter.prototype=Ra;Ra.append=na.append;Ra.empty=na.empty;Ra.node=na.node;Ra.call=na.call;Ra.size=na.size;Ra.select=function(c){for(var a=[],f,b,g,m,l,e=-1,h=this.length;++e<h;){g=(m=this[e]).update;a.push(f=[]);f.parentNode=m.parentNode;for(var k=-1,n=m.length;++k<n;)(l=m[k])?(f.push(g[k]=b=c.call(m.parentNode,l.__data__,k,e)),b.__data__=
l.__data__):f.push(null)}return O(a)};Ra.insert=function(c,a){2>arguments.length&&(a=W(this));return na.insert.call(this,c,a)};na.transition=function(){for(var c=qb||++Tf,a=[],f,b,g=xc||{time:Date.now(),ease:Zg,delay:0,duration:250},m=-1,l=this.length;++m<l;){a.push(f=[]);for(var e=this[m],h=-1,k=e.length;++h<k;)(b=e[h])&&uc(b,h,c,g),f.push(b)}return Qb(a,c)};na.interrupt=function(){return this.each(l)};v.select=function(c){c=["string"===typeof c?Mc(c,Na):c];c.parentNode=Ua;return O([c])};v.selectAll=
function(c){c=ab("string"===typeof c?Nc(c,Na):c);c.parentNode=Ua;return O([c])};var Sf=v.select(Ua);na.on=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==typeof c){2>b&&(a=!1);for(f in c)this.each(J(f,c[f],a));return this}if(2>b)return(b=this.node()["__on"+c])&&b._;f=!1}return this.each(J(c,a,f))};var Oc=v.map({mouseenter:"mouseover",mouseleave:"mouseout"});Oc.forEach(function(c){"on"+c in Na&&Oc.remove(c)});var Db="onselectstart"in Na?null:A(Ua.style,"userSelect"),jg=0;v.mouse=function(c){return X(c,
S())};var Pc=/WebKit/.test(xa.navigator.userAgent)?-1:0;v.touches=function(c,a){2>arguments.length&&(a=S().touches);return a?ab(a).map(function(a){var b=X(c,a);b.identifier=a.identifier;return b}):[]};v.behavior.drag=function(){function c(){this.on("mousedown.drag",g).on("touchstart.drag",m)}function a(c,q,g,m,l){return function(){var a=v.event.target,e=this.parentNode,h=f.of(this,arguments),k=0,n=c(),s=".drag"+(null==n?"":"-"+n),t,r=v.select(g()).on(m+s,function(){var c=q(e,n),a,f;c&&(a=c[0]-J[0],
f=c[1]-J[1],k=k|a|f,J=c,h({type:"drag",x:c[0]+t[0],y:c[1]+t[1],dx:a,dy:f}))}).on(l+s,function(){q(e,n)&&(r.on(m+s,null).on(l+s,null),y(k&&v.event.target===a),h({type:"dragend"}))}),y=ga(),J=q(e,n);b?(t=b.apply(this,arguments),t=[t.x-J[0],t.y-J[1]]):t=[0,0];h({type:"dragstart"})}}var f=E(c,"drag","dragstart","dragend"),b=null,g=a(z,v.mouse,ba,"mousemove","mouseup"),m=a(fa,v.touch,ha,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return b;b=a;return c};return v.rebind(c,f,"on")};
var ja=Math.PI,Ea=2*ja,va=ja/2,ia=ja/180,qa=180/ja,yc=Math.SQRT2;v.interpolateZoom=function(c,a){function f(c){var a=c*y;if(r){c=ma(t);var f,q=yc*a+t;f=((q=Math.exp(2*q))-1)/(q+1);f*=c;var l=t,q=((l=Math.exp(l))-1/l)/2;f=m/(2*n)*(f-q);return[b+f*e,g+f*h,m*c/ma(yc*a+t)]}return[b+c*e,g+c*h,m*Math.exp(yc*a)]}var b=c[0],g=c[1],m=c[2],l=a[2],e=a[0]-b,h=a[1]-g,k=e*e+h*h,n=Math.sqrt(k),s=(l*l-m*m+4*k)/(4*m*n),k=(l*l-m*m-4*k)/(4*l*n),t=Math.log(Math.sqrt(s*s+1)-s),r=Math.log(Math.sqrt(k*k+1)-k)-t,y=(r||Math.log(l/
m))/yc;f.duration=1E3*y;return f};v.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",h).on(Wh+".zoom",n).on("mousemove.zoom",s).on("dblclick.zoom",t).on("touchstart.zoom",k)}function a(c){return[(c[0]-r.x)/r.k,(c[1]-r.y)/r.k]}function f(c){r.k=Math.max(F[0],Math.min(F[1],c))}function b(c,a){a=[a[0]*r.k+r.x,a[1]*r.k+r.y];r.x+=c[0]-a[0];r.y+=c[1]-a[1]}function g(){V&&V.domain(u.range().map(function(c){return(c-r.x)/r.k}).map(u.invert));U&&U.domain(B.range().map(function(c){return(c-r.y)/
r.k}).map(B.invert))}function m(c){c({type:"zoomstart"})}function e(c){g();c({type:"zoom",scale:r.k,translate:[r.x,r.y]})}function w(c){c({type:"zoomend"})}function h(){var c=this,f=v.event.target,g=L.of(c,arguments),k=0,n=v.select(xa).on("mousemove.zoom",function(){k=1;b(v.mouse(c),r);e(g)}).on("mouseup.zoom",function(){n.on("mousemove.zoom",xa===c?s:null).on("mouseup.zoom",null);t(k&&v.event.target===f);w(g)}),r=a(v.mouse(c)),t=ga();l.call(c);m(g)}function k(){function c(){var f=v.touches(t);F=
r.k;f.forEach(function(c){c.identifier in J&&(J[c.identifier]=a(c))});return f}function g(){var a=v.event.target;v.select(a).on(E,n).on(u,s);V.push(a);for(var a=v.event.changedTouches,q=0,m=a.length;q<m;++q)J[a[q].identifier]=null;m=c();q=Date.now();1===m.length?(500>q-G&&(a=m[0],m=J[a.identifier],f(2*r.k),b(a,m),M(),e(y)),G=q):1<m.length&&(a=m[0],m=m[1],q=a[0]-m[0],a=a[1]-m[1],x=q*q+a*a)}function n(){for(var c=v.touches(t),a,q,g,m,l=0,w=c.length;l<w;++l,m=null)if(g=c[l],m=J[g.identifier]){if(q)break;
a=g;q=m}if(m){var h=(h=g[0]-a[0])*h+(h=g[1]-a[1])*h,c=x&&Math.sqrt(h/x);a=[(a[0]+g[0])/2,(a[1]+g[1])/2];q=[(q[0]+m[0])/2,(q[1]+m[1])/2];f(c*F)}G=null;b(a,q);e(y)}function s(){if(v.event.touches.length){for(var a=v.event.changedTouches,f=0,b=a.length;f<b;++f)delete J[a[f].identifier];for(var q in J)return void c()}v.selectAll(V).on(C,null);B.on("mousedown.zoom",h).on("touchstart.zoom",k);U();w(y)}var t=this,y=L.of(t,arguments),J={},x=0,F,C=".zoom-"+v.event.changedTouches[0].identifier,E="touchmove"+
C,u="touchend"+C,V=[],B=v.select(t).on("mousedown.zoom",null).on("touchstart.zoom",g),U=ga();l.call(t);g();m(y)}function n(){var c=L.of(this,arguments);C?clearTimeout(C):(l.call(this),m(c));C=setTimeout(function(){C=null;w(c)},50);M();var g=J||v.mouse(this);y||(y=a(g));f(Math.pow(2,.002*zc())*r.k);b(g,y);e(c)}function s(){y=null}function t(){var c=L.of(this,arguments),g=v.mouse(this),l=a(g),h=Math.log(r.k)/Math.LN2;m(c);f(Math.pow(2,v.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1));b(g,l);e(c);w(c)}
var r={x:0,y:0,k:1},y,J,x=[960,500],F=Uf,C,G,L=E(c,"zoomstart","zoom","zoomend"),u,V,B,U;c.event=function(c){c.each(function(){var c=L.of(this,arguments),a=r;qb?v.select(this).transition().each("start.zoom",function(){r=this.__chart__||{x:0,y:0,k:1};m(c)}).tween("zoom:zoom",function(){var f=x[0],b=f/2,q=x[1]/2,p=v.interpolateZoom([(b-r.x)/r.k,(q-r.y)/r.k,f/r.k],[(b-a.x)/a.k,(q-a.y)/a.k,f/a.k]);return function(a){a=p(a);var g=f/a[2];this.__chart__=r={x:b-a[0]*g,y:q-a[1]*g,k:g};e(c)}}).each("end.zoom",
function(){w(c)}):(this.__chart__=r,m(c),e(c),w(c))})};c.translate=function(a){if(!arguments.length)return[r.x,r.y];r={x:+a[0],y:+a[1],k:r.k};g();return c};c.scale=function(a){if(!arguments.length)return r.k;r={x:r.x,y:r.y,k:+a};g();return c};c.scaleExtent=function(a){if(!arguments.length)return F;F=null==a?Uf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return J;J=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return x;x=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return V;
V=a;u=a.copy();r={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return U;U=a;B=a.copy();r={x:0,y:0,k:1};return c};return v.rebind(c,L,"on")};var Uf=[0,Infinity],zc,Wh="onwheel"in Na?(zc=function(){return-v.event.deltaY*(v.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Na?(zc=function(){return v.event.wheelDelta},"mousewheel"):(zc=function(){return-v.event.detail},"MozMousePixelScroll");v.color=Ba;Ba.prototype.toString=function(){return this.rgb()+""};v.hsl=Ca;var Kd=Ca.prototype=
new Ba;Kd.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ca(this.h,this.s,this.l/c)};Kd.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ca(this.h,this.s,c*this.l)};Kd.rgb=function(){return Qc(this.h,this.s,this.l)};v.hcl=Ja;var Ld=Ja.prototype=new Ba;Ld.brighter=function(c){return new Ja(this.h,this.c,Math.min(100,this.l+Ac*(arguments.length?c:1)))};Ld.darker=function(c){return new Ja(this.h,this.c,Math.max(0,this.l-Ac*(arguments.length?c:1)))};Ld.rgb=function(){return Rc(this.h,
this.c,this.l).rgb()};v.lab=Ka;var Ac=18,Yd=.95047,Zd=1,$d=1.08883,Md=Ka.prototype=new Ba;Md.brighter=function(c){return new Ka(Math.min(100,this.l+Ac*(arguments.length?c:1)),this.a,this.b)};Md.darker=function(c){return new Ka(Math.max(0,this.l-Ac*(arguments.length?c:1)),this.a,this.b)};Md.rgb=function(){return Xd(this.l,this.a,this.b)};v.rgb=ya;var Bc=ya.prototype=new Ba;Bc.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);var a=this.r,f=this.g,b=this.b;if(!a&&!f&&!b)return new ya(30,30,30);
a&&30>a&&(a=30);f&&30>f&&(f=30);b&&30>b&&(b=30);return new ya(Math.min(255,a/c),Math.min(255,f/c),Math.min(255,b/c))};Bc.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new ya(c*this.r,c*this.g,c*this.b)};Bc.hsl=function(){return Ud(this.r,this.g,this.b)};Bc.toString=function(){return"#"+rb(this.r)+rb(this.g)+rb(this.b)};var Ub=v.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,
blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ub.forEach(function(c,a){Ub.set(c,
new ya(a>>16,a>>8&255,a&255))});v.functor=pa;v.xhr=Xc(ua);v.dsv=function(c,a){function f(c,f,m){3>arguments.length&&(m=f,f=null);var l=Vb(c,a,null==f?b:g(f),m);l.row=function(c){return arguments.length?l.response(null==(f=c)?b:g(c)):f};return l}function b(c){return f.parse(c.responseText)}function g(c){return function(a){return f.parse(a.responseText,c)}}function m(a){return a.map(l).join(c)}function l(c){return e.test(c)?'"'+c.replace(/\"/g,'""')+'"':c}var e=new RegExp('["'+c+"\n]"),h=c.charCodeAt(0);
f.parse=function(c,a){var b;return f.parseRows(c,function(c,f){if(b)return b(c,f-1);var q=new Function("d","return {"+c.map(function(c,a){return JSON.stringify(c)+": d["+a+"]"}).join(",")+"}");b=a?function(c,f){return a(q(c),f)}:q})};f.parseRows=function(c,a){function f(){if(m>=g)return q;if(w)return w=!1,b;var a=m;if(34===c.charCodeAt(a)){for(var p=a;p++<g;)if(34===c.charCodeAt(p)){if(34!==c.charCodeAt(p+1))break;++p}m=p+2;var l=c.charCodeAt(p+1);13===l?(w=!0,10===c.charCodeAt(p+2)&&++m):10===l&&
(w=!0);return c.substring(a+1,p).replace(/""/g,'"')}for(;m<g;){l=c.charCodeAt(m++);p=1;if(10===l)w=!0;else if(13===l)w=!0,10===c.charCodeAt(m)&&(++m,++p);else if(l!==h)continue;return c.substring(a,m-p)}return c.substring(a)}for(var b={},q={},p=[],g=c.length,m=0,l=0,e,w;(e=f())!==q;){for(var k=[];e!==b&&e!==q;)k.push(e),e=f();a&&!(k=a(k,l++))||p.push(k)}return p};f.format=function(a){if(Array.isArray(a[0]))return f.formatRows(a);var b=new s,q=[];a.forEach(function(c){for(var a in c)b.has(a)||q.push(b.add(a))});
return[q.map(l).join(c)].concat(a.map(function(a){return q.map(function(c){return l(a[c])}).join(c)})).join("\n")};f.formatRows=function(c){return c.map(m).join("\n")};return f};v.csv=v.dsv(",","text/csv");v.tsv=v.dsv("\t","text/tab-separated-values");v.touch=function(c,a,f){3>arguments.length&&(f=a,a=S().changedTouches);if(a)for(var b=0,g=a.length,m;b<g;++b)if((m=a[b]).identifier===f)return X(c,m)};var Yb,Zb,Xb,Wb,Va,ce=xa[A(xa,"requestAnimationFrame")]||function(c){setTimeout(c,17)};v.timer=function(c,
a,f){var b=arguments.length;2>b&&(a=0);3>b&&(f=Date.now());b={c:c,t:f+a,f:!1,n:null};Zb?Zb.n=b:Yb=b;Zb=b;Xb||(Wb=clearTimeout(Wb),Xb=1,ce(Yc))};v.timer.flush=function(){ae();be()};v.round=function(c,a){return a?Math.round(c*(a=Math.pow(10,a)))/a:Math.round(c)};var Xh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(c,a){var f=Math.pow(10,3*ka(8-a));return{scale:8<a?function(c){return c/f}:function(c){return c*f},symbol:c}});v.formatPrefix=function(c,a){var f=0;c&&(0>c&&(c*=-1),a&&(c=
v.round(c,Zc(c,a))),f=1+Math.floor(1E-12+Math.log(c)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3))));return Xh[8+f/3]};var de=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mg=v.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,a){return c.toPrecision(a)},e:function(c,a){return c.toExponential(a)},
f:function(c,a){return c.toFixed(a)},r:function(c,a){return(c=v.round(c,Zc(c,a))).toFixed(Math.max(0,Math.min(20,Zc(c*(1+1E-15),a))))}}),Z=v.time={},wa=Date;Wa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){$a.setUTCDate.apply(this._,arguments)},setDay:function(){$a.setUTCDay.apply(this._,arguments)},setFullYear:function(){$a.setUTCFullYear.apply(this._,arguments)},setHours:function(){$a.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){$a.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){$a.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){$a.setUTCMonth.apply(this._,arguments)},setSeconds:function(){$a.setUTCSeconds.apply(this._,arguments)},setTime:function(){$a.setTime.apply(this._,arguments)}};var $a=Date.prototype;Z.year=ib(function(c){c=Z.day(c);c.setMonth(0,1);return c},function(c,a){c.setFullYear(c.getFullYear()+a)},function(c){return c.getFullYear()});Z.years=Z.year.range;Z.years.utc=Z.year.utc.range;Z.day=ib(function(c){var a=new wa(2E3,0);a.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());
return a},function(c,a){c.setDate(c.getDate()+a)},function(c){return c.getDate()-1});Z.days=Z.day.range;Z.days.utc=Z.day.utc.range;Z.dayOfYear=function(c){var a=Z.year(c);return Math.floor((c-a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(c,a){a=7-a;var f=Z[c]=ib(function(c){(c=Z.day(c)).setDate(c.getDate()-(c.getDay()+a)%7);return c},function(c,a){c.setDate(c.getDate()+7*Math.floor(a))},function(c){var f=
Z.year(c).getDay();return Math.floor((Z.dayOfYear(c)+(f+a)%7)/7)-(f!==a)});Z[c+"s"]=f.range;Z[c+"s"].utc=f.utc.range;Z[c+"OfYear"]=function(c){var f=Z.year(c).getDay();return Math.floor((Z.dayOfYear(c)+(f+a)%7)/7)}});Z.week=Z.sunday;Z.weeks=Z.sunday.range;Z.weeks.utc=Z.sunday.utc.range;Z.weekOfYear=Z.sundayOfYear;var ee={"-":"",_:" ",0:"0"},sa=/^\s*\d+/,he=/^%/;v.locale=function(c){return{numberFormat:lg(c),timeFormat:og(c)}};var Vf=v.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],
dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});v.format=Vf.numberFormat;v.geo={};$c.prototype={s:0,t:0,add:function(c){ie(c,this.t,Cc);ie(Cc.s,this.s,this);this.s?
this.t+=Cc.t:this.s=Cc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cc=new $c;v.geo.stream=function(c,a){if(c&&Wf.hasOwnProperty(c.type))Wf[c.type](c,a);else cc(c,a)};var Wf={Feature:function(c,a){cc(c.geometry,a)},FeatureCollection:function(c,a){for(var f=c.features,b=-1,g=f.length;++b<g;)cc(f[b].geometry,a)}},je={Sphere:function(c,a){a.sphere()},Point:function(c,a){c=c.coordinates;a.point(c[0],c[1],c[2])},MultiPoint:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<
g;)c=f[b],a.point(c[0],c[1],c[2])},LineString:function(c,a){ad(c.coordinates,a,0)},MultiLineString:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<g;)ad(f[b],a,0)},Polygon:function(c,a){ke(c.coordinates,a)},MultiPolygon:function(c,a){for(var f=c.coordinates,b=-1,g=f.length;++b<g;)ke(f[b],a)},GeometryCollection:function(c,a){for(var f=c.geometries,b=-1,g=f.length;++b<g;)cc(f[b],a)}};v.geo.area=function(c){Bb=0;v.geo.stream(c,Da);return Bb};var Bb,jb=new $c,Da={sphere:function(){Bb+=4*ja},
point:z,lineStart:z,lineEnd:z,polygonStart:function(){jb.reset();Da.lineStart=Dg},polygonEnd:function(){var c=2*jb;Bb+=0>c?4*ja+c:c;Da.lineStart=Da.lineEnd=Da.point=z}};v.geo.bounds=function(){function c(c,a){E.push(G=[n=c,r=c]);a<s&&(s=a);a>t&&(t=a)}function a(f,b){var g=kb([f*ia,b*ia]);if(F){var q=sb(F,g),q=sb([q[1],-q[0],0],q);fc(q);var q=gc(q),p=f-y,m=0<p?1:-1,l=q[0]*qa*m,p=180<ka(p);p^(m*y<l&&l<m*f)?(q=q[1]*qa,q>t&&(t=q)):(l=(l+360)%360-180,p^(m*y<l&&l<m*f))?(q=-q[1]*qa,q<s&&(s=q)):(b<s&&(s=
b),b>t&&(t=b));p?f<y?e(n,f)>e(n,r)&&(r=f):e(f,r)>e(n,r)&&(n=f):r>=n?(f<n&&(n=f),f>r&&(r=f)):f>y?e(n,f)>e(n,r)&&(r=f):e(f,r)>e(n,r)&&(n=f)}else c(f,b);F=g;y=f}function f(){L.point=a}function b(){G[0]=n;G[1]=r;L.point=c;F=null}function g(c,f){if(F){var b=c-y;C+=180<ka(b)?b+(0<b?360:-360):b}else J=c,x=f;Da.point(c,f);a(c,f)}function m(){Da.lineStart()}function l(){g(J,x);Da.lineEnd();1E-6<ka(C)&&(n=-(r=180));G[0]=n;G[1]=r;F=null}function e(c,a){return 0>(a-=c)?a+360:a}function h(c,a){return c[0]-a[0]}
function k(c,a){return a[0]<=a[1]?a[0]<=c&&c<=a[1]:c<a[0]||a[1]<c}var n,s,r,t,y,J,x,F,C,E,G,L={point:c,lineStart:f,lineEnd:b,polygonStart:function(){L.point=g;L.lineStart=m;L.lineEnd=l;C=0;Da.polygonStart()},polygonEnd:function(){Da.polygonEnd();L.point=c;L.lineStart=f;L.lineEnd=b;0>jb?(n=-(r=180),s=-(t=90)):1E-6<C?t=90:-1E-6>C&&(s=-90);G[0]=n;G[1]=r}};return function(c){t=r=-(n=s=Infinity);E=[];v.geo.stream(c,L);if(c=E.length){E.sort(h);for(var a=1,f=E[0],b,q=[f];a<c;++a)b=E[a],k(b[0],f)||k(b[1],
f)?(e(f[0],b[1])>e(f[0],f[1])&&(f[1]=b[1]),e(b[0],f[1])>e(f[0],f[1])&&(f[0]=b[0])):q.push(f=b);var g=-Infinity,p;c=q.length-1;a=0;for(f=q[c];a<=c;f=b,++a)b=q[a],(p=e(f[1],b[0]))>g&&(g=p,n=b[0],r=f[1])}E=G=null;return Infinity===n||Infinity===s?[[NaN,NaN],[NaN,NaN]]:[[n,s],[r,t]]}}();v.geo.centroid=function(c){Fb=tb=Xa=Ya=Oa=Ga=Ha=Aa=bb=cb=Pa=0;v.geo.stream(c,La);c=bb;var a=cb,f=Pa,b=c*c+a*a+f*f;return 1E-12>b&&(c=Ga,a=Ha,f=Aa,1E-6>tb&&(c=Xa,a=Ya,f=Oa),b=c*c+a*a+f*f,1E-12>b)?[NaN,NaN]:[Math.atan2(a,
c)*qa,ea(f/Math.sqrt(b))*qa]};var Fb,tb,Xa,Ya,Oa,Ga,Ha,Aa,bb,cb,Pa,La={sphere:z,point:cd,lineStart:le,lineEnd:me,polygonStart:function(){La.lineStart=Eg},polygonEnd:function(){La.lineStart=le}},Ce=pe(ub,function(c){var a=NaN,f=NaN,b=NaN,g;return{lineStart:function(){c.lineStart();g=1},point:function(m,l){var e=0<m?ja:-ja,h=ka(m-a);if(1E-6>ka(h-ja))c.point(a,f=0<(f+l)/2?va:-va),c.point(b,f),c.lineEnd(),c.lineStart(),c.point(e,f),c.point(m,f),g=0;else if(b!==e&&h>=ja){1E-6>ka(a-b)&&(a-=1E-6*b);1E-6>
ka(m-e)&&(m-=1E-6*e);var h=a,k=f,n=m,r,s,t=Math.sin(h-n);f=1E-6<ka(t)?Math.atan((Math.sin(k)*(s=Math.cos(l))*Math.sin(n)-Math.sin(l)*(r=Math.cos(k))*Math.sin(h))/(r*s*t)):(k+l)/2;c.point(b,f);c.lineEnd();c.lineStart();c.point(e,f);g=0}c.point(a=m,f=l);b=e},lineEnd:function(){c.lineEnd();a=f=NaN},clean:function(){return 2-g}}},function(c,a,f,b){null==c?(f*=va,b.point(-ja,f),b.point(0,f),b.point(ja,f),b.point(ja,0),b.point(ja,-f),b.point(0,-f),b.point(-ja,-f),b.point(-ja,0),b.point(-ja,f)):1E-6<ka(c[0]-
a[0])?(c=c[0]<a[0]?ja:-ja,f=f*c/2,b.point(-c,f),b.point(0,f),b.point(c,f)):b.point(a[0],a[1])},[-ja,-ja/2]);v.geo.clipExtent=function(){var c,a,f,b,g,m,l={stream:function(c){g&&(g.valid=!1);g=m(c);g.valid=!0;return g},extent:function(e){if(!arguments.length)return[[c,a],[f,b]];m=se(c=+e[0][0],a=+e[0][1],f=+e[1][0],b=+e[1][1]);g&&(g.valid=!1,g=null);return l}};return l.extent([[0,0],[960,500]])};(v.geo.conicEqualArea=function(){return ed(ue)}).raw=ue;v.geo.albers=function(){return v.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};v.geo.albersUsa=function(){function c(c){var a=c[0];c=c[1];g=null;(l(a,c),g)||(e(a,c),g)||h(a,c);return g}var a=v.geo.albers(),f=v.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),b=v.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,m={point:function(c,a){g=[c,a]}},l,e,h;c.invert=function(c){var g=a.scale(),m=a.translate(),l=(c[0]-m[0])/g,g=(c[1]-m[1])/g;return(.12<=g&&.234>g&&-.425<=l&&-.214>
l?f:.166<=g&&.234>g&&-.214<=l&&-.115>l?b:a).invert(c)};c.stream=function(c){var g=a.stream(c),m=f.stream(c),l=b.stream(c);return{point:function(c,a){g.point(c,a);m.point(c,a);l.point(c,a)},sphere:function(){g.sphere();m.sphere();l.sphere()},lineStart:function(){g.lineStart();m.lineStart();l.lineStart()},lineEnd:function(){g.lineEnd();m.lineEnd();l.lineEnd()},polygonStart:function(){g.polygonStart();m.polygonStart();l.polygonStart()},polygonEnd:function(){g.polygonEnd();m.polygonEnd();l.polygonEnd()}}};
c.precision=function(g){if(!arguments.length)return a.precision();a.precision(g);f.precision(g);b.precision(g);return c};c.scale=function(g){if(!arguments.length)return a.scale();a.scale(g);f.scale(.35*g);b.scale(g);return c.translate(a.translate())};c.translate=function(g){if(!arguments.length)return a.translate();var k=a.scale(),n=+g[0],r=+g[1];l=a.translate(g).clipExtent([[n-.455*k,r-.238*k],[n+.455*k,r+.238*k]]).stream(m).point;e=f.translate([n-.307*k,r+.201*k]).clipExtent([[n-.425*k+1E-6,r+.12*
k+1E-6],[n-.214*k-1E-6,r+.234*k-1E-6]]).stream(m).point;h=b.translate([n-.205*k,r+.212*k]).clipExtent([[n-.214*k+1E-6,r+.166*k+1E-6],[n-.115*k-1E-6,r+.234*k-1E-6]]).stream(m).point;return c};return c.scale(1070)};var Dc,jc,db={point:z,lineStart:z,lineEnd:z,polygonStart:function(){jc=0;db.lineStart=Ig},polygonEnd:function(){db.lineStart=db.lineEnd=db.point=z;Dc+=ka(jc/2)}},Ec,Fc,Gc,Hc,Yh={point:function(c,a){c<Ec&&(Ec=c);c>Gc&&(Gc=c);a<Fc&&(Fc=a);a>Hc&&(Hc=a)},lineStart:z,lineEnd:z,polygonStart:z,
polygonEnd:z},Ma={point:lb,lineStart:we,lineEnd:xe,polygonStart:function(){Ma.lineStart=Kg},polygonEnd:function(){Ma.point=lb;Ma.lineStart=we;Ma.lineEnd=xe}};v.geo.path=function(){function c(c){c&&("function"===typeof f&&l.pointRadius(+f.apply(this,arguments)),e&&e.valid||(e=m(l)),v.geo.stream(c,e));return l.result()}function a(){e=null;return c}var f=4.5,b,g,m,l,e;c.area=function(c){Dc=0;v.geo.stream(c,m(db));return Dc};c.centroid=function(c){Xa=Ya=Oa=Ga=Ha=Aa=bb=cb=Pa=0;v.geo.stream(c,m(Ma));return Pa?
[bb/Pa,cb/Pa]:Aa?[Ga/Aa,Ha/Aa]:Oa?[Xa/Oa,Ya/Oa]:[NaN,NaN]};c.bounds=function(c){Gc=Hc=-(Ec=Fc=Infinity);v.geo.stream(c,m(Yh));return[[Ec,Fc],[Gc,Hc]]};c.projection=function(c){if(!arguments.length)return b;m=(b=c)?c.stream||Mg(c):ua;return a()};c.context=function(c){if(!arguments.length)return g;l=null==(g=c)?new Jg:new Lg(c);"function"!==typeof f&&l.pointRadius(f);return a()};c.pointRadius=function(a){if(!arguments.length)return f;f="function"===typeof a?a:(l.pointRadius(+a),+a);return c};return c.projection(v.geo.albersUsa()).context(null)};
v.geo.transform=function(c){return{stream:function(a){a=new Be(a);for(var f in c)a[f]=c[f];return a}}};Be.prototype={point:function(c,a){this.stream.point(c,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};v.geo.projection=eb;v.geo.projectionMutator=fd;(v.geo.equirectangular=function(){return eb(Gb)}).raw=Gb.invert=
Gb;v.geo.rotation=function(c){function a(f){f=c(f[0]*ia,f[1]*ia);return f[0]*=qa,f[1]*=qa,f}c=gd(c[0]%360*ia,c[1]*ia,2<c.length?c[2]*ia:0);a.invert=function(a){a=c.invert(a[0]*ia,a[1]*ia);return a[0]*=qa,a[1]*=qa,a};return a};De.invert=Gb;v.geo.circle=function(){function c(){var c="function"===typeof a?a.apply(this,arguments):a,f=gd(-c[0]*ia,-c[1]*ia,0).invert,b=[];g(null,null,1,{point:function(c,a){b.push(c=f(c,a));c[0]*=qa;c[1]*=qa}});return{type:"Polygon",coordinates:[b]}}var a=[0,0],f,b=6,g;c.origin=
function(f){if(!arguments.length)return a;a=f;return c};c.angle=function(a){if(!arguments.length)return f;g=dd((f=+a)*ia,b*ia);return c};c.precision=function(a){if(!arguments.length)return b;g=dd(f*ia,(b=+a)*ia);return c};return c.angle(90)};v.geo.distance=function(c,a){var f=(a[0]-c[0])*ia,b=c[1]*ia,g=a[1]*ia,m=Math.sin(f),f=Math.cos(f),l=Math.sin(b),b=Math.cos(b),e=Math.sin(g),g=Math.cos(g),h;return Math.atan2(Math.sqrt((h=g*m)*h+(h=b*e-l*g*f)*h),l*e+b*g*f)};v.geo.graticule=function(){function c(){return{type:"MultiLineString",
coordinates:a()}}function a(){return v.range(Math.ceil(m/s)*s,g,s).map(x).concat(v.range(Math.ceil(k/t)*t,h,t).map(F)).concat(v.range(Math.ceil(b/n)*n,f,n).filter(function(c){return 1E-6<ka(c%s)}).map(y)).concat(v.range(Math.ceil(e/r)*r,l,r).filter(function(c){return 1E-6<ka(c%t)}).map(J))}var f,b,g,m,l,e,h,k,n=10,r=n,s=90,t=360,y,J,x,F,C=2.5;c.lines=function(){return a().map(function(c){return{type:"LineString",coordinates:c}})};c.outline=function(){return{type:"Polygon",coordinates:[x(m).concat(F(h).slice(1),
x(g).reverse().slice(1),F(k).reverse().slice(1))]}};c.extent=function(a){return arguments.length?c.majorExtent(a).minorExtent(a):c.minorExtent()};c.majorExtent=function(a){if(!arguments.length)return[[m,k],[g,h]];m=+a[0][0];g=+a[1][0];k=+a[0][1];h=+a[1][1];m>g&&(a=m,m=g,g=a);k>h&&(a=k,k=h,h=a);return c.precision(C)};c.minorExtent=function(a){if(!arguments.length)return[[b,e],[f,l]];b=+a[0][0];f=+a[1][0];e=+a[0][1];l=+a[1][1];b>f&&(a=b,b=f,f=a);e>l&&(a=e,e=l,l=a);return c.precision(C)};c.step=function(a){return arguments.length?
c.majorStep(a).minorStep(a):c.minorStep()};c.majorStep=function(a){if(!arguments.length)return[s,t];s=+a[0];t=+a[1];return c};c.minorStep=function(a){if(!arguments.length)return[n,r];n=+a[0];r=+a[1];return c};c.precision=function(a){if(!arguments.length)return C;C=+a;y=Ie(e,l,90);J=Je(b,f,C);x=Ie(k,h,90);F=Je(m,g,C);return c};return c.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};v.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[f||
b.apply(this,arguments),g||p.apply(this,arguments)]}}var b=hd,f,p=id,g;a.distance=function(){return v.geo.distance(f||b.apply(this,arguments),g||p.apply(this,arguments))};a.source=function(g){if(!arguments.length)return b;b=g;f="function"===typeof g?null:g;return a};a.target=function(f){if(!arguments.length)return p;p=f;g="function"===typeof f?null:f;return a};a.precision=function(){return arguments.length?a:0};return a};v.geo.interpolate=function(a,b){return Ng(a[0]*ia,a[1]*ia,b[0]*ia,b[1]*ia)};
v.geo.length=function(a){Ic=0;v.geo.stream(a,Cb);return Ic};var Ic,Cb={sphere:z,point:z,lineStart:function(){function a(c,m){var l=Math.sin(m*=ia),e=Math.cos(m),h=ka((c*=ia)-b),k=Math.cos(h);Ic+=Math.atan2(Math.sqrt((h=e*Math.sin(h))*h+(h=p*l-f*e*k)*h),f*l+p*e*k);b=c;f=l;p=e}var b,f,p;Cb.point=function(g,m){b=g*ia;f=Math.sin(m*=ia);p=Math.cos(m);Cb.point=a};Cb.lineEnd=function(){Cb.point=Cb.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z},Xf=Hb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*
Math.asin(a/2)});(v.geo.azimuthalEqualArea=function(){return eb(Xf)}).raw=Xf;var Yf=Hb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ua);(v.geo.azimuthalEquidistant=function(){return eb(Yf)}).raw=Yf;(v.geo.conicConformal=function(){return ed(Ke)}).raw=Ke;(v.geo.conicEquidistant=function(){return ed(Le)}).raw=Le;var Zf=Hb(function(a){return 1/a},Math.atan);(v.geo.gnomonic=function(){return eb(Zf)}).raw=Zf;kc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-va]};(v.geo.mercator=function(){return Me(kc)}).raw=
kc;var $f=Hb(function(){return 1},Math.asin);(v.geo.orthographic=function(){return eb($f)}).raw=$f;var ag=Hb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(v.geo.stereographic=function(){return eb(ag)}).raw=ag;jd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-va]};(v.geo.transverseMercator=function(){var a=Me(jd),b=a.center,f=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?f([a[0],a[1],2<a.length?a[2]+90:90]):(a=
f(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=jd;v.geom={};v.geom.hull=function(a){function b(a){if(3>a.length)return[];var c=pa(f),q=pa(p),l,e=a.length,h=[],k=[];for(l=0;l<e;l++)h.push([+c.call(this,a[l],l),+q.call(this,a[l],l),l]);h.sort(Og);for(l=0;l<e;l++)k.push([h[l][0],-h[l][1]]);var c=Ne(h),k=Ne(k),q=k[0]===c[0],e=k[k.length-1]===c[c.length-1],n=[];for(l=c.length-1;0<=l;--l)n.push(a[h[c[l]][2]]);for(l=+q;l<k.length-e;++l)n.push(a[h[k[l]][2]]);return n}var f=vb,p=Ib;if(arguments.length)return b(a);
b.x=function(a){return arguments.length?(f=a,b):f};b.y=function(a){return arguments.length?(p=a,b):p};return b};v.geom.polygon=function(a){Sb(a,Jc);return a};var Jc=v.geom.polygon.prototype=[];Jc.area=function(){for(var a=-1,b=this.length,f,p=this[b-1],g=0;++a<b;)f=p,p=this[a],g+=f[1]*p[0]-f[0]*p[1];return.5*g};Jc.centroid=function(a){var b=-1,f=this.length,p=0,g=0,m,l=this[f-1],e;for(arguments.length||(a=-1/(6*this.area()));++b<f;)m=l,l=this[b],e=m[0]*l[1]-l[0]*m[1],p+=(m[0]+l[0])*e,g+=(m[1]+l[1])*
e;return[p*a,g*a]};Jc.clip=function(a){for(var b,f=Pe(a),p=-1,g=this.length-Pe(this),m,l,e=this[g-1],h,k,n;++p<g;){b=a.slice();a.length=0;h=this[p];k=b[(l=b.length-f)-1];for(m=-1;++m<l;)n=b[m],kd(n,e,h)?(kd(k,e,h)||a.push(Oe(k,n,e,h)),a.push(n)):kd(k,e,h)&&a.push(Oe(k,n,e,h)),k=n;f&&a.push(a[0]);e=h}return a};var zb,mb,xb,Re=[],md,Jb,Ve=[];Te.prototype.prepare=function(){for(var a=this.edges,b=a.length,f;b--;)f=a[b].edge,f.b&&f.a||a.splice(b,1);a.sort(Ue);return a.length};nc.prototype={start:function(){return this.edge.l===
this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nd.prototype={insert:function(a,b){var f,p,g;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;f=a}else this._?(a=Xe(this._),b.P=null,b.N=a,a.P=a.L=b,f=a):(b.P=b.N=null,this._=b,f=null);b.L=b.R=null;b.U=f;b.C=!0;for(a=b;f&&f.C;)p=f.U,f===p.L?(g=p.R)&&g.C?(f.C=g.C=!1,p.C=!0,a=p):(a===f.R&&(Lb(this,f),a=f,f=a.U),f.C=!1,p.C=!0,Mb(this,p)):(g=p.L)&&g.C?(f.C=g.C=!1,
p.C=!0,a=p):(a===f.L&&(Mb(this,f),a=f,f=a.U),f.C=!1,p.C=!0,Lb(this,p)),f=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,f=a.L,p=a.R,g,m;g=f?p?Xe(p):f:p;b?b.L===a?b.L=g:b.R=g:this._=g;f&&p?(m=g.C,g.C=a.C,g.L=f,f.U=g,g!==p?(b=g.U,g.U=a.U,a=g.R,b.L=a,g.R=p,p.U=g):(g.U=b,b=g,a=g.R)):(m=a.C,a=g);a&&(a.U=b);if(!m)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Lb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=
!1,a.C=!0,Mb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Lb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Mb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Lb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Mb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};v.geom.voronoi=function(a){function b(a){var c=Array(a.length),g=e[0][0],m=e[0][1],p=e[1][0],l=e[1][1];od(f(a),e).cells.forEach(function(b,f){var q=b.edges,e=b.site;(c[f]=q.length?q.map(function(a){a=a.start();return[a.x,
a.y]}):e.x>=g&&e.x<=p&&e.y>=m&&e.y<=l?[[g,l],[p,l],[p,m],[g,m]]:[]).point=a[f]});return c}function f(a){return a.map(function(a,c){return{x:1E-6*Math.round(m(a,c)/1E-6),y:1E-6*Math.round(l(a,c)/1E-6),i:c}})}var p=vb,g=Ib,m=p,l=g,e=Kc;if(a)return b(a);b.links=function(a){return od(f(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};b.triangles=function(a){var c=[];od(f(a)).cells.forEach(function(b,f){for(var g=b.site,m=b.edges.sort(Ue),p=-1,l=
m.length,q,e=m[l-1].edge,e=e.l===g?e.r:e.l;++p<l;)q=e,e=m[p].edge,e=e.l===g?e.r:e.l,f<q.i&&f<e.i&&0>(g.x-e.x)*(q.y-g.y)-(g.x-q.x)*(e.y-g.y)&&c.push([a[f],a[q.i],a[e.i]])});return c};b.x=function(a){return arguments.length?(m=pa(p=a),b):p};b.y=function(a){return arguments.length?(l=pa(g=a),b):g};b.clipExtent=function(a){if(!arguments.length)return e===Kc?null:e;e=null==a?Kc:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):e===Kc?null:e&&e[1]};return b};var Kc=[[-1E6,
-1E6],[1E6,1E6]];v.geom.delaunay=function(a){return v.geom.voronoi().triangles(a)};v.geom.quadtree=function(a,b,f,p,g){function m(a){function c(a,b,f,g,p,l,q,e){if(!isNaN(f)&&!isNaN(g))if(a.leaf){var h=a.x,k=a.y;if(null!=h){if(!(.01>ka(h-f)+ka(k-g))){var n=a.point;a.x=a.y=a.point=null;m(a,n,h,k,p,l,q,e)}m(a,b,f,g,p,l,q,e)}else a.x=f,a.y=g,a.point=b}else m(a,b,f,g,p,l,q,e)}function m(a,b,f,g,p,l,q,e){var h=.5*(p+q),k=.5*(l+e),n=f>=h,w=g>=k,r=(w<<1)+n;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=Ye());n?p=h:
q=h;w?l=k:e=k;c(a,b,f,g,p,l,q,e)}var k,n=pa(l),r=pa(e),s,t,y,J,x,F,C,E;if(null!=b)x=b,F=f,C=p,E=g;else if(C=E=-(x=F=Infinity),s=[],t=[],J=a.length,h)for(y=0;y<J;++y)k=a[y],k.x<x&&(x=k.x),k.y<F&&(F=k.y),k.x>C&&(C=k.x),k.y>E&&(E=k.y),s.push(k.x),t.push(k.y);else for(y=0;y<J;++y){var G=+n(k=a[y],y);k=+r(k,y);G<x&&(x=G);k<F&&(F=k);G>C&&(C=G);k>E&&(E=k);s.push(G);t.push(k)}G=C-x;k=E-F;G>k?E=F+G:C=x+k;var v=Ye();v.add=function(a){c(v,a,+n(a,++y),+r(a,y),x,F,C,E)};v.visit=function(a){Nb(a,v,x,F,C,E)};y=
-1;if(null==b){for(;++y<J;)c(v,a[y],s[y],t[y],x,F,C,E);--y}else a.forEach(v.add);s=t=a=k=null;return v}var l=vb,e=Ib,h;if(h=arguments.length)return l=Ug,e=Vg,3===h&&(g=f,p=b,f=b=0),m(a);m.x=function(a){return arguments.length?(l=a,m):l};m.y=function(a){return arguments.length?(e=a,m):e};m.extent=function(a){if(!arguments.length)return null==b?null:[[b,f],[p,g]];null==a?b=f=p=g=null:(b=+a[0][0],f=+a[0][1],p=+a[1][0],g=+a[1][1]);return m};m.size=function(a){if(!arguments.length)return null==b?null:
[p-b,g-f];null==a?b=f=p=g=null:(b=f=0,p=+a[0],g=+a[1]);return m};return m};v.interpolateRgb=pd;v.interpolateObject=Ze;v.interpolateNumber=Za;v.interpolateString=$e;var qd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rd=new RegExp(qd.source,"g");v.interpolate=nb;v.interpolators=[function(a,b){var f=typeof b;return("string"===f?Ub.has(b)||/^(#|rgb\(|hsl\()/.test(b)?pd:$e:b instanceof Ba?pd:Array.isArray(b)?oc:"object"===f&&isNaN(b)?Ze:Za)(a,b)}];v.interpolateArray=oc;var bg=function(){return ua},Zh=
v.map({linear:bg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Xg},cubic:function(){return Yg},sin:function(){return $g},exp:function(){return ah},circle:function(){return bh},elastic:function(a,b){var f;2>arguments.length&&(b=.45);arguments.length?f=b/Ea*Math.asin(1/a):(a=1,f=b/4);return function(p){return 1+a*Math.pow(2,-10*p)*Math.sin((p-f)*Ea/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return ch}}),$h=v.map({"in":ua,
out:af,"in-out":bf,"out-in":function(a){return bf(af(a))}});v.ease=function(a){var b=a.indexOf("-"),f=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",f=Zh.get(f)||bg,b=$h.get(b)||ua;return Wg(b(f.apply(null,Pf.call(arguments,1))))};v.interpolateHcl=function(a,b){a=v.hcl(a);b=v.hcl(b);var f=a.h,p=a.c,g=a.l,m=b.h-f,l=b.c-p,e=b.l-g;isNaN(l)&&(l=0,p=isNaN(p)?b.c:p);isNaN(m)?(m=0,f=isNaN(f)?b.h:f):180<m?m-=360:-180>m&&(m+=360);return function(a){return Rc(f+m*a,p+l*a,g+e*a)+""}};v.interpolateHsl=
function(a,b){a=v.hsl(a);b=v.hsl(b);var f=a.h,l=a.s,g=a.l,m=b.h-f,e=b.s-l,h=b.l-g;isNaN(e)&&(e=0,l=isNaN(l)?b.s:l);isNaN(m)?(m=0,f=isNaN(f)?b.h:f):180<m?m-=360:-180>m&&(m+=360);return function(a){return Qc(f+m*a,l+e*a,g+h*a)+""}};v.interpolateLab=function(a,b){a=v.lab(a);b=v.lab(b);var f=a.l,l=a.a,g=a.b,m=b.l-f,e=b.a-l,h=b.b-g;return function(a){return Xd(f+m*a,l+e*a,g+h*a)+""}};v.interpolateRound=cf;v.transform=function(a){var b=Na.createElementNS(v.ns.prefix.svg,"g");return(v.transform=function(a){if(null!=
a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new df(c?c.matrix:ai)})(a)};df.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ai={a:1,b:0,c:0,d:1,e:0,f:0};v.interpolateTransform=ff;v.layout={};v.layout.bundle=function(){return function(a){for(var b=[],f=-1,l=a.length;++f<l;)b.push(fh(a[f]));return b}};v.layout.chord=function(){function a(){var c={},f=[],s=v.range(e),t=[],y,J,x,
F,C;l=[];g=[];y=0;for(F=-1;++F<e;){J=0;for(C=-1;++C<e;)J+=m[F][C];f.push(J);t.push(v.range(e));y+=J}k&&s.sort(function(a,c){return k(f[a],f[c])});n&&t.forEach(function(a,c){a.sort(function(a,b){return n(m[c][a],m[c][b])})});y=(Ea-h*e)/y;J=0;for(F=-1;++F<e;){x=J;for(C=-1;++C<e;){var E=s[F],G=t[E][C],L=m[E][G],u=J,V=J+=L*y;c[E+"-"+G]={index:E,subindex:G,startAngle:u,endAngle:V,value:L}}g[E]={index:E,startAngle:x,endAngle:J,value:(J-x)/y};J+=h}for(F=-1;++F<e;)for(C=F-1;++C<e;)s=c[F+"-"+C],t=c[C+"-"+
F],(s.value||t.value)&&l.push(s.value<t.value?{source:t,target:s}:{source:s,target:t});r&&b()}function b(){l.sort(function(a,c){return r((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var f={},l,g,m,e,h=0,k,n,r;f.matrix=function(a){if(!arguments.length)return m;e=(m=a)&&m.length;l=g=null;return f};f.padding=function(a){if(!arguments.length)return h;h=a;l=g=null;return f};f.sortGroups=function(a){if(!arguments.length)return k;k=a;l=g=null;return f};f.sortSubgroups=function(a){if(!arguments.length)return n;
n=a;l=null;return f};f.sortChords=function(a){if(!arguments.length)return r;r=a;l&&b();return f};f.chords=function(){l||a();return l};f.groups=function(){g||a();return g};return f};v.layout.force=function(){function a(c){return function(a,b,f,g){if(a.point!==c){f=a.cx-c.x;var m=a.cy-c.y;b=g-b;g=f*f+m*m;if(b*b/y<g)return g<s&&(b=a.charge/g,c.px-=f*b,c.py-=m*b),!0;a.point&&g&&g<s&&(b=a.pointCharge/g,c.px-=f*b,c.py-=m*b)}return!a.charge}}function b(a){a.px=v.event.x;a.py=v.event.y;f.resume()}var f={},
l=v.dispatch("start","tick","end"),g=[1,1],m,e,h=.9,k=bi,n=ci,r=-30,s=di,t=.1,y=.64,J=[],x=[],F,C,E;f.tick=function(){if(.005>(e*=.99))return l.end({type:"end",alpha:e=0}),!0;var b=J.length,f=x.length,m,q,k,n,s,y,G;for(m=0;m<f;++m)if(q=x[m],k=q.source,n=q.target,y=n.x-k.x,G=n.y-k.y,s=y*y+G*G)s=e*C[m]*((s=Math.sqrt(s))-F[m])/s,y*=s,G*=s,n.x-=y*(s=k.weight/(n.weight+k.weight)),n.y-=G*s,k.x+=y*(s=1-s),k.y+=G*s;if(s=e*t)if(y=g[0]/2,G=g[1]/2,m=-1,s)for(;++m<b;)q=J[m],q.x+=(y-q.x)*s,q.y+=(G-q.y)*s;if(r)for(hf(f=
v.geom.quadtree(J),e,E),m=-1;++m<b;)(q=J[m]).fixed||f.visit(a(q));for(m=-1;++m<b;)q=J[m],q.fixed?(q.x=q.px,q.y=q.py):(q.x-=(q.px-(q.px=q.x))*h,q.y-=(q.py-(q.py=q.y))*h);l.tick({type:"tick",alpha:e})};f.nodes=function(a){if(!arguments.length)return J;J=a;return f};f.links=function(a){if(!arguments.length)return x;x=a;return f};f.size=function(a){if(!arguments.length)return g;g=a;return f};f.linkDistance=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return f};f.distance=f.linkDistance;
f.linkStrength=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return f};f.friction=function(a){if(!arguments.length)return h;h=+a;return f};f.charge=function(a){if(!arguments.length)return r;r="function"===typeof a?a:+a;return f};f.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(s);s=a*a;return f};f.gravity=function(a){if(!arguments.length)return t;t=+a;return f};f.theta=function(a){if(!arguments.length)return Math.sqrt(y);y=a*a;return f};f.alpha=function(a){if(!arguments.length)return e;
a=+a;e?e=0<a?a:0:0<a&&(l.start({type:"start",alpha:e=a}),v.timer(f.tick));return f};f.start=function(){function a(f,g){if(!e){e=Array(b);for(l=0;l<b;++l)e[l]=[];for(l=0;l<p;++l){var m=x[l];e[m.source.index].push(m.target);e[m.target.index].push(m.source)}}for(var m=e[c],l=-1,p=m.length,q;++l<p;)if(!isNaN(q=m[l][f]))return q;return Math.random()*g}var c,b=J.length,m=x.length,l=g[0],p=g[1],e,q;for(c=0;c<b;++c)(q=J[c]).index=c,q.weight=0;for(c=0;c<m;++c)q=x[c],"number"==typeof q.source&&(q.source=J[q.source]),
"number"==typeof q.target&&(q.target=J[q.target]),++q.source.weight,++q.target.weight;for(c=0;c<b;++c)q=J[c],isNaN(q.x)&&(q.x=a("x",l)),isNaN(q.y)&&(q.y=a("y",p)),isNaN(q.px)&&(q.px=q.x),isNaN(q.py)&&(q.py=q.y);F=[];if("function"===typeof k)for(c=0;c<m;++c)F[c]=+k.call(this,x[c],c);else for(c=0;c<m;++c)F[c]=k;C=[];if("function"===typeof n)for(c=0;c<m;++c)C[c]=+n.call(this,x[c],c);else for(c=0;c<m;++c)C[c]=n;E=[];if("function"===typeof r)for(c=0;c<b;++c)E[c]=+r.call(this,J[c],c);else for(c=0;c<b;++c)E[c]=
r;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){m||(m=v.behavior.drag().origin(ua).on("dragstart.force",gh).on("drag.force",b).on("dragend.force",hh));if(!arguments.length)return m;this.on("mouseover.force",ih).on("mouseout.force",jh).call(m)};return v.rebind(f,l,"on")};var bi=20,ci=1,di=Infinity;v.layout.hierarchy=function(){function a(g){var m=[g],e=[],h;for(g.depth=0;null!=(h=m.pop());)if(e.push(h),(n=f.call(a,h,h.depth))&&(k=
n.length)){for(var k,n,s;0<=--k;)m.push(s=n[k]),s.parent=h,s.depth=h.depth+1;l&&(h.value=0);h.children=n}else l&&(h.value=+l.call(a,h,h.depth)||0),delete h.children;Qa(g,function(a){var c,f;b&&(c=a.children)&&c.sort(b);l&&(f=a.parent)&&(f.value+=a.value)});return e}var b=nh,f=lh,l=mh;a.sort=function(f){if(!arguments.length)return b;b=f;return a};a.children=function(b){if(!arguments.length)return f;f=b;return a};a.value=function(b){if(!arguments.length)return l;l=b;return a};a.revalue=function(b){l&&
(Pb(b,function(a){a.children&&(a.value=0)}),Qa(b,function(b){var f;b.children||(b.value=+l.call(a,b,b.depth)||0);if(f=b.parent)f.value+=b.value}));return b};return a};v.layout.partition=function(){function a(b,f,g,l){var p=b.children;b.x=f;b.y=b.depth*l;b.dx=g;b.dy=l;if(p&&(q=p.length)){var e=-1,q,h;for(g=b.value?g/b.value:0;++e<q;)a(h=p[e],f,b=h.value*g,l),f+=b}}function b(a){a=a.children;var c=0;if(a&&(g=a.length))for(var f=-1,g;++f<g;)c=Math.max(c,b(a[f]));return 1+c}function f(f,e){var h=l.call(this,
f,e);a(h[0],0,g[0],g[1]/b(h[0]));return h}var l=v.layout.hierarchy(),g=[1,1];f.size=function(a){if(!arguments.length)return g;g=a;return f};return Ob(f,l)};v.layout.pie=function(){function a(m){var e=m.map(function(f,g){return+b.call(a,f,g)}),h=+("function"===typeof l?l.apply(this,arguments):l),k=(("function"===typeof g?g.apply(this,arguments):g)-h)/v.sum(e),n=v.range(m.length);null!=f&&n.sort(f===cg?function(a,c){return e[c]-e[a]}:function(a,c){return f(m[a],m[c])});var s=[];n.forEach(function(a){var c;
s[a]={data:m[a],value:c=e[a],startAngle:h,endAngle:h+=c*k}});return s}var b=Number,f=cg,l=0,g=Ea;a.value=function(f){if(!arguments.length)return b;b=f;return a};a.sort=function(b){if(!arguments.length)return f;f=b;return a};a.startAngle=function(b){if(!arguments.length)return l;l=b;return a};a.endAngle=function(b){if(!arguments.length)return g;g=b;return a};return a};var cg={};v.layout.stack=function(){function a(h,k){var n=h.map(function(f,g){return b.call(a,f,g)}),s=n.map(function(b){return b.map(function(b,
f){return[m.call(a,b,f),e.call(a,b,f)]})}),r=f.call(a,s,k),n=v.permute(n,r),s=v.permute(s,r),r=l.call(a,s,k),t=n.length,y=n[0].length,J,x,F;for(x=0;x<y;++x)for(g.call(a,n[0][x],F=r[x],s[0][x][1]),J=1;J<t;++J)g.call(a,n[J][x],F+=s[J-1][x][1],s[J][x][1]);return h}var b=ua,f=sd,l=td,g=qh,m=oh,e=ph;a.values=function(f){if(!arguments.length)return b;b=f;return a};a.order=function(b){if(!arguments.length)return f;f="function"===typeof b?b:ei.get(b)||sd;return a};a.offset=function(b){if(!arguments.length)return l;
l="function"===typeof b?b:fi.get(b)||td;return a};a.x=function(b){if(!arguments.length)return m;m=b;return a};a.y=function(b){if(!arguments.length)return e;e=b;return a};a.out=function(b){if(!arguments.length)return g;g=b;return a};return a};var ei=v.map({"inside-out":function(a){var b=a.length,f,l=a.map(rh),g=a.map(sh),m=v.range(b).sort(function(a,c){return l[a]-l[c]}),e=0,h=0,k=[],n=[];for(a=0;a<b;++a)f=m[a],e<h?(e+=g[f],k.push(f)):(h+=g[f],n.push(f));return n.reverse().concat(k)},reverse:function(a){return v.range(a.length).reverse()},
"default":sd}),fi=v.map({silhouette:function(a){var b=a.length,f=a[0].length,l=[],g=0,m,e,h,k=[];for(e=0;e<f;++e){for(h=m=0;m<b;m++)h+=a[m][e][1];h>g&&(g=h);l.push(h)}for(e=0;e<f;++e)k[e]=(g-l[e])/2;return k},wiggle:function(a){var b=a.length,f=a[0],l=f.length,g,m,e,h,k,n,s,r,t,y=[];y[0]=r=t=0;for(m=1;m<l;++m){for(h=g=0;g<b;++g)h+=a[g][m][1];k=g=0;for(s=f[m][0]-f[m-1][0];g<b;++g){e=0;for(n=(a[g][m][1]-a[g][m-1][1])/(2*s);e<g;++e)n+=(a[e][m][1]-a[e][m-1][1])/s;k+=n*a[g][m][1]}y[m]=r-=h?k/h*s:0;r<t&&
(t=r)}for(m=0;m<l;++m)y[m]-=t;return y},expand:function(a){var b=a.length,f=a[0].length,l=1/b,g,m,e,h=[];for(m=0;m<f;++m){for(e=g=0;g<b;g++)e+=a[g][m][1];if(e)for(g=0;g<b;g++)a[g][m][1]/=e;else for(g=0;g<b;g++)a[g][m][1]=l}for(m=0;m<f;++m)h[m]=0;return h},zero:td});v.layout.histogram=function(){function a(c,e){var h=[],k=c.map(f,this),n=l.call(this,k,e),s=g.call(this,n,k,e),r;e=-1;for(var t=k.length,y=s.length-1,J=b?1:1/t;++e<y;)r=h[e]=[],r.dx=s[e+1]-(r.x=s[e]),r.y=0;if(0<y)for(e=-1;++e<t;)r=k[e],
r>=n[0]&&r<=n[1]&&(r=h[v.bisect(s,r,1,y)-1],r.y+=J,r.push(c[e]));return h}var b=!0,f=Number,l=vh,g=uh;a.value=function(b){if(!arguments.length)return f;f=b;return a};a.range=function(b){if(!arguments.length)return l;l=pa(b);return a};a.bins=function(b){if(!arguments.length)return g;g="number"===typeof b?function(a){return jf(a,b)}:pa(b);return a};a.frequency=function(f){if(!arguments.length)return b;b=!!f;return a};return a};v.layout.pack=function(){function a(c,e){var h=b.call(this,c,e),k=h[0],n=
l[0],s=l[1],r=null==g?Math.sqrt:"function"===typeof g?g:function(){return g};k.x=k.y=0;Qa(k,function(a){a.r=+r(a.value)});Qa(k,mf);if(f){var t=f*(g?1:Math.max(2*k.r/n,2*k.r/s))/2;Qa(k,function(a){a.r+=t});Qa(k,mf);Qa(k,function(a){a.r-=t})}of(k,n/2,s/2,g?1:1/Math.max(2*k.r/n,2*k.r/s));return h}var b=v.layout.hierarchy().sort(wh),f=0,l=[1,1],g;a.size=function(b){if(!arguments.length)return l;l=b;return a};a.radius=function(b){if(!arguments.length)return g;g=null==b||"function"===typeof b?b:+b;return a};
a.padding=function(b){if(!arguments.length)return f;f=+b;return a};return Ob(a,b)};v.layout.tree=function(){function a(c,n){var s=m.call(this,c,n),r=s[0],t=b(r);Qa(t,f);t.parent.m=-t.z;Pb(t,l);if(k)Pb(r,g);else{var y=r,J=r,x=r;Pb(r,function(a){a.x<y.x&&(y=a);a.x>J.x&&(J=a);a.depth>x.depth&&(x=a)});var F=e(y,J)/2-y.x,C=h[0]/(J.x+e(J,y)/2+F),E=h[1]/(x.depth||1);Pb(r,function(a){a.x=(a.x+F)*C;a.y=a.depth*E})}return s}function b(a){a={A:null,children:[a]};for(var c=[a],f;null!=(f=c.pop());)for(var g=
f.children,l,m=0,e=g.length;m<e;++m)c.push((g[m]=l={_:g[m],parent:f,children:(l=g[m].children)&&l.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:m}).a=l);return a.children[0]}function f(a){var c=a.children,b=a.parent.children,f=a.i?b[a.i-1]:null;if(c.length){for(var g=0,l=0,m=a.children,p=m.length,q;0<=--p;)q=m[p],q.z+=g,q.m+=g,g+=q.s+(l+=q.c);c=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+e(a._,f._),a.m=a.z-c):a.z=c}else f&&(a.z=f.z+e(a._,f._));c=a.parent;b=a.parent.A||b[0];if(f){l=g=a;m=g.parent.children[0];
p=g.m;q=l.m;for(var h=f.m,k=m.m,n;f=wd(f),g=vd(g),f&&g;){m=vd(m);l=wd(l);l.a=a;n=f.z+h-g.z-p+e(f._,g._);if(0<n){var s=f.a.parent===a.parent?f.a:b,r=a,t=n,y=t/(r.i-s.i);r.c-=y;r.s+=t;s.c+=y;r.z+=t;r.m+=t;p+=n;q+=n}h+=f.m;p+=g.m;k+=m.m;q+=l.m}f&&!wd(l)&&(l.t=f,l.m+=h-q);g&&!vd(m)&&(m.t=g,m.m+=p-k,b=a)}c.A=b}function l(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function g(a){a.x*=h[0];a.y=a.depth*h[1]}var m=v.layout.hierarchy().sort(null).value(null),e=pf,h=[1,1],k=null;a.separation=function(b){if(!arguments.length)return e;
e=b;return a};a.size=function(b){if(!arguments.length)return k?null:h;k=null==(h=b)?g:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?h:null;k=null==(h=b)?null:g;return a};return Ob(a,m)};v.layout.cluster=function(){function a(c,e){var h=b.call(this,c,e),k=h[0],n,r=0;Qa(k,function(a){var c=a.children;c&&c.length?(a.x=Ah(c),a.y=zh(c)):(a.x=n?r+=f(a,n):0,a.y=0,n=a)});var s=qf(k),t=rf(k),y=s.x-f(s,t)/2,J=t.x+f(t,s)/2;Qa(k,g?function(a){a.x=(a.x-k.x)*l[0];a.y=(k.y-a.y)*l[1]}:function(a){a.x=
(a.x-y)/(J-y)*l[0];a.y=(1-(k.y?a.y/k.y:1))*l[1]});return h}var b=v.layout.hierarchy().sort(null).value(null),f=pf,l=[1,1],g=!1;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return g?null:l;g=null==(l=b);return a};a.nodeSize=function(b){if(!arguments.length)return g?l:null;g=null!=(l=b);return a};return Ob(a,b)};v.layout.treemap=function(){function a(c,b){for(var f=-1,g=c.length,l,m;++f<g;)m=(l=c[f]).value*(0>b?0:b),l.area=isNaN(m)||0>=
m?0:m}function b(f){var g=f.children;if(g&&g.length){var m=n(f),e=[],h=g.slice(),k=Infinity,r,s="slice"===t?m.dx:"dice"===t?m.dy:"slice-dice"===t?f.depth&1?m.dy:m.dx:Math.min(m.dx,m.dy);a(h,m.dx*m.dy/f.value);for(e.area=0;0<(f=h.length);){e.push(f=h[f-1]);e.area+=f.area;if(!(f="squarify"!==t)){r=s;f=e.area;for(var J=void 0,x=0,w=Infinity,F=-1,C=e.length;++F<C;)if(J=e[F].area)J<w&&(w=J),J>x&&(x=J);f*=f;r*=r;f=(r=f?Math.max(r*x*y/f,f/(r*w*y)):Infinity)<=k}f?(h.pop(),k=r):(e.area-=e.pop().area,l(e,s,
m,!1),s=Math.min(m.dx,m.dy),e.length=e.area=0,k=Infinity)}e.length&&(l(e,s,m,!0),e.length=e.area=0);g.forEach(b)}}function f(b){var g=b.children;if(g&&g.length){var m=n(b),e=g.slice(),q=[];a(e,m.dx*m.dy/b.value);for(q.area=0;b=e.pop();)q.push(b),q.area+=b.area,null!=b.z&&(l(q,b.z?m.dx:m.dy,m,!e.length),q.length=q.area=0);g.forEach(f)}}function l(a,c,b,f){var g=-1,m=a.length,p=b.x,q=b.y,h=c?e(a.area/c):0,k;if(c==b.dx){if(f||h>b.dy)h=b.dy;for(;++g<m;)k=a[g],k.x=p,k.y=q,k.dy=h,p+=k.dx=Math.min(b.x+b.dx-
p,h?e(k.area/h):0);k.z=!0;k.dx+=b.x+b.dx-p;b.y+=h;b.dy-=h}else{if(f||h>b.dx)h=b.dx;for(;++g<m;)k=a[g],k.x=p,k.y=q,k.dx=h,q+=k.dy=Math.min(b.y+b.dy-q,h?e(k.area/h):0);k.z=!1;k.dy+=b.y+b.dy-q;b.x+=h;b.dx-=h}}function g(g){g=s||m(g);var l=g[0];l.x=0;l.y=0;l.dx=h[0];l.dy=h[1];s&&m.revalue(l);a([l],l.dx*l.dy/l.value);(s?f:b)(l);r&&(s=g);return g}var m=v.layout.hierarchy(),e=Math.round,h=[1,1],k=null,n=xd,r=!1,s,t="squarify",y=.5*(1+Math.sqrt(5));g.size=function(a){if(!arguments.length)return h;h=a;return g};
g.padding=function(a){function c(b){var f=a.call(g,b,b.depth);return null==f?xd(b):sf(b,"number"===typeof f?[f,f,f,f]:f)}function b(c){return sf(c,a)}if(!arguments.length)return k;var f;n=null==(k=a)?xd:"function"===(f=typeof a)?c:"number"===f?(a=[a,a,a,a],b):b;return g};g.round=function(a){if(!arguments.length)return e!=Number;e=a?Math.round:Number;return g};g.sticky=function(a){if(!arguments.length)return r;r=a;s=null;return g};g.ratio=function(a){if(!arguments.length)return y;y=a;return g};g.mode=
function(a){if(!arguments.length)return t;t=a+"";return g};return Ob(g,m)};v.random={normal:function(a,b){var f=arguments.length;2>f&&(b=1);1>f&&(a=0);return function(){var f,g;do f=2*Math.random()-1,g=2*Math.random()-1,g=f*f+g*g;while(!g||1<g);return a+b*f*Math.sqrt(-2*Math.log(g)/g)}},logNormal:function(){var a=v.random.normal.apply(v,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=v.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=
0,f=0;f<a;f++)b+=Math.random();return b}}};v.scale={};var Ch={floor:ua,ceil:ua};v.scale.linear=function(){return uf([0,1],[0,1],nb,!1)};var Fh={s:1,g:1,p:1,r:1,e:1};v.scale.log=function(){return vf(v.scale.linear().domain([0,1]),10,!0,[1,10])};var wf=v.format(".0e"),Gh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};v.scale.pow=function(){return xf(v.scale.linear(),1,[0,1])};v.scale.sqrt=function(){return v.scale.pow().exponent(.5)};v.scale.ordinal=function(){return yf([],
{t:"range",a:[[]]})};v.scale.category10=function(){return v.scale.ordinal().range(gi)};v.scale.category20=function(){return v.scale.ordinal().range(hi)};v.scale.category20b=function(){return v.scale.ordinal().range(ii)};v.scale.category20c=function(){return v.scale.ordinal().range(ji)};var gi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Tb),hi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Tb),ii=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Tb),ji=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Tb);v.scale.quantile=function(){return zf([],[])};v.scale.quantize=
function(){return Af(0,1,[0,1])};v.scale.threshold=function(){return Bf([.5],[0,1])};v.scale.identity=function(){return Cf([0,1])};v.svg={};v.svg.arc=function(){function a(){var c=b.apply(this,arguments),e=f.apply(this,arguments),h=l.apply(this,arguments)+ob,k=g.apply(this,arguments)+ob,n=(k<h&&(n=h,h=k,k=n),k-h),r=n<ja?"0":"1",s=Math.cos(h),h=Math.sin(h),t=Math.cos(k),k=Math.sin(k);return n>=ki?c?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+c+"A"+c+","+c+" 0 1,0 0,"+-c+"A"+
c+","+c+" 0 1,0 0,"+c+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":c?"M"+e*s+","+e*h+"A"+e+","+e+" 0 "+r+",1 "+e*t+","+e*k+"L"+c*t+","+c*k+"A"+c+","+c+" 0 "+r+",0 "+c*s+","+c*h+"Z":"M"+e*s+","+e*h+"A"+e+","+e+" 0 "+r+",1 "+e*t+","+e*k+"L0,0Z"}var b=Hh,f=Ih,l=Df,g=Ef;a.innerRadius=function(f){if(!arguments.length)return b;b=pa(f);return a};a.outerRadius=function(b){if(!arguments.length)return f;f=pa(b);return a};a.startAngle=function(b){if(!arguments.length)return l;l=pa(b);
return a};a.endAngle=function(b){if(!arguments.length)return g;g=pa(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+f.apply(this,arguments))/2,c=(l.apply(this,arguments)+g.apply(this,arguments))/2+ob;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var ob=-va,ki=Ea-1E-6;v.svg.line=function(){return Ff(ua)};var Ad=v.map({linear:Fa,"linear-closed":function(a){return Fa(a)+"Z"},step:function(a){for(var b=0,f=a.length,l=a[0],g=[l[0],",",l[1]];++b<f;)g.push("H",(l[0]+(l=a[b])[0])/2,"V",
l[1]);1<f&&g.push("H",l[0]);return g.join("")},"step-before":Bd,"step-after":Cd,basis:Gf,"basis-open":function(a){if(4>a.length)return Fa(a);for(var b=[],f=-1,l=a.length,g,e=[0],h=[0];3>++f;)g=a[f],e.push(g[0]),h.push(g[1]);b.push(Ia(gb,e)+","+Ia(gb,h));for(--f;++f<l;)g=a[f],e.shift(),e.push(g[0]),h.shift(),h.push(g[1]),Ed(b,e,h);return b.join("")},"basis-closed":function(a){for(var b,f=-1,l=a.length,g=l+4,e,h=[],k=[];4>++f;)e=a[f%l],h.push(e[0]),k.push(e[1]);b=[Ia(gb,h),",",Ia(gb,k)];for(--f;++f<
g;)e=a[f%l],h.shift(),h.push(e[0]),k.shift(),k.push(e[1]),Ed(b,h,k);return b.join("")},bundle:function(a,b){var f=a.length-1;if(f)for(var l=a[0][0],g=a[0][1],e=a[f][0]-l,h=a[f][1]-g,k=-1,n,r;++k<=f;)n=a[k],r=k/f,n[0]=b*n[0]+(1-b)*(l+r*e),n[1]=b*n[1]+(1-b)*(g+r*h);return Gf(a)},cardinal:function(a,b){return 3>a.length?Fa(a):a[0]+tc(a,Dd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Fa(a):a[1]+tc(a.slice(1,a.length-1),Dd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Fa(a):a[0]+tc((a.push(a[0]),
a),Dd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Fa(a);else{var b=a[0],f=[],l,g,e,h;l=0;g=a.length-1;var k=[];e=a[1];for(h=k[0]=Fd(a[0],e);++l<g;)k[l]=(h+(h=Fd(e,e=a[l+1])))/2;k[l]=h;for(var n=-1,r=a.length-1;++n<r;)l=Fd(a[n],a[n+1]),1E-6>ka(l)?k[n]=k[n+1]=0:(g=k[n]/l,e=k[n+1]/l,h=g*g+e*e,9<h&&(h=3*l/Math.sqrt(h),k[n]=h*g,k[n+1]=h*e));for(n=-1;++n<=r;)h=(a[Math.min(r,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+k[n]*k[n])),f.push([h||0,k[n]*h||0]);a=b+tc(a,f)}return a}});
Ad.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Hf=[0,2/3,1/3,0],If=[0,1/3,2/3,0],gb=[0,1/6,2/3,1/6];v.svg.line.radial=function(){var a=Ff(Jf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Bd.reverse=Cd;Cd.reverse=Bd;v.svg.area=function(){return Kf(ua)};v.svg.area.radial=function(){var a=Kf(Jf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};
v.svg.chord=function(){function a(c,e){var m=b(this,l,c,e),h=b(this,g,c,e);return"M"+m.p0+f(m.r,m.p1,m.a1-m.a0)+(m.a0==h.a0&&m.a1==h.a1?"Q 0,0 "+m.p0:"Q 0,0 "+h.p0+f(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+m.p0))+"Z"}function b(a,c,f,l){var g=c.call(a,f,l);c=e.call(a,g,l);f=h.call(a,g,l)+ob;a=k.call(a,g,l)+ob;return{r:c,a0:f,a1:a,p0:[c*Math.cos(f),c*Math.sin(f)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function f(a,c,b){return"A"+a+","+a+" 0 "+ +(b>ja)+",1 "+c}var l=hd,g=id,e=Jh,h=Df,k=Ef;a.radius=function(b){if(!arguments.length)return e;
e=pa(b);return a};a.source=function(b){if(!arguments.length)return l;l=pa(b);return a};a.target=function(b){if(!arguments.length)return g;g=pa(b);return a};a.startAngle=function(b){if(!arguments.length)return h;h=pa(b);return a};a.endAngle=function(b){if(!arguments.length)return k;k=pa(b);return a};return a};v.svg.diagonal=function(){function a(c,e){var h=b.call(this,c,e),k=f.call(this,c,e),n=(h.y+k.y)/2,h=[h,{x:h.x,y:n},{x:k.x,y:n},k],h=h.map(l);return"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var b=hd,
f=id,l=Lf;a.source=function(f){if(!arguments.length)return b;b=pa(f);return a};a.target=function(b){if(!arguments.length)return f;f=pa(b);return a};a.projection=function(b){if(!arguments.length)return l;l=b;return a};return a};v.svg.diagonal.radial=function(){var a=v.svg.diagonal(),b=Lf,f=a.projection;a.projection=function(a){return arguments.length?f(Kh(b=a)):b};return a};v.svg.symbol=function(){function a(c,l){return(dg.get(b.call(this,c,l))||Mf)(f.call(this,c,l))}var b=Mh,f=Lh;a.type=function(f){if(!arguments.length)return b;
b=pa(f);return a};a.size=function(b){if(!arguments.length)return f;f=pa(b);return a};return a};var dg=v.map({circle:Mf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*eg));var b=a*eg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Lc);var b=a*Lc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Lc);var b=a*Lc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});v.svg.symbolTypes=dg.keys();var Lc=Math.sqrt(3),eg=Math.tan(30*ia),ta=[],Tf=0,qb,xc;ta.call=na.call;ta.empty=na.empty;ta.node=na.node;ta.size=na.size;v.transition=function(a){return arguments.length?qb?a.transition():a:Sf.transition()};v.transition.prototype=ta;ta.select=function(a){var b=this.id,f=[],l,g,e;a=P(a);for(var h=-1,k=this.length;++h<
k;){f.push(l=[]);for(var n=this[h],r=-1,s=n.length;++r<s;)(e=n[r])&&(g=a.call(e,e.__data__,r,h))?("__data__"in e&&(g.__data__=e.__data__),uc(g,r,b,e.__transition__[b]),l.push(g)):l.push(null)}return Qb(f,b)};ta.selectAll=function(a){var b=this.id,f=[],l,g,e,h;a=K(a);for(var k=-1,n=this.length;++k<n;)for(var r=this[k],s=-1,t=r.length;++s<t;)if(l=r[s]){h=l.__transition__[b];g=a.call(l,l.__data__,s,k);f.push(l=[]);for(var y=-1,J=g.length;++y<J;)(e=g[y])&&uc(e,y,b,h),l.push(e)}return Qb(f,b)};ta.filter=
function(a){var b=[],f,l,g;"function"!==typeof a&&(a=G(a));for(var e=0,h=this.length;e<h;e++){b.push(f=[]);l=this[e];for(var k=0,n=l.length;k<n;k++)(g=l[k])&&a.call(g,g.__data__,k,e)&&f.push(g)}return Qb(b,this.id)};ta.tween=function(a,b){var f=this.id;return 2>arguments.length?this.node().__transition__[f].tween.get(a):F(this,null==b?function(b){b.__transition__[f].tween.remove(a)}:function(l){l.__transition__[f].tween.set(a,b)})};ta.attr=function(a,b){function f(){this.removeAttribute(k)}function l(){this.removeAttributeNS(k.space,
k.local)}function g(a){return null==a?f:(a+="",function(){var c=this.getAttribute(k),b;return c!==a&&(b=h(c,a),function(a){this.setAttribute(k,b(a))})})}function e(a){return null==a?l:(a+="",function(){var c=this.getAttributeNS(k.space,k.local),b;return c!==a&&(b=h(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var h="transform"==a?ff:nb,k=v.ns.qualify(a);return Gd(this,"attr."+a,b,k.local?e:g)};ta.attrTween=function(a,
b){function f(a,c){var f=b.call(this,a,c,this.getAttribute(g));return f&&function(a){this.setAttribute(g,f(a))}}function l(a,c){var f=b.call(this,a,c,this.getAttributeNS(g.space,g.local));return f&&function(a){this.setAttributeNS(g.space,g.local,f(a))}}var g=v.ns.qualify(a);return this.tween("attr."+a,g.local?l:f)};ta.style=function(a,b,f){function l(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!==typeof a){2>g&&(b="");for(f in a)this.style(f,a[f],b);return this}f=""}return Gd(this,
"style."+a,b,function(b){return null==b?l:(b+="",function(){var l=xa.getComputedStyle(this,null).getPropertyValue(a),g;return l!==b&&(g=nb(l,b),function(b){this.style.setProperty(a,g(b),f)})})})};ta.styleTween=function(a,b,f){3>arguments.length&&(f="");return this.tween("style."+a,function(l,g){var e=b.call(this,l,g,xa.getComputedStyle(this,null).getPropertyValue(a));return e&&function(b){this.style.setProperty(a,e(b),f)}})};ta.text=function(a){return Gd(this,"text",a,Nh)};ta.remove=function(){return this.each("end.transition",
function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};ta.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=v.ease.apply(v,arguments));return F(this,function(f){f.__transition__[b].ease=a})};ta.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:F(this,"function"===typeof a?function(f,l,g){f.__transition__[b].delay=+a.call(f,f.__data__,l,g)}:(a=+a,function(f){f.__transition__[b].delay=
a}))};ta.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:F(this,"function"===typeof a?function(f,l,g){f.__transition__[b].duration=Math.max(1,a.call(f,f.__data__,l,g))}:(a=Math.max(1,a),function(f){f.__transition__[b].duration=a}))};ta.each=function(a,b){var f=this.id;if(2>arguments.length){var l=xc,g=qb;qb=f;F(this,function(b,l,g){xc=b.__transition__[f];a.call(b,b.__data__,l,g)});xc=l;qb=g}else F(this,function(l){l=l.__transition__[f];(l.event||
(l.event=v.dispatch("start","end"))).on(a,b)});return this};ta.transition=function(){for(var a=this.id,b=++Tf,f=[],l,g,e,h,k=0,n=this.length;k<n;k++){f.push(l=[]);g=this[k];for(var r=0,s=g.length;r<s;r++){if(e=g[r])h=Object.create(e.__transition__[a]),h.delay+=h.duration,uc(e,r,b,h);l.push(e)}}return Qb(f,b)};v.svg.axis=function(){function a(c){c.each(function(){var a=v.select(this),c=this.__chart__||b,r=this.__chart__=b.copy(),s=null==k?r.ticks?r.ticks.apply(r,h):r.domain():k,t=null==n?r.tickFormat?
r.tickFormat.apply(r,h):ua:n,y=a.selectAll(".tick").data(s,r),s=y.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),J=v.transition(y.exit()).style("opacity",1E-6).remove(),x=v.transition(y.order()).style("opacity",1),F,C=pc(r),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),v.transition(a));s.append("line");s.append("text");var E=s.select("line"),G=x.select("line"),t=y.select("text").text(t),y=s.select("text"),L=x.select("text");switch(f){case "bottom":F=
Nf;E.attr("y2",l);y.attr("y",Math.max(l,0)+e);G.attr("x2",0).attr("y2",l);L.attr("x",0).attr("y",Math.max(l,0)+e);t.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+g+"V0H"+C[1]+"V"+g);break;case "top":F=Nf;E.attr("y2",-l);y.attr("y",-(Math.max(l,0)+e));G.attr("x2",0).attr("y2",-l);L.attr("x",0).attr("y",-(Math.max(l,0)+e));t.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+-g+"V0H"+C[1]+"V"+-g);break;case "left":F=Of;E.attr("x2",-l);y.attr("x",-(Math.max(l,
0)+e));G.attr("x2",-l).attr("y2",0);L.attr("x",-(Math.max(l,0)+e)).attr("y",0);t.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-g+","+C[0]+"H0V"+C[1]+"H"+-g);break;case "right":F=Of,E.attr("x2",l),y.attr("x",Math.max(l,0)+e),G.attr("x2",l).attr("y2",0),L.attr("x",Math.max(l,0)+e).attr("y",0),t.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+g+","+C[0]+"H0V"+C[1]+"H"+g)}if(r.rangeBand)var u=r,V=u.rangeBand()/2,c=r=function(a){return u(a)+V};else c.rangeBand?c=r:J.call(F,
r);s.call(F,c);x.call(F,r)})}var b=v.scale.linear(),f=fg,l=6,g=6,e=3,h=[10],k=null,n;a.scale=function(f){if(!arguments.length)return b;b=f;return a};a.orient=function(b){if(!arguments.length)return f;f=b in li?b+"":fg;return a};a.ticks=function(){if(!arguments.length)return h;h=arguments;return a};a.tickValues=function(b){if(!arguments.length)return k;k=b;return a};a.tickFormat=function(b){if(!arguments.length)return n;n=b;return a};a.tickSize=function(b){var f=arguments.length;if(!f)return l;l=+b;
g=+arguments[f-1];return a};a.innerTickSize=function(b){if(!arguments.length)return l;l=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return g;g=+b;return a};a.tickPadding=function(b){if(!arguments.length)return e;e=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var fg="bottom",li={top:1,right:1,bottom:1,left:1};v.svg.brush=function(){function a(e){e.each(function(){var e=v.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),m=e.selectAll(".background").data([0]);m.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(x,ua);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return mi[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",a.empty()?"none":null);e=v.transition(e);m=v.transition(m);h&&(n=pc(h),m.attr("x",n[0]).attr("width",n[1]-n[0]),f(e));k&&(n=pc(k),m.attr("y",n[0]).attr("height",n[1]-n[0]),l(e));b(e)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)]+","+r[+/^s/.test(a)]+")"})}function f(a){a.select(".extent").attr("x",
n[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function l(a){a.select(".extent").attr("y",r[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",r[1]-r[0])}function g(){function g(){var a=v.mouse(C),c=!1;Q&&(a[0]+=Q[0],a[1]+=Q[1]);U||(v.event.altKey?(z||(z=[(n[0]+n[1])/2,(r[0]+r[1])/2]),A[0]=n[+(a[0]<z[0])],A[1]=r[+(a[1]<z[1])]):z=null);V&&x(a,h,0)&&(f(L),c=!0);B&&x(a,k,1)&&(l(L),c=!0);c&&(b(L),G({type:"brush",mode:U?"move":"resize"}))}function x(a,c,b){var f=pc(c);c=f[0];
var l=f[1],f=A[b],g=b?r:n,e=g[1]-g[0];U&&(c-=f,l-=e+f);a=(b?J:y)?Math.max(c,Math.min(l,a[b])):a[b];U?c=(a+=f)+e:(z&&(f=Math.max(c,Math.min(l,2*z[b]-a))),f<a?(c=a,a=f):c=f);if(g[0]!=a||g[1]!=c)return b?t=null:s=null,g[0]=a,g[1]=c,!0}function F(){g();L.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);v.select("body").style("cursor",null);O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);K();G({type:"brushend"})}var C=this,E=v.select(v.event.target),G=e.of(C,arguments),L=v.select(C),u=E.datum(),V=!/^(n|s)$/.test(u)&&h,B=!/^(e|w)$/.test(u)&&k,U=E.classed("extent"),K=ga(),z,A=v.mouse(C),Q,O=v.select(xa).on("keydown.brush",function(){32==v.event.keyCode&&(U||(z=null,A[0]-=n[1],A[1]-=r[1],U=2),M())}).on("keyup.brush",function(){32==v.event.keyCode&&2==U&&(A[0]+=n[1],A[1]+=r[1],U=0,M())});if(v.event.changedTouches)O.on("touchmove.brush",g).on("touchend.brush",
F);else O.on("mousemove.brush",g).on("mouseup.brush",F);L.interrupt().selectAll("*").interrupt();if(U)A[0]=n[0]-A[0],A[1]=r[0]-A[1];else if(u){var N=+/w$/.test(u),u=+/^n/.test(u);Q=[n[1-N]-A[0],r[1-u]-A[1]];A[0]=n[N];A[1]=r[u]}else v.event.altKey&&(z=A.slice());L.style("pointer-events","none").selectAll(".resize").style("display",null);v.select("body").style("cursor",E.style("cursor"));G({type:"brushstart"});g()}var e=E(a,"brushstart","brush","brushend"),h=null,k=null,n=[0,0],r=[0,0],s,t,y=!0,J=!0,
x=Nd[0];a.event=function(a){a.each(function(){var a=e.of(this,arguments),c={x:n,y:r,i:s,j:t},b=this.__chart__||c;this.__chart__=c;qb?v.select(this).transition().each("start.brush",function(){s=b.i;t=b.j;n=b.x;r=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=oc(n,c.x),f=oc(r,c.y);s=t=null;return function(l){n=c.x=b(l);r=c.y=f(l);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=c.i;t=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return h;h=b;x=Nd[!h<<1|!k];return a};a.y=function(b){if(!arguments.length)return k;k=b;x=Nd[!h<<1|!k];return a};a.clamp=function(b){if(!arguments.length)return h&&k?[y,J]:h?y:k?J:null;h&&k?(y=!!b[0],J=!!b[1]):h?y=!!b:k&&(J=!!b);return a};a.extent=function(b){var f,l,g,e,m;if(!arguments.length)return h&&(s?(f=s[0],l=s[1]):(f=n[0],l=n[1],h.invert&&(f=h.invert(f),l=h.invert(l)),l<f&&(m=f,f=l,l=m))),k&&(t?(g=
t[0],e=t[1]):(g=r[0],e=r[1],k.invert&&(g=k.invert(g),e=k.invert(e)),e<g&&(m=g,g=e,e=m))),h&&k?[[f,g],[l,e]]:h?[f,l]:k&&[g,e];h&&(f=b[0],l=b[1],k&&(f=f[0],l=l[0]),s=[f,l],h.invert&&(f=h(f),l=h(l)),l<f&&(m=f,f=l,l=m),f!=n[0]||l!=n[1])&&(n=[f,l]);k&&(g=b[0],e=b[1],h&&(g=g[1],e=e[1]),t=[g,e],k.invert&&(g=k(g),e=k(e)),e<g&&(m=g,g=e,e=m),g!=r[0]||e!=r[1])&&(r=[g,e]);return a};a.clear=function(){a.empty()||(n=[0,0],r=[0,0],s=t=null);return a};a.empty=function(){return!!h&&n[0]==n[1]||!!k&&r[0]==r[1]};return v.rebind(a,
e,"on")};var mi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Od=Z.format=Vf.timeFormat,gg=Od.utc,hg=gg("%Y-%m-%dT%H:%M:%S.%LZ");Od.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Hd:hg;Hd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Hd.toString=hg.toString;Z.second=ib(function(a){return new wa(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});Z.seconds=Z.second.range;Z.seconds.utc=Z.second.utc.range;Z.minute=ib(function(a){return new wa(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});Z.minutes=Z.minute.range;Z.minutes.utc=Z.minute.utc.range;Z.hour=ib(function(a){var b=a.getTimezoneOffset()/60;return new wa(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},
function(a){return a.getHours()});Z.hours=Z.hour.range;Z.hours.utc=Z.hour.utc.range;Z.month=ib(function(a){a=Z.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});Z.months=Z.month.range;Z.months.utc=Z.month.utc.range;var vc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Pd=[[Z.second,1],[Z.second,5],[Z.second,15],[Z.second,30],[Z.minute,1],[Z.minute,5],[Z.minute,15],[Z.minute,30],[Z.hour,1],
[Z.hour,3],[Z.hour,6],[Z.hour,12],[Z.day,1],[Z.day,2],[Z.week,1],[Z.month,1],[Z.month,3],[Z.year,1]],ni=Od.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",ub]]),Oh={range:function(a,b,f){return v.range(Math.ceil(a/f)*
f,+b,f).map(pb)},floor:ua,ceil:ua};Pd.year=Z.year;Z.scale=function(){return Id(v.scale.linear(),Pd,ni)};var ig=Pd.map(function(a){return[a[0].utc,a[1]]}),oi=gg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],
["%Y",ub]]);ig.year=Z.year.utc;Z.scale.utc=function(){return Id(v.scale.linear(),ig,oi)};v.text=Xc(function(a){return a.responseText});v.json=function(a,b){return Vb(a,"application/json",Ph,b)};v.html=function(a,b){return Vb(a,"text/html",Qh,b)};v.xml=Xc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(v):"object"===typeof module&&module.exports?module.exports=v:this.d3=v}();
(function(){function I(a,b){return(new Date(b,a+1,0)).getDate()}var u=window.nv||{};u.version="1.1.15b";u.dev=!0;window.nv=u;u.tooltip=u.tooltip||{};u.utils=u.utils||{};u.models=u.models||{};u.charts={};u.graphs=[];u.logs={};u.dispatch=d3.dispatch("render_start","render_end");u.dev&&(u.dispatch.on("render_start",function(a){u.logs.startTime=+new Date}),u.dispatch.on("render_end",function(a){u.logs.endTime=+new Date;u.logs.totalTime=u.logs.endTime-u.logs.startTime;u.log("total",u.logs.totalTime)}));
u.log=function(){u.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):u.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};u.render=function(a){a=a||1;u.render.active=!0;u.dispatch.render_start();setTimeout(function(){for(var b,k,r=0;r<a&&(k=u.render.queue[r]);r++)b=k.generate(),typeof k.callback==typeof Function&&k.callback(b),u.graphs.push(b);u.render.queue.splice(0,
r);u.render.queue.length?setTimeout(arguments.callee,0):(u.dispatch.render_end(),u.render.active=!1)},0)};u.render.active=!1;u.render.queue=[];u.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});u.render.queue.push(a);u.render.active||u.render()};u.identity=function(a){return a};u.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,k){return function(r,n,e){var h=
a(r),t=[];h<r&&b(h);if(1<e)for(;h<n;)r=new Date(+h),0===k(r)%e&&t.push(r),b(h);else for(;h<n;)t.push(new Date(+h)),b(h);return t}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(I(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});u.interactiveGuideline=function(){function a(A){A.each(function(A){function D(){var k=d3.mouse(this),r=k[0],k=k[1],s=!0,t=!1;H&&(r=d3.event.offsetX,k=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(t=!0));s&&(r-=n.left,k-=n.top);0>r||0>k||r>M||k>S||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||t?H&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(h.elementMouseout({mouseX:r,mouseY:k}),a.renderGuideLine(null)):(s=e.invert(r),h.elementMousemove({mouseX:r,mouseY:k,pointXValue:s}),"dblclick"===d3.event.type&&h.elementDblclick({mouseX:r,mouseY:k,pointXValue:s}))}var B=d3.select(this),
M=k||960,S=r||400,E=B.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([A]);E.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");s&&(s.on("mousemove",D,!0).on("mouseout",D,!0).on("dblclick",D),a.renderGuideLine=function(a){t&&(a=E.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[u.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",S).attr("y2",0),a.exit().remove())})})}var b=u.models.tooltip(),k=null,r=null,n={left:0,top:0},e=d3.scale.linear();d3.scale.linear();var h=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),t=!0,s=null,H=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=h;a.tooltip=b;a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;n.left="undefined"!=typeof b.left?b.left:n.left;return a};a.width=function(b){if(!arguments.length)return k;
k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.showGuideLine=function(b){if(!arguments.length)return t;t=b;return a};a.svgContainer=function(b){if(!arguments.length)return s;s=b;return a};return a};u.interactiveBisect=function(a,b,k){if(!a instanceof Array)return null;"function"!==typeof k&&(k=function(a,b){return a.x});var r=d3.bisector(k).left,r=d3.max([0,r(a,b)-1]),n=k(a[r],r);"undefined"===typeof n&&
(n=r);if(n===b)return r;var e=d3.min([r+1,a.length-1]);a=k(a[e],e);"undefined"===typeof a&&(a=e);return Math.abs(a-b)>=Math.abs(n-b)?r:e};u.nearestValueIndex=function(a,b,k){var r=Infinity,n=null;a.forEach(function(a,h){var t=Math.abs(b-a);t<=r&&t<k&&(r=t,n=h)});return n};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(z){var b;b=k&&k.series&&0<k.series.length?!0:!1;if(b){if(s){b=d3.select(s);"svg"!==b.node().tagName&&(b=b.select("svg"));var B=b.node()?b.attr("viewBox"):
null;B&&(B=B.split(" "),b=parseInt(b.style("width"))/B[2],A.left*=b,A.top*=b)}b=A.left;var B=null!=h?h:A.top,M;M=S(k);var K;K=s?d3.select(s):d3.select("body");var Q=K.select(".nvtooltip");null===Q.node()&&(Q=K.append("div").attr("class","nvtooltip "+(t?t:"xy-tooltip")).attr("id",D));Q.node().innerHTML=M;Q.style("top",0).style("left",0).style("opacity",0);Q.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);Q.classed("nv-pointer-events-none",!0);H=M=Q.node();if(s){(Q=s.getElementsByTagName("svg")[0])?
Q.getBoundingClientRect():s.getBoundingClientRect();var N=0;K=0;if(Q){Q=Q.getBoundingClientRect();N=s.getBoundingClientRect();K=Q.top;if(0>K){var R=s.getBoundingClientRect();K=Math.abs(K)>R.height?0:K}K=Math.abs(K-N.top);N=Math.abs(Q.left-N.left)}b+=s.offsetLeft+N-2*s.scrollLeft;B+=s.offsetTop+K-2*s.scrollTop}e&&0<e&&(B=Math.floor(B/e)*e);u.tooltip.calcTooltipPosition([b,B],r,n,M);return a}}}var b=null,k=null,r="w",n=50,e=25,h=null,t=null,s=null,H=null,A={left:null,top:null},z=!0,D="nvtooltip-"+Math.floor(1E5*
Math.random()),B=function(a,b){return a},M=function(a){return a},S=function(a){if(null!=b)return b;if(null==a)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(M(a.value));var h=e.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
h.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});h.append("td").classed("key",!0).html(function(a){return a.key});h.append("td").classed("value",!0).html(function(a,b){return B(a.value,b)});h.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});e=e.node().outerHTML;void 0!==a.footer&&(e+="<div class='footer'>"+
a.footer+"</div>");return e};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(e){if(!arguments.length)return b;b=e;return a};a.tooltipElem=function(){return H};a.contentGenerator=function(b){if(!arguments.length)return S;"function"===typeof b&&(S=b);return a};a.data=function(b){if(!arguments.length)return k;k=b;return a};a.gravity=function(b){if(!arguments.length)return r;r=b;return a};a.distance=function(b){if(!arguments.length)return n;n=b;return a};a.snapDistance=function(b){if(!arguments.length)return e;
e=b;return a};a.classes=function(b){if(!arguments.length)return t;t=b;return a};a.chartContainer=function(b){if(!arguments.length)return s;s=b;return a};a.position=function(b){if(!arguments.length)return A;A.left="undefined"!==typeof b.left?b.left:A.left;A.top="undefined"!==typeof b.top?b.top:A.top;return a};a.fixedTop=function(b){if(!arguments.length)return h;h=b;return a};a.enabled=function(b){if(!arguments.length)return z;z=b;return a};a.valueFormatter=function(b){if(!arguments.length)return B;
"function"===typeof b&&(B=b);return a};a.headerFormatter=function(b){if(!arguments.length)return M;"function"===typeof b&&(M=b);return a};a.id=function(){return D};return a};u.tooltip.show=function(a,b,k,r,n,e){var h=document.createElement("div");h.className="nvtooltip "+(e?e:"xy-tooltip");e=n;if(!n||n.tagName.match(/g|svg/i))e=document.getElementsByTagName("body")[0];h.style.left=0;h.style.top=0;h.style.opacity=0;h.innerHTML=b;e.appendChild(h);n&&(a[0]-=n.scrollLeft,a[1]-=n.scrollTop);u.tooltip.calcTooltipPosition(a,
k,r,h)};u.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};u.tooltip.findTotalOffsetTop=function(a,b){var k=b;do isNaN(a.offsetTop)||(k+=a.offsetTop);while(a=a.offsetParent);return k};u.tooltip.findTotalOffsetLeft=function(a,b){var k=b;do isNaN(a.offsetLeft)||(k+=a.offsetLeft);while(a=a.offsetParent);return k};u.tooltip.calcTooltipPosition=function(a,b,k,r){var n=parseInt(r.offsetHeight),e=parseInt(r.offsetWidth),h=u.utils.windowSize().width,
t=u.utils.windowSize().height,s=window.pageYOffset,H=window.pageXOffset,A,z,t=window.innerWidth>=document.body.scrollWidth?t:t-16,h=window.innerHeight>=document.body.scrollHeight?h:h-16;k=k||20;var D=function(a){return u.tooltip.findTotalOffsetTop(a,z)},B=function(a){return u.tooltip.findTotalOffsetLeft(a,A)};switch(b||"s"){case "e":A=a[0]-e-k;z=a[1]-n/2;b=B(r);D=D(r);b<H&&(A=a[0]+k>H?a[0]+k:H-b+A);D<s&&(z=s-D+z);D+n>s+t&&(z=s+t-D+z-n);break;case "w":A=a[0]+k;z=a[1]-n/2;b=B(r);D=D(r);b+e>h&&(A=a[0]-
e-k);D<s&&(z=s+5);D+n>s+t&&(z=s+t-D+z-n);break;case "n":A=a[0]-e/2-5;z=a[1]+k;b=B(r);D=D(r);b<H&&(A=H+5);b+e>h&&(A=A-e/2+5);D+n>s+t&&(z=s+t-D+z-n);break;case "s":A=a[0]-e/2;z=a[1]-n-k;b=B(r);D=D(r);b<H&&(A=H+5);b+e>h&&(A=A-e/2+5);s>D&&(z=s);break;case "none":A=a[0],z=a[1]-k,b=B(r),D=D(r)}r.style.left=A+"px";r.style.top=z+"px";r.style.opacity=1;r.style.position="absolute";return r};u.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();u.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};u.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(k){"function"==typeof b&&b(k);a(k)}}};u.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,k){return b.color||a[k%a.length]}:a:u.utils.defaultColor()};u.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
k){return b.color||a[k%a.length]}};u.utils.customTheme=function(a,b,k){b=b||function(a){return a.key};k=k||d3.scale.category20().range();var r=k.length;return function(n,e){var h=b(n);r||(r=k.length);return"undefined"!==typeof a[h]?"function"===typeof a[h]?a[h]():a[h]:k[--r]}};u.utils.pjax=function(a,b){function k(k){d3.html(k,function(k){var e=d3.select(b).node();e.parentNode.replaceChild(d3.select(k).select(b).node(),e);u.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);k(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&k(d3.event.state)})};u.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};u.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};u.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,k){if("function"===
typeof this[a])this[a](k)}.bind(this));return this};u.models.axis=function(){function a(n){n.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var n=a.select("g");null!==B?b.ticks(B):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(e.range()[1]-e.range()[0])/100);n.transition().call(b);S=S||b.scale();var u=b.tickFormat();null==u&&(u=S.tickFormat());var E=n.selectAll("text.nv-axislabel").data([h||
null]);E.exit().remove();switch(b.orient()){case "top":E.enter().append("text").attr("class","nv-axislabel");var N=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);E.attr("text-anchor","middle").attr("y",0).attr("x",N/2);t&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text"),N.exit().remove(),N.attr("transform",function(a,b){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case "bottom":var R=36,x=30,C=n.selectAll("g").select("text");H%360&&(C.each(function(a,b){var e=this.getBBox().width;e>x&&(x=e)}),N=Math.abs(Math.sin(H*Math.PI/180)),R=(N?N*x:x)+30,C.attr("transform",function(a,b,e){return"rotate("+H+" 0,0)"}).style("text-anchor",0<H%360?"start":"end"));E.enter().append("text").attr("class",
"nv-axislabel");N=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);E.attr("text-anchor","middle").attr("y",R).attr("x",N/2);t&&(N=a.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),N.enter().append("g").attr("class","nv-axisMaxMin").append("text"),N.exit().remove(),N.attr("transform",function(a,b){return"translate("+(e(a)+(D?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,e){return"rotate("+H+" 0,0)"}).style("text-anchor",H?0<H%360?"start":"end":"middle").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate("+(e(a)+(D?e.rangeBand()/2:0))+",0)"}));z&&C.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":E.enter().append("text").attr("class","nv-axislabel");E.style("text-anchor",A?"middle":"begin").attr("transform",A?"rotate(90)":"").attr("y",
A?-Math.max(k.right,r)+12:-10).attr("x",A?e.range()[0]/2:b.tickPadding());t&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),N.exit().remove(),N.attr("transform",function(a,b){return"translate(0,"+e(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,
b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case "left":E.enter().append("text").attr("class","nv-axislabel"),E.style("text-anchor",A?"middle":"end").attr("transform",A?"rotate(-90)":"").attr("y",A?-Math.max(k.left,r)+M:-10).attr("x",A?-e.range()[0]/2:-b.tickPadding()),t&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),N.exit().remove(),N.attr("transform",function(a,b){return"translate(0,"+
S(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var e=u(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}E.text(function(a){return a});!t||"left"!==b.orient()&&"right"!==b.orient()||(n.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(t&&("top"===b.orient()||"bottom"===b.orient())){var L=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?L.push(e(a)-this.getBBox().width-4):L.push(e(a)+this.getBBox().width+4)}catch(h){b?L.push(e(a)-4):L.push(e(a)+4)}});n.selectAll("g").each(function(a,b){if(e(a)<L[0]||
e(a)>L[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}s&&n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);S=e.copy()});return a}var b=d3.svg.axis(),k={top:0,right:0,bottom:0,left:0},r=75,n=60,e=d3.scale.linear(),h=null,t=!0,s=!0,H=0,A=!0,z=!1,D=!1,B=null,M=12;b.scale(e).orient("bottom").tickFormat(function(a){return a});var S;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,e,"domain","range","rangeBand","rangeBands");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.ticks=function(b){if(!arguments.length)return B;
B=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.axisLabel=function(b){if(!arguments.length)return h;h=b;return a};a.showMaxMin=function(b){if(!arguments.length)return t;t=b;return a};a.highlightZero=function(b){if(!arguments.length)return s;s=b;return a};a.scale=function(h){if(!arguments.length)return e;e=h;b.scale(e);D="function"===typeof e.rangeBands;d3.rebind(a,e,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return A;
A=b;return a};a.rotateLabels=function(b){if(!arguments.length)return H;H=b;return a};a.staggerLabels=function(b){if(!arguments.length)return z;z=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return M;M=b;return a};return a};u.models.historicalBar=function(){function a(Q){Q.each(function(a){var Q=k-b.left-b.right,x=r-b.top-b.bottom,C=d3.select(this);e.domain(M||d3.extent(a[0].values.map(t).concat(H)));z?e.range(E||[.5*Q/a[0].values.length,Q*(a[0].values.length-.5)/a[0].values.length]):
e.range(E||[0,Q]);h.domain(S||d3.extent(a[0].values.map(s).concat(A))).range(O||[x,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var L=C.selectAll("g.nv-wrap.nv-historicalBar-"+n).data([a[0].values]),y=L.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
n),V=y.append("defs"),y=y.append("g"),G=L.select("g");y.append("g").attr("class","nv-bars");L.attr("transform","translate("+b.left+","+b.top+")");C.on("click",function(a,b){P.chartClick({data:a,index:b,pos:d3.event,id:n})});V.append("clipPath").attr("id","nv-chart-clip-path-"+n).append("rect");L.select("#nv-chart-clip-path-"+n+" rect").attr("width",Q).attr("height",x);G.attr("clip-path",D?"url(#nv-chart-clip-path-"+n+")":"");x=L.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return t(a,b)});x.exit().remove();x.enter().append("rect").attr("x",0).attr("y",function(a,b){return u.utils.NaNtoZero(h(Math.max(0,s(a,b))))}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.abs(h(s(a,b))-h(0)))}).attr("transform",function(b,h){return"translate("+(e(t(b,h))-Q/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,k){K&&(d3.select(this).classed("hover",!0),P.elementMouseover({point:b,series:a[0],pos:[e(t(b,k)),h(s(b,k))],pointIndex:k,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,e){K&&(d3.select(this).classed("hover",!1),P.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){K&&(P.elementClick({value:s(a,b),data:a,index:b,pos:[e(t(a,b)),h(s(a,b))],e:d3.event,id:n}),d3.event.stopPropagation())}).on("dblclick",function(a,b){K&&(P.elementDblClick({value:s(a,b),data:a,index:b,pos:[e(t(a,b)),h(s(a,b))],e:d3.event,id:n}),d3.event.stopPropagation())});x.attr("fill",function(a,b){return B(a,b)}).attr("class",function(a,
b,e){return(0>s(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+b}).transition().attr("transform",function(b,h){return"translate("+(e(t(b,h))-Q/a[0].values.length*.45)+",0)"}).attr("width",Q/a[0].values.length*.9);x.transition().attr("y",function(a,b){var e=0>s(a,b)?h(0):1>h(0)-h(s(a,b))?h(0)-1:h(s(a,b));return u.utils.NaNtoZero(e)}).attr("height",function(a,b){return u.utils.NaNtoZero(Math.max(Math.abs(h(s(a,b))-h(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,
n=Math.floor(1E4*Math.random()),e=d3.scale.linear(),h=d3.scale.linear(),t=function(a){return a.x},s=function(a){return a.y},H=[],A=[0],z=!1,D=!0,B=u.utils.defaultColor(),M,S,E,O,P=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),K=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+n).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+n).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=P;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return s;s=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};
a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return M;M=b;return a};a.yDomain=function(b){if(!arguments.length)return S;S=b;return a};a.xRange=function(b){if(!arguments.length)return E;E=b;return a};a.yRange=function(b){if(!arguments.length)return O;O=b;return a};a.forceX=function(b){if(!arguments.length)return H;
H=b;return a};a.forceY=function(b){if(!arguments.length)return A;A=b;return a};a.padData=function(b){if(!arguments.length)return z;z=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return n;n=b;return a};a.interactive=function(b){if(!arguments.length)return K;K=!1;return a};return a};u.models.bullet=function(){function a(k){k.each(function(a,k){var u=
s-b.left-b.right,B=H-b.top-b.bottom,A=d3.select(this),K=n.call(this,a,k).slice().sort(d3.descending),Q=e.call(this,a,k).slice().sort(d3.descending),N=h.call(this,a,k).slice().sort(d3.descending),R=(a.rangeLabels?a.rangeLabels:[]).slice(),x=(a.markerLabels?a.markerLabels:[]).slice(),C=(a.measureLabels?a.measureLabels:[]).slice(),L=d3.scale.linear().domain(d3.extent(d3.merge([t,K]))).range(r?[u,0]:[0,u]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(L.range());this.__chart__=L;var u=
d3.min(K),y=d3.max(K),K=K[1],A=A.selectAll("g.nv-wrap.nv-bullet").data([a]),V=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),G=A.select("g");V.append("rect").attr("class","nv-range nv-rangeMax");V.append("rect").attr("class","nv-range nv-rangeAvg");V.append("rect").attr("class","nv-range nv-rangeMin");V.append("rect").attr("class","nv-measure");V.append("path").attr("class","nv-markerTriangle");A.attr("transform","translate("+b.left+","+b.top+")");var V=function(a){return Math.abs(L(a)-
L(0))},U=function(a){return 0>a?L(a):L(0)};G.select("rect.nv-rangeMax").attr("height",B).attr("width",V(0<y?y:u)).attr("x",U(0<y?y:u)).datum(0<y?y:u);G.select("rect.nv-rangeAvg").attr("height",B).attr("width",V(K)).attr("x",U(K)).datum(K);G.select("rect.nv-rangeMin").attr("height",B).attr("width",V(y)).attr("x",U(y)).attr("width",V(0<y?u:y)).attr("x",U(0<y?u:y)).datum(0<y?u:y);G.select("rect.nv-measure").style("fill",z).attr("height",B/3).attr("y",B/3).attr("width",0>N?L(0)-L(N[0]):L(N[0])-L(0)).attr("x",
U(N)).on("mouseover",function(){D.elementMouseover({value:N[0],label:C[0]||"Current",pos:[L(N[0]),B/2]})}).on("mouseout",function(){D.elementMouseout({value:N[0],label:C[0]||"Current"})});u=B/6;if(Q[0])G.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+L(Q[0])+","+B/2+")"}).attr("d","M0,"+u+"L"+u+","+-u+" "+-u+","+-u+"Z").on("mouseover",function(){D.elementMouseover({value:Q[0],label:x[0]||"Previous",pos:[L(Q[0]),B/2]})}).on("mouseout",function(){D.elementMouseout({value:Q[0],
label:x[0]||"Previous"})});else G.selectAll("path.nv-markerTriangle").remove();A.selectAll(".nv-range").on("mouseover",function(a,b){D.elementMouseover({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[L(a),B/2]})}).on("mouseout",function(a,b){D.elementMouseout({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},k="left",r=!1,n=function(a){return a.ranges},e=function(a){return a.markers},h=function(a){return a.measures},t=[0],s=
380,H=30,A=null,z=u.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=D;a.options=u.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return k;k=b;r="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return n;n=b;return a};a.markers=function(b){if(!arguments.length)return e;e=b;return a};a.measures=function(b){if(!arguments.length)return h;h=b;return a};a.forceX=function(b){if(!arguments.length)return t;t=b;return a};
a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;
z=u.utils.getColor(b);return a};return a};u.models.bulletChart=function(){function a(k){k.each(function(E,O){var P=d3.select(this),K=(s||parseInt(P.style("width"))||960)-n.left-n.right,Q=H-n.top-n.bottom,N=this;a.update=function(){a(k)};a.container=this;if(E&&e.call(this,E,O))P.selectAll(".nv-noData").remove();else return P=P.selectAll(".nv-noData").data([B]),P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",n.left+K/2).attr("y",18+
n.top+Q/2).text(function(a){return a}),a;var R=e.call(this,E,O).slice().sort(d3.descending),x=h.call(this,E,O).slice().sort(d3.descending),C=t.call(this,E,O).slice().sort(d3.descending),L=P.selectAll("g.nv-wrap.nv-bulletChart").data([E]),y=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),P=L.select("g");y.append("g").attr("class","nv-bulletWrap");y.append("g").attr("class","nv-titles");L.attr("transform","translate("+n.left+","+n.top+")");var V=d3.scale.linear().domain([0,
Math.max(R[0],x[0],C[0])]).range(r?[K,0]:[0,K]),G=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(V.range());this.__chart__=V;R=y.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(H-n.top-n.bottom)/2+")");R.append("text").attr("class","nv-title").text(function(a){return a.title});R.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(K).height(Q);R=P.select(".nv-bulletWrap");d3.transition(R).call(b);
var U=A||V.tickFormat(K/100),K=P.selectAll("g.nv-tick").data(V.ticks(K/50),function(a){return this.textContent||U(a)}),P=K.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+G(a)+",0)"}).style("opacity",1E-6);P.append("line").attr("y1",Q).attr("y2",7*Q/6);P.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*Q/6).text(U);P=d3.transition(K).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1);P.select("line").attr("y1",
Q).attr("y2",7*Q/6);P.select("text").attr("y",7*Q/6);d3.transition(K.exit()).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1E-6).remove();M.on("tooltipShow",function(b){b.key=E.title;if(z){var e=N.parentNode,h=b.pos[0]+(e.offsetLeft||0)+n.left,l=b.pos[1]+(e.offsetTop||0)+n.top,k=D(b.key,b.label,b.value,b,a);u.tooltip.show([h,l],k,0>b.value?"e":"w",null,e)}})});d3.timer.flush();return a}var b=u.models.bullet(),k="left",r=!1,n={top:5,right:40,bottom:20,left:120},e=function(a){return a.ranges},
h=function(a){return a.markers},t=function(a){return a.measures},s=null,H=55,A=null,z=!0,D=function(a,b,e,h,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},B="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){M.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){M.tooltipHide(a)});M.on("tooltipHide",function(){z&&u.tooltip.cleanup()});a.dispatch=M;a.bullet=b;d3.rebind(a,b,"color");a.options=u.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return k;k=b;r="right"==k||"bottom"==k;return a};a.ranges=function(b){if(!arguments.length)return e;e=b;return a};a.markers=function(b){if(!arguments.length)return h;h=b;return a};a.measures=function(b){if(!arguments.length)return t;t=b;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;
n.right="undefined"!=typeof b.right?b.right:n.right;n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom;n.left="undefined"!=typeof b.left?b.left:n.left;return a};a.tickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.tooltips=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipContent=function(b){if(!arguments.length)return D;D=b;return a};a.noData=function(b){if(!arguments.length)return B;B=b;return a};return a};u.models.cumulativeLineChart=function(){function a(l){l.each(function(l){function F(){ma.data([W]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var I=d3.select(this).classed("nv-chart-"+x,!0),ga=this,X=(A||parseInt(I.style("width"))||960)-s.left-s.right,fa=(z||parseInt(I.style("height"))||400)-s.top-s.bottom;a.update=function(){I.transition().duration(U).call(a)};a.container=this;C.disabled=l.map(function(a){return!!a.disabled});if(!L){var ha;L={};for(ha in C)L[ha]=C[ha]instanceof Array?C[ha].slice(0):C[ha]}ha=d3.behavior.drag().on("dragstart",function(b,
l){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){W.x=d3.event.x;W.i=Math.round(aa.invert(W.x));F()}).on("dragend",function(b,l){d3.select(a.container).style("cursor","auto");C.index=W.i;G.stateChange(C)});if(l&&l.length&&l.filter(function(a){return a.values.length}).length)I.selectAll(".nv-noData").remove();else return ha=I.selectAll(".nv-noData").data([y]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",
s.left+X/2).attr("y",s.top+fa/2).text(function(a){return a}),a;N=k.xScale();R=k.yScale();if(K)k.yDomain(null);else{var ba=l.filter(function(a){return!a.disabled}).map(function(a,b){var l=d3.extent(a.values,k.y());-.95>l[0]&&(l[0]=-.95);return[(l[0]-l[1])/(1+l[1]),(l[1]-l[0])/(1+l[0])]}),ba=[d3.min(ba,function(a){return a[0]}),d3.max(ba,function(a){return a[1]})];k.yDomain(ba)}aa.domain([0,l[0].values.length-1]).range([0,X]).clamp(!0);l=b(W.i,l);var Y=P?"none":"all",la=I.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),
ea=la.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ba=la.select("g");ea.append("g").attr("class","nv-interactive");ea.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ea.append("g").attr("class","nv-y nv-axis");ea.append("g").attr("class","nv-background");ea.append("g").attr("class","nv-linesWrap").style("pointer-events",Y);ea.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ea.append("g").attr("class","nv-legendWrap");
ea.append("g").attr("class","nv-controlsWrap");D&&(e.width(X),ba.select(".nv-legendWrap").datum(l).call(e),s.top!=e.height()&&(s.top=e.height(),fa=(z||parseInt(I.style("height"))||400)-s.top-s.bottom),ba.select(".nv-legendWrap").attr("transform","translate(0,"+-s.top+")"));O&&(Y=[{key:"Re-scale y-axis",disabled:!K}],h.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ba.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+-s.top+")").call(h));
la.attr("transform","translate("+s.left+","+s.top+")");S&&ba.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");Y=l.filter(function(a){return a.tempDisabled});la.select(".tempDisabled").remove();Y.length&&la.append("text").attr("class","tempDisabled").attr("x",X/2).attr("y","-.71em").style("text-anchor","end").text(Y.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");P&&(t.width(X).height(fa).margin({left:s.left,top:s.top}).svgContainer(I).xScale(N),
la.select(".nv-interactive").call(t));ea.select(".nv-background").append("rect");ba.select(".nv-background rect").attr("width",X).attr("height",fa);k.y(function(a){return a.display.y}).width(X).height(fa).color(l.map(function(a,b){return a.color||H(a,b)}).filter(function(a,b){return!l[b].disabled&&!l[b].tempDisabled}));la=ba.select(".nv-linesWrap").datum(l.filter(function(a){return!a.disabled&&!a.tempDisabled}));la.call(k);l.forEach(function(a,b){a.seriesIndex=b});ea=l.filter(function(a){return!a.disabled&&
!!V(a)});ea=ba.select(".nv-avgLinesWrap").selectAll("line").data(ea,function(a){return a.key});Y=function(a){a=R(V(a));return 0>a?0:a>fa?fa:a};ea.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return k.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",X).attr("y1",Y).attr("y2",Y);ea.style("stroke-opacity",function(a){a=R(V(a));return 0>a||a>fa?0:1}).attr("x1",0).attr("x2",X).attr("y1",Y).attr("y2",Y);ea.exit().remove();var ma=la.selectAll(".nv-indexLine").data([W]);
ma.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ha);ma.attr("transform",function(a){return"translate("+aa(a.i)+",0)"}).attr("height",fa);B&&(r.scale(N).ticks(Math.min(l[0].values.length,X/70)).tickSize(-fa,0),ba.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),d3.transition(ba.select(".nv-x.nv-axis")).call(r));M&&(n.scale(R).ticks(fa/36).tickSize(-X,0),d3.transition(ba.select(".nv-y.nv-axis")).call(n));
ba.select(".nv-background rect").on("click",function(){W.x=d3.mouse(this)[0];W.i=Math.round(aa.invert(W.x));C.index=W.i;G.stateChange(C);F()});k.dispatch.on("elementClick",function(a){W.i=a.pointIndex;W.x=aa(W.i);C.index=W.i;G.stateChange(C);F()});h.dispatch.on("legendClick",function(b,l){b.disabled=!b.disabled;K=!b.disabled;C.rescaleY=K;G.stateChange(C);a.update()});e.dispatch.on("stateChange",function(b){C.disabled=b.disabled;G.stateChange(C);a.update()});t.dispatch.on("elementMousemove",function(b){k.clearHighlights();
var e,h,y,x=[];l.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(l,n){h=u.interactiveBisect(l.values,b.pointXValue,a.x());k.highlightPoint(n,h,!0);var r=l.values[h];"undefined"!==typeof r&&("undefined"===typeof e&&(e=r),"undefined"===typeof y&&(y=a.xScale()(a.x()(r,h))),x.push({key:l.key,value:a.y()(r,h),color:H(l,l.seriesIndex)}))});if(2<x.length){var C=a.yScale().invert(b.mouseY),G=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),C=u.nearestValueIndex(x.map(function(a){return a.value}),
C,G);null!==C&&(x[C].highlight=!0)}C=r.tickFormat()(a.x()(e,h),h);t.tooltip.position({left:y+s.left,top:b.mouseY+s.top}).chartContainer(ga.parentNode).enabled(E).valueFormatter(function(a,b){return n.tickFormat()(a)}).data({value:C,series:x})();t.renderGuideLine(y)});t.dispatch.on("elementMouseout",function(a){G.tooltipHide();k.clearHighlights()});G.on("tooltipShow",function(b){if(E){var l=ga.parentNode,e=b.pos[0]+(l.offsetLeft||0),h=b.pos[1]+(l.offsetTop||0),s=r.tickFormat()(k.x()(b.point,b.pointIndex)),
t=n.tickFormat()(k.y()(b.point,b.pointIndex));b=Q(b.series.key,s,t,b,a);u.tooltip.show([e,h],b,null,null,l)}});G.on("changeState",function(b){"undefined"!==typeof b.disabled&&(l.forEach(function(a,l){a.disabled=b.disabled[l]}),C.disabled=b.disabled);"undefined"!==typeof b.index&&(W.i=b.index,W.x=aa(W.i),C.index=b.index,ma.data([W]));"undefined"!==typeof b.rescaleY&&(K=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,e){if(!b.values)return b;var h=b.values[a];if(null==h)return b;
var n=k.y()(h,a);if(-.95>n&&!F)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(k.y()(a,b)-n)/(1+n)};return a});return b})}var k=u.models.line(),r=u.models.axis(),n=u.models.axis(),e=u.models.legend(),h=u.models.legend(),t=u.interactiveGuideline(),s={top:30,right:30,bottom:50,left:60},H=u.utils.defaultColor(),A=null,z=null,D=!0,B=!0,M=!0,S=!1,E=!0,O=!0,P=!1,K=!0,Q=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},N,R,x=k.id(),C={index:0,
rescaleY:K},L=null,y="No Data Available.",V=function(a){return a.average},G=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),U=250,F=!1;r.orient("bottom").tickPadding(7);n.orient(S?"right":"left");h.updateState(!1);var aa=d3.scale.linear(),W={i:0,x:0};k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];G.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",function(a){G.tooltipHide(a)});G.on("tooltipHide",function(){E&&u.tooltip.cleanup()});
a.dispatch=G;a.lines=k;a.legend=e;a.xAxis=r;a.yAxis=n;a.interactiveLayer=t;d3.rebind(a,k,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return s;s.top="undefined"!=typeof b.top?b.top:s.top;s.right="undefined"!=typeof b.right?b.right:s.right;s.bottom="undefined"!=typeof b.bottom?b.bottom:s.bottom;s.left=
"undefined"!=typeof b.left?b.left:s.left;return a};a.width=function(b){if(!arguments.length)return A;A=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.color=function(b){if(!arguments.length)return H;H=u.utils.getColor(b);e.color(H);return a};a.rescaleY=function(b){if(!arguments.length)return K;K=b;return a};a.showControls=function(b){if(!arguments.length)return O;O=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return P;P=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return M;M=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;n.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return Q;Q=b;return a};a.state=function(b){if(!arguments.length)return C;
C=b;return a};a.defaultState=function(b){if(!arguments.length)return L;L=b;return a};a.noData=function(b){if(!arguments.length)return y;y=b;return a};a.average=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return F;F=b;return a};return a};u.models.discreteBar=function(){function a(n){n.each(function(a){var n=k-b.left-b.right,x=r-b.top-b.bottom,C=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var u=B&&M?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:s(a,b),y0:a.y0}})});e.domain(B||d3.merge(u).map(function(a){return a.x})).rangeBands(S||[0,n],.1);h.domain(M||d3.extent(d3.merge(u).map(function(a){return a.y}).concat(H)));z?h.range(E||[x-(0>h.domain()[0]?12:0),0<h.domain()[1]?12:0]):h.range(E||[x,0]);K=K||h.copy().range([h(0),h(0)]);n=C.selectAll("g.nv-wrap.nv-discretebar").data([a]);x=n.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");n.select("g");x.append("g").attr("class","nv-groups");n.attr("transform","translate("+b.left+","+b.top+")");n=n.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});n.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);n.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();n.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
n.transition().style("stroke-opacity",1).style("fill-opacity",.75);n=n.selectAll("g.nv-bar").data(function(a){return a.values});n.exit().remove();x=n.enter().append("g").attr("transform",function(a,b,k){return"translate("+(e(t(a,b))+.05*e.rangeBand())+", "+h(0)+")"}).on("mouseover",function(b,k){d3.select(this).classed("hover",!0);O.elementMouseover({value:s(b,k),point:b,series:a[b.series],pos:[e(t(b,k))+e.rangeBand()*(b.series+.5)/a.length,h(s(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,e){d3.select(this).classed("hover",!1);O.elementMouseout({value:s(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){O.elementClick({value:s(b,k),point:b,series:a[b.series],pos:[e(t(b,k))+e.rangeBand()*(b.series+.5)/a.length,h(s(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,k){O.elementDblClick({value:s(b,k),point:b,series:a[b.series],pos:[e(t(b,k))+e.rangeBand()*(b.series+
.5)/a.length,h(s(b,k))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});x.append("rect").attr("height",0).attr("width",.9*e.rangeBand()/a.length);z?(x.append("text").attr("text-anchor","middle"),n.select("text").text(function(a,b){return D(s(a,b))}).transition().attr("x",.9*e.rangeBand()/2).attr("y",function(a,b){return 0>s(a,b)?h(s(a,b))-h(0)+12:-4})):n.selectAll("text").remove();n.attr("class",function(a,b){return 0>s(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||A(a,b)}).style("stroke",function(a,b){return a.color||A(a,b)}).select("rect").attr("class",P).transition().attr("width",.9*e.rangeBand()/a.length);n.transition().attr("transform",function(a,b){var k=e(t(a,b))+.05*e.rangeBand(),n=0>s(a,b)?h(0):1>h(0)-h(s(a,b))?h(0)-1:h(s(a,b));return"translate("+k+", "+n+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(h(s(a,b))-h(M&&M[0]||0))||1)});e.copy();K=h.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},k=960,r=500,n=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),h=d3.scale.linear(),t=function(a){return a.x},s=function(a){return a.y},H=[0],A=u.utils.defaultColor(),z=!1,D=d3.format(",.2f"),B,M,S,E,O=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),P="discreteBar",K;a.dispatch=O;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return s;s=b;return a};a.margin=
function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;
return a};a.xDomain=function(b){if(!arguments.length)return B;B=b;return a};a.yDomain=function(b){if(!arguments.length)return M;M=b;return a};a.xRange=function(b){if(!arguments.length)return S;S=b;return a};a.yRange=function(b){if(!arguments.length)return E;E=b;return a};a.forceY=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return A;A=u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return n;n=b;return a};a.showValues=function(b){if(!arguments.length)return z;
z=b;return a};a.valueFormat=function(b){if(!arguments.length)return D;D=b;return a};a.rectClass=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.discreteBarChart=function(){function a(t){t.each(function(t){var K=d3.select(this),R=this,x=(e||parseInt(K.style("width"))||960)-n.left-n.right,C=(h||parseInt(K.style("height"))||400)-n.top-n.bottom;a.update=function(){O.beforeUpdate();K.transition().duration(P).call(a)};a.container=this;if(t&&t.length&&t.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();
else return t=K.selectAll(".nv-noData").data([E]),t.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),t.attr("x",n.left+x/2).attr("y",n.top+C/2).text(function(a){return a}),a;M=b.xScale();S=b.yScale().clamp(!0);var L=K.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([t]),y=L.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),V=y.append("defs"),L=L.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");L.attr("transform","translate("+n.left+","+n.top+")");A&&L.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)");b.width(x).height(C);L.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled})).transition().call(b);V.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");L.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",M.rangeBand()*(z?2:1)).attr("height",
16).attr("x",-M.rangeBand()/(z?1:2));s&&(k.scale(M).ticks(x/100).tickSize(-C,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+(S.range()[0]+(b.showValues()&&0>S.domain()[0]?16:0))+")"),L.select(".nv-x.nv-axis").transition().call(k),t=L.select(".nv-x.nv-axis").selectAll("g"),z&&t.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));H&&(r.scale(S).ticks(C/36).tickSize(-x,0),L.select(".nv-y.nv-axis").transition().call(r));L.select(".nv-zeroLine line").attr("x1",
0).attr("x2",x).attr("y1",S(0)).attr("y2",S(0));O.on("tooltipShow",function(e){if(D){var h=R.parentNode,n=e.pos[0]+(h.offsetLeft||0),s=e.pos[1]+(h.offsetTop||0),t=k.tickFormat()(b.x()(e.point,e.pointIndex)),l=r.tickFormat()(b.y()(e.point,e.pointIndex)),t=B(e.series.key,t,l,e,a);u.tooltip.show([n,s],t,0>e.value?"n":"s",null,h)}})});return a}var b=u.models.discreteBar(),k=u.models.axis(),r=u.models.axis(),n={top:15,right:10,bottom:50,left:60},e=null,h=null,t=u.utils.getColor(),s=!0,H=!0,A=!1,z=!1,D=
!0,B=function(a,b,e,h,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},M,S,E="No Data Available.",O=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),P=250;k.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});r.orient(A?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+n.left,a.pos[1]+n.top];O.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){D&&
u.tooltip.cleanup()});a.dispatch=O;a.discretebar=b;a.xAxis=k;a.yAxis=r;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;n.right="undefined"!=typeof b.right?b.right:n.right;n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom;n.left="undefined"!=typeof b.left?b.left:n.left;return a};a.width=function(b){if(!arguments.length)return e;
e=b;return a};a.height=function(b){if(!arguments.length)return h;h=b;return a};a.color=function(e){if(!arguments.length)return t;t=u.utils.getColor(e);b.color(t);return a};a.showXAxis=function(b){if(!arguments.length)return s;s=b;return a};a.showYAxis=function(b){if(!arguments.length)return H;H=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return A;A=b;r.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return z;z=b;return a};a.tooltips=function(b){if(!arguments.length)return D;
D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return B;B=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};a.transitionDuration=function(b){if(!arguments.length)return P;P=b;return a};return a};u.models.distribution=function(){function a(k){k.each(function(a){var k="x"==n?"y":"x",u=d3.select(this);s=s||t;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return h(a,b)});u=a.selectAll("line.nv-dist"+n).data(function(a){return a.values});u.enter().append("line").attr(n+"1",function(a,b){return s(e(a,b))}).attr(n+"2",function(a,b){return s(e(a,b))});a.exit().selectAll("line.nv-dist"+n).transition().attr(n+"1",function(a,b){return t(e(a,
b))}).attr(n+"2",function(a,b){return t(e(a,b))}).style("stroke-opacity",0).remove();u.attr("class",function(a,b){return"nv-dist"+n+" nv-dist"+n+"-"+b}).attr(k+"1",0).attr(k+"2",r);u.transition().attr(n+"1",function(a,b){return t(e(a,b))}).attr(n+"2",function(a,b){return t(e(a,b))});s=t.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=400,r=8,n="x",e=function(a){return a[n]},h=u.utils.defaultColor(),t=d3.scale.linear(),s;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.axis=function(b){if(!arguments.length)return n;n=b;return a};a.size=function(b){if(!arguments.length)return r;r=b;return a};a.getData=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return t;
t=b;return a};a.color=function(b){if(!arguments.length)return h;h=u.utils.getColor(b);return a};return a};u.models.historicalBarChart=function(){function a(R){R.each(function(x){var C=d3.select(this),L=this,y=(t||parseInt(C.style("width"))||960)-e.left-e.right,V=(s||parseInt(C.style("height"))||400)-e.top-e.bottom;a.update=function(){C.transition().duration(N).call(a)};a.container=this;O.disabled=x.map(function(a){return!!a.disabled});if(!P){var G;P={};for(G in O)P[G]=O[G]instanceof Array?O[G].slice(0):
O[G]}if(x&&x.length&&x.filter(function(a){return a.values.length}).length)C.selectAll(".nv-noData").remove();else return G=C.selectAll(".nv-noData").data([K]),G.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),G.attr("x",e.left+y/2).attr("y",e.top+V/2).text(function(a){return a}),a;S=b.xScale();E=b.yScale();var U=C.selectAll("g.nv-wrap.nv-historicalBarChart").data([x]);G=U.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var F=U.select("g");G.append("g").attr("class","nv-x nv-axis");G.append("g").attr("class","nv-y nv-axis");G.append("g").attr("class","nv-barsWrap");G.append("g").attr("class","nv-legendWrap");H&&(n.width(y),F.select(".nv-legendWrap").datum(x).call(n),e.top!=n.height()&&(e.top=n.height(),V=(s||parseInt(C.style("height"))||400)-e.top-e.bottom),U.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")"));U.attr("transform","translate("+e.left+","+e.top+")");D&&F.select(".nv-y.nv-axis").attr("transform",
"translate("+y+",0)");b.width(y).height(V).color(x.map(function(a,b){return a.color||h(a,b)}).filter(function(a,b){return!x[b].disabled}));F.select(".nv-barsWrap").datum(x.filter(function(a){return!a.disabled})).transition().call(b);A&&(k.scale(S).tickSize(-V,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),F.select(".nv-x.nv-axis").transition().call(k));z&&(r.scale(E).ticks(V/36).tickSize(-y,0),F.select(".nv-y.nv-axis").transition().call(r));n.dispatch.on("legendClick",
function(b,e){b.disabled=!b.disabled;x.filter(function(a){return!a.disabled}).length||x.map(function(a){a.disabled=!1;U.selectAll(".nv-series").classed("disabled",!1);return a});O.disabled=x.map(function(a){return!!a.disabled});Q.stateChange(O);R.transition().call(a)});n.dispatch.on("legendDblclick",function(b){x.forEach(function(a){a.disabled=!0});b.disabled=!1;O.disabled=x.map(function(a){return!!a.disabled});Q.stateChange(O);a.update()});Q.on("tooltipShow",function(e){if(B){var h=L.parentNode;
if(h){var l=d3.select(h).select("svg"),n=l.node()?l.attr("viewBox"):null;n&&(n=n.split(" "),l=parseInt(l.style("width"))/n[2],e.pos[0]*=l,e.pos[1]*=l)}var l=e.pos[0]+(h.offsetLeft||0),n=e.pos[1]+(h.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),t=r.tickFormat()(b.y()(e.point,e.pointIndex));e=M(e.series.key,s,t,e,a);u.tooltip.show([l,n],e,null,null,h)}});Q.on("changeState",function(b){"undefined"!==typeof b.disabled&&(x.forEach(function(a,e){a.disabled=b.disabled[e]}),O.disabled=b.disabled);
a.update()})});return a}var b=u.models.historicalBar(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e={top:30,right:90,bottom:50,left:90},h=u.utils.defaultColor(),t=null,s=null,H=!1,A=!0,z=!0,D=!1,B=!0,M=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},S,E,O={},P=null,K="No Data Available.",Q=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N=250;k.orient("bottom").tickPadding(7);r.orient(D?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+e.left,a.pos[1]+e.top];Q.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){Q.tooltipHide(a)});Q.on("tooltipHide",function(){B&&u.tooltip.cleanup()});a.dispatch=Q;a.bars=b;a.legend=n;a.xAxis=k;a.yAxis=r;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=u.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return e;e.top="undefined"!=typeof b.top?b.top:e.top;e.right="undefined"!=typeof b.right?b.right:e.right;e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom;e.left="undefined"!=typeof b.left?b.left:e.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return s;s=b;return a};a.color=function(b){if(!arguments.length)return h;h=u.utils.getColor(b);n.color(h);return a};a.showLegend=function(b){if(!arguments.length)return H;
H=b;return a};a.showXAxis=function(b){if(!arguments.length)return A;A=b;return a};a.showYAxis=function(b){if(!arguments.length)return z;z=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return D;D=b;r.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return B;B=b;return a};a.tooltipContent=function(b){if(!arguments.length)return M;M=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return P;
P=b;return a};a.noData=function(b){if(!arguments.length)return K;K=b;return a};a.transitionDuration=function(b){if(!arguments.length)return N;N=b;return a};return a};u.models.indentedTree=function(){function a(b){b.each(function(b){function e(b,h,k){d3.event.stopPropagation();if(d3.event.shiftKey&&!k)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&e(a,0,!0)}),!0;if(!u(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function k(a){return a._values&&a._values.length?z:a.values&&a.values.length?D:""}function n(a){return a._values&&a._values.length}function u(a){return(a=a.values||a._values)&&a.length}var E=1,x=d3.select(this),C=d3.layout.tree().children(function(a){return a.values}).size([r,20]);a.update=function(){x.transition().duration(600).call(a)};b[0]||(b[0]={key:s});var E=C.nodes(b[0]),L=d3.select(this).selectAll("div").data([[E]]);b=L.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
L=L.select("table").attr("width","100%").attr("class",A);if(h){var y=b.append("thead").append("tr");H.forEach(function(a){y.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=L.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");E=d3.max(E,function(a){return a.depth});C.size([r,20*E]);var V=b.selectAll("tr").data(function(a){return a.filter(function(a){return t&&!a.children?t(a):!0})},function(a,
b){return a.id||a.id||++S});V.exit().remove();V.select("img.nv-treeicon").attr("src",k).classed("folded",n);var G=V.enter().append("tr");H.forEach(function(a,b){var h=G.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(k(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)h.append("img").classed("nv-treeicon",!0).classed("nv-folded",n).attr("src",k).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return k(a)?
"inline-block":"none"}).on("click",e);h.each(function(e){!b&&M(e)?d3.select(this).append("a").attr("href",M).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(h.append("span").attr("class","nv-childrenCount"),V.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return t?t(a):!0}).length||a._values&&a._values.filter(function(a){return t?t(a):!0}).length||0)+")":""}))});V.order().on("click",function(a){B.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){B.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){B.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){B.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=u.utils.defaultColor(),e=Math.floor(1E4*Math.random()),h=!0,t=!1,s="No Data Available.",H=[{key:"key",label:"Name",type:"text"}],A=null,z="images/grey-plus.png",D="images/grey-minus.png",B=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),M=function(a){return a.url},S=0;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return n;n=u.utils.getColor(b);scatter.color(n);return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.header=function(b){if(!arguments.length)return h;h=b;return a};a.noData=
function(b){if(!arguments.length)return s;s=b;return a};a.filterZero=function(b){if(!arguments.length)return t;t=b;return a};a.columns=function(b){if(!arguments.length)return H;H=b;return a};a.tableClass=function(b){if(!arguments.length)return A;A=b;return a};a.iconOpen=function(b){if(!arguments.length)return z;z=b;return a};a.iconClose=function(b){if(!arguments.length)return D;D=b;return a};a.getUrl=function(b){if(!arguments.length)return M;M=b;return a};return a};u.models.legend=function(){function a(z){z.each(function(a){var z=
k-b.left-b.right,M=d3.select(this).selectAll("g.nv-legend").data([a]);M.enter().append("g").attr("class","nvd3 nv-legend").append("g");var S=M.select("g");M.attr("transform","translate("+b.left+","+b.top+")");var M=S.selectAll(".nv-series").data(function(a){return a}),E=M.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){A.legendMouseover(a,b)}).on("mouseout",function(a,b){A.legendMouseout(a,b)}).on("click",function(b,e){A.legendClick(b,e);s&&(H?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),A.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,e){A.legendDblclick(b,e);s&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,A.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});E.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);E.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");M.classed("disabled",function(a){return a.disabled});M.exit().remove();M.select("circle").style("fill",function(a,b){return a.color||e(a,b)}).style("stroke",function(a,b){return a.color||e(a,b)});M.select("text").text(n);if(h){var O=[];M.each(function(a,b){var e=d3.select(this).select("text"),h;try{if(h=e.getComputedTextLength(),0>=h)throw Error();}catch(k){h=u.utils.calcApproxTextWidth(e)}O.push(h+28)});for(var P=0,K=0,E=[];K<z&&P<O.length;)E[P]=
O[P],K+=O[P++];for(0===P&&(P=1);K>z&&1<P;){E=[];P--;for(K=0;K<O.length;K++)O[K]>(E[K%P]||0)&&(E[K%P]=O[K]);K=E.reduce(function(a,b,e,h){return a+b})}for(var Q=[],N=z=0;z<P;z++)Q[z]=N,N+=E[z];M.attr("transform",function(a,b){return"translate("+Q[b%P]+","+(5+20*Math.floor(b/P))+")"});t?S.attr("transform","translate("+(k-b.right-K)+","+b.top+")"):S.attr("transform","translate(0,"+b.top+")");r=b.top+b.bottom+20*Math.ceil(O.length/P)}else{var R=5,x=5,C=0,L;M.attr("transform",function(a,e){var h=d3.select(this).select("text").node().getComputedTextLength()+
28;L=x;k<b.left+b.right+L+h&&(x=L=5,R+=20);x+=h;x>C&&(C=x);return"translate("+L+","+R+")"});S.attr("transform","translate("+(k-b.right-C)+","+b.top+")");r=b.top+b.bottom+R+15}});return a}var b={top:5,right:0,bottom:5,left:0},k=400,r=20,n=function(a){return a.key},e=u.utils.defaultColor(),h=!0,t=!0,s=!0,H=!1,A=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=A;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.key=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return e;e=u.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return h;
h=b;return a};a.rightAlign=function(b){if(!arguments.length)return t;t=b;return a};a.updateState=function(b){if(!arguments.length)return s;s=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return H;H=b;return a};return a};u.models.line=function(){function a(E){E.each(function(a){var E=r-k.left-k.right,K=n-k.top-k.bottom,Q=d3.select(this);z=b.xScale();D=b.yScale();M=M||z;S=S||D;a=Q.selectAll("g.nv-wrap.nv-line").data([a]);var N=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
Q=N.append("defs"),R=N.append("g"),N=a.select("g");R.append("g").attr("class","nv-groups");R.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+k.left+","+k.top+")");b.width(E).height(K);R=a.select(".nv-scatterWrap");R.transition().call(b);Q.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",E).attr("height",0<K?K:0);N.attr("clip-path",A?"url(#nv-edge-clip-"+b.id()+")":"");R.attr("clip-path",A?"url(#nv-edge-clip-"+
b.id()+")":"");E=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});E.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);E.exit().remove();E.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return e(a,b)}).style("stroke",function(a,b){return e(a,b)});E.transition().style("stroke-opacity",1).style("fill-opacity",.5);K=E.selectAll("path.nv-area").data(function(a){return H(a)?
[a]:[]});K.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(B).defined(s).x(function(a,b){return u.utils.NaNtoZero(M(h(a,b)))}).y0(function(a,b){return u.utils.NaNtoZero(S(t(a,b)))}).y1(function(a,b){return S(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});E.exit().selectAll("path.nv-area").remove();K.transition().attr("d",function(a){return d3.svg.area().interpolate(B).defined(s).x(function(a,b){return u.utils.NaNtoZero(z(h(a,
b)))}).y0(function(a,b){return u.utils.NaNtoZero(D(t(a,b)))}).y1(function(a,b){return D(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});E=E.selectAll("path.nv-line").data(function(a){return[a.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(B).defined(s).x(function(a,b){return u.utils.NaNtoZero(M(h(a,b)))}).y(function(a,b){return u.utils.NaNtoZero(S(t(a,b)))}));E.transition().attr("d",d3.svg.line().interpolate(B).defined(s).x(function(a,
b){return u.utils.NaNtoZero(z(h(a,b)))}).y(function(a,b){return u.utils.NaNtoZero(D(t(a,b)))}));M=z.copy();S=D.copy()});return a}var b=u.models.scatter(),k={top:0,right:0,bottom:0,left:0},r=960,n=500,e=u.utils.defaultColor(),h=function(a){return a.x},t=function(a){return a.y},s=function(a,b){return!isNaN(t(a,b))&&null!==t(a,b)},H=function(a){return a.area},A=!1,z,D,B="linear";b.size(16).sizeDomain([16,256]);var M,S;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return r;
r=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.x=function(e){if(!arguments.length)return h;h=e;b.x(e);return a};a.y=function(e){if(!arguments.length)return t;t=e;b.y(e);return a};a.clipEdge=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(h){if(!arguments.length)return e;e=u.utils.getColor(h);b.color(e);return a};a.interpolate=function(b){if(!arguments.length)return B;B=b;return a};a.defined=function(b){if(!arguments.length)return s;s=b;return a};
a.isArea=function(b){if(!arguments.length)return H;H=d3.functor(b);return a};return a};u.models.lineChart=function(){function a(C){C.each(function(C){var y=d3.select(this),V=this,G=(s||parseInt(y.style("width"))||960)-h.left-h.right,U=(H||parseInt(y.style("height"))||400)-h.top-h.bottom;a.update=function(){y.transition().duration(x).call(a)};a.container=this;K.disabled=C.map(function(a){return!!a.disabled});if(!Q){var F;Q={};for(F in K)Q[F]=K[F]instanceof Array?K[F].slice(0):K[F]}if(C&&C.length&&
C.filter(function(a){return a.values.length}).length)y.selectAll(".nv-noData").remove();else return F=y.selectAll(".nv-noData").data([N]),F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",h.left+G/2).attr("y",h.top+U/2).text(function(a){return a}),a;O=b.xScale();P=b.yScale();F=y.selectAll("g.nv-wrap.nv-lineChart").data([C]);var aa=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),W=F.select("g");aa.append("rect").style("opacity",
0);aa.append("g").attr("class","nv-x nv-axis");aa.append("g").attr("class","nv-y nv-axis");aa.append("g").attr("class","nv-linesWrap");aa.append("g").attr("class","nv-legendWrap");aa.append("g").attr("class","nv-interactive");W.select("rect").attr("width",G).attr("height",0<U?U:0);A&&(n.width(G),W.select(".nv-legendWrap").datum(C).call(n),h.top!=n.height()&&(h.top=n.height(),U=(H||parseInt(y.style("height"))||400)-h.top-h.bottom),F.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")"));
F.attr("transform","translate("+h.left+","+h.top+")");B&&W.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");M&&(e.width(G).height(U).margin({left:h.left,top:h.top}).svgContainer(y).xScale(O),F.select(".nv-interactive").call(e));b.width(G).height(U).color(C.map(function(a,b){return a.color||t(a,b)}).filter(function(a,b){return!C[b].disabled}));W.select(".nv-linesWrap").datum(C.filter(function(a){return!a.disabled})).transition().call(b);z&&(k.scale(O).ticks(G/100).tickSize(-U,0),W.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+P.range()[0]+")"),W.select(".nv-x.nv-axis").transition().call(k));D&&(r.scale(P).ticks(U/36).tickSize(-G,0),W.select(".nv-y.nv-axis").transition().call(r));n.dispatch.on("stateChange",function(b){K=b;R.stateChange(K);a.update()});e.dispatch.on("elementMousemove",function(l){b.clearHighlights();var n,s,x,y=[];C.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(e,h){s=u.interactiveBisect(e.values,l.pointXValue,a.x());b.highlightPoint(h,s,!0);var k=e.values[s];
"undefined"!==typeof k&&("undefined"===typeof n&&(n=k),"undefined"===typeof x&&(x=a.xScale()(a.x()(k,s))),y.push({key:e.key,value:a.y()(k,s),color:t(e,e.seriesIndex)}))});if(2<y.length){var F=a.yScale().invert(l.mouseY),G=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),F=u.nearestValueIndex(y.map(function(a){return a.value}),F,G);null!==F&&(y[F].highlight=!0)}F=k.tickFormat()(a.x()(n,s));e.tooltip.position({left:x+h.left,top:l.mouseY+h.top}).chartContainer(V.parentNode).enabled(S).valueFormatter(function(a,
b){return r.tickFormat()(a)}).data({value:F,series:y})();e.renderGuideLine(x)});e.dispatch.on("elementMouseout",function(a){R.tooltipHide();b.clearHighlights()});R.on("tooltipShow",function(e){if(S){var h=V.parentNode,n=e.pos[0]+(h.offsetLeft||0),s=e.pos[1]+(h.offsetTop||0),t=k.tickFormat()(b.x()(e.point,e.pointIndex)),x=r.tickFormat()(b.y()(e.point,e.pointIndex));e=E(e.series.key,t,x,e,a);u.tooltip.show([n,s],e,null,null,h)}});R.on("changeState",function(b){"undefined"!==typeof b.disabled&&C.length===
b.disabled.length&&(C.forEach(function(a,e){a.disabled=b.disabled[e]}),K.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e=u.interactiveGuideline(),h={top:30,right:20,bottom:50,left:60},t=u.utils.defaultColor(),s=null,H=null,A=!0,z=!0,D=!0,B=!1,M=!1,S=!0,E=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},O,P,K={},Q=null,N="No Data Available.",R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
x=250;k.orient("bottom").tickPadding(7);r.orient(B?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){S&&u.tooltip.cleanup()});a.dispatch=R;a.lines=b;a.legend=n;a.xAxis=k;a.yAxis=r;a.interactiveLayer=e;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:h.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.color=
function(b){if(!arguments.length)return t;t=u.utils.getColor(b);n.color(t);return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return z;z=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return B;B=b;r.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return M;M=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return S;S=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.state=function(b){if(!arguments.length)return K;K=b;return a};a.defaultState=function(b){if(!arguments.length)return Q;Q=b;return a};a.noData=function(b){if(!arguments.length)return N;N=b;return a};a.transitionDuration=function(b){if(!arguments.length)return x;x=b;return a};return a};u.models.linePlusBarChart=function(){function a(x){x.each(function(x){var L=
d3.select(this),y=this,A=(s||parseInt(L.style("width"))||960)-t.left-t.right,G=(H||parseInt(L.style("height"))||400)-t.top-t.bottom;a.update=function(){L.transition().call(a)};K.disabled=x.map(function(a){return!!a.disabled});if(!Q){var z;Q={};for(z in K)Q[z]=K[z]instanceof Array?K[z].slice(0):K[z]}if(x&&x.length&&x.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return z=L.selectAll(".nv-noData").data([N]),z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),z.attr("x",t.left+A/2).attr("y",t.top+G/2).text(function(a){return a}),a;z=x.filter(function(a){return!a.disabled&&a.bar});var F=x.filter(function(a){return!a.bar});E=F.filter(function(a){return!a.disabled}).length&&F.filter(function(a){return!a.disabled})[0].values.length?b.xScale():k.xScale();O=k.yScale();P=b.yScale();var aa=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([x]),W=aa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
l=aa.select("g");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y1 nv-axis");W.append("g").attr("class","nv-y2 nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-linesWrap");W.append("g").attr("class","nv-legendWrap");B&&(h.width(A/2),l.select(".nv-legendWrap").datum(x.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(h),t.top!=h.height()&&(t.top=
h.height(),G=(H||parseInt(L.style("height"))||400)-t.top-t.bottom),l.select(".nv-legendWrap").attr("transform","translate("+A/2+","+-t.top+")"));aa.attr("transform","translate("+t.left+","+t.top+")");b.width(A).height(G).color(x.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!x[b].disabled&&!x[b].bar}));k.width(A).height(G).color(x.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!x[b].disabled&&x[b].bar}));aa=l.select(".nv-barsWrap").datum(z.length?z:[{values:[]}]);
W=l.select(".nv-linesWrap").datum(F[0]&&!F[0].disabled?F:[{values:[]}]);d3.transition(aa).call(k);d3.transition(W).call(b);r.scale(E).ticks(A/100).tickSize(-G,0);l.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")");d3.transition(l.select(".nv-x.nv-axis")).call(r);n.scale(O).ticks(G/36).tickSize(-A,0);d3.transition(l.select(".nv-y1.nv-axis")).style("opacity",z.length?1:0).call(n);e.scale(P).ticks(G/36).tickSize(z.length?0:-A,0);l.select(".nv-y2.nv-axis").style("opacity",F.length?
1:0).attr("transform","translate("+A+",0)");d3.transition(l.select(".nv-y2.nv-axis")).call(e);h.dispatch.on("stateChange",function(b){K=b;R.stateChange(K);a.update()});R.on("tooltipShow",function(l){if(M){var h=y.parentNode,k=l.pos[0]+(h.offsetLeft||0),s=l.pos[1]+(h.offsetTop||0),t=r.tickFormat()(b.x()(l.point,l.pointIndex)),x=(l.series.bar?n:e).tickFormat()(b.y()(l.point,l.pointIndex)),t=S(l.series.key,t,x,l,a);u.tooltip.show([k,s],t,0>l.value?"n":"s",null,h)}});R.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(x.forEach(function(a,e){a.disabled=b.disabled[e]}),K.disabled=b.disabled);a.update()})});return a}var b=u.models.line(),k=u.models.historicalBar(),r=u.models.axis(),n=u.models.axis(),e=u.models.axis(),h=u.models.legend(),t={top:30,right:60,bottom:50,left:60},s=null,H=null,A=function(a){return a.x},z=function(a){return a.y},D=u.utils.defaultColor(),B=!0,M=!0,S=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},E,O,P,K={},Q=null,N="No Data Available.",R=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");k.padData(!0);b.clipEdge(!1).padData(!0);r.orient("bottom").tickPadding(7).highlightZero(!1);n.orient("left");e.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});k.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];R.tooltipShow(a)});k.dispatch.on("elementMouseout.tooltip",
function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){M&&u.tooltip.cleanup()});a.dispatch=R;a.legend=h;a.lines=b;a.bars=k;a.xAxis=r;a.y1Axis=n;a.y2Axis=e;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return A;A=e;b.x(e);k.x(e);return a};a.y=function(e){if(!arguments.length)return z;z=e;b.y(e);k.y(e);return a};a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;
t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return D;D=u.utils.getColor(b);h.color(D);return a};a.showLegend=function(b){if(!arguments.length)return B;B=b;return a};a.tooltips=function(b){if(!arguments.length)return M;
M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return K;K=b;return a};a.defaultState=function(b){if(!arguments.length)return Q;Q=b;return a};a.noData=function(b){if(!arguments.length)return N;N=b;return a};return a};u.models.lineWithFocusChart=function(){function a(y){y.each(function(y){function G(){s.empty()||s.extent(Q);fa.data([s.empty()?O.domain():Q]).each(function(a,b){var e=O(a[0])-S.range()[0],l=S.range()[1]-O(a[1]);
d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",O(a[1])).attr("width",0>l?0:l)})}function U(){Q=s.empty()?null:s.extent();var a=s.empty()?O.domain():s.extent();1>=Math.abs(a[0]-a[1])||(C.brush({extent:a,brush:s}),G(),ga.select(".nv-focus .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}).map(function(e,l){return{key:e.key,values:e.values.filter(function(e,l){return b.x()(e,l)>=a[0]&&b.x()(e,l)<=a[1]})}})).transition().duration(L).call(b),
ga.select(".nv-focus .nv-x.nv-axis").transition().duration(L).call(r),ga.select(".nv-focus .nv-y.nv-axis").transition().duration(L).call(n))}var F=d3.select(this),aa=this,W=(D||parseInt(F.style("width"))||960)-H.left-H.right,l=(B||parseInt(F.style("height"))||400)-H.top-H.bottom-M,J=M-A.top-A.bottom;a.update=function(){F.transition().duration(L).call(a)};a.container=this;if(y&&y.length&&y.filter(function(a){return a.values.length}).length)F.selectAll(".nv-noData").remove();else{var ca=F.selectAll(".nv-noData").data([x]);
ca.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ca.attr("x",H.left+W/2).attr("y",H.top+l/2).text(function(a){return a});return a}S=b.xScale();E=b.yScale();O=k.xScale();P=k.yScale();var ca=F.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([y]),I=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ga=ca.select("g");I.append("g").attr("class","nv-legendWrap");var X=I.append("g").attr("class","nv-focus");X.append("g").attr("class",
"nv-x nv-axis");X.append("g").attr("class","nv-y nv-axis");X.append("g").attr("class","nv-linesWrap");I=I.append("g").attr("class","nv-context");I.append("g").attr("class","nv-x nv-axis");I.append("g").attr("class","nv-y nv-axis");I.append("g").attr("class","nv-linesWrap");I.append("g").attr("class","nv-brushBackground");I.append("g").attr("class","nv-x nv-brush");K&&(t.width(W),ga.select(".nv-legendWrap").datum(y).call(t),H.top!=t.height()&&(H.top=t.height(),l=(B||parseInt(F.style("height"))||400)-
H.top-H.bottom-M),ga.select(".nv-legendWrap").attr("transform","translate(0,"+-H.top+")"));ca.attr("transform","translate("+H.left+","+H.top+")");b.width(W).height(l).color(y.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!y[b].disabled}));k.defined(b.defined()).width(W).height(J).color(y.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!y[b].disabled}));ga.select(".nv-context").attr("transform","translate(0,"+(l+H.bottom+A.top)+")");ca=ga.select(".nv-context .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}));
d3.transition(ca).call(k);r.scale(S).ticks(W/100).tickSize(-l,0);n.scale(E).ticks(l/36).tickSize(-W,0);ga.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+l+")");s.x(O).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);U();a.transitionDuration(b)});Q&&s.extent(Q);var fa=ga.select(".nv-brushBackground").selectAll("g").data([Q||s.extent()]),l=fa.enter().append("g");l.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",J);l.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",J);l=ga.select(".nv-x.nv-brush").call(s);l.selectAll("rect").attr("height",J);l.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=J/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});U();e.scale(O).ticks(W/100).tickSize(-J,0);ga.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+
")");d3.transition(ga.select(".nv-context .nv-x.nv-axis")).call(e);h.scale(P).ticks(J/36).tickSize(-W,0);d3.transition(ga.select(".nv-context .nv-y.nv-axis")).call(h);ga.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");t.dispatch.on("stateChange",function(b){a.update()});C.on("tooltipShow",function(e){if(N){var l=aa.parentNode,h=e.pos[0]+(l.offsetLeft||0),k=e.pos[1]+(l.offsetTop||0),s=r.tickFormat()(b.x()(e.point,e.pointIndex)),t=n.tickFormat()(b.y()(e.point,e.pointIndex));
e=R(e.series.key,s,t,e,a);u.tooltip.show([h,k],e,null,null,l)}})});return a}var b=u.models.line(),k=u.models.line(),r=u.models.axis(),n=u.models.axis(),e=u.models.axis(),h=u.models.axis(),t=u.models.legend(),s=d3.svg.brush(),H={top:30,right:30,bottom:30,left:60},A={top:0,right:30,bottom:20,left:60},z=u.utils.defaultColor(),D=null,B=null,M=100,S,E,O,P,K=!0,Q=null,N=!0,R=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},x="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide",
"brush"),L=250;b.clipEdge(!0);k.interactive(!1);r.orient("bottom").tickPadding(5);n.orient("left");e.orient("bottom").tickPadding(5);h.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+H.left,a.pos[1]+H.top];C.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a)});C.on("tooltipHide",function(){N&&u.tooltip.cleanup()});a.dispatch=C;a.legend=t;a.lines=b;a.lines2=k;a.xAxis=r;a.yAxis=n;a.x2Axis=e;a.y2Axis=h;d3.rebind(a,b,"defined","isArea",
"size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return b.x;b.x(e);k.x(e);return a};a.y=function(e){if(!arguments.length)return b.y;b.y(e);k.y(e);return a};a.margin=function(b){if(!arguments.length)return H;H.top="undefined"!=typeof b.top?b.top:H.top;H.right="undefined"!=typeof b.right?b.right:H.right;H.bottom="undefined"!=typeof b.bottom?b.bottom:H.bottom;H.left="undefined"!=
typeof b.left?b.left:H.left;return a};a.margin2=function(b){if(!arguments.length)return A;A=b;return a};a.width=function(b){if(!arguments.length)return D;D=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.height2=function(b){if(!arguments.length)return M;M=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);t.color(z);return a};a.showLegend=function(b){if(!arguments.length)return K;K=b;return a};a.tooltips=function(b){if(!arguments.length)return N;
N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.interpolate=function(e){if(!arguments.length)return b.interpolate();b.interpolate(e);k.interpolate(e);return a};a.noData=function(b){if(!arguments.length)return x;x=b;return a};a.xTickFormat=function(b){if(!arguments.length)return r.tickFormat();r.tickFormat(b);e.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return n.tickFormat();n.tickFormat(b);h.tickFormat(b);return a};a.brushExtent=
function(b){if(!arguments.length)return Q;Q=b;return a};a.transitionDuration=function(b){if(!arguments.length)return L;L=b;return a};return a};u.models.linePlusBarWithFocusChart=function(){function a(l){l.each(function(l){function ca(){D.empty()||D.extent(R);Ca.data([D.empty()?y.domain():R]).each(function(a,b){var e=y(a[0])-y.range()[0],l=y.range()[1]-y(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",y(a[1])).attr("width",0>l?0:l)})}function I(){R=
D.empty()?null:D.extent();N=D.empty()?y.domain():D.extent();W.brush({extent:N,brush:D});ca();r.width(fa).height(ha).color(l.map(function(a,b){return a.color||K(a,b)}).filter(function(a,b){return!l[b].disabled&&l[b].bar}));b.width(fa).height(ha).color(l.map(function(a,b){return a.color||K(a,b)}).filter(function(a,b){return!l[b].disabled&&!l[b].bar}));var a=ra.select(".nv-focus .nv-barsWrap").datum(la.length?la.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return r.x()(a,b)>=
N[0]&&r.x()(a,b)<=N[1]})}}):[{values:[]}]),h=ra.select(".nv-focus .nv-linesWrap").datum(ea[0].disabled?[{values:[]}]:ea.map(function(a,e){return{key:a.key,values:a.values.filter(function(a,e){return b.x()(a,e)>=N[0]&&b.x()(a,e)<=N[1]})}}));L=la.length?r.xScale():b.xScale();e.scale(L).ticks(fa/100).tickSize(-ha,0);e.domain([Math.ceil(N[0]),Math.floor(N[1])]);ra.select(".nv-x.nv-axis").transition().duration(0).call(e);a.transition().duration(0).call(r);h.transition().duration(0).call(b);ra.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");t.scale(V).ticks(ha/36).tickSize(-fa,0);ra.select(".nv-focus .nv-y1.nv-axis").style("opacity",la.length?1:0);s.scale(G).ticks(ha/36).tickSize(la.length?0:-fa,0);ra.select(".nv-focus .nv-y2.nv-axis").style("opacity",ea.length?1:0).attr("transform","translate("+L.range()[1]+",0)");ra.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(t);ra.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(s)}var ga=d3.select(this),X=this,fa=(S||parseInt(ga.style("width"))||
960)-B.left-B.right,ha=(E||parseInt(ga.style("height"))||400)-B.top-B.bottom-100,ba=100-M.top-M.bottom;a.update=function(){ga.transition().duration(0).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.length}).length)ga.selectAll(".nv-noData").remove();else{var Y=ga.selectAll(".nv-noData").data([aa]);Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");Y.attr("x",B.left+fa/2).attr("y",B.top+ha/2).text(function(a){return a});
return a}var la=l.filter(function(a){return!a.disabled&&a.bar}),ea=l.filter(function(a){return!a.bar});L=r.xScale();y=h.scale();V=r.yScale();G=b.yScale();U=n.yScale();F=k.yScale();var Y=l.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:O(a,b),y:P(a,b)}})}),ma=l.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:O(a,b),y:P(a,b)}})});L.range([0,fa]);y.domain(d3.extent(d3.merge(Y.concat(ma)),
function(a){return a.x})).range([0,fa]);var Y=ga.selectAll("g.nv-wrap.nv-linePlusBar").data([l]),ma=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ra=Y.select("g");ma.append("g").attr("class","nv-legendWrap");var Ba=ma.append("g").attr("class","nv-focus");Ba.append("g").attr("class","nv-x nv-axis");Ba.append("g").attr("class","nv-y1 nv-axis");Ba.append("g").attr("class","nv-y2 nv-axis");Ba.append("g").attr("class","nv-barsWrap");Ba.append("g").attr("class","nv-linesWrap");
ma=ma.append("g").attr("class","nv-context");ma.append("g").attr("class","nv-x nv-axis");ma.append("g").attr("class","nv-y1 nv-axis");ma.append("g").attr("class","nv-y2 nv-axis");ma.append("g").attr("class","nv-barsWrap");ma.append("g").attr("class","nv-linesWrap");ma.append("g").attr("class","nv-brushBackground");ma.append("g").attr("class","nv-x nv-brush");Q&&(z.width(fa/2),ra.select(".nv-legendWrap").datum(l.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(z),B.top!=z.height()&&(B.top=z.height(),ha=(E||parseInt(ga.style("height"))||400)-B.top-B.bottom-100),ra.select(".nv-legendWrap").attr("transform","translate("+fa/2+","+-B.top+")"));Y.attr("transform","translate("+B.left+","+B.top+")");n.width(fa).height(ba).color(l.map(function(a,b){return a.color||K(a,b)}).filter(function(a,b){return!l[b].disabled&&l[b].bar}));k.width(fa).height(ba).color(l.map(function(a,b){return a.color||K(a,b)}).filter(function(a,
b){return!l[b].disabled&&!l[b].bar}));Y=ra.select(".nv-context .nv-barsWrap").datum(la.length?la:[{values:[]}]);ma=ra.select(".nv-context .nv-linesWrap").datum(ea[0].disabled?[{values:[]}]:ea);ra.select(".nv-context").attr("transform","translate(0,"+(ha+B.bottom+M.top)+")");Y.transition().call(n);ma.transition().call(k);D.x(y).on("brush",I);R&&D.extent(R);var Ca=ra.select(".nv-brushBackground").selectAll("g").data([R||D.extent()]),Y=Ca.enter().append("g");Y.append("rect").attr("class","left").attr("x",
0).attr("y",0).attr("height",ba);Y.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ba);Y=ra.select(".nv-x.nv-brush").call(D);Y.selectAll("rect").attr("height",ba);Y.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=ba/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});h.ticks(fa/100).tickSize(-ba,0);ra.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+U.range()[0]+")");ra.select(".nv-context .nv-x.nv-axis").transition().call(h);H.scale(U).ticks(ba/36).tickSize(-fa,0);ra.select(".nv-context .nv-y1.nv-axis").style("opacity",la.length?1:0).attr("transform","translate(0,"+y.range()[0]+")");ra.select(".nv-context .nv-y1.nv-axis").transition().call(H);A.scale(F).ticks(ba/36).tickSize(la.length?0:-fa,0);ra.select(".nv-context .nv-y2.nv-axis").style("opacity",ea.length?1:0).attr("transform","translate("+y.range()[1]+",0)");ra.select(".nv-context .nv-y2.nv-axis").transition().call(A);
z.dispatch.on("stateChange",function(b){a.update()});W.on("tooltipShow",function(l){if(x){var h=X.parentNode;N&&(l.pointIndex+=Math.ceil(N[0]));var k=l.pos[0]+(h.offsetLeft||0),n=l.pos[1]+(h.offsetTop||0),r=e.tickFormat()(b.x()(l.point,l.pointIndex)),J=(l.series.bar?t:s).tickFormat()(b.y()(l.point,l.pointIndex)),r=C(l.series.key,r,J,l,a);u.tooltip.show([k,n],r,0>l.value?"n":"s",null,h)}});I()});return a}var b=u.models.line(),k=u.models.line(),r=u.models.historicalBar(),n=u.models.historicalBar(),
e=u.models.axis(),h=u.models.axis(),t=u.models.axis(),s=u.models.axis(),H=u.models.axis(),A=u.models.axis(),z=u.models.legend(),D=d3.svg.brush(),B={top:30,right:30,bottom:30,left:60},M={top:0,right:30,bottom:20,left:60},S=null,E=null,O=function(a){return a.x},P=function(a){return a.y},K=u.utils.defaultColor(),Q=!0,N,R=null,x=!0,C=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},L,y,V,G,U,F,aa="No Data Available.",W=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);k.interactive(!1);
e.orient("bottom").tickPadding(5);t.orient("left");s.orient("right");h.orient("bottom").tickPadding(5);H.orient("left");A.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+B.left,a.pos[1]+B.top];W.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){W.tooltipHide(a)});r.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+B.left,a.pos[1]+B.top];W.tooltipShow(a)});r.dispatch.on("elementMouseout.tooltip",function(a){W.tooltipHide(a)});
W.on("tooltipHide",function(){x&&u.tooltip.cleanup()});a.dispatch=W;a.legend=z;a.lines=b;a.lines2=k;a.bars=r;a.bars2=n;a.xAxis=e;a.x2Axis=h;a.y1Axis=t;a.y2Axis=s;a.y3Axis=H;a.y4Axis=A;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=u.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return O;O=e;b.x(e);r.x(e);return a};a.y=function(e){if(!arguments.length)return P;P=e;b.y(e);r.y(e);return a};a.margin=function(b){if(!arguments.length)return B;B.top="undefined"!=typeof b.top?
b.top:B.top;B.right="undefined"!=typeof b.right?b.right:B.right;B.bottom="undefined"!=typeof b.bottom?b.bottom:B.bottom;B.left="undefined"!=typeof b.left?b.left:B.left;return a};a.width=function(b){if(!arguments.length)return S;S=b;return a};a.height=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return K;K=u.utils.getColor(b);z.color(K);return a};a.showLegend=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltips=function(b){if(!arguments.length)return x;
x=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.noData=function(b){if(!arguments.length)return aa;aa=b;return a};a.brushExtent=function(b){if(!arguments.length)return R;R=b;return a};return a};u.models.multiBar=function(){function a(u){u.each(function(a){var u=k-b.left-b.right,L=r-b.top-b.bottom,U=d3.select(this);M&&a.length&&(M=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);z&&(a=d3.layout.stack().offset(D).values(function(a){return a.values}).y(s)(!a.length&&
M?M:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});z&&a[0].values.map(function(b,e){var h=0,k=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=k,k-=a.size):(a.y1=a.size+h,h+=a.size)})});var F=P&&K?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:s(a,b),y0:a.y0,y1:a.y1}})});n.domain(P||d3.merge(F).map(function(a){return a.x})).rangeBands(Q||[0,u],R);e.domain(K||d3.extent(d3.merge(F).map(function(a){return z?0<a.y?a.y1:a.y1+a.y:a.y}).concat(H))).range(N||
[L,0]);n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]-.01*n.domain()[0],n.domain()[1]+.01*n.domain()[1]]):n.domain([-1,1]));e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]+.01*e.domain()[0],e.domain()[1]-.01*e.domain()[1]]):e.domain([-1,1]));C=C||e;var U=U.selectAll("g.nv-wrap.nv-multibar").data([a]),aa=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),F=aa.append("defs"),aa=aa.append("g"),W=U.select("g");aa.append("g").attr("class","nv-groups");
U.attr("transform","translate("+b.left+","+b.top+")");F.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect");U.select("#nv-edge-clip-"+h+" rect").attr("width",u).attr("height",L);W.attr("clip-path",A?"url(#nv-edge-clip-"+h+")":"");u=U.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});u.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);u.exit().transition().selectAll("rect.nv-bar").delay(function(b,e){return e*O/a[0].values.length}).attr("y",
function(a){return z?C(a.y0):C(0)}).attr("height",0).remove();u.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return B(a,b)}).style("stroke",function(a,b){return B(a,b)});u.transition().style("stroke-opacity",1).style("fill-opacity",.75);u=u.selectAll("rect.nv-bar").data(function(b){return M&&!a.length?M.values:b.values});u.exit().remove();u.enter().append("rect").attr("class",function(a,b){return 0>s(a,b)?"nv-bar negative":
"nv-bar positive"}).attr("x",function(b,e,h){return z?0:h*n.rangeBand()/a.length}).attr("y",function(a){return C(z?a.y0:0)}).attr("height",0).attr("width",n.rangeBand()/(z?1:a.length)).attr("transform",function(a,b){return"translate("+n(t(a,b))+",0)"});u.style("fill",function(a,b,e){return B(a,e,b)}).style("stroke",function(a,b,e){return B(a,e,b)}).on("mouseover",function(b,h){d3.select(this).classed("hover",!0);x.elementMouseover({value:s(b,h),point:b,series:a[b.series],pos:[n(t(b,h))+n.rangeBand()*
(z?a.length/2:b.series+.5)/a.length,e(s(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);x.elementMouseout({value:s(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,h){x.elementClick({value:s(b,h),point:b,series:a[b.series],pos:[n(t(b,h))+n.rangeBand()*(z?a.length/2:b.series+.5)/a.length,e(s(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,h){x.elementDblClick({value:s(b,h),point:b,series:a[b.series],pos:[n(t(b,h))+n.rangeBand()*(z?a.length/2:b.series+.5)/a.length,e(s(b,h)+(z?b.y0:0))],pointIndex:h,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.attr("class",function(a,b){return 0>s(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+n(t(a,b))+",0)"});S&&(E||(E=a.map(function(){return!0})),u.style("fill",function(a,b,e){return d3.rgb(S(a,b)).darker(E.map(function(a,
b){return b}).filter(function(a,b){return!E[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(S(a,b)).darker(E.map(function(a,b){return b}).filter(function(a,b){return!E[b]})[e]).toString()}));z?u.transition().delay(function(b,e){return e*O/a[0].values.length}).attr("y",function(a,b){return e(z?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(e(a.y+(z?a.y0:0))-e(z?a.y0:0)),1)}).attr("x",function(b,e){return z?0:b.series*n.rangeBand()/a.length}).attr("width",n.rangeBand()/
(z?1:a.length)):u.transition().delay(function(b,e){return e*O/a[0].values.length}).attr("x",function(b,e){return b.series*n.rangeBand()/a.length}).attr("width",n.rangeBand()/a.length).attr("y",function(a,b){return 0>s(a,b)?e(0):1>e(0)-e(s(a,b))?e(0)-1:e(s(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(e(s(a,b))-e(0)),1)||0});n.copy();C=e.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=d3.scale.ordinal(),e=d3.scale.linear(),h=Math.floor(1E4*Math.random()),t=function(a){return a.x},
s=function(a){return a.y},H=[0],A=!0,z=!1,D="zero",B=u.utils.defaultColor(),M=!1,S=null,E,O=1200,P,K,Q,N,R=.1,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),C;a.dispatch=x;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return s;s=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?
e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return n;n=b;return a};a.yScale=function(b){if(!arguments.length)return e;e=b;return a};a.xDomain=function(b){if(!arguments.length)return P;P=b;return a};a.yDomain=function(b){if(!arguments.length)return K;
K=b;return a};a.xRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceY=function(b){if(!arguments.length)return H;H=b;return a};a.stacked=function(b){if(!arguments.length)return z;z=b;return a};a.stackOffset=function(b){if(!arguments.length)return D;D=b;return a};a.clipEdge=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return B;B=u.utils.getColor(b);return a};a.barColor=
function(b){if(!arguments.length)return S;S=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return E;E=b;return a};a.id=function(b){if(!arguments.length)return h;h=b;return a};a.hideable=function(b){if(!arguments.length)return M;M=b;return a};a.delay=function(b){if(!arguments.length)return O;O=b;return a};a.groupSpacing=function(b){if(!arguments.length)return R;R=b;return a};return a};u.models.multiBarChart=function(){function a(V){V.each(function(G){var V=d3.select(this),
F=this,aa=(t||parseInt(V.style("width"))||960)-h.left-h.right,W=(s||parseInt(V.style("height"))||400)-h.top-h.bottom;a.update=function(){V.transition().duration(y).call(a)};a.container=this;R.disabled=G.map(function(a){return!!a.disabled});if(!x){var l;x={};for(l in R)x[l]=R[l]instanceof Array?R[l].slice(0):R[l]}if(G&&G.length&&G.filter(function(a){return a.values.length}).length)V.selectAll(".nv-noData").remove();else return l=V.selectAll(".nv-noData").data([C]),l.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",h.left+aa/2).attr("y",h.top+W/2).text(function(a){return a}),a;Q=b.xScale();N=b.yScale();var J=V.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([G]),ca=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");l=J.select("g");ca.append("g").attr("class","nv-x nv-axis");ca.append("g").attr("class","nv-y nv-axis");ca.append("g").attr("class","nv-barsWrap");ca.append("g").attr("class","nv-legendWrap");
ca.append("g").attr("class","nv-controlsWrap");z&&(n.width(aa-(A?180:0)),b.barColor()&&G.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),l.select(".nv-legendWrap").datum(G).call(n),h.top!=n.height()&&(h.top=n.height(),W=(s||parseInt(V.style("height"))||400)-h.top-h.bottom),l.select(".nv-legendWrap").attr("transform","translate("+(A?180:0)+","+-h.top+")"));if(A){var I=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];e.width(A?180:0).color(["#444",
"#444","#444"]);l.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-h.top+")").call(e)}J.attr("transform","translate("+h.left+","+h.top+")");M&&l.select(".nv-y.nv-axis").attr("transform","translate("+aa+",0)");b.disabled(G.map(function(a){return a.disabled})).width(aa).height(W).color(G.map(function(a,b){return a.color||H(a,b)}).filter(function(a,b){return!G[b].disabled}));l.select(".nv-barsWrap").datum(G.filter(function(a){return!a.disabled})).transition().call(b);if(D){k.scale(Q).ticks(aa/
100).tickSize(-W,0);l.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");l.select(".nv-x.nv-axis").transition().call(k);J=l.select(".nv-x.nv-axis > g").selectAll("g");J.selectAll("line, text").style("opacity",1);if(E){J.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?5:17)+")"});var ga=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;l.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+
(0===b||0!==ga%2?17:5)+")"})}S&&J.filter(function(a,b){return 0!==b%Math.ceil(G[0].values.length/(aa/100))}).selectAll("text, line").style("opacity",0);O&&J.selectAll(".tick text").attr("transform","rotate("+O+" 0,0)").style("text-anchor",0<O?"start":"end");l.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}B&&(r.scale(N).ticks(W/36).tickSize(-aa,0),l.select(".nv-y.nv-axis").transition().call(r));n.dispatch.on("stateChange",function(b){R=b;L.stateChange(R);a.update()});
e.dispatch.on("legendClick",function(e,l){if(e.disabled){I=I.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}R.stacked=b.stacked();L.stateChange(R);a.update()}});L.on("tooltipShow",function(e){if(P){var l=F.parentNode,h=e.pos[0]+(l.offsetLeft||0),n=e.pos[1]+(l.offsetTop||0),s=k.tickFormat()(b.x()(e.point,e.pointIndex)),t=r.tickFormat()(b.y()(e.point,e.pointIndex)),s=K(e.series.key,s,t,e,a);u.tooltip.show([h,n],s,
0>e.value?"n":"s",null,l)}});L.on("changeState",function(e){"undefined"!==typeof e.disabled&&(G.forEach(function(a,b){a.disabled=e.disabled[b]}),R.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),R.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBar(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e=u.models.legend(),h={top:30,right:20,bottom:50,left:60},t=null,s=null,H=u.utils.defaultColor(),A=!0,z=!0,D=!0,B=!0,M=!1,S=!0,E=!1,O=0,P=!0,K=function(a,
b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},Q,N,R={stacked:!1},x=null,C="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=250;b.stacked(!1);k.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});r.orient(M?"right":"left").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];L.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){P&&u.tooltip.cleanup()});a.dispatch=L;a.multibar=b;a.legend=n;a.xAxis=k;a.yAxis=r;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=
typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:h.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return s;s=b;return a};a.color=function(b){if(!arguments.length)return H;H=u.utils.getColor(b);n.color(H);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return z;z=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;
D=b;return a};a.showYAxis=function(b){if(!arguments.length)return B;B=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;r.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return S;S=b;return a};a.rotateLabels=function(b){if(!arguments.length)return O;O=b;return a};a.staggerLabels=function(b){if(!arguments.length)return E;E=b;return a};a.tooltip=function(b){if(!arguments.length)return K;K=b;return a};a.tooltips=function(b){if(!arguments.length)return P;
P=b;return a};a.tooltipContent=function(b){if(!arguments.length)return K;K=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return x;x=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return y;y=b;return a};return a};u.models.multiBarHorizontal=function(){function a(n){n.each(function(a){var n=k-b.left-b.right,u=r-b.top-b.bottom;d3.select(this);
B&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(s)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});B&&a[0].values.map(function(b,e){var h=0,l=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=l-a.size,l-=a.size):(a.y1=h,h+=a.size)})});var L=K&&Q?[]:a.map(function(a){return a.values.map(function(a,b){return{x:t(a,b),y:s(a,b),y0:a.y0,y1:a.y1}})});e.domain(K||d3.merge(L).map(function(a){return a.x})).rangeBands(N||[0,u],.1);h.domain(Q||
d3.extent(d3.merge(L).map(function(a){return B?0<a.y?a.y1+a.y:a.y1:a.y}).concat(H)));M&&!B?h.range(R||[0>h.domain()[0]?E:0,n-(0<h.domain()[1]?E:0)]):h.range(R||[0,n]);C=C||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);n=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);u=n.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");u.append("defs");u=u.append("g");n.select("g");u.append("g").attr("class","nv-groups");n.attr("transform","translate("+b.left+
","+b.top+")");n=n.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});n.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);n.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();n.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return A(a,b)}).style("stroke",function(a,b){return A(a,b)});n.transition().style("stroke-opacity",
1).style("fill-opacity",.75);n=n.selectAll("g.nv-bar").data(function(a){return a.values});n.exit().remove();u=n.enter().append("g").attr("transform",function(b,h,k){return"translate("+C(B?b.y0:0)+","+(B?0:k*e.rangeBand()/a.length+e(t(b,h)))+")"});u.append("rect").attr("width",0).attr("height",e.rangeBand()/(B?1:a.length));n.on("mouseover",function(b,k){d3.select(this).classed("hover",!0);x.elementMouseover({value:s(b,k),point:b,series:a[b.series],pos:[h(s(b,k)+(B?b.y0:0)),e(t(b,k))+e.rangeBand()*
(B?a.length/2:b.series+.5)/a.length],pointIndex:k,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);x.elementMouseout({value:s(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,k){x.elementClick({value:s(b,k),point:b,series:a[b.series],pos:[e(t(b,k))+e.rangeBand()*(B?a.length/2:b.series+.5)/a.length,h(s(b,k)+(B?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,k){x.elementDblClick({value:s(b,k),point:b,series:a[b.series],pos:[e(t(b,k))+e.rangeBand()*(B?a.length/2:b.series+.5)/a.length,h(s(b,k)+(B?b.y0:0))],pointIndex:k,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});u.append("text");M&&!B?(n.select("text").attr("text-anchor",function(a,b){return 0>s(a,b)?"end":"start"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return O(s(a,b))}),n.transition().select("text").attr("x",function(a,b){return 0>s(a,
b)?-4:h(s(a,b))-h(0)+4})):n.selectAll("text").text("");S&&!B?(u.append("text").classed("nv-bar-label",!0),n.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>s(a,b)?"start":"end"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return t(a,b)}),n.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>s(a,b)?h(0)-h(s(a,b))+4:-4})):n.selectAll("text.nv-bar-label").text("");n.attr("class",function(a,b){return 0>s(a,b)?"nv-bar negative":
"nv-bar positive"});z&&(D||(D=a.map(function(){return!0})),n.style("fill",function(a,b,e){return d3.rgb(z(a,b)).darker(D.map(function(a,b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(z(a,b)).darker(D.map(function(a,b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}));B?n.transition().attr("transform",function(a,b){return"translate("+h(a.y1)+","+e(t(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(h(s(a,
b)+a.y0)-h(a.y0))}).attr("height",e.rangeBand()):n.transition().attr("transform",function(b,k){return"translate("+(0>s(b,k)?h(s(b,k)):h(0))+","+(b.series*e.rangeBand()/a.length+e(t(b,k)))+")"}).select("rect").attr("height",e.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(h(s(a,b))-h(0)),1)});e.copy();C=h.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),h=d3.scale.linear(),t=function(a){return a.x},s=
function(a){return a.y},H=[0],A=u.utils.defaultColor(),z=null,D,B=!1,M=!1,S=!1,E=60,O=d3.format(",.2f"),P=1200,K,Q,N,R,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),C;a.dispatch=x;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return s;s=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return K;K=b;return a};a.yDomain=function(b){if(!arguments.length)return Q;
Q=b;return a};a.xRange=function(b){if(!arguments.length)return N;N=b;return a};a.yRange=function(b){if(!arguments.length)return R;R=b;return a};a.forceY=function(b){if(!arguments.length)return H;H=b;return a};a.stacked=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;A=u.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return D;D=b;return a};
a.id=function(b){if(!arguments.length)return n;n=b;return a};a.delay=function(b){if(!arguments.length)return P;P=b;return a};a.showValues=function(b){if(!arguments.length)return M;M=b;return a};a.showBarLabels=function(b){if(!arguments.length)return S;S=b;return a};a.valueFormat=function(b){if(!arguments.length)return O;O=b;return a};a.valuePadding=function(b){if(!arguments.length)return E;E=b;return a};return a};u.models.multiBarHorizontalChart=function(){function a(x){x.each(function(x){var L=d3.select(this),
y=this,I=(t||parseInt(L.style("width"))||960)-h.left-h.right,G=(s||parseInt(L.style("height"))||400)-h.top-h.bottom;a.update=function(){L.transition().duration(R).call(a)};a.container=this;P.disabled=x.map(function(a){return!!a.disabled});if(!K){var U;K={};for(U in P)K[U]=P[U]instanceof Array?P[U].slice(0):P[U]}if(x&&x.length&&x.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return U=L.selectAll(".nv-noData").data([Q]),U.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",h.left+I/2).attr("y",h.top+G/2).text(function(a){return a}),a;E=b.xScale();O=b.yScale();U=L.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([x]);var F=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),aa=U.select("g");F.append("g").attr("class","nv-x nv-axis");F.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");F.append("g").attr("class",
"nv-barsWrap");F.append("g").attr("class","nv-legendWrap");F.append("g").attr("class","nv-controlsWrap");z&&(n.width(I-(A?180:0)),b.barColor()&&x.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),aa.select(".nv-legendWrap").datum(x).call(n),h.top!=n.height()&&(h.top=n.height(),G=(s||parseInt(L.style("height"))||400)-h.top-h.bottom),aa.select(".nv-legendWrap").attr("transform","translate("+(A?180:0)+","+-h.top+")"));if(A){var W=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];e.width(A?180:0).color(["#444","#444","#444"]);aa.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-h.top+")").call(e)}U.attr("transform","translate("+h.left+","+h.top+")");b.disabled(x.map(function(a){return a.disabled})).width(I).height(G).color(x.map(function(a,b){return a.color||H(a,b)}).filter(function(a,b){return!x[b].disabled}));aa.select(".nv-barsWrap").datum(x.filter(function(a){return!a.disabled})).transition().call(b);D&&(k.scale(E).ticks(G/24).tickSize(-I,
0),aa.select(".nv-x.nv-axis").transition().call(k),aa.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));B&&(r.scale(O).ticks(I/100).tickSize(-G,0),aa.select(".nv-y.nv-axis").attr("transform","translate(0,"+G+")"),aa.select(".nv-y.nv-axis").transition().call(r));aa.select(".nv-zeroLine line").attr("x1",O(0)).attr("x2",O(0)).attr("y1",0).attr("y2",-G);n.dispatch.on("stateChange",function(b){P=b;N.stateChange(P);a.update()});e.dispatch.on("legendClick",function(e,h){if(e.disabled){W=W.map(function(a){a.disabled=
!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}P.stacked=b.stacked();N.stateChange(P);a.update()}});N.on("tooltipShow",function(e){if(M){var h=y.parentNode,n=e.pos[0]+(h.offsetLeft||0),s=e.pos[1]+(h.offsetTop||0),t=k.tickFormat()(b.x()(e.point,e.pointIndex)),x=r.tickFormat()(b.y()(e.point,e.pointIndex)),t=S(e.series.key,t,x,e,a);u.tooltip.show([n,s],t,0>e.value?"e":"w",null,h)}});N.on("changeState",function(e){"undefined"!==typeof e.disabled&&
(x.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),P.stacked=e.stacked);a.update()})});return a}var b=u.models.multiBarHorizontal(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend().height(30),e=u.models.legend().height(30),h={top:30,right:20,bottom:50,left:60},t=null,s=null,H=u.utils.defaultColor(),A=!0,z=!0,D=!0,B=!0,M=!0,S=function(a,b,e,h,k){return"<h3>"+a+" - "+b+"</h3><p>"+e+"</p>"},E,O,P={stacked:!1},K=null,
Q="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),R=250;b.stacked(!1);k.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});r.orient("bottom").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top];N.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){M&&u.tooltip.cleanup()});
a.dispatch=N;a.multibar=b;a.legend=n;a.xAxis=k;a.yAxis=r;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return h;h.top="undefined"!=typeof b.top?b.top:h.top;h.right="undefined"!=typeof b.right?b.right:h.right;h.bottom="undefined"!=typeof b.bottom?b.bottom:h.bottom;h.left="undefined"!=typeof b.left?b.left:
h.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return s;s=b;return a};a.color=function(b){if(!arguments.length)return H;H=u.utils.getColor(b);n.color(H);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return z;z=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return B;
B=b;return a};a.tooltip=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return M;M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return K;K=b;return a};a.noData=function(b){if(!arguments.length)return Q;Q=b;return a};a.transitionDuration=function(b){if(!arguments.length)return R;R=b;return a};return a};
u.models.multiChart=function(){function a(C){C.each(function(C){var y=d3.select(this),I=this;a.update=function(){y.transition().call(a)};a.container=this;var G=(r||parseInt(y.style("width"))||960)-b.left-b.right,U=(n||parseInt(y.style("height"))||400)-b.top-b.bottom,F=C.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),aa=C.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),W=C.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),l=C.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),J=C.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),ca=C.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),oa=C.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),ga=C.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});s.domain(d3.extent(d3.merge(oa.concat(ga)),function(a){return a.x})).range([0,
G]);var X=y.selectAll("g.wrap.multiChart").data([C]),fa=X.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");fa.append("g").attr("class","x axis");fa.append("g").attr("class","y1 axis");fa.append("g").attr("class","y2 axis");fa.append("g").attr("class","lines1Wrap");fa.append("g").attr("class","lines2Wrap");fa.append("g").attr("class","bars1Wrap");fa.append("g").attr("class","bars2Wrap");fa.append("g").attr("class","stack1Wrap");fa.append("g").attr("class","stack2Wrap");fa.append("g").attr("class",
"legendWrap");X=X.select("g");e&&(R.width(G/2),X.select(".legendWrap").datum(C.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(R),b.top!=R.height()&&(b.top=R.height(),U=(n||parseInt(y.style("height"))||400)-b.top-b.bottom),X.select(".legendWrap").attr("transform","translate("+G/2+","+-b.top+")"));B.width(G).height(U).interpolate("monotone").color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,
b){return!C[b].disabled&&1==C[b].yAxis&&"line"==C[b].type}));M.width(G).height(U).interpolate("monotone").color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!C[b].disabled&&2==C[b].yAxis&&"line"==C[b].type}));S.width(G).height(U).color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!C[b].disabled&&1==C[b].yAxis&&"bar"==C[b].type}));E.width(G).height(U).color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!C[b].disabled&&
2==C[b].yAxis&&"bar"==C[b].type}));O.width(G).height(U).color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!C[b].disabled&&1==C[b].yAxis&&"area"==C[b].type}));P.width(G).height(U).color(C.map(function(a,b){return a.color||k[b%k.length]}).filter(function(a,b){return!C[b].disabled&&2==C[b].yAxis&&"area"==C[b].type}));X.attr("transform","translate("+b.left+","+b.top+")");var fa=X.select(".lines1Wrap").datum(F),ha=X.select(".bars1Wrap").datum(W),ba=X.select(".stack1Wrap").datum(J),
Y=X.select(".lines2Wrap").datum(aa),la=X.select(".bars2Wrap").datum(l),ea=X.select(".stack2Wrap").datum(ca),ma=J.length?J.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[],ra=ca.length?ca.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[];z.domain(H||d3.extent(d3.merge(oa).concat(ma),function(a){return a.y})).range([0,U]);D.domain(A||
d3.extent(d3.merge(ga).concat(ra),function(a){return a.y})).range([0,U]);B.yDomain(z.domain());S.yDomain(z.domain());O.yDomain(z.domain());M.yDomain(D.domain());E.yDomain(D.domain());P.yDomain(D.domain());J.length&&d3.transition(ba).call(O);ca.length&&d3.transition(ea).call(P);W.length&&d3.transition(ha).call(S);l.length&&d3.transition(la).call(E);F.length&&d3.transition(fa).call(B);aa.length&&d3.transition(Y).call(M);K.ticks(G/100).tickSize(-U,0);X.select(".x.axis").attr("transform","translate(0,"+
U+")");d3.transition(X.select(".x.axis")).call(K);Q.ticks(U/36).tickSize(-G,0);d3.transition(X.select(".y1.axis")).call(Q);N.ticks(U/36).tickSize(-G,0);d3.transition(X.select(".y2.axis")).call(N);X.select(".y2.axis").style("opacity",ga.length?1:0).attr("transform","translate("+s.range()[1]+",0)");R.dispatch.on("stateChange",function(b){a.update()});x.on("tooltipShow",function(b){if(h){var e=I.parentNode,l=b.pos[0]+(e.offsetLeft||0),k=b.pos[1]+(e.offsetTop||0),n=K.tickFormat()(B.x()(b.point,b.pointIndex)),
r=(2==b.series.yAxis?N:Q).tickFormat()(B.y()(b.point,b.pointIndex));b=t(b.series.key,n,r,b,a);u.tooltip.show([l,k],b,void 0,void 0,e.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},k=d3.scale.category20().range(),r=null,n=null,e=!0,h=!0,t=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},s,H,A;s=d3.scale.linear();var z=d3.scale.linear(),D=d3.scale.linear(),B=u.models.line().yScale(z),M=u.models.line().yScale(D),S=u.models.multiBar().stacked(!1).yScale(z),E=u.models.multiBar().stacked(!1).yScale(D),
O=u.models.stackedArea().yScale(z),P=u.models.stackedArea().yScale(D),K=u.models.axis().scale(s).orient("bottom").tickPadding(5),Q=u.models.axis().scale(z).orient("left"),N=u.models.axis().scale(D).orient("right"),R=u.models.legend().height(30),x=d3.dispatch("tooltipShow","tooltipHide");B.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});B.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});S.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});S.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});
O.dispatch.on("tooltipShow",function(a){if(!Math.round(100*O.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});O.dispatch.on("tooltipHide",function(a){x.tooltipHide(a)});P.dispatch.on("tooltipShow",function(a){if(!Math.round(100*P.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});P.dispatch.on("tooltipHide",
function(a){x.tooltipHide(a)});B.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});B.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];x.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)});x.on("tooltipHide",function(){h&&u.tooltip.cleanup()});a.dispatch=x;a.lines1=B;a.lines2=M;a.bars1=S;a.bars2=
E;a.stack1=O;a.stack2=P;a.xAxis=K;a.yAxis1=Q;a.yAxis2=N;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;B.x(b);S.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;B.y(b);S.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return H;H=b;return a};a.yDomain2=function(b){if(!arguments.length)return A;A=b;return a};a.margin=function(e){if(!arguments.length)return b;b=e;return a};a.width=function(b){if(!arguments.length)return r;
r=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return k;k=b;R.color(b);return a};a.showLegend=function(b){if(!arguments.length)return e;e=b;return a};a.tooltips=function(b){if(!arguments.length)return h;h=b;return a};a.tooltipContent=function(b){if(!arguments.length)return t;t=b;return a};return a};u.models.ohlcBar=function(){function a(u){u.each(function(a){var u=k-b.left-b.right,x=r-b.top-b.bottom,O=d3.select(this);e.domain(P||
d3.extent(a[0].values.map(t).concat(B)));S?e.range(Q||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):e.range(Q||[0,u]);h.domain(K||[d3.min(a[0].values.map(D).concat(M)),d3.max(a[0].values.map(z).concat(M))]).range(N||[x,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):
h.domain([-1,1]));var G=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),U=G.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),F=U.append("defs"),U=U.append("g"),I=G.select("g");U.append("g").attr("class","nv-ticks");G.attr("transform","translate("+b.left+","+b.top+")");O.on("click",function(a,b){R.chartClick({data:a,index:b,pos:d3.event,id:n})});F.append("clipPath").attr("id","nv-chart-clip-path-"+n).append("rect");G.select("#nv-chart-clip-path-"+n+" rect").attr("width",
u).attr("height",x);I.attr("clip-path",E?"url(#nv-chart-clip-path-"+n+")":"");x=G.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});x.exit().remove();x.enter().append("path").attr("class",function(a,b,e){return(H(a,b)>A(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b}).attr("d",function(b,e){var k=u/a[0].values.length*.9;return"m0,0l0,"+(h(H(b,e))-h(z(b,e)))+"l"+-k/2+",0l"+k/2+",0l0,"+(h(D(b,e))-h(H(b,e)))+"l0,"+(h(A(b,e))-h(D(b,e)))+"l"+k/2+",0l"+-k/2+",0z"}).attr("transform",
function(a,b){return"translate("+e(t(a,b))+","+h(z(a,b))+")"}).on("mouseover",function(b,l){d3.select(this).classed("hover",!0);R.elementMouseover({point:b,series:a[0],pos:[e(t(b,l)),h(s(b,l))],pointIndex:l,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);R.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event})}).on("click",function(a,b){R.elementClick({value:s(a,b),data:a,index:b,pos:[e(t(a,b)),h(s(a,b))],e:d3.event,id:n});d3.event.stopPropagation()}).on("dblclick",
function(a,b){R.elementDblClick({value:s(a,b),data:a,index:b,pos:[e(t(a,b)),h(s(a,b))],e:d3.event,id:n});d3.event.stopPropagation()});x.attr("class",function(a,b,e){return(H(a,b)>A(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b});d3.transition(x).attr("transform",function(a,b){return"translate("+e(t(a,b))+","+h(z(a,b))+")"}).attr("d",function(b,e){var k=u/a[0].values.length*.9;return"m0,0l0,"+(h(H(b,e))-h(z(b,e)))+"l"+-k/2+",0l"+k/2+",0l0,"+(h(D(b,e))-h(H(b,e)))+"l0,"+(h(A(b,e))-
h(D(b,e)))+"l"+k/2+",0l"+-k/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=Math.floor(1E4*Math.random()),e=d3.scale.linear(),h=d3.scale.linear(),t=function(a){return a.x},s=function(a){return a.y},H=function(a){return a.open},A=function(a){return a.close},z=function(a){return a.high},D=function(a){return a.low},B=[],M=[],S=!1,E=!0,O=u.utils.defaultColor(),P,K,Q,N,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
R;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return t;t=b;return a};a.y=function(b){if(!arguments.length)return s;s=b;return a};a.open=function(b){if(!arguments.length)return H;H=b;return a};a.close=function(b){if(!arguments.length)return A;A=b;return a};a.high=function(b){if(!arguments.length)return z;z=b;return a};a.low=function(b){if(!arguments.length)return D;D=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:
b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;h=b;return a};a.xDomain=function(b){if(!arguments.length)return P;P=b;return a};a.yDomain=
function(b){if(!arguments.length)return K;K=b;return a};a.xRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceX=function(b){if(!arguments.length)return B;B=b;return a};a.forceY=function(b){if(!arguments.length)return M;M=b;return a};a.padData=function(b){if(!arguments.length)return S;S=b;return a};a.clipEdge=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return O;O=
u.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return n;n=b;return a};return a};u.models.pie=function(){function a(h){h.each(function(a){var h=k-b.left-b.right,u=r-b.top-b.bottom,N=Math.min(h,u)/2,y=N-N/5,H=d3.select(this);a=H.selectAll(".nv-wrap.nv-pie").data(a);var G=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+t).append("g"),U=a.select("g");G.append("g").attr("class","nv-pie");G.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");U.select(".nv-pie").attr("transform","translate("+h/2+","+u/2+")");U.select(".nv-pieLabels").attr("transform","translate("+h/2+","+u/2+")");H.on("click",function(a,b){Q.chartClick({data:a,index:b,pos:d3.event,id:t})});var F=d3.svg.arc().outerRadius(y);O&&F.startAngle(O);P&&F.endAngle(P);S&&F.innerRadius(N*K);u=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:e(a)});h=a.select(".nv-pie").selectAll(".nv-slice").data(u);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(u);
h.exit().remove();a.exit().remove();u=h.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);Q.elementMouseover({label:n(a.data),value:e(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:t})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);Q.elementMouseout({label:n(a.data),value:e(a.data),point:a.data,index:b,id:t})}).on("click",function(a,b){Q.elementClick({label:n(a.data),value:e(a.data),point:a.data,
index:b,pos:d3.event,id:t});d3.event.stopPropagation()}).on("dblclick",function(a,b){Q.elementDblClick({label:n(a.data),value:e(a.data),point:a.data,index:b,pos:d3.event,id:t});d3.event.stopPropagation()});h.attr("fill",function(a,b){return s(a,b)}).attr("stroke",function(a,b){return s(a,b)});u.append("path").each(function(a){this._current=a});h.select("path").transition().attr("d",F).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
S||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return F(b(a))}});if(A){var I=d3.svg.arc().innerRadius(0);z&&(I=F);D&&(I=d3.svg.arc().outerRadius(F.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var e=d3.select(this);e.attr("transform",function(a){if(E){a.outerRadius=y+10;a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+I.centroid(a)+
") rotate("+b+")"}a.outerRadius=N+10;a.innerRadius=N+15;return"translate("+I.centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",E?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var W={},l=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(E){a.outerRadius=y+10;a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+I.centroid(a)+") rotate("+b+")"}a.outerRadius=N+10;a.innerRadius=N+15;a=I.centroid(a);b=l(a);W[b]&&(a[1]-=14);W[l(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",E?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var h=(a.endAngle-a.startAngle)/(2*Math.PI),l={key:n(a.data),value:e(a.data),percent:d3.format("%")(h)};return a.value&&h>M?l[B]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},k=500,r=500,n=function(a){return a.x},e=function(a){return a.y},h=function(a){return a.description},t=Math.floor(1E4*Math.random()),s=u.utils.defaultColor(),H=d3.format(",.2f"),A=!0,z=!0,D=!1,B="key",M=.02,S=!1,E=!1,O=!1,P=!1,K=.5,Q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=Q;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.values=function(b){u.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return n;n=b;return a};a.y=function(b){if(!arguments.length)return e;e=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return h;h=b;return a};a.showLabels=function(b){if(!arguments.length)return A;A=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return E;E=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return D;D=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return z;z=b;return a};a.labelType=function(b){if(!arguments.length)return B;B=(B=b)||"key";return a};a.donut=function(b){if(!arguments.length)return S;
S=b;return a};a.donutRatio=function(b){if(!arguments.length)return K;K=b;return a};a.startAngle=function(b){if(!arguments.length)return O;O=b;return a};a.endAngle=function(b){if(!arguments.length)return P;P=b;return a};a.id=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return s;s=u.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return H;H=b;return a};a.labelThreshold=function(b){if(!arguments.length)return M;M=b;return a};
return a};u.models.pieChart=function(){function a(s){s.each(function(s){var t=d3.select(this),u=(n||parseInt(t.style("width"))||960)-r.left-r.right,M=(e||parseInt(t.style("height"))||400)-r.top-r.bottom;a.update=function(){t.transition().call(a)};a.container=this;A.disabled=s.map(function(a){return!!a.disabled});if(!z){var H;z={};for(H in A)z[H]=A[H]instanceof Array?A[H].slice(0):A[H]}if(s&&s.length)t.selectAll(".nv-noData").remove();else return H=t.selectAll(".nv-noData").data([D]),H.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",r.left+u/2).attr("y",r.top+M/2).text(function(a){return a}),a;H=t.selectAll("g.nv-wrap.nv-pieChart").data([s]);var Q=H.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),N=H.select("g");Q.append("g").attr("class","nv-pieWrap");Q.append("g").attr("class","nv-legendWrap");h&&(k.width(u).key(b.x()),H.select(".nv-legendWrap").datum(s).call(k),r.top!=k.height()&&(r.top=k.height(),M=(e||parseInt(t.style("height"))||
400)-r.top-r.bottom),H.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"));H.attr("transform","translate("+r.left+","+r.top+")");b.width(u).height(M);u=N.select(".nv-pieWrap").datum([s]);d3.transition(u).call(b);k.dispatch.on("stateChange",function(b){A=b;B.stateChange(A);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){B.tooltipHide(a)});B.on("changeState",function(b){"undefined"!==typeof b.disabled&&(s.forEach(function(a,e){a.disabled=b.disabled[e]}),A.disabled=
b.disabled);a.update()})});return a}var b=u.models.pie(),k=u.models.legend(),r={top:30,right:20,bottom:20,left:20},n=null,e=null,h=!0,t=u.utils.defaultColor(),s=!0,H=function(a,b,e,h){return"<h3>"+a+"</h3><p>"+b+"</p>"},A={},z=null,D="No Data Available.",B=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];B.tooltipShow(a)});B.on("tooltipShow",function(e){if(s){var h=b.description()(e.point)||
b.x()(e.point),k=e.pos[0]+0,n=e.pos[1]+0,r=b.valueFormat()(b.y()(e.point)),h=H(h,r,e,a);u.tooltip.show([k,n],h,0>e.value?"n":"s",null,void 0)}});B.on("tooltipHide",function(){s&&u.tooltip.cleanup()});a.legend=k;a.dispatch=B;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=
typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=function(b){if(!arguments.length)return e;e=b;return a};a.color=function(e){if(!arguments.length)return t;t=u.utils.getColor(e);k.color(t);b.color(t);return a};a.showLegend=function(b){if(!arguments.length)return h;h=b;return a};a.tooltips=
function(b){if(!arguments.length)return s;s=b;return a};a.tooltipContent=function(b){if(!arguments.length)return H;H=b;return a};a.state=function(b){if(!arguments.length)return A;A=b;return a};a.defaultState=function(b){if(!arguments.length)return z;z=b;return a};a.noData=function(b){if(!arguments.length)return D;D=b;return a};return a};u.models.scatter=function(){function a(X){X.each(function(a){var X=k-b.left-b.right,ba=r-b.top-b.bottom,Y=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var la=L&&y&&U?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:H(a,b),y:A(a,b),size:z(a,b)}})}));h.domain(L||d3.extent(la.map(function(a){return a.x}).concat(M)));Q&&a[0]?h.range(I||[(X*N+X)/(2*a[0].values.length),X-X*(1+N)/(2*a[0].values.length)]):h.range(I||[0,X]);t.domain(y||d3.extent(la.map(function(a){return a.y}).concat(S))).range(G||[ba,0]);s.domain(U||d3.extent(la.map(function(a){return a.size}).concat(E))).range(F||[16,256]);if(h.domain()[0]===h.domain()[1]||
t.domain()[0]===t.domain()[1])aa=!0;h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-.01*t.domain()[0],t.domain()[1]+.01*t.domain()[1]]):t.domain([-1,1]));isNaN(h.domain()[0])&&h.domain([-1,1]);isNaN(t.domain()[0])&&t.domain([-1,1]);J=J||h;ca=ca||t;var ea=Y.selectAll("g.nv-wrap.nv-scatter").data([a]),la=ea.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+e+(aa?" nv-single-point":"")),Y=la.append("defs"),la=la.append("g"),ma=ea.select("g");la.append("g").attr("class","nv-groups");la.append("g").attr("class","nv-point-paths");ea.attr("transform","translate("+b.left+","+b.top+")");Y.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");ea.select("#nv-edge-clip-"+e+" rect").attr("width",X).attr("height",0<ba?ba:0);ma.attr("clip-path",R?"url(#nv-edge-clip-"+e+")":"");ga=!0;X=ea.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});X.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);X.exit().remove();X.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});X.transition().style("fill",function(a,b){return n(a,b)}).style("stroke",function(a,b){return n(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);B?(ba=X.selectAll("circle.nv-point").data(function(a){return a.values},P),ba.enter().append("circle").style("fill",function(a,
b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return u.utils.NaNtoZero(J(H(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(ca(A(a,b)))}).attr("r",function(a,b){return Math.sqrt(s(z(a,b))/Math.PI)}),ba.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return u.utils.NaNtoZero(h(H(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(t(A(a,b)))}).remove(),ba.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ba.transition().attr("cx",function(a,b){return u.utils.NaNtoZero(h(H(a,b)))}).attr("cy",function(a,b){return u.utils.NaNtoZero(t(A(a,b)))}).attr("r",function(a,b){return Math.sqrt(s(z(a,b))/Math.PI)})):(ba=X.selectAll("path.nv-point").data(function(a){return a.values}),ba.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+J(H(a,b))+","+
ca(A(a,b))+")"}).attr("d",d3.svg.symbol().type(D).size(function(a,b){return s(z(a,b))})),ba.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+h(H(a,b))+","+t(A(a,b))+")"}).remove(),ba.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ba.transition().attr("transform",function(a,b){return"translate("+h(H(a,b))+","+t(A(a,b))+")"}).attr("d",d3.svg.symbol().type(D).size(function(a,b){return s(z(a,
b))})));clearTimeout(oa);oa=setTimeout(function(){if(!O)return!1;var n=d3.merge(a.map(function(a,b){return a.values.map(function(a,e){var l=H(a,e),k=A(a,e);return[h(l)+1E-7*Math.random(),t(k)+1E-7*Math.random(),b,e,a]}).filter(function(a,b){return K(a[4],b)})}));if(!0===l){if(x){ea.select("defs").selectAll(".nv-point-clips").data([e]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+e);var s=ea.select("#nv-points-clip-"+e).selectAll("circle").data(n);s.enter().append("circle").attr("r",
C);s.exit().remove();s.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});ea.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+e+")")}n.length&&(n.push([h.range()[0]-20,t.range()[0]-20,null,null]),n.push([h.range()[1]+20,t.range()[1]+20,null,null]),n.push([h.range()[0]-20,t.range()[0]+20,null,null]),n.push([h.range()[1]+20,t.range()[1]-20,null,null]));var u=d3.geom.polygon([[-10,-10],[-10,r+10],[k+10,r+10],[k+10,-10]]),s=d3.geom.voronoi(n).map(function(a,b){return{data:u.clip(a),
series:n[b][2],point:n[b][3]}}),s=ea.select(".nv-point-paths").selectAll("path").data(s);s.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});s.exit().remove();s.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var G=function(e,l){if(ga)return 0;var k=a[e.series];if("undefined"!==typeof k){var n=k.values[e.point];l({point:n,series:k,pos:[h(H(n,e.point))+b.left,t(A(n,e.point))+b.top],seriesIndex:e.series,pointIndex:e.point})}};s.on("click",function(a){G(a,
W.elementClick)}).on("mouseover",function(a){G(a,W.elementMouseover)}).on("mouseout",function(a,b){G(a,W.elementMouseout)})}else ea.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,k){if(ga||!a[e.series])return 0;var l=a[e.series],n=l.values[k];W.elementClick({point:n,series:l,pos:[h(H(n,k))+b.left,t(A(n,k))+b.top],seriesIndex:e.series,pointIndex:k})}).on("mouseover",function(e,k){if(ga||!a[e.series])return 0;var l=a[e.series],n=l.values[k];W.elementMouseover({point:n,
series:l,pos:[h(H(n,k))+b.left,t(A(n,k))+b.top],seriesIndex:e.series,pointIndex:k})}).on("mouseout",function(b,e){if(ga||!a[b.series])return 0;var h=a[b.series];W.elementMouseout({point:h.values[e],series:h,seriesIndex:b.series,pointIndex:e})});ga=!1},300);J=h.copy();ca=t.copy();s.copy()});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=u.utils.defaultColor(),e=Math.floor(1E5*Math.random()),h=d3.scale.linear(),t=d3.scale.linear(),s=d3.scale.linear(),H=function(a){return a.x},A=function(a){return a.y},
z=function(a){return a.size||1},D=function(a){return a.shape||"circle"},B=!0,M=[],S=[],E=[],O=!0,P=null,K=function(a){return!a.notActive},Q=!1,N=.1,R=!1,x=!0,C=function(){return 25},L=null,y=null,I=null,G=null,U=null,F=null,aa=!1,W=d3.dispatch("elementClick","elementMouseover","elementMouseout"),l=!0,J,ca,oa,ga=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+e+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,h){d3.select(".nv-chart-"+e+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",h)};W.on("elementMouseover.point",function(b){O&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});W.on("elementMouseout.point",function(b){O&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=W;a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return H;H=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return A;A=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return z;z=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xScale=function(b){if(!arguments.length)return h;h=b;return a};a.yScale=function(b){if(!arguments.length)return t;t=b;return a};a.zScale=function(b){if(!arguments.length)return s;
s=b;return a};a.xDomain=function(b){if(!arguments.length)return L;L=b;return a};a.yDomain=function(b){if(!arguments.length)return y;y=b;return a};a.sizeDomain=function(b){if(!arguments.length)return U;U=b;return a};a.xRange=function(b){if(!arguments.length)return I;I=b;return a};a.yRange=function(b){if(!arguments.length)return G;G=b;return a};a.sizeRange=function(b){if(!arguments.length)return F;F=b;return a};a.forceX=function(b){if(!arguments.length)return M;M=b;return a};a.forceY=function(b){if(!arguments.length)return S;
S=b;return a};a.forceSize=function(b){if(!arguments.length)return E;E=b;return a};a.interactive=function(b){if(!arguments.length)return O;O=b;return a};a.pointKey=function(b){if(!arguments.length)return P;P=b;return a};a.pointActive=function(b){if(!arguments.length)return K;K=b;return a};a.padData=function(b){if(!arguments.length)return Q;Q=b;return a};a.padDataOuter=function(b){if(!arguments.length)return N;N=b;return a};a.clipEdge=function(b){if(!arguments.length)return R;R=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return x;x=b;return a};a.useVoronoi=function(b){if(!arguments.length)return l;l=b;!1===l&&(x=!1);return a};a.clipRadius=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return n;n=u.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return D;D=b;return a};a.onlyCircles=function(b){if(!arguments.length)return B;B=b;return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.singlePoint=function(b){if(!arguments.length)return aa;
aa=b;return a};return a};u.models.scatterChart=function(){function a(ca){ca.each(function(ca){function ga(){if(C)return ea.select(".nv-point-paths").style("pointer-events","all"),!1;ea.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);D.distortion(x).focus(a[0]);B.distortion(x).focus(a[1]);ea.select(".nv-scatterWrap").call(b);K&&ea.select(".nv-x.nv-axis").call(k);Q&&ea.select(".nv-y.nv-axis").call(r);ea.select(".nv-distributionX").datum(ca.filter(function(a){return!a.disabled})).call(h);
ea.select(".nv-distributionY").datum(ca.filter(function(a){return!a.disabled})).call(t)}var X=d3.select(this),fa=this,ha=(H||parseInt(X.style("width"))||960)-s.left-s.right,ba=(A||parseInt(X.style("height"))||400)-s.top-s.bottom;a.update=function(){X.transition().duration(l).call(a)};a.container=this;U.disabled=ca.map(function(a){return!!a.disabled});if(!F){var Y;F={};for(Y in U)F[Y]=U[Y]instanceof Array?U[Y].slice(0):U[Y]}if(ca&&ca.length&&ca.filter(function(a){return a.values.length}).length)X.selectAll(".nv-noData").remove();
else return Y=X.selectAll(".nv-noData").data([W]),Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Y.attr("x",s.left+ha/2).attr("y",s.top+ba/2).text(function(a){return a}),a;Y=X.selectAll("g.nv-wrap.nv-scatterChart").data([ca]);var la=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),ea=Y.select("g");la.append("rect").attr("class","nvd3 nv-background");la.append("g").attr("class","nv-x nv-axis");
la.append("g").attr("class","nv-y nv-axis");la.append("g").attr("class","nv-scatterWrap");la.append("g").attr("class","nv-distWrap");la.append("g").attr("class","nv-legendWrap");la.append("g").attr("class","nv-controlsWrap");if(P){var ma=I?ha/2:ha;n.width(ma);Y.select(".nv-legendWrap").datum(ca).call(n);s.top!=n.height()&&(s.top=n.height(),ba=(A||parseInt(X.style("height"))||400)-s.top-s.bottom);Y.select(".nv-legendWrap").attr("transform","translate("+(ha-ma)+","+-s.top+")")}I&&(e.width(180).color(["#444"]),
ea.select(".nv-controlsWrap").datum(J).attr("transform","translate(0,"+-s.top+")").call(e));Y.attr("transform","translate("+s.left+","+s.top+")");N&&ea.select(".nv-y.nv-axis").attr("transform","translate("+ha+",0)");b.width(ha).height(ba).color(ca.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!ca[b].disabled}));0!==M&&b.xDomain(null);0!==S&&b.yDomain(null);Y.select(".nv-scatterWrap").datum(ca.filter(function(a){return!a.disabled})).call(b);0!==M&&(ma=D.domain()[1]-D.domain()[0],
b.xDomain([D.domain()[0]-M*ma,D.domain()[1]+M*ma]));0!==S&&(ma=B.domain()[1]-B.domain()[0],b.yDomain([B.domain()[0]-S*ma,B.domain()[1]+S*ma]));0===S&&0===M||Y.select(".nv-scatterWrap").datum(ca.filter(function(a){return!a.disabled})).call(b);K&&(k.scale(D).ticks(k.ticks()&&k.ticks().length?k.ticks():ha/100).tickSize(-ba,0),ea.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")").call(k));Q&&(r.scale(B).ticks(r.ticks()&&r.ticks().length?r.ticks():ba/36).tickSize(-ha,0),ea.select(".nv-y.nv-axis").call(r));
E&&(h.getData(b.x()).scale(D).width(ha).color(ca.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!ca[b].disabled})),la.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ea.select(".nv-distributionX").attr("transform","translate(0,"+B.range()[0]+")").datum(ca.filter(function(a){return!a.disabled})).call(h));O&&(t.getData(b.y()).scale(B).width(ba).color(ca.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!ca[b].disabled})),la.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),ea.select(".nv-distributionY").attr("transform","translate("+(N?ha:-t.size())+",0)").datum(ca.filter(function(a){return!a.disabled})).call(t));d3.fisheye&&(ea.select(".nv-background").attr("width",ha).attr("height",ba),ea.select(".nv-background").on("mousemove",ga),ea.select(".nv-background").on("click",function(){C=!C}),b.dispatch.on("elementClick.freezeFisheye",function(){C=!C}));e.dispatch.on("legendClick",function(e,h){e.disabled=!e.disabled;x=e.disabled?0:2.5;ea.select(".nv-background").style("pointer-events",
e.disabled?"none":"all");ea.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(D.distortion(x).focus(0),B.distortion(x).focus(0),ea.select(".nv-scatterWrap").call(b),ea.select(".nv-x.nv-axis").call(k),ea.select(".nv-y.nv-axis").call(r)):C=!1;a.update()});n.dispatch.on("stateChange",function(b){U.disabled=b.disabled;aa.stateChange(U);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,e){return a.pos[1]-ba});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size());a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];aa.tooltipShow(a)});aa.on("tooltipShow",function(e){if(L){var h=fa.parentNode,l=e.pos[0]+(h.offsetLeft||0),n=e.pos[1]+(h.offsetTop||0),t=e.pos[0]+(h.offsetLeft||0),x=B.range()[0]+s.top+(h.offsetTop||0),A=D.range()[0]+s.left+(h.offsetLeft||0),z=e.pos[1]+(h.offsetTop||0),C=k.tickFormat()(b.x()(e.point,
e.pointIndex)),F=r.tickFormat()(b.y()(e.point,e.pointIndex));null!=y&&u.tooltip.show([t,x],y(e.series.key,C,F,e,a),"n",1,h,"x-nvtooltip");null!=V&&u.tooltip.show([A,z],V(e.series.key,C,F,e,a),"e",1,h,"y-nvtooltip");null!=G&&u.tooltip.show([l,n],G(e.series.key,C,F,e,a),0>e.value?"n":"s",null,h)}});aa.on("changeState",function(b){"undefined"!==typeof b.disabled&&(ca.forEach(function(a,e){a.disabled=b.disabled[e]}),U.disabled=b.disabled);a.update()});D.copy();B.copy()});return a}var b=u.models.scatter(),
k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e=u.models.legend(),h=u.models.distribution(),t=u.models.distribution(),s={top:30,right:20,bottom:50,left:75},H=null,A=null,z=u.utils.defaultColor(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),B=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=0,S=0,E=!1,O=!1,P=!0,K=!0,Q=!0,N=!1,I=!!d3.fisheye,x=0,C=!1,L=!0,y=function(a,b,e){return"<strong>"+b+"</strong>"},V=function(a,b,e){return"<strong>"+
e+"</strong>"},G=null,U={},F=null,aa=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),W="No Data Available.",l=250;b.xScale(D).yScale(B);k.orient("bottom").tickPadding(10);r.orient(N?"right":"left").tickPadding(10);h.axis("x");t.axis("y");e.updateState(!1);var J=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){aa.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",t.size())});aa.on("tooltipHide",function(){L&&u.tooltip.cleanup()});a.dispatch=aa;a.scatter=b;a.legend=n;a.controls=e;a.xAxis=k;a.yAxis=r;a.distX=h;a.distY=t;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);
a.margin=function(b){if(!arguments.length)return s;s.top="undefined"!=typeof b.top?b.top:s.top;s.right="undefined"!=typeof b.right?b.right:s.right;s.bottom="undefined"!=typeof b.bottom?b.bottom:s.bottom;s.left="undefined"!=typeof b.left?b.left:s.left;return a};a.width=function(b){if(!arguments.length)return H;H=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);n.color(z);h.color(z);t.color(z);return a};
a.showDistX=function(b){if(!arguments.length)return E;E=b;return a};a.showDistY=function(b){if(!arguments.length)return O;O=b;return a};a.showControls=function(b){if(!arguments.length)return I;I=b;return a};a.showLegend=function(b){if(!arguments.length)return P;P=b;return a};a.showXAxis=function(b){if(!arguments.length)return K;K=b;return a};a.showYAxis=function(b){if(!arguments.length)return Q;Q=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return N;N=b;r.orient(b?"right":"left");
return a};a.fisheye=function(b){if(!arguments.length)return x;x=b;return a};a.xPadding=function(b){if(!arguments.length)return M;M=b;return a};a.yPadding=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return L;L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return G;G=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return V;V=b;return a};a.state=
function(b){if(!arguments.length)return U;U=b;return a};a.defaultState=function(b){if(!arguments.length)return F;F=b;return a};a.noData=function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return l;l=b;return a};return a};u.models.scatterPlusLineChart=function(){function a(l){l.each(function(l){function ca(){if(I)return Y.select(".nv-point-paths").style("pointer-events","all"),!1;Y.select(".nv-point-paths").style("pointer-events","none");var a=
d3.mouse(this);D.distortion(N).focus(a[0]);B.distortion(N).focus(a[1]);Y.select(".nv-scatterWrap").datum(l.filter(function(a){return!a.disabled})).call(b);O&&Y.select(".nv-x.nv-axis").call(k);P&&Y.select(".nv-y.nv-axis").call(r);Y.select(".nv-distributionX").datum(l.filter(function(a){return!a.disabled})).call(h);Y.select(".nv-distributionY").datum(l.filter(function(a){return!a.disabled})).call(t)}var oa=d3.select(this),ga=this,X=(H||parseInt(oa.style("width"))||960)-s.left-s.right,fa=(A||parseInt(oa.style("height"))||
400)-s.top-s.bottom;a.update=function(){oa.transition().duration(aa).call(a)};a.container=this;V.disabled=l.map(function(a){return!!a.disabled});if(!G){var ha;G={};for(ha in V)G[ha]=V[ha]instanceof Array?V[ha].slice(0):V[ha]}if(l&&l.length&&l.filter(function(a){return a.values.length}).length)oa.selectAll(".nv-noData").remove();else return ha=oa.selectAll(".nv-noData").data([F]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",s.left+
X/2).attr("y",s.top+fa/2).text(function(a){return a}),a;D=b.xScale();B=b.yScale();var ba=oa.selectAll("g.nv-wrap.nv-scatterChart").data([l]);ha=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var Y=ba.select("g");ha.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-scatterWrap");ha.append("g").attr("class",
"nv-regressionLinesWrap");ha.append("g").attr("class","nv-distWrap");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");ba.attr("transform","translate("+s.left+","+s.top+")");K&&Y.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");E&&(n.width(X/2),ba.select(".nv-legendWrap").datum(l).call(n),s.top!=n.height()&&(s.top=n.height(),fa=(A||parseInt(oa.style("height"))||400)-s.top-s.bottom),ba.select(".nv-legendWrap").attr("transform","translate("+X/
2+","+-s.top+")"));Q&&(e.width(180).color(["#444"]),Y.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-s.top+")").call(e));b.width(X).height(fa).color(l.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!l[b].disabled}));ba.select(".nv-scatterWrap").datum(l.filter(function(a){return!a.disabled})).call(b);ba.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");ba=ba.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
ba.enter().append("g").attr("class","nv-regLines");ba=ba.selectAll(".nv-regLine").data(function(a){return[a]});ba.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);ba.transition().attr("x1",D.range()[0]).attr("x2",D.range()[1]).attr("y1",function(a,b){return B(D.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return B(D.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,e){return z(a,e)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===
typeof a.slope||"undefined"===typeof a.intercept?0:1});O&&(k.scale(D).ticks(k.ticks()?k.ticks():X/100).tickSize(-fa,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")").call(k));P&&(r.scale(B).ticks(r.ticks()?r.ticks():fa/36).tickSize(-X,0),Y.select(".nv-y.nv-axis").call(r));M&&(h.getData(b.x()).scale(D).width(X).color(l.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!l[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),
Y.select(".nv-distributionX").attr("transform","translate(0,"+B.range()[0]+")").datum(l.filter(function(a){return!a.disabled})).call(h));S&&(t.getData(b.y()).scale(B).width(fa).color(l.map(function(a,b){return a.color||z(a,b)}).filter(function(a,b){return!l[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),Y.select(".nv-distributionY").attr("transform","translate("+(K?X:-t.size())+",0)").datum(l.filter(function(a){return!a.disabled})).call(t));d3.fisheye&&(Y.select(".nv-background").attr("width",
X).attr("height",fa),Y.select(".nv-background").on("mousemove",ca),Y.select(".nv-background").on("click",function(){I=!I}),b.dispatch.on("elementClick.freezeFisheye",function(){I=!I}));e.dispatch.on("legendClick",function(e,h){e.disabled=!e.disabled;N=e.disabled?0:2.5;Y.select(".nv-background").style("pointer-events",e.disabled?"none":"all");Y.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(D.distortion(N).focus(0),B.distortion(N).focus(0),Y.select(".nv-scatterWrap").call(b),
Y.select(".nv-x.nv-axis").call(k),Y.select(".nv-y.nv-axis").call(r)):I=!1;a.update()});n.dispatch.on("stateChange",function(b){V=b;U.stateChange(V);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-fa);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+h.size());a.pos=[a.pos[0]+s.left,a.pos[1]+s.top];U.tooltipShow(a)});U.on("tooltipShow",
function(e){if(x){var h=ga.parentNode,l=e.pos[0]+(h.offsetLeft||0),n=e.pos[1]+(h.offsetTop||0),t=e.pos[0]+(h.offsetLeft||0),G=B.range()[0]+s.top+(h.offsetTop||0),A=D.range()[0]+s.left+(h.offsetLeft||0),z=e.pos[1]+(h.offsetTop||0),F=k.tickFormat()(b.x()(e.point,e.pointIndex)),H=r.tickFormat()(b.y()(e.point,e.pointIndex));null!=C&&u.tooltip.show([t,G],C(e.series.key,F,H,e,a),"n",1,h,"x-nvtooltip");null!=L&&u.tooltip.show([A,z],L(e.series.key,F,H,e,a),"e",1,h,"y-nvtooltip");null!=y&&u.tooltip.show([l,
n],y(e.series.key,F,H,e.point.tooltip,e,a),0>e.value?"n":"s",null,h)}});U.on("changeState",function(b){"undefined"!==typeof b.disabled&&(l.forEach(function(a,e){a.disabled=b.disabled[e]}),V.disabled=b.disabled);a.update()});D.copy();B.copy()});return a}var b=u.models.scatter(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e=u.models.legend(),h=u.models.distribution(),t=u.models.distribution(),s={top:30,right:20,bottom:50,left:75},H=null,A=null,z=u.utils.defaultColor(),D=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),B=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=!1,S=!1,E=!0,O=!0,P=!0,K=!1,Q=!!d3.fisheye,N=0,I=!1,x=!0,C=function(a,b,e){return"<strong>"+b+"</strong>"},L=function(a,b,e){return"<strong>"+e+"</strong>"},y=function(a,b,e,h){return"<h3>"+a+"</h3><p>"+h+"</p>"},V={},G=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),F="No Data Available.",aa=250;b.xScale(D).yScale(B);k.orient("bottom").tickPadding(10);r.orient(K?"right":"left").tickPadding(10);
h.axis("x");t.axis("y");e.updateState(!1);var W=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",t.size())});U.on("tooltipHide",function(){x&&u.tooltip.cleanup()});a.dispatch=U;a.scatter=b;a.legend=n;a.controls=e;a.xAxis=k;a.yAxis=r;a.distX=h;a.distY=t;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return s;s.top="undefined"!=typeof b.top?b.top:s.top;s.right="undefined"!=typeof b.right?b.right:s.right;s.bottom="undefined"!=typeof b.bottom?b.bottom:s.bottom;s.left="undefined"!=typeof b.left?b.left:
s.left;return a};a.width=function(b){if(!arguments.length)return H;H=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return z;z=u.utils.getColor(b);n.color(z);h.color(z);t.color(z);return a};a.showDistX=function(b){if(!arguments.length)return M;M=b;return a};a.showDistY=function(b){if(!arguments.length)return S;S=b;return a};a.showControls=function(b){if(!arguments.length)return Q;Q=b;return a};a.showLegend=function(b){if(!arguments.length)return E;
E=b;return a};a.showXAxis=function(b){if(!arguments.length)return O;O=b;return a};a.showYAxis=function(b){if(!arguments.length)return P;P=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return K;K=b;r.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return N;N=b;return a};a.tooltips=function(b){if(!arguments.length)return x;x=b;return a};a.tooltipContent=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return C;
C=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return L;L=b;return a};a.state=function(b){if(!arguments.length)return V;V=b;return a};a.defaultState=function(b){if(!arguments.length)return G;G=b;return a};a.noData=function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return aa;aa=b;return a};return a};u.models.sparkline=function(){function a(n){n.each(function(a){var n=k-b.left-b.right,u=r-b.top-b.bottom,M=d3.select(this);e.domain(A||
d3.extent(a,t)).range(D||[0,n]);h.domain(z||d3.extent(a,s)).range(B||[u,0]);a=M.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();n.style("stroke",function(a,b){return a.color||H(a,b)}).attr("d",d3.svg.line().x(function(a,b){return e(t(a,b))}).y(function(a,b){return h(s(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(e){if(-1!=e){var h=a[e];h.pointIndex=e;return h}return null}var e=a.map(function(a,b){return s(a,b)}),k=b(e.lastIndexOf(h.domain()[1])),n=b(e.indexOf(h.domain()[0])),e=b(e.length-1);return[n,k,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return e(t(a,a.pointIndex))}).attr("cy",function(a,b){return h(s(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return t(a,
a.pointIndex)==e.domain()[1]?"nv-point nv-currentValue":s(a,a.pointIndex)==h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},k=400,r=32,n=!0,e=d3.scale.linear(),h=d3.scale.linear(),t=function(a){return a.x},s=function(a){return a.y},H=u.utils.getColor(["#000"]),A,z,D,B;a.options=u.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:
b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.x=function(b){if(!arguments.length)return t;t=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return s;s=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return h;
h=b;return a};a.xDomain=function(b){if(!arguments.length)return A;A=b;return a};a.yDomain=function(b){if(!arguments.length)return z;z=b;return a};a.xRange=function(b){if(!arguments.length)return D;D=b;return a};a.yRange=function(b){if(!arguments.length)return B;B=b;return a};a.animate=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return H;H=u.utils.getColor(b);return a};return a};u.models.sparklinePlus=function(){function a(u){u.each(function(z){function O(){if(!s){var a=
x.selectAll(".nv-hoverValue").data(t),h=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+e(b.x()(z[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);t.length&&(h.append("line").attr("x1",0).attr("y1",-k.top).attr("x2",0).attr("y2",Q),h.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-k.top).attr("text-anchor","end").attr("dy",".9em"),x.select(".nv-hoverValue .nv-xValue").text(H(b.x()(z[t[0]],t[0]))),h.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-k.top).attr("text-anchor","start").attr("dy",".9em"),x.select(".nv-hoverValue .nv-yValue").text(A(b.y()(z[t[0]],t[0]))))}}var I=d3.select(this),K=(r||parseInt(I.style("width"))||960)-k.left-k.right,Q=(n||parseInt(I.style("height"))||400)-k.top-k.bottom;a.update=function(){a(u)};a.container=
this;if(z&&z.length)I.selectAll(".nv-noData").remove();else{var N=I.selectAll(".nv-noData").data([M]);N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");N.attr("x",k.left+K/2).attr("y",k.top+Q/2).text(function(a){return a});return a}N=b.y()(z[z.length-1],z.length-1);e=b.xScale();h=b.yScale();var R=I.selectAll("g.nv-wrap.nv-sparklineplus").data([z]),I=R.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),x=R.select("g");
I.append("g").attr("class","nv-sparklineWrap");I.append("g").attr("class","nv-valueWrap");I.append("g").attr("class","nv-hoverArea");R.attr("transform","translate("+k.left+","+k.top+")");R=x.select(".nv-sparklineWrap");b.width(K).height(Q);R.call(b);R=x.select(".nv-valueWrap").selectAll(".nv-currentValue").data([N]);R.enter().append("text").attr("class","nv-currentValue").attr("dx",B?-8:8).attr("dy",".9em").style("text-anchor",B?"end":"start");R.attr("x",K+(B?k.right:0)).attr("y",D?function(a){return h(a)}:
0).style("fill",b.color()(z[z.length-1],z.length-1)).text(A(N));I.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!s){for(var a=d3.mouse(this)[0]-k.left,a=Math.round(e.invert(a)),h=Math.abs(b.x()(z[0],0)-a),n=0,r=0;r<z.length;r++)Math.abs(b.x()(z[r],r)-a)<h&&(h=Math.abs(b.x()(z[r],r)-a),n=r);t=[n];O()}}).on("click",function(){s=!s}).on("mouseout",function(){t=[];O()});x.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-k.left+","+-k.top+")"}).attr("width",
K+k.left+k.right).attr("height",Q+k.top)});return a}var b=u.models.sparkline(),k={top:15,right:100,bottom:10,left:50},r=null,n=null,e,h,t=[],s=!1,H=d3.format(",r"),A=d3.format(",.2f"),z=!0,D=!0,B=!1,M="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?
b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.xTickFormat=function(b){if(!arguments.length)return H;H=b;return a};a.yTickFormat=function(b){if(!arguments.length)return A;A=b;return a};a.showValue=function(b){if(!arguments.length)return z;z=b;return a};a.alignValue=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return B;
B=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};return a};u.models.stackedArea=function(){function a(s){s.each(function(s){var u=k-b.left-b.right,O=r-b.top-b.bottom,N=d3.select(this);B=I.xScale();M=I.yScale();var R=s;s.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=b;return a})});s=s.filter(function(a){return!a.disabled});s=d3.layout.stack().order(A).offset(H).values(function(a){return a.values}).x(h).y(t).out(function(a,
b,e){e=0===t(a)?0:e;a.display={y:e,y0:b}})(s);var N=N.selectAll("g.nv-wrap.nv-stackedarea").data([s]),x=N.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=x.append("defs"),x=x.append("g"),L=N.select("g");x.append("g").attr("class","nv-areaWrap");x.append("g").attr("class","nv-scatterWrap");N.attr("transform","translate("+b.left+","+b.top+")");I.width(u).height(O).x(h).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(s.map(function(a,b){return a.color||n(a,a.seriesIndex)}));
L.select(".nv-scatterWrap").datum(s).call(I);C.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");N.select("#nv-edge-clip-"+e+" rect").attr("width",u).attr("height",O);L.attr("clip-path",D?"url(#nv-edge-clip-"+e+")":"");var y=d3.svg.area().x(function(a,b){return B(h(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y+a.display.y0)}).interpolate(z),V=d3.svg.area().x(function(a,b){return B(h(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y0)}),
u=L.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});u.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return V(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);E.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);E.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);E.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});u.exit().remove();u.style("fill",function(a,b){return a.color||n(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||n(a,a.seriesIndex)});u.transition().attr("d",function(a,b){return y(a.values,b)});I.dispatch.on("elementMouseover.area",function(a){L.select(".nv-chart-"+e+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});I.dispatch.on("elementMouseout.area",function(a){L.select(".nv-chart-"+e+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,e=a[0].length,h=1/b,k,l,n,r=[];for(l=0;l<e;++l){for(n=k=0;k<R.length;k++)n+=t(R[k].values[l]);if(n)for(k=0;k<b;k++)a[k][l][1]/=n;else for(k=0;k<b;k++)a[k][l][1]=h}for(l=0;l<e;++l)r[l]=0;return r}});return a}var b={top:0,right:0,bottom:0,left:0},k=960,r=500,n=u.utils.defaultColor(),
e=Math.floor(1E5*Math.random()),h=function(a){return a.x},t=function(a){return a.y},s="stack",H="zero",A="default",z="linear",D=!1,B,M,I=u.models.scatter(),E=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");I.size(2.2).sizeDomain([2.2,2.2]);I.dispatch.on("elementClick.area",function(a){E.areaClick(a)});I.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];E.tooltipShow(a)});I.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a)});
a.dispatch=E;a.scatter=I;d3.rebind(a,I,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=u.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return h;h=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return t;t=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return k;k=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return n;n=u.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return H;
H=b;return a};a.order=function(b){if(!arguments.length)return A;A=b;return a};a.style=function(b){if(!arguments.length)return s;s=b;switch(s){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return z;
z=b;return a};return a};u.models.stackedAreaChart=function(){function a(F){F.each(function(F){var W=d3.select(this),l=this,J=(s||parseInt(W.style("width"))||960)-t.left-t.right,ca=(H||parseInt(W.style("height"))||400)-t.top-t.bottom;a.update=function(){W.transition().duration(U).call(a)};a.container=this;R.disabled=F.map(function(a){return!!a.disabled});if(!x){var oa;x={};for(oa in R)x[oa]=R[oa]instanceof Array?R[oa].slice(0):R[oa]}if(F&&F.length&&F.filter(function(a){return a.values.length}).length)W.selectAll(".nv-noData").remove();
else return oa=W.selectAll(".nv-noData").data([C]),oa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),oa.attr("x",t.left+J/2).attr("y",t.top+ca/2).text(function(a){return a}),a;K=b.xScale();Q=b.yScale();oa=W.selectAll("g.nv-wrap.nv-stackedAreaChart").data([F]);var ga=oa.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),X=oa.select("g");ga.append("rect").style("opacity",0);ga.append("g").attr("class","nv-x nv-axis");
ga.append("g").attr("class","nv-y nv-axis");ga.append("g").attr("class","nv-stackedWrap");ga.append("g").attr("class","nv-legendWrap");ga.append("g").attr("class","nv-controlsWrap");ga.append("g").attr("class","nv-interactive");X.select("rect").attr("width",J).attr("height",ca);D&&(ga=z?J-y:J,n.width(ga),X.select(".nv-legendWrap").datum(F).call(n),t.top!=n.height()&&(t.top=n.height(),ca=(H||parseInt(W.style("height"))||400)-t.top-t.bottom),X.select(".nv-legendWrap").attr("transform","translate("+
(J-ga)+","+-t.top+")"));if(z){var fa=[{key:G.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:G.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:G.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:G.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];y=V.length/3*260;fa=fa.filter(function(a){return-1!==V.indexOf(a.metaKey)});e.width(y).color(["#444",
"#444","#444"]);X.select(".nv-controlsWrap").datum(fa).call(e);t.top!=Math.max(e.height(),n.height())&&(t.top=Math.max(e.height(),n.height()),ca=(H||parseInt(W.style("height"))||400)-t.top-t.bottom);X.select(".nv-controlsWrap").attr("transform","translate(0,"+-t.top+")")}oa.attr("transform","translate("+t.left+","+t.top+")");S&&X.select(".nv-y.nv-axis").attr("transform","translate("+J+",0)");E&&(h.width(J).height(ca).margin({left:t.left,top:t.top}).svgContainer(W).xScale(K),oa.select(".nv-interactive").call(h));
b.width(J).height(ca);X.select(".nv-stackedWrap").datum(F).transition().call(b);B&&(k.scale(K).ticks(J/100).tickSize(-ca,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+ca+")"),X.select(".nv-x.nv-axis").transition().duration(0).call(k));I&&(r.scale(Q).ticks("wiggle"==b.offset()?0:ca/36).tickSize(-J,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):N),X.select(".nv-y.nv-axis").transition().duration(0).call(r));b.dispatch.on("areaClick.toggle",function(b){1===
F.filter(function(a){return!a.disabled}).length?F.forEach(function(a){a.disabled=!1}):F.forEach(function(a,e){a.disabled=e!=b.seriesIndex});R.disabled=F.map(function(a){return!!a.disabled});L.stateChange(R);a.update()});n.dispatch.on("stateChange",function(b){R.disabled=b.disabled;L.stateChange(R);a.update()});e.dispatch.on("legendClick",function(e,h){e.disabled&&(fa=fa.map(function(a){a.disabled=!0;return a}),e.disabled=!1,b.style(e.style),R.style=b.style(),L.stateChange(R),a.update())});h.dispatch.on("elementMousemove",
function(e){b.clearHighlights();var n,s,x,z=[];F.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(h,k){s=u.interactiveBisect(h.values,e.pointXValue,a.x());b.highlightPoint(k,s,!0);var l=h.values[s];if("undefined"!==typeof l){"undefined"===typeof n&&(n=l);"undefined"===typeof x&&(x=a.xScale()(a.x()(l,s)));var r="expand"==b.style()?l.display.y:a.y()(l,s);z.push({key:h.key,value:r,color:A(h,h.seriesIndex),stackedValue:l.display})}});z.reverse();if(2<z.length){var y=a.yScale().invert(e.mouseY),
B=null;z.forEach(function(a,b){y=Math.abs(y);var e=Math.abs(a.stackedValue.y0),h=Math.abs(a.stackedValue.y);y>=e&&y<=h+e&&(B=b)});null!=B&&(z[B].highlight=!0)}var G=k.tickFormat()(a.x()(n,s)),C="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return r.tickFormat()(a)};h.tooltip.position({left:x+t.left,top:e.mouseY+t.top}).chartContainer(l.parentNode).enabled(O).valueFormatter(C).data({value:G,series:z})();h.renderGuideLine(x)});h.dispatch.on("elementMouseout",function(a){L.tooltipHide();
b.clearHighlights()});L.on("tooltipShow",function(e){if(O){var h=l.parentNode,n=e.pos[0]+(h.offsetLeft||0),s=e.pos[1]+(h.offsetTop||0),t=k.tickFormat()(b.x()(e.point,e.pointIndex)),x=r.tickFormat()(b.y()(e.point,e.pointIndex)),t=P(e.series.key,t,x,e,a);u.tooltip.show([n,s],t,0>e.value?"n":"s",null,h)}});L.on("changeState",function(e){"undefined"!==typeof e.disabled&&F.length===e.disabled.length&&(F.forEach(function(a,b){a.disabled=e.disabled[b]}),R.disabled=e.disabled);"undefined"!==typeof e.style&&
b.style(e.style);a.update()})});return a}var b=u.models.stackedArea(),k=u.models.axis(),r=u.models.axis(),n=u.models.legend(),e=u.models.legend(),h=u.interactiveGuideline(),t={top:30,right:25,bottom:50,left:60},s=null,H=null,A=u.utils.defaultColor(),z=!0,D=!0,B=!0,I=!0,S=!1,E=!1,O=!0,P=function(a,b,e,h,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},K,Q,N=d3.format(",.2f"),R={style:b.style()},x=null,C="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),y=250,
V=["Stacked","Stream","Expanded"],G={},U=250;k.orient("bottom").tickPadding(7);r.orient(S?"right":"left");e.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];L.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){O&&u.tooltip.cleanup()});a.dispatch=L;a.stacked=b;a.legend=n;a.controls=e;a.xAxis=k;a.yAxis=r;a.interactiveLayer=h;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=u.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return s;s=b;return a};a.height=
function(b){if(!arguments.length)return H;H=b;return a};a.color=function(e){if(!arguments.length)return A;A=u.utils.getColor(e);n.color(A);b.color(A);return a};a.showControls=function(b){if(!arguments.length)return z;z=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;r.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return E;E=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return P;P=b;return a};a.tooltips=function(b){if(!arguments.length)return O;O=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return x;x=b;return a};a.noData=
function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.controlsData=function(b){if(!arguments.length)return V;V=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return G;G=b;return a};r.setTickFormat=r.tickFormat;r.tickFormat=function(a){if(!arguments.length)return N;N=a;return r};return a}})();
(function(I,u){var a=0;I.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=a;a+=1;this.chart=this.table=null},_init:function(){var a=
I(this.element),k=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var r=a.find(".pt-chart");this.chart=r.length?r.first():null;k.renderFilter||k.renderOptions?(r="#"+a.attr("id"),k.renderOptions?(I(r+"-options").show(),k.collapseOptions&&(I(r+"-options legend").siblings().toggle(),I(r+"-options legend").children().toggle())):I(r+"-options").hide(),k.renderFilter?(I(r+
"-filters").show(),k.collapseFilter&&(I(r+"-filters legend").siblings().toggle(),I(r+"-filters legend").children().toggle())):I(r+"-options").hide()):a.find(".pt-form-container").hide();k.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());k.numberFormatter=function(a){var b=k.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");a=b[0];b=1<b.length?"."+b[1]:"";
a=a.replace(new RegExp("\\B(?=(\\d{"+k.thousandGrouping+"})+(?!\\d))","g"),k.thousandSeparator);return a+b};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=I(this.element),k=null;this._unbindEvents();var r=a.find('input[type="hidden"][name="pivotdata"]');r.length&&(k=JSON.parse(I(r).first().val()));k?"count"==k.method&&(this.options.precision=0,this.options.minTickSize=1):(k={empty:!0},a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide());
this.data=k;k.nodata?(a.find(".pt-table").first().empty().append(I('<div class="pt-no-data">'+k.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();k.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=I(this.element),k=a.find(".pt-table").first().empty();
this.table=null;var r=this.data;if(!r.empty)if(this.options.renderTable){var n=r.cells,e=r.cols,h=r.rows,t=r.total,s=r.labels,u=this.options,A=u.showTotals,z=!1;1==e.length&&null===e[0][4]&&(z=!0);n=r.cells.slice(0);if(z&&A)for(e=[],r=0;r<h.length;r++)n[r]=[];else{for(r=0;r<h.length;r++)n[r]=n[r].filter(function(a,b){return"__other__"!=e[b][0]});e=e.filter(function(a){return"__other__"!=a[0]})}r=!1;1==e.length&&null===e[0][4]&&(r=!0);r&&A?(h=[],n=[]):(n=n.filter(function(a,b){return"__other__"!=h[b][0]}),
h=h.filter(function(a){return"__other__"!=a[0]}));k=d3.select(k.get(0)).append("table").attr("class","dataTable display report");k.append("thead").call(this._renderHeader,e,s,u).call(this._renderColumns,e,s,u);k.append("tbody").call(this._renderRows,this,h,e,s,n,u);u.showTotals&&k.append("tfoot").call(this._renderFooter,h,e,s,t);this.table=I(k.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),
a.find(".pt-hide-table").hide()},_renderHeader:function(a,k,r,n){a=a.append("tr");a.append("th").attr("scope","col").text(r.layer);k.length&&a.append("th").attr({scope:"col",colspan:k.length}).text(r.cols);n.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(r.total);return a},_renderColumns:function(a,k,r,n){a=a.append("tr");a.append("th").attr({scope:"col","class":"pt-rows-header"}).text(r.rows);var e=!1;1==k.length&&null===k[0][4]&&(e=!0);a.selectAll("th.pt-data").data(k).enter().append("th").attr({scope:"col",
"class":"pt-col-label"}).text(function(a){return e?"":a[4]});return a},_renderRows:function(a,k,r,n,e,h,t){r=a.selectAll("tr.pt-row").data(r).enter().append("tr").attr("class",function(a,b){return b%2?"odd":"even"});var s=!1;1==r.length&&null===r[0][4]&&(s=!0);r.append("td").text(function(a){return s?"":a[4]});r.selectAll("td.pt-cell").data(function(a,b){return h[b]}).enter().append("td").attr("class","pt-cell").each(k._renderCell,e);t.showTotals&&r.append("td").attr("class","pt-row-total").text(function(a){return a[2]});
return r},_renderCell:function(a,k,r){k=d3.select(this);var n=a.items,e=k.append("div").attr("class","pt-cell-value");null===n?e.text(r.none):I.isArray(n)?e.append("ul").selectAll("li").data(n).enter().append("li").html(function(a){return a}):e.text(n);a=a.keys;n&&a&&a.length&&(I(k.node()).data("records",a),k.append("div").attr("class","pt-cell-zoom"))},_renderFooter:function(a,k,r,n,e){k=k.length%2?"odd":"even";a=a.append("tr").attr("class",k+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",
scope:"row"}).text(n.total);a.selectAll("td.pt-col-total").data(r).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2]});a.append("td").attr("class","pt-total").text(e);return a},_renderChartOptions:function(){var a=I(this.element),k=a.find(".pt-chart-controls").first().empty(),r=this.data;if(!r.empty&&this.options.renderChart){var r=r.labels,n=a.attr("id"),a=r.layer,e=r.rows,h=r.cols,t=r.per,s=I('<div class="pt-chart-opts">'),u=n+"-pchart-rows",A=n+"-vchart-rows",z=n+"-hchart-rows",
D=n+"-schart-rows",B=n+"-pchart-cols",M=n+"-vchart-cols",S=n+"-hchart-cols",n=n+"-schart-cols";a&&I(s).append(I('<span class="pt-chart-label">'+a+": </span>"));e&&I(s).append(I('<div id="'+u+'" class="pt-chart-icon pt-pchart"/><div id="'+A+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+e+"</span>"));h&&I(s).append(I('<div id="'+B+'" class="pt-chart-icon pt-pchart"/><div id="'+M+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+t+" "+h+"</span>"));e&&h&&I(s).append(I('<span class="pt-chart-label">| '+
r.breakdown+': </span><div id="'+D+'" class="pt-chart-icon pt-schart"/><div id="'+z+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+t+" "+e+'</span><div id="'+n+'"  class="pt-chart-icon pt-schart"/><div id="'+S+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+t+" "+h+"</span>"));I(k).append(s)}},_truncateLabel:function(a,k){return a&&a.length>k?a.substring(0,k-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var k=I(this.element),r=this.data;k.find(".pt-chart-contents").hide();
if(k=this.chart)if(I(k).unbind("plothover").unbind("plotclick").empty(),!r.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{k=this.options.collapseChart;if("undefined"==typeof a||!a){if(k)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(k)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;k=a.type;a=a.axis;var n=r.labels,e=n.per,h=n.layer+" "+e+" "+n.rows,n=n.layer+" "+e+
" "+n.cols,e=r.filter,t=e[0],s=e[1];"piechart"==k?"rows"==a?this._renderPieChart(r.rows,h,t):this._renderPieChart(r.cols,n,s):"barchart"==k?"rows"==a?this._renderBarChart(r.rows,h,t):this._renderBarChart(r.cols,n,s):"breakdown"==k?"rows"==a?this._renderBreakDown(r,0,h,e):this._renderBreakDown(r,1,n,e):"spectrum"==k&&this._renderSpectrum(r,a,e)}}},_renderPieChart:function(a,k,r){var n=this.chart;if(n){I(n).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});k?I(n).siblings(".pt-chart-title").html("<h4>"+
k+"</h4>"):I(n).siblings(".pt-chart-title").empty();var e=[],h=0;for(k=0;k<a.length;k++){var t=a[k];!t[1]&&0<=t[2]&&(e.push({index:t[0],label:t[4],value:t[2],key:t[3]}),h+=t[2])}var s=this;s.chartOptions.currentDataIndex=null;var u=function(a){if(s.chartOptions.currentDataIndex!=a.pointIndex){s._removeChartTooltip();s.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,e=Math.round(b/h*100),k='<div class="pt-tooltip-label">'+a.label+"</div>";s._renderChartTooltip(a.pos[0],a.pos[1],k+('<div class="pt-tooltip-text">'+
b+" ("+e+"%)</div>"));I(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).pieLabelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0).tooltips(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",u).on("elementMouseout",function(a){I(".pt-tooltip").remove();s.chartOptions.currentDataIndex=null;s.chartOptions.currentSeriesIndex=
null});if(s.options.exploreChart&&r)a.pie.dispatch.on("elementClick",function(a){a=a.point;s._chartExplore([["__other__"==a.index?r+"__belongs":r,a.key]])});d3.select(I(n).get(0)).append("svg").attr("class","nv").datum(e).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},_renderBarChart:function(a,k,r){var n=this.chart;if(n){I(n).closest(".pt-chart-contents").show().css({width:"96%"});for(var e=[],h=this._truncateLabel,t=0;t<a.length;t++){var s=a[t];s[1]||e.push({label:s[4],
value:s[2],filterIndex:s[0],filterKey:s[3]})}I(n).css({height:"360px"});k?I(n).siblings(".pt-chart-title").html("<h4>"+k+"</h4>"):I(n).siblings(".pt-chart-title").empty();var u=function(a,b,e,h){a=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},h.pointIndex)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},A=this,z=this.options.numberFormatter;nv.addGraph(function(){var a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(u).showValues(!0);
a.valueFormat(z);a.yAxis.tickFormat(z);a.xAxis.tickFormat(function(a){return h(a,18)});d3.select(I(n).get(0)).append("svg").attr("class","nv").datum([{key:"reportChart",values:e}]).transition().duration(500).call(a);if(A.options.exploreChart&&r)a.discretebar.dispatch.on("elementClick",function(a){var b=a.point.filterKey;null===b&&(b="None");var e=r;"__other__"==a.point.filterIndex&&(e+="__belongs");A._chartExplore([[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,
k,r,n){var e=this.chart;if(e){I(e).closest(".pt-chart-contents").show().css({width:"96%"});var h=a.cells,t,s,u=[],A=[],z,D;0===k?(t=a.rows,s=a.cols,a=function(a,b){return h[u[a]][A[b]].value},z=n[0],D=n[1]):(t=a.cols,s=a.rows,a=function(a,b){return h[A[b]][u[a]].value},z=n[1],D=n[0]);var B,M;n=[];k=[];B=0;for(M=t.length;B<M;B++)t[B][1]||(n.push(t[B]),u.push(B));B=0;for(M=s.length;B<M;B++)s[B][1]||(k.push(s[B]),A.push(B));var S=[];for(t=0;t<k.length;t++){s={key:k[t][4],filterIndex:k[t][0],filterKey:k[t][3]};
B=[];for(M=0;M<n.length;M++)B.push({label:n[M][4],filterIndex:n[M][0],filterKey:n[M][3],value:a(M,t)});s.values=B;S.push(s)}a=Math.max(n.length*Math.max(16*(k.length+1),50)+70,360);I(e).css({height:a+"px"});r?I(e).siblings(".pt-chart-title").html("<h4>"+r+"</h4>"):I(e).siblings(".pt-chart-title").empty();var E=function(a,b,e,h){b=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},h.seriesIndex)+'">'+a+'</div><div class="pt-tooltip-text">'+
b.label+': <span class="pt-tooltip-value">'+b.value+"</span></div></div>"},O=this,P=this.options.numberFormatter,K=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).tooltips(!0).tooltipContent(E).transitionDuration(350).showControls(!0);a.valueFormat(P);a.yAxis.tickFormat(P);a.xAxis.tickFormat(function(a){return K(a,24)});d3.select(I(e).get(0)).append("svg").attr("class",
"nv").datum(S).call(a);if(O.options.exploreChart&&z&&D)a.multibar.dispatch.on("elementClick",function(a){var b=a.series.filterKey,e;null===b&&(b="None");e="__other__"==a.series.filterIndex?D+"__belongs":D;var h=a.point.filterKey;null===h&&(h="None");O._chartExplore([["__other__"==a.point.filterIndex?z+"__belongs":z,h],[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(a,k,r){var n=this.chart;if(n){var e=this,h=a.cells,t=a.labels,s,H,A,z,D,B;"rows"==k?(s=a.rows,H=a.cols,
k=t.rows,A=t.cols,z=r[0],D=r[1],B=function(a,b){return h[a][b]}):(s=a.cols,H=a.rows,k=t.cols,A=t.rows,z=r[1],D=r[0],B=function(a,b){return h[b][a]});var M=function(a,b){return null===a?H[b]:null===b?s[a]:B(a,b)},S=function(a,b){b===u&&(b="silver");for(var e=[],h,k,l=0;l<H.length;l++)h=M(null,l),k=null===a?h[2]:M(a,l).value,!h[1]&&0<=h[2]&&e.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:k,color:b});return e},E=[],O=0;for(r=0;r<s.length;r++){var P=M(r,null);!P[1]&&0<=P[2]&&(E.push({position:r,
filterIndex:P[0],filterKey:P[3],label:P[4],value:P[2]}),O+=P[2])}e.chartOptions.currentDataIndex=null;I(n).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();I(n).siblings(".pt-chart-title").empty();r=I('<div class="pt-spectrum-pie">').appendTo(n);var n=I('<div class="pt-spectrum-bar">').appendTo(n),K=this.options.numberFormatter,Q=this._truncateLabel,N=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!0).tooltipContent(function(a,
b,e,h){a=h.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+K(a.value)+"</div></div>"}).showValues(!0);N.valueFormat(K);N.yAxis.tickFormat(K);N.xAxis.tickFormat(function(a){return Q(a,18)});var R=d3.select(I(n).get(0)).append("svg").attr("class","nv"),n=Math.floor(r.width()/2)-30,x=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(n).margin({top:-20,
left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35).tooltips(!1);x.legend.align(!0).rightAlign(!1);x.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});x.pie.dispatch.on("elementMouseover",function(a){if(e.chartOptions.currentDataIndex!=a.pointIndex){e._removeChartTooltip();e.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,h=Math.round(b/O*100),k='<div class="pt-tooltip-label">'+a.label+
"</div>";e._renderChartTooltip(a.pos[0],a.pos[1],k+('<div class="pt-tooltip-text">'+b+" ("+h+"%)</div>"));I(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}}).on("elementMouseout",function(a){I(".pt-tooltip").remove();e.chartOptions.currentDataIndex=null;e.chartOptions.currentSeriesIndex=null});var C=d3.select(I(r).get(0)).append("svg").attr("class","nv").style({"min-width":n-30+"px"}),n=d3.select(I(r).get(0)).append("div").attr("class","pt-spectrum-form");n.append("h4").html(t.layer+
" "+t.per+" "+A);n.append("label").html(k+":");var L=n.append("select");L.append("option").attr("value","null").style("font-weight","bold").html(e.options.textAll);L.selectAll(".pt-series-item").data(E).enter().append("option").attr("class","pt-series-item").attr("value",function(a,b){return b}).html(function(a){return a.label});n.append("label").html(t.total+":");var y=n.append("span").text(a.total),V=function(h){var k;if(null===h||e.chartOptions.currentSpectrumIndex==h)k=function(a,b){return nv.utils.defaultColor()({},
b)},C.selectAll(".nv-slice").style("fill",k).style("stroke",k),k=S(null),R.datum([{key:null,filterIndex:null,filterKey:null,values:k}]),N.update(),e.chartOptions.currentSpectrumIndex=null,L.property("value","null"),y.text(a.total);else{var n=E[h],r=nv.utils.defaultColor()({},h);k=function(a,b){return b==h?r:"silver"};C.selectAll(".nv-slice").style("fill",k).style("stroke",k);k=S(n.position,r);R.datum([{key:n.position,filterIndex:n.filterIndex,filterKey:n.filterKey,values:k}]);N.update();e.chartOptions.currentSpectrumIndex=
h;L.property("value",h);y.text(E[h].value)}};x.pie.dispatch.on("elementClick",function(a){V(a.index)});L.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?V(null):V(a)});nv.addGraph(function(){C.datum(E).transition().duration(1200).call(x);nv.utils.windowResize(x.update);return x});nv.addGraph(function(){R.datum([{key:null,filterIndex:null,filterKey:null,values:S(null)}]).transition().duration(500).call(N);if(e.options.exploreChart&&z&&D)N.discretebar.dispatch.on("elementClick",
function(a){var b=a.series.filterIndex,h=a.series.filterKey,k=a.point.filterIndex;a=a.point.filterKey;var n=[];null!==b&&n.push(["__other__"==b?z+"__belongs":z,h]);null!==k&&n.push(["__other__"==k?D+"__belongs":D,a]);e._chartExplore(n)});nv.utils.windowResize(N.update);return N})}},_chartExplore:function(a){var k=this.options,r=I(this.element).closest(".ui-tabs"),n=k.filterTab;if(r.length&&!1!==n)k=(k=k.filterForm)?I("#"+k):u,S3.search.setCurrentFilters(k,a),a=n?I("#"+n).index():0,r.tabs("option",
"active",a);else if(r=k.filterURL)a=this._updateURL(r,a),window.open(a,"_blank")},_renderChartTooltip:function(a,k,r){I('<div class="pt-tooltip">'+r+"</div>").css({position:"absolute",display:"none",top:k-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){I(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=
null},_getOptions:function(){var a="#"+I(this.element).attr("id");return{rows:I(a+"-rows").val(),cols:I(a+"-cols").val(),fact:I(a+"-fact").val(),totals:I(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+I(this.element).attr("id"),k=null,a=I(a+"-filters");if(a.length)try{k=S3.search.getCurrentFilters(a.first())}catch(r){}return k},_updateURL:function(a,k){var r,n,e=[],h={};r={};var t,s,u,A;if(k)for(t=0,s=k.length;t<s;t++)r=k[t],A=r[0],h[A]=!0,e.push(A+"="+r[1]);r=this.options.ajaxURL.split("?");
if(1<r.length){n=r[1].split("&");r={};t=0;for(s=n.length;t<s;t++)u=n[t].split("="),1<u.length&&(A=decodeURIComponent(u[0]),h[A]||(e.push(A+"="+decodeURIComponent(u[1])),r[A]=!0));for(A in r)h[A]=!0}r=a.split("?");if(1<r.length)for(n=r[1].split("&"),t=0,s=n.length;t<s;t++)u=n[t].split("="),1<u.length&&(A=decodeURIComponent(u[0]),h[A]||e.push(A+"="+decodeURIComponent(u[1])));e=e.join("&");h=r[0];e&&(h=h+"?"+e);return h},_updateAjaxURL:function(a,k){var r=this.options.ajaxURL.split("?"),n=[],e=!1,h;
1<r.length?(h=r[1],h=h.split("&")):h=[];var t,s,u;if(a)for(t in a)u=a[t],s=t+"="+u,"totals"==t?this.options.showTotals=u?!0:!1:e||-1!=I.inArray(s,h)||(e=!0),n.push(s);t={};u={};var A,z,D;if(k)for(A=0,z=k.length;A<z;A++)s=k[A],D=s[0],s=s[1],null===s?t[D]||(u[D]=!0):(u[D]&&(u[D]=!1),t[D]?t[D].push(D+"="+s):t[D]=[D+"="+s]);A=0;for(z=h.length;A<z;A++)s=h[A].split("="),1<s.length&&(D=decodeURIComponent(s[0]),s=decodeURIComponent(s[1]),u[D]?e=!0:t[D]?e||-1!=I.inArray(D+"="+s,t[D])||(e=!0):"aggregate"!=
D&&(a&&a.hasOwnProperty(D)||n.push(h[A])));for(D in t)for(A=0,z=t[D].length;A<z;A++)e||-1!=I.inArray(t[D][A],h)||(e=!0),n.push(t[D][A]);n=n.join("&");r=r[0];n&&(r=r+"?"+n);this.options.ajaxURL=r;return e},reload:function(a,k,r){r="undefined"!=typeof r?r:!0;"undefined"==typeof k&&(k=this._getFilters());var n=this,e=this.element,h,t=e.find('input[type="hidden"][name="pivotdata"]');if(t.length){e.find(".pt-throbber").show();if(a||k)h=this._updateAjaxURL(a,k);h||r?(a=this.options.ajaxURL,e.find(".pt-empty").hide(),
I.ajax({url:a,dataType:"json"}).done(function(a){t.first().val(JSON.stringify(a));n.refresh()}).fail(function(a,b,e){msg="UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText;console.log(msg)})):n.refresh()}},_bindEvents:function(){var a=this,k=I(this.element),r=this.data,n="#"+k.attr("id");I(n+"-options legend").click(function(){I(this).siblings().toggle();I(this).children().toggle()});I(n+"-filters legend").click(function(){I(this).siblings().toggle();I(this).children().toggle()});k.find(".pt-hide-table").click(function(){a.table_options.hidden=
!0;k.find(".pt-table").hide();I(this).siblings(".pt-show-table").show();I(this).hide()});k.find(".pt-show-table").click(function(){a.table_options.hidden=!1;k.find(".pt-table").show();I(this).siblings(".pt-hide-table").show();I(this).hide()});I(n+"-totals").click(function(){var e=I(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});I(n+"-rows,"+n+"-cols,"+n+"-fact").on("change.autosubmit",function(){I(n+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var e=
this.options.autoSubmit;I(n+"-pt-form").on("optionChanged",function(){var h=I(this);if(!h.data("noAutoSubmit")){var k=h.data("autoSubmitTimeout");k&&clearTimeout(k);k=setTimeout(function(){var e=a._getOptions(),h=a._getFilters();a.reload(e,h,!1)},e);h.data("autoSubmitTimeout",k)}})}else I(n+"-pt-form input.pt-submit").click(function(){var e=a._getOptions(),k=a._getFilters();a.reload(e,k,!1)});I(n+" div.pt-table div.pt-cell-zoom").click(function(a){a=I(a.currentTarget);var b=a.closest("td"),e=b.find(".pt-cell-records");
if(0<e.length)e.remove(),a.removeClass("opened");else{for(var k=b.data("records"),e=I("<div/>").addClass("pt-cell-records"),n=I("<ul/>"),u=0;u<k.length;u++)n.append("<li>"+r.lookup[k[u]]+"</li>");e.append(n);b.append(e);a.addClass("opened")}});I(n+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});I(n+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});I(n+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});I(n+
"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});I(n+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});I(n+"-vchart-cols").click(function(){a._renderChart({type:"barchart",axis:"cols"})});I(n+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});I(n+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});k.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=
I(this.element),k="#"+a.attr("id");I(k+" div.pt-table div.pt-cell-zoom").unbind("click");I(k+"-options legend").unbind("click");I(k+"-filters legend").unbind("click");I(k+"-totals").unbind("click");I(k+"-rows,"+k+"-cols,"+k+"-fact").unbind("change.autosubmit");I(k+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");I(k+"-pchart-rows,"+k+"-vchart-rows,"+k+"-schart-rows,"+k+"-hchart-rows,"+k+"-pchart-cols,"+k+"-vchart-cols,"+k+"-schart-cols,"+k+"-hchart-cols").unbind("click");
a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
