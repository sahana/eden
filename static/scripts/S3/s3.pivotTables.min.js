/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+

*/
!function(){function H(c,r){return c<r?-1:c>r?1:c>=r?0:NaN}function v(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(r,a,p,h){3>arguments.length&&(p=0);4>arguments.length&&(h=r.length);for(;p<h;){var m=p+h>>>1;0>c(r[m],a)?p=m+1:h=m}return p},right:function(r,a,p,h){3>arguments.length&&(p=0);4>arguments.length&&(h=r.length);for(;p<h;){var m=p+h>>>1;0<c(r[m],a)?h=m:p=m+1}return p}}}function b(c){return c.length}function g(c,r){try{for(var a in r)Object.defineProperty(c.prototype,a,
{value:r[a],enumerable:!1})}catch(p){c.prototype=r}}function t(){}function q(c){return jb+c in this}function e(){var c=[];this.forEach(function(r){c.push(r)});return c}function k(){var c=0,r;for(r in this)r.charCodeAt(0)===Tb&&++c;return c}function u(){for(var c in this)if(c.charCodeAt(0)===Tb)return!1;return!0}function n(){}function I(c,r,a){return function(){var p=a.apply(r,arguments);return p===r?c:p}}function B(c,r){if(r in c)return r;r=r.charAt(0).toUpperCase()+r.substring(1);for(var a=0,p=Sd.length;a<
p;++a){var h=Sd[a]+r;if(h in c)return h}}function A(){}function F(){}function E(c){function r(){for(var r=a,p=-1,ba=r.length,x;++p<ba;)(x=r[p].on)&&x.apply(this,arguments);return c}var a=[],p=new t;r.on=function(r,m){var ba=p.get(r),x;if(2>arguments.length)return ba&&ba.on;ba&&(ba.on=null,a=a.slice(0,x=a.indexOf(ba)).concat(a.slice(x+1)),p.remove(r));m&&a.push(p.set(r,{on:m}));return c};return r}function M(){w.event.preventDefault()}function S(){for(var c=w.event,r;r=c.sourceEvent;)c=r;return c}function D(c){for(var r=
new F,a=0,p=arguments.length;++a<p;)r[arguments[a]]=E(r);r.of=function(a,f){return function(p){try{var x=p.sourceEvent=w.event;p.target=c;w.event=p;r[p.type].apply(a,f)}finally{w.event=x}}};return r}function R(c){Ub(c,pa);return c}function P(c){return"function"===typeof c?c:function(){return Oc(c,this)}}function G(c){return"function"===typeof c?c:function(){return Pc(c,this)}}function O(c,r){function a(){this.removeAttribute(c)}function p(){this.removeAttributeNS(c.space,c.local)}function h(){this.setAttribute(c,
r)}function m(){this.setAttributeNS(c.space,c.local,r)}function ba(){var a=r.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function x(){var a=r.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=w.ns.qualify(c);return null==r?c.local?p:a:"function"===typeof r?c.local?x:ba:c.local?m:h}function N(c){return c.trim().replace(/\s+/g," ")}function U(c){return new RegExp("(?:^|\\s+)"+w.requote(c)+"(?:\\s+|$)","g")}
function y(c,r){function a(){for(var f=-1;++f<h;)c[f](this,r)}function p(){for(var a=-1,f=r.apply(this,arguments);++a<h;)c[a](this,f)}c=(c+"").trim().split(/^|\s+/).map(C);var h=c.length;return"function"===typeof r?p:a}function C(c){var r=U(c);return function(a,p){if(h=a.classList)return p?h.add(c):h.remove(c);var h=a.getAttribute("class")||"";p?(r.lastIndex=0,r.test(h)||a.setAttribute("class",N(h+" "+c))):a.setAttribute("class",N(h.replace(r," ")))}}function J(c,r,a){function p(){this.style.removeProperty(c)}
function h(){this.style.setProperty(c,r,a)}function m(){var p=r.apply(this,arguments);null==p?this.style.removeProperty(c):this.style.setProperty(c,p,a)}return null==r?p:"function"===typeof r?m:h}function z(c,r){function a(){delete this[c]}function p(){this[c]=r}function h(){var a=r.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==r?a:"function"===typeof r?h:p}function W(c){return"function"===typeof c?c:(c=w.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function Q(c){return function(){return Td(this,c)}}function V(c){arguments.length||(c=H);return function(r,a){return r&&a?c(r.__data__,a.__data__):!r-!a}}function K(c,r){for(var a=0,p=c.length;a<p;a++)for(var h=c[a],m=0,ba=h.length,x;m<ba;m++)(x=h[m])&&r(x,m,a);return c}function ca(c){Ub(c,Ta);return c}function X(c){var r,a;return function(p,h,m){p=c[m].update;var ba=p.length;m!=a&&(a=m,r=0);for(h>=r&&(r=h+1);!(h=
p[r])&&++r<ba;);return h}}function l(){var c=this.__transition__;c&&++c.active}function L(c,r,a){function p(){var r=this[ba];r&&(this.removeEventListener(c,r,r.$),delete this[ba])}function h(){var h=T(r,cb(arguments));p.call(this);this.addEventListener(c,this[ba]=h,h.$=a);h._=r}function m(){var r=new RegExp("^__on([^.]+)"+w.requote(c)+"$"),a,f;for(f in this)if(a=f.match(r)){var p=this[f];this.removeEventListener(a[1],p,p.$);delete this[f]}}var ba="__on"+c,x=c.indexOf("."),T=ea;0<x&&(c=c.substring(0,
x));var b=Qc.get(c);b&&(c=b,T=qa);return x?r?h:p:r?A:m}function ea(c,r){return function(a){var p=w.event;w.event=a;r[0]=this.__data__;try{c.apply(this,r)}finally{w.event=p}}}function qa(c,r){var a=ea(c,r);return function(c){var r=c.relatedTarget;r&&(r===this||r.compareDocumentPosition(this)&8)||a.call(this,c)}}function ia(){var c=".dragsuppress-"+ ++lg,r="click"+c,a=w.select(za).on("touchmove"+c,M).on("dragstart"+c,M).on("selectstart"+c,M);if(Fb){var p=Wa.style,h=p[Fb];p[Fb]="none"}return function(m){a.on(c,
null);Fb&&(p[Fb]=h);if(m){var ba=function(){a.on(r,null)};a.on(r,function(){M();ba()},!0);setTimeout(ba,0)}}}function Y(c,r){r.changedTouches&&(r=r.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var p=a.createSVGPoint();if(0>Rc&&(za.scrollX||za.scrollY)){var a=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),h=a[0][0].getScreenCTM();Rc=!(h.f||h.e);a.remove()}Rc?(p.x=r.pageX,p.y=r.pageY):(p.x=r.clientX,p.y=r.clientY);
p=p.matrixTransform(c.getScreenCTM().inverse());return[p.x,p.y]}a=c.getBoundingClientRect();return[r.clientX-a.left-c.clientLeft,r.clientY-a.top-c.clientTop]}function ha(){return w.event.changedTouches[0].identifier}function ja(){return w.event.target}function da(){return za}function Z(c,r,a){return(r[0]-c[0])*(a[1]-c[1])-(r[1]-c[1])*(a[0]-c[0])}function na(c){return 1<c?0:-1>c?la:Math.acos(c)}function ga(c){return 1<c?xa:-1>c?-xa:Math.asin(c)}function oa(c){return((c=Math.exp(c))+1/c)/2}function ta(c){return(c=
Math.sin(c/2))*c}function Da(){}function Ea(c,r,a){return this instanceof Ea?void(this.h=+c,this.s=+r,this.l=+a):2>arguments.length?c instanceof Ea?new Ea(c.h,c.s,c.l):Vd(""+c,Wd,Ea):new Ea(c,r,a)}function Sc(c,r,a){function p(c){360<c?c-=360:0>c&&(c+=360);return 60>c?h+(m-h)*c/60:180>c?m:240>c?h+(m-h)*(240-c)/60:h}var h,m;c=isNaN(c)?0:0>(c%=360)?c+360:c;r=isNaN(r)?0:0>r?0:1<r?1:r;a=0>a?0:1<a?1:a;m=.5>=a?a*(1+r):a+r-a*r;h=2*a-m;return new Aa(Math.round(255*p(c+120)),Math.round(255*p(c)),Math.round(255*
p(c-120)))}function La(c,r,a){return this instanceof La?void(this.h=+c,this.c=+r,this.l=+a):2>arguments.length?c instanceof La?new La(c.h,c.c,c.l):c instanceof Ma?Xd(c.l,c.a,c.b):Xd((c=Yd((c=w.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new La(c,r,a)}function Tc(c,r,a){isNaN(c)&&(c=0);isNaN(r)&&(r=0);return new Ma(a,Math.cos(c*=ka)*r,Math.sin(c)*r)}function Ma(c,r,a){return this instanceof Ma?void(this.l=+c,this.a=+r,this.b=+a):2>arguments.length?c instanceof Ma?new Ma(c.l,c.a,c.b):c instanceof La?Tc(c.l,c.c,
c.h):Yd((c=Aa(c)).r,c.g,c.b):new Ma(c,r,a)}function Zd(c,r,a){c=(c+16)/116;a=c-a/200;r=Uc(c+r/500)*$d;c=Uc(c)*ae;a=Uc(a)*be;return new Aa(Vc(3.2404542*r-1.5371385*c-.4985314*a),Vc(-.969266*r+1.8760108*c+.041556*a),Vc(.0556434*r-.2040259*c+1.0572252*a))}function Xd(c,r,a){return 0<c?new La(Math.atan2(a,r)*sa,Math.sqrt(r*r+a*a),c):new La(NaN,NaN,c)}function Uc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Wc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Vc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Aa(c,r,a){return this instanceof Aa?void(this.r=~~c,this.g=~~r,this.b=~~a):2>arguments.length?c instanceof Aa?new Aa(c.r,c.g,c.b):Vd(""+c,Aa,Sc):new Aa(c,r,a)}function Vb(c){return new Aa(c>>16,c>>8&255,c&255)+""}function tb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Vd(c,r,a){var p=0,h=0,m=0,ba,x;if(ba=/([a-z]+)\((.*)\)/i.exec(c))switch(x=ba[2].split(","),ba[1]){case "hsl":return a(parseFloat(x[0]),
parseFloat(x[1])/100,parseFloat(x[2])/100);case "rgb":return r(Xc(x[0]),Xc(x[1]),Xc(x[2]))}if(a=Wb.get(c))return r(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(p=(a&3840)>>4,p|=p>>4,h=a&240,h|=h>>4,m=a&15,m|=m<<4):7===c.length&&(p=(a&16711680)>>16,h=(a&65280)>>8,m=a&255));return r(p,h,m)}function Wd(c,r,a){var p=Math.min(c/=255,r/=255,a/=255),h=Math.max(c,r,a),m=h-p,ba=(h+p)/2;m?(p=.5>ba?m/(h+p):m/(2-h-p),c=60*(c==h?(r-a)/m+(r<a?6:0):r==h?(a-c)/m+2:
(c-r)/m+4)):(c=NaN,p=0<ba&&1>ba?0:c);return new Ea(c,p,ba)}function Yd(c,r,a){c=Yc(c);r=Yc(r);a=Yc(a);var p=Wc((.4124564*c+.3575761*r+.1804375*a)/$d),h=Wc((.2126729*c+.7151522*r+.072175*a)/ae);c=Wc((.0193339*c+.119192*r+.9503041*a)/be);return Ma(116*h-16,500*(p-h),200*(h-c))}function Yc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Xc(c){var r=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*r):r}function ra(c){return"function"===typeof c?c:function(){return c}}
function wa(c){return c}function Zc(c){return function(r,a,p){2===arguments.length&&"function"===typeof a&&(p=a,a=null);return Xb(r,a,c,p)}}function Xb(c,r,a,p){function h(){var c=T.status,r;if(!c&&T.responseText||200<=c&&300>c||304===c){try{r=a.call(m,T)}catch(p){ba.error.call(m,p);return}ba.load.call(m,r)}else ba.error.call(m,T)}var m={},ba=w.dispatch("beforesend","progress","load","error"),x={},T=new XMLHttpRequest,b=null;!za.XDomainRequest||"withCredentials"in T||!/^(http(s)?:)?\/\//.test(c)||
(T=new XDomainRequest);"onload"in T?T.onload=T.onerror=h:T.onreadystatechange=function(){3<T.readyState&&h()};T.onprogress=function(c){var r=w.event;w.event=c;try{ba.progress.call(m,T)}finally{w.event=r}};m.header=function(c,r){c=(c+"").toLowerCase();if(2>arguments.length)return x[c];null==r?delete x[c]:x[c]=r+"";return m};m.mimeType=function(c){if(!arguments.length)return r;r=null==c?null:c+"";return m};m.responseType=function(c){if(!arguments.length)return b;b=c;return m};m.response=function(c){a=
c;return m};["get","post"].forEach(function(c){m[c]=function(){return m.send.apply(m,[c].concat(cb(arguments)))}});m.send=function(a,f,p){2===arguments.length&&"function"===typeof f&&(p=f,f=null);T.open(a,c,!0);null==r||"accept"in x||(x.accept=r+",*/*");if(T.setRequestHeader)for(var h in x)T.setRequestHeader(h,x[h]);null!=r&&T.overrideMimeType&&T.overrideMimeType(r);null!=b&&(T.responseType=b);if(null!=p)m.on("error",p).on("load",function(c){p(null,c)});ba.beforesend.call(m,T);T.send(null==f?null:
f);return m};m.abort=function(){T.abort();return m};w.rebind(m,ba,"on");return null==p?m:m.get(mg(p))}function mg(c){return 1===c.length?function(r,a){c(null==r?a:null)}:c}function $c(){var c=ce(),c=de()-c;24<c?(isFinite(c)&&(clearTimeout(Yb),Yb=setTimeout($c,c)),Zb=0):(Zb=1,ee($c))}function ce(){var c=Date.now();for(Xa=$b;Xa;)c>=Xa.t&&(Xa.f=Xa.c(c-Xa.t)),Xa=Xa.n;return c}function de(){for(var c,r=$b,a=Infinity;r;)r.f?r=c?c.n=r.n:$b=r.n:(r.t<a&&(a=r.t),r=(c=r).n);ac=c;return a}function ad(c,r){return r-
(c?Math.ceil(Math.log(c)/Math.LN10):1)}function ng(c){var r=c.decimal,a=c.thousands,p=c.grouping,h=c.currency,m=p?function(c){for(var r=c.length,h=[],m=0,b=p[0];0<r&&0<b;)h.push(c.substring(r-=b,r+b)),b=p[m=(m+1)%p.length];return h.reverse().join(a)}:wa;return function(c){c=fe.exec(c);var a=c[1]||" ",f=c[2]||">",p=c[3]||"",b=c[4]||"",l=c[5],e=+c[6],k=c[7],g=c[8],q=c[9],n=1,u="",t="",z=!1;g&&(g=+g.substring(1));if(l||"0"===a&&"="===f)l=a="0",f="=",k&&(e-=Math.floor((e-1)/4));switch(q){case "n":k=!0;
q="g";break;case "%":n=100;t="%";q="f";break;case "p":n=100;t="%";q="r";break;case "b":case "o":case "x":case "X":"#"===b&&(u="0"+q.toLowerCase());case "c":case "d":z=!0;g=0;break;case "s":n=-1,q="r"}"$"===b&&(u=h[0],t=h[1]);"r"!=q||g||(q="g");if(null!=g)if("g"==q)g=Math.max(1,Math.min(21,g));else if("e"==q||"f"==q)g=Math.max(0,Math.min(20,g));var q=og.get(q)||pg,y=l&&k;return function(c){var h=t;if(z&&c%1)return"";var b=0>c||0===c&&0>1/c?(c=-c,"-"):p;0>n?(h=w.formatPrefix(c,g),c=h.scale(c),h=h.symbol+
t):c*=n;c=q(c,g);var ba=c.lastIndexOf("."),Ua=0>ba?c:c.substring(0,ba);c=0>ba?"":r+c.substring(ba+1);!l&&k&&(Ua=m(Ua));var ba=u.length+Ua.length+c.length+(y?0:b.length),L=ba<e?Array(ba=e-ba+1).join(a):"";y&&(Ua=m(L+Ua));b+=u;c=Ua+c;return("<"===f?b+c+L:">"===f?L+b+c:"^"===f?L.substring(0,ba>>=1)+b+c+L.substring(ba):b+(y?c:L+c))+h}}}function pg(c){return c+""}function Ya(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function kb(c,r,a){function p(r){var a=c(r),f=
m(a,1);return r-a<f-r?a:f}function h(a){r(a=c(new ya(a-1)),1);return a}function m(c,a){r(c=new ya(+c),a);return c}function b(c,p,m){c=h(c);var x=[];if(1<m)for(;c<p;)a(c)%m||x.push(new Date(+c)),r(c,1);else for(;c<p;)x.push(new Date(+c)),r(c,1);return x}c.floor=c;c.round=p;c.ceil=h;c.offset=m;c.range=b;var x=c.utc=bc(c);x.floor=x;x.round=bc(p);x.ceil=bc(h);x.offset=bc(m);x.range=function(c,r,a){try{ya=Ya;var f=new Ya;f._=c;return b(f,r,a)}finally{ya=Date}};return c}function bc(c){return function(a,
f){try{ya=Ya;var p=new Ya;p._=a;return c(p,f)._}finally{ya=Date}}}function qg(c){function a(c){function r(a){for(var f=[],h=-1,m=0,x,b;++h<p;)if(37===c.charCodeAt(h)){f.push(c.substring(m,h));null!=(x=ge[m=c.charAt(++h)])&&(m=c.charAt(++h));if(b=L[m])m=b(a,null==x?"e"===m?" ":"0":x);f.push(m);m=h+1}f.push(c.substring(m,h));return f.join("")}var p=c.length;r.parse=function(a){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(r,c,a,0)!=a.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);a=null!=r.Z&&
ya!==Ya;var p=new (a?Ya:ya);"j"in r?p.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(p.setFullYear(r.y,0,1),p.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(p.getDay()+5)%7:r.w+7*r.U-(p.getDay()+6)%7)):p.setFullYear(r.y,r.m,r.d);p.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L);return a?p._:p};r.toString=function(){return c};return r}function f(c,r,a,f){for(var p,h=0,m=r.length,x=a.length;h<m;){if(f>=x)return-1;p=r.charCodeAt(h++);if(37===p){if(p=r.charAt(h++),p=D[p in ge?r.charAt(h++):p],
!p||0>(f=p(c,a,f)))return-1}else if(p!=a.charCodeAt(f++))return-1}return f}var p=c.dateTime,h=c.date,m=c.time,b=c.periods,x=c.days,T=c.shortDays,fa=c.months,l=c.shortMonths;a.utc=function(c){function f(c){try{ya=Ya;var r=new ya;r._=c;return p(r)}finally{ya=Date}}var p=a(c);f.parse=function(c){try{ya=Ya;var r=p.parse(c);return r&&r._}finally{ya=Date}};f.toString=p.toString;return f};a.multi=a.utc.multi=rg;var e=w.map(),k=cc(x),g=dc(x),q=cc(T),n=dc(T),t=cc(fa),u=dc(fa),z=cc(l),y=dc(l);b.forEach(function(c,
r){e.set(c.toLowerCase(),r)});var L={a:function(c){return T[c.getDay()]},A:function(c){return x[c.getDay()]},b:function(c){return l[c.getMonth()]},B:function(c){return fa[c.getMonth()]},c:a(p),d:function(c,r){return Ba(c.getDate(),r,2)},e:function(c,r){return Ba(c.getDate(),r,2)},H:function(c,r){return Ba(c.getHours(),r,2)},I:function(c,r){return Ba(c.getHours()%12||12,r,2)},j:function(c,r){return Ba(1+aa.dayOfYear(c),r,3)},L:function(c,r){return Ba(c.getMilliseconds(),r,3)},m:function(c,r){return Ba(c.getMonth()+
1,r,2)},M:function(c,r){return Ba(c.getMinutes(),r,2)},p:function(c){return b[+(12<=c.getHours())]},S:function(c,r){return Ba(c.getSeconds(),r,2)},U:function(c,r){return Ba(aa.sundayOfYear(c),r,2)},w:function(c){return c.getDay()},W:function(c,r){return Ba(aa.mondayOfYear(c),r,2)},x:a(h),X:a(m),y:function(c,r){return Ba(c.getFullYear()%100,r,2)},Y:function(c,r){return Ba(c.getFullYear()%1E4,r,4)},Z:sg,"%":function(){return"%"}},D={a:function(c,r,a){q.lastIndex=0;return(r=q.exec(r.substring(a)))?(c.w=
n.get(r[0].toLowerCase()),a+r[0].length):-1},A:function(c,r,a){k.lastIndex=0;return(r=k.exec(r.substring(a)))?(c.w=g.get(r[0].toLowerCase()),a+r[0].length):-1},b:function(c,r,a){z.lastIndex=0;return(r=z.exec(r.substring(a)))?(c.m=y.get(r[0].toLowerCase()),a+r[0].length):-1},B:function(c,r,a){t.lastIndex=0;return(r=t.exec(r.substring(a)))?(c.m=u.get(r[0].toLowerCase()),a+r[0].length):-1},c:function(c,r,a){return f(c,L.c.toString(),r,a)},d:he,e:he,H:ie,I:ie,j:tg,L:ug,m:vg,M:wg,p:function(c,r,a){r=e.get(r.substring(a,
a+=2).toLowerCase());return null==r?-1:(c.p=r,a)},S:xg,U:yg,w:zg,W:Ag,x:function(c,r,a){return f(c,L.x.toString(),r,a)},X:function(c,r,a){return f(c,L.X.toString(),r,a)},y:Bg,Y:Cg,Z:Dg,"%":Eg};return a}function Ba(c,r,a){var p=0>c?"-":"";c=(p?-c:c)+"";var h=c.length;return p+(h<a?Array(a-h+1).join(r)+c:c)}function cc(c){return new RegExp("^(?:"+c.map(w.requote).join("|")+")","i")}function dc(c){for(var r=new t,a=-1,p=c.length;++a<p;)r.set(c[a].toLowerCase(),a);return r}function zg(c,r,a){ua.lastIndex=
0;return(r=ua.exec(r.substring(a,a+1)))?(c.w=+r[0],a+r[0].length):-1}function yg(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a)))?(c.U=+r[0],a+r[0].length):-1}function Ag(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a)))?(c.W=+r[0],a+r[0].length):-1}function Cg(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+4)))?(c.y=+r[0],a+r[0].length):-1}function Bg(c,r,a){ua.lastIndex=0;if(r=ua.exec(r.substring(a,a+2))){var p=+r[0];c=(c.y=p+(68<p?1900:2E3),a+r[0].length)}else c=-1;return c}
function Dg(c,r,a){return/^[+-]\d{4}$/.test(r=r.substring(a,a+5))?(c.Z=-r,a+5):-1}function vg(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+2)))?(c.m=r[0]-1,a+r[0].length):-1}function he(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+2)))?(c.d=+r[0],a+r[0].length):-1}function tg(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+3)))?(c.j=+r[0],a+r[0].length):-1}function ie(c,r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+2)))?(c.H=+r[0],a+r[0].length):-1}function wg(c,
r,a){ua.lastIndex=0;return(r=ua.exec(r.substring(a,a+2)))?(c.M=+r[0],a+r[0].length):-1}function xg(c,a,f){ua.lastIndex=0;return(a=ua.exec(a.substring(f,f+2)))?(c.S=+a[0],f+a[0].length):-1}function ug(c,a,f){ua.lastIndex=0;return(a=ua.exec(a.substring(f,f+3)))?(c.L=+a[0],f+a[0].length):-1}function sg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var f=~~(ma(a)/60),a=ma(a)%60;return c+Ba(f,"0",2)+Ba(a,"0",2)}function Eg(c,a,f){je.lastIndex=0;return(c=je.exec(a.substring(f,f+1)))?f+c[0].length:-1}function rg(c){for(var a=
c.length,f=-1;++f<a;)c[f][0]=this(c[f][0]);return function(a){for(var r=0,f=c[r];!f[1](a);)f=c[++r];return f[0](a)}}function bd(){}function ke(c,a,f){var p=f.s=c+a,h=p-c;f.t=c-(p-h)+(a-h)}function ec(c,a){if(c&&le.hasOwnProperty(c.type))le[c.type](c,a)}function cd(c,a,f){var p=-1;f=c.length-f;var h;for(a.lineStart();++p<f;)h=c[p],a.point(h[0],h[1],h[2]);a.lineEnd()}function me(c,a){var f=-1,p=c.length;for(a.polygonStart();++f<p;)cd(c[f],a,1);a.polygonEnd()}function Fg(){function c(c,a){c*=ka;a=a*
ka/2+la/4;var r=c-p,f=0<=r?1:-1,b=f*r,r=Math.cos(a),l=Math.sin(a),e=m*l,k=h*r+e*Math.cos(b),f=e*f*Math.sin(b);lb.add(Math.atan2(f,k));p=c;h=r;m=l}var a,f,p,h,m;Fa.point=function(b,x){Fa.point=c;p=(a=b)*ka;h=Math.cos(x=(f=x)*ka/2+la/4);m=Math.sin(x)};Fa.lineEnd=function(){c(a,f)}}function mb(c){var a=c[0];c=c[1];var f=Math.cos(c);return[f*Math.cos(a),f*Math.sin(a),Math.sin(c)]}function fc(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function ub(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*
a[1]-c[1]*a[0]]}function dd(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function gc(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function hc(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function ic(c){return[Math.atan2(c[1],c[0]),ga(c[2])]}function jc(c,a){return 1E-6>ma(c[0]-a[0])&&1E-6>ma(c[1]-a[1])}function ed(c,a){c*=ka;var f=Math.cos(a*=ka);Gb(f*Math.cos(c),f*Math.sin(c),Math.sin(a))}function Gb(c,a,f){++Hb;Za+=(c-Za)/Hb;$a+=(a-$a)/Hb;Qa+=(f-Qa)/Hb}function ne(){function c(c,m){c*=
ka;var b=Math.cos(m*=ka),x=b*Math.cos(c),b=b*Math.sin(c),T=Math.sin(m),fa=Math.atan2(Math.sqrt((fa=f*T-p*b)*fa+(fa=p*x-a*T)*fa+(fa=a*b-f*x)*fa),a*x+f*b+p*T);vb+=fa;Ia+=fa*(a+(a=x));Ja+=fa*(f+(f=b));Ca+=fa*(p+(p=T));Gb(a,f,p)}var a,f,p;Na.point=function(h,m){h*=ka;var b=Math.cos(m*=ka);a=b*Math.cos(h);f=b*Math.sin(h);p=Math.sin(m);Na.point=c;Gb(a,f,p)}}function oe(){Na.point=ed}function Gg(){function c(c,a){c*=ka;var r=Math.cos(a*=ka),f=r*Math.cos(c),r=r*Math.sin(c),b=Math.sin(a),l=h*b-m*r,e=m*f-p*
b,k=p*r-h*f,g=Math.sqrt(l*l+e*e+k*k),q=p*f+h*r+m*b,n=g&&-na(q)/g,g=Math.atan2(g,q);db+=n*l;eb+=n*e;Ra+=n*k;vb+=g;Ia+=g*(p+(p=f));Ja+=g*(h+(h=r));Ca+=g*(m+(m=b));Gb(p,h,m)}var a,f,p,h,m;Na.point=function(b,x){a=b;f=x;Na.point=c;b*=ka;var T=Math.cos(x*=ka);p=T*Math.cos(b);h=T*Math.sin(b);m=Math.sin(x);Gb(p,h,m)};Na.lineEnd=function(){c(a,f);Na.lineEnd=oe;Na.point=ed}}function wb(){return!0}function pe(c,a,f,p,h){var m=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,r=c[0],f=c[a];if(jc(r,
f)){h.lineStart();for(f=0;f<a;++f)h.point((r=c[f])[0],r[1]);h.lineEnd()}else a=new kc(r,c,null,!0),r=new kc(r,null,a,!1),a.o=r,m.push(a),b.push(r),a=new kc(f,c,null,!1),r=new kc(f,null,a,!0),a.o=r,m.push(a),b.push(r)}});b.sort(a);qe(m);qe(b);if(m.length){c=0;a=f;for(f=b.length;c<f;++c)b[c].e=a=!a;a=m[0];for(var x,T;;){for(var fa=a,l=!0;fa.v;)if((fa=fa.n)===a)return;x=fa.z;h.lineStart();do{fa.v=fa.o.v=!0;if(fa.e){if(l)for(c=0,f=x.length;c<f;++c)h.point((T=x[c])[0],T[1]);else p(fa.x,fa.n.x,1,h);fa=
fa.n}else{if(l)for(x=fa.p.z,c=x.length-1;0<=c;--c)h.point((T=x[c])[0],T[1]);else p(fa.x,fa.p.x,-1,h);fa=fa.p}fa=fa.o;x=fa.z;l=!l}while(!fa.v);h.lineEnd()}}}function qe(c){if(a=c.length){for(var a,f=0,p=c[0],h;++f<a;)p.n=h=c[f],h.p=p,p=h;p.n=h=c[0];h.p=p}}function kc(c,a,f,p){this.x=c;this.z=a;this.o=f;this.e=p;this.v=!1;this.n=this.p=null}function re(c,a,f,p){return function(h,m){function b(a,r){var f=h(a,r);c(a=f[0],r=f[1])&&m.point(a,r)}function x(c,a){var r=h(c,a);g.point(r[0],r[1])}function T(){n.point=
x;g.lineStart()}function fa(){n.point=b;g.lineEnd()}function l(c,a){D.push([c,a]);var r=h(c,a);z.point(r[0],r[1])}function e(){z.lineStart();D=[]}function k(){l(D[0][0],D[0][1]);z.lineEnd();var c=z.clean(),a=u.buffer(),r=a.length;D.pop();y.push(D);D=null;if(r)if(c&1){var c=a[0],r=c.length-1,a=-1,f;if(0<r){L||(m.polygonStart(),L=!0);for(m.lineStart();++a<r;)m.point((f=c[a])[0],f[1]);m.lineEnd()}}else 1<r&&c&2&&a.push(a.pop().concat(a.shift())),t.push(a.filter(Hg))}var g=a(m),q=h.invert(p[0],p[1]),
n={point:b,lineStart:T,lineEnd:fa,polygonStart:function(){n.point=l;n.lineStart=e;n.lineEnd=k;t=[];y=[]},polygonEnd:function(){n.point=b;n.lineStart=T;n.lineEnd=fa;t=w.merge(t);var c,a=q;c=y;var r=a[0],p=a[1],h=[Math.sin(r),-Math.cos(r),0],x=0,l=0;lb.reset();for(var e=0,k=c.length;e<k;++e){var g=c[e],Ua=g.length;if(Ua)for(var Va=g[0],u=Va[0],a=Va[1]/2+la/4,z=Math.sin(a),Ud=Math.cos(a),D=1;;){D===Ua&&(D=0);var a=g[D],K=a[0],C=a[1]/2+la/4,J=Math.sin(C),C=Math.cos(C),v=K-u,Q=0<=v?1:-1,W=Q*v,G=W>la,z=
z*J;lb.add(Math.atan2(z*Q*Math.sin(W),Ud*C+z*Math.cos(W)));x+=G?v+Q*Ga:v;G^u>=r^K>=r&&(Va=ub(mb(Va),mb(a)),hc(Va),u=ub(h,Va),hc(u),u=(G^0<=v?-1:1)*ga(u[2]),p>u||p===u&&(Va[0]||Va[1]))&&(l+=G^0<=v?1:-1);if(!D++)break;u=K;z=J;Ud=C;Va=a}}c=(-1E-6>x||1E-6>x&&0>lb)^l&1;t.length?(L||(m.polygonStart(),L=!0),pe(t,Ig,c,f,m)):c&&(L||(m.polygonStart(),L=!0),m.lineStart(),f(null,null,1,m),m.lineEnd());L&&(m.polygonEnd(),L=!1);t=y=null},sphere:function(){m.polygonStart();m.lineStart();f(null,null,1,m);m.lineEnd();
m.polygonEnd()}},t,u=se(),z=a(u),L=!1,y,D;return n}}function Hg(c){return 1<c.length}function se(){var c=[],a;return{lineStart:function(){c.push(a=[])},point:function(c,p){a.push([c,p])},lineEnd:A,buffer:function(){var f=c;c=[];a=null;return f},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Ig(c,a){return(0>(c=c.x)[0]?c[1]-xa-1E-6:xa-c[1])-(0>(a=a.x)[0]?a[1]-xa-1E-6:xa-a[1])}function Jg(c){function a(c,r){return Math.cos(c)*Math.cos(r)>h}function f(c,a,r){var f=mb(c),p=
mb(a),m=[1,0,0],p=ub(f,p),b=fc(p,p),f=p[0],x=b-f*f;if(!x)return!r&&c;b=h*b/x;x=-h*f/x;f=ub(m,p);m=gc(m,b);p=gc(p,x);dd(m,p);p=fc(m,f);b=fc(f,f);x=p*p-b*(fc(m,m)-1);if(!(0>x)){var ba=Math.sqrt(x),x=gc(f,(-p-ba)/b);dd(x,m);x=ic(x);if(!r)return x;r=c[0];var l=a[0];c=c[1];a=a[1];var e;l<r&&(e=r,r=l,l=e);var k=l-r,g=1E-6>ma(k-la);!g&&a<c&&(e=c,c=a,a=e);if(g||1E-6>k?g?0<c+a^x[1]<(1E-6>ma(x[0]-r)?c:a):c<=x[1]&&x[1]<=a:k>la^(r<=x[0]&&x[0]<=l))return a=gc(f,(-p+ba)/b),dd(a,m),[x,ic(a)]}}function p(a,r){var f=
m?c:la-c,p=0;a<-f?p|=1:a>f&&(p|=2);r<-f?p|=4:r>f&&(p|=8);return p}var h=Math.cos(c),m=0<h,b=1E-6<ma(h),x=fd(c,6*ka);return re(a,function(c){var h,x,l,e,k;return{lineStart:function(){e=l=!1;k=1},point:function(g,q){var n=[g,q],u,t=a(g,q),z=m?t?0:p(g,q):t?p(g+(0>g?la:-la),q):0;!h&&(e=l=t)&&c.lineStart();t!==l&&(u=f(h,n),jc(h,u)||jc(n,u))&&(n[0]+=1E-6,n[1]+=1E-6,t=a(n[0],n[1]));if(t!==l)k=0,t?(c.lineStart(),u=f(n,h),c.point(u[0],u[1])):(u=f(h,n),c.point(u[0],u[1]),c.lineEnd()),h=u;else if(b&&h&&m^t){var L;
z&x||!(L=f(n,h,!0))||(k=0,m?(c.lineStart(),c.point(L[0][0],L[0][1]),c.point(L[1][0],L[1][1]),c.lineEnd()):(c.point(L[1][0],L[1][1]),c.lineEnd(),c.lineStart(),c.point(L[0][0],L[0][1])))}!t||h&&jc(h,n)||c.point(n[0],n[1]);h=n;l=t;x=z},lineEnd:function(){l&&c.lineEnd();h=null},clean:function(){return k|(e&&l)<<1}}},x,m?[0,-c]:[-la,c-la])}function te(c,a,f,p){return function(h){var m=h.a,b=h.b,x=m.x,m=m.y,T=0,fa=1,l=b.x-x,b=b.y-m,e;e=c-x;if(l||!(0<e)){e/=l;if(0>l){if(e<T)return;e<fa&&(fa=e)}else if(0<
l){if(e>fa)return;e>T&&(T=e)}e=f-x;if(l||!(0>e)){e/=l;if(0>l){if(e>fa)return;e>T&&(T=e)}else if(0<l){if(e<T)return;e<fa&&(fa=e)}e=a-m;if(b||!(0<e)){e/=b;if(0>b){if(e<T)return;e<fa&&(fa=e)}else if(0<b){if(e>fa)return;e>T&&(T=e)}e=p-m;if(b||!(0>e)){e/=b;if(0>b){if(e>fa)return;e>T&&(T=e)}else if(0<b){if(e<T)return;e<fa&&(fa=e)}0<T&&(h.a={x:x+T*l,y:m+T*b});1>fa&&(h.b={x:x+fa*l,y:m+fa*b});return h}}}}}}function ue(c,a,f,p){function h(p,h){return 1E-6>ma(p[0]-c)?0<h?0:3:1E-6>ma(p[0]-f)?0<h?2:1:1E-6>ma(p[1]-
a)?0<h?1:0:0<h?3:2}function m(c,a){return b(c.x,a.x)}function b(c,a){var r=h(c,1),f=h(a,1);return r!==f?r-f:0===r?a[1]-c[1]:1===r?c[0]-a[0]:2===r?c[1]-a[1]:a[0]-c[0]}return function(x){function T(m,x,T,fa){var l=0,e=0;if(null==m||(l=h(m,T))!==(e=h(x,T))||0>b(m,x)^0<T){do fa.point(0===l||3===l?c:f,1<l?p:a);while((l=(l+T+4)%4)!==e)}else fa.point(x[0],x[1])}function fa(h,m){c<=h&&h<=f&&a<=m&&m<=p&&x.point(h,m)}function l(h,m){h=Math.max(-1E9,Math.min(1E9,h));m=Math.max(-1E9,Math.min(1E9,m));var b=c<=
h&&h<=f&&a<=m&&m<=p;q&&u.push([h,m]);if(J)z=h,L=m,y=b,J=!1,b&&(x.lineStart(),x.point(h,m));else if(b&&C)x.point(h,m);else{var ba={a:{x:D,y:K},b:{x:h,y:m}};g(ba)?(C||(x.lineStart(),x.point(ba.a.x,ba.a.y)),x.point(ba.b.x,ba.b.y),b||x.lineEnd(),v=!1):b&&(x.lineStart(),x.point(h,m),v=!1)}D=h;K=m;C=b}var e=x,k=se(),g=te(c,a,f,p),n,q,u,t={point:fa,lineStart:function(){t.point=l;q&&q.push(u=[]);J=!0;C=!1;D=K=NaN},lineEnd:function(){n&&(l(z,L),y&&C&&k.rejoin(),n.push(k.buffer()));t.point=fa;C&&x.lineEnd()},
polygonStart:function(){x=k;n=[];q=[];v=!0},polygonEnd:function(){x=e;n=w.merge(n);var a;a=[c,p];for(var r=0,f=q.length,h=a[1],b=0;b<f;++b)for(var ba=1,fa=q[b],l=fa.length,k=fa[0],g;ba<l;++ba)g=fa[ba],k[1]<=h?g[1]>h&&0<Z(k,g,a)&&++r:g[1]<=h&&0>Z(k,g,a)&&--r,k=g;a=0!==r;r=v&&a;f=n.length;if(r||f)x.polygonStart(),r&&(x.lineStart(),T(null,null,1,x),x.lineEnd()),f&&pe(n,m,a,T,x),x.polygonEnd();n=q=u=null}},z,L,y,D,K,C,J,v;return t}}function ve(c,a){function f(f,h){return f=c(f,h),a(f[0],f[1])}c.invert&&
a.invert&&(f.invert=function(f,h){return f=a.invert(f,h),f&&c.invert(f[0],f[1])});return f}function gd(c){var a=0,f=la/3,p=hd(c);c=p(a,f);c.parallels=function(c){return arguments.length?p(a=c[0]*la/180,f=c[1]*la/180):[a/la*180,f/la*180]};return c}function we(c,a){function f(c,a){var r=Math.sqrt(m-2*h*Math.sin(a))/h;return[r*Math.sin(c*=h),b-r*Math.cos(c)]}var p=Math.sin(c),h=(p+Math.sin(a))/2,m=1+p*(2*h-p),b=Math.sqrt(m)/h;f.invert=function(c,a){var r=b-a;return[Math.atan2(c,r)/h,ga((m-(c*c+r*r)*
h*h)/(2*h))]};return f}function Kg(){function c(c,a){lc+=h*c-p*a;p=c;h=a}var a,f,p,h;fb.point=function(m,b){fb.point=c;a=p=m;f=h=b};fb.lineEnd=function(){c(a,f)}}function Lg(){function c(c,a){b.push("M",c,",",a,m)}function a(c,r){b.push("M",c,",",r);x.point=f}function f(c,a){b.push("L",c,",",a)}function p(){x.point=c}function h(){b.push("Z")}var m=xe(4.5),b=[],x={point:c,lineStart:function(){x.point=a},lineEnd:p,polygonStart:function(){x.lineEnd=h},polygonEnd:function(){x.lineEnd=p;x.point=c},pointRadius:function(c){m=
xe(c);return x},result:function(){if(b.length){var c=b.join("");b=[];return c}}};return x}function xe(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function nb(c,a){Za+=c;$a+=a;++Qa}function ye(){function c(c,h){var m=c-a,b=h-f,m=Math.sqrt(m*m+b*b);Ia+=m*(a+c)/2;Ja+=m*(f+h)/2;Ca+=m;nb(a=c,f=h)}var a,f;Oa.point=function(p,h){Oa.point=c;nb(a=p,f=h)}}function ze(){Oa.point=nb}function Mg(){function c(c,a){var r=c-p,f=a-h,r=Math.sqrt(r*r+f*f);Ia+=r*(p+c)/2;Ja+=r*(h+a)/
2;Ca+=r;r=h*c-p*a;db+=r*(p+c);eb+=r*(h+a);Ra+=3*r;nb(p=c,h=a)}var a,f,p,h;Oa.point=function(m,b){Oa.point=c;nb(a=p=m,f=h=b)};Oa.lineEnd=function(){c(a,f)}}function Ng(c){function a(r,f){c.moveTo(r,f);c.arc(r,f,b,0,Ga)}function f(a,r){c.moveTo(a,r);x.point=p}function p(a,r){c.lineTo(a,r)}function h(){x.point=a}function m(){c.closePath()}var b=4.5,x={point:a,lineStart:function(){x.point=f},lineEnd:h,polygonStart:function(){x.lineEnd=m},polygonEnd:function(){x.lineEnd=h;x.point=a},pointRadius:function(c){b=
c;return x},result:A};return x}function Ae(c){function a(c){return(x?p:f)(c)}function f(a){return Be(a,function(r,f){r=c(r,f);a.point(r[0],r[1])})}function p(a){function r(f,p){f=c(f,p);a.point(f[0],f[1])}function f(){z=NaN;C.point=p;a.lineStart()}function p(r,f){var m=mb([r,f]),b=c(r,f);h(z,L,t,D,y,K,z=b[0],L=b[1],t=r,D=m[0],y=m[1],K=m[2],x,a);a.point(z,L)}function m(){C.point=r;a.lineEnd()}function b(){f();C.point=ba;C.lineEnd=l}function ba(c,a){p(e=c,a);k=z;g=L;n=D;q=y;u=K;C.point=p}function l(){h(z,
L,t,D,y,K,k,g,e,n,q,u,x,a);C.lineEnd=m;m()}var e,k,g,n,q,u,t,z,L,D,y,K,C={point:r,lineStart:f,lineEnd:m,polygonStart:function(){a.polygonStart();C.lineStart=b},polygonEnd:function(){a.polygonEnd();C.lineStart=f}};return C}function h(a,r,f,p,x,l,e,k,g,n,q,u,t,z){var L=e-a,D=k-r,y=L*L+D*D;if(y>4*m&&t--){var C=p+n,K=x+q,w=l+u,J=Math.sqrt(C*C+K*K+w*w),v=Math.asin(w/=J),Q=1E-6>ma(ma(w)-1)||1E-6>ma(f-g)?(f+g)/2:Math.atan2(K,C),W=c(Q,v),v=W[0],W=W[1],G=v-a,V=W-r,E=D*G-L*V;if(E*E/y>m||.3<ma((L*G+D*V)/y-.5)||
p*n+x*q+l*u<b)h(a,r,f,p,x,l,v,W,Q,C/=J,K/=J,w,t,z),z.point(v,W),h(v,W,Q,C,K,w,e,k,g,n,q,u,t,z)}}var m=.5,b=Math.cos(30*ka),x=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(m);x=0<(m=c*c)&&16;return a};return a}function Og(c){var a=Ae(function(a,r){return c([a*sa,r*sa])});return function(c){return Ce(a(c))}}function De(c){this.stream=c}function Be(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},
polygonEnd:function(){c.polygonEnd()}}}function gb(c){return hd(function(){return c})()}function hd(c){function a(c){c=x(c[0]*ka,c[1]*ka);return[c[0]*l+z,L-c[1]*l]}function f(c){return(c=x.invert((c[0]-z)/l,(L-c[1])/l))&&[c[0]*sa,c[1]*sa]}function p(){x=ve(b=id(q,u,t),m);var c=m(g,n);z=e-c[0]*l;L=k+c[1]*l;return h()}function h(){v&&(v.valid=!1,v=null);return a}var m,b,x,T=Ae(function(c,a){c=m(c,a);return[c[0]*l+z,L-c[1]*l]}),l=150,e=480,k=250,g=0,n=0,q=0,u=0,t=0,z,L,D=Ee,y=wa,C=null,K=null,v;a.stream=
function(c){v&&(v.valid=!1);v=Ce(D(b,T(y(c))));v.valid=!0;return v};a.clipAngle=function(c){if(!arguments.length)return C;D=null==c?(C=c,Ee):Jg((C=+c)*ka);return h()};a.clipExtent=function(c){if(!arguments.length)return K;y=(K=c)?ue(c[0][0],c[0][1],c[1][0],c[1][1]):wa;return h()};a.scale=function(c){if(!arguments.length)return l;l=+c;return p()};a.translate=function(c){if(!arguments.length)return[e,k];e=+c[0];k=+c[1];return p()};a.center=function(c){if(!arguments.length)return[g*sa,n*sa];g=c[0]%360*
ka;n=c[1]%360*ka;return p()};a.rotate=function(c){if(!arguments.length)return[q*sa,u*sa,t*sa];q=c[0]%360*ka;u=c[1]%360*ka;t=2<c.length?c[2]%360*ka:0;return p()};w.rebind(a,T,"precision");return function(){m=c.apply(this,arguments);a.invert=m.invert&&f;return p()}}function Ce(c){return Be(c,function(a,f){c.point(a*ka,f*ka)})}function Ib(c,a){return[c,a]}function Fe(c,a){return[c>la?c-Ga:c<-la?c+Ga:c,a]}function id(c,a,f){return c?a||f?ve(Ge(c),He(a,f)):Ge(c):a||f?He(a,f):Fe}function Ie(c){return function(a,
f){return a+=c,[a>la?a-Ga:a<-la?a+Ga:a,f]}}function Ge(c){var a=Ie(c);a.invert=Ie(-c);return a}function He(c,a){function f(c,a){var r=Math.cos(a),f=Math.cos(c)*r,r=Math.sin(c)*r,l=Math.sin(a),e=l*p+f*h;return[Math.atan2(r*m-e*b,f*p-l*h),ga(e*m+r*b)]}var p=Math.cos(c),h=Math.sin(c),m=Math.cos(a),b=Math.sin(a);f.invert=function(c,a){var r=Math.cos(a),f=Math.cos(c)*r,r=Math.sin(c)*r,l=Math.sin(a),e=l*m-r*b;return[Math.atan2(r*m+l*b,f*p+e*h),ga(e*p-f*h)]};return f}function fd(c,a){var f=Math.cos(c),p=
Math.sin(c);return function(h,m,b,x){var T=b*a;if(null!=h){if(h=Je(f,h),m=Je(f,m),0<b?h<m:h>m)h+=b*Ga}else h=c+b*Ga,m=c-.5*T;for(var l;0<b?h>m:h<m;h-=T)x.point((l=ic([f,-p*Math.cos(h),-p*Math.sin(h)]))[0],l[1])}}function Je(c,a){var f=mb(a);f[0]-=c;hc(f);var p=na(-f[1]);return((0>-f[2]?-p:p)+2*Math.PI-1E-6)%(2*Math.PI)}function Ke(c,a,f){var p=w.range(c,a-1E-6,f).concat(a);return function(c){return p.map(function(a){return[c,a]})}}function Le(c,a,f){var p=w.range(c,a-1E-6,f).concat(a);return function(c){return p.map(function(a){return[a,
c]})}}function jd(c){return c.source}function kd(c){return c.target}function Pg(c,a,f,p){var h=Math.cos(a),m=Math.sin(a),b=Math.cos(p),x=Math.sin(p),T=h*Math.cos(c),l=h*Math.sin(c),e=b*Math.cos(f),k=b*Math.sin(f),g=2*Math.asin(Math.sqrt(ta(p-a)+h*b*ta(f-c))),n=1/Math.sin(g);f=g?function(c){var a=Math.sin(c*=g)*n,r=Math.sin(g-c)*n;c=r*T+a*e;var f=r*l+a*k,a=r*m+a*x;return[Math.atan2(f,c)*sa,Math.atan2(a,Math.sqrt(c*c+f*f))*sa]}:function(){return[c*sa,a*sa]};f.distance=g;return f}function Jb(c,a){function f(a,
r){var f=Math.cos(a),b=Math.cos(r),f=c(f*b);return[f*b*Math.sin(a),f*Math.sin(r)]}f.invert=function(c,f){var m=Math.sqrt(c*c+f*f),b=a(m),x=Math.sin(b),b=Math.cos(b);return[Math.atan2(c*x,m*b),Math.asin(m&&f*x/m)]};return f}function Me(c,a){function f(c,a){0<m?a<-xa+1E-6&&(a=-xa+1E-6):a>xa-1E-6&&(a=xa-1E-6);var r=m/Math.pow(Math.tan(la/4+a/2),h);return[r*Math.sin(h*c),m-r*Math.cos(h*c)]}var p=Math.cos(c),h=c===a?Math.sin(c):Math.log(p/Math.cos(a))/Math.log(Math.tan(la/4+a/2)/Math.tan(la/4+c/2)),m=
p*Math.pow(Math.tan(la/4+c/2),h)/h;if(!h)return mc;f.invert=function(c,a){var r=m-a,f=(0<h?1:0>h?-1:0)*Math.sqrt(c*c+r*r);return[Math.atan2(c,r)/h,2*Math.atan(Math.pow(m/f,1/h))-xa]};return f}function Ne(c,a){function f(c,a){var r=m-a;return[r*Math.sin(h*c),m-r*Math.cos(h*c)]}var p=Math.cos(c),h=c===a?Math.sin(c):(p-Math.cos(a))/(a-c),m=p/h+c;if(1E-6>ma(h))return Ib;f.invert=function(c,a){var r=m-a;return[Math.atan2(c,r)/h,m-(0<h?1:0>h?-1:0)*Math.sqrt(c*c+r*r)]};return f}function mc(c,a){return[c,
Math.log(Math.tan(la/4+a/2))]}function Oe(c){var a=gb(c),f=a.scale,p=a.translate,h=a.clipExtent,m;a.scale=function(){var c=f.apply(a,arguments);return c===a?m?a.clipExtent(null):a:c};a.translate=function(){var c=p.apply(a,arguments);return c===a?m?a.clipExtent(null):a:c};a.clipExtent=function(c){var b=h.apply(a,arguments);if(b===a){if(m=null==c){var T=la*f(),l=p();h([[l[0]-T,l[1]-T],[l[0]+T,l[1]+T]])}}else m&&(b=null);return b};return a.clipExtent(null)}function ld(c,a){return[Math.log(Math.tan(la/
4+a/2)),-c]}function xb(c){return c[0]}function Kb(c){return c[1]}function Pe(c){for(var a=c.length,f=[0,1],p=2,h=2;h<a;h++){for(;1<p&&0>=Z(c[f[p-2]],c[f[p-1]],c[h]);)--p;f[p++]=h}return f.slice(0,p)}function Qg(c,a){return c[0]-a[0]||c[1]-a[1]}function md(c,a,f){return(f[0]-a[0])*(c[1]-a[1])<(f[1]-a[1])*(c[0]-a[0])}function Qe(c,a,f,p){var h=c[0],m=f[0],b=a[0]-h,x=p[0]-m;c=c[1];f=f[1];a=a[1]-c;p=p[1]-f;m=(x*(c-f)-p*(h-m))/(p*b-x*a);return[h+m*b,c+m*a]}function Re(c){var a=c[0];c=c[c.length-1];return!(a[0]-
c[0]||a[1]-c[1])}function Rg(){nc(this);this.edge=this.site=this.circle=null}function Se(c){var a=Te.pop()||new Rg;a.site=c;return a}function nd(c){yb(c);zb.remove(c);Te.push(c);nc(c)}function Ue(c,a){var f=c.site,p=f.x,h=f.y,m=h-a;if(!m)return p;var b=c.P;if(!b)return-Infinity;var f=b.site,b=f.x,f=f.y,x=f-a;if(!x)return b;var T=b-p,l=1/m-1/x,e=T/x;return l?(-e+Math.sqrt(e*e-2*l*(T*T/(-2*x)-f+x/2+h-m/2)))/l+p:(p+b)/2}function Ve(c){this.site=c;this.edges=[]}function We(c,a){return a.angle-c.angle}
function Sg(){nc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ab(c){var a=c.P,f=c.N;if(a&&f){var p=a.site,a=c.site,h=f.site;if(p!==h){var f=a.x,m=a.y,b=p.x-f,x=p.y-m,p=h.x-f,h=h.y-m,T=2*(b*h-x*p);if(!(-1E-12<=T)){var l=b*b+x*x,e=p*p+h*h,x=(h*l-x*e)/T,b=(b*e-p*l)/T,h=b+m,m=Xe.pop()||new Sg;m.arc=c;m.site=a;m.x=x+f;m.y=h+Math.sqrt(x*x+b*b);m.cy=h;c.circle=m;c=null;for(a=Lb._;a;)if(m.y<a.y||m.y===a.y&&m.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Lb.insert(c,
m);c||(od=m)}}}}function yb(c){var a=c.circle;a&&(a.P||(od=a.N),Lb.remove(a),Xe.push(a),nc(a),c.circle=null)}function Tg(c,a){var f=c.b;if(f)return!0;var p=c.a,f=a[0][0],h=a[1][0],m=a[0][1],b=a[1][1],x=c.l,T=c.r,l=x.x,x=x.y,e=T.x,T=T.y,g=(l+e)/2,k;if(T===x){if(g<f||g>=h)return;if(l>e){if(!p)p={x:g,y:m};else if(p.y>=b)return;f={x:g,y:b}}else{if(!p)p={x:g,y:b};else if(p.y<m)return;f={x:g,y:m}}}else if(k=(l-e)/(T-x),g=(x+T)/2-k*g,-1>k||1<k)if(l>e){if(!p)p={x:(m-g)/k,y:m};else if(p.y>=b)return;f={x:(b-
g)/k,y:b}}else{if(!p)p={x:(b-g)/k,y:b};else if(p.y<m)return;f={x:(m-g)/k,y:m}}else if(x<T){if(!p)p={x:f,y:k*f+g};else if(p.x>=h)return;f={x:h,y:k*h+g}}else{if(!p)p={x:h,y:k*h+g};else if(p.x<f)return;f={x:f,y:k*f+g}}c.a=p;c.b=f;return!0}function Ye(c,a){this.l=c;this.r=a;this.a=this.b=null}function Mb(c,a,f,p){var h=new Ye(c,a);Bb.push(h);f&&oc(h,c,a,f);p&&oc(h,a,c,p);ob[c.i].edges.push(new pc(h,c,a));ob[a.i].edges.push(new pc(h,a,c));return h}function Ug(c,a,f){c=new Ye(c,null);c.a=a;c.b=f;Bb.push(c);
return c}function oc(c,a,f,p){c.a||c.b?c.l===f?c.b=p:c.a=p:(c.a=p,c.l=a,c.r=f)}function pc(c,a,f){var p=c.a,h=c.b;this.edge=c;this.site=a;this.angle=f?Math.atan2(f.y-a.y,f.x-a.x):c.l===a?Math.atan2(h.x-p.x,p.y-h.y):Math.atan2(p.x-h.x,h.y-p.y)}function pd(){this._=null}function nc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Nb(c,a){var f=a.R,p=a.U;p?p.L===a?p.L=f:p.R=f:c._=f;f.U=p;a.U=f;a.R=f.L;a.R&&(a.R.U=a);f.L=a}function Ob(c,a){var f=a.L,p=a.U;p?p.L===a?p.L=f:p.R=f:c._=f;f.U=p;a.U=f;a.L=f.R;a.L&&
(a.L.U=a);f.R=a}function Ze(c){for(;c.L;)c=c.L;return c}function qd(c,a){var f=c.sort(Vg).pop(),p,h,m;Bb=[];ob=Array(c.length);zb=new pd;for(Lb=new pd;;)if(m=od,f&&(!m||f.y<m.y||f.y===m.y&&f.x<m.x)){if(f.x!==p||f.y!==h){ob[f.i]=new Ve(f);p=f;for(var b=p.x,x=p.y,T=m=h=void 0,l=void 0,e=zb._;e;)if(T=Ue(e,x)-b,1E-6<T)e=e.L;else{var g=e,l=x,k=g.N;k?l=Ue(k,l):(g=g.site,l=g.y===l?g.x:Infinity);l=b-l;if(1E-6<l){if(!e.R){h=e;break}e=e.R}else{-1E-6<T?(h=e.P,m=e):-1E-6<l?(h=e,m=e.N):h=m=e;break}}b=Se(p);zb.insert(h,
b);if(h||m)if(h===m)yb(h),m=Se(h.site),zb.insert(b,m),b.edge=m.edge=Mb(h.site,b.site),Ab(h),Ab(m);else if(m){yb(h);yb(m);var x=h.site,e=x.x,l=x.y,g=p.x-e,k=p.y-l,T=m.site,n=T.x-e,q=T.y-l,u=2*(g*q-k*n),t=g*g+k*k,z=n*n+q*q,e={x:(q*t-k*z)/u+e,y:(g*z-n*t)/u+l};oc(m.edge,x,T,e);b.edge=Mb(x,p,null,e);m.edge=Mb(p,T,null,e);Ab(h);Ab(m)}else b.edge=Mb(h.site,b.site);p=f.x;h=f.y}f=c.pop()}else if(m){T=m.arc;m=T.circle;x=m.x;e=m.cy;m={x:x,y:e};g=T.P;l=T.N;b=[T];nd(T);for(T=g;T.circle&&1E-6>ma(x-T.circle.x)&&
1E-6>ma(e-T.circle.cy);)g=T.P,b.unshift(T),nd(T),T=g;b.unshift(T);yb(T);for(g=l;g.circle&&1E-6>ma(x-g.circle.x)&&1E-6>ma(e-g.circle.cy);)l=g.N,b.push(g),nd(g),g=l;b.push(g);yb(g);x=b.length;e=void 0;for(e=1;e<x;++e)g=b[e],T=b[e-1],oc(g.edge,T.site,g.site,m);T=b[0];g=b[x-1];g.edge=Mb(T.site,g.site,null,m);Ab(T);Ab(g)}else break;if(a){f=Bb;p=te(a[0][0],a[0][1],a[1][0],a[1][1]);for(h=f.length;h--;)if(m=f[h],!Tg(m,a)||!p(m)||1E-6>ma(m.a.x-m.b.x)&&1E-6>ma(m.a.y-m.b.y))m.a=m.b=null,f.splice(h,1);f=a[0][0];
p=a[1][0];h=a[0][1];m=a[1][1];e=ob;for(l=e.length;l--;)if((g=e[l])&&g.prepare())for(n=g.edges,q=n.length,k=0;k<q;)if(u=n[k].end(),x=u.x,T=u.y,t=n[++k%q].start(),b=t.x,t=t.y,1E-6<ma(x-b)||1E-6<ma(T-t))n.splice(k,0,new pc(Ug(g.site,u,1E-6>ma(x-f)&&1E-6<m-T?{x:f,y:1E-6>ma(b-f)?t:m}:1E-6>ma(T-m)&&1E-6<p-x?{x:1E-6>ma(t-m)?b:p,y:m}:1E-6>ma(x-p)&&1E-6<T-h?{x:p,y:1E-6>ma(b-p)?t:h}:1E-6>ma(T-h)&&1E-6<x-f?{x:1E-6>ma(t-h)?b:f,y:h}:null),g.site,null)),++q}f={cells:ob,edges:Bb};zb=Lb=Bb=ob=null;return f}function Vg(c,
a){return a.y-c.y||a.x-c.x}function Wg(c){return c.x}function Xg(c){return c.y}function $e(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Pb(c,a,f,p,h,m){if(!c(a,f,p,h,m)){var b=.5*(f+h),x=.5*(p+m);a=a.nodes;a[0]&&Pb(c,a[0],f,p,b,x);a[1]&&Pb(c,a[1],b,p,h,x);a[2]&&Pb(c,a[2],f,x,b,m);a[3]&&Pb(c,a[3],b,x,h,m)}}function rd(c,a){c=w.rgb(c);a=w.rgb(a);var f=c.r,p=c.g,h=c.b,m=a.r-f,b=a.g-p,x=a.b-h;return function(c){return"#"+tb(Math.round(f+m*c))+tb(Math.round(p+b*c))+tb(Math.round(h+x*c))}}
function af(c,a){var f={},p={},h;for(h in c)h in a?f[h]=pb(c[h],a[h]):p[h]=c[h];for(h in a)h in c||(p[h]=a[h]);return function(c){for(h in f)p[h]=f[h](c);return p}}function ab(c,a){a-=c=+c;return function(f){return c+a*f}}function bf(c,a){var f=sd.lastIndex=td.lastIndex=0,p,h,m,b=-1,x=[],l=[];c+="";for(a+="";(p=sd.exec(c))&&(h=td.exec(a));)(m=h.index)>f&&(m=a.substring(f,m),x[b]?x[b]+=m:x[++b]=m),(p=p[0])===(h=h[0])?x[b]?x[b]+=h:x[++b]=h:(x[++b]=null,l.push({i:b,x:ab(p,h)})),f=td.lastIndex;f<a.length&&
(m=a.substring(f),x[b]?x[b]+=m:x[++b]=m);return 2>x.length?l[0]?(a=l[0].x,function(c){return a(c)+""}):function(){return a}:(a=l.length,function(c){for(var f=0,p;f<a;++f)x[(p=l[f]).i]=p.x(c);return x.join("")})}function pb(c,a){for(var f=w.interpolators.length,p;0<=--f&&!(p=w.interpolators[f](c,a)););return p}function qc(c,a){var f=[],p=[],h=c.length,m=a.length,b=Math.min(c.length,a.length),x;for(x=0;x<b;++x)f.push(pb(c[x],a[x]));for(;x<h;++x)p[x]=c[x];for(;x<m;++x)p[x]=a[x];return function(c){for(x=
0;x<b;++x)p[x]=f[x](c);return p}}function Yg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function cf(c){return function(a){return 1-c(1-a)}}function df(c){return function(a){return.5*(.5>a?c(2*a):2-c(2-2*a))}}function Zg(c){return c*c}function $g(c){return c*c*c}function ah(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,f=a*c;return 4*(.5>c?f:3*(c-a)+f-.75)}function bh(c){return 1-Math.cos(c*xa)}function ch(c){return Math.pow(2,10*(c-1))}function dh(c){return 1-Math.sqrt(1-c*c)}function eh(c){return c<
1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function ef(c,a){a-=c;return function(f){return Math.round(c+a*f)}}function ff(c){var a=[c.a,c.b],f=[c.c,c.d],p=gf(a),h=a[0]*f[0]+a[1]*f[1],m=-h;f[0]+=m*a[0];f[1]+=m*a[1];m=gf(f)||0;a[0]*f[1]<f[0]*a[1]&&(a[0]*=-1,a[1]*=-1,p*=-1,h*=-1);this.rotate=(p?Math.atan2(a[1],a[0]):Math.atan2(-f[0],f[1]))*sa;this.translate=[c.e,c.f];this.scale=[p,m];this.skew=m?Math.atan2(h,m)*sa:0}
function gf(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function hf(c,a){var f=[],p=[],h,m=w.transform(c),b=w.transform(a),x=m.translate,l=b.translate,e=m.rotate,g=b.rotate,k=m.skew,n=b.skew,m=m.scale,b=b.scale;x[0]!=l[0]||x[1]!=l[1]?(f.push("translate(",null,",",null,")"),p.push({i:1,x:ab(x[0],l[0])},{i:3,x:ab(x[1],l[1])})):l[0]||l[1]?f.push("translate("+l+")"):f.push("");e!=g?(180<e-g?g+=360:180<g-e&&(e+=360),p.push({i:f.push(f.pop()+"rotate(",null,")")-2,x:ab(e,g)})):
g&&f.push(f.pop()+"rotate("+g+")");k!=n?p.push({i:f.push(f.pop()+"skewX(",null,")")-2,x:ab(k,n)}):n&&f.push(f.pop()+"skewX("+n+")");m[0]!=b[0]||m[1]!=b[1]?(h=f.push(f.pop()+"scale(",null,",",null,")"),p.push({i:h-4,x:ab(m[0],b[0])},{i:h-2,x:ab(m[1],b[1])})):1==b[0]&&1==b[1]||f.push(f.pop()+"scale("+b+")");h=p.length;return function(c){for(var a=-1,r;++a<h;)f[(r=p[a]).i]=r.x(c);return f.join("")}}function fh(c,a){a=a-(c=+c)?1/(a-c):0;return function(f){return(f-c)*a}}function gh(c,a){a=a-(c=+c)?1/
(a-c):0;return function(f){return Math.max(0,Math.min(1,(f-c)*a))}}function hh(c){var a=c.source;c=c.target;var f;var p=c;if(a===p)f=a;else{f=jf(a);for(var p=jf(p),h=f.pop(),m=p.pop(),b=null;h===m;)b=h,h=f.pop(),m=p.pop();f=b}for(p=[a];a!==f;)a=a.parent,p.push(a);for(a=p.length;c!==f;)p.splice(a,0,c),c=c.parent;return p}function jf(c){for(var a=[],f=c.parent;null!=f;)a.push(c),c=f,f=f.parent;a.push(c);return a}function ih(c){c.fixed|=2}function jh(c){c.fixed&=-7}function kh(c){c.fixed|=4;c.px=c.x;
c.py=c.y}function lh(c){c.fixed&=-5}function kf(c,a,f){var p=0,h=0;c.charge=0;if(!c.leaf)for(var m=c.nodes,b=m.length,x=-1,l;++x<b;)l=m[x],null!=l&&(kf(l,a,f),c.charge+=l.charge,p+=l.charge*l.cx,h+=l.charge*l.cy);c.point&&(c.leaf||(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=f[c.point.index],c.charge+=c.pointCharge=a,p+=a*c.point.x,h+=a*c.point.y);c.cx=p/c.charge;c.cy=h/c.charge}function Qb(c,a){w.rebind(c,a,"sort","children","value");c.nodes=c;c.links=mh;return c}function Rb(c,a){for(var f=
[c];null!=(c=f.pop());)if(a(c),(h=c.children)&&(p=h.length))for(var p,h;0<=--p;)f.push(h[p])}function Sa(c,a){for(var f=[c],p=[];null!=(c=f.pop());)if(p.push(c),(b=c.children)&&(m=b.length))for(var h=-1,m,b;++h<m;)f.push(b[h]);for(;null!=(c=p.pop());)a(c)}function nh(c){return c.children}function oh(c){return c.value}function ph(c,a){return a.value-c.value}function mh(c){return w.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function qh(c){return c.x}
function rh(c){return c.y}function sh(c,a,f){c.y0=a;c.y=f}function ud(c){return w.range(c.length)}function vd(c){var a=-1;c=c[0].length;for(var f=[];++a<c;)f[a]=0;return f}function th(c){for(var a=1,f=0,p=c[0][1],h,m=c.length;a<m;++a)(h=c[a][1])>p&&(f=a,p=h);return f}function uh(c){return c.reduce(vh,0)}function vh(c,a){return c+a[1]}function wh(c,a){return lf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function lf(c,a){for(var f=-1,p=+c[0],h=(c[1]-p)/a,m=[];++f<=a;)m[f]=h*f+p;return m}function xh(c){return[w.min(c),
w.max(c)]}function yh(c,a){return c.value-a.value}function wd(c,a){var f=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=f;f._pack_prev=a}function mf(c,a){c._pack_next=a;a._pack_prev=c}function nf(c,a){var f=a.x-c.x,p=a.y-c.y,h=c.r+a.r;return.999*h*h>f*f+p*p}function of(c){function a(c){p=Math.min(c.x-c.r,p);h=Math.max(c.x+c.r,h);m=Math.min(c.y-c.r,m);b=Math.max(c.y+c.r,b)}if((f=c.children)&&(q=f.length)){var f,p=Infinity,h=-Infinity,m=Infinity,b=-Infinity,x,l,e,g,k,n,q;f.forEach(zh);x=f[0];
x.x=-x.r;x.y=0;a(x);if(1<q&&(l=f[1],l.x=l.r,l.y=0,a(l),2<q))for(e=f[2],pf(x,l,e),a(e),wd(x,e),x._pack_prev=e,wd(e,l),l=x._pack_next,g=3;g<q;g++){pf(x,l,e=f[g]);var t=0,u=1,z=1;for(k=l._pack_next;k!==l;k=k._pack_next,u++)if(nf(k,e)){t=1;break}if(1==t)for(n=x._pack_prev;n!==k._pack_prev&&!nf(n,e);n=n._pack_prev,z++);t?(u<z||u==z&&l.r<x.r?mf(x,l=k):mf(x=n,l),g--):(wd(x,e),l=e,a(e))}x=(p+h)/2;l=(m+b)/2;for(g=k=0;g<q;g++)e=f[g],e.x-=x,e.y-=l,k=Math.max(k,e.r+Math.sqrt(e.x*e.x+e.y*e.y));c.r=k;f.forEach(Ah)}}
function zh(c){c._pack_next=c._pack_prev=c}function Ah(c){delete c._pack_next;delete c._pack_prev}function qf(c,a,f,p){var h=c.children;c.x=a+=p*c.x;c.y=f+=p*c.y;c.r*=p;if(h){c=-1;for(var m=h.length;++c<m;)qf(h[c],a,f,p)}}function pf(c,a,f){var p=c.r+f.r,h=a.x-c.x,m=a.y-c.y;if(p&&(h||m)){var b=a.r+f.r,x=h*h+m*m,b=b*b,p=p*p;a=.5+(p-b)/(2*x);b=Math.sqrt(Math.max(0,2*b*(p+x)-(p-=x)*p-b*b))/(2*x);f.x=c.x+a*h+b*m;f.y=c.y+a*m-b*h}else f.x=c.x+p,f.y=c.y}function rf(c,a){return c.parent==a.parent?1:2}function xd(c){var a=
c.children;return a.length?a[0]:c.t}function yd(c){var a=c.children,f;return(f=a.length)?a[f-1]:c.t}function Bh(c){return 1+w.max(c,function(c){return c.y})}function Ch(c){return c.reduce(function(c,a){return c+a.x},0)/c.length}function sf(c){var a=c.children;return a&&a.length?sf(a[0]):c}function tf(c){var a=c.children,f;return a&&(f=a.length)?tf(a[f-1]):c}function zd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function uf(c,a){var f=c.x+a[3],p=c.y+a[0],h=c.dx-a[1]-a[3],m=c.dy-a[0]-a[2];0>h&&(f+=h/2,
h=0);0>m&&(p+=m/2,m=0);return{x:f,y:p,dx:h,dy:m}}function Cb(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function rc(c){return c.rangeExtent?c.rangeExtent():Cb(c.range())}function Dh(c,a,f,p){var h=f(c[0],c[1]),m=p(a[0],a[1]);return function(c){return m(h(c))}}function sc(c,a){var f=0,p=c.length-1,h=c[f],m=c[p],b;m<h&&(b=f,f=p,p=b,b=h,h=m,m=b);c[f]=a.floor(h);c[p]=a.ceil(m);return c}function vf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*
c}}:Eh}function Fh(c,a,f,p){var h=[],m=[],b=0,x=Math.min(c.length,a.length)-1;c[x]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++b<=x;)h.push(f(c[b-1],c[b])),m.push(p(a[b-1],a[b]));return function(a){var r=w.bisect(c,a,1,x)-1;return m[r](h[r](a))}}function wf(c,a,f,p){function h(){var h=2<Math.min(c.length,a.length)?Fh:Dh,e=p?gh:fh;l=h(c,a,e,f);x=h(a,c,e,pb);return b}function b(c){return l(c)}var l,x;b.invert=function(c){return x(c)};b.domain=function(a){if(!arguments.length)return c;
c=a.map(Number);return h()};b.range=function(c){if(!arguments.length)return a;a=c;return h()};b.rangeRound=function(c){return b.range(c).interpolate(ef)};b.clamp=function(c){if(!arguments.length)return p;p=c;return h()};b.interpolate=function(c){if(!arguments.length)return f;f=c;return h()};b.ticks=function(a){return w.range.apply(w,hb(c,a))};b.tickFormat=function(a,r){return Ad(c,a,r)};b.nice=function(a){sc(c,vf(hb(c,a)[2]));return h()};b.copy=function(){return wf(c,a,f,p)};return h()}function Bd(c,
a){return w.rebind(c,a,"range","rangeRound","interpolate","clamp")}function hb(c,a){null==a&&(a=10);var f=Cb(c),p=f[1]-f[0],h=Math.pow(10,Math.floor(Math.log(p/a)/Math.LN10)),p=a/p*h;.15>=p?h*=10:.35>=p?h*=5:.75>=p&&(h*=2);f[0]=Math.ceil(f[0]/h)*h;f[1]=Math.floor(f[1]/h)*h+.5*h;f[2]=h;return f}function Ad(c,a,f){c=hb(c,a);if(f){a=fe.exec(f);a.shift();if("s"===a[8]){var p=w.formatPrefix(Math.max(ma(c[0]),ma(c[1])));a[7]||(a[7]="."+tc(p.scale(c[2])));a[8]="f";f=w.format(a.join(""));return function(c){return f(p.scale(c))+
p.symbol}}a[7]||(a[7]="."+Gh(a[8],c));f=a.join("")}else f=",."+tc(c[2])+"f";return w.format(f)}function tc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Gh(c,a){var f=tc(a[2]);return c in Hh?Math.abs(f-tc(Math.max(ma(a[0]),ma(a[1]))))+ +("e"!==c):f-2*("%"===c)}function xf(c,a,f,p){function h(c){return(f?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function b(c){return f?Math.pow(a,c):-Math.pow(a,-c)}function l(a){return c(h(a))}l.invert=function(a){return b(c.invert(a))};l.domain=
function(a){if(!arguments.length)return p;f=0<=a[0];c.domain((p=a.map(Number)).map(h));return l};l.base=function(f){if(!arguments.length)return a;a=+f;c.domain(p.map(h));return l};l.nice=function(){var a=sc(p.map(h),f?Math:Ih);c.domain(a);p=a.map(b);return l};l.ticks=function(){var c=Cb(p),l=[],e=c[0],c=c[1],g=Math.floor(h(e)),k=Math.ceil(h(c)),n=a%1?2:a;if(isFinite(k-g)){if(f){for(;g<k;g++)for(var ba=1;ba<n;ba++)l.push(b(g)*ba);l.push(b(g))}else for(l.push(b(g));g++<k;)for(ba=n-1;0<ba;ba--)l.push(b(g)*
ba);for(g=0;l[g]<e;g++);for(k=l.length;l[k-1]>c;k--);l=l.slice(g,k)}return l};l.tickFormat=function(c,a){if(!arguments.length)return yf;2>arguments.length?a=yf:"function"!==typeof a&&(a=w.format(a));var r=Math.max(.1,c/l.ticks().length),p=f?(e=1E-12,Math.ceil):(e=-1E-12,Math.floor),e;return function(c){return c/b(p(h(c)+e))<=r?a(c):""}};l.copy=function(){return xf(c.copy(),a,f,p)};return Bd(l,c)}function zf(c,a,f){function p(a){return c(h(a))}var h=uc(a),b=uc(1/a);p.invert=function(a){return b(c.invert(a))};
p.domain=function(a){if(!arguments.length)return f;c.domain((f=a.map(Number)).map(h));return p};p.ticks=function(c){return w.range.apply(w,hb(f,c))};p.tickFormat=function(c,a){return Ad(f,c,a)};p.nice=function(c){return p.domain(sc(f,vf(hb(f,c)[2])))};p.exponent=function(l){if(!arguments.length)return a;h=uc(a=l);b=uc(1/a);c.domain(f.map(h));return p};p.copy=function(){return zf(c.copy(),a,f)};return Bd(p,c)}function uc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function Af(c,
a){function f(f){return b[((h.get(f)||("range"===a.t?h.set(f,c.push(f)):NaN))-1)%b.length]}function p(a,r){return w.range(c.length).map(function(c){return a+r*c})}var h,b,l;f.domain=function(p){if(!arguments.length)return c;c=[];h=new t;for(var b=-1,m=p.length,l;++b<m;)h.has(l=p[b])||h.set(l,c.push(l));return f[a.t].apply(f,a.a)};f.range=function(c){if(!arguments.length)return b;b=c;l=0;a={t:"range",a:arguments};return f};f.rangePoints=function(h,e){2>arguments.length&&(e=0);var g=h[0],k=h[1],n=(k-
g)/(Math.max(1,c.length-1)+e);b=p(2>c.length?(g+k)/2:g+n*e/2,n);l=0;a={t:"rangePoints",a:arguments};return f};f.rangeBands=function(h,e,g){2>arguments.length&&(e=0);3>arguments.length&&(g=e);var k=h[1]<h[0],n=h[k-0],q=(h[1-k]-n)/(c.length-e+2*g);b=p(n+q*g,q);k&&b.reverse();l=q*(1-e);a={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(h,e,g){2>arguments.length&&(e=0);3>arguments.length&&(g=e);var k=h[1]<h[0],n=h[k-0],q=h[1-k],t=Math.floor((q-n)/(c.length-e+2*g));b=p(n+Math.round((q-
n-(c.length-e)*t)/2),t);k&&b.reverse();l=Math.round(t*(1-e));a={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return l};f.rangeExtent=function(){return Cb(a.a[0])};f.copy=function(){return Af(c,a)};return f.domain(c)}function Bf(c,a){function f(){var f=0,b=a.length;for(h=[];++f<b;)h[f-1]=w.quantile(c,f/b);return p}function p(c){if(!isNaN(c=+c))return a[w.bisect(h,c)]}var h;p.domain=function(a){if(!arguments.length)return c;c=a.filter(v).sort(H);return f()};p.range=function(c){if(!arguments.length)return a;
a=c;return f()};p.quantiles=function(){return h};p.invertExtent=function(f){f=a.indexOf(f);return 0>f?[NaN,NaN]:[0<f?h[f-1]:c[0],f<h.length?h[f]:c[c.length-1]]};p.copy=function(){return Bf(c,a)};return f()}function Cf(c,a,f){function p(a){return f[Math.max(0,Math.min(l,Math.floor(m*(a-c))))]}function b(){m=f.length/(a-c);l=f.length-1;return p}var m,l;p.domain=function(f){if(!arguments.length)return[c,a];c=+f[0];a=+f[f.length-1];return b()};p.range=function(c){if(!arguments.length)return f;f=c;return b()};
p.invertExtent=function(a){a=f.indexOf(a);a=0>a?NaN:a/m+c;return[a,a+1/m]};p.copy=function(){return Cf(c,a,f)};return b()}function Df(c,a){function f(f){if(f<=f)return a[w.bisect(c,f)]}f.domain=function(a){if(!arguments.length)return c;c=a;return f};f.range=function(c){if(!arguments.length)return a;a=c;return f};f.invertExtent=function(f){f=a.indexOf(f);return[c[f-1],c[f]]};f.copy=function(){return Df(c,a)};return f}function Ef(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(f){if(!arguments.length)return c;
c=f.map(a);return a};a.ticks=function(a){return w.range.apply(w,hb(c,a))};a.tickFormat=function(a,r){return Ad(c,a,r)};a.copy=function(){return Ef(c)};return a}function Jh(c){return c.innerRadius}function Kh(c){return c.outerRadius}function Ff(c){return c.startAngle}function Gf(c){return c.endAngle}function Hf(c){function a(r){function l(){e.push("M",m(c(g),x))}for(var e=[],g=[],k=-1,n=r.length,q,ba=ra(f),t=ra(p);++k<n;)b.call(this,q=r[k],k)?g.push([+ba.call(this,q,k),+t.call(this,q,k)]):g.length&&
(l(),g=[]);g.length&&l();return e.length?e.join(""):null}var f=xb,p=Kb,b=wb,m=Ha,l=m.key,x=.7;a.x=function(c){if(!arguments.length)return f;f=c;return a};a.y=function(c){if(!arguments.length)return p;p=c;return a};a.defined=function(c){if(!arguments.length)return b;b=c;return a};a.interpolate=function(c){if(!arguments.length)return l;l="function"===typeof c?m=c:(m=Cd.get(c)||Ha).key;return a};a.tension=function(c){if(!arguments.length)return x;x=c;return a};return a}function Ha(c){return c.join("L")}
function Dd(c){for(var a=0,f=c.length,p=c[0],b=[p[0],",",p[1]];++a<f;)b.push("V",(p=c[a])[1],"H",p[0]);return b.join("")}function Ed(c){for(var a=0,f=c.length,p=c[0],b=[p[0],",",p[1]];++a<f;)b.push("H",(p=c[a])[0],"V",p[1]);return b.join("")}function vc(c,a){if(1>a.length||c.length!=a.length&&c.length!=a.length+2)return Ha(c);var f=c.length!=a.length,p="",b=c[0],m=c[1],l=a[0],x=l,e=1;f&&(p+="Q"+(m[0]-2*l[0]/3)+","+(m[1]-2*l[1]/3)+","+m[0]+","+m[1],b=c[1],e=2);if(1<a.length)for(x=a[1],m=c[e],e++,p+=
"C"+(b[0]+l[0])+","+(b[1]+l[1])+","+(m[0]-x[0])+","+(m[1]-x[1])+","+m[0]+","+m[1],b=2;b<a.length;b++,e++)m=c[e],x=a[b],p+="S"+(m[0]-x[0])+","+(m[1]-x[1])+","+m[0]+","+m[1];f&&(f=c[e],p+="Q"+(m[0]+2*x[0]/3)+","+(m[1]+2*x[1]/3)+","+f[0]+","+f[1]);return p}function Fd(c,a){for(var f=[],p=(1-a)/2,b,m=c[0],l=c[1],x=1,e=c.length;++x<e;)b=m,m=l,l=c[x],f.push([p*(l[0]-b[0]),p*(l[1]-b[1])]);return f}function If(c){if(3>c.length)return Ha(c);var a=1,f=c.length,p=c[0],b=p[0],m=p[1],l=[b,b,b,(p=c[1])[0]],x=[m,
m,m,p[1]],b=[b,",",m,"L",Ka(ib,l),",",Ka(ib,x)];for(c.push(c[f-1]);++a<=f;)p=c[a],l.shift(),l.push(p[0]),x.shift(),x.push(p[1]),Gd(b,l,x);c.pop();b.push("L",p);return b.join("")}function Ka(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Gd(c,a,f){c.push("C",Ka(Jf,a),",",Ka(Jf,f),",",Ka(Kf,a),",",Ka(Kf,f),",",Ka(ib,a),",",Ka(ib,f))}function Hd(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Lf(c){for(var a,f=-1,p=c.length,b,m;++f<p;)a=c[f],b=a[0],m=a[1]+qb,a[0]=b*Math.cos(m),a[1]=b*Math.sin(m);
return c}function Mf(c){function a(r){function e(){T.push("M",x(c(t),n),k,g(c(q.reverse()),n),"Z")}for(var T=[],q=[],t=[],u=-1,z=r.length,L,D=ra(f),y=ra(b),C=f===p?function(){return w}:ra(p),K=b===m?function(){return v}:ra(m),w,v;++u<z;)l.call(this,L=r[u],u)?(q.push([w=+D.call(this,L,u),v=+y.call(this,L,u)]),t.push([+C.call(this,L,u),+K.call(this,L,u)])):q.length&&(e(),q=[],t=[]);q.length&&e();return T.length?T.join(""):null}var f=xb,p=xb,b=0,m=Kb,l=wb,x=Ha,e=x.key,g=x,k="L",n=.7;a.x=function(c){if(!arguments.length)return p;
f=p=c;return a};a.x0=function(c){if(!arguments.length)return f;f=c;return a};a.x1=function(c){if(!arguments.length)return p;p=c;return a};a.y=function(c){if(!arguments.length)return m;b=m=c;return a};a.y0=function(c){if(!arguments.length)return b;b=c;return a};a.y1=function(c){if(!arguments.length)return m;m=c;return a};a.defined=function(c){if(!arguments.length)return l;l=c;return a};a.interpolate=function(c){if(!arguments.length)return e;e="function"===typeof c?x=c:(x=Cd.get(c)||Ha).key;g=x.reverse||
x;k=x.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return n;n=c;return a};return a}function Lh(c){return c.radius}function Nf(c){return[c.x,c.y]}function Mh(c){return function(){var a=c.apply(this,arguments),f=a[0],a=a[1]+qb;return[f*Math.cos(a),f*Math.sin(a)]}}function Nh(){return 64}function Oh(){return"circle"}function Of(c){c=Math.sqrt(c/la);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Sb(c,a){Ub(c,va);c.id=a;return c}function Id(c,a,f,
p){var b=c.id;return K(c,"function"===typeof f?function(c,l,x){c.__transition__[b].tween.set(a,p(f.call(c,c.__data__,l,x)))}:(f=p(f),function(c){c.__transition__[b].tween.set(a,f)}))}function Ph(c){null==c&&(c="");return function(){this.textContent=c}}function wc(c,a,f,p){var b=c.__transition__||(c.__transition__={active:0,count:0}),m=b[f];if(!m){var l=p.time,m=b[f]={tween:new t,time:l,ease:p.ease,delay:p.delay,duration:p.duration};++b.count;w.timer(function(p){function e(p){if(b.active>f)return k();
b.active=f;m.event&&m.event.start.call(c,n,a);m.tween.forEach(function(f,p){(p=p.call(c,n,a))&&L.push(p)});w.timer(function(){z.c=g(p||1)?wb:g;return 1},0,l)}function g(p){if(b.active!==f)return k();p/=u;for(var l=q(p),x=L.length;0<x;)L[--x].call(c,l);if(1<=p)return m.event&&m.event.end.call(c,n,a),k()}function k(){--b.count?delete b[f]:delete c.__transition__;return 1}var n=c.__data__,q=m.ease,t=m.delay,u=m.duration,z=Xa,L=[];z.t=t+l;if(t<=p)return e(p-t);z.c=e},0,l)}}function Pf(c,a){c.attr("transform",
function(c){return"translate("+a(c)+",0)"})}function Qf(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Jd(c){return c.toISOString()}function Kd(c,a,f){function p(a){return c(a)}function b(c,f){var p=(c[1]-c[0])/f,h=w.bisect(xc,p);return h==xc.length?[a.year,hb(c.map(function(c){return c/31536E6}),f)[2]]:h?a[p/xc[h-1]<xc[h]/p?h-1:h]:[Qh,hb(c,f)[2]]}p.invert=function(a){return rb(c.invert(a))};p.domain=function(a){if(!arguments.length)return c.domain().map(rb);c.domain(a);
return p};p.nice=function(c,a){function f(r){return!isNaN(r)&&!c.range(r,rb(+r+1),a).length}var r=p.domain(),l=Cb(r);if(l=null==c?b(l,10):"number"===typeof c&&b(l,c))c=l[0],a=l[1];return p.domain(sc(r,1<a?{floor:function(a){for(;f(a=c.floor(a));)a=rb(a-1);return a},ceil:function(a){for(;f(a=c.ceil(a));)a=rb(+a+1);return a}}:c))};p.ticks=function(c,a){var f=Cb(p.domain()),r=null==c?b(f,10):"number"===typeof c?b(f,c):!c.range&&[{range:c},a];r&&(c=r[0],a=r[1]);return c.range(f[0],rb(+f[1]+1),1>a?1:a)};
p.tickFormat=function(){return f};p.copy=function(){return Kd(c.copy(),a,f)};return Bd(p,c)}function rb(c){return new Date(c)}function Rh(c){return JSON.parse(c.responseText)}function Sh(c){var a=Pa.createRange();a.selectNode(Pa.body);return a.createContextualFragment(c.responseText)}var w={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Rf=[].slice,cb=function(c){return Rf.call(c)},Pa=document,Wa=Pa.documentElement,za=window;try{cb(Wa.childNodes)[0].nodeType}catch(ri){cb=function(c){for(var a=
c.length,f=Array(a);a--;)f[a]=c[a];return f}}try{Pa.createElement("div").style.setProperty("opacity",0,"")}catch(si){var yc=za.Element.prototype,Th=yc.setAttribute,Uh=yc.setAttributeNS,Sf=za.CSSStyleDeclaration.prototype,Vh=Sf.setProperty;yc.setAttribute=function(c,a){Th.call(this,c,a+"")};yc.setAttributeNS=function(c,a,f){Uh.call(this,c,a,f+"")};Sf.setProperty=function(c,a,f){Vh.call(this,c,a+"",f)}}w.ascending=H;w.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};w.min=function(c,a){var f=
-1,p=c.length,b,m;if(1===arguments.length){for(;++f<p&&!(null!=(b=c[f])&&b<=b);)b=void 0;for(;++f<p;)null!=(m=c[f])&&b>m&&(b=m)}else{for(;++f<p&&!(null!=(b=a.call(c,c[f],f))&&b<=b);)b=void 0;for(;++f<p;)null!=(m=a.call(c,c[f],f))&&b>m&&(b=m)}return b};w.max=function(c,a){var f=-1,p=c.length,b,m;if(1===arguments.length){for(;++f<p&&!(null!=(b=c[f])&&b<=b);)b=void 0;for(;++f<p;)null!=(m=c[f])&&m>b&&(b=m)}else{for(;++f<p&&!(null!=(b=a.call(c,c[f],f))&&b<=b);)b=void 0;for(;++f<p;)null!=(m=a.call(c,c[f],
f))&&m>b&&(b=m)}return b};w.extent=function(c,a){var f=-1,b=c.length,h,m,l;if(1===arguments.length){for(;++f<b&&!(null!=(h=l=c[f])&&h<=h);)h=l=void 0;for(;++f<b;)null!=(m=c[f])&&(h>m&&(h=m),l<m&&(l=m))}else{for(;++f<b&&!(null!=(h=l=a.call(c,c[f],f))&&h<=h);)h=void 0;for(;++f<b;)null!=(m=a.call(c,c[f],f))&&(h>m&&(h=m),l<m&&(l=m))}return[h,l]};w.sum=function(c,a){var f=0,b=c.length,h,m=-1;if(1===arguments.length)for(;++m<b;)isNaN(h=+c[m])||(f+=h);else for(;++m<b;)isNaN(h=+a.call(c,c[m],m))||(f+=h);
return f};w.mean=function(c,a){var f=0,b=c.length,h,m=-1,l=b;if(1===arguments.length)for(;++m<b;)v(h=c[m])?f+=h:--l;else for(;++m<b;)v(h=a.call(c,c[m],m))?f+=h:--l;return l?f/l:void 0};w.quantile=function(c,a){var f=(c.length-1)*a+1,b=Math.floor(f),h=+c[b-1];return(f-=b)?h+f*(c[b]-h):h};w.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(v);return c.length?w.quantile(c.sort(H),.5):void 0};var Tf=a(H);w.bisectLeft=Tf.left;w.bisect=w.bisectRight=Tf.right;w.bisector=function(c){return a(1===
c.length?function(a,f){return H(c(a),f)}:c)};w.shuffle=function(c){for(var a=c.length,f,b;a;)b=Math.random()*a--|0,f=c[a],c[a]=c[b],c[b]=f;return c};w.permute=function(c,a){for(var f=a.length,b=Array(f);f--;)b[f]=c[a[f]];return b};w.pairs=function(c){for(var a=0,f=c.length-1,b=c[0],h=Array(0>f?0:f);a<f;)h[a]=[b,b=c[++a]];return h};w.zip=function(){if(!(h=arguments.length))return[];for(var c=-1,a=w.min(arguments,b),f=Array(a);++c<a;)for(var p=-1,h,m=f[c]=Array(h);++p<h;)m[p]=arguments[p][c];return f};
w.transpose=function(c){return w.zip.apply(w,c)};w.keys=function(c){var a=[],f;for(f in c)a.push(f);return a};w.values=function(c){var a=[],f;for(f in c)a.push(c[f]);return a};w.entries=function(c){var a=[],f;for(f in c)a.push({key:f,value:c[f]});return a};w.merge=function(c){var a=c.length,f;f=-1;for(var b=0,h,m;++f<a;)b+=c[f].length;for(h=Array(b);0<=--a;)for(m=c[a],f=m.length;0<=--f;)h[--b]=m[f];return h};var ma=Math.abs;w.range=function(c,a,f){3>arguments.length&&(f=1,2>arguments.length&&(a=c,
c=0));if(Infinity===(a-c)/f)throw Error("infinite range");var b=[],h;h=ma(f);for(var m=1;h*m%1;)m*=10;h=m;var m=-1,l;c*=h;a*=h;f*=h;if(0>f)for(;(l=c+f*++m)>a;)b.push(l/h);else for(;(l=c+f*++m)<a;)b.push(l/h);return b};w.map=function(c){var a=new t;if(c instanceof t)c.forEach(function(c,f){a.set(c,f)});else for(var f in c)a.set(f,c[f]);return a};g(t,{has:q,get:function(c){return this[jb+c]},set:function(c,a){return this[jb+c]=a},remove:function(c){c=jb+c;return c in this&&delete this[c]},keys:e,values:function(){var c=
[];this.forEach(function(a,f){c.push(f)});return c},entries:function(){var c=[];this.forEach(function(a,f){c.push({key:a,value:f})});return c},size:k,empty:u,forEach:function(c){for(var a in this)a.charCodeAt(0)===Tb&&c.call(this,a.substring(1),this[a])}});var jb="\x00",Tb=jb.charCodeAt(0);w.nest=function(){function c(a,r,h){if(h>=b.length)return l?l.call(f,r):m?r.sort(m):r;for(var e=-1,g=r.length,k=b[h++],n,q,u=new t,z;++e<g;)(z=u.get(n=k(q=r[e])))?z.push(q):u.set(n,[q]);a?(q=a(),r=function(f,b){q.set(f,
c(a,b,h))}):(q={},r=function(f,b){q[f]=c(a,b,h)});u.forEach(r);return q}function a(c,f){if(f>=b.length)return c;var m=[],l=h[f++];c.forEach(function(c,b){m.push({key:c,values:a(b,f)})});return l?m.sort(function(c,a){return l(c.key,a.key)}):m}var f={},b=[],h=[],m,l;f.map=function(a,f){return c(f,a,0)};f.entries=function(f){return a(c(w.map,f,0),0)};f.key=function(c){b.push(c);return f};f.sortKeys=function(c){h[b.length-1]=c;return f};f.sortValues=function(c){m=c;return f};f.rollup=function(c){l=c;
return f};return f};w.set=function(c){var a=new n;if(c)for(var f=0,b=c.length;f<b;++f)a.add(c[f]);return a};g(n,{has:q,add:function(c){this[jb+c]=!0;return c},remove:function(c){c=jb+c;return c in this&&delete this[c]},values:e,size:k,empty:u,forEach:function(c){for(var a in this)a.charCodeAt(0)===Tb&&c.call(this,a.substring(1))}});w.behavior={};w.rebind=function(c,a){for(var f=1,b=arguments.length,h;++f<b;)c[h=arguments[f]]=I(c,a,a[h]);return c};var Sd="webkit ms moz Moz o O".split(" ");w.dispatch=
function(){for(var c=new F,a=-1,f=arguments.length;++a<f;)c[arguments[a]]=E(c);return c};F.prototype.on=function(c,a){var f=c.indexOf("."),b="";0<=f&&(b=c.substring(f+1),c=c.substring(0,f));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,null);return this}};w.event=null;w.requote=function(c){return c.replace(Wh,"\\$&")};var Wh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ub={}.__proto__?function(c,a){c.__proto__=
a}:function(c,a){for(var f in a)c[f]=a[f]},Oc=function(c,a){return a.querySelector(c)},Pc=function(c,a){return a.querySelectorAll(c)},Xh=Wa.matches||Wa[B(Wa,"matchesSelector")],Td=function(c,a){return Xh.call(c,a)};"function"===typeof Sizzle&&(Oc=function(c,a){return Sizzle(c,a)[0]||null},Pc=Sizzle,Td=Sizzle.matchesSelector);w.selection=function(){return Uf};var pa=w.selection.prototype=[];pa.select=function(c){var a=[],f,b,h,m;c=P(c);for(var l=-1,e=this.length;++l<e;){a.push(f=[]);f.parentNode=(h=
this[l]).parentNode;for(var g=-1,k=h.length;++g<k;)(m=h[g])?(f.push(b=c.call(m,m.__data__,g,l)),b&&"__data__"in m&&(b.__data__=m.__data__)):f.push(null)}return R(a)};pa.selectAll=function(c){var a=[],f,b;c=G(c);for(var h=-1,m=this.length;++h<m;)for(var l=this[h],e=-1,g=l.length;++e<g;)if(b=l[e])a.push(f=cb(c.call(b,b.__data__,e,h))),f.parentNode=b;return R(a)};var Ld={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:Ld,qualify:function(c){var a=c.indexOf(":"),f=c;0<=a&&(f=c.substring(0,a),c=c.substring(a+1));return Ld.hasOwnProperty(f)?{space:Ld[f],local:c}:c}};pa.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var f=this.node();c=w.ns.qualify(c);return c.local?f.getAttributeNS(c.space,c.local):f.getAttribute(c)}for(a in c)this.each(O(a,c[a]));return this}return this.each(O(c,a))};pa.classed=function(c,a){if(2>arguments.length){if("string"===
typeof c){var f=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,h=-1;if(a=f.classList)for(;++h<b;){if(!a.contains(c[h]))return!1}else for(a=f.getAttribute("class");++h<b;)if(!U(c[h]).test(a))return!1;return!0}for(a in c)this.each(y(a,c[a]));return this}return this.each(y(c,a))};pa.style=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==typeof c){2>b&&(a="");for(f in c)this.each(J(f,c[f],a));return this}if(2>b)return za.getComputedStyle(this.node(),null).getPropertyValue(c);f=""}return this.each(J(c,
a,f))};pa.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(z(a,c[a]));return this}return this.each(z(c,a))};pa.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=""}:function(){this.textContent=c}):this.node().textContent};pa.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=
c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};pa.append=function(c){c=W(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};pa.insert=function(c,a){c=W(c);a=P(a);return this.select(function(){return this.insertBefore(c.apply(this,arguments),a.apply(this,arguments)||null)})};pa.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};
pa.data=function(c,a){function f(c,f){var b,p=c.length,h=f.length,m=Math.min(p,h),l=Array(h),n=Array(h),q=Array(p),u,z;if(a){var m=new t,L=new t,ba=[],D;for(b=-1;++b<p;)D=a.call(u=c[b],u.__data__,b),m.has(D)?q[b]=u:m.set(D,u),ba.push(D);for(b=-1;++b<h;)D=a.call(f,z=f[b],b),(u=m.get(D))?(l[b]=u,u.__data__=z):L.has(D)||(n[b]={__data__:z}),L.set(D,z),m.remove(D);for(b=-1;++b<p;)m.has(ba[b])&&(q[b]=c[b])}else{for(b=-1;++b<m;)u=c[b],z=f[b],u?(u.__data__=z,l[b]=u):n[b]={__data__:z};for(;b<h;++b)n[b]={__data__:f[b]};
for(;b<p;++b)q[b]=c[b]}n.update=l;n.parentNode=l.parentNode=q.parentNode=c.parentNode;e.push(n);g.push(l);k.push(q)}var b=-1,h=this.length,m,l;if(!arguments.length){for(c=Array(h=(m=this[0]).length);++b<h;)if(l=m[b])c[b]=l.__data__;return c}var e=ca([]),g=R([]),k=R([]);if("function"===typeof c)for(;++b<h;)f(m=this[b],c.call(m,m.parentNode.__data__,b));else for(;++b<h;)f(m=this[b],c);g.enter=function(){return e};g.exit=function(){return k};return g};pa.datum=function(c){return arguments.length?this.property("__data__",
c):this.property("__data__")};pa.filter=function(c){var a=[],f,b,h;"function"!==typeof c&&(c=Q(c));for(var m=0,l=this.length;m<l;m++){a.push(f=[]);f.parentNode=(b=this[m]).parentNode;for(var e=0,g=b.length;e<g;e++)(h=b[e])&&c.call(h,h.__data__,e,m)&&f.push(h)}return R(a)};pa.order=function(){for(var c=-1,a=this.length;++c<a;)for(var f=this[c],b=f.length-1,h=f[b],m;0<=--b;)if(m=f[b])h&&h!==m.nextSibling&&h.parentNode.insertBefore(m,h),h=m;return this};pa.sort=function(c){c=V.apply(this,arguments);
for(var a=-1,f=this.length;++a<f;)this[a].sort(c);return this.order()};pa.each=function(c){return K(this,function(a,f,b){c.call(a,a.__data__,f,b)})};pa.call=function(c){var a=cb(arguments);c.apply(a[0]=this,a);return this};pa.empty=function(){return!this.node()};pa.node=function(){for(var c=0,a=this.length;c<a;c++)for(var f=this[c],b=0,h=f.length;b<h;b++){var m=f[b];if(m)return m}return null};pa.size=function(){var c=0;this.each(function(){++c});return c};var Ta=[];w.selection.enter=ca;w.selection.enter.prototype=
Ta;Ta.append=pa.append;Ta.empty=pa.empty;Ta.node=pa.node;Ta.call=pa.call;Ta.size=pa.size;Ta.select=function(c){for(var a=[],f,b,h,m,l,e=-1,g=this.length;++e<g;){h=(m=this[e]).update;a.push(f=[]);f.parentNode=m.parentNode;for(var k=-1,n=m.length;++k<n;)(l=m[k])?(f.push(h[k]=b=c.call(m.parentNode,l.__data__,k,e)),b.__data__=l.__data__):f.push(null)}return R(a)};Ta.insert=function(c,a){2>arguments.length&&(a=X(this));return pa.insert.call(this,c,a)};pa.transition=function(){for(var c=sb||++Vf,a=[],f,
b,h=zc||{time:Date.now(),ease:ah,delay:0,duration:250},m=-1,l=this.length;++m<l;){a.push(f=[]);for(var e=this[m],g=-1,k=e.length;++g<k;)(b=e[g])&&wc(b,g,c,h),f.push(b)}return Sb(a,c)};pa.interrupt=function(){return this.each(l)};w.select=function(c){c=["string"===typeof c?Oc(c,Pa):c];c.parentNode=Wa;return R([c])};w.selectAll=function(c){c=cb("string"===typeof c?Pc(c,Pa):c);c.parentNode=Wa;return R([c])};var Uf=w.select(Wa);pa.on=function(c,a,f){var b=arguments.length;if(3>b){if("string"!==typeof c){2>
b&&(a=!1);for(f in c)this.each(L(f,c[f],a));return this}if(2>b)return(b=this.node()["__on"+c])&&b._;f=!1}return this.each(L(c,a,f))};var Qc=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});Qc.forEach(function(c){"on"+c in Pa&&Qc.remove(c)});var Fb="onselectstart"in Pa?null:B(Wa.style,"userSelect"),lg=0;w.mouse=function(c){return Y(c,S())};var Rc=/WebKit/.test(za.navigator.userAgent)?-1:0;w.touches=function(c,a){2>arguments.length&&(a=S().touches);return a?cb(a).map(function(a){var b=Y(c,a);b.identifier=
a.identifier;return b}):[]};w.behavior.drag=function(){function c(){this.on("mousedown.drag",h).on("touchstart.drag",m)}function a(c,r,h,m,l){return function(){var a=w.event.target,e=this.parentNode,g=f.of(this,arguments),k=0,n=c(),q=".drag"+(null==n?"":"-"+n),u,t=w.select(h()).on(m+q,function(){var c=r(e,n),a,f;c&&(a=c[0]-L[0],f=c[1]-L[1],k=k|a|f,L=c,g({type:"drag",x:c[0]+u[0],y:c[1]+u[1],dx:a,dy:f}))}).on(l+q,function(){r(e,n)&&(t.on(m+q,null).on(l+q,null),z(k&&w.event.target===a),g({type:"dragend"}))}),
z=ia(),L=r(e,n);b?(u=b.apply(this,arguments),u=[u.x-L[0],u.y-L[1]]):u=[0,0];g({type:"dragstart"})}}var f=D(c,"drag","dragstart","dragend"),b=null,h=a(A,w.mouse,da,"mousemove","mouseup"),m=a(ha,w.touch,ja,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return b;b=a;return c};return w.rebind(c,f,"on")};var la=Math.PI,Ga=2*la,xa=la/2,ka=la/180,sa=180/la,Ac=Math.SQRT2;w.interpolateZoom=function(c,a){function f(c){var a=c*z;if(t){c=oa(u);var f,r=Ac*a+u;f=((r=Math.exp(2*r))-1)/(r+1);f*=
c;var l=u,r=((l=Math.exp(l))-1/l)/2;f=m/(2*n)*(f-r);return[b+f*e,h+f*g,m*c/oa(Ac*a+u)]}return[b+c*e,h+c*g,m*Math.exp(Ac*a)]}var b=c[0],h=c[1],m=c[2],l=a[2],e=a[0]-b,g=a[1]-h,k=e*e+g*g,n=Math.sqrt(k),q=(l*l-m*m+4*k)/(4*m*n),k=(l*l-m*m-4*k)/(4*l*n),u=Math.log(Math.sqrt(q*q+1)-q),t=Math.log(Math.sqrt(k*k+1)-k)-u,z=(t||Math.log(l/m))/Ac;f.duration=1E3*z;return f};w.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",g).on(Yh+".zoom",n).on("mousemove.zoom",q).on("dblclick.zoom",u).on("touchstart.zoom",
k)}function a(c){return[(c[0]-t.x)/t.k,(c[1]-t.y)/t.k]}function f(c){t.k=Math.max(C[0],Math.min(C[1],c))}function b(c,a){a=[a[0]*t.k+t.x,a[1]*t.k+t.y];t.x+=c[0]-a[0];t.y+=c[1]-a[1]}function h(){W&&W.domain(Q.range().map(function(c){return(c-t.x)/t.k}).map(Q.invert));V&&V.domain(G.range().map(function(c){return(c-t.y)/t.k}).map(G.invert))}function m(c){c({type:"zoomstart"})}function e(c){h();c({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function x(c){c({type:"zoomend"})}function g(){var c=this,f=
w.event.target,h=J.of(c,arguments),k=0,n=w.select(za).on("mousemove.zoom",function(){k=1;b(w.mouse(c),t);e(h)}).on("mouseup.zoom",function(){n.on("mousemove.zoom",za===c?q:null).on("mouseup.zoom",null);u(k&&w.event.target===f);x(h)}),t=a(w.mouse(c)),u=ia();l.call(c);m(h)}function k(){function c(){var f=w.touches(u);y=t.k;f.forEach(function(c){c.identifier in L&&(L[c.identifier]=a(c))});return f}function h(){var a=w.event.target;w.select(a).on(K,n).on(Q,q);W.push(a);for(var a=w.event.changedTouches,
r=0,m=a.length;r<m;++r)L[a[r].identifier]=null;m=c();r=Date.now();1===m.length?(500>r-v&&(a=m[0],m=L[a.identifier],f(2*t.k),b(a,m),M(),e(z)),v=r):1<m.length&&(a=m[0],m=m[1],r=a[0]-m[0],a=a[1]-m[1],D=r*r+a*a)}function n(){for(var c=w.touches(u),a,r,h,m,l=0,x=c.length;l<x;++l,m=null)if(h=c[l],m=L[h.identifier]){if(r)break;a=h;r=m}if(m){var g=(g=h[0]-a[0])*g+(g=h[1]-a[1])*g,c=D&&Math.sqrt(g/D);a=[(a[0]+h[0])/2,(a[1]+h[1])/2];r=[(r[0]+m[0])/2,(r[1]+m[1])/2];f(c*y)}v=null;b(a,r);e(z)}function q(){if(w.event.touches.length){for(var a=
w.event.changedTouches,f=0,b=a.length;f<b;++f)delete L[a[f].identifier];for(var r in L)return void c()}w.selectAll(W).on(C,null);G.on("mousedown.zoom",g).on("touchstart.zoom",k);V();x(z)}var u=this,z=J.of(u,arguments),L={},D=0,y,C=".zoom-"+w.event.changedTouches[0].identifier,K="touchmove"+C,Q="touchend"+C,W=[],G=w.select(u).on("mousedown.zoom",null).on("touchstart.zoom",h),V=ia();l.call(u);h();m(z)}function n(){var c=J.of(this,arguments);K?clearTimeout(K):(l.call(this),m(c));K=setTimeout(function(){K=
null;x(c)},50);M();var h=L||w.mouse(this);z||(z=a(h));f(Math.pow(2,.002*Bc())*t.k);b(h,z);e(c)}function q(){z=null}function u(){var c=J.of(this,arguments),h=w.mouse(this),l=a(h),g=Math.log(t.k)/Math.LN2;m(c);f(Math.pow(2,w.event.shiftKey?Math.ceil(g)-1:Math.floor(g)+1));b(h,l);e(c);x(c)}var t={x:0,y:0,k:1},z,L,y=[960,500],C=Wf,K,v,J=D(c,"zoomstart","zoom","zoomend"),Q,W,G,V;c.event=function(c){c.each(function(){var c=J.of(this,arguments),a=t;sb?w.select(this).transition().each("start.zoom",function(){t=
this.__chart__||{x:0,y:0,k:1};m(c)}).tween("zoom:zoom",function(){var f=y[0],b=f/2,r=y[1]/2,p=w.interpolateZoom([(b-t.x)/t.k,(r-t.y)/t.k,f/t.k],[(b-a.x)/a.k,(r-a.y)/a.k,f/a.k]);return function(a){a=p(a);var h=f/a[2];this.__chart__=t={x:b-a[0]*h,y:r-a[1]*h,k:h};e(c)}}).each("end.zoom",function(){x(c)}):(this.__chart__=t,m(c),e(c),x(c))})};c.translate=function(a){if(!arguments.length)return[t.x,t.y];t={x:+a[0],y:+a[1],k:t.k};h();return c};c.scale=function(a){if(!arguments.length)return t.k;t={x:t.x,
y:t.y,k:+a};h();return c};c.scaleExtent=function(a){if(!arguments.length)return C;C=null==a?Wf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return L;L=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return y;y=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return W;W=a;Q=a.copy();t={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return V;V=a;G=a.copy();t={x:0,y:0,k:1};return c};return w.rebind(c,J,"on")};var Wf=[0,Infinity],Bc,
Yh="onwheel"in Pa?(Bc=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Pa?(Bc=function(){return w.event.wheelDelta},"mousewheel"):(Bc=function(){return-w.event.detail},"MozMousePixelScroll");w.color=Da;Da.prototype.toString=function(){return this.rgb()+""};w.hsl=Ea;var Md=Ea.prototype=new Da;Md.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ea(this.h,this.s,this.l/c)};Md.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ea(this.h,
this.s,c*this.l)};Md.rgb=function(){return Sc(this.h,this.s,this.l)};w.hcl=La;var Nd=La.prototype=new Da;Nd.brighter=function(c){return new La(this.h,this.c,Math.min(100,this.l+Cc*(arguments.length?c:1)))};Nd.darker=function(c){return new La(this.h,this.c,Math.max(0,this.l-Cc*(arguments.length?c:1)))};Nd.rgb=function(){return Tc(this.h,this.c,this.l).rgb()};w.lab=Ma;var Cc=18,$d=.95047,ae=1,be=1.08883,Od=Ma.prototype=new Da;Od.brighter=function(c){return new Ma(Math.min(100,this.l+Cc*(arguments.length?
c:1)),this.a,this.b)};Od.darker=function(c){return new Ma(Math.max(0,this.l-Cc*(arguments.length?c:1)),this.a,this.b)};Od.rgb=function(){return Zd(this.l,this.a,this.b)};w.rgb=Aa;var Dc=Aa.prototype=new Da;Dc.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);var a=this.r,f=this.g,b=this.b;if(!a&&!f&&!b)return new Aa(30,30,30);a&&30>a&&(a=30);f&&30>f&&(f=30);b&&30>b&&(b=30);return new Aa(Math.min(255,a/c),Math.min(255,f/c),Math.min(255,b/c))};Dc.darker=function(c){c=Math.pow(.7,arguments.length?
c:1);return new Aa(c*this.r,c*this.g,c*this.b)};Dc.hsl=function(){return Wd(this.r,this.g,this.b)};Dc.toString=function(){return"#"+tb(this.r)+tb(this.g)+tb(this.b)};var Wb=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,
silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wb.forEach(function(c,a){Wb.set(c,new Aa(a>>16,a>>8&255,a&255))});w.functor=ra;w.xhr=Zc(wa);w.dsv=function(c,a){function f(c,f,m){3>arguments.length&&(m=f,f=null);var l=Xb(c,a,null==f?b:
h(f),m);l.row=function(c){return arguments.length?l.response(null==(f=c)?b:h(c)):f};return l}function b(c){return f.parse(c.responseText)}function h(c){return function(a){return f.parse(a.responseText,c)}}function m(a){return a.map(l).join(c)}function l(c){return e.test(c)?'"'+c.replace(/\"/g,'""')+'"':c}var e=new RegExp('["'+c+"\n]"),g=c.charCodeAt(0);f.parse=function(c,a){var b;return f.parseRows(c,function(c,f){if(b)return b(c,f-1);var r=new Function("d","return {"+c.map(function(c,a){return JSON.stringify(c)+
": d["+a+"]"}).join(",")+"}");b=a?function(c,f){return a(r(c),f)}:r})};f.parseRows=function(c,a){function f(){if(m>=h)return r;if(x)return x=!1,b;var a=m;if(34===c.charCodeAt(a)){for(var p=a;p++<h;)if(34===c.charCodeAt(p)){if(34!==c.charCodeAt(p+1))break;++p}m=p+2;var l=c.charCodeAt(p+1);13===l?(x=!0,10===c.charCodeAt(p+2)&&++m):10===l&&(x=!0);return c.substring(a+1,p).replace(/""/g,'"')}for(;m<h;){l=c.charCodeAt(m++);p=1;if(10===l)x=!0;else if(13===l)x=!0,10===c.charCodeAt(m)&&(++m,++p);else if(l!==
g)continue;return c.substring(a,m-p)}return c.substring(a)}for(var b={},r={},p=[],h=c.length,m=0,l=0,e,x;(e=f())!==r;){for(var k=[];e!==b&&e!==r;)k.push(e),e=f();a&&!(k=a(k,l++))||p.push(k)}return p};f.format=function(a){if(Array.isArray(a[0]))return f.formatRows(a);var b=new n,r=[];a.forEach(function(c){for(var a in c)b.has(a)||r.push(b.add(a))});return[r.map(l).join(c)].concat(a.map(function(a){return r.map(function(c){return l(a[c])}).join(c)})).join("\n")};f.formatRows=function(c){return c.map(m).join("\n")};
return f};w.csv=w.dsv(",","text/csv");w.tsv=w.dsv("\t","text/tab-separated-values");w.touch=function(c,a,f){3>arguments.length&&(f=a,a=S().changedTouches);if(a)for(var b=0,h=a.length,m;b<h;++b)if((m=a[b]).identifier===f)return Y(c,m)};var $b,ac,Zb,Yb,Xa,ee=za[B(za,"requestAnimationFrame")]||function(c){setTimeout(c,17)};w.timer=function(c,a,f){var b=arguments.length;2>b&&(a=0);3>b&&(f=Date.now());b={c:c,t:f+a,f:!1,n:null};ac?ac.n=b:$b=b;ac=b;Zb||(Yb=clearTimeout(Yb),Zb=1,ee($c))};w.timer.flush=function(){ce();
de()};w.round=function(c,a){return a?Math.round(c*(a=Math.pow(10,a)))/a:Math.round(c)};var Zh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(c,a){var f=Math.pow(10,3*ma(8-a));return{scale:8<a?function(c){return c/f}:function(c){return c*f},symbol:c}});w.formatPrefix=function(c,a){var f=0;c&&(0>c&&(c*=-1),a&&(c=w.round(c,ad(c,a))),f=1+Math.floor(1E-12+Math.log(c)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3))));return Zh[8+f/3]};var fe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
og=w.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,a){return c.toPrecision(a)},e:function(c,a){return c.toExponential(a)},f:function(c,a){return c.toFixed(a)},r:function(c,a){return(c=w.round(c,ad(c,a))).toFixed(Math.max(0,Math.min(20,ad(c*(1+1E-15),a))))}}),aa=w.time={},ya=Date;Ya.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bb.setUTCDate.apply(this._,
arguments)},setDay:function(){bb.setUTCDay.apply(this._,arguments)},setFullYear:function(){bb.setUTCFullYear.apply(this._,arguments)},setHours:function(){bb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){bb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bb.setUTCSeconds.apply(this._,arguments)},setTime:function(){bb.setTime.apply(this._,arguments)}};
var bb=Date.prototype;aa.year=kb(function(c){c=aa.day(c);c.setMonth(0,1);return c},function(c,a){c.setFullYear(c.getFullYear()+a)},function(c){return c.getFullYear()});aa.years=aa.year.range;aa.years.utc=aa.year.utc.range;aa.day=kb(function(c){var a=new ya(2E3,0);a.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());return a},function(c,a){c.setDate(c.getDate()+a)},function(c){return c.getDate()-1});aa.days=aa.day.range;aa.days.utc=aa.day.utc.range;aa.dayOfYear=function(c){var a=aa.year(c);return Math.floor((c-
a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(c,a){a=7-a;var f=aa[c]=kb(function(c){(c=aa.day(c)).setDate(c.getDate()-(c.getDay()+a)%7);return c},function(c,a){c.setDate(c.getDate()+7*Math.floor(a))},function(c){var f=aa.year(c).getDay();return Math.floor((aa.dayOfYear(c)+(f+a)%7)/7)-(f!==a)});aa[c+"s"]=f.range;aa[c+"s"].utc=f.utc.range;aa[c+"OfYear"]=function(c){var f=aa.year(c).getDay();return Math.floor((aa.dayOfYear(c)+
(f+a)%7)/7)}});aa.week=aa.sunday;aa.weeks=aa.sunday.range;aa.weeks.utc=aa.sunday.utc.range;aa.weekOfYear=aa.sundayOfYear;var ge={"-":"",_:" ",0:"0"},ua=/^\s*\d+/,je=/^%/;w.locale=function(c){return{numberFormat:ng(c),timeFormat:qg(c)}};var Xf=w.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});w.format=Xf.numberFormat;w.geo={};bd.prototype={s:0,t:0,add:function(c){ke(c,this.t,Ec);ke(Ec.s,this.s,this);this.s?this.t+=Ec.t:this.s=Ec.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ec=new bd;w.geo.stream=function(c,a){if(c&&Yf.hasOwnProperty(c.type))Yf[c.type](c,a);else ec(c,a)};var Yf=
{Feature:function(c,a){ec(c.geometry,a)},FeatureCollection:function(c,a){for(var f=c.features,b=-1,h=f.length;++b<h;)ec(f[b].geometry,a)}},le={Sphere:function(c,a){a.sphere()},Point:function(c,a){c=c.coordinates;a.point(c[0],c[1],c[2])},MultiPoint:function(c,a){for(var f=c.coordinates,b=-1,h=f.length;++b<h;)c=f[b],a.point(c[0],c[1],c[2])},LineString:function(c,a){cd(c.coordinates,a,0)},MultiLineString:function(c,a){for(var f=c.coordinates,b=-1,h=f.length;++b<h;)cd(f[b],a,0)},Polygon:function(c,a){me(c.coordinates,
a)},MultiPolygon:function(c,a){for(var f=c.coordinates,b=-1,h=f.length;++b<h;)me(f[b],a)},GeometryCollection:function(c,a){for(var f=c.geometries,b=-1,h=f.length;++b<h;)ec(f[b],a)}};w.geo.area=function(c){Db=0;w.geo.stream(c,Fa);return Db};var Db,lb=new bd,Fa={sphere:function(){Db+=4*la},point:A,lineStart:A,lineEnd:A,polygonStart:function(){lb.reset();Fa.lineStart=Fg},polygonEnd:function(){var c=2*lb;Db+=0>c?4*la+c:c;Fa.lineStart=Fa.lineEnd=Fa.point=A}};w.geo.bounds=function(){function c(c,a){K.push(v=
[n=c,t=c]);a<q&&(q=a);a>u&&(u=a)}function a(f,b){var h=mb([f*ka,b*ka]);if(y){var r=ub(y,h),r=ub([r[1],-r[0],0],r);hc(r);var r=ic(r),p=f-z,m=0<p?1:-1,l=r[0]*sa*m,p=180<ma(p);p^(m*z<l&&l<m*f)?(r=r[1]*sa,r>u&&(u=r)):(l=(l+360)%360-180,p^(m*z<l&&l<m*f))?(r=-r[1]*sa,r<q&&(q=r)):(b<q&&(q=b),b>u&&(u=b));p?f<z?e(n,f)>e(n,t)&&(t=f):e(f,t)>e(n,t)&&(n=f):t>=n?(f<n&&(n=f),f>t&&(t=f)):f>z?e(n,f)>e(n,t)&&(t=f):e(f,t)>e(n,t)&&(n=f)}else c(f,b);y=h;z=f}function f(){J.point=a}function b(){v[0]=n;v[1]=t;J.point=c;
y=null}function h(c,f){if(y){var b=c-z;C+=180<ma(b)?b+(0<b?360:-360):b}else L=c,D=f;Fa.point(c,f);a(c,f)}function m(){Fa.lineStart()}function l(){h(L,D);Fa.lineEnd();1E-6<ma(C)&&(n=-(t=180));v[0]=n;v[1]=t;y=null}function e(c,a){return 0>(a-=c)?a+360:a}function g(c,a){return c[0]-a[0]}function k(c,a){return a[0]<=a[1]?a[0]<=c&&c<=a[1]:c<a[0]||a[1]<c}var n,q,t,u,z,L,D,y,C,K,v,J={point:c,lineStart:f,lineEnd:b,polygonStart:function(){J.point=h;J.lineStart=m;J.lineEnd=l;C=0;Fa.polygonStart()},polygonEnd:function(){Fa.polygonEnd();
J.point=c;J.lineStart=f;J.lineEnd=b;0>lb?(n=-(t=180),q=-(u=90)):1E-6<C?u=90:-1E-6>C&&(q=-90);v[0]=n;v[1]=t}};return function(c){u=t=-(n=q=Infinity);K=[];w.geo.stream(c,J);if(c=K.length){K.sort(g);for(var a=1,f=K[0],b,r=[f];a<c;++a)b=K[a],k(b[0],f)||k(b[1],f)?(e(f[0],b[1])>e(f[0],f[1])&&(f[1]=b[1]),e(b[0],f[1])>e(f[0],f[1])&&(f[0]=b[0])):r.push(f=b);var h=-Infinity,p;c=r.length-1;a=0;for(f=r[c];a<=c;f=b,++a)b=r[a],(p=e(f[1],b[0]))>h&&(h=p,n=b[0],t=f[1])}K=v=null;return Infinity===n||Infinity===q?[[NaN,
NaN],[NaN,NaN]]:[[n,q],[t,u]]}}();w.geo.centroid=function(c){Hb=vb=Za=$a=Qa=Ia=Ja=Ca=db=eb=Ra=0;w.geo.stream(c,Na);c=db;var a=eb,f=Ra,b=c*c+a*a+f*f;return 1E-12>b&&(c=Ia,a=Ja,f=Ca,1E-6>vb&&(c=Za,a=$a,f=Qa),b=c*c+a*a+f*f,1E-12>b)?[NaN,NaN]:[Math.atan2(a,c)*sa,ga(f/Math.sqrt(b))*sa]};var Hb,vb,Za,$a,Qa,Ia,Ja,Ca,db,eb,Ra,Na={sphere:A,point:ed,lineStart:ne,lineEnd:oe,polygonStart:function(){Na.lineStart=Gg},polygonEnd:function(){Na.lineStart=ne}},Ee=re(wb,function(c){var a=NaN,f=NaN,b=NaN,h;return{lineStart:function(){c.lineStart();
h=1},point:function(m,l){var e=0<m?la:-la,g=ma(m-a);if(1E-6>ma(g-la))c.point(a,f=0<(f+l)/2?xa:-xa),c.point(b,f),c.lineEnd(),c.lineStart(),c.point(e,f),c.point(m,f),h=0;else if(b!==e&&g>=la){1E-6>ma(a-b)&&(a-=1E-6*b);1E-6>ma(m-e)&&(m-=1E-6*e);var g=a,k=f,n=m,t,q,u=Math.sin(g-n);f=1E-6<ma(u)?Math.atan((Math.sin(k)*(q=Math.cos(l))*Math.sin(n)-Math.sin(l)*(t=Math.cos(k))*Math.sin(g))/(t*q*u)):(k+l)/2;c.point(b,f);c.lineEnd();c.lineStart();c.point(e,f);h=0}c.point(a=m,f=l);b=e},lineEnd:function(){c.lineEnd();
a=f=NaN},clean:function(){return 2-h}}},function(c,a,f,b){null==c?(f*=xa,b.point(-la,f),b.point(0,f),b.point(la,f),b.point(la,0),b.point(la,-f),b.point(0,-f),b.point(-la,-f),b.point(-la,0),b.point(-la,f)):1E-6<ma(c[0]-a[0])?(c=c[0]<a[0]?la:-la,f=f*c/2,b.point(-c,f),b.point(0,f),b.point(c,f)):b.point(a[0],a[1])},[-la,-la/2]);w.geo.clipExtent=function(){var c,a,f,b,h,m,l={stream:function(c){h&&(h.valid=!1);h=m(c);h.valid=!0;return h},extent:function(e){if(!arguments.length)return[[c,a],[f,b]];m=ue(c=
+e[0][0],a=+e[0][1],f=+e[1][0],b=+e[1][1]);h&&(h.valid=!1,h=null);return l}};return l.extent([[0,0],[960,500]])};(w.geo.conicEqualArea=function(){return gd(we)}).raw=we;w.geo.albers=function(){return w.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};w.geo.albersUsa=function(){function c(c){var a=c[0];c=c[1];h=null;(l(a,c),h)||(e(a,c),h)||g(a,c);return h}var a=w.geo.albers(),f=w.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),b=w.geo.conicEqualArea().rotate([157,
0]).center([-3,19.9]).parallels([8,18]),h,m={point:function(c,a){h=[c,a]}},l,e,g;c.invert=function(c){var h=a.scale(),m=a.translate(),l=(c[0]-m[0])/h,h=(c[1]-m[1])/h;return(.12<=h&&.234>h&&-.425<=l&&-.214>l?f:.166<=h&&.234>h&&-.214<=l&&-.115>l?b:a).invert(c)};c.stream=function(c){var h=a.stream(c),m=f.stream(c),l=b.stream(c);return{point:function(c,a){h.point(c,a);m.point(c,a);l.point(c,a)},sphere:function(){h.sphere();m.sphere();l.sphere()},lineStart:function(){h.lineStart();m.lineStart();l.lineStart()},
lineEnd:function(){h.lineEnd();m.lineEnd();l.lineEnd()},polygonStart:function(){h.polygonStart();m.polygonStart();l.polygonStart()},polygonEnd:function(){h.polygonEnd();m.polygonEnd();l.polygonEnd()}}};c.precision=function(h){if(!arguments.length)return a.precision();a.precision(h);f.precision(h);b.precision(h);return c};c.scale=function(h){if(!arguments.length)return a.scale();a.scale(h);f.scale(.35*h);b.scale(h);return c.translate(a.translate())};c.translate=function(h){if(!arguments.length)return a.translate();
var k=a.scale(),n=+h[0],t=+h[1];l=a.translate(h).clipExtent([[n-.455*k,t-.238*k],[n+.455*k,t+.238*k]]).stream(m).point;e=f.translate([n-.307*k,t+.201*k]).clipExtent([[n-.425*k+1E-6,t+.12*k+1E-6],[n-.214*k-1E-6,t+.234*k-1E-6]]).stream(m).point;g=b.translate([n-.205*k,t+.212*k]).clipExtent([[n-.214*k+1E-6,t+.166*k+1E-6],[n-.115*k-1E-6,t+.234*k-1E-6]]).stream(m).point;return c};return c.scale(1070)};var Fc,lc,fb={point:A,lineStart:A,lineEnd:A,polygonStart:function(){lc=0;fb.lineStart=Kg},polygonEnd:function(){fb.lineStart=
fb.lineEnd=fb.point=A;Fc+=ma(lc/2)}},Gc,Hc,Ic,Jc,$h={point:function(c,a){c<Gc&&(Gc=c);c>Ic&&(Ic=c);a<Hc&&(Hc=a);a>Jc&&(Jc=a)},lineStart:A,lineEnd:A,polygonStart:A,polygonEnd:A},Oa={point:nb,lineStart:ye,lineEnd:ze,polygonStart:function(){Oa.lineStart=Mg},polygonEnd:function(){Oa.point=nb;Oa.lineStart=ye;Oa.lineEnd=ze}};w.geo.path=function(){function c(c){c&&("function"===typeof f&&l.pointRadius(+f.apply(this,arguments)),e&&e.valid||(e=m(l)),w.geo.stream(c,e));return l.result()}function a(){e=null;
return c}var f=4.5,b,h,m,l,e;c.area=function(c){Fc=0;w.geo.stream(c,m(fb));return Fc};c.centroid=function(c){Za=$a=Qa=Ia=Ja=Ca=db=eb=Ra=0;w.geo.stream(c,m(Oa));return Ra?[db/Ra,eb/Ra]:Ca?[Ia/Ca,Ja/Ca]:Qa?[Za/Qa,$a/Qa]:[NaN,NaN]};c.bounds=function(c){Ic=Jc=-(Gc=Hc=Infinity);w.geo.stream(c,m($h));return[[Gc,Hc],[Ic,Jc]]};c.projection=function(c){if(!arguments.length)return b;m=(b=c)?c.stream||Og(c):wa;return a()};c.context=function(c){if(!arguments.length)return h;l=null==(h=c)?new Lg:new Ng(c);"function"!==
typeof f&&l.pointRadius(f);return a()};c.pointRadius=function(a){if(!arguments.length)return f;f="function"===typeof a?a:(l.pointRadius(+a),+a);return c};return c.projection(w.geo.albersUsa()).context(null)};w.geo.transform=function(c){return{stream:function(a){a=new De(a);for(var f in c)a[f]=c[f];return a}}};De.prototype={point:function(c,a){this.stream.point(c,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};w.geo.projection=gb;w.geo.projectionMutator=hd;(w.geo.equirectangular=function(){return gb(Ib)}).raw=Ib.invert=Ib;w.geo.rotation=function(c){function a(f){f=c(f[0]*ka,f[1]*ka);return f[0]*=sa,f[1]*=sa,f}c=id(c[0]%360*ka,c[1]*ka,2<c.length?c[2]*ka:0);a.invert=function(a){a=c.invert(a[0]*ka,a[1]*ka);return a[0]*=sa,a[1]*=sa,a};return a};Fe.invert=Ib;w.geo.circle=function(){function c(){var c="function"===typeof a?a.apply(this,arguments):a,f=id(-c[0]*
ka,-c[1]*ka,0).invert,b=[];h(null,null,1,{point:function(c,a){b.push(c=f(c,a));c[0]*=sa;c[1]*=sa}});return{type:"Polygon",coordinates:[b]}}var a=[0,0],f,b=6,h;c.origin=function(f){if(!arguments.length)return a;a=f;return c};c.angle=function(a){if(!arguments.length)return f;h=fd((f=+a)*ka,b*ka);return c};c.precision=function(a){if(!arguments.length)return b;h=fd(f*ka,(b=+a)*ka);return c};return c.angle(90)};w.geo.distance=function(c,a){var f=(a[0]-c[0])*ka,b=c[1]*ka,h=a[1]*ka,m=Math.sin(f),f=Math.cos(f),
l=Math.sin(b),b=Math.cos(b),e=Math.sin(h),h=Math.cos(h),g;return Math.atan2(Math.sqrt((g=h*m)*g+(g=b*e-l*h*f)*g),l*e+b*h*f)};w.geo.graticule=function(){function c(){return{type:"MultiLineString",coordinates:a()}}function a(){return w.range(Math.ceil(m/q)*q,h,q).map(D).concat(w.range(Math.ceil(k/u)*u,g,u).map(y)).concat(w.range(Math.ceil(b/n)*n,f,n).filter(function(c){return 1E-6<ma(c%q)}).map(z)).concat(w.range(Math.ceil(e/t)*t,l,t).filter(function(c){return 1E-6<ma(c%u)}).map(L))}var f,b,h,m,l,e,
g,k,n=10,t=n,q=90,u=360,z,L,D,y,C=2.5;c.lines=function(){return a().map(function(c){return{type:"LineString",coordinates:c}})};c.outline=function(){return{type:"Polygon",coordinates:[D(m).concat(y(g).slice(1),D(h).reverse().slice(1),y(k).reverse().slice(1))]}};c.extent=function(a){return arguments.length?c.majorExtent(a).minorExtent(a):c.minorExtent()};c.majorExtent=function(a){if(!arguments.length)return[[m,k],[h,g]];m=+a[0][0];h=+a[1][0];k=+a[0][1];g=+a[1][1];m>h&&(a=m,m=h,h=a);k>g&&(a=k,k=g,g=
a);return c.precision(C)};c.minorExtent=function(a){if(!arguments.length)return[[b,e],[f,l]];b=+a[0][0];f=+a[1][0];e=+a[0][1];l=+a[1][1];b>f&&(a=b,b=f,f=a);e>l&&(a=e,e=l,l=a);return c.precision(C)};c.step=function(a){return arguments.length?c.majorStep(a).minorStep(a):c.minorStep()};c.majorStep=function(a){if(!arguments.length)return[q,u];q=+a[0];u=+a[1];return c};c.minorStep=function(a){if(!arguments.length)return[n,t];n=+a[0];t=+a[1];return c};c.precision=function(a){if(!arguments.length)return C;
C=+a;z=Ke(e,l,90);L=Le(b,f,C);D=Ke(k,g,90);y=Le(m,h,C);return c};return c.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};w.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[f||b.apply(this,arguments),h||p.apply(this,arguments)]}}var b=jd,f,p=kd,h;a.distance=function(){return w.geo.distance(f||b.apply(this,arguments),h||p.apply(this,arguments))};a.source=function(h){if(!arguments.length)return b;b=h;f="function"===typeof h?
null:h;return a};a.target=function(f){if(!arguments.length)return p;p=f;h="function"===typeof f?null:f;return a};a.precision=function(){return arguments.length?a:0};return a};w.geo.interpolate=function(a,b){return Pg(a[0]*ka,a[1]*ka,b[0]*ka,b[1]*ka)};w.geo.length=function(a){Kc=0;w.geo.stream(a,Eb);return Kc};var Kc,Eb={sphere:A,point:A,lineStart:function(){function a(c,m){var l=Math.sin(m*=ka),e=Math.cos(m),g=ma((c*=ka)-b),k=Math.cos(g);Kc+=Math.atan2(Math.sqrt((g=e*Math.sin(g))*g+(g=p*l-f*e*k)*
g),f*l+p*e*k);b=c;f=l;p=e}var b,f,p;Eb.point=function(h,m){b=h*ka;f=Math.sin(m*=ka);p=Math.cos(m);Eb.point=a};Eb.lineEnd=function(){Eb.point=Eb.lineEnd=A}},lineEnd:A,polygonStart:A,polygonEnd:A},Zf=Jb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(w.geo.azimuthalEqualArea=function(){return gb(Zf)}).raw=Zf;var $f=Jb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},wa);(w.geo.azimuthalEquidistant=function(){return gb($f)}).raw=$f;(w.geo.conicConformal=function(){return gd(Me)}).raw=
Me;(w.geo.conicEquidistant=function(){return gd(Ne)}).raw=Ne;var ag=Jb(function(a){return 1/a},Math.atan);(w.geo.gnomonic=function(){return gb(ag)}).raw=ag;mc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-xa]};(w.geo.mercator=function(){return Oe(mc)}).raw=mc;var bg=Jb(function(){return 1},Math.asin);(w.geo.orthographic=function(){return gb(bg)}).raw=bg;var cg=Jb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(w.geo.stereographic=function(){return gb(cg)}).raw=cg;ld.invert=
function(a,b){return[-b,2*Math.atan(Math.exp(a))-xa]};(w.geo.transverseMercator=function(){var a=Oe(ld),b=a.center,f=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?f([a[0],a[1],2<a.length?a[2]+90:90]):(a=f(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=ld;w.geom={};w.geom.hull=function(a){function b(a){if(3>a.length)return[];var c=ra(f),r=ra(p),l,e=a.length,g=[],k=[];for(l=0;l<e;l++)g.push([+c.call(this,a[l],l),+r.call(this,a[l],l),
l]);g.sort(Qg);for(l=0;l<e;l++)k.push([g[l][0],-g[l][1]]);var c=Pe(g),k=Pe(k),r=k[0]===c[0],e=k[k.length-1]===c[c.length-1],n=[];for(l=c.length-1;0<=l;--l)n.push(a[g[c[l]][2]]);for(l=+r;l<k.length-e;++l)n.push(a[g[k[l]][2]]);return n}var f=xb,p=Kb;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(f=a,b):f};b.y=function(a){return arguments.length?(p=a,b):p};return b};w.geom.polygon=function(a){Ub(a,Lc);return a};var Lc=w.geom.polygon.prototype=[];Lc.area=function(){for(var a=
-1,b=this.length,f,p=this[b-1],h=0;++a<b;)f=p,p=this[a],h+=f[1]*p[0]-f[0]*p[1];return.5*h};Lc.centroid=function(a){var b=-1,f=this.length,p=0,h=0,m,l=this[f-1],e;for(arguments.length||(a=-1/(6*this.area()));++b<f;)m=l,l=this[b],e=m[0]*l[1]-l[0]*m[1],p+=(m[0]+l[0])*e,h+=(m[1]+l[1])*e;return[p*a,h*a]};Lc.clip=function(a){for(var b,f=Re(a),p=-1,h=this.length-Re(this),m,l,e=this[h-1],g,k,n;++p<h;){b=a.slice();a.length=0;g=this[p];k=b[(l=b.length-f)-1];for(m=-1;++m<l;)n=b[m],md(n,e,g)?(md(k,e,g)||a.push(Qe(k,
n,e,g)),a.push(n)):md(k,e,g)&&a.push(Qe(k,n,e,g)),k=n;f&&a.push(a[0]);e=g}return a};var Bb,ob,zb,Te=[],od,Lb,Xe=[];Ve.prototype.prepare=function(){for(var a=this.edges,b=a.length,f;b--;)f=a[b].edge,f.b&&f.a||a.splice(b,1);a.sort(We);return a.length};pc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};pd.prototype={insert:function(a,b){var f,p,h;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=
a.R;a.L;)a=a.L;a.L=b}else a.R=b;f=a}else this._?(a=Ze(this._),b.P=null,b.N=a,a.P=a.L=b,f=a):(b.P=b.N=null,this._=b,f=null);b.L=b.R=null;b.U=f;b.C=!0;for(a=b;f&&f.C;)p=f.U,f===p.L?(h=p.R)&&h.C?(f.C=h.C=!1,p.C=!0,a=p):(a===f.R&&(Nb(this,f),a=f,f=a.U),f.C=!1,p.C=!0,Ob(this,p)):(h=p.L)&&h.C?(f.C=h.C=!1,p.C=!0,a=p):(a===f.L&&(Ob(this,f),a=f,f=a.U),f.C=!1,p.C=!0,Nb(this,p)),f=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,f=a.L,p=a.R,h,m;h=f?p?Ze(p):f:p;b?b.L===
a?b.L=h:b.R=h:this._=h;f&&p?(m=h.C,h.C=a.C,h.L=f,f.U=h,h!==p?(b=h.U,h.U=a.U,a=h.R,b.L=a,h.R=p,p.U=h):(h.U=b,b=h,a=h.R)):(m=a.C,a=h);a&&(a.U=b);if(!m)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Nb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Ob(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Nb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Ob(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Nb(this,a),a=b.L);a.C=b.C;
b.C=a.L.C=!1;Ob(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};w.geom.voronoi=function(a){function b(a){var c=Array(a.length),h=e[0][0],m=e[0][1],p=e[1][0],l=e[1][1];qd(f(a),e).cells.forEach(function(b,f){var r=b.edges,e=b.site;(c[f]=r.length?r.map(function(a){a=a.start();return[a.x,a.y]}):e.x>=h&&e.x<=p&&e.y>=m&&e.y<=l?[[h,l],[p,l],[p,m],[h,m]]:[]).point=a[f]});return c}function f(a){return a.map(function(a,c){return{x:1E-6*Math.round(m(a,c)/1E-6),y:1E-6*Math.round(l(a,c)/1E-6),
i:c}})}var p=xb,h=Kb,m=p,l=h,e=Mc;if(a)return b(a);b.links=function(a){return qd(f(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};b.triangles=function(a){var c=[];qd(f(a)).cells.forEach(function(b,f){for(var h=b.site,m=b.edges.sort(We),p=-1,l=m.length,r,e=m[l-1].edge,e=e.l===h?e.r:e.l;++p<l;)r=e,e=m[p].edge,e=e.l===h?e.r:e.l,f<r.i&&f<e.i&&0>(h.x-e.x)*(r.y-h.y)-(h.x-r.x)*(e.y-h.y)&&c.push([a[f],a[r.i],a[e.i]])});return c};b.x=function(a){return arguments.length?
(m=ra(p=a),b):p};b.y=function(a){return arguments.length?(l=ra(h=a),b):h};b.clipExtent=function(a){if(!arguments.length)return e===Mc?null:e;e=null==a?Mc:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):e===Mc?null:e&&e[1]};return b};var Mc=[[-1E6,-1E6],[1E6,1E6]];w.geom.delaunay=function(a){return w.geom.voronoi().triangles(a)};w.geom.quadtree=function(a,b,f,p,h){function m(a){function c(a,b,f,h,p,l,r,e){if(!isNaN(f)&&!isNaN(h))if(a.leaf){var g=a.x,k=a.y;if(null!=
g){if(!(.01>ma(g-f)+ma(k-h))){var n=a.point;a.x=a.y=a.point=null;m(a,n,g,k,p,l,r,e)}m(a,b,f,h,p,l,r,e)}else a.x=f,a.y=h,a.point=b}else m(a,b,f,h,p,l,r,e)}function m(a,b,f,h,p,l,r,e){var g=.5*(p+r),k=.5*(l+e),n=f>=g,t=h>=k,x=(t<<1)+n;a.leaf=!1;a=a.nodes[x]||(a.nodes[x]=$e());n?p=g:r=g;t?l=k:e=k;c(a,b,f,h,p,l,r,e)}var k,n=ra(l),t=ra(e),q,u,z,L,D,y,C,K;if(null!=b)D=b,y=f,C=p,K=h;else if(C=K=-(D=y=Infinity),q=[],u=[],L=a.length,g)for(z=0;z<L;++z)k=a[z],k.x<D&&(D=k.x),k.y<y&&(y=k.y),k.x>C&&(C=k.x),k.y>
K&&(K=k.y),q.push(k.x),u.push(k.y);else for(z=0;z<L;++z){var v=+n(k=a[z],z);k=+t(k,z);v<D&&(D=v);k<y&&(y=k);v>C&&(C=v);k>K&&(K=k);q.push(v);u.push(k)}v=C-D;k=K-y;v>k?K=y+v:C=D+k;var J=$e();J.add=function(a){c(J,a,+n(a,++z),+t(a,z),D,y,C,K)};J.visit=function(a){Pb(a,J,D,y,C,K)};z=-1;if(null==b){for(;++z<L;)c(J,a[z],q[z],u[z],D,y,C,K);--z}else a.forEach(J.add);q=u=a=k=null;return J}var l=xb,e=Kb,g;if(g=arguments.length)return l=Wg,e=Xg,3===g&&(h=f,p=b,f=b=0),m(a);m.x=function(a){return arguments.length?
(l=a,m):l};m.y=function(a){return arguments.length?(e=a,m):e};m.extent=function(a){if(!arguments.length)return null==b?null:[[b,f],[p,h]];null==a?b=f=p=h=null:(b=+a[0][0],f=+a[0][1],p=+a[1][0],h=+a[1][1]);return m};m.size=function(a){if(!arguments.length)return null==b?null:[p-b,h-f];null==a?b=f=p=h=null:(b=f=0,p=+a[0],h=+a[1]);return m};return m};w.interpolateRgb=rd;w.interpolateObject=af;w.interpolateNumber=ab;w.interpolateString=bf;var sd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,td=new RegExp(sd.source,
"g");w.interpolate=pb;w.interpolators=[function(a,b){var f=typeof b;return("string"===f?Wb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?rd:bf:b instanceof Da?rd:Array.isArray(b)?qc:"object"===f&&isNaN(b)?af:ab)(a,b)}];w.interpolateArray=qc;var dg=function(){return wa},ai=w.map({linear:dg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Zg},cubic:function(){return $g},sin:function(){return bh},exp:function(){return ch},circle:function(){return dh},elastic:function(a,b){var f;
2>arguments.length&&(b=.45);arguments.length?f=b/Ga*Math.asin(1/a):(a=1,f=b/4);return function(p){return 1+a*Math.pow(2,-10*p)*Math.sin((p-f)*Ga/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return eh}}),bi=w.map({"in":wa,out:cf,"in-out":df,"out-in":function(a){return df(cf(a))}});w.ease=function(a){var b=a.indexOf("-"),f=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",f=ai.get(f)||dg,b=bi.get(b)||wa;return Yg(b(f.apply(null,Rf.call(arguments,
1))))};w.interpolateHcl=function(a,b){a=w.hcl(a);b=w.hcl(b);var f=a.h,p=a.c,h=a.l,m=b.h-f,l=b.c-p,e=b.l-h;isNaN(l)&&(l=0,p=isNaN(p)?b.c:p);isNaN(m)?(m=0,f=isNaN(f)?b.h:f):180<m?m-=360:-180>m&&(m+=360);return function(a){return Tc(f+m*a,p+l*a,h+e*a)+""}};w.interpolateHsl=function(a,b){a=w.hsl(a);b=w.hsl(b);var f=a.h,p=a.s,h=a.l,m=b.h-f,l=b.s-p,e=b.l-h;isNaN(l)&&(l=0,p=isNaN(p)?b.s:p);isNaN(m)?(m=0,f=isNaN(f)?b.h:f):180<m?m-=360:-180>m&&(m+=360);return function(a){return Sc(f+m*a,p+l*a,h+e*a)+""}};
w.interpolateLab=function(a,b){a=w.lab(a);b=w.lab(b);var f=a.l,p=a.a,h=a.b,m=b.l-f,l=b.a-p,e=b.b-h;return function(a){return Zd(f+m*a,p+l*a,h+e*a)+""}};w.interpolateRound=ef;w.transform=function(a){var b=Pa.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new ff(c?c.matrix:ci)})(a)};ff.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+
")scale("+this.scale+")"};var ci={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=hf;w.layout={};w.layout.bundle=function(){return function(a){for(var b=[],f=-1,l=a.length;++f<l;)b.push(hh(a[f]));return b}};w.layout.chord=function(){function a(){var c={},f=[],q=w.range(e),u=[],z,L,D,y,C;l=[];h=[];z=0;for(y=-1;++y<e;){L=0;for(C=-1;++C<e;)L+=m[y][C];f.push(L);u.push(w.range(e));z+=L}k&&q.sort(function(a,c){return k(f[a],f[c])});n&&u.forEach(function(a,c){a.sort(function(a,b){return n(m[c][a],m[c][b])})});
z=(Ga-g*e)/z;L=0;for(y=-1;++y<e;){D=L;for(C=-1;++C<e;){var K=q[y],v=u[K][C],J=m[K][v],Q=L,W=L+=J*z;c[K+"-"+v]={index:K,subindex:v,startAngle:Q,endAngle:W,value:J}}h[K]={index:K,startAngle:D,endAngle:L,value:(L-D)/z};L+=g}for(y=-1;++y<e;)for(C=y-1;++C<e;)q=c[y+"-"+C],u=c[C+"-"+y],(q.value||u.value)&&l.push(q.value<u.value?{source:u,target:q}:{source:q,target:u});t&&b()}function b(){l.sort(function(a,c){return t((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var f={},l,h,m,e,
g=0,k,n,t;f.matrix=function(a){if(!arguments.length)return m;e=(m=a)&&m.length;l=h=null;return f};f.padding=function(a){if(!arguments.length)return g;g=a;l=h=null;return f};f.sortGroups=function(a){if(!arguments.length)return k;k=a;l=h=null;return f};f.sortSubgroups=function(a){if(!arguments.length)return n;n=a;l=null;return f};f.sortChords=function(a){if(!arguments.length)return t;t=a;l&&b();return f};f.chords=function(){l||a();return l};f.groups=function(){h||a();return h};return f};w.layout.force=
function(){function a(c){return function(a,b,f,h){if(a.point!==c){f=a.cx-c.x;var m=a.cy-c.y;b=h-b;h=f*f+m*m;if(b*b/z<h)return h<q&&(b=a.charge/h,c.px-=f*b,c.py-=m*b),!0;a.point&&h&&h<q&&(b=a.pointCharge/h,c.px-=f*b,c.py-=m*b)}return!a.charge}}function b(a){a.px=w.event.x;a.py=w.event.y;f.resume()}var f={},l=w.dispatch("start","tick","end"),h=[1,1],m,e,g=.9,k=di,n=ei,t=-30,q=fi,u=.1,z=.64,L=[],y=[],D,C,K;f.tick=function(){if(.005>(e*=.99))return l.end({type:"end",alpha:e=0}),!0;var b=L.length,f=y.length,
m,r,k,n,q,z,v;for(m=0;m<f;++m)if(r=y[m],k=r.source,n=r.target,z=n.x-k.x,v=n.y-k.y,q=z*z+v*v)q=e*C[m]*((q=Math.sqrt(q))-D[m])/q,z*=q,v*=q,n.x-=z*(q=k.weight/(n.weight+k.weight)),n.y-=v*q,k.x+=z*(q=1-q),k.y+=v*q;if(q=e*u)if(z=h[0]/2,v=h[1]/2,m=-1,q)for(;++m<b;)r=L[m],r.x+=(z-r.x)*q,r.y+=(v-r.y)*q;if(t)for(kf(f=w.geom.quadtree(L),e,K),m=-1;++m<b;)(r=L[m]).fixed||f.visit(a(r));for(m=-1;++m<b;)r=L[m],r.fixed?(r.x=r.px,r.y=r.py):(r.x-=(r.px-(r.px=r.x))*g,r.y-=(r.py-(r.py=r.y))*g);l.tick({type:"tick",alpha:e})};
f.nodes=function(a){if(!arguments.length)return L;L=a;return f};f.links=function(a){if(!arguments.length)return y;y=a;return f};f.size=function(a){if(!arguments.length)return h;h=a;return f};f.linkDistance=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return f};f.distance=f.linkDistance;f.linkStrength=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return f};f.friction=function(a){if(!arguments.length)return g;g=+a;return f};f.charge=function(a){if(!arguments.length)return t;
t="function"===typeof a?a:+a;return f};f.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(q);q=a*a;return f};f.gravity=function(a){if(!arguments.length)return u;u=+a;return f};f.theta=function(a){if(!arguments.length)return Math.sqrt(z);z=a*a;return f};f.alpha=function(a){if(!arguments.length)return e;a=+a;e?e=0<a?a:0:0<a&&(l.start({type:"start",alpha:e=a}),w.timer(f.tick));return f};f.start=function(){function a(f,h){if(!e){e=Array(b);for(l=0;l<b;++l)e[l]=[];for(l=0;l<p;++l){var m=
y[l];e[m.source.index].push(m.target);e[m.target.index].push(m.source)}}for(var m=e[c],l=-1,p=m.length,r;++l<p;)if(!isNaN(r=m[l][f]))return r;return Math.random()*h}var c,b=L.length,m=y.length,l=h[0],p=h[1],e,r;for(c=0;c<b;++c)(r=L[c]).index=c,r.weight=0;for(c=0;c<m;++c)r=y[c],"number"==typeof r.source&&(r.source=L[r.source]),"number"==typeof r.target&&(r.target=L[r.target]),++r.source.weight,++r.target.weight;for(c=0;c<b;++c)r=L[c],isNaN(r.x)&&(r.x=a("x",l)),isNaN(r.y)&&(r.y=a("y",p)),isNaN(r.px)&&
(r.px=r.x),isNaN(r.py)&&(r.py=r.y);D=[];if("function"===typeof k)for(c=0;c<m;++c)D[c]=+k.call(this,y[c],c);else for(c=0;c<m;++c)D[c]=k;C=[];if("function"===typeof n)for(c=0;c<m;++c)C[c]=+n.call(this,y[c],c);else for(c=0;c<m;++c)C[c]=n;K=[];if("function"===typeof t)for(c=0;c<b;++c)K[c]=+t.call(this,L[c],c);else for(c=0;c<b;++c)K[c]=t;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){m||(m=w.behavior.drag().origin(wa).on("dragstart.force",
ih).on("drag.force",b).on("dragend.force",jh));if(!arguments.length)return m;this.on("mouseover.force",kh).on("mouseout.force",lh).call(m)};return w.rebind(f,l,"on")};var di=20,ei=1,fi=Infinity;w.layout.hierarchy=function(){function a(h){var m=[h],e=[],g;for(h.depth=0;null!=(g=m.pop());)if(e.push(g),(n=f.call(a,g,g.depth))&&(k=n.length)){for(var k,n,q;0<=--k;)m.push(q=n[k]),q.parent=g,q.depth=g.depth+1;l&&(g.value=0);g.children=n}else l&&(g.value=+l.call(a,g,g.depth)||0),delete g.children;Sa(h,function(a){var c,
f;b&&(c=a.children)&&c.sort(b);l&&(f=a.parent)&&(f.value+=a.value)});return e}var b=ph,f=nh,l=oh;a.sort=function(f){if(!arguments.length)return b;b=f;return a};a.children=function(b){if(!arguments.length)return f;f=b;return a};a.value=function(b){if(!arguments.length)return l;l=b;return a};a.revalue=function(b){l&&(Rb(b,function(a){a.children&&(a.value=0)}),Sa(b,function(b){var f;b.children||(b.value=+l.call(a,b,b.depth)||0);if(f=b.parent)f.value+=b.value}));return b};return a};w.layout.partition=
function(){function a(b,f,h,l){var p=b.children;b.x=f;b.y=b.depth*l;b.dx=h;b.dy=l;if(p&&(r=p.length)){var e=-1,r,g;for(h=b.value?h/b.value:0;++e<r;)a(g=p[e],f,b=g.value*h,l),f+=b}}function b(a){a=a.children;var c=0;if(a&&(h=a.length))for(var f=-1,h;++f<h;)c=Math.max(c,b(a[f]));return 1+c}function f(f,e){var g=l.call(this,f,e);a(g[0],0,h[0],h[1]/b(g[0]));return g}var l=w.layout.hierarchy(),h=[1,1];f.size=function(a){if(!arguments.length)return h;h=a;return f};return Qb(f,l)};w.layout.pie=function(){function a(m){var e=
m.map(function(f,h){return+b.call(a,f,h)}),g=+("function"===typeof l?l.apply(this,arguments):l),k=(("function"===typeof h?h.apply(this,arguments):h)-g)/w.sum(e),n=w.range(m.length);null!=f&&n.sort(f===eg?function(a,c){return e[c]-e[a]}:function(a,c){return f(m[a],m[c])});var q=[];n.forEach(function(a){var c;q[a]={data:m[a],value:c=e[a],startAngle:g,endAngle:g+=c*k}});return q}var b=Number,f=eg,l=0,h=Ga;a.value=function(f){if(!arguments.length)return b;b=f;return a};a.sort=function(b){if(!arguments.length)return f;
f=b;return a};a.startAngle=function(b){if(!arguments.length)return l;l=b;return a};a.endAngle=function(b){if(!arguments.length)return h;h=b;return a};return a};var eg={};w.layout.stack=function(){function a(g,k){var n=g.map(function(f,h){return b.call(a,f,h)}),q=n.map(function(b){return b.map(function(b,f){return[m.call(a,b,f),e.call(a,b,f)]})}),t=f.call(a,q,k),n=w.permute(n,t),q=w.permute(q,t),t=l.call(a,q,k),u=n.length,z=n[0].length,L,y,D;for(y=0;y<z;++y)for(h.call(a,n[0][y],D=t[y],q[0][y][1]),
L=1;L<u;++L)h.call(a,n[L][y],D+=q[L-1][y][1],q[L][y][1]);return g}var b=wa,f=ud,l=vd,h=sh,m=qh,e=rh;a.values=function(f){if(!arguments.length)return b;b=f;return a};a.order=function(b){if(!arguments.length)return f;f="function"===typeof b?b:gi.get(b)||ud;return a};a.offset=function(b){if(!arguments.length)return l;l="function"===typeof b?b:hi.get(b)||vd;return a};a.x=function(b){if(!arguments.length)return m;m=b;return a};a.y=function(b){if(!arguments.length)return e;e=b;return a};a.out=function(b){if(!arguments.length)return h;
h=b;return a};return a};var gi=w.map({"inside-out":function(a){var b=a.length,f,l=a.map(th),h=a.map(uh),m=w.range(b).sort(function(a,c){return l[a]-l[c]}),e=0,g=0,k=[],n=[];for(a=0;a<b;++a)f=m[a],e<g?(e+=h[f],k.push(f)):(g+=h[f],n.push(f));return n.reverse().concat(k)},reverse:function(a){return w.range(a.length).reverse()},"default":ud}),hi=w.map({silhouette:function(a){var b=a.length,f=a[0].length,l=[],h=0,m,e,g,k=[];for(e=0;e<f;++e){for(g=m=0;m<b;m++)g+=a[m][e][1];g>h&&(h=g);l.push(g)}for(e=0;e<
f;++e)k[e]=(h-l[e])/2;return k},wiggle:function(a){var b=a.length,f=a[0],l=f.length,h,m,e,g,k,n,q,t,u,z=[];z[0]=t=u=0;for(m=1;m<l;++m){for(g=h=0;h<b;++h)g+=a[h][m][1];k=h=0;for(q=f[m][0]-f[m-1][0];h<b;++h){e=0;for(n=(a[h][m][1]-a[h][m-1][1])/(2*q);e<h;++e)n+=(a[e][m][1]-a[e][m-1][1])/q;k+=n*a[h][m][1]}z[m]=t-=g?k/g*q:0;t<u&&(u=t)}for(m=0;m<l;++m)z[m]-=u;return z},expand:function(a){var b=a.length,f=a[0].length,l=1/b,h,m,e,g=[];for(m=0;m<f;++m){for(e=h=0;h<b;h++)e+=a[h][m][1];if(e)for(h=0;h<b;h++)a[h][m][1]/=
e;else for(h=0;h<b;h++)a[h][m][1]=l}for(m=0;m<f;++m)g[m]=0;return g},zero:vd});w.layout.histogram=function(){function a(c,e){var g=[],k=c.map(f,this),n=l.call(this,k,e),q=h.call(this,n,k,e),t;e=-1;for(var u=k.length,z=q.length-1,L=b?1:1/u;++e<z;)t=g[e]=[],t.dx=q[e+1]-(t.x=q[e]),t.y=0;if(0<z)for(e=-1;++e<u;)t=k[e],t>=n[0]&&t<=n[1]&&(t=g[w.bisect(q,t,1,z)-1],t.y+=L,t.push(c[e]));return g}var b=!0,f=Number,l=xh,h=wh;a.value=function(b){if(!arguments.length)return f;f=b;return a};a.range=function(b){if(!arguments.length)return l;
l=ra(b);return a};a.bins=function(b){if(!arguments.length)return h;h="number"===typeof b?function(a){return lf(a,b)}:ra(b);return a};a.frequency=function(f){if(!arguments.length)return b;b=!!f;return a};return a};w.layout.pack=function(){function a(c,e){var g=b.call(this,c,e),k=g[0],n=l[0],q=l[1],t=null==h?Math.sqrt:"function"===typeof h?h:function(){return h};k.x=k.y=0;Sa(k,function(a){a.r=+t(a.value)});Sa(k,of);if(f){var u=f*(h?1:Math.max(2*k.r/n,2*k.r/q))/2;Sa(k,function(a){a.r+=u});Sa(k,of);Sa(k,
function(a){a.r-=u})}qf(k,n/2,q/2,h?1:1/Math.max(2*k.r/n,2*k.r/q));return g}var b=w.layout.hierarchy().sort(yh),f=0,l=[1,1],h;a.size=function(b){if(!arguments.length)return l;l=b;return a};a.radius=function(b){if(!arguments.length)return h;h=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return f;f=+b;return a};return Qb(a,b)};w.layout.tree=function(){function a(c,n){var q=m.call(this,c,n),t=q[0],u=b(t);Sa(u,f);u.parent.m=-u.z;Rb(u,l);if(k)Rb(t,h);else{var z=
t,L=t,y=t;Rb(t,function(a){a.x<z.x&&(z=a);a.x>L.x&&(L=a);a.depth>y.depth&&(y=a)});var D=e(z,L)/2-z.x,C=g[0]/(L.x+e(L,z)/2+D),K=g[1]/(y.depth||1);Rb(t,function(a){a.x=(a.x+D)*C;a.y=a.depth*K})}return q}function b(a){a={A:null,children:[a]};for(var c=[a],f;null!=(f=c.pop());)for(var h=f.children,l,m=0,e=h.length;m<e;++m)c.push((h[m]=l={_:h[m],parent:f,children:(l=h[m].children)&&l.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:m}).a=l);return a.children[0]}function f(a){var c=a.children,b=a.parent.children,
f=a.i?b[a.i-1]:null;if(c.length){for(var h=0,l=0,m=a.children,p=m.length,r;0<=--p;)r=m[p],r.z+=h,r.m+=h,h+=r.s+(l+=r.c);c=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+e(a._,f._),a.m=a.z-c):a.z=c}else f&&(a.z=f.z+e(a._,f._));c=a.parent;b=a.parent.A||b[0];if(f){l=h=a;m=h.parent.children[0];p=h.m;r=l.m;for(var g=f.m,k=m.m,n;f=yd(f),h=xd(h),f&&h;){m=xd(m);l=yd(l);l.a=a;n=f.z+g-h.z-p+e(f._,h._);if(0<n){var q=f.a.parent===a.parent?f.a:b,t=a,u=n,z=u/(t.i-q.i);t.c-=z;t.s+=u;q.c+=z;t.z+=u;t.m+=u;p+=n;r+=n}g+=f.m;
p+=h.m;k+=m.m;r+=l.m}f&&!yd(l)&&(l.t=f,l.m+=g-r);h&&!xd(m)&&(m.t=h,m.m+=p-k,b=a)}c.A=b}function l(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=g[0];a.y=a.depth*g[1]}var m=w.layout.hierarchy().sort(null).value(null),e=rf,g=[1,1],k=null;a.separation=function(b){if(!arguments.length)return e;e=b;return a};a.size=function(b){if(!arguments.length)return k?null:g;k=null==(g=b)?h:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?g:null;k=null==(g=b)?null:h;return a};return Qb(a,
m)};w.layout.cluster=function(){function a(c,e){var g=b.call(this,c,e),k=g[0],n,t=0;Sa(k,function(a){var c=a.children;c&&c.length?(a.x=Ch(c),a.y=Bh(c)):(a.x=n?t+=f(a,n):0,a.y=0,n=a)});var q=sf(k),u=tf(k),z=q.x-f(q,u)/2,L=u.x+f(u,q)/2;Sa(k,h?function(a){a.x=(a.x-k.x)*l[0];a.y=(k.y-a.y)*l[1]}:function(a){a.x=(a.x-z)/(L-z)*l[0];a.y=(1-(k.y?a.y/k.y:1))*l[1]});return g}var b=w.layout.hierarchy().sort(null).value(null),f=rf,l=[1,1],h=!1;a.separation=function(b){if(!arguments.length)return f;f=b;return a};
a.size=function(b){if(!arguments.length)return h?null:l;h=null==(l=b);return a};a.nodeSize=function(b){if(!arguments.length)return h?l:null;h=null!=(l=b);return a};return Qb(a,b)};w.layout.treemap=function(){function a(c,b){for(var f=-1,h=c.length,l,m;++f<h;)m=(l=c[f]).value*(0>b?0:b),l.area=isNaN(m)||0>=m?0:m}function b(f){var h=f.children;if(h&&h.length){var m=n(f),e=[],g=h.slice(),k=Infinity,t,q="slice"===u?m.dx:"dice"===u?m.dy:"slice-dice"===u?f.depth&1?m.dy:m.dx:Math.min(m.dx,m.dy);a(g,m.dx*
m.dy/f.value);for(e.area=0;0<(f=g.length);){e.push(f=g[f-1]);e.area+=f.area;if(!(f="squarify"!==u)){t=q;f=e.area;for(var L=void 0,y=0,x=Infinity,D=-1,C=e.length;++D<C;)if(L=e[D].area)L<x&&(x=L),L>y&&(y=L);f*=f;t*=t;f=(t=f?Math.max(t*y*z/f,f/(t*x*z)):Infinity)<=k}f?(g.pop(),k=t):(e.area-=e.pop().area,l(e,q,m,!1),q=Math.min(m.dx,m.dy),e.length=e.area=0,k=Infinity)}e.length&&(l(e,q,m,!0),e.length=e.area=0);h.forEach(b)}}function f(b){var h=b.children;if(h&&h.length){var m=n(b),e=h.slice(),r=[];a(e,m.dx*
m.dy/b.value);for(r.area=0;b=e.pop();)r.push(b),r.area+=b.area,null!=b.z&&(l(r,b.z?m.dx:m.dy,m,!e.length),r.length=r.area=0);h.forEach(f)}}function l(a,c,b,f){var h=-1,m=a.length,p=b.x,r=b.y,g=c?e(a.area/c):0,k;if(c==b.dx){if(f||g>b.dy)g=b.dy;for(;++h<m;)k=a[h],k.x=p,k.y=r,k.dy=g,p+=k.dx=Math.min(b.x+b.dx-p,g?e(k.area/g):0);k.z=!0;k.dx+=b.x+b.dx-p;b.y+=g;b.dy-=g}else{if(f||g>b.dx)g=b.dx;for(;++h<m;)k=a[h],k.x=p,k.y=r,k.dx=g,r+=k.dy=Math.min(b.y+b.dy-r,g?e(k.area/g):0);k.z=!1;k.dy+=b.y+b.dy-r;b.x+=
g;b.dx-=g}}function h(h){h=q||m(h);var l=h[0];l.x=0;l.y=0;l.dx=g[0];l.dy=g[1];q&&m.revalue(l);a([l],l.dx*l.dy/l.value);(q?f:b)(l);t&&(q=h);return h}var m=w.layout.hierarchy(),e=Math.round,g=[1,1],k=null,n=zd,t=!1,q,u="squarify",z=.5*(1+Math.sqrt(5));h.size=function(a){if(!arguments.length)return g;g=a;return h};h.padding=function(a){function c(b){var f=a.call(h,b,b.depth);return null==f?zd(b):uf(b,"number"===typeof f?[f,f,f,f]:f)}function b(c){return uf(c,a)}if(!arguments.length)return k;var f;n=
null==(k=a)?zd:"function"===(f=typeof a)?c:"number"===f?(a=[a,a,a,a],b):b;return h};h.round=function(a){if(!arguments.length)return e!=Number;e=a?Math.round:Number;return h};h.sticky=function(a){if(!arguments.length)return t;t=a;q=null;return h};h.ratio=function(a){if(!arguments.length)return z;z=a;return h};h.mode=function(a){if(!arguments.length)return u;u=a+"";return h};return Qb(h,m)};w.random={normal:function(a,b){var f=arguments.length;2>f&&(b=1);1>f&&(a=0);return function(){var f,h;do f=2*
Math.random()-1,h=2*Math.random()-1,h=f*f+h*h;while(!h||1<h);return a+b*f*Math.sqrt(-2*Math.log(h)/h)}},logNormal:function(){var a=w.random.normal.apply(w,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=w.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,f=0;f<a;f++)b+=Math.random();return b}}};w.scale={};var Eh={floor:wa,ceil:wa};w.scale.linear=function(){return wf([0,1],[0,1],pb,!1)};var Hh={s:1,g:1,p:1,r:1,e:1};
w.scale.log=function(){return xf(w.scale.linear().domain([0,1]),10,!0,[1,10])};var yf=w.format(".0e"),Ih={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};w.scale.pow=function(){return zf(w.scale.linear(),1,[0,1])};w.scale.sqrt=function(){return w.scale.pow().exponent(.5)};w.scale.ordinal=function(){return Af([],{t:"range",a:[[]]})};w.scale.category10=function(){return w.scale.ordinal().range(ii)};w.scale.category20=function(){return w.scale.ordinal().range(ji)};w.scale.category20b=
function(){return w.scale.ordinal().range(ki)};w.scale.category20c=function(){return w.scale.ordinal().range(li)};var ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Vb),ji=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Vb),ki=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,
8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Vb),li=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Vb);w.scale.quantile=function(){return Bf([],[])};w.scale.quantize=function(){return Cf(0,1,[0,1])};w.scale.threshold=function(){return Df([.5],[0,1])};w.scale.identity=function(){return Ef([0,1])};w.svg={};w.svg.arc=function(){function a(){var c=
b.apply(this,arguments),e=f.apply(this,arguments),g=l.apply(this,arguments)+qb,k=h.apply(this,arguments)+qb,n=(k<g&&(n=g,g=k,k=n),k-g),t=n<la?"0":"1",q=Math.cos(g),g=Math.sin(g),u=Math.cos(k),k=Math.sin(k);return n>=mi?c?"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"M0,"+c+"A"+c+","+c+" 0 1,0 0,"+-c+"A"+c+","+c+" 0 1,0 0,"+c+"Z":"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z":c?"M"+e*q+","+e*g+"A"+e+","+e+" 0 "+t+",1 "+e*u+","+e*k+"L"+c*u+","+c*k+"A"+c+","+c+" 0 "+
t+",0 "+c*q+","+c*g+"Z":"M"+e*q+","+e*g+"A"+e+","+e+" 0 "+t+",1 "+e*u+","+e*k+"L0,0Z"}var b=Jh,f=Kh,l=Ff,h=Gf;a.innerRadius=function(f){if(!arguments.length)return b;b=ra(f);return a};a.outerRadius=function(b){if(!arguments.length)return f;f=ra(b);return a};a.startAngle=function(b){if(!arguments.length)return l;l=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=ra(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+f.apply(this,arguments))/2,c=(l.apply(this,arguments)+
h.apply(this,arguments))/2+qb;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var qb=-xa,mi=Ga-1E-6;w.svg.line=function(){return Hf(wa)};var Cd=w.map({linear:Ha,"linear-closed":function(a){return Ha(a)+"Z"},step:function(a){for(var b=0,f=a.length,l=a[0],h=[l[0],",",l[1]];++b<f;)h.push("H",(l[0]+(l=a[b])[0])/2,"V",l[1]);1<f&&h.push("H",l[0]);return h.join("")},"step-before":Dd,"step-after":Ed,basis:If,"basis-open":function(a){if(4>a.length)return Ha(a);for(var b=[],f=-1,l=a.length,h,e=[0],g=[0];3>++f;)h=
a[f],e.push(h[0]),g.push(h[1]);b.push(Ka(ib,e)+","+Ka(ib,g));for(--f;++f<l;)h=a[f],e.shift(),e.push(h[0]),g.shift(),g.push(h[1]),Gd(b,e,g);return b.join("")},"basis-closed":function(a){for(var b,f=-1,l=a.length,h=l+4,e,g=[],k=[];4>++f;)e=a[f%l],g.push(e[0]),k.push(e[1]);b=[Ka(ib,g),",",Ka(ib,k)];for(--f;++f<h;)e=a[f%l],g.shift(),g.push(e[0]),k.shift(),k.push(e[1]),Gd(b,g,k);return b.join("")},bundle:function(a,b){var f=a.length-1;if(f)for(var l=a[0][0],h=a[0][1],e=a[f][0]-l,g=a[f][1]-h,k=-1,n,t;++k<=
f;)n=a[k],t=k/f,n[0]=b*n[0]+(1-b)*(l+t*e),n[1]=b*n[1]+(1-b)*(h+t*g);return If(a)},cardinal:function(a,b){return 3>a.length?Ha(a):a[0]+vc(a,Fd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ha(a):a[1]+vc(a.slice(1,a.length-1),Fd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ha(a):a[0]+vc((a.push(a[0]),a),Fd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Ha(a);else{var b=a[0],f=[],l,h,e,g;l=0;h=a.length-1;var k=[];e=a[1];for(g=k[0]=Hd(a[0],e);++l<h;)k[l]=
(g+(g=Hd(e,e=a[l+1])))/2;k[l]=g;for(var n=-1,t=a.length-1;++n<t;)l=Hd(a[n],a[n+1]),1E-6>ma(l)?k[n]=k[n+1]=0:(h=k[n]/l,e=k[n+1]/l,g=h*h+e*e,9<g&&(g=3*l/Math.sqrt(g),k[n]=g*h,k[n+1]=g*e));for(n=-1;++n<=t;)g=(a[Math.min(t,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+k[n]*k[n])),f.push([g||0,k[n]*g||0]);a=b+vc(a,f)}return a}});Cd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Jf=[0,2/3,1/3,0],Kf=[0,1/3,2/3,0],ib=[0,1/6,2/3,1/6];w.svg.line.radial=function(){var a=Hf(Lf);a.radius=a.x;delete a.x;
a.angle=a.y;delete a.y;return a};Dd.reverse=Ed;Ed.reverse=Dd;w.svg.area=function(){return Mf(wa)};w.svg.area.radial=function(){var a=Mf(Lf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};w.svg.chord=function(){function a(c,e){var m=b(this,l,c,e),g=b(this,h,c,e);return"M"+m.p0+f(m.r,m.p1,m.a1-m.a0)+(m.a0==g.a0&&m.a1==g.a1?"Q 0,0 "+m.p0:"Q 0,0 "+g.p0+f(g.r,g.p1,g.a1-g.a0)+
("Q 0,0 "+m.p0))+"Z"}function b(a,c,f,h){var l=c.call(a,f,h);c=e.call(a,l,h);f=g.call(a,l,h)+qb;a=k.call(a,l,h)+qb;return{r:c,a0:f,a1:a,p0:[c*Math.cos(f),c*Math.sin(f)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function f(a,c,b){return"A"+a+","+a+" 0 "+ +(b>la)+",1 "+c}var l=jd,h=kd,e=Lh,g=Ff,k=Gf;a.radius=function(b){if(!arguments.length)return e;e=ra(b);return a};a.source=function(b){if(!arguments.length)return l;l=ra(b);return a};a.target=function(b){if(!arguments.length)return h;h=ra(b);return a};a.startAngle=
function(b){if(!arguments.length)return g;g=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return k;k=ra(b);return a};return a};w.svg.diagonal=function(){function a(c,e){var g=b.call(this,c,e),k=f.call(this,c,e),n=(g.y+k.y)/2,g=[g,{x:g.x,y:n},{x:k.x,y:n},k],g=g.map(l);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=jd,f=kd,l=Nf;a.source=function(f){if(!arguments.length)return b;b=ra(f);return a};a.target=function(b){if(!arguments.length)return f;f=ra(b);return a};a.projection=function(b){if(!arguments.length)return l;
l=b;return a};return a};w.svg.diagonal.radial=function(){var a=w.svg.diagonal(),b=Nf,f=a.projection;a.projection=function(a){return arguments.length?f(Mh(b=a)):b};return a};w.svg.symbol=function(){function a(c,l){return(fg.get(b.call(this,c,l))||Of)(f.call(this,c,l))}var b=Oh,f=Nh;a.type=function(f){if(!arguments.length)return b;b=ra(f);return a};a.size=function(b){if(!arguments.length)return f;f=ra(b);return a};return a};var fg=w.map({circle:Of,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+
","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*gg));var b=a*gg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Nc);var b=a*Nc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Nc);var b=a*Nc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});w.svg.symbolTypes=
fg.keys();var Nc=Math.sqrt(3),gg=Math.tan(30*ka),va=[],Vf=0,sb,zc;va.call=pa.call;va.empty=pa.empty;va.node=pa.node;va.size=pa.size;w.transition=function(a){return arguments.length?sb?a.transition():a:Uf.transition()};w.transition.prototype=va;va.select=function(a){var b=this.id,f=[],l,h,e;a=P(a);for(var g=-1,k=this.length;++g<k;){f.push(l=[]);for(var n=this[g],t=-1,q=n.length;++t<q;)(e=n[t])&&(h=a.call(e,e.__data__,t,g))?("__data__"in e&&(h.__data__=e.__data__),wc(h,t,b,e.__transition__[b]),l.push(h)):
l.push(null)}return Sb(f,b)};va.selectAll=function(a){var b=this.id,f=[],l,h,e,g;a=G(a);for(var k=-1,n=this.length;++k<n;)for(var t=this[k],q=-1,u=t.length;++q<u;)if(l=t[q]){g=l.__transition__[b];h=a.call(l,l.__data__,q,k);f.push(l=[]);for(var z=-1,L=h.length;++z<L;)(e=h[z])&&wc(e,z,b,g),l.push(e)}return Sb(f,b)};va.filter=function(a){var b=[],f,l,h;"function"!==typeof a&&(a=Q(a));for(var e=0,g=this.length;e<g;e++){b.push(f=[]);l=this[e];for(var k=0,n=l.length;k<n;k++)(h=l[k])&&a.call(h,h.__data__,
k,e)&&f.push(h)}return Sb(b,this.id)};va.tween=function(a,b){var f=this.id;return 2>arguments.length?this.node().__transition__[f].tween.get(a):K(this,null==b?function(b){b.__transition__[f].tween.remove(a)}:function(l){l.__transition__[f].tween.set(a,b)})};va.attr=function(a,b){function f(){this.removeAttribute(k)}function l(){this.removeAttributeNS(k.space,k.local)}function h(a){return null==a?f:(a+="",function(){var c=this.getAttribute(k),b;return c!==a&&(b=g(c,a),function(a){this.setAttribute(k,
b(a))})})}function e(a){return null==a?l:(a+="",function(){var c=this.getAttributeNS(k.space,k.local),b;return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?hf:pb,k=w.ns.qualify(a);return Id(this,"attr."+a,b,k.local?e:h)};va.attrTween=function(a,b){function f(a,c){var f=b.call(this,a,c,this.getAttribute(h));return f&&function(a){this.setAttribute(h,f(a))}}function l(a,c){var f=b.call(this,
a,c,this.getAttributeNS(h.space,h.local));return f&&function(a){this.setAttributeNS(h.space,h.local,f(a))}}var h=w.ns.qualify(a);return this.tween("attr."+a,h.local?l:f)};va.style=function(a,b,f){function l(){this.style.removeProperty(a)}var h=arguments.length;if(3>h){if("string"!==typeof a){2>h&&(b="");for(f in a)this.style(f,a[f],b);return this}f=""}return Id(this,"style."+a,b,function(b){return null==b?l:(b+="",function(){var l=za.getComputedStyle(this,null).getPropertyValue(a),h;return l!==b&&
(h=pb(l,b),function(b){this.style.setProperty(a,h(b),f)})})})};va.styleTween=function(a,b,f){3>arguments.length&&(f="");return this.tween("style."+a,function(l,h){var e=b.call(this,l,h,za.getComputedStyle(this,null).getPropertyValue(a));return e&&function(b){this.style.setProperty(a,e(b),f)}})};va.text=function(a){return Id(this,"text",a,Ph)};va.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};va.ease=function(a){var b=
this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=w.ease.apply(w,arguments));return K(this,function(f){f.__transition__[b].ease=a})};va.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:K(this,"function"===typeof a?function(f,l,h){f.__transition__[b].delay=+a.call(f,f.__data__,l,h)}:(a=+a,function(f){f.__transition__[b].delay=a}))};va.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:
K(this,"function"===typeof a?function(f,l,h){f.__transition__[b].duration=Math.max(1,a.call(f,f.__data__,l,h))}:(a=Math.max(1,a),function(f){f.__transition__[b].duration=a}))};va.each=function(a,b){var f=this.id;if(2>arguments.length){var l=zc,h=sb;sb=f;K(this,function(b,l,h){zc=b.__transition__[f];a.call(b,b.__data__,l,h)});zc=l;sb=h}else K(this,function(l){l=l.__transition__[f];(l.event||(l.event=w.dispatch("start","end"))).on(a,b)});return this};va.transition=function(){for(var a=this.id,b=++Vf,
f=[],l,h,e,g,k=0,n=this.length;k<n;k++){f.push(l=[]);h=this[k];for(var t=0,q=h.length;t<q;t++){if(e=h[t])g=Object.create(e.__transition__[a]),g.delay+=g.duration,wc(e,t,b,g);l.push(e)}}return Sb(f,b)};w.svg.axis=function(){function a(c){c.each(function(){var a=w.select(this),c=this.__chart__||b,t=this.__chart__=b.copy(),q=null==k?t.ticks?t.ticks.apply(t,g):t.domain():k,u=null==n?t.tickFormat?t.tickFormat.apply(t,g):wa:n,z=a.selectAll(".tick").data(q,t),q=z.enter().insert("g",".domain").attr("class",
"tick").style("opacity",1E-6),L=w.transition(z.exit()).style("opacity",1E-6).remove(),y=w.transition(z.order()).style("opacity",1),D,C=rc(t),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),w.transition(a));q.append("line");q.append("text");var K=q.select("line"),v=y.select("line"),u=z.select("text").text(u),z=q.select("text"),J=y.select("text");switch(f){case "bottom":D=Pf;K.attr("y2",l);z.attr("y",Math.max(l,0)+e);v.attr("x2",0).attr("y2",l);J.attr("x",0).attr("y",
Math.max(l,0)+e);u.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+h+"V0H"+C[1]+"V"+h);break;case "top":D=Pf;K.attr("y2",-l);z.attr("y",-(Math.max(l,0)+e));v.attr("x2",0).attr("y2",-l);J.attr("x",0).attr("y",-(Math.max(l,0)+e));u.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+-h+"V0H"+C[1]+"V"+-h);break;case "left":D=Qf;K.attr("x2",-l);z.attr("x",-(Math.max(l,0)+e));v.attr("x2",-l).attr("y2",0);J.attr("x",-(Math.max(l,0)+e)).attr("y",0);u.attr("dy",
".32em").style("text-anchor","end");a.attr("d","M"+-h+","+C[0]+"H0V"+C[1]+"H"+-h);break;case "right":D=Qf,K.attr("x2",l),z.attr("x",Math.max(l,0)+e),v.attr("x2",l).attr("y2",0),J.attr("x",Math.max(l,0)+e).attr("y",0),u.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+h+","+C[0]+"H0V"+C[1]+"H"+h)}if(t.rangeBand)var Q=t,W=Q.rangeBand()/2,c=t=function(a){return Q(a)+W};else c.rangeBand?c=t:L.call(D,t);q.call(D,c);y.call(D,t)})}var b=w.scale.linear(),f=hg,l=6,h=6,e=3,g=[10],k=null,n;a.scale=
function(f){if(!arguments.length)return b;b=f;return a};a.orient=function(b){if(!arguments.length)return f;f=b in ni?b+"":hg;return a};a.ticks=function(){if(!arguments.length)return g;g=arguments;return a};a.tickValues=function(b){if(!arguments.length)return k;k=b;return a};a.tickFormat=function(b){if(!arguments.length)return n;n=b;return a};a.tickSize=function(b){var f=arguments.length;if(!f)return l;l=+b;h=+arguments[f-1];return a};a.innerTickSize=function(b){if(!arguments.length)return l;l=+b;
return a};a.outerTickSize=function(b){if(!arguments.length)return h;h=+b;return a};a.tickPadding=function(b){if(!arguments.length)return e;e=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var hg="bottom",ni={top:1,right:1,bottom:1,left:1};w.svg.brush=function(){function a(e){e.each(function(){var e=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),m=e.selectAll(".background").data([0]);
m.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(y,wa);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return oi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");n.style("display",a.empty()?"none":null);e=w.transition(e);m=w.transition(m);g&&(n=rc(g),m.attr("x",n[0]).attr("width",n[1]-n[0]),f(e));k&&(n=rc(k),m.attr("y",n[0]).attr("height",n[1]-n[0]),l(e));b(e)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)]+","+t[+/^s/.test(a)]+")"})}function f(a){a.select(".extent").attr("x",n[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function l(a){a.select(".extent").attr("y",
t[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",t[1]-t[0])}function h(){function h(){var a=w.mouse(C),c=!1;B&&(a[0]+=B[0],a[1]+=B[1]);V||(w.event.altKey?(A||(A=[(n[0]+n[1])/2,(t[0]+t[1])/2]),O[0]=n[+(a[0]<A[0])],O[1]=t[+(a[1]<A[1])]):A=null);W&&y(a,g,0)&&(f(J),c=!0);G&&y(a,k,1)&&(l(J),c=!0);c&&(b(J),v({type:"brush",mode:V?"move":"resize"}))}function y(a,c,b){var f=rc(c);c=f[0];var l=f[1],f=O[b],h=b?t:n,e=h[1]-h[0];V&&(c-=f,l-=e+f);a=(b?L:z)?Math.max(c,Math.min(l,a[b])):a[b];V?c=(a+=f)+
e:(A&&(f=Math.max(c,Math.min(l,2*A[b]-a))),f<a?(c=a,a=f):c=f);if(h[0]!=a||h[1]!=c)return b?u=null:q=null,h[0]=a,h[1]=c,!0}function D(){h();J.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);w.select("body").style("cursor",null);R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);E();v({type:"brushend"})}var C=this,K=w.select(w.event.target),v=e.of(C,arguments),
J=w.select(C),Q=K.datum(),W=!/^(n|s)$/.test(Q)&&g,G=!/^(e|w)$/.test(Q)&&k,V=K.classed("extent"),E=ia(),A,O=w.mouse(C),B,R=w.select(za).on("keydown.brush",function(){32==w.event.keyCode&&(V||(A=null,O[0]-=n[1],O[1]-=t[1],V=2),M())}).on("keyup.brush",function(){32==w.event.keyCode&&2==V&&(O[0]+=n[1],O[1]+=t[1],V=0,M())});if(w.event.changedTouches)R.on("touchmove.brush",h).on("touchend.brush",D);else R.on("mousemove.brush",h).on("mouseup.brush",D);J.interrupt().selectAll("*").interrupt();if(V)O[0]=n[0]-
O[0],O[1]=t[0]-O[1];else if(Q){var N=+/w$/.test(Q),Q=+/^n/.test(Q);B=[n[1-N]-O[0],t[1-Q]-O[1]];O[0]=n[N];O[1]=t[Q]}else w.event.altKey&&(A=O.slice());J.style("pointer-events","none").selectAll(".resize").style("display",null);w.select("body").style("cursor",K.style("cursor"));v({type:"brushstart"});h()}var e=D(a,"brushstart","brush","brushend"),g=null,k=null,n=[0,0],t=[0,0],q,u,z=!0,L=!0,y=Pd[0];a.event=function(a){a.each(function(){var a=e.of(this,arguments),c={x:n,y:t,i:q,j:u},b=this.__chart__||
c;this.__chart__=c;sb?w.select(this).transition().each("start.brush",function(){q=b.i;u=b.j;n=b.x;t=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=qc(n,c.x),f=qc(t,c.y);q=u=null;return function(l){n=c.x=b(l);t=c.y=f(l);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){q=c.i;u=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return g;g=b;y=
Pd[!g<<1|!k];return a};a.y=function(b){if(!arguments.length)return k;k=b;y=Pd[!g<<1|!k];return a};a.clamp=function(b){if(!arguments.length)return g&&k?[z,L]:g?z:k?L:null;g&&k?(z=!!b[0],L=!!b[1]):g?z=!!b:k&&(L=!!b);return a};a.extent=function(b){var f,l,h,e,m;if(!arguments.length)return g&&(q?(f=q[0],l=q[1]):(f=n[0],l=n[1],g.invert&&(f=g.invert(f),l=g.invert(l)),l<f&&(m=f,f=l,l=m))),k&&(u?(h=u[0],e=u[1]):(h=t[0],e=t[1],k.invert&&(h=k.invert(h),e=k.invert(e)),e<h&&(m=h,h=e,e=m))),g&&k?[[f,h],[l,e]]:
g?[f,l]:k&&[h,e];g&&(f=b[0],l=b[1],k&&(f=f[0],l=l[0]),q=[f,l],g.invert&&(f=g(f),l=g(l)),l<f&&(m=f,f=l,l=m),f!=n[0]||l!=n[1])&&(n=[f,l]);k&&(h=b[0],e=b[1],g&&(h=h[1],e=e[1]),u=[h,e],k.invert&&(h=k(h),e=k(e)),e<h&&(m=h,h=e,e=m),h!=t[0]||e!=t[1])&&(t=[h,e]);return a};a.clear=function(){a.empty()||(n=[0,0],t=[0,0],q=u=null);return a};a.empty=function(){return!!g&&n[0]==n[1]||!!k&&t[0]==t[1]};return w.rebind(a,e,"on")};var oi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",
se:"nwse-resize",sw:"nesw-resize"},Pd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Qd=aa.format=Xf.timeFormat,ig=Qd.utc,jg=ig("%Y-%m-%dT%H:%M:%S.%LZ");Qd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jd:jg;Jd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Jd.toString=jg.toString;aa.second=kb(function(a){return new ya(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});aa.seconds=aa.second.range;
aa.seconds.utc=aa.second.utc.range;aa.minute=kb(function(a){return new ya(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});aa.minutes=aa.minute.range;aa.minutes.utc=aa.minute.utc.range;aa.hour=kb(function(a){var b=a.getTimezoneOffset()/60;return new ya(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});aa.hours=aa.hour.range;aa.hours.utc=aa.hour.utc.range;aa.month=
kb(function(a){a=aa.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});aa.months=aa.month.range;aa.months.utc=aa.month.utc.range;var xc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Rd=[[aa.second,1],[aa.second,5],[aa.second,15],[aa.second,30],[aa.minute,1],[aa.minute,5],[aa.minute,15],[aa.minute,30],[aa.hour,1],[aa.hour,3],[aa.hour,6],[aa.hour,12],[aa.day,1],[aa.day,2],[aa.week,1],[aa.month,
1],[aa.month,3],[aa.year,1]],pi=Qd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",wb]]),Qh={range:function(a,b,f){return w.range(Math.ceil(a/f)*f,+b,f).map(rb)},floor:wa,ceil:wa};Rd.year=aa.year;aa.scale=function(){return Kd(w.scale.linear(),
Rd,pi)};var kg=Rd.map(function(a){return[a[0].utc,a[1]]}),qi=ig.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",wb]]);kg.year=aa.year.utc;aa.scale.utc=function(){return Kd(w.scale.linear(),kg,
qi)};w.text=Zc(function(a){return a.responseText});w.json=function(a,b){return Xb(a,"application/json",Rh,b)};w.html=function(a,b){return Xb(a,"text/html",Sh,b)};w.xml=Zc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(w):"object"===typeof module&&module.exports?module.exports=w:this.d3=w}();
(function(){function H(a,b){return(new Date(b,a+1,0)).getDate()}var v=window.nv||{};v.version="1.1.15b";v.dev=!0;window.nv=v;v.tooltip=v.tooltip||{};v.utils=v.utils||{};v.models=v.models||{};v.charts={};v.graphs=[];v.logs={};v.dispatch=d3.dispatch("render_start","render_end");v.dev&&(v.dispatch.on("render_start",function(a){v.logs.startTime=+new Date}),v.dispatch.on("render_end",function(a){v.logs.endTime=+new Date;v.logs.totalTime=v.logs.endTime-v.logs.startTime;v.log("total",v.logs.totalTime)}));
v.log=function(){v.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):v.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};v.render=function(a){a=a||1;v.render.active=!0;v.dispatch.render_start();setTimeout(function(){for(var b,g,t=0;t<a&&(g=v.render.queue[t]);t++)b=g.generate(),typeof g.callback==typeof Function&&g.callback(b),v.graphs.push(b);v.render.queue.splice(0,
t);v.render.queue.length?setTimeout(arguments.callee,0):(v.dispatch.render_end(),v.render.active=!1)},0)};v.render.active=!1;v.render.queue=[];v.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});v.render.queue.push(a);v.render.active||v.render()};v.identity=function(a){return a};v.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,g){return function(t,q,e){var k=
a(t),u=[];k<t&&b(k);if(1<e)for(;k<q;)t=new Date(+k),0===g(t)%e&&u.push(t),b(k);else for(;k<q;)u.push(new Date(+k)),b(k);return u}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(H(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});v.interactiveGuideline=function(){function a(B){B.each(function(A){function B(){var g=d3.mouse(this),n=g[0],g=g[1],t=!0,u=!1;I&&(n=d3.event.offsetX,g=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(t=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(u=!0));t&&(n-=q.left,g-=q.top);0>n||0>g||n>M||g>S||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u?I&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(k.elementMouseout({mouseX:n,mouseY:g}),a.renderGuideLine(null)):(t=e.invert(n),k.elementMousemove({mouseX:n,mouseY:g,pointXValue:t}),"dblclick"===d3.event.type&&k.elementDblclick({mouseX:n,mouseY:g,pointXValue:t}))}var E=d3.select(this),
M=g||960,S=t||400,D=E.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([A]);D.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");n&&(n.on("mousemove",B,!0).on("mouseout",B,!0).on("dblclick",B),a.renderGuideLine=function(a){u&&(a=D.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[v.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",S).attr("y2",0),a.exit().remove())})})}var b=v.models.tooltip(),g=null,t=null,q={left:0,top:0},e=d3.scale.linear();d3.scale.linear();var k=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),u=!0,n=null,I=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=k;a.tooltip=b;a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.left="undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return g;
g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.showGuideLine=function(b){if(!arguments.length)return u;u=b;return a};a.svgContainer=function(b){if(!arguments.length)return n;n=b;return a};return a};v.interactiveBisect=function(a,b,g){if(!a instanceof Array)return null;"function"!==typeof g&&(g=function(a,b){return a.x});var t=d3.bisector(g).left,t=d3.max([0,t(a,b)-1]),q=g(a[t],t);"undefined"===typeof q&&
(q=t);if(q===b)return t;var e=d3.min([t+1,a.length-1]);a=g(a[e],e);"undefined"===typeof a&&(a=e);return Math.abs(a-b)>=Math.abs(q-b)?t:e};v.nearestValueIndex=function(a,b,g){var t=Infinity,q=null;a.forEach(function(a,k){var u=Math.abs(b-a);u<=t&&u<g&&(t=u,q=k)});return q};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(A){var b;b=g&&g.series&&0<g.series.length?!0:!1;if(b){if(n){b=d3.select(n);"svg"!==b.node().tagName&&(b=b.select("svg"));var E=b.node()?b.attr("viewBox"):
null;E&&(E=E.split(" "),b=parseInt(b.style("width"))/E[2],B.left*=b,B.top*=b)}b=B.left;var E=null!=k?k:B.top,M;M=S(g);var G;G=n?d3.select(n):d3.select("body");var O=G.select(".nvtooltip");null===O.node()&&(O=G.append("div").attr("class","nvtooltip "+(u?u:"xy-tooltip")).attr("id",F));O.node().innerHTML=M;O.style("top",0).style("left",0).style("opacity",0);O.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);O.classed("nv-pointer-events-none",!0);I=M=O.node();if(n){(O=n.getElementsByTagName("svg")[0])?
O.getBoundingClientRect():n.getBoundingClientRect();var N=0;G=0;if(O){O=O.getBoundingClientRect();N=n.getBoundingClientRect();G=O.top;if(0>G){var U=n.getBoundingClientRect();G=Math.abs(G)>U.height?0:G}G=Math.abs(G-N.top);N=Math.abs(O.left-N.left)}b+=n.offsetLeft+N-2*n.scrollLeft;E+=n.offsetTop+G-2*n.scrollTop}e&&0<e&&(E=Math.floor(E/e)*e);v.tooltip.calcTooltipPosition([b,E],t,q,M);return a}}}var b=null,g=null,t="w",q=50,e=25,k=null,u=null,n=null,I=null,B={left:null,top:null},A=!0,F="nvtooltip-"+Math.floor(1E5*
Math.random()),E=function(a,b){return a},M=function(a){return a},S=function(a){if(null!=b)return b;if(null==a)return"";var e=d3.select(document.createElement("table"));e.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(M(a.value));var g=e.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
g.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});g.append("td").classed("key",!0).html(function(a){return a.key});g.append("td").classed("value",!0).html(function(a,b){return E(a.value,b)});g.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});e=e.node().outerHTML;void 0!==a.footer&&(e+="<div class='footer'>"+
a.footer+"</div>");return e};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(e){if(!arguments.length)return b;b=e;return a};a.tooltipElem=function(){return I};a.contentGenerator=function(b){if(!arguments.length)return S;"function"===typeof b&&(S=b);return a};a.data=function(b){if(!arguments.length)return g;g=b;return a};a.gravity=function(b){if(!arguments.length)return t;t=b;return a};a.distance=function(b){if(!arguments.length)return q;q=b;return a};a.snapDistance=function(b){if(!arguments.length)return e;
e=b;return a};a.classes=function(b){if(!arguments.length)return u;u=b;return a};a.chartContainer=function(b){if(!arguments.length)return n;n=b;return a};a.position=function(b){if(!arguments.length)return B;B.left="undefined"!==typeof b.left?b.left:B.left;B.top="undefined"!==typeof b.top?b.top:B.top;return a};a.fixedTop=function(b){if(!arguments.length)return k;k=b;return a};a.enabled=function(b){if(!arguments.length)return A;A=b;return a};a.valueFormatter=function(b){if(!arguments.length)return E;
"function"===typeof b&&(E=b);return a};a.headerFormatter=function(b){if(!arguments.length)return M;"function"===typeof b&&(M=b);return a};a.id=function(){return F};return a};v.tooltip.show=function(a,b,g,t,q,e){var k=document.createElement("div");k.className="nvtooltip "+(e?e:"xy-tooltip");e=q;if(!q||q.tagName.match(/g|svg/i))e=document.getElementsByTagName("body")[0];k.style.left=0;k.style.top=0;k.style.opacity=0;k.innerHTML=b;e.appendChild(k);q&&(a[0]-=q.scrollLeft,a[1]-=q.scrollTop);v.tooltip.calcTooltipPosition(a,
g,t,k)};v.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};v.tooltip.findTotalOffsetTop=function(a,b){var g=b;do isNaN(a.offsetTop)||(g+=a.offsetTop);while(a=a.offsetParent);return g};v.tooltip.findTotalOffsetLeft=function(a,b){var g=b;do isNaN(a.offsetLeft)||(g+=a.offsetLeft);while(a=a.offsetParent);return g};v.tooltip.calcTooltipPosition=function(a,b,g,t){var q=parseInt(t.offsetHeight),e=parseInt(t.offsetWidth),k=v.utils.windowSize().width,
u=v.utils.windowSize().height,n=window.pageYOffset,I=window.pageXOffset,B,A,u=window.innerWidth>=document.body.scrollWidth?u:u-16,k=window.innerHeight>=document.body.scrollHeight?k:k-16;g=g||20;var F=function(a){return v.tooltip.findTotalOffsetTop(a,A)},E=function(a){return v.tooltip.findTotalOffsetLeft(a,B)};switch(b||"s"){case "e":B=a[0]-e-g;A=a[1]-q/2;b=E(t);F=F(t);b<I&&(B=a[0]+g>I?a[0]+g:I-b+B);F<n&&(A=n-F+A);F+q>n+u&&(A=n+u-F+A-q);break;case "w":B=a[0]+g;A=a[1]-q/2;b=E(t);F=F(t);b+e>k&&(B=a[0]-
e-g);F<n&&(A=n+5);F+q>n+u&&(A=n+u-F+A-q);break;case "n":B=a[0]-e/2-5;A=a[1]+g;b=E(t);F=F(t);b<I&&(B=I+5);b+e>k&&(B=B-e/2+5);F+q>n+u&&(A=n+u-F+A-q);break;case "s":B=a[0]-e/2;A=a[1]-q-g;b=E(t);F=F(t);b<I&&(B=I+5);b+e>k&&(B=B-e/2+5);n>F&&(A=n);break;case "none":B=a[0],A=a[1]-g,b=E(t),F=F(t)}t.style.left=B+"px";t.style.top=A+"px";t.style.opacity=1;t.style.position="absolute";return t};v.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();v.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};v.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(g){"function"==typeof b&&b(g);a(g)}}};v.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,g){return b.color||a[g%a.length]}:a:v.utils.defaultColor()};v.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
g){return b.color||a[g%a.length]}};v.utils.customTheme=function(a,b,g){b=b||function(a){return a.key};g=g||d3.scale.category20().range();var t=g.length;return function(q,e){var k=b(q);t||(t=g.length);return"undefined"!==typeof a[k]?"function"===typeof a[k]?a[k]():a[k]:g[--t]}};v.utils.pjax=function(a,b){function g(g){d3.html(g,function(g){var e=d3.select(b).node();e.parentNode.replaceChild(d3.select(g).select(b).node(),e);v.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);g(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&g(d3.event.state)})};v.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};v.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};v.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,g){if("function"===
typeof this[a])this[a](g)}.bind(this));return this};v.models.axis=function(){function a(q){q.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var q=a.select("g");null!==E?b.ticks(E):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(e.range()[1]-e.range()[0])/100);q.transition().call(b);S=S||b.scale();var v=b.tickFormat();null==v&&(v=S.tickFormat());var D=q.selectAll("text.nv-axislabel").data([k||
null]);D.exit().remove();switch(b.orient()){case "top":D.enter().append("text").attr("class","nv-axislabel");var N=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);D.attr("text-anchor","middle").attr("y",0).attr("x",N/2);u&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text"),N.exit().remove(),N.attr("transform",function(a,b){return"translate("+e(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var e=v(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate("+e.range()[b]+",0)"}));break;case "bottom":var U=36,y=30,C=q.selectAll("g").select("text");I%360&&(C.each(function(a,b){var e=this.getBBox().width;e>y&&(y=e)}),N=Math.abs(Math.sin(I*Math.PI/180)),U=(N?N*y:y)+30,C.attr("transform",function(a,b,e){return"rotate("+I+" 0,0)"}).style("text-anchor",0<I%360?"start":"end"));D.enter().append("text").attr("class",
"nv-axislabel");N=2==e.range().length?e.range()[1]:e.range()[e.range().length-1]+(e.range()[1]-e.range()[0]);D.attr("text-anchor","middle").attr("y",U).attr("x",N/2);u&&(N=a.selectAll("g.nv-axisMaxMin").data([e.domain()[0],e.domain()[e.domain().length-1]]),N.enter().append("g").attr("class","nv-axisMaxMin").append("text"),N.exit().remove(),N.attr("transform",function(a,b){return"translate("+(e(a)+(F?e.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,e){return"rotate("+I+" 0,0)"}).style("text-anchor",I?0<I%360?"start":"end":"middle").text(function(a,b){var e=v(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate("+(e(a)+(F?e.rangeBand()/2:0))+",0)"}));A&&C.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":D.enter().append("text").attr("class","nv-axislabel");D.style("text-anchor",B?"middle":"begin").attr("transform",B?"rotate(90)":"").attr("y",
B?-Math.max(g.right,t)+12:-10).attr("x",B?e.range()[0]/2:b.tickPadding());u&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),N.exit().remove(),N.attr("transform",function(a,b){return"translate(0,"+e(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var e=v(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,
b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1));break;case "left":D.enter().append("text").attr("class","nv-axislabel"),D.style("text-anchor",B?"middle":"end").attr("transform",B?"rotate(-90)":"").attr("y",B?-Math.max(g.left,t)+M:-10).attr("x",B?-e.range()[0]/2:-b.tickPadding()),u&&(N=a.selectAll("g.nv-axisMaxMin").data(e.domain()),N.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),N.exit().remove(),N.attr("transform",function(a,b){return"translate(0,"+
S(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var e=v(a);return(""+e).match("NaN")?"":e}),N.transition().attr("transform",function(a,b){return"translate(0,"+e.range()[b]+")"}).select("text").style("opacity",1))}D.text(function(a){return a});!u||"left"!==b.orient()&&"right"!==b.orient()||(q.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(e(a)<e.range()[1]+10||e(a)>e.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),e.domain()[0]==e.domain()[1]&&0==e.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(u&&("top"===b.orient()||"bottom"===b.orient())){var J=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?J.push(e(a)-this.getBBox().width-4):J.push(e(a)+this.getBBox().width+4)}catch(g){b?J.push(e(a)-4):J.push(e(a)+4)}});q.selectAll("g").each(function(a,b){if(e(a)<J[0]||
e(a)>J[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n&&q.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);S=e.copy()});return a}var b=d3.svg.axis(),g={top:0,right:0,bottom:0,left:0},t=75,q=60,e=d3.scale.linear(),k=null,u=!0,n=!0,I=0,B=!0,A=!1,F=!1,E=null,M=12;b.scale(e).orient("bottom").tickFormat(function(a){return a});var S;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,e,"domain","range","rangeBand","rangeBands");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.ticks=function(b){if(!arguments.length)return E;
E=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.axisLabel=function(b){if(!arguments.length)return k;k=b;return a};a.showMaxMin=function(b){if(!arguments.length)return u;u=b;return a};a.highlightZero=function(b){if(!arguments.length)return n;n=b;return a};a.scale=function(g){if(!arguments.length)return e;e=g;b.scale(e);F="function"===typeof e.rangeBands;d3.rebind(a,e,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return B;
B=b;return a};a.rotateLabels=function(b){if(!arguments.length)return I;I=b;return a};a.staggerLabels=function(b){if(!arguments.length)return A;A=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return M;M=b;return a};return a};v.models.historicalBar=function(){function a(O){O.each(function(a){var O=g-b.left-b.right,y=t-b.top-b.bottom,C=d3.select(this);e.domain(M||d3.extent(a[0].values.map(u).concat(I)));A?e.range(D||[.5*O/a[0].values.length,O*(a[0].values.length-.5)/a[0].values.length]):
e.range(D||[0,O]);k.domain(S||d3.extent(a[0].values.map(n).concat(B))).range(R||[y,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var J=C.selectAll("g.nv-wrap.nv-historicalBar-"+q).data([a[0].values]),z=J.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
q),W=z.append("defs"),z=z.append("g"),Q=J.select("g");z.append("g").attr("class","nv-bars");J.attr("transform","translate("+b.left+","+b.top+")");C.on("click",function(a,b){P.chartClick({data:a,index:b,pos:d3.event,id:q})});W.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");J.select("#nv-chart-clip-path-"+q+" rect").attr("width",O).attr("height",y);Q.attr("clip-path",F?"url(#nv-chart-clip-path-"+q+")":"");y=J.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return u(a,b)});y.exit().remove();y.enter().append("rect").attr("x",0).attr("y",function(a,b){return v.utils.NaNtoZero(k(Math.max(0,n(a,b))))}).attr("height",function(a,b){return v.utils.NaNtoZero(Math.abs(k(n(a,b))-k(0)))}).attr("transform",function(b,g){return"translate("+(e(u(b,g))-O/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,g){G&&(d3.select(this).classed("hover",!0),P.elementMouseover({point:b,series:a[0],pos:[e(u(b,g)),k(n(b,g))],pointIndex:g,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,e){G&&(d3.select(this).classed("hover",!1),P.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){G&&(P.elementClick({value:n(a,b),data:a,index:b,pos:[e(u(a,b)),k(n(a,b))],e:d3.event,id:q}),d3.event.stopPropagation())}).on("dblclick",function(a,b){G&&(P.elementDblClick({value:n(a,b),data:a,index:b,pos:[e(u(a,b)),k(n(a,b))],e:d3.event,id:q}),d3.event.stopPropagation())});y.attr("fill",function(a,b){return E(a,b)}).attr("class",function(a,
b,e){return(0>n(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+b}).transition().attr("transform",function(b,g){return"translate("+(e(u(b,g))-O/a[0].values.length*.45)+",0)"}).attr("width",O/a[0].values.length*.9);y.transition().attr("y",function(a,b){var e=0>n(a,b)?k(0):1>k(0)-k(n(a,b))?k(0)-1:k(n(a,b));return v.utils.NaNtoZero(e)}).attr("height",function(a,b){return v.utils.NaNtoZero(Math.max(Math.abs(k(n(a,b))-k(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,
q=Math.floor(1E4*Math.random()),e=d3.scale.linear(),k=d3.scale.linear(),u=function(a){return a.x},n=function(a){return a.y},I=[],B=[0],A=!1,F=!0,E=v.utils.defaultColor(),M,S,D,R,P=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),G=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+q).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+q).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=P;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return u;u=b;return a};a.y=function(b){if(!arguments.length)return n;n=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};
a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return k;k=b;return a};a.xDomain=function(b){if(!arguments.length)return M;M=b;return a};a.yDomain=function(b){if(!arguments.length)return S;S=b;return a};a.xRange=function(b){if(!arguments.length)return D;D=b;return a};a.yRange=function(b){if(!arguments.length)return R;R=b;return a};a.forceX=function(b){if(!arguments.length)return I;
I=b;return a};a.forceY=function(b){if(!arguments.length)return B;B=b;return a};a.padData=function(b){if(!arguments.length)return A;A=b;return a};a.clipEdge=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return E;E=v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return q;q=b;return a};a.interactive=function(b){if(!arguments.length)return G;G=!1;return a};return a};v.models.bullet=function(){function a(g){g.each(function(a,g){var v=
n-b.left-b.right,E=I-b.top-b.bottom,B=d3.select(this),G=q.call(this,a,g).slice().sort(d3.descending),O=e.call(this,a,g).slice().sort(d3.descending),N=k.call(this,a,g).slice().sort(d3.descending),U=(a.rangeLabels?a.rangeLabels:[]).slice(),y=(a.markerLabels?a.markerLabels:[]).slice(),C=(a.measureLabels?a.measureLabels:[]).slice(),J=d3.scale.linear().domain(d3.extent(d3.merge([u,G]))).range(t?[v,0]:[0,v]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(J.range());this.__chart__=J;var v=
d3.min(G),z=d3.max(G),G=G[1],B=B.selectAll("g.nv-wrap.nv-bullet").data([a]),W=B.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),Q=B.select("g");W.append("rect").attr("class","nv-range nv-rangeMax");W.append("rect").attr("class","nv-range nv-rangeAvg");W.append("rect").attr("class","nv-range nv-rangeMin");W.append("rect").attr("class","nv-measure");W.append("path").attr("class","nv-markerTriangle");B.attr("transform","translate("+b.left+","+b.top+")");var W=function(a){return Math.abs(J(a)-
J(0))},V=function(a){return 0>a?J(a):J(0)};Q.select("rect.nv-rangeMax").attr("height",E).attr("width",W(0<z?z:v)).attr("x",V(0<z?z:v)).datum(0<z?z:v);Q.select("rect.nv-rangeAvg").attr("height",E).attr("width",W(G)).attr("x",V(G)).datum(G);Q.select("rect.nv-rangeMin").attr("height",E).attr("width",W(z)).attr("x",V(z)).attr("width",W(0<z?v:z)).attr("x",V(0<z?v:z)).datum(0<z?v:z);Q.select("rect.nv-measure").style("fill",A).attr("height",E/3).attr("y",E/3).attr("width",0>N?J(0)-J(N[0]):J(N[0])-J(0)).attr("x",
V(N)).on("mouseover",function(){F.elementMouseover({value:N[0],label:C[0]||"Current",pos:[J(N[0]),E/2]})}).on("mouseout",function(){F.elementMouseout({value:N[0],label:C[0]||"Current"})});v=E/6;if(O[0])Q.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+J(O[0])+","+E/2+")"}).attr("d","M0,"+v+"L"+v+","+-v+" "+-v+","+-v+"Z").on("mouseover",function(){F.elementMouseover({value:O[0],label:y[0]||"Previous",pos:[J(O[0]),E/2]})}).on("mouseout",function(){F.elementMouseout({value:O[0],
label:y[0]||"Previous"})});else Q.selectAll("path.nv-markerTriangle").remove();B.selectAll(".nv-range").on("mouseover",function(a,b){F.elementMouseover({value:a,label:U[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[J(a),E/2]})}).on("mouseout",function(a,b){F.elementMouseout({value:a,label:U[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},g="left",t=!1,q=function(a){return a.ranges},e=function(a){return a.markers},k=function(a){return a.measures},u=[0],n=
380,I=30,B=null,A=v.utils.getColor(["#1f77b4"]),F=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=F;a.options=v.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return g;g=b;t="right"==g||"bottom"==g;return a};a.ranges=function(b){if(!arguments.length)return q;q=b;return a};a.markers=function(b){if(!arguments.length)return e;e=b;return a};a.measures=function(b){if(!arguments.length)return k;k=b;return a};a.forceX=function(b){if(!arguments.length)return u;u=b;return a};
a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;
A=v.utils.getColor(b);return a};return a};v.models.bulletChart=function(){function a(g){g.each(function(D,R){var P=d3.select(this),G=(n||parseInt(P.style("width"))||960)-q.left-q.right,O=I-q.top-q.bottom,N=this;a.update=function(){a(g)};a.container=this;if(D&&e.call(this,D,R))P.selectAll(".nv-noData").remove();else return P=P.selectAll(".nv-noData").data([E]),P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",q.left+G/2).attr("y",18+
q.top+O/2).text(function(a){return a}),a;var U=e.call(this,D,R).slice().sort(d3.descending),y=k.call(this,D,R).slice().sort(d3.descending),C=u.call(this,D,R).slice().sort(d3.descending),J=P.selectAll("g.nv-wrap.nv-bulletChart").data([D]),z=J.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),P=J.select("g");z.append("g").attr("class","nv-bulletWrap");z.append("g").attr("class","nv-titles");J.attr("transform","translate("+q.left+","+q.top+")");var W=d3.scale.linear().domain([0,
Math.max(U[0],y[0],C[0])]).range(t?[G,0]:[0,G]),Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(W.range());this.__chart__=W;U=z.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(I-q.top-q.bottom)/2+")");U.append("text").attr("class","nv-title").text(function(a){return a.title});U.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(G).height(O);U=P.select(".nv-bulletWrap");d3.transition(U).call(b);
var V=B||W.tickFormat(G/100),G=P.selectAll("g.nv-tick").data(W.ticks(G/50),function(a){return this.textContent||V(a)}),P=G.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+Q(a)+",0)"}).style("opacity",1E-6);P.append("line").attr("y1",O).attr("y2",7*O/6);P.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*O/6).text(V);P=d3.transition(G).attr("transform",function(a){return"translate("+W(a)+",0)"}).style("opacity",1);P.select("line").attr("y1",
O).attr("y2",7*O/6);P.select("text").attr("y",7*O/6);d3.transition(G.exit()).attr("transform",function(a){return"translate("+W(a)+",0)"}).style("opacity",1E-6).remove();M.on("tooltipShow",function(b){b.key=D.title;if(A){var e=N.parentNode,g=b.pos[0]+(e.offsetLeft||0)+q.left,l=b.pos[1]+(e.offsetTop||0)+q.top,k=F(b.key,b.label,b.value,b,a);v.tooltip.show([g,l],k,0>b.value?"e":"w",null,e)}})});d3.timer.flush();return a}var b=v.models.bullet(),g="left",t=!1,q={top:5,right:40,bottom:20,left:120},e=function(a){return a.ranges},
k=function(a){return a.markers},u=function(a){return a.measures},n=null,I=55,B=null,A=!0,F=function(a,b,e,g,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},E="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){M.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){M.tooltipHide(a)});M.on("tooltipHide",function(){A&&v.tooltip.cleanup()});a.dispatch=M;a.bullet=b;d3.rebind(a,b,"color");a.options=v.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return g;g=b;t="right"==g||"bottom"==g;return a};a.ranges=function(b){if(!arguments.length)return e;e=b;return a};a.markers=function(b){if(!arguments.length)return k;k=b;return a};a.measures=function(b){if(!arguments.length)return u;u=b;return a};a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;
q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:q.left;return a};a.tickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.tooltips=function(b){if(!arguments.length)return A;A=b;return a};a.tooltipContent=function(b){if(!arguments.length)return F;F=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};return a};v.models.cumulativeLineChart=function(){function a(l){l.each(function(l){function K(){oa.data([X]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var H=d3.select(this).classed("nv-chart-"+y,!0),ia=this,Y=(B||parseInt(H.style("width"))||960)-n.left-n.right,ha=(A||parseInt(H.style("height"))||400)-n.top-n.bottom;a.update=function(){H.transition().duration(V).call(a)};a.container=this;C.disabled=l.map(function(a){return!!a.disabled});if(!J){var ja;J={};for(ja in C)J[ja]=C[ja]instanceof Array?C[ja].slice(0):C[ja]}ja=d3.behavior.drag().on("dragstart",function(b,
l){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){X.x=d3.event.x;X.i=Math.round(ca.invert(X.x));K()}).on("dragend",function(b,l){d3.select(a.container).style("cursor","auto");C.index=X.i;Q.stateChange(C)});if(l&&l.length&&l.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return ja=H.selectAll(".nv-noData").data([z]),ja.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ja.attr("x",
n.left+Y/2).attr("y",n.top+ha/2).text(function(a){return a}),a;N=g.xScale();U=g.yScale();if(G)g.yDomain(null);else{var da=l.filter(function(a){return!a.disabled}).map(function(a,b){var l=d3.extent(a.values,g.y());-.95>l[0]&&(l[0]=-.95);return[(l[0]-l[1])/(1+l[1]),(l[1]-l[0])/(1+l[0])]}),da=[d3.min(da,function(a){return a[0]}),d3.max(da,function(a){return a[1]})];g.yDomain(da)}ca.domain([0,l[0].values.length-1]).range([0,Y]).clamp(!0);l=b(X.i,l);var Z=P?"none":"all",na=H.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),
ga=na.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),da=na.select("g");ga.append("g").attr("class","nv-interactive");ga.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ga.append("g").attr("class","nv-y nv-axis");ga.append("g").attr("class","nv-background");ga.append("g").attr("class","nv-linesWrap").style("pointer-events",Z);ga.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ga.append("g").attr("class","nv-legendWrap");
ga.append("g").attr("class","nv-controlsWrap");F&&(e.width(Y),da.select(".nv-legendWrap").datum(l).call(e),n.top!=e.height()&&(n.top=e.height(),ha=(A||parseInt(H.style("height"))||400)-n.top-n.bottom),da.select(".nv-legendWrap").attr("transform","translate(0,"+-n.top+")"));R&&(Z=[{key:"Re-scale y-axis",disabled:!G}],k.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),da.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-n.top+")").call(k));
na.attr("transform","translate("+n.left+","+n.top+")");S&&da.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");Z=l.filter(function(a){return a.tempDisabled});na.select(".tempDisabled").remove();Z.length&&na.append("text").attr("class","tempDisabled").attr("x",Y/2).attr("y","-.71em").style("text-anchor","end").text(Z.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");P&&(u.width(Y).height(ha).margin({left:n.left,top:n.top}).svgContainer(H).xScale(N),
na.select(".nv-interactive").call(u));ga.select(".nv-background").append("rect");da.select(".nv-background rect").attr("width",Y).attr("height",ha);g.y(function(a){return a.display.y}).width(Y).height(ha).color(l.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!l[b].disabled&&!l[b].tempDisabled}));na=da.select(".nv-linesWrap").datum(l.filter(function(a){return!a.disabled&&!a.tempDisabled}));na.call(g);l.forEach(function(a,b){a.seriesIndex=b});ga=l.filter(function(a){return!a.disabled&&
!!W(a)});ga=da.select(".nv-avgLinesWrap").selectAll("line").data(ga,function(a){return a.key});Z=function(a){a=U(W(a));return 0>a?0:a>ha?ha:a};ga.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return g.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",Y).attr("y1",Z).attr("y2",Z);ga.style("stroke-opacity",function(a){a=U(W(a));return 0>a||a>ha?0:1}).attr("x1",0).attr("x2",Y).attr("y1",Z).attr("y2",Z);ga.exit().remove();var oa=na.selectAll(".nv-indexLine").data([X]);
oa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ja);oa.attr("transform",function(a){return"translate("+ca(a.i)+",0)"}).attr("height",ha);E&&(t.scale(N).ticks(Math.min(l[0].values.length,Y/70)).tickSize(-ha,0),da.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")"),d3.transition(da.select(".nv-x.nv-axis")).call(t));M&&(q.scale(U).ticks(ha/36).tickSize(-Y,0),d3.transition(da.select(".nv-y.nv-axis")).call(q));
da.select(".nv-background rect").on("click",function(){X.x=d3.mouse(this)[0];X.i=Math.round(ca.invert(X.x));C.index=X.i;Q.stateChange(C);K()});g.dispatch.on("elementClick",function(a){X.i=a.pointIndex;X.x=ca(X.i);C.index=X.i;Q.stateChange(C);K()});k.dispatch.on("legendClick",function(b,l){b.disabled=!b.disabled;G=!b.disabled;C.rescaleY=G;Q.stateChange(C);a.update()});e.dispatch.on("stateChange",function(b){C.disabled=b.disabled;Q.stateChange(C);a.update()});u.dispatch.on("elementMousemove",function(b){g.clearHighlights();
var e,k,z,y=[];l.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(l,n){k=v.interactiveBisect(l.values,b.pointXValue,a.x());g.highlightPoint(n,k,!0);var t=l.values[k];"undefined"!==typeof t&&("undefined"===typeof e&&(e=t),"undefined"===typeof z&&(z=a.xScale()(a.x()(t,k))),y.push({key:l.key,value:a.y()(t,k),color:I(l,l.seriesIndex)}))});if(2<y.length){var C=a.yScale().invert(b.mouseY),J=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),C=v.nearestValueIndex(y.map(function(a){return a.value}),
C,J);null!==C&&(y[C].highlight=!0)}C=t.tickFormat()(a.x()(e,k),k);u.tooltip.position({left:z+n.left,top:b.mouseY+n.top}).chartContainer(ia.parentNode).enabled(D).valueFormatter(function(a,b){return q.tickFormat()(a)}).data({value:C,series:y})();u.renderGuideLine(z)});u.dispatch.on("elementMouseout",function(a){Q.tooltipHide();g.clearHighlights()});Q.on("tooltipShow",function(b){if(D){var l=ia.parentNode,e=b.pos[0]+(l.offsetLeft||0),k=b.pos[1]+(l.offsetTop||0),n=t.tickFormat()(g.x()(b.point,b.pointIndex)),
u=q.tickFormat()(g.y()(b.point,b.pointIndex));b=O(b.series.key,n,u,b,a);v.tooltip.show([e,k],b,null,null,l)}});Q.on("changeState",function(b){"undefined"!==typeof b.disabled&&(l.forEach(function(a,l){a.disabled=b.disabled[l]}),C.disabled=b.disabled);"undefined"!==typeof b.index&&(X.i=b.index,X.x=ca(X.i),C.index=b.index,oa.data([X]));"undefined"!==typeof b.rescaleY&&(G=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,e){if(!b.values)return b;var k=b.values[a];if(null==k)return b;
var n=g.y()(k,a);if(-.95>n&&!K)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(g.y()(a,b)-n)/(1+n)};return a});return b})}var g=v.models.line(),t=v.models.axis(),q=v.models.axis(),e=v.models.legend(),k=v.models.legend(),u=v.interactiveGuideline(),n={top:30,right:30,bottom:50,left:60},I=v.utils.defaultColor(),B=null,A=null,F=!0,E=!0,M=!0,S=!1,D=!0,R=!0,P=!1,G=!0,O=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},N,U,y=g.id(),C={index:0,
rescaleY:G},J=null,z="No Data Available.",W=function(a){return a.average},Q=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),V=250,K=!1;t.orient("bottom").tickPadding(7);q.orient(S?"right":"left");k.updateState(!1);var ca=d3.scale.linear(),X={i:0,x:0};g.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+n.left,a.pos[1]+n.top];Q.tooltipShow(a)});g.dispatch.on("elementMouseout.tooltip",function(a){Q.tooltipHide(a)});Q.on("tooltipHide",function(){D&&v.tooltip.cleanup()});
a.dispatch=Q;a.lines=g;a.legend=e;a.xAxis=t;a.yAxis=q;a.interactiveLayer=u;d3.rebind(a,g,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;n.right="undefined"!=typeof b.right?b.right:n.right;n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom;n.left=
"undefined"!=typeof b.left?b.left:n.left;return a};a.width=function(b){if(!arguments.length)return B;B=b;return a};a.height=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);e.color(I);return a};a.rescaleY=function(b){if(!arguments.length)return G;G=b;return a};a.showControls=function(b){if(!arguments.length)return R;R=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return P;P=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return F;F=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return M;M=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;q.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return D;D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return O;O=b;return a};a.state=function(b){if(!arguments.length)return C;
C=b;return a};a.defaultState=function(b){if(!arguments.length)return J;J=b;return a};a.noData=function(b){if(!arguments.length)return z;z=b;return a};a.average=function(b){if(!arguments.length)return W;W=b;return a};a.transitionDuration=function(b){if(!arguments.length)return V;V=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return K;K=b;return a};return a};v.models.discreteBar=function(){function a(q){q.each(function(a){var q=g-b.left-b.right,y=t-b.top-b.bottom,C=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var v=E&&M?[]:a.map(function(a){return a.values.map(function(a,b){return{x:u(a,b),y:n(a,b),y0:a.y0}})});e.domain(E||d3.merge(v).map(function(a){return a.x})).rangeBands(S||[0,q],.1);k.domain(M||d3.extent(d3.merge(v).map(function(a){return a.y}).concat(I)));A?k.range(D||[y-(0>k.domain()[0]?12:0),0<k.domain()[1]?12:0]):k.range(D||[y,0]);G=G||k.copy().range([k(0),k(0)]);q=C.selectAll("g.nv-wrap.nv-discretebar").data([a]);y=q.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");q.select("g");y.append("g").attr("class","nv-groups");q.attr("transform","translate("+b.left+","+b.top+")");q=q.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);q.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();q.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
q.transition().style("stroke-opacity",1).style("fill-opacity",.75);q=q.selectAll("g.nv-bar").data(function(a){return a.values});q.exit().remove();y=q.enter().append("g").attr("transform",function(a,b,g){return"translate("+(e(u(a,b))+.05*e.rangeBand())+", "+k(0)+")"}).on("mouseover",function(b,g){d3.select(this).classed("hover",!0);R.elementMouseover({value:n(b,g),point:b,series:a[b.series],pos:[e(u(b,g))+e.rangeBand()*(b.series+.5)/a.length,k(n(b,g))],pointIndex:g,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,e){d3.select(this).classed("hover",!1);R.elementMouseout({value:n(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,g){R.elementClick({value:n(b,g),point:b,series:a[b.series],pos:[e(u(b,g))+e.rangeBand()*(b.series+.5)/a.length,k(n(b,g))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,g){R.elementDblClick({value:n(b,g),point:b,series:a[b.series],pos:[e(u(b,g))+e.rangeBand()*(b.series+
.5)/a.length,k(n(b,g))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});y.append("rect").attr("height",0).attr("width",.9*e.rangeBand()/a.length);A?(y.append("text").attr("text-anchor","middle"),q.select("text").text(function(a,b){return F(n(a,b))}).transition().attr("x",.9*e.rangeBand()/2).attr("y",function(a,b){return 0>n(a,b)?k(n(a,b))-k(0)+12:-4})):q.selectAll("text").remove();q.attr("class",function(a,b){return 0>n(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||B(a,b)}).style("stroke",function(a,b){return a.color||B(a,b)}).select("rect").attr("class",P).transition().attr("width",.9*e.rangeBand()/a.length);q.transition().attr("transform",function(a,b){var g=e(u(a,b))+.05*e.rangeBand(),t=0>n(a,b)?k(0):1>k(0)-k(n(a,b))?k(0)-1:k(n(a,b));return"translate("+g+", "+t+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(k(n(a,b))-k(M&&M[0]||0))||1)});e.copy();G=k.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},g=960,t=500,q=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),k=d3.scale.linear(),u=function(a){return a.x},n=function(a){return a.y},I=[0],B=v.utils.defaultColor(),A=!1,F=d3.format(",.2f"),E,M,S,D,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),P="discreteBar",G;a.dispatch=R;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return u;u=b;return a};a.y=function(b){if(!arguments.length)return n;n=b;return a};a.margin=
function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return k;k=b;
return a};a.xDomain=function(b){if(!arguments.length)return E;E=b;return a};a.yDomain=function(b){if(!arguments.length)return M;M=b;return a};a.xRange=function(b){if(!arguments.length)return S;S=b;return a};a.yRange=function(b){if(!arguments.length)return D;D=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return B;B=v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return q;q=b;return a};a.showValues=function(b){if(!arguments.length)return A;
A=b;return a};a.valueFormat=function(b){if(!arguments.length)return F;F=b;return a};a.rectClass=function(b){if(!arguments.length)return P;P=b;return a};return a};v.models.discreteBarChart=function(){function a(u){u.each(function(u){var G=d3.select(this),U=this,y=(e||parseInt(G.style("width"))||960)-q.left-q.right,C=(k||parseInt(G.style("height"))||400)-q.top-q.bottom;a.update=function(){R.beforeUpdate();G.transition().duration(P).call(a)};a.container=this;if(u&&u.length&&u.filter(function(a){return a.values.length}).length)G.selectAll(".nv-noData").remove();
else return u=G.selectAll(".nv-noData").data([D]),u.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),u.attr("x",q.left+y/2).attr("y",q.top+C/2).text(function(a){return a}),a;M=b.xScale();S=b.yScale().clamp(!0);var J=G.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),z=J.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),W=z.append("defs"),J=J.select("g");z.append("g").attr("class","nv-x nv-axis");z.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");z.append("g").attr("class","nv-barsWrap");J.attr("transform","translate("+q.left+","+q.top+")");B&&J.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");b.width(y).height(C);J.select(".nv-barsWrap").datum(u.filter(function(a){return!a.disabled})).transition().call(b);W.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");J.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",M.rangeBand()*(A?2:1)).attr("height",
16).attr("x",-M.rangeBand()/(A?1:2));n&&(g.scale(M).ticks(y/100).tickSize(-C,0),J.select(".nv-x.nv-axis").attr("transform","translate(0,"+(S.range()[0]+(b.showValues()&&0>S.domain()[0]?16:0))+")"),J.select(".nv-x.nv-axis").transition().call(g),u=J.select(".nv-x.nv-axis").selectAll("g"),A&&u.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));I&&(t.scale(S).ticks(C/36).tickSize(-y,0),J.select(".nv-y.nv-axis").transition().call(t));J.select(".nv-zeroLine line").attr("x1",
0).attr("x2",y).attr("y1",S(0)).attr("y2",S(0));R.on("tooltipShow",function(e){if(F){var k=U.parentNode,n=e.pos[0]+(k.offsetLeft||0),q=e.pos[1]+(k.offsetTop||0),u=g.tickFormat()(b.x()(e.point,e.pointIndex)),l=t.tickFormat()(b.y()(e.point,e.pointIndex)),u=E(e.series.key,u,l,e,a);v.tooltip.show([n,q],u,0>e.value?"n":"s",null,k)}})});return a}var b=v.models.discreteBar(),g=v.models.axis(),t=v.models.axis(),q={top:15,right:10,bottom:50,left:60},e=null,k=null,u=v.utils.getColor(),n=!0,I=!0,B=!1,A=!1,F=
!0,E=function(a,b,e,g,k){return"<h3>"+b+"</h3><p>"+e+"</p>"},M,S,D="No Data Available.",R=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),P=250;g.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient(B?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+q.left,a.pos[1]+q.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){F&&
v.tooltip.cleanup()});a.dispatch=R;a.discretebar=b;a.xAxis=g;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return q;q.top="undefined"!=typeof b.top?b.top:q.top;q.right="undefined"!=typeof b.right?b.right:q.right;q.bottom="undefined"!=typeof b.bottom?b.bottom:q.bottom;q.left="undefined"!=typeof b.left?b.left:q.left;return a};a.width=function(b){if(!arguments.length)return e;
e=b;return a};a.height=function(b){if(!arguments.length)return k;k=b;return a};a.color=function(e){if(!arguments.length)return u;u=v.utils.getColor(e);b.color(u);return a};a.showXAxis=function(b){if(!arguments.length)return n;n=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return B;B=b;t.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return A;A=b;return a};a.tooltips=function(b){if(!arguments.length)return F;
F=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return D;D=b;return a};a.transitionDuration=function(b){if(!arguments.length)return P;P=b;return a};return a};v.models.distribution=function(){function a(g){g.each(function(a){var g="x"==q?"y":"x",v=d3.select(this);n=n||u;a=v.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");v=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=v.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return k(a,b)});v=a.selectAll("line.nv-dist"+q).data(function(a){return a.values});v.enter().append("line").attr(q+"1",function(a,b){return n(e(a,b))}).attr(q+"2",function(a,b){return n(e(a,b))});a.exit().selectAll("line.nv-dist"+q).transition().attr(q+"1",function(a,b){return u(e(a,
b))}).attr(q+"2",function(a,b){return u(e(a,b))}).style("stroke-opacity",0).remove();v.attr("class",function(a,b){return"nv-dist"+q+" nv-dist"+q+"-"+b}).attr(g+"1",0).attr(g+"2",t);v.transition().attr(q+"1",function(a,b){return u(e(a,b))}).attr(q+"2",function(a,b){return u(e(a,b))});n=u.copy()});return a}var b={top:0,right:0,bottom:0,left:0},g=400,t=8,q="x",e=function(a){return a[q]},k=v.utils.defaultColor(),u=d3.scale.linear(),n;a.options=v.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.axis=function(b){if(!arguments.length)return q;q=b;return a};a.size=function(b){if(!arguments.length)return t;t=b;return a};a.getData=function(b){if(!arguments.length)return e;e=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return u;
u=b;return a};a.color=function(b){if(!arguments.length)return k;k=v.utils.getColor(b);return a};return a};v.models.historicalBarChart=function(){function a(U){U.each(function(y){var C=d3.select(this),J=this,z=(u||parseInt(C.style("width"))||960)-e.left-e.right,W=(n||parseInt(C.style("height"))||400)-e.top-e.bottom;a.update=function(){C.transition().duration(N).call(a)};a.container=this;R.disabled=y.map(function(a){return!!a.disabled});if(!P){var Q;P={};for(Q in R)P[Q]=R[Q]instanceof Array?R[Q].slice(0):
R[Q]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)C.selectAll(".nv-noData").remove();else return Q=C.selectAll(".nv-noData").data([G]),Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Q.attr("x",e.left+z/2).attr("y",e.top+W/2).text(function(a){return a}),a;S=b.xScale();D=b.yScale();var V=C.selectAll("g.nv-wrap.nv-historicalBarChart").data([y]);Q=V.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var K=V.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis");Q.append("g").attr("class","nv-barsWrap");Q.append("g").attr("class","nv-legendWrap");I&&(q.width(z),K.select(".nv-legendWrap").datum(y).call(q),e.top!=q.height()&&(e.top=q.height(),W=(n||parseInt(C.style("height"))||400)-e.top-e.bottom),V.select(".nv-legendWrap").attr("transform","translate(0,"+-e.top+")"));V.attr("transform","translate("+e.left+","+e.top+")");F&&K.select(".nv-y.nv-axis").attr("transform",
"translate("+z+",0)");b.width(z).height(W).color(y.map(function(a,b){return a.color||k(a,b)}).filter(function(a,b){return!y[b].disabled}));K.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);B&&(g.scale(S).tickSize(-W,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),K.select(".nv-x.nv-axis").transition().call(g));A&&(t.scale(D).ticks(W/36).tickSize(-z,0),K.select(".nv-y.nv-axis").transition().call(t));q.dispatch.on("legendClick",
function(b,e){b.disabled=!b.disabled;y.filter(function(a){return!a.disabled}).length||y.map(function(a){a.disabled=!1;V.selectAll(".nv-series").classed("disabled",!1);return a});R.disabled=y.map(function(a){return!!a.disabled});O.stateChange(R);U.transition().call(a)});q.dispatch.on("legendDblclick",function(b){y.forEach(function(a){a.disabled=!0});b.disabled=!1;R.disabled=y.map(function(a){return!!a.disabled});O.stateChange(R);a.update()});O.on("tooltipShow",function(e){if(E){var k=J.parentNode;
if(k){var l=d3.select(k).select("svg"),n=l.node()?l.attr("viewBox"):null;n&&(n=n.split(" "),l=parseInt(l.style("width"))/n[2],e.pos[0]*=l,e.pos[1]*=l)}var l=e.pos[0]+(k.offsetLeft||0),n=e.pos[1]+(k.offsetTop||0),q=g.tickFormat()(b.x()(e.point,e.pointIndex)),u=t.tickFormat()(b.y()(e.point,e.pointIndex));e=M(e.series.key,q,u,e,a);v.tooltip.show([l,n],e,null,null,k)}});O.on("changeState",function(b){"undefined"!==typeof b.disabled&&(y.forEach(function(a,e){a.disabled=b.disabled[e]}),R.disabled=b.disabled);
a.update()})});return a}var b=v.models.historicalBar(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e={top:30,right:90,bottom:50,left:90},k=v.utils.defaultColor(),u=null,n=null,I=!1,B=!0,A=!0,F=!1,E=!0,M=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},S,D,R={},P=null,G="No Data Available.",O=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N=250;g.orient("bottom").tickPadding(7);t.orient(F?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+e.left,a.pos[1]+e.top];O.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){E&&v.tooltip.cleanup()});a.dispatch=O;a.bars=b;a.legend=q;a.xAxis=g;a.yAxis=t;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=v.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return e;e.top="undefined"!=typeof b.top?b.top:e.top;e.right="undefined"!=typeof b.right?b.right:e.right;e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom;e.left="undefined"!=typeof b.left?b.left:e.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return k;k=v.utils.getColor(b);q.color(k);return a};a.showLegend=function(b){if(!arguments.length)return I;
I=b;return a};a.showXAxis=function(b){if(!arguments.length)return B;B=b;return a};a.showYAxis=function(b){if(!arguments.length)return A;A=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return F;F=b;t.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return M;M=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return P;
P=b;return a};a.noData=function(b){if(!arguments.length)return G;G=b;return a};a.transitionDuration=function(b){if(!arguments.length)return N;N=b;return a};return a};v.models.indentedTree=function(){function a(b){b.each(function(b){function e(b,g,k){d3.event.stopPropagation();if(d3.event.shiftKey&&!k)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&e(a,0,!0)}),!0;if(!v(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function g(a){return a._values&&a._values.length?A:a.values&&a.values.length?F:""}function q(a){return a._values&&a._values.length}function v(a){return(a=a.values||a._values)&&a.length}var D=1,y=d3.select(this),C=d3.layout.tree().children(function(a){return a.values}).size([t,20]);a.update=function(){y.transition().duration(600).call(a)};b[0]||(b[0]={key:n});var D=C.nodes(b[0]),J=d3.select(this).selectAll("div").data([[D]]);b=J.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
J=J.select("table").attr("width","100%").attr("class",B);if(k){var z=b.append("thead").append("tr");I.forEach(function(a){z.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=J.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");D=d3.max(D,function(a){return a.depth});C.size([t,20*D]);var W=b.selectAll("tr").data(function(a){return a.filter(function(a){return u&&!a.children?u(a):!0})},function(a,
b){return a.id||a.id||++S});W.exit().remove();W.select("img.nv-treeicon").attr("src",g).classed("folded",q);var Q=W.enter().append("tr");I.forEach(function(a,b){var k=Q.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(g(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)k.append("img").classed("nv-treeicon",!0).classed("nv-folded",q).attr("src",g).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return g(a)?
"inline-block":"none"}).on("click",e);k.each(function(e){!b&&M(e)?d3.select(this).append("a").attr("href",M).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(k.append("span").attr("class","nv-childrenCount"),W.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return u?u(a):!0}).length||a._values&&a._values.filter(function(a){return u?u(a):!0}).length||0)+")":""}))});W.order().on("click",function(a){E.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){E.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){E.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){E.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=v.utils.defaultColor(),e=Math.floor(1E4*Math.random()),k=!0,u=!1,n="No Data Available.",I=[{key:"key",label:"Name",type:"text"}],B=null,A="images/grey-plus.png",F="images/grey-minus.png",E=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),M=function(a){return a.url},S=0;a.options=v.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return q;q=v.utils.getColor(b);scatter.color(q);return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.header=function(b){if(!arguments.length)return k;k=b;return a};a.noData=
function(b){if(!arguments.length)return n;n=b;return a};a.filterZero=function(b){if(!arguments.length)return u;u=b;return a};a.columns=function(b){if(!arguments.length)return I;I=b;return a};a.tableClass=function(b){if(!arguments.length)return B;B=b;return a};a.iconOpen=function(b){if(!arguments.length)return A;A=b;return a};a.iconClose=function(b){if(!arguments.length)return F;F=b;return a};a.getUrl=function(b){if(!arguments.length)return M;M=b;return a};return a};v.models.legend=function(){function a(A){A.each(function(a){var A=
g-b.left-b.right,M=d3.select(this).selectAll("g.nv-legend").data([a]);M.enter().append("g").attr("class","nvd3 nv-legend").append("g");var S=M.select("g");M.attr("transform","translate("+b.left+","+b.top+")");var M=S.selectAll(".nv-series").data(function(a){return a}),D=M.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){B.legendMouseover(a,b)}).on("mouseout",function(a,b){B.legendMouseout(a,b)}).on("click",function(b,e){B.legendClick(b,e);n&&(I?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),B.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,e){B.legendDblclick(b,e);n&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,B.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});D.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);D.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");M.classed("disabled",function(a){return a.disabled});M.exit().remove();M.select("circle").style("fill",function(a,b){return a.color||e(a,b)}).style("stroke",function(a,b){return a.color||e(a,b)});M.select("text").text(q);if(k){var R=[];M.each(function(a,b){var e=d3.select(this).select("text"),g;try{if(g=e.getComputedTextLength(),0>=g)throw Error();}catch(k){g=v.utils.calcApproxTextWidth(e)}R.push(g+28)});for(var P=0,G=0,D=[];G<A&&P<R.length;)D[P]=
R[P],G+=R[P++];for(0===P&&(P=1);G>A&&1<P;){D=[];P--;for(G=0;G<R.length;G++)R[G]>(D[G%P]||0)&&(D[G%P]=R[G]);G=D.reduce(function(a,b,e,g){return a+b})}for(var O=[],N=A=0;A<P;A++)O[A]=N,N+=D[A];M.attr("transform",function(a,b){return"translate("+O[b%P]+","+(5+20*Math.floor(b/P))+")"});u?S.attr("transform","translate("+(g-b.right-G)+","+b.top+")"):S.attr("transform","translate(0,"+b.top+")");t=b.top+b.bottom+20*Math.ceil(R.length/P)}else{var U=5,y=5,C=0,J;M.attr("transform",function(a,e){var k=d3.select(this).select("text").node().getComputedTextLength()+
28;J=y;g<b.left+b.right+J+k&&(y=J=5,U+=20);y+=k;y>C&&(C=y);return"translate("+J+","+U+")"});S.attr("transform","translate("+(g-b.right-C)+","+b.top+")");t=b.top+b.bottom+U+15}});return a}var b={top:5,right:0,bottom:5,left:0},g=400,t=20,q=function(a){return a.key},e=v.utils.defaultColor(),k=!0,u=!0,n=!0,I=!1,B=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=B;a.options=v.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.key=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return e;e=v.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return k;
k=b;return a};a.rightAlign=function(b){if(!arguments.length)return u;u=b;return a};a.updateState=function(b){if(!arguments.length)return n;n=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return I;I=b;return a};return a};v.models.line=function(){function a(D){D.each(function(a){var D=t-g.left-g.right,G=q-g.top-g.bottom,O=d3.select(this);A=b.xScale();F=b.yScale();M=M||A;S=S||F;a=O.selectAll("g.nv-wrap.nv-line").data([a]);var N=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
O=N.append("defs"),U=N.append("g"),N=a.select("g");U.append("g").attr("class","nv-groups");U.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+g.left+","+g.top+")");b.width(D).height(G);U=a.select(".nv-scatterWrap");U.transition().call(b);O.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",D).attr("height",0<G?G:0);N.attr("clip-path",B?"url(#nv-edge-clip-"+b.id()+")":"");U.attr("clip-path",B?"url(#nv-edge-clip-"+
b.id()+")":"");D=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});D.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);D.exit().remove();D.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return e(a,b)}).style("stroke",function(a,b){return e(a,b)});D.transition().style("stroke-opacity",1).style("fill-opacity",.5);G=D.selectAll("path.nv-area").data(function(a){return I(a)?
[a]:[]});G.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(n).x(function(a,b){return v.utils.NaNtoZero(M(k(a,b)))}).y0(function(a,b){return v.utils.NaNtoZero(S(u(a,b)))}).y1(function(a,b){return S(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,[a.values])});D.exit().selectAll("path.nv-area").remove();G.transition().attr("d",function(a){return d3.svg.area().interpolate(E).defined(n).x(function(a,b){return v.utils.NaNtoZero(A(k(a,
b)))}).y0(function(a,b){return v.utils.NaNtoZero(F(u(a,b)))}).y1(function(a,b){return F(0>=F.domain()[0]?0<=F.domain()[1]?0:F.domain()[1]:F.domain()[0])}).apply(this,[a.values])});D=D.selectAll("path.nv-line").data(function(a){return[a.values]});D.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(n).x(function(a,b){return v.utils.NaNtoZero(M(k(a,b)))}).y(function(a,b){return v.utils.NaNtoZero(S(u(a,b)))}));D.transition().attr("d",d3.svg.line().interpolate(E).defined(n).x(function(a,
b){return v.utils.NaNtoZero(A(k(a,b)))}).y(function(a,b){return v.utils.NaNtoZero(F(u(a,b)))}));M=A.copy();S=F.copy()});return a}var b=v.models.scatter(),g={top:0,right:0,bottom:0,left:0},t=960,q=500,e=v.utils.defaultColor(),k=function(a){return a.x},u=function(a){return a.y},n=function(a,b){return!isNaN(u(a,b))&&null!==u(a,b)},I=function(a){return a.area},B=!1,A,F,E="linear";b.size(16).sizeDomain([16,256]);var M,S;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return t;
t=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.x=function(e){if(!arguments.length)return k;k=e;b.x(e);return a};a.y=function(e){if(!arguments.length)return u;u=e;b.y(e);return a};a.clipEdge=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(g){if(!arguments.length)return e;e=v.utils.getColor(g);b.color(e);return a};a.interpolate=function(b){if(!arguments.length)return E;E=b;return a};a.defined=function(b){if(!arguments.length)return n;n=b;return a};
a.isArea=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};return a};v.models.lineChart=function(){function a(C){C.each(function(C){var z=d3.select(this),W=this,Q=(n||parseInt(z.style("width"))||960)-k.left-k.right,V=(I||parseInt(z.style("height"))||400)-k.top-k.bottom;a.update=function(){z.transition().duration(y).call(a)};a.container=this;G.disabled=C.map(function(a){return!!a.disabled});if(!O){var K;O={};for(K in G)O[K]=G[K]instanceof Array?G[K].slice(0):G[K]}if(C&&C.length&&
C.filter(function(a){return a.values.length}).length)z.selectAll(".nv-noData").remove();else return K=z.selectAll(".nv-noData").data([N]),K.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),K.attr("x",k.left+Q/2).attr("y",k.top+V/2).text(function(a){return a}),a;R=b.xScale();P=b.yScale();K=z.selectAll("g.nv-wrap.nv-lineChart").data([C]);var ca=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),X=K.select("g");ca.append("rect").style("opacity",
0);ca.append("g").attr("class","nv-x nv-axis");ca.append("g").attr("class","nv-y nv-axis");ca.append("g").attr("class","nv-linesWrap");ca.append("g").attr("class","nv-legendWrap");ca.append("g").attr("class","nv-interactive");X.select("rect").attr("width",Q).attr("height",0<V?V:0);B&&(q.width(Q),X.select(".nv-legendWrap").datum(C).call(q),k.top!=q.height()&&(k.top=q.height(),V=(I||parseInt(z.style("height"))||400)-k.top-k.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-k.top+")"));
K.attr("transform","translate("+k.left+","+k.top+")");E&&X.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)");M&&(e.width(Q).height(V).margin({left:k.left,top:k.top}).svgContainer(z).xScale(R),K.select(".nv-interactive").call(e));b.width(Q).height(V).color(C.map(function(a,b){return a.color||u(a,b)}).filter(function(a,b){return!C[b].disabled}));X.select(".nv-linesWrap").datum(C.filter(function(a){return!a.disabled})).transition().call(b);A&&(g.scale(R).ticks(Q/100).tickSize(-V,0),X.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+P.range()[0]+")"),X.select(".nv-x.nv-axis").transition().call(g));F&&(t.scale(P).ticks(V/36).tickSize(-Q,0),X.select(".nv-y.nv-axis").transition().call(t));q.dispatch.on("stateChange",function(b){G=b;U.stateChange(G);a.update()});e.dispatch.on("elementMousemove",function(l){b.clearHighlights();var n,q,y,z=[];C.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(e,g){q=v.interactiveBisect(e.values,l.pointXValue,a.x());b.highlightPoint(g,q,!0);var k=e.values[q];
"undefined"!==typeof k&&("undefined"===typeof n&&(n=k),"undefined"===typeof y&&(y=a.xScale()(a.x()(k,q))),z.push({key:e.key,value:a.y()(k,q),color:u(e,e.seriesIndex)}))});if(2<z.length){var K=a.yScale().invert(l.mouseY),D=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),K=v.nearestValueIndex(z.map(function(a){return a.value}),K,D);null!==K&&(z[K].highlight=!0)}K=g.tickFormat()(a.x()(n,q));e.tooltip.position({left:y+k.left,top:l.mouseY+k.top}).chartContainer(W.parentNode).enabled(S).valueFormatter(function(a,
b){return t.tickFormat()(a)}).data({value:K,series:z})();e.renderGuideLine(y)});e.dispatch.on("elementMouseout",function(a){U.tooltipHide();b.clearHighlights()});U.on("tooltipShow",function(e){if(S){var k=W.parentNode,n=e.pos[0]+(k.offsetLeft||0),q=e.pos[1]+(k.offsetTop||0),u=g.tickFormat()(b.x()(e.point,e.pointIndex)),y=t.tickFormat()(b.y()(e.point,e.pointIndex));e=D(e.series.key,u,y,e,a);v.tooltip.show([n,q],e,null,null,k)}});U.on("changeState",function(b){"undefined"!==typeof b.disabled&&C.length===
b.disabled.length&&(C.forEach(function(a,e){a.disabled=b.disabled[e]}),G.disabled=b.disabled);a.update()})});return a}var b=v.models.line(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e=v.interactiveGuideline(),k={top:30,right:20,bottom:50,left:60},u=v.utils.defaultColor(),n=null,I=null,B=!0,A=!0,F=!0,E=!1,M=!1,S=!0,D=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},R,P,G={},O=null,N="No Data Available.",U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
y=250;g.orient("bottom").tickPadding(7);t.orient(E?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+k.left,a.pos[1]+k.top];U.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a)});U.on("tooltipHide",function(){S&&v.tooltip.cleanup()});a.dispatch=U;a.lines=b;a.legend=q;a.xAxis=g;a.yAxis=t;a.interactiveLayer=e;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=
function(b){if(!arguments.length)return u;u=v.utils.getColor(b);q.color(u);return a};a.showLegend=function(b){if(!arguments.length)return B;B=b;return a};a.showXAxis=function(b){if(!arguments.length)return A;A=b;return a};a.showYAxis=function(b){if(!arguments.length)return F;F=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return E;E=b;t.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return M;M=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return S;S=b;return a};a.tooltipContent=function(b){if(!arguments.length)return D;D=b;return a};a.state=function(b){if(!arguments.length)return G;G=b;return a};a.defaultState=function(b){if(!arguments.length)return O;O=b;return a};a.noData=function(b){if(!arguments.length)return N;N=b;return a};a.transitionDuration=function(b){if(!arguments.length)return y;y=b;return a};return a};v.models.linePlusBarChart=function(){function a(y){y.each(function(y){var J=
d3.select(this),z=this,B=(n||parseInt(J.style("width"))||960)-u.left-u.right,Q=(I||parseInt(J.style("height"))||400)-u.top-u.bottom;a.update=function(){J.transition().call(a)};G.disabled=y.map(function(a){return!!a.disabled});if(!O){var A;O={};for(A in G)O[A]=G[A]instanceof Array?G[A].slice(0):G[A]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return A=J.selectAll(".nv-noData").data([N]),A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),A.attr("x",u.left+B/2).attr("y",u.top+Q/2).text(function(a){return a}),a;A=y.filter(function(a){return!a.disabled&&a.bar});var K=y.filter(function(a){return!a.bar});D=K.filter(function(a){return!a.disabled}).length&&K.filter(function(a){return!a.disabled})[0].values.length?b.xScale():g.xScale();R=g.yScale();P=b.yScale();var ca=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([y]),X=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
l=ca.select("g");X.append("g").attr("class","nv-x nv-axis");X.append("g").attr("class","nv-y1 nv-axis");X.append("g").attr("class","nv-y2 nv-axis");X.append("g").attr("class","nv-barsWrap");X.append("g").attr("class","nv-linesWrap");X.append("g").attr("class","nv-legendWrap");E&&(k.width(B/2),l.select(".nv-legendWrap").datum(y.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(k),u.top!=k.height()&&(u.top=
k.height(),Q=(I||parseInt(J.style("height"))||400)-u.top-u.bottom),l.select(".nv-legendWrap").attr("transform","translate("+B/2+","+-u.top+")"));ca.attr("transform","translate("+u.left+","+u.top+")");b.width(B).height(Q).color(y.map(function(a,b){return a.color||F(a,b)}).filter(function(a,b){return!y[b].disabled&&!y[b].bar}));g.width(B).height(Q).color(y.map(function(a,b){return a.color||F(a,b)}).filter(function(a,b){return!y[b].disabled&&y[b].bar}));ca=l.select(".nv-barsWrap").datum(A.length?A:[{values:[]}]);
X=l.select(".nv-linesWrap").datum(K[0]&&!K[0].disabled?K:[{values:[]}]);d3.transition(ca).call(g);d3.transition(X).call(b);t.scale(D).ticks(B/100).tickSize(-Q,0);l.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")");d3.transition(l.select(".nv-x.nv-axis")).call(t);q.scale(R).ticks(Q/36).tickSize(-B,0);d3.transition(l.select(".nv-y1.nv-axis")).style("opacity",A.length?1:0).call(q);e.scale(P).ticks(Q/36).tickSize(A.length?0:-B,0);l.select(".nv-y2.nv-axis").style("opacity",K.length?
1:0).attr("transform","translate("+B+",0)");d3.transition(l.select(".nv-y2.nv-axis")).call(e);k.dispatch.on("stateChange",function(b){G=b;U.stateChange(G);a.update()});U.on("tooltipShow",function(l){if(M){var g=z.parentNode,k=l.pos[0]+(g.offsetLeft||0),n=l.pos[1]+(g.offsetTop||0),u=t.tickFormat()(b.x()(l.point,l.pointIndex)),y=(l.series.bar?q:e).tickFormat()(b.y()(l.point,l.pointIndex)),u=S(l.series.key,u,y,l,a);v.tooltip.show([k,n],u,0>l.value?"n":"s",null,g)}});U.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(y.forEach(function(a,e){a.disabled=b.disabled[e]}),G.disabled=b.disabled);a.update()})});return a}var b=v.models.line(),g=v.models.historicalBar(),t=v.models.axis(),q=v.models.axis(),e=v.models.axis(),k=v.models.legend(),u={top:30,right:60,bottom:50,left:60},n=null,I=null,B=function(a){return a.x},A=function(a){return a.y},F=v.utils.defaultColor(),E=!0,M=!0,S=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},D,R,P,G={},O=null,N="No Data Available.",U=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");g.padData(!0);b.clipEdge(!1).padData(!0);t.orient("bottom").tickPadding(7).highlightZero(!1);q.orient("left");e.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];U.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a)});g.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];U.tooltipShow(a)});g.dispatch.on("elementMouseout.tooltip",
function(a){U.tooltipHide(a)});U.on("tooltipHide",function(){M&&v.tooltip.cleanup()});a.dispatch=U;a.legend=k;a.lines=b;a.bars=g;a.xAxis=t;a.y1Axis=q;a.y2Axis=e;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=v.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return B;B=e;b.x(e);g.x(e);return a};a.y=function(e){if(!arguments.length)return A;A=e;b.y(e);g.y(e);return a};a.margin=function(b){if(!arguments.length)return u;u.top="undefined"!=typeof b.top?b.top:u.top;
u.right="undefined"!=typeof b.right?b.right:u.right;u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom;u.left="undefined"!=typeof b.left?b.left:u.left;return a};a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return F;F=v.utils.getColor(b);k.color(F);return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.tooltips=function(b){if(!arguments.length)return M;
M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return G;G=b;return a};a.defaultState=function(b){if(!arguments.length)return O;O=b;return a};a.noData=function(b){if(!arguments.length)return N;N=b;return a};return a};v.models.lineWithFocusChart=function(){function a(z){z.each(function(z){function Q(){n.empty()||n.extent(O);ha.data([n.empty()?R.domain():O]).each(function(a,b){var e=R(a[0])-S.range()[0],l=S.range()[1]-R(a[1]);
d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",R(a[1])).attr("width",0>l?0:l)})}function V(){O=n.empty()?null:n.extent();var a=n.empty()?R.domain():n.extent();1>=Math.abs(a[0]-a[1])||(C.brush({extent:a,brush:n}),Q(),ia.select(".nv-focus .nv-linesWrap").datum(z.filter(function(a){return!a.disabled}).map(function(e,l){return{key:e.key,values:e.values.filter(function(e,l){return b.x()(e,l)>=a[0]&&b.x()(e,l)<=a[1]})}})).transition().duration(J).call(b),
ia.select(".nv-focus .nv-x.nv-axis").transition().duration(J).call(t),ia.select(".nv-focus .nv-y.nv-axis").transition().duration(J).call(q))}var K=d3.select(this),ca=this,X=(F||parseInt(K.style("width"))||960)-I.left-I.right,l=(E||parseInt(K.style("height"))||400)-I.top-I.bottom-M,L=M-B.top-B.bottom;a.update=function(){K.transition().duration(J).call(a)};a.container=this;if(z&&z.length&&z.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else{var ea=K.selectAll(".nv-noData").data([y]);
ea.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ea.attr("x",I.left+X/2).attr("y",I.top+l/2).text(function(a){return a});return a}S=b.xScale();D=b.yScale();R=g.xScale();P=g.yScale();var ea=K.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([z]),H=ea.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ia=ea.select("g");H.append("g").attr("class","nv-legendWrap");var Y=H.append("g").attr("class","nv-focus");Y.append("g").attr("class",
"nv-x nv-axis");Y.append("g").attr("class","nv-y nv-axis");Y.append("g").attr("class","nv-linesWrap");H=H.append("g").attr("class","nv-context");H.append("g").attr("class","nv-x nv-axis");H.append("g").attr("class","nv-y nv-axis");H.append("g").attr("class","nv-linesWrap");H.append("g").attr("class","nv-brushBackground");H.append("g").attr("class","nv-x nv-brush");G&&(u.width(X),ia.select(".nv-legendWrap").datum(z).call(u),I.top!=u.height()&&(I.top=u.height(),l=(E||parseInt(K.style("height"))||400)-
I.top-I.bottom-M),ia.select(".nv-legendWrap").attr("transform","translate(0,"+-I.top+")"));ea.attr("transform","translate("+I.left+","+I.top+")");b.width(X).height(l).color(z.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!z[b].disabled}));g.defined(b.defined()).width(X).height(L).color(z.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!z[b].disabled}));ia.select(".nv-context").attr("transform","translate(0,"+(l+I.bottom+B.top)+")");ea=ia.select(".nv-context .nv-linesWrap").datum(z.filter(function(a){return!a.disabled}));
d3.transition(ea).call(g);t.scale(S).ticks(X/100).tickSize(-l,0);q.scale(D).ticks(l/36).tickSize(-X,0);ia.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+l+")");n.x(R).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);V();a.transitionDuration(b)});O&&n.extent(O);var ha=ia.select(".nv-brushBackground").selectAll("g").data([O||n.extent()]),l=ha.enter().append("g");l.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",L);l.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",L);l=ia.select(".nv-x.nv-brush").call(n);l.selectAll("rect").attr("height",L);l.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=L/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});V();e.scale(R).ticks(X/100).tickSize(-L,0);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+
")");d3.transition(ia.select(".nv-context .nv-x.nv-axis")).call(e);k.scale(P).ticks(L/36).tickSize(-X,0);d3.transition(ia.select(".nv-context .nv-y.nv-axis")).call(k);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");u.dispatch.on("stateChange",function(b){a.update()});C.on("tooltipShow",function(e){if(N){var l=ca.parentNode,g=e.pos[0]+(l.offsetLeft||0),k=e.pos[1]+(l.offsetTop||0),n=t.tickFormat()(b.x()(e.point,e.pointIndex)),u=q.tickFormat()(b.y()(e.point,e.pointIndex));
e=U(e.series.key,n,u,e,a);v.tooltip.show([g,k],e,null,null,l)}})});return a}var b=v.models.line(),g=v.models.line(),t=v.models.axis(),q=v.models.axis(),e=v.models.axis(),k=v.models.axis(),u=v.models.legend(),n=d3.svg.brush(),I={top:30,right:30,bottom:30,left:60},B={top:0,right:30,bottom:20,left:60},A=v.utils.defaultColor(),F=null,E=null,M=100,S,D,R,P,G=!0,O=null,N=!0,U=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},y="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide",
"brush"),J=250;b.clipEdge(!0);g.interactive(!1);t.orient("bottom").tickPadding(5);q.orient("left");e.orient("bottom").tickPadding(5);k.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+I.left,a.pos[1]+I.top];C.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a)});C.on("tooltipHide",function(){N&&v.tooltip.cleanup()});a.dispatch=C;a.legend=u;a.lines=b;a.lines2=g;a.xAxis=t;a.yAxis=q;a.x2Axis=e;a.y2Axis=k;d3.rebind(a,b,"defined","isArea",
"size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=v.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return b.x;b.x(e);g.x(e);return a};a.y=function(e){if(!arguments.length)return b.y;b.y(e);g.y(e);return a};a.margin=function(b){if(!arguments.length)return I;I.top="undefined"!=typeof b.top?b.top:I.top;I.right="undefined"!=typeof b.right?b.right:I.right;I.bottom="undefined"!=typeof b.bottom?b.bottom:I.bottom;I.left="undefined"!=
typeof b.left?b.left:I.left;return a};a.margin2=function(b){if(!arguments.length)return B;B=b;return a};a.width=function(b){if(!arguments.length)return F;F=b;return a};a.height=function(b){if(!arguments.length)return E;E=b;return a};a.height2=function(b){if(!arguments.length)return M;M=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);u.color(A);return a};a.showLegend=function(b){if(!arguments.length)return G;G=b;return a};a.tooltips=function(b){if(!arguments.length)return N;
N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return U;U=b;return a};a.interpolate=function(e){if(!arguments.length)return b.interpolate();b.interpolate(e);g.interpolate(e);return a};a.noData=function(b){if(!arguments.length)return y;y=b;return a};a.xTickFormat=function(b){if(!arguments.length)return t.tickFormat();t.tickFormat(b);e.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return q.tickFormat();q.tickFormat(b);k.tickFormat(b);return a};a.brushExtent=
function(b){if(!arguments.length)return O;O=b;return a};a.transitionDuration=function(b){if(!arguments.length)return J;J=b;return a};return a};v.models.linePlusBarWithFocusChart=function(){function a(l){l.each(function(l){function ea(){F.empty()||F.extent(U);Ea.data([F.empty()?z.domain():U]).each(function(a,b){var e=z(a[0])-z.range()[0],l=z.range()[1]-z(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",z(a[1])).attr("width",0>l?0:l)})}function H(){U=
F.empty()?null:F.extent();N=F.empty()?z.domain():F.extent();X.brush({extent:N,brush:F});ea();t.width(ha).height(ja).color(l.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!l[b].disabled&&l[b].bar}));b.width(ha).height(ja).color(l.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!l[b].disabled&&!l[b].bar}));var a=ta.select(".nv-focus .nv-barsWrap").datum(na.length?na.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return t.x()(a,b)>=
N[0]&&t.x()(a,b)<=N[1]})}}):[{values:[]}]),g=ta.select(".nv-focus .nv-linesWrap").datum(ga[0].disabled?[{values:[]}]:ga.map(function(a,e){return{key:a.key,values:a.values.filter(function(a,e){return b.x()(a,e)>=N[0]&&b.x()(a,e)<=N[1]})}}));J=na.length?t.xScale():b.xScale();e.scale(J).ticks(ha/100).tickSize(-ja,0);e.domain([Math.ceil(N[0]),Math.floor(N[1])]);ta.select(".nv-x.nv-axis").transition().duration(0).call(e);a.transition().duration(0).call(t);g.transition().duration(0).call(b);ta.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+W.range()[0]+")");u.scale(W).ticks(ja/36).tickSize(-ha,0);ta.select(".nv-focus .nv-y1.nv-axis").style("opacity",na.length?1:0);n.scale(Q).ticks(ja/36).tickSize(na.length?0:-ha,0);ta.select(".nv-focus .nv-y2.nv-axis").style("opacity",ga.length?1:0).attr("transform","translate("+J.range()[1]+",0)");ta.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(u);ta.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(n)}var ia=d3.select(this),Y=this,ha=(S||parseInt(ia.style("width"))||
960)-E.left-E.right,ja=(D||parseInt(ia.style("height"))||400)-E.top-E.bottom-100,da=100-M.top-M.bottom;a.update=function(){ia.transition().duration(0).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.length}).length)ia.selectAll(".nv-noData").remove();else{var Z=ia.selectAll(".nv-noData").data([ca]);Z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");Z.attr("x",E.left+ha/2).attr("y",E.top+ja/2).text(function(a){return a});
return a}var na=l.filter(function(a){return!a.disabled&&a.bar}),ga=l.filter(function(a){return!a.bar});J=t.xScale();z=k.scale();W=t.yScale();Q=b.yScale();V=q.yScale();K=g.yScale();var Z=l.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:R(a,b),y:P(a,b)}})}),oa=l.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:R(a,b),y:P(a,b)}})});J.range([0,ha]);z.domain(d3.extent(d3.merge(Z.concat(oa)),
function(a){return a.x})).range([0,ha]);var Z=ia.selectAll("g.nv-wrap.nv-linePlusBar").data([l]),oa=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ta=Z.select("g");oa.append("g").attr("class","nv-legendWrap");var Da=oa.append("g").attr("class","nv-focus");Da.append("g").attr("class","nv-x nv-axis");Da.append("g").attr("class","nv-y1 nv-axis");Da.append("g").attr("class","nv-y2 nv-axis");Da.append("g").attr("class","nv-barsWrap");Da.append("g").attr("class","nv-linesWrap");
oa=oa.append("g").attr("class","nv-context");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y1 nv-axis");oa.append("g").attr("class","nv-y2 nv-axis");oa.append("g").attr("class","nv-barsWrap");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-brushBackground");oa.append("g").attr("class","nv-x nv-brush");O&&(A.width(ha/2),ta.select(".nv-legendWrap").datum(l.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(A),E.top!=A.height()&&(E.top=A.height(),ja=(D||parseInt(ia.style("height"))||400)-E.top-E.bottom-100),ta.select(".nv-legendWrap").attr("transform","translate("+ha/2+","+-E.top+")"));Z.attr("transform","translate("+E.left+","+E.top+")");q.width(ha).height(da).color(l.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!l[b].disabled&&l[b].bar}));g.width(ha).height(da).color(l.map(function(a,b){return a.color||G(a,b)}).filter(function(a,
b){return!l[b].disabled&&!l[b].bar}));Z=ta.select(".nv-context .nv-barsWrap").datum(na.length?na:[{values:[]}]);oa=ta.select(".nv-context .nv-linesWrap").datum(ga[0].disabled?[{values:[]}]:ga);ta.select(".nv-context").attr("transform","translate(0,"+(ja+E.bottom+M.top)+")");Z.transition().call(q);oa.transition().call(g);F.x(z).on("brush",H);U&&F.extent(U);var Ea=ta.select(".nv-brushBackground").selectAll("g").data([U||F.extent()]),Z=Ea.enter().append("g");Z.append("rect").attr("class","left").attr("x",
0).attr("y",0).attr("height",da);Z.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",da);Z=ta.select(".nv-x.nv-brush").call(F);Z.selectAll("rect").attr("height",da);Z.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,e=da/3;return"M"+.5*b+","+e+"A6,6 0 0 "+a+" "+6.5*b+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*e+"ZM"+2.5*b+","+(e+8)+"V"+(2*e-8)+"M"+4.5*b+","+(e+8)+"V"+(2*e-8)});k.ticks(ha/100).tickSize(-da,0);ta.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");ta.select(".nv-context .nv-x.nv-axis").transition().call(k);I.scale(V).ticks(da/36).tickSize(-ha,0);ta.select(".nv-context .nv-y1.nv-axis").style("opacity",na.length?1:0).attr("transform","translate(0,"+z.range()[0]+")");ta.select(".nv-context .nv-y1.nv-axis").transition().call(I);B.scale(K).ticks(da/36).tickSize(na.length?0:-ha,0);ta.select(".nv-context .nv-y2.nv-axis").style("opacity",ga.length?1:0).attr("transform","translate("+z.range()[1]+",0)");ta.select(".nv-context .nv-y2.nv-axis").transition().call(B);
A.dispatch.on("stateChange",function(b){a.update()});X.on("tooltipShow",function(l){if(y){var g=Y.parentNode;N&&(l.pointIndex+=Math.ceil(N[0]));var k=l.pos[0]+(g.offsetLeft||0),t=l.pos[1]+(g.offsetTop||0),q=e.tickFormat()(b.x()(l.point,l.pointIndex)),L=(l.series.bar?u:n).tickFormat()(b.y()(l.point,l.pointIndex)),q=C(l.series.key,q,L,l,a);v.tooltip.show([k,t],q,0>l.value?"n":"s",null,g)}});H()});return a}var b=v.models.line(),g=v.models.line(),t=v.models.historicalBar(),q=v.models.historicalBar(),
e=v.models.axis(),k=v.models.axis(),u=v.models.axis(),n=v.models.axis(),I=v.models.axis(),B=v.models.axis(),A=v.models.legend(),F=d3.svg.brush(),E={top:30,right:30,bottom:30,left:60},M={top:0,right:30,bottom:20,left:60},S=null,D=null,R=function(a){return a.x},P=function(a){return a.y},G=v.utils.defaultColor(),O=!0,N,U=null,y=!0,C=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},J,z,W,Q,V,K,ca="No Data Available.",X=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);g.interactive(!1);
e.orient("bottom").tickPadding(5);u.orient("left");n.orient("right");k.orient("bottom").tickPadding(5);I.orient("left");B.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];X.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){X.tooltipHide(a)});t.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];X.tooltipShow(a)});t.dispatch.on("elementMouseout.tooltip",function(a){X.tooltipHide(a)});
X.on("tooltipHide",function(){y&&v.tooltip.cleanup()});a.dispatch=X;a.legend=A;a.lines=b;a.lines2=g;a.bars=t;a.bars2=q;a.xAxis=e;a.x2Axis=k;a.y1Axis=u;a.y2Axis=n;a.y3Axis=I;a.y4Axis=B;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=v.utils.optionsFunc.bind(a);a.x=function(e){if(!arguments.length)return R;R=e;b.x(e);t.x(e);return a};a.y=function(e){if(!arguments.length)return P;P=e;b.y(e);t.y(e);return a};a.margin=function(b){if(!arguments.length)return E;E.top="undefined"!=typeof b.top?
b.top:E.top;E.right="undefined"!=typeof b.right?b.right:E.right;E.bottom="undefined"!=typeof b.bottom?b.bottom:E.bottom;E.left="undefined"!=typeof b.left?b.left:E.left;return a};a.width=function(b){if(!arguments.length)return S;S=b;return a};a.height=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return G;G=v.utils.getColor(b);A.color(G);return a};a.showLegend=function(b){if(!arguments.length)return O;O=b;return a};a.tooltips=function(b){if(!arguments.length)return y;
y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.noData=function(b){if(!arguments.length)return ca;ca=b;return a};a.brushExtent=function(b){if(!arguments.length)return U;U=b;return a};return a};v.models.multiBar=function(){function a(v){v.each(function(a){var v=g-b.left-b.right,J=t-b.top-b.bottom,V=d3.select(this);M&&a.length&&(M=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);A&&(a=d3.layout.stack().offset(F).values(function(a){return a.values}).y(n)(!a.length&&
M?M:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});A&&a[0].values.map(function(b,e){var g=0,k=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=k,k-=a.size):(a.y1=a.size+g,g+=a.size)})});var K=P&&G?[]:a.map(function(a){return a.values.map(function(a,b){return{x:u(a,b),y:n(a,b),y0:a.y0,y1:a.y1}})});q.domain(P||d3.merge(K).map(function(a){return a.x})).rangeBands(O||[0,v],U);e.domain(G||d3.extent(d3.merge(K).map(function(a){return A?0<a.y?a.y1:a.y1+a.y:a.y}).concat(I))).range(N||
[J,0]);q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+.01*q.domain()[1]]):q.domain([-1,1]));e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]+.01*e.domain()[0],e.domain()[1]-.01*e.domain()[1]]):e.domain([-1,1]));C=C||e;var V=V.selectAll("g.nv-wrap.nv-multibar").data([a]),ca=V.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),K=ca.append("defs"),ca=ca.append("g"),X=V.select("g");ca.append("g").attr("class","nv-groups");
V.attr("transform","translate("+b.left+","+b.top+")");K.append("clipPath").attr("id","nv-edge-clip-"+k).append("rect");V.select("#nv-edge-clip-"+k+" rect").attr("width",v).attr("height",J);X.attr("clip-path",B?"url(#nv-edge-clip-"+k+")":"");v=V.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});v.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);v.exit().transition().selectAll("rect.nv-bar").delay(function(b,e){return e*R/a[0].values.length}).attr("y",
function(a){return A?C(a.y0):C(0)}).attr("height",0).remove();v.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return E(a,b)}).style("stroke",function(a,b){return E(a,b)});v.transition().style("stroke-opacity",1).style("fill-opacity",.75);v=v.selectAll("rect.nv-bar").data(function(b){return M&&!a.length?M.values:b.values});v.exit().remove();v.enter().append("rect").attr("class",function(a,b){return 0>n(a,b)?"nv-bar negative":
"nv-bar positive"}).attr("x",function(b,e,g){return A?0:g*q.rangeBand()/a.length}).attr("y",function(a){return C(A?a.y0:0)}).attr("height",0).attr("width",q.rangeBand()/(A?1:a.length)).attr("transform",function(a,b){return"translate("+q(u(a,b))+",0)"});v.style("fill",function(a,b,e){return E(a,e,b)}).style("stroke",function(a,b,e){return E(a,e,b)}).on("mouseover",function(b,g){d3.select(this).classed("hover",!0);y.elementMouseover({value:n(b,g),point:b,series:a[b.series],pos:[q(u(b,g))+q.rangeBand()*
(A?a.length/2:b.series+.5)/a.length,e(n(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);y.elementMouseout({value:n(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,g){y.elementClick({value:n(b,g),point:b,series:a[b.series],pos:[q(u(b,g))+q.rangeBand()*(A?a.length/2:b.series+.5)/a.length,e(n(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,g){y.elementDblClick({value:n(b,g),point:b,series:a[b.series],pos:[q(u(b,g))+q.rangeBand()*(A?a.length/2:b.series+.5)/a.length,e(n(b,g)+(A?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});v.attr("class",function(a,b){return 0>n(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+q(u(a,b))+",0)"});S&&(D||(D=a.map(function(){return!0})),v.style("fill",function(a,b,e){return d3.rgb(S(a,b)).darker(D.map(function(a,
b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(S(a,b)).darker(D.map(function(a,b){return b}).filter(function(a,b){return!D[b]})[e]).toString()}));A?v.transition().delay(function(b,e){return e*R/a[0].values.length}).attr("y",function(a,b){return e(A?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(e(a.y+(A?a.y0:0))-e(A?a.y0:0)),1)}).attr("x",function(b,e){return A?0:b.series*q.rangeBand()/a.length}).attr("width",q.rangeBand()/
(A?1:a.length)):v.transition().delay(function(b,e){return e*R/a[0].values.length}).attr("x",function(b,e){return b.series*q.rangeBand()/a.length}).attr("width",q.rangeBand()/a.length).attr("y",function(a,b){return 0>n(a,b)?e(0):1>e(0)-e(n(a,b))?e(0)-1:e(n(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(e(n(a,b))-e(0)),1)||0});q.copy();C=e.copy()});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=d3.scale.ordinal(),e=d3.scale.linear(),k=Math.floor(1E4*Math.random()),u=function(a){return a.x},
n=function(a){return a.y},I=[0],B=!0,A=!1,F="zero",E=v.utils.defaultColor(),M=!1,S=null,D,R=1200,P,G,O,N,U=.1,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),C;a.dispatch=y;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return u;u=b;return a};a.y=function(b){if(!arguments.length)return n;n=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?
e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return q;q=b;return a};a.yScale=function(b){if(!arguments.length)return e;e=b;return a};a.xDomain=function(b){if(!arguments.length)return P;P=b;return a};a.yDomain=function(b){if(!arguments.length)return G;
G=b;return a};a.xRange=function(b){if(!arguments.length)return O;O=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return A;A=b;return a};a.stackOffset=function(b){if(!arguments.length)return F;F=b;return a};a.clipEdge=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return E;E=v.utils.getColor(b);return a};a.barColor=
function(b){if(!arguments.length)return S;S=v.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return D;D=b;return a};a.id=function(b){if(!arguments.length)return k;k=b;return a};a.hideable=function(b){if(!arguments.length)return M;M=b;return a};a.delay=function(b){if(!arguments.length)return R;R=b;return a};a.groupSpacing=function(b){if(!arguments.length)return U;U=b;return a};return a};v.models.multiBarChart=function(){function a(W){W.each(function(Q){var W=d3.select(this),
K=this,ca=(u||parseInt(W.style("width"))||960)-k.left-k.right,X=(n||parseInt(W.style("height"))||400)-k.top-k.bottom;a.update=function(){W.transition().duration(z).call(a)};a.container=this;U.disabled=Q.map(function(a){return!!a.disabled});if(!y){var l;y={};for(l in U)y[l]=U[l]instanceof Array?U[l].slice(0):U[l]}if(Q&&Q.length&&Q.filter(function(a){return a.values.length}).length)W.selectAll(".nv-noData").remove();else return l=W.selectAll(".nv-noData").data([C]),l.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",k.left+ca/2).attr("y",k.top+X/2).text(function(a){return a}),a;O=b.xScale();N=b.yScale();var L=W.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([Q]),ea=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");l=L.select("g");ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y nv-axis");ea.append("g").attr("class","nv-barsWrap");ea.append("g").attr("class","nv-legendWrap");
ea.append("g").attr("class","nv-controlsWrap");A&&(q.width(ca-(B?180:0)),b.barColor()&&Q.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),l.select(".nv-legendWrap").datum(Q).call(q),k.top!=q.height()&&(k.top=q.height(),X=(n||parseInt(W.style("height"))||400)-k.top-k.bottom),l.select(".nv-legendWrap").attr("transform","translate("+(B?180:0)+","+-k.top+")"));if(B){var H=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];e.width(B?180:0).color(["#444",
"#444","#444"]);l.select(".nv-controlsWrap").datum(H).attr("transform","translate(0,"+-k.top+")").call(e)}L.attr("transform","translate("+k.left+","+k.top+")");M&&l.select(".nv-y.nv-axis").attr("transform","translate("+ca+",0)");b.disabled(Q.map(function(a){return a.disabled})).width(ca).height(X).color(Q.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!Q[b].disabled}));l.select(".nv-barsWrap").datum(Q.filter(function(a){return!a.disabled})).transition().call(b);if(F){g.scale(O).ticks(ca/
100).tickSize(-X,0);l.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");l.select(".nv-x.nv-axis").transition().call(g);L=l.select(".nv-x.nv-axis > g").selectAll("g");L.selectAll("line, text").style("opacity",1);if(D){L.selectAll("text").attr("transform",function(a,b,e){return"translate(0,"+(0==e%2?5:17)+")"});var ia=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;l.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+
(0===b||0!==ia%2?17:5)+")"})}S&&L.filter(function(a,b){return 0!==b%Math.ceil(Q[0].values.length/(ca/100))}).selectAll("text, line").style("opacity",0);R&&L.selectAll(".tick text").attr("transform","rotate("+R+" 0,0)").style("text-anchor",0<R?"start":"end");l.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}E&&(t.scale(N).ticks(X/36).tickSize(-ca,0),l.select(".nv-y.nv-axis").transition().call(t));q.dispatch.on("stateChange",function(b){U=b;J.stateChange(U);a.update()});
e.dispatch.on("legendClick",function(e,l){if(e.disabled){H=H.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}U.stacked=b.stacked();J.stateChange(U);a.update()}});J.on("tooltipShow",function(e){if(P){var l=K.parentNode,k=e.pos[0]+(l.offsetLeft||0),n=e.pos[1]+(l.offsetTop||0),q=g.tickFormat()(b.x()(e.point,e.pointIndex)),u=t.tickFormat()(b.y()(e.point,e.pointIndex)),q=G(e.series.key,q,u,e,a);v.tooltip.show([k,n],q,
0>e.value?"n":"s",null,l)}});J.on("changeState",function(e){"undefined"!==typeof e.disabled&&(Q.forEach(function(a,b){a.disabled=e.disabled[b]}),U.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),U.stacked=e.stacked);a.update()})});return a}var b=v.models.multiBar(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e=v.models.legend(),k={top:30,right:20,bottom:50,left:60},u=null,n=null,I=v.utils.defaultColor(),B=!0,A=!0,F=!0,E=!0,M=!1,S=!0,D=!1,R=0,P=!0,G=function(a,
b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},O,N,U={stacked:!1},y=null,C="No Data Available.",J=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=250;b.stacked(!1);g.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});t.orient(M?"right":"left").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+k.left,a.pos[1]+k.top];J.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){J.tooltipHide(a)});J.on("tooltipHide",function(){P&&v.tooltip.cleanup()});a.dispatch=J;a.multibar=b;a.legend=q;a.xAxis=g;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=
typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);q.color(I);return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return F;
F=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;E=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;t.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return S;S=b;return a};a.rotateLabels=function(b){if(!arguments.length)return R;R=b;return a};a.staggerLabels=function(b){if(!arguments.length)return D;D=b;return a};a.tooltip=function(b){if(!arguments.length)return G;G=b;return a};a.tooltips=function(b){if(!arguments.length)return P;
P=b;return a};a.tooltipContent=function(b){if(!arguments.length)return G;G=b;return a};a.state=function(b){if(!arguments.length)return U;U=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return z;z=b;return a};return a};v.models.multiBarHorizontal=function(){function a(q){q.each(function(a){var q=g-b.left-b.right,v=t-b.top-b.bottom;d3.select(this);
E&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(n)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});E&&a[0].values.map(function(b,e){var g=0,l=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=l-a.size,l-=a.size):(a.y1=g,g+=a.size)})});var J=G&&O?[]:a.map(function(a){return a.values.map(function(a,b){return{x:u(a,b),y:n(a,b),y0:a.y0,y1:a.y1}})});e.domain(G||d3.merge(J).map(function(a){return a.x})).rangeBands(N||[0,v],.1);k.domain(O||
d3.extent(d3.merge(J).map(function(a){return E?0<a.y?a.y1+a.y:a.y1:a.y}).concat(I)));M&&!E?k.range(U||[0>k.domain()[0]?D:0,q-(0<k.domain()[1]?D:0)]):k.range(U||[0,q]);C=C||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);q=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);v=q.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");v.append("defs");v=v.append("g");q.select("g");v.append("g").attr("class","nv-groups");q.attr("transform","translate("+b.left+
","+b.top+")");q=q.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);q.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();q.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return B(a,b)}).style("stroke",function(a,b){return B(a,b)});q.transition().style("stroke-opacity",
1).style("fill-opacity",.75);q=q.selectAll("g.nv-bar").data(function(a){return a.values});q.exit().remove();v=q.enter().append("g").attr("transform",function(b,g,k){return"translate("+C(E?b.y0:0)+","+(E?0:k*e.rangeBand()/a.length+e(u(b,g)))+")"});v.append("rect").attr("width",0).attr("height",e.rangeBand()/(E?1:a.length));q.on("mouseover",function(b,g){d3.select(this).classed("hover",!0);y.elementMouseover({value:n(b,g),point:b,series:a[b.series],pos:[k(n(b,g)+(E?b.y0:0)),e(u(b,g))+e.rangeBand()*
(E?a.length/2:b.series+.5)/a.length],pointIndex:g,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);y.elementMouseout({value:n(b,e),point:b,series:a[b.series],pointIndex:e,seriesIndex:b.series,e:d3.event})}).on("click",function(b,g){y.elementClick({value:n(b,g),point:b,series:a[b.series],pos:[e(u(b,g))+e.rangeBand()*(E?a.length/2:b.series+.5)/a.length,k(n(b,g)+(E?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,g){y.elementDblClick({value:n(b,g),point:b,series:a[b.series],pos:[e(u(b,g))+e.rangeBand()*(E?a.length/2:b.series+.5)/a.length,k(n(b,g)+(E?b.y0:0))],pointIndex:g,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});v.append("text");M&&!E?(q.select("text").attr("text-anchor",function(a,b){return 0>n(a,b)?"end":"start"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return R(n(a,b))}),q.transition().select("text").attr("x",function(a,b){return 0>n(a,
b)?-4:k(n(a,b))-k(0)+4})):q.selectAll("text").text("");S&&!E?(v.append("text").classed("nv-bar-label",!0),q.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>n(a,b)?"start":"end"}).attr("y",e.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return u(a,b)}),q.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>n(a,b)?k(0)-k(n(a,b))+4:-4})):q.selectAll("text.nv-bar-label").text("");q.attr("class",function(a,b){return 0>n(a,b)?"nv-bar negative":
"nv-bar positive"});A&&(F||(F=a.map(function(){return!0})),q.style("fill",function(a,b,e){return d3.rgb(A(a,b)).darker(F.map(function(a,b){return b}).filter(function(a,b){return!F[b]})[e]).toString()}).style("stroke",function(a,b,e){return d3.rgb(A(a,b)).darker(F.map(function(a,b){return b}).filter(function(a,b){return!F[b]})[e]).toString()}));E?q.transition().attr("transform",function(a,b){return"translate("+k(a.y1)+","+e(u(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(k(n(a,
b)+a.y0)-k(a.y0))}).attr("height",e.rangeBand()):q.transition().attr("transform",function(b,g){return"translate("+(0>n(b,g)?k(n(b,g)):k(0))+","+(b.series*e.rangeBand()/a.length+e(u(b,g)))+")"}).select("rect").attr("height",e.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(k(n(a,b))-k(0)),1)});e.copy();C=k.copy()});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=Math.floor(1E4*Math.random()),e=d3.scale.ordinal(),k=d3.scale.linear(),u=function(a){return a.x},n=
function(a){return a.y},I=[0],B=v.utils.defaultColor(),A=null,F,E=!1,M=!1,S=!1,D=60,R=d3.format(",.2f"),P=1200,G,O,N,U,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),C;a.dispatch=y;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return u;u=b;return a};a.y=function(b){if(!arguments.length)return n;n=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=
typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return k;k=b;return a};a.xDomain=function(b){if(!arguments.length)return G;G=b;return a};a.yDomain=function(b){if(!arguments.length)return O;
O=b;return a};a.xRange=function(b){if(!arguments.length)return N;N=b;return a};a.yRange=function(b){if(!arguments.length)return U;U=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return B;B=v.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return F;F=b;return a};
a.id=function(b){if(!arguments.length)return q;q=b;return a};a.delay=function(b){if(!arguments.length)return P;P=b;return a};a.showValues=function(b){if(!arguments.length)return M;M=b;return a};a.showBarLabels=function(b){if(!arguments.length)return S;S=b;return a};a.valueFormat=function(b){if(!arguments.length)return R;R=b;return a};a.valuePadding=function(b){if(!arguments.length)return D;D=b;return a};return a};v.models.multiBarHorizontalChart=function(){function a(y){y.each(function(y){var J=d3.select(this),
z=this,H=(u||parseInt(J.style("width"))||960)-k.left-k.right,Q=(n||parseInt(J.style("height"))||400)-k.top-k.bottom;a.update=function(){J.transition().duration(U).call(a)};a.container=this;P.disabled=y.map(function(a){return!!a.disabled});if(!G){var V;G={};for(V in P)G[V]=P[V]instanceof Array?P[V].slice(0):P[V]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return V=J.selectAll(".nv-noData").data([O]),V.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",k.left+H/2).attr("y",k.top+Q/2).text(function(a){return a}),a;D=b.xScale();R=b.yScale();V=J.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([y]);var K=V.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),ca=V.select("g");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");K.append("g").attr("class",
"nv-barsWrap");K.append("g").attr("class","nv-legendWrap");K.append("g").attr("class","nv-controlsWrap");A&&(q.width(H-(B?180:0)),b.barColor()&&y.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),ca.select(".nv-legendWrap").datum(y).call(q),k.top!=q.height()&&(k.top=q.height(),Q=(n||parseInt(J.style("height"))||400)-k.top-k.bottom),ca.select(".nv-legendWrap").attr("transform","translate("+(B?180:0)+","+-k.top+")"));if(B){var X=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];e.width(B?180:0).color(["#444","#444","#444"]);ca.select(".nv-controlsWrap").datum(X).attr("transform","translate(0,"+-k.top+")").call(e)}V.attr("transform","translate("+k.left+","+k.top+")");b.disabled(y.map(function(a){return a.disabled})).width(H).height(Q).color(y.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!y[b].disabled}));ca.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);F&&(g.scale(D).ticks(Q/24).tickSize(-H,
0),ca.select(".nv-x.nv-axis").transition().call(g),ca.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));E&&(t.scale(R).ticks(H/100).tickSize(-Q,0),ca.select(".nv-y.nv-axis").attr("transform","translate(0,"+Q+")"),ca.select(".nv-y.nv-axis").transition().call(t));ca.select(".nv-zeroLine line").attr("x1",R(0)).attr("x2",R(0)).attr("y1",0).attr("y2",-Q);q.dispatch.on("stateChange",function(b){P=b;N.stateChange(P);a.update()});e.dispatch.on("legendClick",function(e,g){if(e.disabled){X=X.map(function(a){a.disabled=
!0;return a});e.disabled=!1;switch(e.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}P.stacked=b.stacked();N.stateChange(P);a.update()}});N.on("tooltipShow",function(e){if(M){var k=z.parentNode,n=e.pos[0]+(k.offsetLeft||0),q=e.pos[1]+(k.offsetTop||0),u=g.tickFormat()(b.x()(e.point,e.pointIndex)),y=t.tickFormat()(b.y()(e.point,e.pointIndex)),u=S(e.series.key,u,y,e,a);v.tooltip.show([n,q],u,0>e.value?"e":"w",null,k)}});N.on("changeState",function(e){"undefined"!==typeof e.disabled&&
(y.forEach(function(a,b){a.disabled=e.disabled[b]}),P.disabled=e.disabled);"undefined"!==typeof e.stacked&&(b.stacked(e.stacked),P.stacked=e.stacked);a.update()})});return a}var b=v.models.multiBarHorizontal(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend().height(30),e=v.models.legend().height(30),k={top:30,right:20,bottom:50,left:60},u=null,n=null,I=v.utils.defaultColor(),B=!0,A=!0,F=!0,E=!0,M=!0,S=function(a,b,e,g,k){return"<h3>"+a+" - "+b+"</h3><p>"+e+"</p>"},D,R,P={stacked:!1},G=null,
O="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),U=250;b.stacked(!1);g.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});t.orient("bottom").tickFormat(d3.format(",.1f"));e.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+k.left,a.pos[1]+k.top];N.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){M&&v.tooltip.cleanup()});
a.dispatch=N;a.multibar=b;a.legend=q;a.xAxis=g;a.yAxis=t;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:
k.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return n;n=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);q.color(I);return a};a.showControls=function(b){if(!arguments.length)return B;B=b;return a};a.showLegend=function(b){if(!arguments.length)return A;A=b;return a};a.showXAxis=function(b){if(!arguments.length)return F;F=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;
E=b;return a};a.tooltip=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return M;M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return P;P=b;return a};a.defaultState=function(b){if(!arguments.length)return G;G=b;return a};a.noData=function(b){if(!arguments.length)return O;O=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};return a};
v.models.multiChart=function(){function a(C){C.each(function(C){var z=d3.select(this),H=this;a.update=function(){z.transition().call(a)};a.container=this;var Q=(t||parseInt(z.style("width"))||960)-b.left-b.right,V=(q||parseInt(z.style("height"))||400)-b.top-b.bottom,K=C.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),ca=C.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),X=C.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),l=C.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),L=C.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),ea=C.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),qa=C.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),ia=C.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});n.domain(d3.extent(d3.merge(qa.concat(ia)),function(a){return a.x})).range([0,
Q]);var Y=z.selectAll("g.wrap.multiChart").data([C]),ha=Y.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ha.append("g").attr("class","x axis");ha.append("g").attr("class","y1 axis");ha.append("g").attr("class","y2 axis");ha.append("g").attr("class","lines1Wrap");ha.append("g").attr("class","lines2Wrap");ha.append("g").attr("class","bars1Wrap");ha.append("g").attr("class","bars2Wrap");ha.append("g").attr("class","stack1Wrap");ha.append("g").attr("class","stack2Wrap");ha.append("g").attr("class",
"legendWrap");Y=Y.select("g");e&&(U.width(Q/2),Y.select(".legendWrap").datum(C.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(U),b.top!=U.height()&&(b.top=U.height(),V=(q||parseInt(z.style("height"))||400)-b.top-b.bottom),Y.select(".legendWrap").attr("transform","translate("+Q/2+","+-b.top+")"));E.width(Q).height(V).interpolate("monotone").color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,
b){return!C[b].disabled&&1==C[b].yAxis&&"line"==C[b].type}));M.width(Q).height(V).interpolate("monotone").color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!C[b].disabled&&2==C[b].yAxis&&"line"==C[b].type}));S.width(Q).height(V).color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!C[b].disabled&&1==C[b].yAxis&&"bar"==C[b].type}));D.width(Q).height(V).color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!C[b].disabled&&
2==C[b].yAxis&&"bar"==C[b].type}));R.width(Q).height(V).color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!C[b].disabled&&1==C[b].yAxis&&"area"==C[b].type}));P.width(Q).height(V).color(C.map(function(a,b){return a.color||g[b%g.length]}).filter(function(a,b){return!C[b].disabled&&2==C[b].yAxis&&"area"==C[b].type}));Y.attr("transform","translate("+b.left+","+b.top+")");var ha=Y.select(".lines1Wrap").datum(K),ja=Y.select(".bars1Wrap").datum(X),da=Y.select(".stack1Wrap").datum(L),
Z=Y.select(".lines2Wrap").datum(ca),na=Y.select(".bars2Wrap").datum(l),ga=Y.select(".stack2Wrap").datum(ea),oa=L.length?L.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[],ta=ea.length?ea.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,e){return{x:a.x,y:a.y+b[e].y}})}).concat([{x:0,y:0}]):[];A.domain(I||d3.extent(d3.merge(qa).concat(oa),function(a){return a.y})).range([0,V]);F.domain(B||
d3.extent(d3.merge(ia).concat(ta),function(a){return a.y})).range([0,V]);E.yDomain(A.domain());S.yDomain(A.domain());R.yDomain(A.domain());M.yDomain(F.domain());D.yDomain(F.domain());P.yDomain(F.domain());L.length&&d3.transition(da).call(R);ea.length&&d3.transition(ga).call(P);X.length&&d3.transition(ja).call(S);l.length&&d3.transition(na).call(D);K.length&&d3.transition(ha).call(E);ca.length&&d3.transition(Z).call(M);G.ticks(Q/100).tickSize(-V,0);Y.select(".x.axis").attr("transform","translate(0,"+
V+")");d3.transition(Y.select(".x.axis")).call(G);O.ticks(V/36).tickSize(-Q,0);d3.transition(Y.select(".y1.axis")).call(O);N.ticks(V/36).tickSize(-Q,0);d3.transition(Y.select(".y2.axis")).call(N);Y.select(".y2.axis").style("opacity",ia.length?1:0).attr("transform","translate("+n.range()[1]+",0)");U.dispatch.on("stateChange",function(b){a.update()});y.on("tooltipShow",function(b){if(k){var e=H.parentNode,g=b.pos[0]+(e.offsetLeft||0),l=b.pos[1]+(e.offsetTop||0),n=G.tickFormat()(E.x()(b.point,b.pointIndex)),
q=(2==b.series.yAxis?N:O).tickFormat()(E.y()(b.point,b.pointIndex));b=u(b.series.key,n,q,b,a);v.tooltip.show([g,l],b,void 0,void 0,e.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},g=d3.scale.category20().range(),t=null,q=null,e=!0,k=!0,u=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" at "+b+"</p>"},n,I,B;n=d3.scale.linear();var A=d3.scale.linear(),F=d3.scale.linear(),E=v.models.line().yScale(A),M=v.models.line().yScale(F),S=v.models.multiBar().stacked(!1).yScale(A),D=v.models.multiBar().stacked(!1).yScale(F),
R=v.models.stackedArea().yScale(A),P=v.models.stackedArea().yScale(F),G=v.models.axis().scale(n).orient("bottom").tickPadding(5),O=v.models.axis().scale(A).orient("left"),N=v.models.axis().scale(F).orient("right"),U=v.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide");E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});S.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});S.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});D.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});D.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});
R.dispatch.on("tooltipShow",function(a){if(!Math.round(100*R.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});R.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)});P.dispatch.on("tooltipShow",function(a){if(!Math.round(100*P.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});P.dispatch.on("tooltipHide",
function(a){y.tooltipHide(a)});E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});y.on("tooltipHide",function(){k&&v.tooltip.cleanup()});a.dispatch=y;a.lines1=E;a.lines2=M;a.bars1=S;a.bars2=
D;a.stack1=R;a.stack2=P;a.xAxis=G;a.yAxis1=O;a.yAxis2=N;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;E.x(b);S.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;E.y(b);S.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return I;I=b;return a};a.yDomain2=function(b){if(!arguments.length)return B;B=b;return a};a.margin=function(e){if(!arguments.length)return b;b=e;return a};a.width=function(b){if(!arguments.length)return t;
t=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return g;g=b;U.color(b);return a};a.showLegend=function(b){if(!arguments.length)return e;e=b;return a};a.tooltips=function(b){if(!arguments.length)return k;k=b;return a};a.tooltipContent=function(b){if(!arguments.length)return u;u=b;return a};return a};v.models.ohlcBar=function(){function a(v){v.each(function(a){var v=g-b.left-b.right,y=t-b.top-b.bottom,R=d3.select(this);e.domain(P||
d3.extent(a[0].values.map(u).concat(E)));S?e.range(O||[.5*v/a[0].values.length,v*(a[0].values.length-.5)/a[0].values.length]):e.range(O||[0,v]);k.domain(G||[d3.min(a[0].values.map(F).concat(M)),d3.max(a[0].values.map(A).concat(M))]).range(N||[y,0]);e.domain()[0]===e.domain()[1]&&(e.domain()[0]?e.domain([e.domain()[0]-.01*e.domain()[0],e.domain()[1]+.01*e.domain()[1]]):e.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):
k.domain([-1,1]));var Q=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),V=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),K=V.append("defs"),V=V.append("g"),H=Q.select("g");V.append("g").attr("class","nv-ticks");Q.attr("transform","translate("+b.left+","+b.top+")");R.on("click",function(a,b){U.chartClick({data:a,index:b,pos:d3.event,id:q})});K.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");Q.select("#nv-chart-clip-path-"+q+" rect").attr("width",
v).attr("height",y);H.attr("clip-path",D?"url(#nv-chart-clip-path-"+q+")":"");y=Q.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});y.exit().remove();y.enter().append("path").attr("class",function(a,b,e){return(I(a,b)>B(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b}).attr("d",function(b,e){var g=v/a[0].values.length*.9;return"m0,0l0,"+(k(I(b,e))-k(A(b,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(k(F(b,e))-k(I(b,e)))+"l0,"+(k(B(b,e))-k(F(b,e)))+"l"+g/2+",0l"+-g/2+",0z"}).attr("transform",
function(a,b){return"translate("+e(u(a,b))+","+k(A(a,b))+")"}).on("mouseover",function(b,g){d3.select(this).classed("hover",!0);U.elementMouseover({point:b,series:a[0],pos:[e(u(b,g)),k(n(b,g))],pointIndex:g,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,e){d3.select(this).classed("hover",!1);U.elementMouseout({point:b,series:a[0],pointIndex:e,seriesIndex:0,e:d3.event})}).on("click",function(a,b){U.elementClick({value:n(a,b),data:a,index:b,pos:[e(u(a,b)),k(n(a,b))],e:d3.event,id:q});d3.event.stopPropagation()}).on("dblclick",
function(a,b){U.elementDblClick({value:n(a,b),data:a,index:b,pos:[e(u(a,b)),k(n(a,b))],e:d3.event,id:q});d3.event.stopPropagation()});y.attr("class",function(a,b,e){return(I(a,b)>B(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+b});d3.transition(y).attr("transform",function(a,b){return"translate("+e(u(a,b))+","+k(A(a,b))+")"}).attr("d",function(b,e){var g=v/a[0].values.length*.9;return"m0,0l0,"+(k(I(b,e))-k(A(b,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(k(F(b,e))-k(I(b,e)))+"l0,"+(k(B(b,e))-
k(F(b,e)))+"l"+g/2+",0l"+-g/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=Math.floor(1E4*Math.random()),e=d3.scale.linear(),k=d3.scale.linear(),u=function(a){return a.x},n=function(a){return a.y},I=function(a){return a.open},B=function(a){return a.close},A=function(a){return a.high},F=function(a){return a.low},E=[],M=[],S=!1,D=!0,R=v.utils.defaultColor(),P,G,O,N,U=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
U;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return u;u=b;return a};a.y=function(b){if(!arguments.length)return n;n=b;return a};a.open=function(b){if(!arguments.length)return I;I=b;return a};a.close=function(b){if(!arguments.length)return B;B=b;return a};a.high=function(b){if(!arguments.length)return A;A=b;return a};a.low=function(b){if(!arguments.length)return F;F=b;return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:
b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return k;k=b;return a};a.xDomain=function(b){if(!arguments.length)return P;P=b;return a};a.yDomain=
function(b){if(!arguments.length)return G;G=b;return a};a.xRange=function(b){if(!arguments.length)return O;O=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceX=function(b){if(!arguments.length)return E;E=b;return a};a.forceY=function(b){if(!arguments.length)return M;M=b;return a};a.padData=function(b){if(!arguments.length)return S;S=b;return a};a.clipEdge=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return R;R=
v.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return q;q=b;return a};return a};v.models.pie=function(){function a(k){k.each(function(a){var k=g-b.left-b.right,v=t-b.top-b.bottom,N=Math.min(k,v)/2,z=N-N/5,I=d3.select(this);a=I.selectAll(".nv-wrap.nv-pie").data(a);var Q=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+u).append("g"),V=a.select("g");Q.append("g").attr("class","nv-pie");Q.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");V.select(".nv-pie").attr("transform","translate("+k/2+","+v/2+")");V.select(".nv-pieLabels").attr("transform","translate("+k/2+","+v/2+")");I.on("click",function(a,b){O.chartClick({data:a,index:b,pos:d3.event,id:u})});var K=d3.svg.arc().outerRadius(z);R&&K.startAngle(R);P&&K.endAngle(P);S&&K.innerRadius(N*G);v=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:e(a)});k=a.select(".nv-pie").selectAll(".nv-slice").data(v);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(v);
k.exit().remove();a.exit().remove();v=k.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);O.elementMouseover({label:q(a.data),value:e(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:u})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);O.elementMouseout({label:q(a.data),value:e(a.data),point:a.data,index:b,id:u})}).on("click",function(a,b){O.elementClick({label:q(a.data),value:e(a.data),point:a.data,
index:b,pos:d3.event,id:u});d3.event.stopPropagation()}).on("dblclick",function(a,b){O.elementDblClick({label:q(a.data),value:e(a.data),point:a.data,index:b,pos:d3.event,id:u});d3.event.stopPropagation()});k.attr("fill",function(a,b){return n(a,b)}).attr("stroke",function(a,b){return n(a,b)});v.append("path").each(function(a){this._current=a});k.select("path").transition().attr("d",K).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
S||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return K(b(a))}});if(B){var H=d3.svg.arc().innerRadius(0);A&&(H=K);F&&(H=d3.svg.arc().outerRadius(K.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var e=d3.select(this);e.attr("transform",function(a){if(D){a.outerRadius=z+10;a.innerRadius=z+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+H.centroid(a)+
") rotate("+b+")"}a.outerRadius=N+10;a.innerRadius=N+15;return"translate("+H.centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",D?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var X={},l=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(D){a.outerRadius=z+10;a.innerRadius=z+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+H.centroid(a)+") rotate("+b+")"}a.outerRadius=N+10;a.innerRadius=N+15;a=H.centroid(a);b=l(a);X[b]&&(a[1]-=14);X[l(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",D?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var g=(a.endAngle-a.startAngle)/(2*Math.PI),l={key:q(a.data),value:e(a.data),percent:d3.format("%")(g)};return a.value&&g>M?l[E]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},g=500,t=500,q=function(a){return a.x},e=function(a){return a.y},k=function(a){return a.description},u=Math.floor(1E4*Math.random()),n=v.utils.defaultColor(),I=d3.format(",.2f"),B=!0,A=!0,F=!1,E="key",M=.02,S=!1,D=!1,R=!1,P=!1,G=.5,O=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=O;a.options=v.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.values=function(b){v.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return q;q=b;return a};a.y=function(b){if(!arguments.length)return e;e=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return k;k=b;return a};a.showLabels=function(b){if(!arguments.length)return B;B=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return D;D=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return F;F=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return A;A=b;return a};a.labelType=function(b){if(!arguments.length)return E;E=(E=b)||"key";return a};a.donut=function(b){if(!arguments.length)return S;
S=b;return a};a.donutRatio=function(b){if(!arguments.length)return G;G=b;return a};a.startAngle=function(b){if(!arguments.length)return R;R=b;return a};a.endAngle=function(b){if(!arguments.length)return P;P=b;return a};a.id=function(b){if(!arguments.length)return u;u=b;return a};a.color=function(b){if(!arguments.length)return n;n=v.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return I;I=b;return a};a.labelThreshold=function(b){if(!arguments.length)return M;M=b;return a};
return a};v.models.pieChart=function(){function a(n){n.each(function(n){var u=d3.select(this),v=(q||parseInt(u.style("width"))||960)-t.left-t.right,M=(e||parseInt(u.style("height"))||400)-t.top-t.bottom;a.update=function(){u.transition().call(a)};a.container=this;B.disabled=n.map(function(a){return!!a.disabled});if(!A){var G;A={};for(G in B)A[G]=B[G]instanceof Array?B[G].slice(0):B[G]}if(n&&n.length)u.selectAll(".nv-noData").remove();else return G=u.selectAll(".nv-noData").data([F]),G.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),G.attr("x",t.left+v/2).attr("y",t.top+M/2).text(function(a){return a}),a;G=u.selectAll("g.nv-wrap.nv-pieChart").data([n]);var I=G.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),N=G.select("g");I.append("g").attr("class","nv-pieWrap");I.append("g").attr("class","nv-legendWrap");k&&(g.width(v).key(b.x()),G.select(".nv-legendWrap").datum(n).call(g),t.top!=g.height()&&(t.top=g.height(),M=(e||parseInt(u.style("height"))||
400)-t.top-t.bottom),G.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")"));G.attr("transform","translate("+t.left+","+t.top+")");b.width(v).height(M);v=N.select(".nv-pieWrap").datum([n]);d3.transition(v).call(b);g.dispatch.on("stateChange",function(b){B=b;E.stateChange(B);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a)});E.on("changeState",function(b){"undefined"!==typeof b.disabled&&(n.forEach(function(a,e){a.disabled=b.disabled[e]}),B.disabled=
b.disabled);a.update()})});return a}var b=v.models.pie(),g=v.models.legend(),t={top:30,right:20,bottom:20,left:20},q=null,e=null,k=!0,u=v.utils.defaultColor(),n=!0,I=function(a,b,e,g){return"<h3>"+a+"</h3><p>"+b+"</p>"},B={},A=null,F="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];E.tooltipShow(a)});E.on("tooltipShow",function(e){if(n){var g=b.description()(e.point)||
b.x()(e.point),k=e.pos[0]+0,q=e.pos[1]+0,t=b.valueFormat()(b.y()(e.point)),g=I(g,t,e,a);v.tooltip.show([k,q],g,0>e.value?"n":"s",null,void 0)}});E.on("tooltipHide",function(){n&&v.tooltip.cleanup()});a.legend=g;a.dispatch=E;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=
typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return q;q=b;return a};a.height=function(b){if(!arguments.length)return e;e=b;return a};a.color=function(e){if(!arguments.length)return u;u=v.utils.getColor(e);g.color(u);b.color(u);return a};a.showLegend=function(b){if(!arguments.length)return k;k=b;return a};a.tooltips=
function(b){if(!arguments.length)return n;n=b;return a};a.tooltipContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=function(b){if(!arguments.length)return B;B=b;return a};a.defaultState=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return F;F=b;return a};return a};v.models.scatter=function(){function a(Y){Y.each(function(a){var Y=g-b.left-b.right,da=t-b.top-b.bottom,Z=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var na=J&&z&&V?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:I(a,b),y:B(a,b),size:A(a,b)}})}));k.domain(J||d3.extent(na.map(function(a){return a.x}).concat(M)));O&&a[0]?k.range(H||[(Y*N+Y)/(2*a[0].values.length),Y-Y*(1+N)/(2*a[0].values.length)]):k.range(H||[0,Y]);u.domain(z||d3.extent(na.map(function(a){return a.y}).concat(S))).range(Q||[da,0]);n.domain(V||d3.extent(na.map(function(a){return a.size}).concat(D))).range(K||[16,256]);if(k.domain()[0]===k.domain()[1]||
u.domain()[0]===u.domain()[1])ca=!0;k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1]));u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):u.domain([-1,1]));isNaN(k.domain()[0])&&k.domain([-1,1]);isNaN(u.domain()[0])&&u.domain([-1,1]);L=L||k;ea=ea||u;var ga=Z.selectAll("g.nv-wrap.nv-scatter").data([a]),na=ga.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+e+(ca?" nv-single-point":"")),Z=na.append("defs"),na=na.append("g"),oa=ga.select("g");na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");ga.attr("transform","translate("+b.left+","+b.top+")");Z.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");ga.select("#nv-edge-clip-"+e+" rect").attr("width",Y).attr("height",0<da?da:0);oa.attr("clip-path",U?"url(#nv-edge-clip-"+e+")":"");ia=!0;Y=ga.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});Y.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);Y.exit().remove();Y.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});Y.transition().style("fill",function(a,b){return q(a,b)}).style("stroke",function(a,b){return q(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);E?(da=Y.selectAll("circle.nv-point").data(function(a){return a.values},P),da.enter().append("circle").style("fill",function(a,
b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return v.utils.NaNtoZero(L(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(ea(B(a,b)))}).attr("r",function(a,b){return Math.sqrt(n(A(a,b))/Math.PI)}),da.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return v.utils.NaNtoZero(k(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(u(B(a,b)))}).remove(),da.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),da.transition().attr("cx",function(a,b){return v.utils.NaNtoZero(k(I(a,b)))}).attr("cy",function(a,b){return v.utils.NaNtoZero(u(B(a,b)))}).attr("r",function(a,b){return Math.sqrt(n(A(a,b))/Math.PI)})):(da=Y.selectAll("path.nv-point").data(function(a){return a.values}),da.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+L(I(a,b))+","+
ea(B(a,b))+")"}).attr("d",d3.svg.symbol().type(F).size(function(a,b){return n(A(a,b))})),da.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+k(I(a,b))+","+u(B(a,b))+")"}).remove(),da.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),da.transition().attr("transform",function(a,b){return"translate("+k(I(a,b))+","+u(B(a,b))+")"}).attr("d",d3.svg.symbol().type(F).size(function(a,b){return n(A(a,
b))})));clearTimeout(qa);qa=setTimeout(function(){if(!R)return!1;var n=d3.merge(a.map(function(a,b){return a.values.map(function(a,e){var g=I(a,e),l=B(a,e);return[k(g)+1E-7*Math.random(),u(l)+1E-7*Math.random(),b,e,a]}).filter(function(a,b){return G(a[4],b)})}));if(!0===l){if(y){ga.select("defs").selectAll(".nv-point-clips").data([e]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+e);var q=ga.select("#nv-points-clip-"+e).selectAll("circle").data(n);q.enter().append("circle").attr("r",
C);q.exit().remove();q.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});ga.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+e+")")}n.length&&(n.push([k.range()[0]-20,u.range()[0]-20,null,null]),n.push([k.range()[1]+20,u.range()[1]+20,null,null]),n.push([k.range()[0]-20,u.range()[0]+20,null,null]),n.push([k.range()[1]+20,u.range()[1]-20,null,null]));var v=d3.geom.polygon([[-10,-10],[-10,t+10],[g+10,t+10],[g+10,-10]]),q=d3.geom.voronoi(n).map(function(a,b){return{data:v.clip(a),
series:n[b][2],point:n[b][3]}}),q=ga.select(".nv-point-paths").selectAll("path").data(q);q.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});q.exit().remove();q.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var z=function(e,g){if(ia)return 0;var l=a[e.series];if("undefined"!==typeof l){var n=l.values[e.point];g({point:n,series:l,pos:[k(I(n,e.point))+b.left,u(B(n,e.point))+b.top],seriesIndex:e.series,pointIndex:e.point})}};q.on("click",function(a){z(a,
X.elementClick)}).on("mouseover",function(a){z(a,X.elementMouseover)}).on("mouseout",function(a,b){z(a,X.elementMouseout)})}else ga.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,g){if(ia||!a[e.series])return 0;var l=a[e.series],n=l.values[g];X.elementClick({point:n,series:l,pos:[k(I(n,g))+b.left,u(B(n,g))+b.top],seriesIndex:e.series,pointIndex:g})}).on("mouseover",function(e,g){if(ia||!a[e.series])return 0;var l=a[e.series],n=l.values[g];X.elementMouseover({point:n,
series:l,pos:[k(I(n,g))+b.left,u(B(n,g))+b.top],seriesIndex:e.series,pointIndex:g})}).on("mouseout",function(b,e){if(ia||!a[b.series])return 0;var g=a[b.series];X.elementMouseout({point:g.values[e],series:g,seriesIndex:b.series,pointIndex:e})});ia=!1},300);L=k.copy();ea=u.copy();n.copy()});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=v.utils.defaultColor(),e=Math.floor(1E5*Math.random()),k=d3.scale.linear(),u=d3.scale.linear(),n=d3.scale.linear(),I=function(a){return a.x},B=function(a){return a.y},
A=function(a){return a.size||1},F=function(a){return a.shape||"circle"},E=!0,M=[],S=[],D=[],R=!0,P=null,G=function(a){return!a.notActive},O=!1,N=.1,U=!1,y=!0,C=function(){return 25},J=null,z=null,H=null,Q=null,V=null,K=null,ca=!1,X=d3.dispatch("elementClick","elementMouseover","elementMouseout"),l=!0,L,ea,qa,ia=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+e+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,g){d3.select(".nv-chart-"+e+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",g)};X.on("elementMouseover.point",function(b){R&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});X.on("elementMouseout.point",function(b){R&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=X;a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return B;B=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return A;A=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;
b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return u;u=b;return a};a.zScale=function(b){if(!arguments.length)return n;
n=b;return a};a.xDomain=function(b){if(!arguments.length)return J;J=b;return a};a.yDomain=function(b){if(!arguments.length)return z;z=b;return a};a.sizeDomain=function(b){if(!arguments.length)return V;V=b;return a};a.xRange=function(b){if(!arguments.length)return H;H=b;return a};a.yRange=function(b){if(!arguments.length)return Q;Q=b;return a};a.sizeRange=function(b){if(!arguments.length)return K;K=b;return a};a.forceX=function(b){if(!arguments.length)return M;M=b;return a};a.forceY=function(b){if(!arguments.length)return S;
S=b;return a};a.forceSize=function(b){if(!arguments.length)return D;D=b;return a};a.interactive=function(b){if(!arguments.length)return R;R=b;return a};a.pointKey=function(b){if(!arguments.length)return P;P=b;return a};a.pointActive=function(b){if(!arguments.length)return G;G=b;return a};a.padData=function(b){if(!arguments.length)return O;O=b;return a};a.padDataOuter=function(b){if(!arguments.length)return N;N=b;return a};a.clipEdge=function(b){if(!arguments.length)return U;U=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return y;y=b;return a};a.useVoronoi=function(b){if(!arguments.length)return l;l=b;!1===l&&(y=!1);return a};a.clipRadius=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return q;q=v.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return F;F=b;return a};a.onlyCircles=function(b){if(!arguments.length)return E;E=b;return a};a.id=function(b){if(!arguments.length)return e;e=b;return a};a.singlePoint=function(b){if(!arguments.length)return ca;
ca=b;return a};return a};v.models.scatterChart=function(){function a(ea){ea.each(function(ea){function ia(){if(C)return ga.select(".nv-point-paths").style("pointer-events","all"),!1;ga.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);F.distortion(y).focus(a[0]);E.distortion(y).focus(a[1]);ga.select(".nv-scatterWrap").call(b);G&&ga.select(".nv-x.nv-axis").call(g);O&&ga.select(".nv-y.nv-axis").call(t);ga.select(".nv-distributionX").datum(ea.filter(function(a){return!a.disabled})).call(k);
ga.select(".nv-distributionY").datum(ea.filter(function(a){return!a.disabled})).call(u)}var Y=d3.select(this),ha=this,ja=(I||parseInt(Y.style("width"))||960)-n.left-n.right,da=(B||parseInt(Y.style("height"))||400)-n.top-n.bottom;a.update=function(){Y.transition().duration(l).call(a)};a.container=this;V.disabled=ea.map(function(a){return!!a.disabled});if(!K){var Z;K={};for(Z in V)K[Z]=V[Z]instanceof Array?V[Z].slice(0):V[Z]}if(ea&&ea.length&&ea.filter(function(a){return a.values.length}).length)Y.selectAll(".nv-noData").remove();
else return Z=Y.selectAll(".nv-noData").data([X]),Z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Z.attr("x",n.left+ja/2).attr("y",n.top+da/2).text(function(a){return a}),a;Z=Y.selectAll("g.nv-wrap.nv-scatterChart").data([ea]);var na=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),ga=Z.select("g");na.append("rect").attr("class","nvd3 nv-background");na.append("g").attr("class","nv-x nv-axis");
na.append("g").attr("class","nv-y nv-axis");na.append("g").attr("class","nv-scatterWrap");na.append("g").attr("class","nv-distWrap");na.append("g").attr("class","nv-legendWrap");na.append("g").attr("class","nv-controlsWrap");if(P){var oa=H?ja/2:ja;q.width(oa);Z.select(".nv-legendWrap").datum(ea).call(q);n.top!=q.height()&&(n.top=q.height(),da=(B||parseInt(Y.style("height"))||400)-n.top-n.bottom);Z.select(".nv-legendWrap").attr("transform","translate("+(ja-oa)+","+-n.top+")")}H&&(e.width(180).color(["#444"]),
ga.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-n.top+")").call(e));Z.attr("transform","translate("+n.left+","+n.top+")");N&&ga.select(".nv-y.nv-axis").attr("transform","translate("+ja+",0)");b.width(ja).height(da).color(ea.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!ea[b].disabled}));0!==M&&b.xDomain(null);0!==S&&b.yDomain(null);Z.select(".nv-scatterWrap").datum(ea.filter(function(a){return!a.disabled})).call(b);0!==M&&(oa=F.domain()[1]-F.domain()[0],
b.xDomain([F.domain()[0]-M*oa,F.domain()[1]+M*oa]));0!==S&&(oa=E.domain()[1]-E.domain()[0],b.yDomain([E.domain()[0]-S*oa,E.domain()[1]+S*oa]));0===S&&0===M||Z.select(".nv-scatterWrap").datum(ea.filter(function(a){return!a.disabled})).call(b);G&&(g.scale(F).ticks(g.ticks()&&g.ticks().length?g.ticks():ja/100).tickSize(-da,0),ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(g));O&&(t.scale(E).ticks(t.ticks()&&t.ticks().length?t.ticks():da/36).tickSize(-ja,0),ga.select(".nv-y.nv-axis").call(t));
D&&(k.getData(b.x()).scale(F).width(ja).color(ea.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!ea[b].disabled})),na.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ga.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(ea.filter(function(a){return!a.disabled})).call(k));R&&(u.getData(b.y()).scale(E).width(da).color(ea.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!ea[b].disabled})),na.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),ga.select(".nv-distributionY").attr("transform","translate("+(N?ja:-u.size())+",0)").datum(ea.filter(function(a){return!a.disabled})).call(u));d3.fisheye&&(ga.select(".nv-background").attr("width",ja).attr("height",da),ga.select(".nv-background").on("mousemove",ia),ga.select(".nv-background").on("click",function(){C=!C}),b.dispatch.on("elementClick.freezeFisheye",function(){C=!C}));e.dispatch.on("legendClick",function(e,l){e.disabled=!e.disabled;y=e.disabled?0:2.5;ga.select(".nv-background").style("pointer-events",
e.disabled?"none":"all");ga.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(F.distortion(y).focus(0),E.distortion(y).focus(0),ga.select(".nv-scatterWrap").call(b),ga.select(".nv-x.nv-axis").call(g),ga.select(".nv-y.nv-axis").call(t)):C=!1;a.update()});q.dispatch.on("stateChange",function(b){V.disabled=b.disabled;ca.stateChange(V);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,e){return a.pos[1]-da});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+k.size());a.pos=[a.pos[0]+n.left,a.pos[1]+n.top];ca.tooltipShow(a)});ca.on("tooltipShow",function(e){if(J){var l=ha.parentNode,k=e.pos[0]+(l.offsetLeft||0),q=e.pos[1]+(l.offsetTop||0),u=e.pos[0]+(l.offsetLeft||0),y=E.range()[0]+n.top+(l.offsetTop||0),D=F.range()[0]+n.left+(l.offsetLeft||0),A=e.pos[1]+(l.offsetTop||0),C=g.tickFormat()(b.x()(e.point,
e.pointIndex)),B=t.tickFormat()(b.y()(e.point,e.pointIndex));null!=z&&v.tooltip.show([u,y],z(e.series.key,C,B,e,a),"n",1,l,"x-nvtooltip");null!=W&&v.tooltip.show([D,A],W(e.series.key,C,B,e,a),"e",1,l,"y-nvtooltip");null!=Q&&v.tooltip.show([k,q],Q(e.series.key,C,B,e,a),0>e.value?"n":"s",null,l)}});ca.on("changeState",function(b){"undefined"!==typeof b.disabled&&(ea.forEach(function(a,e){a.disabled=b.disabled[e]}),V.disabled=b.disabled);a.update()});F.copy();E.copy()});return a}var b=v.models.scatter(),
g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e=v.models.legend(),k=v.models.distribution(),u=v.models.distribution(),n={top:30,right:20,bottom:50,left:75},I=null,B=null,A=v.utils.defaultColor(),F=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=0,S=0,D=!1,R=!1,P=!0,G=!0,O=!0,N=!1,H=!!d3.fisheye,y=0,C=!1,J=!0,z=function(a,b,e){return"<strong>"+b+"</strong>"},W=function(a,b,e){return"<strong>"+
e+"</strong>"},Q=null,V={},K=null,ca=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),X="No Data Available.",l=250;b.xScale(F).yScale(E);g.orient("bottom").tickPadding(10);t.orient(N?"right":"left").tickPadding(10);k.axis("x");u.axis("y");e.updateState(!1);var L=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){ca.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",u.size())});ca.on("tooltipHide",function(){J&&v.tooltip.cleanup()});a.dispatch=ca;a.scatter=b;a.legend=q;a.controls=e;a.xAxis=g;a.yAxis=t;a.distX=k;a.distY=u;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=v.utils.optionsFunc.bind(a);
a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;n.right="undefined"!=typeof b.right?b.right:n.right;n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom;n.left="undefined"!=typeof b.left?b.left:n.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);q.color(A);k.color(A);u.color(A);return a};
a.showDistX=function(b){if(!arguments.length)return D;D=b;return a};a.showDistY=function(b){if(!arguments.length)return R;R=b;return a};a.showControls=function(b){if(!arguments.length)return H;H=b;return a};a.showLegend=function(b){if(!arguments.length)return P;P=b;return a};a.showXAxis=function(b){if(!arguments.length)return G;G=b;return a};a.showYAxis=function(b){if(!arguments.length)return O;O=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return N;N=b;t.orient(b?"right":"left");
return a};a.fisheye=function(b){if(!arguments.length)return y;y=b;return a};a.xPadding=function(b){if(!arguments.length)return M;M=b;return a};a.yPadding=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return J;J=b;return a};a.tooltipContent=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return W;W=b;return a};a.state=
function(b){if(!arguments.length)return V;V=b;return a};a.defaultState=function(b){if(!arguments.length)return K;K=b;return a};a.noData=function(b){if(!arguments.length)return X;X=b;return a};a.transitionDuration=function(b){if(!arguments.length)return l;l=b;return a};return a};v.models.scatterPlusLineChart=function(){function a(l){l.each(function(l){function ea(){if(H)return Z.select(".nv-point-paths").style("pointer-events","all"),!1;Z.select(".nv-point-paths").style("pointer-events","none");var a=
d3.mouse(this);F.distortion(N).focus(a[0]);E.distortion(N).focus(a[1]);Z.select(".nv-scatterWrap").datum(l.filter(function(a){return!a.disabled})).call(b);R&&Z.select(".nv-x.nv-axis").call(g);P&&Z.select(".nv-y.nv-axis").call(t);Z.select(".nv-distributionX").datum(l.filter(function(a){return!a.disabled})).call(k);Z.select(".nv-distributionY").datum(l.filter(function(a){return!a.disabled})).call(u)}var qa=d3.select(this),ia=this,Y=(I||parseInt(qa.style("width"))||960)-n.left-n.right,ha=(B||parseInt(qa.style("height"))||
400)-n.top-n.bottom;a.update=function(){qa.transition().duration(ca).call(a)};a.container=this;W.disabled=l.map(function(a){return!!a.disabled});if(!Q){var ja;Q={};for(ja in W)Q[ja]=W[ja]instanceof Array?W[ja].slice(0):W[ja]}if(l&&l.length&&l.filter(function(a){return a.values.length}).length)qa.selectAll(".nv-noData").remove();else return ja=qa.selectAll(".nv-noData").data([K]),ja.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ja.attr("x",n.left+
Y/2).attr("y",n.top+ha/2).text(function(a){return a}),a;F=b.xScale();E=b.yScale();var da=qa.selectAll("g.nv-wrap.nv-scatterChart").data([l]);ja=da.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var Z=da.select("g");ja.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ja.append("g").attr("class","nv-x nv-axis");ja.append("g").attr("class","nv-y nv-axis");ja.append("g").attr("class","nv-scatterWrap");ja.append("g").attr("class",
"nv-regressionLinesWrap");ja.append("g").attr("class","nv-distWrap");ja.append("g").attr("class","nv-legendWrap");ja.append("g").attr("class","nv-controlsWrap");da.attr("transform","translate("+n.left+","+n.top+")");G&&Z.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");D&&(q.width(Y/2),da.select(".nv-legendWrap").datum(l).call(q),n.top!=q.height()&&(n.top=q.height(),ha=(B||parseInt(qa.style("height"))||400)-n.top-n.bottom),da.select(".nv-legendWrap").attr("transform","translate("+Y/
2+","+-n.top+")"));O&&(e.width(180).color(["#444"]),Z.select(".nv-controlsWrap").datum(X).attr("transform","translate(0,"+-n.top+")").call(e));b.width(Y).height(ha).color(l.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!l[b].disabled}));da.select(".nv-scatterWrap").datum(l.filter(function(a){return!a.disabled})).call(b);da.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");da=da.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
da.enter().append("g").attr("class","nv-regLines");da=da.selectAll(".nv-regLine").data(function(a){return[a]});da.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);da.transition().attr("x1",F.range()[0]).attr("x2",F.range()[1]).attr("y1",function(a,b){return E(F.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return E(F.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,e){return A(a,e)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===
typeof a.slope||"undefined"===typeof a.intercept?0:1});R&&(g.scale(F).ticks(g.ticks()?g.ticks():Y/100).tickSize(-ha,0),Z.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(g));P&&(t.scale(E).ticks(t.ticks()?t.ticks():ha/36).tickSize(-Y,0),Z.select(".nv-y.nv-axis").call(t));M&&(k.getData(b.x()).scale(F).width(Y).color(l.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!l[b].disabled})),ja.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),
Z.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(l.filter(function(a){return!a.disabled})).call(k));S&&(u.getData(b.y()).scale(E).width(ha).color(l.map(function(a,b){return a.color||A(a,b)}).filter(function(a,b){return!l[b].disabled})),ja.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),Z.select(".nv-distributionY").attr("transform","translate("+(G?Y:-u.size())+",0)").datum(l.filter(function(a){return!a.disabled})).call(u));d3.fisheye&&(Z.select(".nv-background").attr("width",
Y).attr("height",ha),Z.select(".nv-background").on("mousemove",ea),Z.select(".nv-background").on("click",function(){H=!H}),b.dispatch.on("elementClick.freezeFisheye",function(){H=!H}));e.dispatch.on("legendClick",function(e,l){e.disabled=!e.disabled;N=e.disabled?0:2.5;Z.select(".nv-background").style("pointer-events",e.disabled?"none":"all");Z.select(".nv-point-paths").style("pointer-events",e.disabled?"all":"none");e.disabled?(F.distortion(N).focus(0),E.distortion(N).focus(0),Z.select(".nv-scatterWrap").call(b),
Z.select(".nv-x.nv-axis").call(g),Z.select(".nv-y.nv-axis").call(t)):H=!1;a.update()});q.dispatch.on("stateChange",function(b){W=b;V.stateChange(W);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-ha);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+k.size());a.pos=[a.pos[0]+n.left,a.pos[1]+n.top];V.tooltipShow(a)});V.on("tooltipShow",
function(e){if(y){var l=ia.parentNode,k=e.pos[0]+(l.offsetLeft||0),q=e.pos[1]+(l.offsetTop||0),u=e.pos[0]+(l.offsetLeft||0),D=E.range()[0]+n.top+(l.offsetTop||0),A=F.range()[0]+n.left+(l.offsetLeft||0),B=e.pos[1]+(l.offsetTop||0),Q=g.tickFormat()(b.x()(e.point,e.pointIndex)),K=t.tickFormat()(b.y()(e.point,e.pointIndex));null!=C&&v.tooltip.show([u,D],C(e.series.key,Q,K,e,a),"n",1,l,"x-nvtooltip");null!=J&&v.tooltip.show([A,B],J(e.series.key,Q,K,e,a),"e",1,l,"y-nvtooltip");null!=z&&v.tooltip.show([k,
q],z(e.series.key,Q,K,e.point.tooltip,e,a),0>e.value?"n":"s",null,l)}});V.on("changeState",function(b){"undefined"!==typeof b.disabled&&(l.forEach(function(a,e){a.disabled=b.disabled[e]}),W.disabled=b.disabled);a.update()});F.copy();E.copy()});return a}var b=v.models.scatter(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e=v.models.legend(),k=v.models.distribution(),u=v.models.distribution(),n={top:30,right:20,bottom:50,left:75},I=null,B=null,A=v.utils.defaultColor(),F=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=!1,S=!1,D=!0,R=!0,P=!0,G=!1,O=!!d3.fisheye,N=0,H=!1,y=!0,C=function(a,b,e){return"<strong>"+b+"</strong>"},J=function(a,b,e){return"<strong>"+e+"</strong>"},z=function(a,b,e,g){return"<h3>"+a+"</h3><p>"+g+"</p>"},W={},Q=null,V=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),K="No Data Available.",ca=250;b.xScale(F).yScale(E);g.orient("bottom").tickPadding(10);t.orient(G?"right":"left").tickPadding(10);
k.axis("x");u.axis("y");e.updateState(!1);var X=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){V.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",u.size())});V.on("tooltipHide",function(){y&&v.tooltip.cleanup()});a.dispatch=V;a.scatter=b;a.legend=q;a.controls=e;a.xAxis=g;a.yAxis=t;a.distX=k;a.distY=u;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return n;n.top="undefined"!=typeof b.top?b.top:n.top;n.right="undefined"!=typeof b.right?b.right:n.right;n.bottom="undefined"!=typeof b.bottom?b.bottom:n.bottom;n.left="undefined"!=typeof b.left?b.left:
n.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return A;A=v.utils.getColor(b);q.color(A);k.color(A);u.color(A);return a};a.showDistX=function(b){if(!arguments.length)return M;M=b;return a};a.showDistY=function(b){if(!arguments.length)return S;S=b;return a};a.showControls=function(b){if(!arguments.length)return O;O=b;return a};a.showLegend=function(b){if(!arguments.length)return D;
D=b;return a};a.showXAxis=function(b){if(!arguments.length)return R;R=b;return a};a.showYAxis=function(b){if(!arguments.length)return P;P=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return G;G=b;t.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return N;N=b;return a};a.tooltips=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return z;z=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return C;
C=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return J;J=b;return a};a.state=function(b){if(!arguments.length)return W;W=b;return a};a.defaultState=function(b){if(!arguments.length)return Q;Q=b;return a};a.noData=function(b){if(!arguments.length)return K;K=b;return a};a.transitionDuration=function(b){if(!arguments.length)return ca;ca=b;return a};return a};v.models.sparkline=function(){function a(q){q.each(function(a){var q=g-b.left-b.right,v=t-b.top-b.bottom,M=d3.select(this);e.domain(B||
d3.extent(a,u)).range(F||[0,q]);k.domain(A||d3.extent(a,n)).range(E||[v,0]);a=M.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");q=a.selectAll("path").data(function(a){return[a]});q.enter().append("path");q.exit().remove();q.style("stroke",function(a,b){return a.color||I(a,b)}).attr("d",d3.svg.line().x(function(a,b){return e(u(a,b))}).y(function(a,b){return k(n(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(e){if(-1!=e){var g=a[e];g.pointIndex=e;return g}return null}var e=a.map(function(a,b){return n(a,b)}),g=b(e.lastIndexOf(k.domain()[1])),q=b(e.indexOf(k.domain()[0])),e=b(e.length-1);return[q,g,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return e(u(a,a.pointIndex))}).attr("cy",function(a,b){return k(n(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return u(a,
a.pointIndex)==e.domain()[1]?"nv-point nv-currentValue":n(a,a.pointIndex)==k.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},g=400,t=32,q=!0,e=d3.scale.linear(),k=d3.scale.linear(),u=function(a){return a.x},n=function(a){return a.y},I=v.utils.getColor(["#000"]),B,A,F,E;a.options=v.utils.optionsFunc.bind(a);a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?e.top:b.top;b.right="undefined"!=typeof e.right?e.right:
b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.x=function(b){if(!arguments.length)return u;u=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return n;n=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return e;e=b;return a};a.yScale=function(b){if(!arguments.length)return k;
k=b;return a};a.xDomain=function(b){if(!arguments.length)return B;B=b;return a};a.yDomain=function(b){if(!arguments.length)return A;A=b;return a};a.xRange=function(b){if(!arguments.length)return F;F=b;return a};a.yRange=function(b){if(!arguments.length)return E;E=b;return a};a.animate=function(b){if(!arguments.length)return q;q=b;return a};a.color=function(b){if(!arguments.length)return I;I=v.utils.getColor(b);return a};return a};v.models.sparklinePlus=function(){function a(v){v.each(function(A){function R(){if(!n){var a=
y.selectAll(".nv-hoverValue").data(u),k=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+e(b.x()(A[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);u.length&&(k.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",O),k.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em"),y.select(".nv-hoverValue .nv-xValue").text(I(b.x()(A[u[0]],u[0]))),k.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em"),y.select(".nv-hoverValue .nv-yValue").text(B(b.y()(A[u[0]],u[0]))))}}var P=d3.select(this),G=(t||parseInt(P.style("width"))||960)-g.left-g.right,O=(q||parseInt(P.style("height"))||400)-g.top-g.bottom;a.update=function(){a(v)};a.container=
this;if(A&&A.length)P.selectAll(".nv-noData").remove();else{var N=P.selectAll(".nv-noData").data([M]);N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");N.attr("x",g.left+G/2).attr("y",g.top+O/2).text(function(a){return a});return a}N=b.y()(A[A.length-1],A.length-1);e=b.xScale();k=b.yScale();var H=P.selectAll("g.nv-wrap.nv-sparklineplus").data([A]),P=H.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),y=H.select("g");
P.append("g").attr("class","nv-sparklineWrap");P.append("g").attr("class","nv-valueWrap");P.append("g").attr("class","nv-hoverArea");H.attr("transform","translate("+g.left+","+g.top+")");H=y.select(".nv-sparklineWrap");b.width(G).height(O);H.call(b);H=y.select(".nv-valueWrap").selectAll(".nv-currentValue").data([N]);H.enter().append("text").attr("class","nv-currentValue").attr("dx",E?-8:8).attr("dy",".9em").style("text-anchor",E?"end":"start");H.attr("x",G+(E?g.right:0)).attr("y",F?function(a){return k(a)}:
0).style("fill",b.color()(A[A.length-1],A.length-1)).text(B(N));P.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!n){for(var a=d3.mouse(this)[0]-g.left,a=Math.round(e.invert(a)),k=Math.abs(b.x()(A[0],0)-a),q=0,t=0;t<A.length;t++)Math.abs(b.x()(A[t],t)-a)<k&&(k=Math.abs(b.x()(A[t],t)-a),q=t);u=[q];R()}}).on("click",function(){n=!n}).on("mouseout",function(){u=[];R()});y.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-g.left+","+-g.top+")"}).attr("width",
G+g.left+g.right).attr("height",O+g.top)});return a}var b=v.models.sparkline(),g={top:15,right:100,bottom:10,left:50},t=null,q=null,e,k,u=[],n=!1,I=d3.format(",r"),B=d3.format(",.2f"),A=!0,F=!0,E=!1,M="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return g;g.top="undefined"!=typeof b.top?b.top:g.top;g.right="undefined"!=typeof b.right?b.right:g.right;g.bottom="undefined"!=typeof b.bottom?
b.bottom:g.bottom;g.left="undefined"!=typeof b.left?b.left:g.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return q;q=b;return a};a.xTickFormat=function(b){if(!arguments.length)return I;I=b;return a};a.yTickFormat=function(b){if(!arguments.length)return B;B=b;return a};a.showValue=function(b){if(!arguments.length)return A;A=b;return a};a.alignValue=function(b){if(!arguments.length)return F;F=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return E;
E=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};return a};v.models.stackedArea=function(){function a(n){n.each(function(n){var v=g-b.left-b.right,R=t-b.top-b.bottom,N=d3.select(this);E=H.xScale();M=H.yScale();var U=n;n.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=b;return a})});n=n.filter(function(a){return!a.disabled});n=d3.layout.stack().order(B).offset(I).values(function(a){return a.values}).x(k).y(u).out(function(a,
b,e){e=0===u(a)?0:e;a.display={y:e,y0:b}})(n);var N=N.selectAll("g.nv-wrap.nv-stackedarea").data([n]),y=N.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=y.append("defs"),y=y.append("g"),J=N.select("g");y.append("g").attr("class","nv-areaWrap");y.append("g").attr("class","nv-scatterWrap");N.attr("transform","translate("+b.left+","+b.top+")");H.width(v).height(R).x(k).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(n.map(function(a,b){return a.color||q(a,a.seriesIndex)}));
J.select(".nv-scatterWrap").datum(n).call(H);C.append("clipPath").attr("id","nv-edge-clip-"+e).append("rect");N.select("#nv-edge-clip-"+e+" rect").attr("width",v).attr("height",R);J.attr("clip-path",F?"url(#nv-edge-clip-"+e+")":"");var z=d3.svg.area().x(function(a,b){return E(k(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y+a.display.y0)}).interpolate(A),W=d3.svg.area().x(function(a,b){return E(k(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y0)}),
v=J.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});v.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return W(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);D.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);D.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);D.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});v.exit().remove();v.style("fill",function(a,b){return a.color||q(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||q(a,a.seriesIndex)});v.transition().attr("d",function(a,b){return z(a.values,b)});H.dispatch.on("elementMouseover.area",function(a){J.select(".nv-chart-"+e+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});H.dispatch.on("elementMouseout.area",function(a){J.select(".nv-chart-"+e+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,e=a[0].length,g=1/b,k,l,n,q=[];for(l=0;l<e;++l){for(n=k=0;k<U.length;k++)n+=u(U[k].values[l]);if(n)for(k=0;k<b;k++)a[k][l][1]/=n;else for(k=0;k<b;k++)a[k][l][1]=g}for(l=0;l<e;++l)q[l]=0;return q}});return a}var b={top:0,right:0,bottom:0,left:0},g=960,t=500,q=v.utils.defaultColor(),
e=Math.floor(1E5*Math.random()),k=function(a){return a.x},u=function(a){return a.y},n="stack",I="zero",B="default",A="linear",F=!1,E,M,H=v.models.scatter(),D=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");H.size(2.2).sizeDomain([2.2,2.2]);H.dispatch.on("elementClick.area",function(a){D.areaClick(a)});H.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];D.tooltipShow(a)});H.dispatch.on("elementMouseout.tooltip",function(a){D.tooltipHide(a)});
a.dispatch=D;a.scatter=H;d3.rebind(a,H,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=v.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return k;k=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return u;u=d3.functor(b);return a};a.margin=function(e){if(!arguments.length)return b;b.top="undefined"!=typeof e.top?
e.top:b.top;b.right="undefined"!=typeof e.right?e.right:b.right;b.bottom="undefined"!=typeof e.bottom?e.bottom:b.bottom;b.left="undefined"!=typeof e.left?e.left:b.left;return a};a.width=function(b){if(!arguments.length)return g;g=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.clipEdge=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return q;q=v.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return I;
I=b;return a};a.order=function(b){if(!arguments.length)return B;B=b;return a};a.style=function(b){if(!arguments.length)return n;n=b;switch(n){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return A;
A=b;return a};return a};v.models.stackedAreaChart=function(){function a(K){K.each(function(K){var X=d3.select(this),l=this,L=(n||parseInt(X.style("width"))||960)-u.left-u.right,ea=(I||parseInt(X.style("height"))||400)-u.top-u.bottom;a.update=function(){X.transition().duration(V).call(a)};a.container=this;U.disabled=K.map(function(a){return!!a.disabled});if(!y){var qa;y={};for(qa in U)y[qa]=U[qa]instanceof Array?U[qa].slice(0):U[qa]}if(K&&K.length&&K.filter(function(a){return a.values.length}).length)X.selectAll(".nv-noData").remove();
else return qa=X.selectAll(".nv-noData").data([C]),qa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),qa.attr("x",u.left+L/2).attr("y",u.top+ea/2).text(function(a){return a}),a;G=b.xScale();O=b.yScale();qa=X.selectAll("g.nv-wrap.nv-stackedAreaChart").data([K]);var ia=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Y=qa.select("g");ia.append("rect").style("opacity",0);ia.append("g").attr("class","nv-x nv-axis");
ia.append("g").attr("class","nv-y nv-axis");ia.append("g").attr("class","nv-stackedWrap");ia.append("g").attr("class","nv-legendWrap");ia.append("g").attr("class","nv-controlsWrap");ia.append("g").attr("class","nv-interactive");Y.select("rect").attr("width",L).attr("height",ea);F&&(ia=A?L-z:L,q.width(ia),Y.select(".nv-legendWrap").datum(K).call(q),u.top!=q.height()&&(u.top=q.height(),ea=(I||parseInt(X.style("height"))||400)-u.top-u.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+
(L-ia)+","+-u.top+")"));if(A){var ha=[{key:Q.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:Q.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:Q.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:Q.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];z=W.length/3*260;ha=ha.filter(function(a){return-1!==W.indexOf(a.metaKey)});e.width(z).color(["#444",
"#444","#444"]);Y.select(".nv-controlsWrap").datum(ha).call(e);u.top!=Math.max(e.height(),q.height())&&(u.top=Math.max(e.height(),q.height()),ea=(I||parseInt(X.style("height"))||400)-u.top-u.bottom);Y.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}qa.attr("transform","translate("+u.left+","+u.top+")");S&&Y.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)");D&&(k.width(L).height(ea).margin({left:u.left,top:u.top}).svgContainer(X).xScale(G),qa.select(".nv-interactive").call(k));
b.width(L).height(ea);Y.select(".nv-stackedWrap").datum(K).transition().call(b);E&&(g.scale(G).ticks(L/100).tickSize(-ea,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+ea+")"),Y.select(".nv-x.nv-axis").transition().duration(0).call(g));H&&(t.scale(O).ticks("wiggle"==b.offset()?0:ea/36).tickSize(-L,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):N),Y.select(".nv-y.nv-axis").transition().duration(0).call(t));b.dispatch.on("areaClick.toggle",function(b){1===
K.filter(function(a){return!a.disabled}).length?K.forEach(function(a){a.disabled=!1}):K.forEach(function(a,e){a.disabled=e!=b.seriesIndex});U.disabled=K.map(function(a){return!!a.disabled});J.stateChange(U);a.update()});q.dispatch.on("stateChange",function(b){U.disabled=b.disabled;J.stateChange(U);a.update()});e.dispatch.on("legendClick",function(e,g){e.disabled&&(ha=ha.map(function(a){a.disabled=!0;return a}),e.disabled=!1,b.style(e.style),U.style=b.style(),J.stateChange(U),a.update())});k.dispatch.on("elementMousemove",
function(e){b.clearHighlights();var n,q,y,A=[];K.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(g,k){q=v.interactiveBisect(g.values,e.pointXValue,a.x());b.highlightPoint(k,q,!0);var l=g.values[q];if("undefined"!==typeof l){"undefined"===typeof n&&(n=l);"undefined"===typeof y&&(y=a.xScale()(a.x()(l,q)));var t="expand"==b.style()?l.display.y:a.y()(l,q);A.push({key:g.key,value:t,color:B(g,g.seriesIndex),stackedValue:l.display})}});A.reverse();if(2<A.length){var z=a.yScale().invert(e.mouseY),
D=null;A.forEach(function(a,b){z=Math.abs(z);var e=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);z>=e&&z<=g+e&&(D=b)});null!=D&&(A[D].highlight=!0)}var C=g.tickFormat()(a.x()(n,q)),E="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return t.tickFormat()(a)};k.tooltip.position({left:y+u.left,top:e.mouseY+u.top}).chartContainer(l.parentNode).enabled(R).valueFormatter(E).data({value:C,series:A})();k.renderGuideLine(y)});k.dispatch.on("elementMouseout",function(a){J.tooltipHide();
b.clearHighlights()});J.on("tooltipShow",function(e){if(R){var k=l.parentNode,n=e.pos[0]+(k.offsetLeft||0),q=e.pos[1]+(k.offsetTop||0),u=g.tickFormat()(b.x()(e.point,e.pointIndex)),y=t.tickFormat()(b.y()(e.point,e.pointIndex)),u=P(e.series.key,u,y,e,a);v.tooltip.show([n,q],u,0>e.value?"n":"s",null,k)}});J.on("changeState",function(e){"undefined"!==typeof e.disabled&&K.length===e.disabled.length&&(K.forEach(function(a,b){a.disabled=e.disabled[b]}),U.disabled=e.disabled);"undefined"!==typeof e.style&&
b.style(e.style);a.update()})});return a}var b=v.models.stackedArea(),g=v.models.axis(),t=v.models.axis(),q=v.models.legend(),e=v.models.legend(),k=v.interactiveGuideline(),u={top:30,right:25,bottom:50,left:60},n=null,I=null,B=v.utils.defaultColor(),A=!0,F=!0,E=!0,H=!0,S=!1,D=!1,R=!0,P=function(a,b,e,g,k){return"<h3>"+a+"</h3><p>"+e+" on "+b+"</p>"},G,O,N=d3.format(",.2f"),U={style:b.style()},y=null,C="No Data Available.",J=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),z=250,
W=["Stacked","Stream","Expanded"],Q={},V=250;g.orient("bottom").tickPadding(7);t.orient(S?"right":"left");e.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];J.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){J.tooltipHide(a)});J.on("tooltipHide",function(){R&&v.tooltip.cleanup()});a.dispatch=J;a.stacked=b;a.legend=q;a.controls=e;a.xAxis=g;a.yAxis=t;a.interactiveLayer=k;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=v.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return u;u.top="undefined"!=typeof b.top?b.top:u.top;u.right="undefined"!=typeof b.right?b.right:u.right;u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom;u.left="undefined"!=typeof b.left?b.left:u.left;return a};a.width=function(b){if(!arguments.length)return n;n=b;return a};a.height=
function(b){if(!arguments.length)return I;I=b;return a};a.color=function(e){if(!arguments.length)return B;B=v.utils.getColor(e);q.color(B);b.color(B);return a};a.showControls=function(b){if(!arguments.length)return A;A=b;return a};a.showLegend=function(b){if(!arguments.length)return F;F=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return H;H=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;t.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return D;D=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return P;P=b;return a};a.tooltips=function(b){if(!arguments.length)return R;R=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.state=function(b){if(!arguments.length)return U;U=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=
function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return V;V=b;return a};a.controlsData=function(b){if(!arguments.length)return W;W=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return Q;Q=b;return a};t.setTickFormat=t.tickFormat;t.tickFormat=function(a){if(!arguments.length)return N;N=a;return t};return a}})();
(function(H,v){var a=0;H.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=a;a+=1;this.chart=this.table=null},_init:function(){var a=
H(this.element),g=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var t=a.find(".pt-chart");this.chart=t.length?t.first():null;g.renderFilter||g.renderOptions?(t="#"+a.attr("id"),g.renderOptions?(H(t+"-options").show(),g.collapseOptions&&(H(t+"-options legend").siblings().toggle(),H(t+"-options legend").children().toggle())):H(t+"-options").hide(),g.renderFilter?(H(t+
"-filters").show(),g.collapseFilter&&(H(t+"-filters legend").siblings().toggle(),H(t+"-filters legend").children().toggle())):H(t+"-options").hide()):a.find(".pt-form-container").hide();g.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());g.numberFormatter=function(a){var b=g.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");a=b[0];b=1<b.length?"."+b[1]:"";
a=a.replace(new RegExp("\\B(?=(\\d{"+g.thousandGrouping+"})+(?!\\d))","g"),g.thousandSeparator);return a+b};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=H(this.element),g=null;this._unbindEvents();var t=a.find('input[type="hidden"][name="pivotdata"]');t.length&&(g=JSON.parse(H(t).first().val()));g?"count"==g.method&&(this.options.precision=0,this.options.minTickSize=1):(g={empty:!0},a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide());
this.data=g;g.nodata?(a.find(".pt-table").first().empty().append(H('<div class="pt-no-data">'+g.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();g.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=H(this.element),g=a.find(".pt-table").first().empty();
this.table=null;var t=this.data;if(!t.empty)if(this.options.renderTable){var q=t.cells,e=t.cols,k=t.rows,u=t.total,n=t.labels,v=this.options,B=v.showTotals,A=!1;1==e.length&&null===e[0][4]&&(A=!0);q=t.cells.slice(0);if(A&&B)for(e=[],t=0;t<k.length;t++)q[t]=[];else{for(t=0;t<k.length;t++)q[t]=q[t].filter(function(a,b){return"__other__"!=e[b][0]});e=e.filter(function(a){return"__other__"!=a[0]})}t=!1;1==e.length&&null===e[0][4]&&(t=!0);t&&B?(k=[],q=[]):(q=q.filter(function(a,b){return"__other__"!=k[b][0]}),
k=k.filter(function(a){return"__other__"!=a[0]}));g=d3.select(g.get(0)).append("table").attr("class","dataTable display report");g.append("thead").call(this._renderHeader,e,n,v).call(this._renderColumns,e,n,v);g.append("tbody").call(this._renderRows,this,k,e,n,q,v);v.showTotals&&g.append("tfoot").call(this._renderFooter,k,e,n,u);this.table=H(g.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),
a.find(".pt-hide-table").hide()},_renderHeader:function(a,g,t,q){a=a.append("tr");a.append("th").attr("scope","col").text(t.layer);g.length&&a.append("th").attr({scope:"col",colspan:g.length}).text(t.cols);q.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(t.total);return a},_renderColumns:function(a,g,t,q){a=a.append("tr");a.append("th").attr({scope:"col","class":"pt-rows-header"}).text(t.rows);var e=!1;1==g.length&&null===g[0][4]&&(e=!0);a.selectAll("th.pt-data").data(g).enter().append("th").attr({scope:"col",
"class":"pt-col-label"}).text(function(a){return e?"":a[4]});return a},_renderRows:function(a,g,t,q,e,k,u){t=a.selectAll("tr.pt-row").data(t).enter().append("tr").attr("class",function(a,b){return b%2?"odd":"even"});var n=!1;1==t.length&&null===t[0][4]&&(n=!0);t.append("td").text(function(a){return n?"":a[4]});t.selectAll("td.pt-cell").data(function(a,b){return k[b]}).enter().append("td").attr("class","pt-cell").each(g._renderCell,e);u.showTotals&&t.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});
return t},_renderCell:function(a,g,t){g=d3.select(this);for(var q=a.items,e,k=0,u=q.length;k<u;k++){e=q[k];var n=g.append("div").attr("class","pt-cell-value");null===e?n.text(t.none):H.isArray(e)?n.append("ul").selectAll("li").data(e).enter().append("li").html(function(a){return a}):n.text(e);e=a.keys[k];q&&e&&e.length&&(H(n.node()).data("keys",e).data("fact",k),n.append("div").attr("class","pt-cell-zoom"));1<u-k&&n.append("span").text(" / ")}},_renderFooter:function(a,g,t,q,e){g=g.length%2?"odd":
"even";a=a.append("tr").attr("class",g+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(q.total);a.selectAll("td.pt-col-total").data(t).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(e);return a},_renderChartOptions:function(){var a=H(this.element),g=a.find(".pt-chart-controls").first().empty(),t=this.data;if(!t.empty&&this.options.renderChart){var t=t.labels,q=a.attr("id"),a=t.layer,
e=t.rows,k=t.cols,u=t.per,n=H('<div class="pt-chart-opts">'),v=q+"-pchart-rows",B=q+"-vchart-rows",A=q+"-hchart-rows",F=q+"-schart-rows",E=q+"-pchart-cols",M=q+"-vchart-cols",S=q+"-hchart-cols",q=q+"-schart-cols";a&&H(n).append(H('<span class="pt-chart-label">'+a+": </span>"));e&&H(n).append(H('<div id="'+v+'" class="pt-chart-icon pt-pchart"/><div id="'+B+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+e+"</span>"));k&&H(n).append(H('<div id="'+E+'" class="pt-chart-icon pt-pchart"/><div id="'+
M+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+k+"</span>"));e&&k&&H(n).append(H('<span class="pt-chart-label">| '+t.breakdown+': </span><div id="'+F+'" class="pt-chart-icon pt-schart"/><div id="'+A+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+e+'</span><div id="'+q+'"  class="pt-chart-icon pt-schart"/><div id="'+S+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+k+"</span>"));H(g).append(n)}},_truncateLabel:function(a,
g){return a&&a.length>g?a.substring(0,g-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var g=H(this.element),t=this.data;g.find(".pt-chart-contents").hide();if(g=this.chart)if(H(g).unbind("plothover").unbind("plotclick").empty(),!t.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{g=this.options.collapseChart;if("undefined"==typeof a||!a){if(g)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(g)return;a=this.options.defaultChart}if("undefined"!=
typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;g=a.type;a=a.axis;var q=t.labels,e=q.per,k=q.layer+" "+e+" "+q.rows,q=q.layer+" "+e+" "+q.cols,e=t.filter,u=e[0],n=e[1];"piechart"==g?"rows"==a?this._renderPieChart(t.rows,k,u):this._renderPieChart(t.cols,q,n):"barchart"==g?"rows"==a?this._renderBarChart(t.rows,t.facts,k,u):this._renderBarChart(t.cols,t.facts,q,n):"breakdown"==g?"rows"==a?this._renderBreakDown(t,0,k,e):this._renderBreakDown(t,1,q,e):"spectrum"==g&&this._renderSpectrum(t,
a,e)}}},_renderPieChart:function(a,g,t){var q=this.chart;if(q){H(q).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});g?H(q).siblings(".pt-chart-title").html("<h4>"+g+"</h4>"):H(q).siblings(".pt-chart-title").empty();var e=[],k=0;for(g=0;g<a.length;g++){var u=a[g];!u[1]&&0<=u[2][0]&&(e.push({index:u[0],label:u[4],value:u[2][0],key:u[3]}),k+=u[2][0])}var n=this;n.chartOptions.currentDataIndex=null;var v=function(a){if(n.chartOptions.currentDataIndex!=a.pointIndex){n._removeChartTooltip();
n.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,e=Math.round(b/k*100),g='<div class="pt-tooltip-label">'+a.label+"</div>";n._renderChartTooltip(a.pos[0],a.pos[1],g+('<div class="pt-tooltip-text">'+b+" ("+e+"%)</div>"));H(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).pieLabelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0).tooltips(!1);
a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",v).on("elementMouseout",function(a){H(".pt-tooltip").remove();n.chartOptions.currentDataIndex=null;n.chartOptions.currentSeriesIndex=null});if(n.options.exploreChart&&t)a.pie.dispatch.on("elementClick",function(a){a=a.point;n._chartExplore([["__other__"==a.index?t+"__belongs":t,a.key]])});d3.select(H(q).get(0)).append("svg").attr("class","nv").datum(e).transition().duration(1200).call(a);nv.utils.windowResize(a.update);return a})}},
_renderBarChart:function(a,g,t,q){var e=this.chart;if(e){H(e).closest(".pt-chart-contents").show().css({width:"96%"});for(var k=[],u=this._truncateLabel,n,v,B,A=0;A<g.length;A++){n={key:g[A][2]};v=[];for(var F=0;F<a.length;F++)B=a[F],v.push({label:B[4],value:B[2][A],filterIndex:B[0],filterKey:B[3]});n.values=v;k.push(n)}H(e).css({height:"360px"});t?H(e).siblings(".pt-chart-title").html("<h4>"+t+"</h4>"):H(e).siblings(".pt-chart-title").empty();var E=function(a,b,e,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},g.pointIndex)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},M=this,S=this.options.numberFormatter;nv.addGraph(function(){var a,b;1<k.length?(a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(E).showControls(!1),b=a.multibar):(a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).tooltips(!0).tooltipContent(E).showValues(!0),
a.valueFormat(S),b=a.discretebar);a.yAxis.tickFormat(S);a.xAxis.tickFormat(function(a){return u(a,18)});d3.select(H(e).get(0)).append("svg").attr("class","nv").datum(k).transition().duration(500).call(a);if(M.options.exploreChart&&q)b.dispatch.on("elementClick",function(a){var b=a.point.filterKey;null===b&&(b="None");var e=q;"__other__"==a.point.filterIndex&&(e+="__belongs");M._chartExplore([[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,g,t,q){var e=this.chart;
if(e){H(e).closest(".pt-chart-contents").show().css({width:"96%"});var k=a.cells,u,n,v=[],B=[],A,F;0===g?(u=a.rows,n=a.cols,a=function(a,b){return k[v[a]][B[b]].values[0]},A=q[0],F=q[1]):(u=a.cols,n=a.rows,a=function(a,b){return k[B[b]][v[a]].values[0]},A=q[1],F=q[0]);var E,M;q=[];g=[];E=0;for(M=u.length;E<M;E++)u[E][1]||(q.push(u[E]),v.push(E));E=0;for(M=n.length;E<M;E++)n[E][1]||(g.push(n[E]),B.push(E));var S=[];for(u=0;u<g.length;u++){n={key:g[u][4],filterIndex:g[u][0],filterKey:g[u][3]};E=[];
for(M=0;M<q.length;M++)E.push({label:q[M][4],filterIndex:q[M][0],filterKey:q[M][3],value:a(M,u)});n.values=E;S.push(n)}a=Math.max(q.length*Math.max(16*(g.length+1),50)+70,360);H(e).css({height:a+"px"});t?H(e).siblings(".pt-chart-title").html("<h4>"+t+"</h4>"):H(e).siblings(".pt-chart-title").empty();var D=function(a,b,e,g){b=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},g.seriesIndex)+'">'+a+'</div><div class="pt-tooltip-text">'+b.label+
': <span class="pt-tooltip-value">'+b.value+"</span></div></div>"},R=this,P=this.options.numberFormatter,G=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).tooltips(!0).tooltipContent(D).transitionDuration(350).showControls(!0);a.valueFormat(P);a.yAxis.tickFormat(P);a.xAxis.tickFormat(function(a){return G(a,24)});d3.select(H(e).get(0)).append("svg").attr("class",
"nv").datum(S).call(a);if(R.options.exploreChart&&A&&F)a.multibar.dispatch.on("elementClick",function(a){var b=a.series.filterKey,e;null===b&&(b="None");e="__other__"==a.series.filterIndex?F+"__belongs":F;var g=a.point.filterKey;null===g&&(g="None");R._chartExplore([["__other__"==a.point.filterIndex?A+"__belongs":A,g],[e,b]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(a,g,t){var q=this.chart;if(q){var e=this,k=a.cells,u=a.labels,n,I,B,A,F,E;"rows"==g?(n=a.rows,I=a.cols,
g=u.rows,B=u.cols,A=t[0],F=t[1],E=function(a,b){return k[a][b]}):(n=a.cols,I=a.rows,g=u.cols,B=u.rows,A=t[1],F=t[0],E=function(a,b){return k[b][a]});var M=function(a,b){return null===a?I[b]:null===b?n[a]:E(a,b)},S=function(a,b){b===v&&(b="silver");for(var e=[],g,k,l=0;l<I.length;l++)g=M(null,l),k=null===a?g[2][0]:M(a,l).values[0],!g[1]&&0<=g[2][0]&&e.push({filterIndex:g[0],filterKey:g[3],label:g[4],value:k,color:b});return e},D=[],R=0;for(t=0;t<n.length;t++){var P=M(t,null);!P[1]&&0<=P[2][0]&&(D.push({position:t,
filterIndex:P[0],filterKey:P[3],label:P[4],value:P[2][0]}),R+=P[2][0])}e.chartOptions.currentDataIndex=null;H(q).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();H(q).siblings(".pt-chart-title").empty();t=H('<div class="pt-spectrum-pie">').appendTo(q);var q=H('<div class="pt-spectrum-bar">').appendTo(q),G=this.options.numberFormatter,O=this._truncateLabel,N=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!0).tooltipContent(function(a,
b,e,g){a=g.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+G(a.value)+"</div></div>"}).showValues(!0);N.valueFormat(G);N.yAxis.tickFormat(G);N.xAxis.tickFormat(function(a){return O(a,18)});var U=d3.select(H(q).get(0)).append("svg").attr("class","nv"),q=Math.floor(t.width()/2)-30,y=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(q).margin({top:-20,
left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35).tooltips(!1);y.legend.align(!0).rightAlign(!1);y.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});y.pie.dispatch.on("elementMouseover",function(a){if(e.chartOptions.currentDataIndex!=a.pointIndex){e._removeChartTooltip();e.chartOptions.currentDataIndex=a.pointIndex;var b=a.value,g=Math.round(b/R*100),k='<div class="pt-tooltip-label">'+a.label+
"</div>";e._renderChartTooltip(a.pos[0],a.pos[1],k+('<div class="pt-tooltip-text">'+b+" ("+g+"%)</div>"));H(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},a.pointIndex)})}}).on("elementMouseout",function(a){H(".pt-tooltip").remove();e.chartOptions.currentDataIndex=null;e.chartOptions.currentSeriesIndex=null});var C=d3.select(H(t).get(0)).append("svg").attr("class","nv").style({"min-width":q-30+"px"}),q=d3.select(H(t).get(0)).append("div").attr("class","pt-spectrum-form");q.append("h4").html(u.layer+
" "+u.per+" "+B);q.append("label").html(g+":");var J=q.append("select");J.append("option").attr("value","null").style("font-weight","bold").html(e.options.textAll);J.selectAll(".pt-series-item").data(D).enter().append("option").attr("class","pt-series-item").attr("value",function(a,b){return b}).html(function(a){return a.label});q.append("label").html(u.total+":");var z=q.append("span").text(a.total),W=function(g){var k;if(null===g||e.chartOptions.currentSpectrumIndex==g)k=function(a,b){return nv.utils.defaultColor()({},
b)},C.selectAll(".nv-slice").style("fill",k).style("stroke",k),k=S(null),U.datum([{key:null,filterIndex:null,filterKey:null,values:k}]),N.update(),e.chartOptions.currentSpectrumIndex=null,J.property("value","null"),z.text(a.total);else{var n=D[g],q=nv.utils.defaultColor()({},g);k=function(a,b){return b==g?q:"silver"};C.selectAll(".nv-slice").style("fill",k).style("stroke",k);k=S(n.position,q);U.datum([{key:n.position,filterIndex:n.filterIndex,filterKey:n.filterKey,values:k}]);N.update();e.chartOptions.currentSpectrumIndex=
g;J.property("value",g);z.text(D[g].value)}};y.pie.dispatch.on("elementClick",function(a){W(a.index)});J.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?W(null):W(a)});nv.addGraph(function(){C.datum(D).transition().duration(1200).call(y);nv.utils.windowResize(y.update);return y});nv.addGraph(function(){U.datum([{key:null,filterIndex:null,filterKey:null,values:S(null)}]).transition().duration(500).call(N);if(e.options.exploreChart&&A&&F)N.discretebar.dispatch.on("elementClick",
function(a){var b=a.series.filterIndex,g=a.series.filterKey,k=a.point.filterIndex;a=a.point.filterKey;var n=[];null!==b&&n.push(["__other__"==b?A+"__belongs":A,g||"None"]);null!==k&&n.push(["__other__"==k?F+"__belongs":F,a||"None"]);e._chartExplore(n)});nv.utils.windowResize(N.update);return N})}},_chartExplore:function(a){var g=this.options,t=H(this.element).closest(".ui-tabs"),q=g.filterTab;if(t.length&&!1!==q)g=(g=g.filterForm)?H("#"+g):v,S3.search.setCurrentFilters(g,a),a=q?H("#"+q).index():0,
t.tabs("option","active",a);else if(t=g.filterURL)a=this._updateURL(t,a),window.open(a,"_blank")},_renderChartTooltip:function(a,g,t){H('<div class="pt-tooltip">'+t+"</div>").css({position:"absolute",display:"none",top:g-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){H(".pt-tooltip").remove();this.chartOptions.currentDataIndex=
null;this.chartOptions.currentSeriesIndex=null},_getOptions:function(){var a="#"+H(this.element).attr("id");return{rows:H(a+"-rows").val(),cols:H(a+"-cols").val(),fact:H(a+"-fact").val(),totals:H(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+H(this.element).attr("id"),g=null,a=H(a+"-filters");if(a.length)try{g=S3.search.getCurrentFilters(a.first())}catch(t){}return g},_updateURL:function(a,g){var t,q,e=[],k={};t={};var u,n,v,B;if(g)for(u=0,n=g.length;u<n;u++)t=g[u],B=t[0],k[B]=
!0,e.push(B+"="+t[1]);t=this.options.ajaxURL.split("?");if(1<t.length){q=t[1].split("&");t={};u=0;for(n=q.length;u<n;u++)v=q[u].split("="),1<v.length&&(B=decodeURIComponent(v[0]),k[B]||(e.push(B+"="+decodeURIComponent(v[1])),t[B]=!0));for(B in t)k[B]=!0}t=a.split("?");if(1<t.length)for(q=t[1].split("&"),u=0,n=q.length;u<n;u++)v=q[u].split("="),1<v.length&&(B=decodeURIComponent(v[0]),k[B]||e.push(B+"="+decodeURIComponent(v[1])));e=e.join("&");k=t[0];e&&(k=k+"?"+e);return k},_updateAjaxURL:function(a,
g){var t=this.options.ajaxURL.split("?"),q=[],e=!1,k;1<t.length?(k=t[1],k=k.split("&")):k=[];var u,n,v;if(a)for(u in a)v=a[u],n=u+"="+v,"totals"==u?this.options.showTotals=v?!0:!1:e||-1!=H.inArray(n,k)||(e=!0),q.push(n);u={};v={};var B,A,F;if(g)for(B=0,A=g.length;B<A;B++)n=g[B],F=n[0],n=n[1],null===n?u[F]||(v[F]=!0):(v[F]&&(v[F]=!1),u[F]?u[F].push(F+"="+n):u[F]=[F+"="+n]);B=0;for(A=k.length;B<A;B++)n=k[B].split("="),1<n.length&&(F=decodeURIComponent(n[0]),n=decodeURIComponent(n[1]),v[F]?e=!0:u[F]?
e||-1!=H.inArray(F+"="+n,u[F])||(e=!0):"aggregate"!=F&&(a&&a.hasOwnProperty(F)||q.push(k[B])));for(F in u)for(B=0,A=u[F].length;B<A;B++)e||-1!=H.inArray(u[F][B],k)||(e=!0),q.push(u[F][B]);q=q.join("&");t=t[0];q&&(t=t+"?"+q);this.options.ajaxURL=t;return e},reload:function(a,g,t){t="undefined"!=typeof t?t:!0;"undefined"==typeof g&&(g=this._getFilters());var q=this,e=this.element,k,u=e.find('input[type="hidden"][name="pivotdata"]');if(u.length){e.find(".pt-throbber").show();if(a||g)k=this._updateAjaxURL(a,
g);k||t?(a=this.options.ajaxURL,g=H.ajaxS3,H.searchS3!==v&&(g=H.searchS3),e.find(".pt-empty").hide(),g({url:a,dataType:"json",type:"GET",success:function(a){u.first().val(JSON.stringify(a));q.refresh()},error:function(a,b,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):q.refresh()}},_bindEvents:function(){var a=this,g=H(this.element),t=this.data,q="#"+g.attr("id");H(q+"-options legend").click(function(){H(this).siblings().toggle();H(this).children().toggle()});H(q+"-filters legend").click(function(){H(this).siblings().toggle();
H(this).children().toggle()});g.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;g.find(".pt-table").hide();H(this).siblings(".pt-show-table").show();H(this).hide()});g.find(".pt-show-table").click(function(){a.table_options.hidden=!1;g.find(".pt-table").show();H(this).siblings(".pt-hide-table").show();H(this).hide()});H(q+"-totals").click(function(){var e=H(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});H(q+"-rows,"+q+"-cols,"+q+"-fact").on("change.autosubmit",
function(){H(q+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var e=this.options.autoSubmit;H(q+"-pt-form").on("optionChanged",function(){var g=H(this);if(!g.data("noAutoSubmit")){var q=g.data("autoSubmitTimeout");q&&clearTimeout(q);q=setTimeout(function(){var e=a._getOptions(),g=a._getFilters();a.reload(e,g,!1)},e);g.data("autoSubmitTimeout",q)}})}else H(q+"-pt-form input.pt-submit").click(function(){var e=a._getOptions(),g=a._getFilters();a.reload(e,g,!1)});H(q+" div.pt-table div.pt-cell-zoom").click(function(a){a=
H(a.currentTarget);var b=a.closest(".pt-cell-value"),e=b.find(".pt-cell-records");if(0<e.length)e.remove(),a.removeClass("opened");else{for(var g=b.data("keys"),e=b.data("fact"),b=t.lookups[t.facts[e][0]],e=H("<div/>").addClass("pt-cell-records"),q=H("<ul/>"),v=0;v<g.length;v++)q.append("<li>"+b[g[v]]+"</li>");e.append(q);a.addClass("opened").after(e)}});H(q+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});H(q+"-vchart-rows").click(function(){a._renderChart({type:"barchart",
axis:"rows"})});H(q+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});H(q+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});H(q+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});H(q+"-vchart-cols").click(function(){a._renderChart({type:"barchart",axis:"cols"})});H(q+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});H(q+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",
axis:"cols"})});g.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=H(this.element),g="#"+a.attr("id");H(g+" div.pt-table div.pt-cell-zoom").unbind("click");H(g+"-options legend").unbind("click");H(g+"-filters legend").unbind("click");H(g+"-totals").unbind("click");H(g+"-rows,"+g+"-cols,"+g+"-fact").unbind("change.autosubmit");H(g+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");H(g+"-pchart-rows,"+g+"-vchart-rows,"+g+"-schart-rows,"+
g+"-hchart-rows,"+g+"-pchart-cols,"+g+"-vchart-cols,"+g+"-schart-cols,"+g+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
