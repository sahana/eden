(function(d){d.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var a=this,b=this.options,c=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[c,c+"-button",c+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
d("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=d("<span />").append(this.newelement).insertAfter(this.element);(c=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",c);this.newelement.data("selectelement",this.element);this.selectmenuIcon=d('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+a.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(b){a.newelement.focus();b.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(c){a._toggle(c,!0);"popup"==b.style&&(a._safemouseup=!1,setTimeout(function(){a._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(b){var c=!1;switch(b.keyCode){case d.ui.keyCode.ENTER:c=!0;break;case d.ui.keyCode.SPACE:a._toggle(b);
break;case d.ui.keyCode.UP:b.altKey?a.open(b):a._moveSelection(-1);break;case d.ui.keyCode.DOWN:b.altKey?a.open(b):a._moveSelection(1);break;case d.ui.keyCode.LEFT:a._moveSelection(-1);break;case d.ui.keyCode.RIGHT:a._moveSelection(1);break;case d.ui.keyCode.TAB:c=!0;break;case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.HOME:a.index(0);break;case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.END:a.index(a._optionLis.length);break;default:c=!0}return c}).bind("keypress.selectmenu",function(b){0<b.which&&a._typeAhead(b.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){b.disabled||d(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){b.disabled||d(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){b.disabled||d(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){b.disabled||d(this).removeClass("ui-state-focus")});d(document).bind("mousedown.selectmenu-"+this.ids[0],function(b){a.isOpen&&a.close(b)});this.element.bind("click.selectmenu",function(){a._refreshValue()}).bind("focus.selectmenu",
function(){a.newelement&&a.newelement[0].focus()});b.width||(b.width=this.element.outerWidth());this.newelement.width(b.width);this.element.hide();this.list=d("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=d("<div />",{"class":a.widgetBaseClass+"-menu"}).append(this.list).appendTo(b.appendTo);this.list.bind("keydown.selectmenu",function(b){var c=false;switch(b.keyCode){case d.ui.keyCode.UP:b.altKey?a.close(b,
true):a._moveFocus(-1);break;case d.ui.keyCode.DOWN:b.altKey?a.close(b,true):a._moveFocus(1);break;case d.ui.keyCode.LEFT:a._moveFocus(-1);break;case d.ui.keyCode.RIGHT:a._moveFocus(1);break;case d.ui.keyCode.HOME:a._moveFocus(":first");break;case d.ui.keyCode.PAGE_UP:a._scrollPage("up");break;case d.ui.keyCode.PAGE_DOWN:a._scrollPage("down");break;case d.ui.keyCode.END:a._moveFocus(":last");break;case d.ui.keyCode.ENTER:case d.ui.keyCode.SPACE:a.close(b,true);d(b.target).parents("li:eq(0)").trigger("mouseup");
break;case d.ui.keyCode.TAB:c=true;a.close(b,true);d(b.target).parents("li:eq(0)").trigger("mouseup");break;case d.ui.keyCode.ESCAPE:a.close(b,true);break;default:c=true}return c}).bind("keypress.selectmenu",function(b){b.which>0&&a._typeAhead(b.which,"focus");return true}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return false});d(window).bind("resize.selectmenu-"+this.ids[0],d.proxy(a.close,this))},_init:function(){var a=this,b=this.options,c=[];this.element.find("option").each(function(){var f=
d(this);c.push({value:f.attr("value"),text:a._formatText(f.text()),selected:f.attr("selected"),disabled:f.attr("disabled"),classes:f.attr("class"),typeahead:f.attr("typeahead"),parentOptGroup:f.parent("optgroup"),bgImage:b.bgImage.call(f)})});var f="popup"==a.options.style?" ui-state-active":"";this.list.html("");if(c.length)for(var e=0;e<c.length;e++){var h={role:"presentation"};c[e].disabled&&(h["class"]=this.namespace+"-state-disabled");var g={html:c[e].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};c[e].disabled&&(g["aria-disabled"]=c[e].disabled);c[e].typeahead&&(g.typeahead=c[e].typeahead);g=d("<a/>",g);h=d("<li/>",h).append(g).data("index",e).addClass(c[e].classes).data("optionClasses",c[e].classes||"").bind("mouseup.selectmenu",function(b){if(a._safemouseup&&!a._disabled(b.currentTarget)&&!a._disabled(d(b.currentTarget).parents("ul>li."+a.widgetBaseClass+"-group "))){var c=d(this).data("index")!=a._selectedIndex();a.index(d(this).data("index"));a.select(b);
c&&a.change(b);a.close(b,true)}return false}).bind("click.selectmenu",function(){return false}).bind("mouseover.selectmenu focus.selectmenu",function(b){if(!d(b.currentTarget).hasClass(a.namespace+"-state-disabled")&&!d(b.currentTarget).parent("ul").parent("li").hasClass(a.namespace+"-state-disabled")){a._selectedOptionLi().addClass(f);a._focusedOptionLi().removeClass(a.widgetBaseClass+"-item-focus ui-state-hover");d(this).removeClass("ui-state-active").addClass(a.widgetBaseClass+"-item-focus ui-state-hover")}}).bind("mouseout.selectmenu blur.selectmenu",
function(){d(this).is(a._selectedOptionLi().selector)&&d(this).addClass(f);d(this).removeClass(a.widgetBaseClass+"-item-focus ui-state-hover")});c[e].parentOptGroup.length?(g=a.widgetBaseClass+"-group-"+this.element.find("optgroup").index(c[e].parentOptGroup),this.list.find("li."+g).length?this.list.find("li."+g+":last ul").append(h):d(' <li role="presentation" class="'+a.widgetBaseClass+"-group "+g+(c[e].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+
'><span class="'+a.widgetBaseClass+'-group-label">'+c[e].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(h)):h.appendTo(this.list);if(b.icons)for(var i in b.icons)h.is(b.icons[i].find)&&(h.data("optionClasses",c[e].classes+" "+a.widgetBaseClass+"-hasIcon").addClass(a.widgetBaseClass+"-hasIcon"),g=b.icons[i].icon||"",h.find("a:eq(0)").prepend('<span class="'+a.widgetBaseClass+"-item-icon ui-icon "+g+'"></span>'),c[e].bgImage&&h.find("span").css("background-image",
c[e].bgImage))}else d('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);e="dropdown"==b.style;this.newelement.toggleClass(a.widgetBaseClass+"-dropdown",e).toggleClass(a.widgetBaseClass+"-popup",!e);this.list.toggleClass(a.widgetBaseClass+"-menu-dropdown ui-corner-bottom",e).toggleClass(a.widgetBaseClass+"-menu-popup ui-corner-all",!e).find("li:first").toggleClass("ui-corner-top",!e).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",
e).toggleClass("ui-icon-triangle-2-n-s",!e);"dropdown"==b.style?this.list.width(b.menuWidth?b.menuWidth:b.width):this.list.width(b.menuWidth?b.menuWidth:b.width-b.handleWidth);this.list.css("height","auto");e=this.listWrap.height();i=d(window).height();i=b.maxHeight?Math.min(b.maxHeight,i):i/3;e>i&&this.list.height(i);this._optionLis=this.list.find("li:not(."+a.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this.index(this._selectedIndex());this._selectedOptionLi().addClass(this.widgetBaseClass+
"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=window.setTimeout(function(){a._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");d(window).unbind(".selectmenu-"+this.ids[0]);d(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();
d.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,b){var c=this,d=String.fromCharCode(a).toLowerCase(),e=null,h=null;c._typeAhead_timer&&(window.clearTimeout(c._typeAhead_timer),c._typeAhead_timer=void 0);c._typeAhead_chars=(void 0===c._typeAhead_chars?"":c._typeAhead_chars).concat(d);2>c._typeAhead_chars.length||c._typeAhead_chars.substr(-2,1)===d&&c._typeAhead_cycling?(c._typeAhead_cycling=!0,e=d):(c._typeAhead_cycling=!1,e=c._typeAhead_chars);for(var d=("focus"!==b?this._selectedOptionLi().data("index"):
this._focusedOptionLi().data("index"))||0,g=0;g<this._optionLis.length;g++)if(this._optionLis.eq(g).text().substr(0,e.length).toLowerCase()===e)if(c._typeAhead_cycling){if(null===h&&(h=g),g>d){h=g;break}}else h=g;null!==h&&this._optionLis.eq(h).find("a").trigger(b);c._typeAhead_timer=window.setTimeout(function(){c._typeAhead_timer=void 0;c._typeAhead_chars=void 0;c._typeAhead_cycling=void 0},c.options.typeAhead)},_uiHash:function(){var a=this.index();return{index:a,option:d("option",this.element).get(a),
value:this.element[0].value}},open:function(a){var b=this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var c=this._selectedOptionLi();"dropdown"==b.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+c.position().top-this.list.outerHeight()/2+c.outerHeight()/
2).css("left","auto");this._refreshPosition();b=c.find("a");b.length&&b[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,b){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),b&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",
a,this._uiHash()))},change:function(a){this.element.trigger("change");this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(a){d("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){d(this).data("selectelement").selectmenu("close",a)});d("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},
_toggle:function(a,b){this.isOpen?this.close(a,b):this.open(a)},_formatText:function(a){this.options.format?a=this.options.format(a):this.options.escapeHtml&&(a=d("<div />").text(a).html());return a},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,b){if(!this.options.disabled){var c=parseInt(this._selectedOptionLi().data("index")||
0,10)+a;0>c&&(c=0);c>this._optionLis.size()-1&&(c=this._optionLis.size()-1);if(c===b)return!1;this._optionLis.eq(c).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,c)):this._optionLis.eq(c).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,b){var c=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>c&&(c=0);c>this._optionLis.size()-1&&(c=this._optionLis.size()-1);if(c===b)return!1;var d=
this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(c).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,c)):this._optionLis.eq(c).find("a:eq(0)").attr("id",d).focus();this.list.attr("aria-activedescendant",d)},_scrollPage:function(a){var b=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-b:b)},_setOption:function(a,b){this.options[a]=b;"disabled"==
a&&(b&&this.close(),this.element.add(this.newelement).add(this.list)[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",b))},disable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==b?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,b){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==b?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(a){return d(a).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var b=this._optionLis.eq(a);b&&(b.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var b=this._optionLis.eq(a);b&&(b.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);b&&(b.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(a){if(arguments.length){if(this._disabled(d(this._optionLis[a])))return!1;this.element[0].selectedIndex=a;this._refreshValue()}else return this._selectedIndex()},
value:function(a){if(arguments.length)this.element[0].value=a,this._refreshValue();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",b=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"true").attr("id",b);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",c=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",c).addClass(c).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",b)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var b=
this._selectedOptionLi(),b="0 "+(this.list.offset().top-b.offset().top-(this.newelement.outerHeight()+b.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||b,collision:a.positionOptions.collision||"popup"==a.style?"fit":"flip"})}})})(jQuery);
var TypeHelpers=new function(){var d=this;d.hasSmoothing=function(){if("undefined"!=typeof screen.fontSmoothingEnabled)return screen.fontSmoothingEnabled;try{var a=document.createElement("canvas");a.width="35";a.height="35";a.style.display="none";document.body.appendChild(a);var b=a.getContext("2d");b.textBaseline="top";b.font="32px Arial";b.fillStyle="black";b.strokeStyle="black";b.fillText("O",0,0);for(a=8;32>=a;a++)for(var c=1;32>=c;c++){var d=b.getImageData(c,a,1,1).data[3];if(255!=d&&0!=d)return!0}return!1}catch(e){return null}};
d.insertClasses=function(){var a=d.hasSmoothing(),b=document.getElementsByTagName("html")[0];b.className=!0==a?b.className+" hasFontSmoothing-true":!1==a?b.className+" hasFontSmoothing-false":b.className+" hasFontSmoothing-unknown"}},drawerOpen=!1,subGeoShowing=!1,subGeoHover=!0,reassignRatings,activeWindow,markersOn=!1,median,highest_level=3,updateChart,setLevel,ratingsObject,reportsHeight=window.innerHeight-111,activeContentHeight=0,resizeReports;
$(document).ready(function(){TypeHelpers.insertClasses();$("#dataTopBar").hover(function(){$("#dataTopBar img").css("background-color","#f7941d");$("#dataTopBar img").attr("src",S3.Ap.concat("/static/themes/Vulnerability/img/dropdownArrowOverPng8.png"));$("#dataOptions").fadeIn(150);$("#defaultDataLink").css("color","#c47a21")},function(){$("#dataTopBar img").css("background-color","transparent");$("#dataTopBar img").attr("src",S3.Ap.concat("/static/themes/Vulnerability/img/dropdownArrowPng8.png"));
$("#dataOptions").fadeOut(150);$("#defaultDataLink").css("color","#f7941d")});$("#reportsTopBar").hover(function(){$("#reportsTopBar img").css("background-color","#f7941d");$("#reportsTopBar img").attr("src",S3.Ap.concat("/static/themes/Vulnerability/img/dropdownArrowOverPng8.png"));$("#reportsOptions").fadeIn(150);$("#defaultReportsLink").css("color","#c47a21")},function(){$("#reportsTopBar img").css("background-color","transparent");$("#reportsTopBar img").attr("src",S3.Ap.concat("/static/themes/Vulnerability/img/dropdownArrowPng8.png"));
$("#reportsOptions").fadeOut(150);$("#defaultReportsLink").css("color","#f7941d")});$(".closechromeframe").click(function(){$(".chromeframe").hide()});$("#timelineSlider").slider({value:2012,min:1990,max:2012,step:1,slide:function(a,c){$("#amount").val(c.value)}});$("#amount").val(2012);$("#chartSwitcher").selectmenu({style:"popup",maxHeight:280,width:125,menuWidth:125});$("#browseOtherRegions ul li select").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},
{find:".three"},{find:".four"},{find:".five"}]});$(".subGeoSelect").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]});$("#reportFilters select").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]});$("#show-hide").click(function(){a()});$("#risingTab").click(function(){a()});$("#subGeo, .currentQuality").hover(function(){var a=
$(this).find(".popup");$(a).data("timeout",setTimeout(function(){showSubGeo(a,200)},200))},function(){var a=$(this).find(".popup");hideSubGeo(a,200);clearTimeout($(a).data("timeout"))});$(".listText").hover(function(){showSubGeo($(this).siblings(".popup"),0)},function(){hideSubGeo($(this).siblings(".popup"),0)});$("#subGeoPopup").hover(function(){subGeoHover||(clearTimeout($(this).data("timeout")),subGeoHover=!0)},function(){var a=$(this);subGeoHover=!1;$(this).data("timeout",setTimeout(function(){hideSubGeo(a)},
300))});$("#searchSubmit").click(function(){alert($("#search input").val())});$("#search input").keyup(function(a){13==a.which&&alert($("#search input").val())});$(".reports").click(function(){showReports("pending")});$(".infoWindow img").click(function(){$("#lightbox, #photoPanel").fadeIn(300)});$(".calculationLink").click(function(){$("#lightbox, #calculationView").fadeIn(300)});$("#lightbox").click(function(){$("#lightbox, #reportsSection, #calculationView, #photoPanel").fadeOut(300)});$("#reportsSection .closePanel").click(function(){$("#lightbox, #reportsSection").fadeOut(300)});
$("#calculationView .closePanel").click(function(){$("#lightbox, #calculationView").fadeOut(300)});$("#photoPanel .closePanel").click(function(){$("#lightbox, #photoPanel").fadeOut(300)});$(".subGeoReportsButton").click(function(){showReports("pending")});$(".reviewButton").click(function(){$(".rowForApproval").hide();$(".rowForApproval").prev().find(".closeReviewButton").hide();$(".rowForApproval").prev().find(".reviewButton").fadeIn(200);$(this).parent().parent().next(".hiddenRow").addClass("rowForApproval").show("slow");
$(this).hide();$(this).siblings(".closeReviewButton").fadeIn(200);resizeReports()});$(".closeReviewButton").click(function(){$(this).parent().parent().next(".hiddenRow").hide();$(this).hide();$(this).siblings(".reviewButton").fadeIn(200);resizeReports()});$(".approveButton, .declineButton").click(function(){console.log($(this).parent().parent().parent());console.log($(this).parent().parent().parent().prev());$(this).parent().parent().parent().hide();$(this).parent().parent().parent().prev().hide();
$(this).hasClass("approveButton")?$(".approvalScreen .thanks").html("Thank you for your approval."):$(".approvalScreen .thanks").html("Thank you, the submission<br />has been declined.");$(".approvalScreen").fadeIn(300);$(".approvalScreen").data("approvalTimeout",setTimeout(function(){$(".approvalScreen").fadeOut(300)},5E3));resizeReports()});$(".headerRow").click(function(){$(".rowForApproval").hide();$(".rowForApproval").prev().find(".closeReviewButton").hide();$(".rowForApproval").prev().find(".reviewButton").show();
$(".headerRow.activeSection td.arrowCell .arrow").html("&rarr;");$(".headerRow.activeSection").removeClass("activeSection");$(this).addClass("activeSection");$(".headerRow.activeSection .arrow").html("&darr;");$(".activeContent").hide("slow");$(".activeContent").removeClass("activeContent");$(this).next().addClass("activeContent");$(this).parent().next().addClass("activeContent");$(".activeContent").fadeIn(200);resizeReports()});$(".return2reports").click(function(){$(".approvalScreen").fadeOut(300);
clearTimeout($(".approvalScreen").data("approvalTimeout"))});$("#vulnerability").click(function(){$("#l0_breadcrumb").is(":visible")||($("#show-hide, #divider, #analysisLink, #risingTab").fadeIn(200),$('#l0_select option[value="vietnam"]').attr("selected",!0),$("#l0_select").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]}),reassignRatings(0),$(".activeWindow").fadeIn(300))});$(window).resize(function(){$("#reportsSection").is(":visible")&&
resizeReports()});resizeReports=function(){reportsHeight=window.innerHeight-111;activeContentHeight=0;$(".activeContent.contentTable .content").children("tr:visible").each(function(){activeContentHeight+=$(this).innerHeight()});507>reportsHeight&&(reportsHeight=507);activeContentHeight>reportsHeight-180&&(activeContentHeight=reportsHeight-180);$("#lightbox").css("height",$("#vulnerability").innerHeight()+"px");$("#reportsContent, #reportFilters").css("height",reportsHeight+"px");$(".activeContent.contentTable").css("height",
activeContentHeight+"px").css("display","block")};resizeReports();refreshDropdowns=function(a){switch(a){case "l0_select":$("#l1, #l2, #l3, #l4, #l5").fadeOut(200);$("#l1_select option.none, #l2_select option.none, #l3_select option.none, #l4_select option.none, #l5_select option.none").attr("selected",!0);"na"!=$("#l0_select").val()&&$("#l1").fadeIn(200);$("#l1_select, #l2_select, #l3_select, #l4_select, #l5_select").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,
icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]});break;case "l1_select":$("#l2, #l3, #l4, #l5").fadeOut(200);$("#l2_select option.none, #l3_select option.none, #l4_select option.none, #l5_select option.none").attr("selected","selected");"na"!=$("#l1_select").val()&&$("#l2").fadeIn(200);$("#l2_select, #l3_select, #l4_select, #l5_select").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},
{find:".four"},{find:".five"}]});break;case "l2_select":$("#l3, #l4, #l5").fadeOut(200);$("#l3_select option.none, #l4_select option.none, #l5_select option.none").attr("selected",!0);"na"!=$("#l2_select").val()&&$("#l3").fadeIn(200);$("#l3_select, #l4_select, #l5_select").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]});break;case "l3_select":3<highest_level&&($("#l5").fadeOut(200),
$("#l4_select option.none, #l5_select option.none").attr("selected",!0),"na"!=$("#l3_select").val()&&$("#l4").fadeIn(200));break;case "l4_select":4<highest_level&&($("#l5").fadeOut(200),$("#l4_select option.none, #l5_select option.none").attr("selected",!0),"na"!=$("#l3_select").val()&&$("#l4").fadeIn(200));break;case "l5_select":break;default:$("#l1, #l2, #l3, #l4, #l5").fadeOut(200),$("#l0_select option.none, #l1_select option.none, #l2_select option.none, #l3_select option.none, #l4_select option.none, #l5_select option.none").attr("selected",
!0),$("#l0_select, #l1_select, #l2_select, #l3_select, #l4_select, #l5_select").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:160,menuWidth:160,icons:[{find:".one"},{find:".two"},{find:".three"},{find:".four"},{find:".five"}]})}};setLevel=function(){var a=0;if($("#l5_select-button").is(":visible"))switch($("#l5_select option:selected").val()){case "na":a=4;break;default:a=5}else if($("#l4_select-button").is(":visible"))switch($("#l4_select option:selected").val()){case "na":a=
3;break;default:a=4}else if($("#l3_select-button").is(":visible"))switch($("#l3_select option:selected").val()){case "na":a=2;break;default:a=3}else if($("#l2_select-button").is(":visible"))switch($("#l2_select option:selected").val()){case "na":a=1;break;default:a=2}else if($("#l1_select-button").is(":visible"))switch($("#l1_select option:selected").val()){case "na":a=0;break;default:a=1}reassignRatings(a)};reassignRatings=function(a){switch(a){case 0:$(".geoName").html($("#l0_select").val());$(".geoType").html("Country in");
$(".year").html("2012");$("#subGeoReported").html("8 Provinces Reported");$("#qualityCommunes").html("36 out of 397 Communes Reported");$(".noCommune").show();$("#l1_breadcrumb, #l2_breadcrumb, #l3_breadcrumb, #l4_breadcrumb, #l5_breadcrumb").hide();$("#l0_breadcrumb").html(" &raquo; "+$("#l0_select").val()).show();$(".communeOnly").fadeOut(200);$("#iconsKey input").hide();$(".indicatorRange").show();$(".infoWindow").removeClass("activeWindow").fadeOut(300);$(".provinceWindow").addClass("activeWindow");
drawerOpen||$(".activeWindow").fadeIn(300);break;case 1:$(".geoName").html($("#l1_select").val());$(".geoType").html("Province in");$(".year").html("2012");$("#l2_breadcrumb, #l3_breadcrumb, #l4_breadcrumb, #l5_breadcrumb").hide();$("#l0_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(0); refreshDropdowns(\"l0_select\");'>"+$("#l0_select").val()+"</a>").show();$("#l1_breadcrumb").html(" &raquo; "+$("#l1_select").val()).show();$("#subGeoReported").html("3 Districts Reported");$("#qualityCommunes").html("36 out of 397 Communes Reported");
$(".noCommune").show();$(".communeOnly").fadeOut(200);$("#iconsKey input").hide();$(".indicatorRange").show();$(".infoWindow").removeClass("activeWindow").fadeOut(300);$(".districtWindow").addClass("activeWindow");drawerOpen||$(".activeWindow").fadeIn(300);break;case 2:$(".geoName").html($("#l2_select").val());$(".geoType").html("District in");$(".year").html("2012");$("#l3_breadcrumb, #l4_breadcrumb, #l5_breadcrumb").hide();$("#l0_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(0); refreshDropdowns(\"l0_select\");'>"+
$("#l0_select").val()+"</a>").show();$("#l1_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(1); refreshDropdowns(\"l1_select\");'>"+$("#l1_select").val()+"</a>").show();$("#l2_breadcrumb").html(" &raquo; "+$("#l2_select").val()).show();$("#subGeoReported").html("8 Communes Reported");$("#qualityCommunes").html("36 out of 397 Communes Reported");$(".noCommune").show();$(".communeOnly").fadeOut(200);$("#iconsBlocker").hide();$("#iconsKey input").show();$("#mapKey #iconsKey label").css("color",
"#565656");$(".indicatorRange").show();$(".infoWindow").removeClass("activeWindow").fadeOut(300);$(".communeWindow").addClass("activeWindow");drawerOpen||$(".activeWindow").fadeIn(300);break;case 3:$(".geoName").html($("#l3_select").val()),$(".geoType").html("Commune in"),$(".year").html("2012"),$(".communeOnly").show(),$(".noCommune").hide(),$("#qualityCommunes").html("Last Data Collected on 7/3/2011 by Tina Pham"),$("#l4_breadcrumb, #l5_breadcrumb").hide(),$("#l0_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(0); refreshDropdowns(\"l0_select\");'>"+
$("#l0_select").val()+"</a>").show(),$("#l1_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(1); refreshDropdowns(\"l1_select\");'>"+$("#l1_select").val()+"</a>").show(),$("#l2_breadcrumb").html(" &raquo; <a href='javascript:reassignRatings(2); refreshDropdowns(\"l2_select\");'>"+$("#l2_select").val()+"</a>").show(),$("#l3_breadcrumb").html(" &raquo; "+$("#l3_select").val()).show(),$("#iconsBlocker").hide(),$("#iconsKey input").show(),$("#mapKey #iconsKey label").css("color","#565656"),
$(".indicatorRange").show(),$(".infoWindow").removeClass("activeWindow")}updateChart(a,!0);for(var c,d=a;0<=d;d--)switch(d){case a:c+='<option value="'+d+'" selected="selected">Current Location</option>';break;default:c+='<option value="'+d+'">'+$("#l"+d+"_select option:selected").html()+"</option>"}$("#chartSwitcher").html(c);$("#chartSwitcher").selectmenu("destroy").selectmenu({style:"popup",maxHeight:280,width:125,menuWidth:125})};updateChart=function(a,c){ratingsObject=[[Math.ceil(5*Math.random()),
Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*
Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),Math.ceil(5*Math.random())],[Math.ceil(5*Math.random()),Math.ceil(5*Math.random()),
Math.ceil(5*Math.random()),Math.ceil(5*Math.random())]];for(var f=0;f<ratingsObject.length;f++){$("#visRange"+f+" .rightBox, #visRange"+f+" .leftBox").show();ratingsObject[f].sort();$("#visRange"+f).css("left",58*(ratingsObject[f][0]-1)+"px");$("#visRange"+f).css("width",58*(ratingsObject[f][ratingsObject[f].length-1]-ratingsObject[f][0])+"px");var e=ratingsObject[f].length/2;switch(e%1){case 0:median=(ratingsObject[f][e]+ratingsObject[f][e-1])/2;break;default:median=ratingsObject[f][Math.floor(e)]}e=
median-ratingsObject[f][0];$("#visRange"+f+" .medianDot").css("left",58*e+"px");median==ratingsObject[f][0]&&$("#visRange"+f+" .leftBox").hide();median==ratingsObject[f][ratingsObject[f].length-1]&&$("#visRange"+f+" .rightBox").hide()}median=Math.ceil(median);c&&d(a,median)};var d=function(a,c){switch(c){case 1:bgcolor="#ff5121";ddThumb="one";break;case 2:bgcolor="#f4961c";ddThumb="two";break;case 3:bgcolor="#d6b317";ddThumb="three";break;case 4:bgcolor="#77b82e";ddThumb="four";break;case 5:bgcolor=
"#059346";ddThumb="five";break;default:bgcolor="#999"}$("#mainRating, #indicator").css("background-color",bgcolor);$("#mainRating, #indicator").text(c);$("#mainRating, #indicator").show();$("#l"+a+"_level option:selected").each(function(){$(this).removeClass("one two three four five")});$("#l"+a+"_level option:selected").addClass(ddThumb)},a=function(){switch(drawerOpen){case !0:$(".hidden").hide("slow");$("#show-hide").html('<span class="arrow">&uarr;</span> SHOW MORE');$("#risingTab").css("background-image",
'url(S3.Ap.concat("/static/themes/Vulnerability/img/openTabPng8.png"))');$(".activeWindow").fadeIn(300);drawerOpen=!1;subGeoShowing&&showSubGeo();break;case !1:$("#drawerInside").show("slow"),$("#drawerInside").data("fade",setTimeout(function(){$("#resilienceSummary, #drawerQuickActions, #indicatorRatingChart, #browseOtherRegions, #dataBreakdown").fadeIn(500);$(".communeOnly").hide()},500)),$("#show-hide").html('<span class="arrow">&darr;</span> SHOW LESS'),$("#risingTab").css("background-image",
'url(S3.Ap.concat("/static/themes/Vulnerability/img/closeTabPng8.png"))'),$(".activeWindow").fadeOut(300),drawerOpen=!0}};reassignRatings()});
var showSubGeo=function(d,a){"undefined"!==typeof activeWindow&&(clearTimeout(activeWindow.data("timeout")),activeWindow.fadeOut(a));d.fadeIn(a);activeWindow=d;subGeoShowing=!0},hideSubGeo=function(d,a){d.fadeOut(a);subGeoShowing=!1},toggleIconLayer=function(){if($("#l2_breadcrumb").is(":visible"))switch(markersOn){case !1:$("#mapSection").css("background",'url(S3.Ap.concat("/static/themes/Vulnerability/img/mapIconOnPng8.png")) no-repeat center top transparent');$("#volunteerSection").css("background",
'url(S3.Ap.concat("/static/themes/Vulnerability/img/volunteerIconOnPng8.png")) no-repeat center top transparent');$(".iconSection").css("color","#565656");markersOn=!0;break;case !0:$("#mapSection").css("background",'url(S3.Ap.concat("/static/themes/Vulnerability/img/mapIconOffPng8.png")) no-repeat center top transparent'),$("#volunteerSection").css("background",'url(S3.Ap.concat("/static/themes/Vulnerability/img/volunteerIconOffPng8.png")) no-repeat center top transparent'),$(".iconSection").css("color",
"#ccc"),markersOn=!1}},globalView=function(){$("#l0_breadcrumb, #l1_breadcrumb, #l2_breadcrumb, #l3_breadcrumb, #l4_breadcrumb, #l5_breadcrumb, #show-hide, #divider, #analysisLink, #indicator, #risingTab").hide();$(".hidden").hide("slow");$(".geoType").html("");$(".geoName").html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select a country");$(".activeWindow").fadeOut(300);$(".activeWindow").removeClass("activeWindow");$(".countryWindow").addClass("activeWindow");$(".activeWindow").fadeIn(300);$(".year").html("");
refreshDropdowns("kitten")},showReports=function(d){$(".rowForApproval").hide();$(".rowForApproval").prev().find(".closeReviewButton").hide();$(".rowForApproval").prev().find(".reviewButton").show();$(".headerRow.activeSection td.arrowCell .arrow").html("&rarr;");$(".headerRow.activeSection").removeClass("activeSection");$("."+d+"Header").addClass("activeSection");$(".headerRow.activeSection .arrow").html("&darr;");$(".activeContent").hide();$(".activeContent").removeClass("activeContent");$(".activeSection").next().addClass("activeContent");
$(".activeSection").parent().next().addClass("activeContent");$(".activeContent").css("display","block");$(".approvalScreen").hide();$("#lightbox, #reportsSection").fadeIn(300);resizeReports()},toggleReports=function(d){switch(d){case "myReports":$(".allReports").removeClass("active").html("<a href=\"javascript:toggleReports('allReports')\" title='All Reports'>ALL REPORTS</a>");$(".myReports").addClass("active").html("MY REPORTS");break;case "allReports":$(".myReports").removeClass("active").html("<a href=\"javascript:toggleReports('myReports')\" title='My Reports'>MY REPORTS</a>"),
$(".allReports").addClass("active").html("ALL REPORTS")}};
