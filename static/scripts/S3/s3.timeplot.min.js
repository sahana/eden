/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+

*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(K,m,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");K!=Array.prototype&&K!=Object.prototype&&(K[m]=a.value)};$jscomp.getGlobal=function(K){return"undefined"!=typeof window&&window===K?K:"undefined"!=typeof global&&null!=global?global:K};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(K){return $jscomp.SYMBOL_PREFIX+(K||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var K=$jscomp.global.Symbol.iterator;K||(K=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[K]&&$jscomp.defineProperty(Array.prototype,K,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(K){var m=0;return $jscomp.iteratorPrototype(function(){return m<K.length?{done:!1,value:K[m++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(K){$jscomp.initSymbolIterator();K={next:K};K[$jscomp.global.Symbol.iterator]=function(){return this};return K};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(K,m){$jscomp.initSymbolIterator();K instanceof String&&(K+="");var a=0,b={next:function(){if(a<K.length){var p=a++;return{value:m(p,K[p]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(K,m,a,b){if(m){a=$jscomp.global;K=K.split(".");for(b=0;b<K.length-1;b++){var p=K[b];p in a||(a[p]={});a=a[p]}K=K[K.length-1];b=a[K];m=m(b);m!=b&&null!=m&&$jscomp.defineProperty(a,K,{configurable:!0,writable:!0,value:m})}};$jscomp.polyfill("Array.prototype.keys",function(K){return K?K:function(){return $jscomp.iteratorFromArray(this,function(m){return m})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(K){return K?K:function(){return $jscomp.iteratorFromArray(this,function(m,a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(K){return K?K:function(){return $jscomp.iteratorFromArray(this,function(m,a){return[m,a]})}},"es6-impl","es3");$jscomp.findInternal=function(K,m,a){K instanceof String&&(K=String(K));for(var b=K.length,p=0;p<b;p++){var z=K[p];if(m.call(a,z,p,K))return{i:p,v:z}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(K){return K?K:function(m,a){return $jscomp.findInternal(this,m,a).v}},"es6-impl","es3");
!function(){function K(c,e){return c<e?-1:c>e?1:c>=e?0:NaN}function m(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(e,a,l,h){3>arguments.length&&(l=0);4>arguments.length&&(h=e.length);for(;l<h;){var g=l+h>>>1;0>c(e[g],a)?l=g+1:h=g}return l},right:function(e,a,l,h){3>arguments.length&&(l=0);4>arguments.length&&(h=e.length);for(;l<h;){var g=l+h>>>1;0<c(e[g],a)?h=g:l=g+1}return l}}}function b(c){return c.length}function p(c,e){try{for(var a in e)Object.defineProperty(c.prototype,a,
{value:e[a],enumerable:!1})}catch(l){c.prototype=e}}function z(){}function r(c){return fb+c in this}function k(){var c=[];this.forEach(function(e){c.push(e)});return c}function f(){var c=0,e;for(e in this)e.charCodeAt(0)===Sb&&++c;return c}function v(){for(var c in this)if(c.charCodeAt(0)===Sb)return!1;return!0}function t(){}function J(c,e,a){return function(){var g=a.apply(e,arguments);return g===e?c:g}}function H(c,e){if(e in c)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var a=0,l=Sd.length;a<
l;++a){var h=Sd[a]+e;if(h in c)return h}}function D(){}function G(){}function E(c){function e(){for(var e=a,g=-1,l=e.length,u;++g<l;)(u=e[g].on)&&u.apply(this,arguments);return c}var a=[],l=new z;e.on=function(e,g){var h=l.get(e),q;if(2>arguments.length)return h&&h.on;h&&(h.on=null,a=a.slice(0,q=a.indexOf(h)).concat(a.slice(q+1)),l.remove(e));g&&a.push(l.set(e,{on:g}));return c};return e}function L(){x.event.preventDefault()}function P(){for(var c=x.event,e;e=c.sourceEvent;)c=e;return c}function B(c){for(var e=
new G,a=0,l=arguments.length;++a<l;)e[arguments[a]]=E(e);e.of=function(a,g){return function(l){try{var h=l.sourceEvent=x.event;l.target=c;x.event=l;e[l.type].apply(a,g)}finally{x.event=h}}};return e}function O(c){Tb(c,na);return c}function Q(c){return"function"===typeof c?c:function(){return Mc(c,this)}}function I(c){return"function"===typeof c?c:function(){return Nc(c,this)}}function T(c,e){function a(){this.removeAttribute(c)}function l(){this.removeAttributeNS(c.space,c.local)}function h(){this.setAttribute(c,
e)}function q(){this.setAttributeNS(c.space,c.local,e)}function U(){var a=e.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function u(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=x.ns.qualify(c);return null==e?c.local?l:a:"function"===typeof e?c.local?u:U:c.local?q:h}function S(c){return new RegExp("(?:^|\\s+)"+x.requote(c)+"(?:\\s+|$)","g")}function R(c,e){function a(){for(var a=-1;++a<h;)c[a](this,
e)}function l(){for(var a=-1,g=e.apply(this,arguments);++a<h;)c[a](this,g)}c=(c+"").trim().split(/^|\s+/).map(y);var h=c.length;return"function"===typeof e?l:a}function y(c){var e=S(c);return function(a,l){if(g=a.classList)return l?g.add(c):g.remove(c);var g=a.getAttribute("class")||"";l?(e.lastIndex=0,e.test(g)||a.setAttribute("class",(g+" "+c).trim().replace(/\s+/g," "))):a.setAttribute("class",g.replace(e," ").trim().replace(/\s+/g," "))}}function A(c,e,a){function g(){this.style.removeProperty(c)}
function h(){this.style.setProperty(c,e,a)}function q(){var g=e.apply(this,arguments);null==g?this.style.removeProperty(c):this.style.setProperty(c,g,a)}return null==e?g:"function"===typeof e?q:h}function N(c,e){function a(){delete this[c]}function l(){this[c]=e}function h(){var a=e.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==e?a:"function"===typeof e?h:l}function w(c){return"function"===typeof c?c:(c=x.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function V(c){return function(){return Td(this,c)}}function W(c){arguments.length||(c=K);return function(e,a){return e&&a?c(e.__data__,a.__data__):!e-!a}}function Z(c,e){for(var a=0,l=c.length;a<l;a++)for(var h=c[a],q=0,U=h.length,u;q<U;q++)(u=h[q])&&e(u,q,a);return c}function M(c){Tb(c,Ra);return c}function da(c){var e,a;return function(g,h,q){g=c[q].update;var l=g.length;q!=a&&(a=q,e=0);for(h>=e&&(e=h+1);!(h=g[e])&&
++e<l;);return h}}function Y(){var c=this.__transition__;c&&++c.active}function n(c,e,a){function g(){var e=this[U];e&&(this.removeEventListener(c,e,e.$),delete this[U])}function h(){var l=F(e,Ya(arguments));g.call(this);this.addEventListener(c,this[U]=l,l.$=a);l._=e}function q(){var e=new RegExp("^__on([^.]+)"+x.requote(c)+"$"),a,g;for(g in this)if(a=g.match(e)){var l=this[g];this.removeEventListener(a[1],l,l.$);delete this[g]}}var U="__on"+c,u=c.indexOf("."),F=C;0<u&&(c=c.substring(0,u));var b=
Oc.get(c);b&&(c=b,F=qa);return u?e?h:g:e?D:q}function C(c,e){return function(a){var g=x.event;x.event=a;e[0]=this.__data__;try{c.apply(this,e)}finally{x.event=g}}}function qa(c,e){var a=C(c,e);return function(c){var e=c.relatedTarget;e&&(e===this||e.compareDocumentPosition(this)&8)||a.call(this,c)}}function va(){var c=".dragsuppress-"+ ++kg,e="click"+c,a=x.select(Ba).on("touchmove"+c,L).on("dragstart"+c,L).on("selectstart"+c,L);if(Eb){var l=Sa.style,h=l[Eb];l[Eb]="none"}return function(g){a.on(c,
null);Eb&&(l[Eb]=h);if(g){var q=function(){a.on(e,null)};a.on(e,function(){L();q()},!0);setTimeout(q,0)}}}function la(c,e){e.changedTouches&&(e=e.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var l=a.createSVGPoint();if(0>Pc&&(Ba.scrollX||Ba.scrollY)){var a=x.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),h=a[0][0].getScreenCTM();Pc=!(h.f||h.e);a.remove()}Pc?(l.x=e.pageX,l.y=e.pageY):(l.x=e.clientX,l.y=e.clientY);
l=l.matrixTransform(c.getScreenCTM().inverse());return[l.x,l.y]}a=c.getBoundingClientRect();return[e.clientX-a.left-c.clientLeft,e.clientY-a.top-c.clientTop]}function aa(){return x.event.changedTouches[0].identifier}function ea(){return x.event.target}function ha(){return Ba}function ga(c,e,a){return(e[0]-c[0])*(a[1]-c[1])-(e[1]-c[1])*(a[0]-c[0])}function ca(c){return 1<c?0:-1>c?ja:Math.acos(c)}function ma(c){return 1<c?za:-1>c?-za:Math.asin(c)}function fa(c){return((c=Math.exp(c))+1/c)/2}function oa(c){return(c=
Math.sin(c/2))*c}function pa(){}function Ca(c,e,a){return this instanceof Ca?void(this.h=+c,this.s=+e,this.l=+a):2>arguments.length?c instanceof Ca?new Ca(c.h,c.s,c.l):Ud(""+c,Vd,Ca):new Ca(c,e,a)}function rb(c,e,a){function g(c){360<c?c-=360:0>c&&(c+=360);return 60>c?h+(q-h)*c/60:180>c?q:240>c?h+(q-h)*(240-c)/60:h}var h,q;c=isNaN(c)?0:0>(c%=360)?c+360:c;e=isNaN(e)?0:0>e?0:1<e?1:e;a=0>a?0:1<a?1:a;q=.5>=a?a*(1+e):a+e-a*e;h=2*a-q;return new Da(Math.round(255*g(c+120)),Math.round(255*g(c)),Math.round(255*
g(c-120)))}function Ka(c,e,a){return this instanceof Ka?void(this.h=+c,this.c=+e,this.l=+a):2>arguments.length?c instanceof Ka?new Ka(c.h,c.c,c.l):c instanceof La?Wd(c.l,c.a,c.b):Wd((c=Xd((c=x.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ka(c,e,a)}function Qc(c,e,a){isNaN(c)&&(c=0);isNaN(e)&&(e=0);return new La(a,Math.cos(c*=ia)*e,Math.sin(c)*e)}function La(c,e,a){return this instanceof La?void(this.l=+c,this.a=+e,this.b=+a):2>arguments.length?c instanceof La?new La(c.l,c.a,c.b):c instanceof Ka?Qc(c.l,c.c,
c.h):Xd((c=Da(c)).r,c.g,c.b):new La(c,e,a)}function Yd(c,e,a){c=(c+16)/116;a=c-a/200;e=Rc(c+e/500)*Zd;c=Rc(c)*$d;a=Rc(a)*ae;return new Da(Sc(3.2404542*e-1.5371385*c-.4985314*a),Sc(-.969266*e+1.8760108*c+.041556*a),Sc(.0556434*e-.2040259*c+1.0572252*a))}function Wd(c,e,a){return 0<c?new Ka(Math.atan2(a,e)*ta,Math.sqrt(e*e+a*a),c):new Ka(NaN,NaN,c)}function Rc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Tc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Sc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Da(c,e,a){return this instanceof Da?void(this.r=~~c,this.g=~~e,this.b=~~a):2>arguments.length?c instanceof Da?new Da(c.r,c.g,c.b):Ud(""+c,Da,rb):new Da(c,e,a)}function Ub(c){return new Da(c>>16,c>>8&255,c&255)+""}function sb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Ud(c,e,a){var g=0,h=0,q=0,U,u;if(U=/([a-z]+)\((.*)\)/i.exec(c))switch(u=U[2].split(","),U[1]){case "hsl":return a(parseFloat(u[0]),parseFloat(u[1])/
100,parseFloat(u[2])/100);case "rgb":return e(Uc(u[0]),Uc(u[1]),Uc(u[2]))}if(a=Vb.get(c))return e(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(g=(a&3840)>>4,g|=g>>4,h=a&240,h|=h>>4,q=a&15,q|=q<<4):7===c.length&&(g=(a&16711680)>>16,h=(a&65280)>>8,q=a&255));return e(g,h,q)}function Vd(c,a,g){var e=Math.min(c/=255,a/=255,g/=255),h=Math.max(c,a,g),q=h-e,U=(h+e)/2;q?(e=.5>U?q/(h+e):q/(2-h-e),c=60*(c==h?(a-g)/q+(a<g?6:0):a==h?(g-c)/q+2:(c-a)/q+4)):(c=NaN,
e=0<U&&1>U?0:c);return new Ca(c,e,U)}function Xd(c,a,g){c=Vc(c);a=Vc(a);g=Vc(g);var e=Tc((.4124564*c+.3575761*a+.1804375*g)/Zd),h=Tc((.2126729*c+.7151522*a+.072175*g)/$d);c=Tc((.0193339*c+.119192*a+.9503041*g)/ae);return La(116*h-16,500*(e-h),200*(h-c))}function Vc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Uc(c){var a=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*a):a}function ra(c){return"function"===typeof c?c:function(){return c}}function ya(c){return c}
function Wc(c){return function(a,g,l){2===arguments.length&&"function"===typeof g&&(l=g,g=null);return Wb(a,g,c,l)}}function Wb(c,a,g,l){function e(){var c=F.status,a;if(!c&&F.responseText||200<=c&&300>c||304===c){try{a=g.call(q,F)}catch(Ja){U.error.call(q,Ja);return}U.load.call(q,a)}else U.error.call(q,F)}var q={},U=x.dispatch("beforesend","progress","load","error"),u={},F=new XMLHttpRequest,b=null;!Ba.XDomainRequest||"withCredentials"in F||!/^(http(s)?:)?\/\//.test(c)||(F=new XDomainRequest);"onload"in
F?F.onload=F.onerror=e:F.onreadystatechange=function(){3<F.readyState&&e()};F.onprogress=function(c){var a=x.event;x.event=c;try{U.progress.call(q,F)}finally{x.event=a}};q.header=function(c,a){c=(c+"").toLowerCase();if(2>arguments.length)return u[c];null==a?delete u[c]:u[c]=a+"";return q};q.mimeType=function(c){if(!arguments.length)return a;a=null==c?null:c+"";return q};q.responseType=function(c){if(!arguments.length)return b;b=c;return q};q.response=function(c){g=c;return q};["get","post"].forEach(function(c){q[c]=
function(){return q.send.apply(q,[c].concat(Ya(arguments)))}});q.send=function(e,g,l){2===arguments.length&&"function"===typeof g&&(l=g,g=null);F.open(e,c,!0);null==a||"accept"in u||(u.accept=a+",*/*");if(F.setRequestHeader)for(var h in u)F.setRequestHeader(h,u[h]);null!=a&&F.overrideMimeType&&F.overrideMimeType(a);null!=b&&(F.responseType=b);if(null!=l)q.on("error",l).on("load",function(c){l(null,c)});U.beforesend.call(q,F);F.send(null==g?null:g);return q};q.abort=function(){F.abort();return q};
x.rebind(q,U,"on");return null==l?q:q.get(lg(l))}function lg(c){return 1===c.length?function(a,g){c(null==a?g:null)}:c}function Xc(){var c=be(),c=ce()-c;24<c?(isFinite(c)&&(clearTimeout(Xb),Xb=setTimeout(Xc,c)),Yb=0):(Yb=1,de(Xc))}function be(){var c=Date.now();for(Ta=Zb;Ta;)c>=Ta.t&&(Ta.f=Ta.c(c-Ta.t)),Ta=Ta.n;return c}function ce(){for(var c,a=Zb,g=Infinity;a;)a.f?a=c?c.n=a.n:Zb=a.n:(a.t<g&&(g=a.t),a=(c=a).n);$b=c;return g}function Yc(c,a){return a-(c?Math.ceil(Math.log(c)/Math.LN10):1)}function mg(c){var a=
c.decimal,g=c.thousands,l=c.grouping,h=c.currency,q=l?function(c){for(var a=c.length,e=[],h=0,q=l[0];0<a&&0<q;)e.push(c.substring(a-=q,a+q)),q=l[h=(h+1)%l.length];return e.reverse().join(g)}:ya;return function(c){c=ee.exec(c);var e=c[1]||" ",g=c[2]||">",l=c[3]||"",U=c[4]||"",b=c[5],n=+c[6],f=c[7],k=c[8],p=c[9],w=1,C="",r="",m=!1;k&&(k=+k.substring(1));if(b||"0"===e&&"="===g)b=e="0",g="=",f&&(n-=Math.floor((n-1)/4));switch(p){case "n":f=!0;p="g";break;case "%":w=100;r="%";p="f";break;case "p":w=100;
r="%";p="r";break;case "b":case "o":case "x":case "X":"#"===U&&(C="0"+p.toLowerCase());case "c":case "d":m=!0;k=0;break;case "s":w=-1,p="r"}"$"===U&&(C=h[0],r=h[1]);"r"!=p||k||(p="g");if(null!=k)if("g"==p)k=Math.max(1,Math.min(21,k));else if("e"==p||"f"==p)k=Math.max(0,Math.min(20,k));var p=ng.get(p)||og,y=b&&f;return function(c){var h=r;if(m&&c%1)return"";var u=0>c||0===c&&0>1/c?(c=-c,"-"):l;0>w?(h=x.formatPrefix(c,k),c=h.scale(c),h=h.symbol+r):c*=w;c=p(c,k);var F=c.lastIndexOf("."),U=0>F?c:c.substring(0,
F);c=0>F?"":a+c.substring(F+1);!b&&f&&(U=q(U));var F=C.length+U.length+c.length+(y?0:u.length),X=F<n?Array(F=n-F+1).join(e):"";y&&(U=q(X+U));u+=C;c=U+c;return("<"===g?u+c+X:">"===g?X+u+c:"^"===g?X.substring(0,F>>=1)+u+c+X.substring(F):u+(y?c:X+c))+h}}}function og(c){return c+""}function Ua(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function gb(c,a,g){function e(a){var e=c(a),g=q(e,1);return a-e<g-a?e:g}function h(e){a(e=c(new Aa(e-1)),1);return e}function q(c,
e){a(c=new Aa(+c),e);return c}function U(c,e,l){c=h(c);var q=[];if(1<l)for(;c<e;)g(c)%l||q.push(new Date(+c)),a(c,1);else for(;c<e;)q.push(new Date(+c)),a(c,1);return q}c.floor=c;c.round=e;c.ceil=h;c.offset=q;c.range=U;var u=c.utc=ac(c);u.floor=u;u.round=ac(e);u.ceil=ac(h);u.offset=ac(q);u.range=function(c,a,e){try{Aa=Ua;var g=new Ua;g._=c;return U(g,a,e)}finally{Aa=Date}};return c}function ac(c){return function(a,g){try{Aa=Ua;var e=new Ua;e._=a;return c(e,g)._}finally{Aa=Date}}}function pg(c){function a(c){function a(a){for(var g=
[],l=-1,h=0,q,u;++l<e;)if(37===c.charCodeAt(l)){g.push(c.substring(h,l));null!=(q=fe[h=c.charAt(++l)])&&(h=c.charAt(++l));if(u=B[h])h=u(a,null==q?"e"===h?" ":"0":q);g.push(h);h=l+1}g.push(c.substring(h,l));return g.join("")}var e=c.length;a.parse=function(a){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(g(e,c,a,0)!=a.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);a=null!=e.Z&&Aa!==Ua;var l=new (a?Ua:Aa);"j"in e?l.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(l.setFullYear(e.y,0,1),l.setFullYear(e.y,
0,"W"in e?(e.w+6)%7+7*e.W-(l.getDay()+5)%7:e.w+7*e.U-(l.getDay()+6)%7)):l.setFullYear(e.y,e.m,e.d);l.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L);return a?l._:l};a.toString=function(){return c};return a}function g(c,a,e,g){for(var l,h=0,q=a.length,u=e.length;h<q;){if(g>=u)return-1;l=a.charCodeAt(h++);if(37===l){if(l=a.charAt(h++),l=A[l in fe?a.charAt(h++):l],!l||0>(g=l(c,e,g)))return-1}else if(l!=e.charCodeAt(g++))return-1}return g}var l=c.dateTime,h=c.date,q=c.time,U=c.periods,u=c.days,
F=c.shortDays,b=c.months,n=c.shortMonths;a.utc=function(c){function e(c){try{Aa=Ua;var a=new Aa;a._=c;return g(a)}finally{Aa=Date}}var g=a(c);e.parse=function(c){try{Aa=Ua;var a=g.parse(c);return a&&a._}finally{Aa=Date}};e.toString=g.toString;return e};a.multi=a.utc.multi=qg;var f=x.map(),k=bc(u),p=cc(u),w=bc(F),C=cc(F),r=bc(b),m=cc(b),y=bc(n),t=cc(n);U.forEach(function(c,a){f.set(c.toLowerCase(),a)});var B={a:function(c){return F[c.getDay()]},A:function(c){return u[c.getDay()]},b:function(c){return n[c.getMonth()]},
B:function(c){return b[c.getMonth()]},c:a(l),d:function(c,a){return Ea(c.getDate(),a,2)},e:function(c,a){return Ea(c.getDate(),a,2)},H:function(c,a){return Ea(c.getHours(),a,2)},I:function(c,a){return Ea(c.getHours()%12||12,a,2)},j:function(c,a){return Ea(1+ba.dayOfYear(c),a,3)},L:function(c,a){return Ea(c.getMilliseconds(),a,3)},m:function(c,a){return Ea(c.getMonth()+1,a,2)},M:function(c,a){return Ea(c.getMinutes(),a,2)},p:function(c){return U[+(12<=c.getHours())]},S:function(c,a){return Ea(c.getSeconds(),
a,2)},U:function(c,a){return Ea(ba.sundayOfYear(c),a,2)},w:function(c){return c.getDay()},W:function(c,a){return Ea(ba.mondayOfYear(c),a,2)},x:a(h),X:a(q),y:function(c,a){return Ea(c.getFullYear()%100,a,2)},Y:function(c,a){return Ea(c.getFullYear()%1E4,a,4)},Z:rg,"%":function(){return"%"}},A={a:function(c,a,e){w.lastIndex=0;return(a=w.exec(a.substring(e)))?(c.w=C.get(a[0].toLowerCase()),e+a[0].length):-1},A:function(c,a,e){k.lastIndex=0;return(a=k.exec(a.substring(e)))?(c.w=p.get(a[0].toLowerCase()),
e+a[0].length):-1},b:function(c,a,e){y.lastIndex=0;return(a=y.exec(a.substring(e)))?(c.m=t.get(a[0].toLowerCase()),e+a[0].length):-1},B:function(c,a,e){r.lastIndex=0;return(a=r.exec(a.substring(e)))?(c.m=m.get(a[0].toLowerCase()),e+a[0].length):-1},c:function(c,a,e){return g(c,B.c.toString(),a,e)},d:ge,e:ge,H:he,I:he,j:sg,L:tg,m:ug,M:vg,p:function(c,a,e){a=f.get(a.substring(e,e+=2).toLowerCase());return null==a?-1:(c.p=a,e)},S:wg,U:xg,w:yg,W:zg,x:function(c,a,e){return g(c,B.x.toString(),a,e)},X:function(c,
a,e){return g(c,B.X.toString(),a,e)},y:Ag,Y:Bg,Z:Cg,"%":Dg};return a}function Ea(c,a,g){var e=0>c?"-":"";c=(e?-c:c)+"";var h=c.length;return e+(h<g?Array(g-h+1).join(a)+c:c)}function bc(c){return new RegExp("^(?:"+c.map(x.requote).join("|")+")","i")}function cc(c){for(var a=new z,g=-1,l=c.length;++g<l;)a.set(c[g].toLowerCase(),g);return a}function yg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+1)))?(c.w=+a[0],g+a[0].length):-1}function xg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g)))?
(c.U=+a[0],g+a[0].length):-1}function zg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g)))?(c.W=+a[0],g+a[0].length):-1}function Bg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+4)))?(c.y=+a[0],g+a[0].length):-1}function Ag(c,a,g){wa.lastIndex=0;if(a=wa.exec(a.substring(g,g+2))){var e=+a[0];c=(c.y=e+(68<e?1900:2E3),g+a[0].length)}else c=-1;return c}function Cg(c,a,g){return/^[+-]\d{4}$/.test(a=a.substring(g,g+5))?(c.Z=-a,g+5):-1}function ug(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,
g+2)))?(c.m=a[0]-1,g+a[0].length):-1}function ge(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+2)))?(c.d=+a[0],g+a[0].length):-1}function sg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+3)))?(c.j=+a[0],g+a[0].length):-1}function he(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+2)))?(c.H=+a[0],g+a[0].length):-1}function vg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+2)))?(c.M=+a[0],g+a[0].length):-1}function wg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,
g+2)))?(c.S=+a[0],g+a[0].length):-1}function tg(c,a,g){wa.lastIndex=0;return(a=wa.exec(a.substring(g,g+3)))?(c.L=+a[0],g+a[0].length):-1}function rg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var g=~~(ka(a)/60),a=ka(a)%60;return c+Ea(g,"0",2)+Ea(a,"0",2)}function Dg(c,a,g){ie.lastIndex=0;return(c=ie.exec(a.substring(g,g+1)))?g+c[0].length:-1}function qg(c){for(var a=c.length,g=-1;++g<a;)c[g][0]=this(c[g][0]);return function(a){for(var e=0,g=c[e];!g[1](a);)g=c[++e];return g[0](a)}}function Zc(){}
function je(c,a,g){var e=g.s=c+a,h=e-c;g.t=c-(e-h)+(a-h)}function dc(c,a){if(c&&ke.hasOwnProperty(c.type))ke[c.type](c,a)}function $c(c,a,g){var e=-1;g=c.length-g;var h;for(a.lineStart();++e<g;)h=c[e],a.point(h[0],h[1],h[2]);a.lineEnd()}function le(c,a){var e=-1,l=c.length;for(a.polygonStart();++e<l;)$c(c[e],a,1);a.polygonEnd()}function Eg(){function c(c,a){c*=ia;a=a*ia/2+ja/4;var e=c-l,g=0<=e?1:-1,e=g*e,u=Math.cos(a),U=Math.sin(a),b=q*U;hb.add(Math.atan2(b*g*Math.sin(e),h*u+b*Math.cos(e)));l=c;h=
u;q=U}var a,g,l,h,q;Fa.point=function(e,u){Fa.point=c;l=(a=e)*ia;h=Math.cos(u=(g=u)*ia/2+ja/4);q=Math.sin(u)};Fa.lineEnd=function(){c(a,g)}}function ib(c){var a=c[0];c=c[1];var g=Math.cos(c);return[g*Math.cos(a),g*Math.sin(a),Math.sin(c)]}function ec(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function tb(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function ad(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function fc(c,a){return[c[0]*a,c[1]*a,c[2]*a]}function gc(c){var a=Math.sqrt(c[0]*
c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function hc(c){return[Math.atan2(c[1],c[0]),ma(c[2])]}function ic(c,a){return 1E-6>ka(c[0]-a[0])&&1E-6>ka(c[1]-a[1])}function bd(c,a){c*=ia;var e=Math.cos(a*=ia);Fb(e*Math.cos(c),e*Math.sin(c),Math.sin(a))}function Fb(c,a,g){++Gb;jb+=(c-jb)/Gb;kb+=(a-kb)/Gb;Va+=(g-Va)/Gb}function me(){function c(c,e){c*=ia;var h=Math.cos(e*=ia),q=h*Math.cos(c),h=h*Math.sin(c),F=Math.sin(e),b=Math.atan2(Math.sqrt((b=g*F-l*h)*b+(b=l*q-a*F)*b+(b=a*h-g*q)*b),a*q+g*h+l*
F);jc+=b;Za+=b*(a+(a=q));$a+=b*(g+(g=h));Pa+=b*(l+(l=F));Fb(a,g,l)}var a,g,l;Ma.point=function(e,q){e*=ia;var h=Math.cos(q*=ia);a=h*Math.cos(e);g=h*Math.sin(e);l=Math.sin(q);Ma.point=c;Fb(a,g,l)}}function ne(){Ma.point=bd}function Fg(){function c(c,a){c*=ia;var e=Math.cos(a*=ia),g=e*Math.cos(c),e=e*Math.sin(c),u=Math.sin(a),U=h*u-q*e,b=q*g-l*u,n=l*e-h*g,f=Math.sqrt(U*U+b*b+n*n),k=l*g+h*e+q*u,p=f&&-ca(k)/f,f=Math.atan2(f,k);ub+=p*U;vb+=p*b;ab+=p*n;jc+=f;Za+=f*(l+(l=g));$a+=f*(h+(h=e));Pa+=f*(q+(q=
u));Fb(l,h,q)}var a,g,l,h,q;Ma.point=function(e,u){a=e;g=u;Ma.point=c;e*=ia;var F=Math.cos(u*=ia);l=F*Math.cos(e);h=F*Math.sin(e);q=Math.sin(u);Fb(l,h,q)};Ma.lineEnd=function(){c(a,g);Ma.lineEnd=ne;Ma.point=bd}}function wb(){return!0}function oe(c,a,g,l,h){var e=[],b=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,g=c[0],l=c[a];if(ic(g,l)){h.lineStart();for(l=0;l<a;++l)h.point((g=c[l])[0],g[1]);h.lineEnd()}else a=new kc(g,c,null,!0),g=new kc(g,null,a,!1),a.o=g,e.push(a),b.push(g),a=new kc(l,
c,null,!1),g=new kc(l,null,a,!0),a.o=g,e.push(a),b.push(g)}});b.sort(a);pe(e);pe(b);if(e.length){c=0;a=g;for(g=b.length;c<g;++c)b[c].e=a=!a;a=e[0];for(var u,F;;){for(var X=a,n=!0;X.v;)if((X=X.n)===a)return;u=X.z;h.lineStart();do{X.v=X.o.v=!0;if(X.e){if(n)for(c=0,g=u.length;c<g;++c)h.point((F=u[c])[0],F[1]);else l(X.x,X.n.x,1,h);X=X.n}else{if(n)for(u=X.p.z,c=u.length-1;0<=c;--c)h.point((F=u[c])[0],F[1]);else l(X.x,X.p.x,-1,h);X=X.p}X=X.o;u=X.z;n=!n}while(!X.v);h.lineEnd()}}}function pe(c){if(a=c.length){for(var a,
g=0,l=c[0],h;++g<a;)l.n=h=c[g],h.p=l,l=h;l.n=h=c[0];h.p=l}}function kc(c,a,g,l){this.x=c;this.z=a;this.o=g;this.e=l;this.v=!1;this.n=this.p=null}function qe(c,a,g,l){return function(e,q){function h(a,g){var l=e(a,g);c(a=l[0],g=l[1])&&q.point(a,g)}function u(c,a){var g=e(c,a);p.point(g[0],g[1])}function F(){C.point=u;p.lineStart()}function b(){C.point=h;p.lineEnd()}function n(c,a){A.push([c,a]);var g=e(c,a);y.point(g[0],g[1])}function f(){y.lineStart();A=[]}function k(){n(A[0][0],A[0][1]);y.lineEnd();
var c=y.clean(),a=m.buffer(),e=a.length;A.pop();B.push(A);A=null;if(e)if(c&1){var c=a[0],e=c.length-1,a=-1,g;if(0<e){t||(q.polygonStart(),t=!0);for(q.lineStart();++a<e;)q.point((g=c[a])[0],g[1]);q.lineEnd()}}else 1<e&&c&2&&a.push(a.pop().concat(a.shift())),r.push(a.filter(Gg))}var p=a(q),w=e.invert(l[0],l[1]),C={point:h,lineStart:F,lineEnd:b,polygonStart:function(){C.point=n;C.lineStart=f;C.lineEnd=k;r=[];B=[]},polygonEnd:function(){C.point=h;C.lineStart=F;C.lineEnd=b;r=x.merge(r);var c,a=w;c=B;var e=
a[0],l=a[1],u=[Math.sin(e),-Math.cos(e),0],U=0,X=0;hb.reset();for(var n=0,f=c.length;n<f;++n){var ua=c[n],k=ua.length;if(k)for(var sa=ua[0],p=sa[0],a=sa[1]/2+ja/4,Ja=Math.sin(a),y=Math.cos(a),m=1;;){m===k&&(m=0);var a=ua[m],A=a[0],N=a[1]/2+ja/4,M=Math.sin(N),N=Math.cos(N),v=A-p,z=0<=v?1:-1,V=z*v,I=V>ja,Ja=Ja*M;hb.add(Math.atan2(Ja*z*Math.sin(V),y*N+Ja*Math.cos(V)));U+=I?v+z*Ga:v;I^p>=e^A>=e&&(sa=tb(ib(sa),ib(a)),gc(sa),p=tb(u,sa),gc(p),p=(I^0<=v?-1:1)*ma(p[2]),l>p||l===p&&(sa[0]||sa[1]))&&(X+=I^0<=
v?1:-1);if(!m++)break;p=A;Ja=M;y=N;sa=a}}c=(-1E-6>U||1E-6>U&&0>hb)^X&1;r.length?(t||(q.polygonStart(),t=!0),oe(r,Hg,c,g,q)):c&&(t||(q.polygonStart(),t=!0),q.lineStart(),g(null,null,1,q),q.lineEnd());t&&(q.polygonEnd(),t=!1);r=B=null},sphere:function(){q.polygonStart();q.lineStart();g(null,null,1,q);q.lineEnd();q.polygonEnd()}},r,m=re(),y=a(m),t=!1,B,A;return C}}function Gg(c){return 1<c.length}function re(){var c=[],a;return{lineStart:function(){c.push(a=[])},point:function(c,e){a.push([c,e])},lineEnd:D,
buffer:function(){var e=c;c=[];a=null;return e},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Hg(c,a){return(0>(c=c.x)[0]?c[1]-za-1E-6:za-c[1])-(0>(a=a.x)[0]?a[1]-za-1E-6:za-a[1])}function Ig(c){function a(c,a){return Math.cos(c)*Math.cos(a)>h}function g(c,a,e){var g=ib(c),l=ib(a),q=[1,0,0],l=tb(g,l),u=ec(l,l),g=l[0],b=u-g*g;if(!b)return!e&&c;u=h*u/b;b=-h*g/b;g=tb(q,l);q=fc(q,u);l=fc(l,b);ad(q,l);l=ec(q,g);u=ec(g,g);b=l*l-u*(ec(q,q)-1);if(!(0>b)){var F=Math.sqrt(b),b=
fc(g,(-l-F)/u);ad(b,q);b=hc(b);if(!e)return b;e=c[0];var U=a[0];c=c[1];a=a[1];var X;U<e&&(X=e,e=U,U=X);var n=U-e,f=1E-6>ka(n-ja);!f&&a<c&&(X=c,c=a,a=X);if(f||1E-6>n?f?0<c+a^b[1]<(1E-6>ka(b[0]-e)?c:a):c<=b[1]&&b[1]<=a:n>ja^(e<=b[0]&&b[0]<=U))return a=fc(g,(-l+F)/u),ad(a,q),[b,hc(a)]}}function l(a,e){var g=q?c:ja-c,l=0;a<-g?l|=1:a>g&&(l|=2);e<-g?l|=4:e>g&&(l|=8);return l}var h=Math.cos(c),q=0<h,b=1E-6<ka(h),u=cd(c,6*ia);return qe(a,function(c){var e,h,u,U,F;return{lineStart:function(){U=u=!1;F=1},point:function(X,
n){var f=[X,n],ua,k=a(X,n),p=q?k?0:l(X,n):k?l(X+(0>X?ja:-ja),n):0;!e&&(U=u=k)&&c.lineStart();k!==u&&(ua=g(e,f),ic(e,ua)||ic(f,ua))&&(f[0]+=1E-6,f[1]+=1E-6,k=a(f[0],f[1]));if(k!==u)F=0,k?(c.lineStart(),ua=g(f,e),c.point(ua[0],ua[1])):(ua=g(e,f),c.point(ua[0],ua[1]),c.lineEnd()),e=ua;else if(b&&e&&q^k){var sa;p&h||!(sa=g(f,e,!0))||(F=0,q?(c.lineStart(),c.point(sa[0][0],sa[0][1]),c.point(sa[1][0],sa[1][1]),c.lineEnd()):(c.point(sa[1][0],sa[1][1]),c.lineEnd(),c.lineStart(),c.point(sa[0][0],sa[0][1])))}!k||
e&&ic(e,f)||c.point(f[0],f[1]);e=f;u=k;h=p},lineEnd:function(){u&&c.lineEnd();e=null},clean:function(){return F|(U&&u)<<1}}},u,q?[0,-c]:[-ja,c-ja])}function se(c,a,g,l){return function(e){var h=e.a,b=e.b,u=h.x,h=h.y,F=0,X=1,n=b.x-u,b=b.y-h,f;f=c-u;if(n||!(0<f)){f/=n;if(0>n){if(f<F)return;f<X&&(X=f)}else if(0<n){if(f>X)return;f>F&&(F=f)}f=g-u;if(n||!(0>f)){f/=n;if(0>n){if(f>X)return;f>F&&(F=f)}else if(0<n){if(f<F)return;f<X&&(X=f)}f=a-h;if(b||!(0<f)){f/=b;if(0>b){if(f<F)return;f<X&&(X=f)}else if(0<
b){if(f>X)return;f>F&&(F=f)}f=l-h;if(b||!(0>f)){f/=b;if(0>b){if(f>X)return;f>F&&(F=f)}else if(0<b){if(f<F)return;f<X&&(X=f)}0<F&&(e.a={x:u+F*n,y:h+F*b});1>X&&(e.b={x:u+X*n,y:h+X*b});return e}}}}}}function te(c,a,g,l){function e(e,l){return 1E-6>ka(e[0]-c)?0<l?0:3:1E-6>ka(e[0]-g)?0<l?2:1:1E-6>ka(e[1]-a)?0<l?1:0:0<l?3:2}function q(c,a){return b(c.x,a.x)}function b(c,a){var g=e(c,1),l=e(a,1);return g!==l?g-l:0===g?a[1]-c[1]:1===g?c[0]-a[0]:2===g?c[1]-a[1]:a[0]-c[0]}return function(h){function u(h,q,
u,U){var F=0,X=0;if(null==h||(F=e(h,u))!==(X=e(q,u))||0>b(h,q)^0<u){do U.point(0===F||3===F?c:g,1<F?l:a);while((F=(F+u+4)%4)!==X)}else U.point(q[0],q[1])}function U(e,q){c<=e&&e<=g&&a<=q&&q<=l&&h.point(e,q)}function n(e,q){e=Math.max(-1E9,Math.min(1E9,e));q=Math.max(-1E9,Math.min(1E9,q));var u=c<=e&&e<=g&&a<=q&&q<=l;C&&r.push([e,q]);if(v)y=e,t=q,A=u,v=!1,u&&(h.lineStart(),h.point(e,q));else if(u&&M)h.point(e,q);else{var b={a:{x:B,y:N},b:{x:e,y:q}};p(b)?(M||(h.lineStart(),h.point(b.a.x,b.a.y)),h.point(b.b.x,
b.b.y),u||h.lineEnd(),z=!1):u&&(h.lineStart(),h.point(e,q),z=!1)}B=e;N=q;M=u}var f=h,k=re(),p=se(c,a,g,l),w,C,r,m={point:U,lineStart:function(){m.point=n;C&&C.push(r=[]);v=!0;M=!1;B=N=NaN},lineEnd:function(){w&&(n(y,t),A&&M&&k.rejoin(),w.push(k.buffer()));m.point=U;M&&h.lineEnd()},polygonStart:function(){h=k;w=[];C=[];z=!0},polygonEnd:function(){h=f;w=x.merge(w);var a;a=[c,l];for(var e=0,g=C.length,b=a[1],U=0;U<g;++U)for(var F=1,X=C[U],n=X.length,k=X[0],ua;F<n;++F)ua=X[F],k[1]<=b?ua[1]>b&&0<ga(k,
ua,a)&&++e:ua[1]<=b&&0>ga(k,ua,a)&&--e,k=ua;a=0!==e;e=z&&a;g=w.length;if(e||g)h.polygonStart(),e&&(h.lineStart(),u(null,null,1,h),h.lineEnd()),g&&oe(w,q,a,u,h),h.polygonEnd();w=C=r=null}},y,t,A,B,N,M,v,z;return m}}function ue(c,a){function e(e,g){return e=c(e,g),a(e[0],e[1])}c.invert&&a.invert&&(e.invert=function(e,g){return e=a.invert(e,g),e&&c.invert(e[0],e[1])});return e}function dd(c){var a=0,g=ja/3,l=ed(c);c=l(a,g);c.parallels=function(c){return arguments.length?l(a=c[0]*ja/180,g=c[1]*ja/180):
[a/ja*180,g/ja*180]};return c}function ve(c,a){function e(c,a){var e=Math.sqrt(q-2*h*Math.sin(a))/h;return[e*Math.sin(c*=h),b-e*Math.cos(c)]}var l=Math.sin(c),h=(l+Math.sin(a))/2,q=1+l*(2*h-l),b=Math.sqrt(q)/h;e.invert=function(c,a){var e=b-a;return[Math.atan2(c,e)/h,ma((q-(c*c+e*e)*h*h)/(2*h))]};return e}function Jg(){function c(c,a){fd+=h*c-l*a;l=c;h=a}var a,g,l,h;bb.point=function(e,b){bb.point=c;a=l=e;g=h=b};bb.lineEnd=function(){c(a,g)}}function Kg(){function c(c,a){b.push("M",c,",",a,q)}function a(c,
a){b.push("M",c,",",a);u.point=g}function g(c,a){b.push("L",c,",",a)}function l(){u.point=c}function h(){b.push("Z")}var q=we(4.5),b=[],u={point:c,lineStart:function(){u.point=a},lineEnd:l,polygonStart:function(){u.lineEnd=h},polygonEnd:function(){u.lineEnd=l;u.point=c},pointRadius:function(c){q=we(c);return u},result:function(){if(b.length){var c=b.join("");b=[];return c}}};return u}function we(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function lb(c,a){jb+=c;kb+=
a;++Va}function xe(){function c(c,e){var l=c-a,h=e-g,l=Math.sqrt(l*l+h*h);Za+=l*(a+c)/2;$a+=l*(g+e)/2;Pa+=l;lb(a=c,g=e)}var a,g;Na.point=function(e,h){Na.point=c;lb(a=e,g=h)}}function ye(){Na.point=lb}function Lg(){function c(c,a){var e=c-l,g=a-h,e=Math.sqrt(e*e+g*g);Za+=e*(l+c)/2;$a+=e*(h+a)/2;Pa+=e;e=h*c-l*a;ub+=e*(l+c);vb+=e*(h+a);ab+=3*e;lb(l=c,h=a)}var a,g,l,h;Na.point=function(e,b){Na.point=c;lb(a=l=e,g=h=b)};Na.lineEnd=function(){c(a,g)}}function Mg(c){function a(a,e){c.moveTo(a,e);c.arc(a,
e,b,0,Ga)}function g(a,e){c.moveTo(a,e);u.point=l}function l(a,e){c.lineTo(a,e)}function h(){u.point=a}function q(){c.closePath()}var b=4.5,u={point:a,lineStart:function(){u.point=g},lineEnd:h,polygonStart:function(){u.lineEnd=q},polygonEnd:function(){u.lineEnd=h;u.point=a},pointRadius:function(c){b=c;return u},result:D};return u}function ze(c){function a(c){return(u?l:g)(c)}function g(a){return Ae(a,function(e,g){e=c(e,g);a.point(e[0],e[1])})}function l(a){function e(e,g){e=c(e,g);a.point(e[0],e[1])}
function g(){m=NaN;B.point=l;a.lineStart()}function l(e,g){var l=ib([e,g]),q=c(e,g);h(m,y,r,t,x,A,m=q[0],y=q[1],r=e,t=l[0],x=l[1],A=l[2],u,a);a.point(m,y)}function q(){B.point=e;a.lineEnd()}function b(){g();B.point=U;B.lineEnd=F}function U(c,a){l(n=c,a);f=m;k=y;p=t;w=x;C=A;B.point=l}function F(){h(m,y,r,t,x,A,f,k,n,p,w,C,u,a);B.lineEnd=q;q()}var n,f,k,p,w,C,r,m,y,t,x,A,B={point:e,lineStart:g,lineEnd:q,polygonStart:function(){a.polygonStart();B.lineStart=b},polygonEnd:function(){a.polygonEnd();B.lineStart=
g}};return B}function h(a,e,g,l,u,U,n,f,k,p,w,C,r,m){var F=n-a,X=f-e,ua=F*F+X*X;if(ua>4*q&&r--){var y=l+p,t=u+w,B=U+C,Ja=Math.sqrt(y*y+t*t+B*B),x=Math.asin(B/=Ja),A=1E-6>ka(ka(B)-1)||1E-6>ka(g-k)?(g+k)/2:Math.atan2(t,y),sa=c(A,x),x=sa[0],sa=sa[1],N=x-a,M=sa-e,v=X*N-F*M;if(v*v/ua>q||.3<ka((F*N+X*M)/ua-.5)||l*p+u*w+U*C<b)h(a,e,g,l,u,U,x,sa,A,y/=Ja,t/=Ja,B,r,m),m.point(x,sa),h(x,sa,A,y,t,B,n,f,k,p,w,C,r,m)}}var q=.5,b=Math.cos(30*ia),u=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(q);
u=0<(q=c*c)&&16;return a};return a}function Ng(c){var a=ze(function(a,e){return c([a*ta,e*ta])});return function(c){return Be(a(c))}}function Ce(c){this.stream=c}function Ae(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function cb(c){return ed(function(){return c})()}function ed(c){function a(c){c=u(c[0]*ia,c[1]*ia);return[c[0]*X+m,y-c[1]*X]}function g(c){return(c=
u.invert((c[0]-m)/X,(y-c[1])/X))&&[c[0]*ta,c[1]*ta]}function l(){u=ue(b=gd(w,C,r),q);var c=q(k,p);m=n-c[0]*X;y=f+c[1]*X;return h()}function h(){M&&(M.valid=!1,M=null);return a}var q,b,u,F=ze(function(c,a){c=q(c,a);return[c[0]*X+m,y-c[1]*X]}),X=150,n=480,f=250,k=0,p=0,w=0,C=0,r=0,m,y,t=De,B=ya,A=null,N=null,M;a.stream=function(c){M&&(M.valid=!1);M=Be(t(b,F(B(c))));M.valid=!0;return M};a.clipAngle=function(c){if(!arguments.length)return A;t=null==c?(A=c,De):Ig((A=+c)*ia);return h()};a.clipExtent=function(c){if(!arguments.length)return N;
B=(N=c)?te(c[0][0],c[0][1],c[1][0],c[1][1]):ya;return h()};a.scale=function(c){if(!arguments.length)return X;X=+c;return l()};a.translate=function(c){if(!arguments.length)return[n,f];n=+c[0];f=+c[1];return l()};a.center=function(c){if(!arguments.length)return[k*ta,p*ta];k=c[0]%360*ia;p=c[1]%360*ia;return l()};a.rotate=function(c){if(!arguments.length)return[w*ta,C*ta,r*ta];w=c[0]%360*ia;C=c[1]%360*ia;r=2<c.length?c[2]%360*ia:0;return l()};x.rebind(a,F,"precision");return function(){q=c.apply(this,
arguments);a.invert=q.invert&&g;return l()}}function Be(c){return Ae(c,function(a,g){c.point(a*ia,g*ia)})}function Hb(c,a){return[c,a]}function Ee(c,a){return[c>ja?c-Ga:c<-ja?c+Ga:c,a]}function gd(c,a,g){return c?a||g?ue(Fe(c),Ge(a,g)):Fe(c):a||g?Ge(a,g):Ee}function He(c){return function(a,g){return a+=c,[a>ja?a-Ga:a<-ja?a+Ga:a,g]}}function Fe(c){var a=He(c);a.invert=He(-c);return a}function Ge(c,a){function e(c,a){var e=Math.cos(a),g=Math.cos(c)*e,e=Math.sin(c)*e,u=Math.sin(a),U=u*l+g*h;return[Math.atan2(e*
q-U*b,g*l-u*h),ma(U*q+e*b)]}var l=Math.cos(c),h=Math.sin(c),q=Math.cos(a),b=Math.sin(a);e.invert=function(c,a){var e=Math.cos(a),g=Math.cos(c)*e,e=Math.sin(c)*e,u=Math.sin(a),U=u*q-e*b;return[Math.atan2(e*q+u*b,g*l+U*h),ma(U*l-g*h)]};return e}function cd(c,a){var e=Math.cos(c),l=Math.sin(c);return function(g,q,b,u){var h=b*a;if(null!=g){if(g=Ie(e,g),q=Ie(e,q),0<b?g<q:g>q)g+=b*Ga}else g=c+b*Ga,q=c-.5*h;for(var U;0<b?g>q:g<q;g-=h)u.point((U=hc([e,-l*Math.cos(g),-l*Math.sin(g)]))[0],U[1])}}function Ie(c,
a){var e=ib(a);e[0]-=c;gc(e);var l=ca(-e[1]);return((0>-e[2]?-l:l)+2*Math.PI-1E-6)%(2*Math.PI)}function Je(c,a,g){var e=x.range(c,a-1E-6,g).concat(a);return function(c){return e.map(function(a){return[c,a]})}}function Ke(c,a,g){var e=x.range(c,a-1E-6,g).concat(a);return function(c){return e.map(function(a){return[a,c]})}}function hd(c){return c.source}function id(c){return c.target}function Og(c,a,g,l){var e=Math.cos(a),q=Math.sin(a),b=Math.cos(l),u=Math.sin(l),F=e*Math.cos(c),n=e*Math.sin(c),f=b*
Math.cos(g),k=b*Math.sin(g),p=2*Math.asin(Math.sqrt(oa(l-a)+e*b*oa(g-c))),w=1/Math.sin(p);g=p?function(c){var a=Math.sin(c*=p)*w;c=Math.sin(p-c)*w;var e=c*F+a*f,g=c*n+a*k;return[Math.atan2(g,e)*ta,Math.atan2(c*q+a*u,Math.sqrt(e*e+g*g))*ta]}:function(){return[c*ta,a*ta]};g.distance=p;return g}function Ib(c,a){function e(a,e){var g=Math.cos(e),l=c(Math.cos(a)*g);return[l*g*Math.sin(a),l*Math.sin(e)]}e.invert=function(c,e){var g=Math.sqrt(c*c+e*e),l=a(g),h=Math.sin(l);return[Math.atan2(c*h,g*Math.cos(l)),
Math.asin(g&&e*h/g)]};return e}function Le(c,a){function e(c,a){0<q?a<-za+1E-6&&(a=-za+1E-6):a>za-1E-6&&(a=za-1E-6);var e=q/Math.pow(Math.tan(ja/4+a/2),h);return[e*Math.sin(h*c),q-e*Math.cos(h*c)]}var l=Math.cos(c),h=c===a?Math.sin(c):Math.log(l/Math.cos(a))/Math.log(Math.tan(ja/4+a/2)/Math.tan(ja/4+c/2)),q=l*Math.pow(Math.tan(ja/4+c/2),h)/h;if(!h)return lc;e.invert=function(c,a){var e=q-a;return[Math.atan2(c,e)/h,2*Math.atan(Math.pow(q/((0<h?1:0>h?-1:0)*Math.sqrt(c*c+e*e)),1/h))-za]};return e}function Me(c,
a){function e(c,a){var e=q-a;return[e*Math.sin(h*c),q-e*Math.cos(h*c)]}var l=Math.cos(c),h=c===a?Math.sin(c):(l-Math.cos(a))/(a-c),q=l/h+c;if(1E-6>ka(h))return Hb;e.invert=function(c,a){var e=q-a;return[Math.atan2(c,e)/h,q-(0<h?1:0>h?-1:0)*Math.sqrt(c*c+e*e)]};return e}function lc(c,a){return[c,Math.log(Math.tan(ja/4+a/2))]}function Ne(c){var a=cb(c),g=a.scale,l=a.translate,h=a.clipExtent,q;a.scale=function(){var c=g.apply(a,arguments);return c===a?q?a.clipExtent(null):a:c};a.translate=function(){var c=
l.apply(a,arguments);return c===a?q?a.clipExtent(null):a:c};a.clipExtent=function(c){var e=h.apply(a,arguments);if(e===a){if(q=null==c){var b=ja*g(),U=l();h([[U[0]-b,U[1]-b],[U[0]+b,U[1]+b]])}}else q&&(e=null);return e};return a.clipExtent(null)}function jd(c,a){return[Math.log(Math.tan(ja/4+a/2)),-c]}function xb(c){return c[0]}function Jb(c){return c[1]}function Oe(c){for(var a=c.length,g=[0,1],l=2,h=2;h<a;h++){for(;1<l&&0>=ga(c[g[l-2]],c[g[l-1]],c[h]);)--l;g[l++]=h}return g.slice(0,l)}function Pg(c,
a){return c[0]-a[0]||c[1]-a[1]}function kd(c,a,g){return(g[0]-a[0])*(c[1]-a[1])<(g[1]-a[1])*(c[0]-a[0])}function Pe(c,a,g,l){var e=c[0],q=g[0],b=a[0]-e,u=l[0]-q;c=c[1];g=g[1];a=a[1]-c;l=l[1]-g;q=(u*(c-g)-l*(e-q))/(l*b-u*a);return[e+q*b,c+q*a]}function Qe(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Qg(){mc(this);this.edge=this.site=this.circle=null}function Re(c){var a=Se.pop()||new Qg;a.site=c;return a}function ld(c){yb(c);zb.remove(c);Se.push(c);mc(c)}function Te(c,a){var e=
c.site,l=e.x,h=e.y,q=h-a;if(!q)return l;var b=c.P;if(!b)return-Infinity;var e=b.site,b=e.x,e=e.y,u=e-a;if(!u)return b;var F=b-l,n=1/q-1/u,f=F/u;return n?(-f+Math.sqrt(f*f-2*n*(F*F/(-2*u)-e+u/2+h-q/2)))/n+l:(l+b)/2}function Ue(c){this.site=c;this.edges=[]}function Ve(c,a){return a.angle-c.angle}function Rg(){mc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ab(c){var a=c.P,g=c.N;if(a&&g){var l=a.site,a=c.site,h=g.site;if(l!==h){var g=a.x,q=a.y,b=l.x-g,u=l.y-q,l=h.x-g,h=h.y-q,F=2*(b*h-
u*l);if(!(-1E-12<=F)){var n=b*b+u*u,f=l*l+h*h,u=(h*n-u*f)/F,b=(b*f-l*n)/F,h=b+q,q=We.pop()||new Rg;q.arc=c;q.site=a;q.x=u+g;q.y=h+Math.sqrt(u*u+b*b);q.cy=h;c.circle=q;c=null;for(a=Kb._;a;)if(q.y<a.y||q.y===a.y&&q.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Kb.insert(c,q);c||(md=q)}}}}function yb(c){var a=c.circle;a&&(a.P||(md=a.N),Kb.remove(a),We.push(a),mc(a),c.circle=null)}function Sg(c,a){var e=c.b;if(e)return!0;var l=c.a,e=a[0][0],h=a[1][0],q=a[0][1],b=a[1][1],u=c.l,
F=c.r,n=u.x,u=u.y,f=F.x,F=F.y,k=(n+f)/2,p;if(F===u){if(k<e||k>=h)return;if(n>f){if(!l)l={x:k,y:q};else if(l.y>=b)return;e={x:k,y:b}}else{if(!l)l={x:k,y:b};else if(l.y<q)return;e={x:k,y:q}}}else if(p=(n-f)/(F-u),k=(u+F)/2-p*k,-1>p||1<p)if(n>f){if(!l)l={x:(q-k)/p,y:q};else if(l.y>=b)return;e={x:(b-k)/p,y:b}}else{if(!l)l={x:(b-k)/p,y:b};else if(l.y<q)return;e={x:(q-k)/p,y:q}}else if(u<F){if(!l)l={x:e,y:p*e+k};else if(l.x>=h)return;e={x:h,y:p*h+k}}else{if(!l)l={x:h,y:p*h+k};else if(l.x<e)return;e={x:e,
y:p*e+k}}c.a=l;c.b=e;return!0}function Xe(c,a){this.l=c;this.r=a;this.a=this.b=null}function Lb(c,a,g,l){var e=new Xe(c,a);Bb.push(e);g&&nc(e,c,a,g);l&&nc(e,a,c,l);mb[c.i].edges.push(new oc(e,c,a));mb[a.i].edges.push(new oc(e,a,c));return e}function Tg(c,a,g){c=new Xe(c,null);c.a=a;c.b=g;Bb.push(c);return c}function nc(c,a,g,l){c.a||c.b?c.l===g?c.b=l:c.a=l:(c.a=l,c.l=a,c.r=g)}function oc(c,a,g){var e=c.a,h=c.b;this.edge=c;this.site=a;this.angle=g?Math.atan2(g.y-a.y,g.x-a.x):c.l===a?Math.atan2(h.x-
e.x,e.y-h.y):Math.atan2(e.x-h.x,h.y-e.y)}function nd(){this._=null}function mc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Mb(c,a){var e=a.R,l=a.U;l?l.L===a?l.L=e:l.R=e:c._=e;e.U=l;a.U=e;a.R=e.L;a.R&&(a.R.U=a);e.L=a}function Nb(c,a){var e=a.L,l=a.U;l?l.L===a?l.L=e:l.R=e:c._=e;e.U=l;a.U=e;a.L=e.R;a.L&&(a.L.U=a);e.R=a}function Ye(c){for(;c.L;)c=c.L;return c}function od(c,a){var e=c.sort(Ug).pop(),l,h,q;Bb=[];mb=Array(c.length);zb=new nd;for(Kb=new nd;;)if(q=md,e&&(!q||e.y<q.y||e.y===q.y&&e.x<q.x)){if(e.x!==
l||e.y!==h){mb[e.i]=new Ue(e);var b,u;h=l=void 0;q=e;for(var F=q.x,n=q.y,f=zb._;f;)if(u=Te(f,n)-F,1E-6<u)f=f.L;else{var k=f;b=n;var p=k.N;p?b=Te(p,b):(k=k.site,b=k.y===b?k.x:Infinity);b=F-b;if(1E-6<b){if(!f.R){h=f;break}f=f.R}else{-1E-6<u?(h=f.P,l=f):-1E-6<b?(h=f,l=f.N):h=l=f;break}}u=Re(q);zb.insert(h,u);if(h||l)if(h===l)yb(h),l=Re(h.site),zb.insert(u,l),u.edge=l.edge=Lb(h.site,u.site),Ab(h),Ab(l);else if(l){yb(h);yb(l);F=h.site;f=F.x;b=F.y;var k=q.x-f,p=q.y-b,n=l.site,w=n.x-f,C=n.y-b,r=2*(k*C-p*
w),m=k*k+p*p,y=w*w+C*C,f={x:(C*m-p*y)/r+f,y:(k*y-w*m)/r+b};nc(l.edge,F,n,f);u.edge=Lb(F,q,null,f);l.edge=Lb(q,n,null,f);Ab(h);Ab(l)}else u.edge=Lb(h.site,u.site);l=e.x;h=e.y}e=c.pop()}else if(q){n=q.arc;q=n.circle;F=q.x;f=q.cy;q={x:F,y:f};k=n.P;b=n.N;u=[n];ld(n);for(n=k;n.circle&&1E-6>ka(F-n.circle.x)&&1E-6>ka(f-n.circle.cy);)k=n.P,u.unshift(n),ld(n),n=k;u.unshift(n);yb(n);for(k=b;k.circle&&1E-6>ka(F-k.circle.x)&&1E-6>ka(f-k.circle.cy);)b=k.N,u.push(k),ld(k),k=b;u.push(k);yb(k);f=u.length;for(F=1;F<
f;++F)k=u[F],n=u[F-1],nc(k.edge,n.site,k.site,q);n=u[0];k=u[f-1];k.edge=Lb(n.site,k.site,null,q);Ab(n);Ab(k)}else break;if(a){e=Bb;l=se(a[0][0],a[0][1],a[1][0],a[1][1]);for(h=e.length;h--;)if(q=e[h],!Sg(q,a)||!l(q)||1E-6>ka(q.a.x-q.b.x)&&1E-6>ka(q.a.y-q.b.y))q.a=q.b=null,e.splice(h,1);e=a[0][0];l=a[1][0];h=a[0][1];q=a[1][1];f=mb;for(b=f.length;b--;)if((k=f[b])&&k.prepare())for(w=k.edges,C=w.length,p=0;p<C;)if(r=w[p].end(),F=r.x,n=r.y,m=w[++p%C].start(),u=m.x,m=m.y,1E-6<ka(F-u)||1E-6<ka(n-m))w.splice(p,
0,new oc(Tg(k.site,r,1E-6>ka(F-e)&&1E-6<q-n?{x:e,y:1E-6>ka(u-e)?m:q}:1E-6>ka(n-q)&&1E-6<l-F?{x:1E-6>ka(m-q)?u:l,y:q}:1E-6>ka(F-l)&&1E-6<n-h?{x:l,y:1E-6>ka(u-l)?m:h}:1E-6>ka(n-h)&&1E-6<F-e?{x:1E-6>ka(m-h)?u:e,y:h}:null),k.site,null)),++C}e={cells:mb,edges:Bb};zb=Kb=Bb=mb=null;return e}function Ug(c,a){return a.y-c.y||a.x-c.x}function Vg(c){return c.x}function Wg(c){return c.y}function Ze(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(c,a,g,l,h,q){if(!c(a,g,l,h,q)){var e=.5*(g+h),b=
.5*(l+q);a=a.nodes;a[0]&&Ob(c,a[0],g,l,e,b);a[1]&&Ob(c,a[1],e,l,h,b);a[2]&&Ob(c,a[2],g,b,e,q);a[3]&&Ob(c,a[3],e,b,h,q)}}function pd(c,a){c=x.rgb(c);a=x.rgb(a);var e=c.r,l=c.g,h=c.b,q=a.r-e,b=a.g-l,u=a.b-h;return function(c){return"#"+sb(Math.round(e+q*c))+sb(Math.round(l+b*c))+sb(Math.round(h+u*c))}}function $e(c,a){var e={},l={},h;for(h in c)h in a?e[h]=nb(c[h],a[h]):l[h]=c[h];for(h in a)h in c||(l[h]=a[h]);return function(c){for(h in e)l[h]=e[h](c);return l}}function Wa(c,a){a-=c=+c;return function(e){return c+
a*e}}function af(c,a){var e=qd.lastIndex=rd.lastIndex=0,l,h,q,b=-1,u=[],F=[];c+="";for(a+="";(l=qd.exec(c))&&(h=rd.exec(a));)(q=h.index)>e&&(q=a.substring(e,q),u[b]?u[b]+=q:u[++b]=q),(l=l[0])===(h=h[0])?u[b]?u[b]+=h:u[++b]=h:(u[++b]=null,F.push({i:b,x:Wa(l,h)})),e=rd.lastIndex;e<a.length&&(q=a.substring(e),u[b]?u[b]+=q:u[++b]=q);return 2>u.length?F[0]?(a=F[0].x,function(c){return a(c)+""}):function(){return a}:(a=F.length,function(c){for(var e=0,g;e<a;++e)u[(g=F[e]).i]=g.x(c);return u.join("")})}
function nb(c,a){for(var e=x.interpolators.length,l;0<=--e&&!(l=x.interpolators[e](c,a)););return l}function pc(c,a){var e=[],l=[],h=c.length,q=a.length,b=Math.min(c.length,a.length),u;for(u=0;u<b;++u)e.push(nb(c[u],a[u]));for(;u<h;++u)l[u]=c[u];for(;u<q;++u)l[u]=a[u];return function(c){for(u=0;u<b;++u)l[u]=e[u](c);return l}}function Xg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function bf(c){return function(a){return 1-c(1-a)}}function cf(c){return function(a){return.5*(.5>a?c(2*a):2-c(2-
2*a))}}function Yg(c){return c*c}function Zg(c){return c*c*c}function $g(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,g=a*c;return 4*(.5>c?g:3*(c-a)+g-.75)}function ah(c){return 1-Math.cos(c*za)}function bh(c){return Math.pow(2,10*(c-1))}function ch(c){return 1-Math.sqrt(1-c*c)}function dh(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function df(c,a){a-=c;return function(e){return Math.round(c+a*e)}}function ef(c){var a=
[c.a,c.b],g=[c.c,c.d],l=ff(a),h=a[0]*g[0]+a[1]*g[1],q=-h;g[0]+=q*a[0];g[1]+=q*a[1];q=ff(g)||0;a[0]*g[1]<g[0]*a[1]&&(a[0]*=-1,a[1]*=-1,l*=-1,h*=-1);this.rotate=(l?Math.atan2(a[1],a[0]):Math.atan2(-g[0],g[1]))*ta;this.translate=[c.e,c.f];this.scale=[l,q];this.skew=q?Math.atan2(h,q)*ta:0}function ff(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function gf(c,a){var e=[],l=[],h,q=x.transform(c),b=x.transform(a),u=q.translate,F=b.translate,n=q.rotate,f=b.rotate,k=q.skew,p=b.skew,
q=q.scale,b=b.scale;u[0]!=F[0]||u[1]!=F[1]?(e.push("translate(",null,",",null,")"),l.push({i:1,x:Wa(u[0],F[0])},{i:3,x:Wa(u[1],F[1])})):F[0]||F[1]?e.push("translate("+F+")"):e.push("");n!=f?(180<n-f?f+=360:180<f-n&&(n+=360),l.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:Wa(n,f)})):f&&e.push(e.pop()+"rotate("+f+")");k!=p?l.push({i:e.push(e.pop()+"skewX(",null,")")-2,x:Wa(k,p)}):p&&e.push(e.pop()+"skewX("+p+")");q[0]!=b[0]||q[1]!=b[1]?(h=e.push(e.pop()+"scale(",null,",",null,")"),l.push({i:h-4,x:Wa(q[0],
b[0])},{i:h-2,x:Wa(q[1],b[1])})):1==b[0]&&1==b[1]||e.push(e.pop()+"scale("+b+")");h=l.length;return function(c){for(var a=-1,g;++a<h;)e[(g=l[a]).i]=g.x(c);return e.join("")}}function eh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return(e-c)*a}}function fh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return Math.max(0,Math.min(1,(e-c)*a))}}function gh(c){var a=c.source;c=c.target;var g;var l=c;if(a===l)g=a;else{g=hf(a);for(var l=hf(l),h=g.pop(),q=l.pop(),b=null;h===q;)b=h,h=g.pop(),q=l.pop();g=b}for(l=
[a];a!==g;)a=a.parent,l.push(a);for(a=l.length;c!==g;)l.splice(a,0,c),c=c.parent;return l}function hf(c){for(var a=[],g=c.parent;null!=g;)a.push(c),c=g,g=g.parent;a.push(c);return a}function hh(c){c.fixed|=2}function ih(c){c.fixed&=-7}function jh(c){c.fixed|=4;c.px=c.x;c.py=c.y}function kh(c){c.fixed&=-5}function jf(c,a,g){var e=0,h=0;c.charge=0;if(!c.leaf)for(var q=c.nodes,b=q.length,u=-1,F;++u<b;)F=q[u],null!=F&&(jf(F,a,g),c.charge+=F.charge,e+=F.charge*F.cx,h+=F.charge*F.cy);c.point&&(c.leaf||
(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=g[c.point.index],c.charge+=c.pointCharge=a,e+=a*c.point.x,h+=a*c.point.y);c.cx=e/c.charge;c.cy=h/c.charge}function Pb(c,a){x.rebind(c,a,"sort","children","value");c.nodes=c;c.links=lh;return c}function Qb(c,a){for(var e=[c];null!=(c=e.pop());)if(a(c),(h=c.children)&&(l=h.length))for(var l,h;0<=--l;)e.push(h[l])}function Qa(c,a){for(var e=[c],l=[];null!=(c=e.pop());)if(l.push(c),(b=c.children)&&(q=b.length))for(var h=-1,q,b;++h<q;)e.push(b[h]);
for(;null!=(c=l.pop());)a(c)}function mh(c){return c.children}function nh(c){return c.value}function oh(c,a){return a.value-c.value}function lh(c){return x.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function ph(c){return c.x}function qh(c){return c.y}function rh(c,a,g){c.y0=a;c.y=g}function sd(c){return x.range(c.length)}function td(c){var a=-1;c=c[0].length;for(var g=[];++a<c;)g[a]=0;return g}function sh(c){for(var a=1,g=0,l=c[0][1],h,q=c.length;a<
q;++a)(h=c[a][1])>l&&(g=a,l=h);return g}function th(c){return c.reduce(uh,0)}function uh(c,a){return c+a[1]}function vh(c,a){return kf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function kf(c,a){for(var e=-1,l=+c[0],h=(c[1]-l)/a,q=[];++e<=a;)q[e]=h*e+l;return q}function wh(c){return[x.min(c),x.max(c)]}function xh(c,a){return c.value-a.value}function ud(c,a){var e=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=e;e._pack_prev=a}function lf(c,a){c._pack_next=a;a._pack_prev=c}function mf(c,
a){var e=a.x-c.x,l=a.y-c.y,h=c.r+a.r;return.999*h*h>e*e+l*l}function nf(c){function a(c){l=Math.min(c.x-c.r,l);h=Math.max(c.x+c.r,h);q=Math.min(c.y-c.r,q);b=Math.max(c.y+c.r,b)}if((g=c.children)&&(w=g.length)){var g,l=Infinity,h=-Infinity,q=Infinity,b=-Infinity,u,F,n,f,k,p,w;g.forEach(yh);u=g[0];u.x=-u.r;u.y=0;a(u);if(1<w&&(F=g[1],F.x=F.r,F.y=0,a(F),2<w))for(n=g[2],of(u,F,n),a(n),ud(u,n),u._pack_prev=n,ud(n,F),F=u._pack_next,f=3;f<w;f++){of(u,F,n=g[f]);var C=0,m=1,r=1;for(k=F._pack_next;k!==F;k=k._pack_next,
m++)if(mf(k,n)){C=1;break}if(1==C)for(p=u._pack_prev;p!==k._pack_prev&&!mf(p,n);p=p._pack_prev,r++);C?(m<r||m==r&&F.r<u.r?lf(u,F=k):lf(u=p,F),f--):(ud(u,n),F=n,a(n))}u=(l+h)/2;F=(q+b)/2;for(f=k=0;f<w;f++)n=g[f],n.x-=u,n.y-=F,k=Math.max(k,n.r+Math.sqrt(n.x*n.x+n.y*n.y));c.r=k;g.forEach(zh)}}function yh(c){c._pack_next=c._pack_prev=c}function zh(c){delete c._pack_next;delete c._pack_prev}function pf(c,a,g,l){var e=c.children;c.x=a+=l*c.x;c.y=g+=l*c.y;c.r*=l;if(e){c=-1;for(var q=e.length;++c<q;)pf(e[c],
a,g,l)}}function of(c,a,g){var e=c.r+g.r,h=a.x-c.x,q=a.y-c.y;if(e&&(h||q)){var b=a.r+g.r,u=h*h+q*q,b=b*b,e=e*e;a=.5+(e-b)/(2*u);b=Math.sqrt(Math.max(0,2*b*(e+u)-(e-=u)*e-b*b))/(2*u);g.x=c.x+a*h+b*q;g.y=c.y+a*q-b*h}else g.x=c.x+e,g.y=c.y}function qf(c,a){return c.parent==a.parent?1:2}function vd(c){var a=c.children;return a.length?a[0]:c.t}function wd(c){var a=c.children,g;return(g=a.length)?a[g-1]:c.t}function Ah(c){return 1+x.max(c,function(c){return c.y})}function Bh(c){return c.reduce(function(c,
a){return c+a.x},0)/c.length}function rf(c){var a=c.children;return a&&a.length?rf(a[0]):c}function sf(c){var a=c.children,g;return a&&(g=a.length)?sf(a[g-1]):c}function xd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function tf(c,a){var e=c.x+a[3],l=c.y+a[0],h=c.dx-a[1]-a[3],q=c.dy-a[0]-a[2];0>h&&(e+=h/2,h=0);0>q&&(l+=q/2,q=0);return{x:e,y:l,dx:h,dy:q}}function Cb(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function qc(c){return c.rangeExtent?c.rangeExtent():Cb(c.range())}function Ch(c,a,g,l){var e=
g(c[0],c[1]),q=l(a[0],a[1]);return function(c){return q(e(c))}}function rc(c,a){var e=0,l=c.length-1,h=c[e],q=c[l],b;q<h&&(b=e,e=l,l=b,b=h,h=q,q=b);c[e]=a.floor(h);c[l]=a.ceil(q);return c}function uf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Dh}function Eh(c,a,g,l){var e=[],q=[],b=0,u=Math.min(c.length,a.length)-1;c[u]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++b<=u;)e.push(g(c[b-1],c[b])),q.push(l(a[b-1],a[b]));return function(a){var g=
x.bisect(c,a,1,u)-1;return q[g](e[g](a))}}function vf(c,a,g,l){function e(){var e=2<Math.min(c.length,a.length)?Eh:Ch,h=l?fh:eh;b=e(c,a,h,g);u=e(a,c,h,nb);return q}function q(c){return b(c)}var b,u;q.invert=function(c){return u(c)};q.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return e()};q.range=function(c){if(!arguments.length)return a;a=c;return e()};q.rangeRound=function(c){return q.range(c).interpolate(df)};q.clamp=function(c){if(!arguments.length)return l;l=c;return e()};
q.interpolate=function(c){if(!arguments.length)return g;g=c;return e()};q.ticks=function(a){return x.range.apply(x,db(c,a))};q.tickFormat=function(a,e){return yd(c,a,e)};q.nice=function(a){rc(c,uf(db(c,a)[2]));return e()};q.copy=function(){return vf(c,a,g,l)};return e()}function zd(c,a){return x.rebind(c,a,"range","rangeRound","interpolate","clamp")}function db(c,a){null==a&&(a=10);var e=Cb(c),l=e[1]-e[0],h=Math.pow(10,Math.floor(Math.log(l/a)/Math.LN10)),l=a/l*h;.15>=l?h*=10:.35>=l?h*=5:.75>=l&&
(h*=2);e[0]=Math.ceil(e[0]/h)*h;e[1]=Math.floor(e[1]/h)*h+.5*h;e[2]=h;return e}function yd(c,a,g){c=db(c,a);if(g){a=ee.exec(g);a.shift();if("s"===a[8]){var e=x.formatPrefix(Math.max(ka(c[0]),ka(c[1])));a[7]||(a[7]="."+sc(e.scale(c[2])));a[8]="f";g=x.format(a.join(""));return function(c){return g(e.scale(c))+e.symbol}}a[7]||(a[7]="."+Fh(a[8],c));g=a.join("")}else g=",."+sc(c[2])+"f";return x.format(g)}function sc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Fh(c,a){var e=sc(a[2]);return c in
Gh?Math.abs(e-sc(Math.max(ka(a[0]),ka(a[1]))))+ +("e"!==c):e-2*("%"===c)}function wf(c,a,g,l){function e(c){return(g?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function q(c){return g?Math.pow(a,c):-Math.pow(a,-c)}function b(a){return c(e(a))}b.invert=function(a){return q(c.invert(a))};b.domain=function(a){if(!arguments.length)return l;g=0<=a[0];c.domain((l=a.map(Number)).map(e));return b};b.base=function(g){if(!arguments.length)return a;a=+g;c.domain(l.map(e));return b};b.nice=function(){var a=
rc(l.map(e),g?Math:Hh);c.domain(a);l=a.map(q);return b};b.ticks=function(){var c=Cb(l),h=[],b=c[0],c=c[1],n=Math.floor(e(b)),f=Math.ceil(e(c)),k=a%1?2:a;if(isFinite(f-n)){if(g){for(;n<f;n++)for(var U=1;U<k;U++)h.push(q(n)*U);h.push(q(n))}else for(h.push(q(n));n++<f;)for(U=k-1;0<U;U--)h.push(q(n)*U);for(n=0;h[n]<b;n++);for(f=h.length;h[f-1]>c;f--);h=h.slice(n,f)}return h};b.tickFormat=function(c,a){if(!arguments.length)return xf;2>arguments.length?a=xf:"function"!==typeof a&&(a=x.format(a));var l=
Math.max(.1,c/b.ticks().length),h=g?(u=1E-12,Math.ceil):(u=-1E-12,Math.floor),u;return function(c){return c/q(h(e(c)+u))<=l?a(c):""}};b.copy=function(){return wf(c.copy(),a,g,l)};return zd(b,c)}function yf(c,a,g){function e(a){return c(h(a))}var h=tc(a),q=tc(1/a);e.invert=function(a){return q(c.invert(a))};e.domain=function(a){if(!arguments.length)return g;c.domain((g=a.map(Number)).map(h));return e};e.ticks=function(c){return x.range.apply(x,db(g,c))};e.tickFormat=function(c,a){return yd(g,c,a)};
e.nice=function(c){return e.domain(rc(g,uf(db(g,c)[2])))};e.exponent=function(l){if(!arguments.length)return a;h=tc(a=l);q=tc(1/a);c.domain(g.map(h));return e};e.copy=function(){return yf(c.copy(),a,g)};return zd(e,c)}function tc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function zf(c,a){function e(e){return q[((h.get(e)||("range"===a.t?h.set(e,c.push(e)):NaN))-1)%q.length]}function l(a,e){return x.range(c.length).map(function(c){return a+e*c})}var h,q,b;e.domain=function(g){if(!arguments.length)return c;
c=[];h=new z;for(var l=-1,q=g.length,b;++l<q;)h.has(b=g[l])||h.set(b,c.push(b));return e[a.t].apply(e,a.a)};e.range=function(c){if(!arguments.length)return q;q=c;b=0;a={t:"range",a:arguments};return e};e.rangePoints=function(g,h){2>arguments.length&&(h=0);var u=g[0],n=g[1],f=(n-u)/(Math.max(1,c.length-1)+h);q=l(2>c.length?(u+n)/2:u+f*h/2,f);b=0;a={t:"rangePoints",a:arguments};return e};e.rangeBands=function(g,h,n){2>arguments.length&&(h=0);3>arguments.length&&(n=h);var u=g[1]<g[0],f=g[u-0],F=(g[1-
u]-f)/(c.length-h+2*n);q=l(f+F*n,F);u&&q.reverse();b=F*(1-h);a={t:"rangeBands",a:arguments};return e};e.rangeRoundBands=function(g,h,n){2>arguments.length&&(h=0);3>arguments.length&&(n=h);var u=g[1]<g[0],f=g[u-0],F=g[1-u],k=Math.floor((F-f)/(c.length-h+2*n));q=l(f+Math.round((F-f-(c.length-h)*k)/2),k);u&&q.reverse();b=Math.round(k*(1-h));a={t:"rangeRoundBands",a:arguments};return e};e.rangeBand=function(){return b};e.rangeExtent=function(){return Cb(a.a[0])};e.copy=function(){return zf(c,a)};return e.domain(c)}
function Af(c,a){function e(){var e=0,g=a.length;for(h=[];++e<g;)h[e-1]=x.quantile(c,e/g);return l}function l(c){if(!isNaN(c=+c))return a[x.bisect(h,c)]}var h;l.domain=function(a){if(!arguments.length)return c;c=a.filter(m).sort(K);return e()};l.range=function(c){if(!arguments.length)return a;a=c;return e()};l.quantiles=function(){return h};l.invertExtent=function(e){e=a.indexOf(e);return 0>e?[NaN,NaN]:[0<e?h[e-1]:c[0],e<h.length?h[e]:c[c.length-1]]};l.copy=function(){return Af(c,a)};return e()}function Bf(c,
a,g){function e(a){return g[Math.max(0,Math.min(n,Math.floor(b*(a-c))))]}function h(){b=g.length/(a-c);n=g.length-1;return e}var b,n;e.domain=function(e){if(!arguments.length)return[c,a];c=+e[0];a=+e[e.length-1];return h()};e.range=function(c){if(!arguments.length)return g;g=c;return h()};e.invertExtent=function(a){a=g.indexOf(a);a=0>a?NaN:a/b+c;return[a,a+1/b]};e.copy=function(){return Bf(c,a,g)};return h()}function Cf(c,a){function e(e){if(e<=e)return a[x.bisect(c,e)]}e.domain=function(a){if(!arguments.length)return c;
c=a;return e};e.range=function(c){if(!arguments.length)return a;a=c;return e};e.invertExtent=function(e){e=a.indexOf(e);return[c[e-1],c[e]]};e.copy=function(){return Cf(c,a)};return e}function Df(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(e){if(!arguments.length)return c;c=e.map(a);return a};a.ticks=function(a){return x.range.apply(x,db(c,a))};a.tickFormat=function(a,e){return yd(c,a,e)};a.copy=function(){return Df(c)};return a}function Ih(c){return c.innerRadius}function Jh(c){return c.outerRadius}
function Ef(c){return c.startAngle}function Ff(c){return c.endAngle}function Gf(c){function a(a){function e(){q.push("M",b(c(n),u))}for(var q=[],n=[],f=-1,F=a.length,k,U=ra(g),p=ra(l);++f<F;)h.call(this,k=a[f],f)?n.push([+U.call(this,k,f),+p.call(this,k,f)]):n.length&&(e(),n=[]);n.length&&e();return q.length?q.join(""):null}var g=xb,l=Jb,h=wb,b=Ha,n=b.key,u=.7;a.x=function(c){if(!arguments.length)return g;g=c;return a};a.y=function(c){if(!arguments.length)return l;l=c;return a};a.defined=function(c){if(!arguments.length)return h;
h=c;return a};a.interpolate=function(c){if(!arguments.length)return n;n="function"===typeof c?b=c:(b=Ad.get(c)||Ha).key;return a};a.tension=function(c){if(!arguments.length)return u;u=c;return a};return a}function Ha(c){return c.join("L")}function Bd(c){for(var a=0,g=c.length,l=c[0],h=[l[0],",",l[1]];++a<g;)h.push("V",(l=c[a])[1],"H",l[0]);return h.join("")}function Cd(c){for(var a=0,g=c.length,l=c[0],h=[l[0],",",l[1]];++a<g;)h.push("H",(l=c[a])[0],"V",l[1]);return h.join("")}function uc(c,a){if(1>
a.length||c.length!=a.length&&c.length!=a.length+2)return Ha(c);var e=c.length!=a.length,l="",h=c[0],b=c[1],n=a[0],u=n,f=1;e&&(l+="Q"+(b[0]-2*n[0]/3)+","+(b[1]-2*n[1]/3)+","+b[0]+","+b[1],h=c[1],f=2);if(1<a.length)for(u=a[1],b=c[f],f++,l+="C"+(h[0]+n[0])+","+(h[1]+n[1])+","+(b[0]-u[0])+","+(b[1]-u[1])+","+b[0]+","+b[1],h=2;h<a.length;h++,f++)b=c[f],u=a[h],l+="S"+(b[0]-u[0])+","+(b[1]-u[1])+","+b[0]+","+b[1];e&&(e=c[f],l+="Q"+(b[0]+2*u[0]/3)+","+(b[1]+2*u[1]/3)+","+e[0]+","+e[1]);return l}function Dd(c,
a){for(var e=[],l=(1-a)/2,h,b=c[0],n=c[1],u=1,f=c.length;++u<f;)h=b,b=n,n=c[u],e.push([l*(n[0]-h[0]),l*(n[1]-h[1])]);return e}function Hf(c){if(3>c.length)return Ha(c);var a=1,g=c.length,l=c[0],h=l[0],b=l[1],n=[h,h,h,(l=c[1])[0]],u=[b,b,b,l[1]],h=[h,",",b,"L",Ia(eb,n),",",Ia(eb,u)];for(c.push(c[g-1]);++a<=g;)l=c[a],n.shift(),n.push(l[0]),u.shift(),u.push(l[1]),Ed(h,n,u);c.pop();h.push("L",l);return h.join("")}function Ia(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Ed(c,a,g){c.push("C",
Ia(If,a),",",Ia(If,g),",",Ia(Jf,a),",",Ia(Jf,g),",",Ia(eb,a),",",Ia(eb,g))}function Fd(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Kf(c){for(var a,g=-1,l=c.length,h,b;++g<l;)a=c[g],h=a[0],b=a[1]+ob,a[0]=h*Math.cos(b),a[1]=h*Math.sin(b);return c}function Lf(c){function a(a){function e(){q.push("M",u(c(F),w),p,k(c(f.reverse()),w),"Z")}for(var q=[],f=[],F=[],U=-1,X=a.length,C,m=ra(g),r=ra(h),y=g===l?function(){return B}:ra(l),t=h===b?function(){return A}:ra(b),B,A;++U<X;)n.call(this,C=a[U],U)?(f.push([B=
+m.call(this,C,U),A=+r.call(this,C,U)]),F.push([+y.call(this,C,U),+t.call(this,C,U)])):f.length&&(e(),f=[],F=[]);f.length&&e();return q.length?q.join(""):null}var g=xb,l=xb,h=0,b=Jb,n=wb,u=Ha,f=u.key,k=u,p="L",w=.7;a.x=function(c){if(!arguments.length)return l;g=l=c;return a};a.x0=function(c){if(!arguments.length)return g;g=c;return a};a.x1=function(c){if(!arguments.length)return l;l=c;return a};a.y=function(c){if(!arguments.length)return b;h=b=c;return a};a.y0=function(c){if(!arguments.length)return h;
h=c;return a};a.y1=function(c){if(!arguments.length)return b;b=c;return a};a.defined=function(c){if(!arguments.length)return n;n=c;return a};a.interpolate=function(c){if(!arguments.length)return f;f="function"===typeof c?u=c:(u=Ad.get(c)||Ha).key;k=u.reverse||u;p=u.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return w;w=c;return a};return a}function Kh(c){return c.radius}function Mf(c){return[c.x,c.y]}function Lh(c){return function(){var a=c.apply(this,arguments),g=a[0],a=a[1]+
ob;return[g*Math.cos(a),g*Math.sin(a)]}}function Mh(){return 64}function Nh(){return"circle"}function Nf(c){c=Math.sqrt(c/ja);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Rb(c,a){Tb(c,xa);c.id=a;return c}function Gd(c,a,g,l){var e=c.id;return Z(c,"function"===typeof g?function(c,h,b){c.__transition__[e].tween.set(a,l(g.call(c,c.__data__,h,b)))}:(g=l(g),function(c){c.__transition__[e].tween.set(a,g)}))}function Oh(c){null==c&&(c="");return function(){this.textContent=
c}}function vc(c,a,g,l){var e=c.__transition__||(c.__transition__={active:0,count:0}),b=e[g];if(!b){var n=l.time,b=e[g]={tween:new z,time:n,ease:l.ease,delay:l.delay,duration:l.duration};++e.count;x.timer(function(l){function h(l){if(e.active>g)return u();e.active=g;b.event&&b.event.start.call(c,f,a);b.tween.forEach(function(e,g){(g=g.call(c,f,a))&&C.push(g)});x.timer(function(){w.c=q(l||1)?wb:q;return 1},0,n)}function q(l){if(e.active!==g)return u();l/=p;for(var h=k(l),q=C.length;0<q;)C[--q].call(c,
h);if(1<=l)return b.event&&b.event.end.call(c,f,a),u()}function u(){--e.count?delete e[g]:delete c.__transition__;return 1}var f=c.__data__,k=b.ease,U=b.delay,p=b.duration,w=Ta,C=[];w.t=U+n;if(U<=l)return h(l-U);w.c=h},0,n)}}function Of(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Pf(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Hd(c){return c.toISOString()}function Id(c,a,g){function e(a){return c(a)}function b(c,e){var g=(c[1]-c[0])/
e,l=x.bisect(wc,g);return l==wc.length?[a.year,db(c.map(function(c){return c/31536E6}),e)[2]]:l?a[g/wc[l-1]<wc[l]/g?l-1:l]:[Ph,db(c,e)[2]]}e.invert=function(a){return pb(c.invert(a))};e.domain=function(a){if(!arguments.length)return c.domain().map(pb);c.domain(a);return e};e.nice=function(c,a){function g(e){return!isNaN(e)&&!c.range(e,pb(+e+1),a).length}var l=e.domain(),h=Cb(l);if(h=null==c?b(h,10):"number"===typeof c&&b(h,c))c=h[0],a=h[1];return e.domain(rc(l,1<a?{floor:function(a){for(;g(a=c.floor(a));)a=
pb(a-1);return a},ceil:function(a){for(;g(a=c.ceil(a));)a=pb(+a+1);return a}}:c))};e.ticks=function(c,a){var g=Cb(e.domain()),l=null==c?b(g,10):"number"===typeof c?b(g,c):!c.range&&[{range:c},a];l&&(c=l[0],a=l[1]);return c.range(g[0],pb(+g[1]+1),1>a?1:a)};e.tickFormat=function(){return g};e.copy=function(){return Id(c.copy(),a,g)};return zd(e,c)}function pb(c){return new Date(c)}function Qh(c){return JSON.parse(c.responseText)}function Rh(c){var a=Oa.createRange();a.selectNode(Oa.body);return a.createContextualFragment(c.responseText)}
var x={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Qf=[].slice,Ya=function(c){return Qf.call(c)},Oa=document,Sa=Oa.documentElement,Ba=window;try{Ya(Sa.childNodes)[0].nodeType}catch(c){Ya=function(c){for(var a=c.length,e=Array(a);a--;)e[a]=c[a];return e}}try{Oa.createElement("div").style.setProperty("opacity",0,"")}catch(c){var xc=Ba.Element.prototype,Sh=xc.setAttribute,Th=xc.setAttributeNS,Rf=Ba.CSSStyleDeclaration.prototype,Uh=Rf.setProperty;xc.setAttribute=function(c,a){Sh.call(this,
c,a+"")};xc.setAttributeNS=function(c,a,l){Th.call(this,c,a,l+"")};Rf.setProperty=function(c,a,l){Uh.call(this,c,a+"",l)}}x.ascending=K;x.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};x.min=function(c,a){var e=-1,l=c.length,b,q;if(1===arguments.length){for(;++e<l&&!(null!=(b=c[e])&&b<=b);)b=void 0;for(;++e<l;)null!=(q=c[e])&&b>q&&(b=q)}else{for(;++e<l&&!(null!=(b=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=(q=a.call(c,c[e],e))&&b>q&&(b=q)}return b};x.max=function(c,a){var e=-1,
l=c.length,b,q;if(1===arguments.length){for(;++e<l&&!(null!=(b=c[e])&&b<=b);)b=void 0;for(;++e<l;)null!=(q=c[e])&&q>b&&(b=q)}else{for(;++e<l&&!(null!=(b=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=(q=a.call(c,c[e],e))&&q>b&&(b=q)}return b};x.extent=function(c,a){var e=-1,l=c.length,b,q,n;if(1===arguments.length){for(;++e<l&&!(null!=(b=n=c[e])&&b<=b);)b=n=void 0;for(;++e<l;)null!=(q=c[e])&&(b>q&&(b=q),n<q&&(n=q))}else{for(;++e<l&&!(null!=(b=n=a.call(c,c[e],e))&&b<=b);)b=void 0;for(;++e<l;)null!=
(q=a.call(c,c[e],e))&&(b>q&&(b=q),n<q&&(n=q))}return[b,n]};x.sum=function(c,a){var e=0,l=c.length,b,q=-1;if(1===arguments.length)for(;++q<l;)isNaN(b=+c[q])||(e+=b);else for(;++q<l;)isNaN(b=+a.call(c,c[q],q))||(e+=b);return e};x.mean=function(c,a){var e=0,l=c.length,b,q=-1,n=l;if(1===arguments.length)for(;++q<l;)m(b=c[q])?e+=b:--n;else for(;++q<l;)m(b=a.call(c,c[q],q))?e+=b:--n;return n?e/n:void 0};x.quantile=function(c,a){var e=(c.length-1)*a+1,l=Math.floor(e),b=+c[l-1];return(e-=l)?b+e*(c[l]-b):
b};x.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(m);return c.length?x.quantile(c.sort(K),.5):void 0};var Sf=a(K);x.bisectLeft=Sf.left;x.bisect=x.bisectRight=Sf.right;x.bisector=function(c){return a(1===c.length?function(a,g){return K(c(a),g)}:c)};x.shuffle=function(c){for(var a=c.length,g,b;a;)b=Math.random()*a--|0,g=c[a],c[a]=c[b],c[b]=g;return c};x.permute=function(c,a){for(var e=a.length,b=Array(e);e--;)b[e]=c[a[e]];return b};x.pairs=function(c){for(var a=0,g=c.length-1,b=
c[0],h=Array(0>g?0:g);a<g;)h[a]=[b,b=c[++a]];return h};x.zip=function(){if(!(h=arguments.length))return[];for(var c=-1,a=x.min(arguments,b),g=Array(a);++c<a;)for(var l=-1,h,q=g[c]=Array(h);++l<h;)q[l]=arguments[l][c];return g};x.transpose=function(c){return x.zip.apply(x,c)};x.keys=function(c){var a=[],g;for(g in c)a.push(g);return a};x.values=function(c){var a=[],g;for(g in c)a.push(c[g]);return a};x.entries=function(c){var a=[],g;for(g in c)a.push({key:g,value:c[g]});return a};x.merge=function(c){var a=
c.length,g;g=-1;for(var b=0,h,q;++g<a;)b+=c[g].length;for(h=Array(b);0<=--a;)for(q=c[a],g=q.length;0<=--g;)h[--b]=q[g];return h};var ka=Math.abs;x.range=function(c,a,g){3>arguments.length&&(g=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/g)throw Error("infinite range");var e=[],b;b=ka(g);for(var q=1;b*q%1;)q*=10;b=q;var q=-1,n;c*=b;a*=b;g*=b;if(0>g)for(;(n=c+g*++q)>a;)e.push(n/b);else for(;(n=c+g*++q)<a;)e.push(n/b);return e};x.map=function(c){var a=new z;if(c instanceof z)c.forEach(function(c,
e){a.set(c,e)});else for(var g in c)a.set(g,c[g]);return a};p(z,{has:r,get:function(c){return this[fb+c]},set:function(c,a){return this[fb+c]=a},remove:function(c){c=fb+c;return c in this&&delete this[c]},keys:k,values:function(){var c=[];this.forEach(function(a,g){c.push(g)});return c},entries:function(){var c=[];this.forEach(function(a,g){c.push({key:a,value:g})});return c},size:f,empty:v,forEach:function(c){for(var a in this)a.charCodeAt(0)===Sb&&c.call(this,a.substring(1),this[a])}});var fb="\x00",
Sb=fb.charCodeAt(0);x.nest=function(){function c(a,e,l){if(l>=b.length)return n?n.call(g,e):q?e.sort(q):e;for(var h=-1,u=e.length,f=b[l++],k,F,p=new z,U;++h<u;)(U=p.get(k=f(F=e[h])))?U.push(F):p.set(k,[F]);a?(F=a(),e=function(e,g){F.set(e,c(a,g,l))}):(F={},e=function(e,g){F[e]=c(a,g,l)});p.forEach(e);return F}function a(c,e){if(e>=b.length)return c;var g=[],l=h[e++];c.forEach(function(c,b){g.push({key:c,values:a(b,e)})});return l?g.sort(function(c,a){return l(c.key,a.key)}):g}var g={},b=[],h=[],q,
n;g.map=function(a,e){return c(e,a,0)};g.entries=function(e){return a(c(x.map,e,0),0)};g.key=function(c){b.push(c);return g};g.sortKeys=function(c){h[b.length-1]=c;return g};g.sortValues=function(c){q=c;return g};g.rollup=function(c){n=c;return g};return g};x.set=function(c){var a=new t;if(c)for(var g=0,b=c.length;g<b;++g)a.add(c[g]);return a};p(t,{has:r,add:function(c){this[fb+c]=!0;return c},remove:function(c){c=fb+c;return c in this&&delete this[c]},values:k,size:f,empty:v,forEach:function(c){for(var a in this)a.charCodeAt(0)===
Sb&&c.call(this,a.substring(1))}});x.behavior={};x.rebind=function(c,a){for(var e=1,b=arguments.length,h;++e<b;)c[h=arguments[e]]=J(c,a,a[h]);return c};var Sd="webkit ms moz Moz o O".split(" ");x.dispatch=function(){for(var c=new G,a=-1,g=arguments.length;++a<g;)c[arguments[a]]=E(c);return c};G.prototype.on=function(c,a){var e=c.indexOf("."),b="";0<=e&&(b=c.substring(e+1),c=c.substring(0,e));if(c)return 2>arguments.length?this[c].on(b):this[c].on(b,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(b,
null);return this}};x.event=null;x.requote=function(c){return c.replace(Vh,"\\$&")};var Vh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Tb={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var e in a)c[e]=a[e]},Mc=function(c,a){return a.querySelector(c)},Nc=function(c,a){return a.querySelectorAll(c)},Wh=Sa.matches||Sa[H(Sa,"matchesSelector")],Td=function(c,a){return Wh.call(c,a)};"function"===typeof Sizzle&&(Mc=function(c,a){return Sizzle(c,a)[0]||null},Nc=Sizzle,Td=Sizzle.matchesSelector);x.selection=
function(){return Tf};var na=x.selection.prototype=[];na.select=function(c){var a=[],g,b,h,q;c=Q(c);for(var n=-1,u=this.length;++n<u;){a.push(g=[]);g.parentNode=(h=this[n]).parentNode;for(var f=-1,k=h.length;++f<k;)(q=h[f])?(g.push(b=c.call(q,q.__data__,f,n)),b&&"__data__"in q&&(b.__data__=q.__data__)):g.push(null)}return O(a)};na.selectAll=function(c){var a=[],g,b;c=I(c);for(var h=-1,q=this.length;++h<q;)for(var n=this[h],u=-1,f=n.length;++u<f;)if(b=n[u])a.push(g=Ya(c.call(b,b.__data__,u,h))),g.parentNode=
b;return O(a)};var Jd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};x.ns={prefix:Jd,qualify:function(c){var a=c.indexOf(":"),g=c;0<=a&&(g=c.substring(0,a),c=c.substring(a+1));return Jd.hasOwnProperty(g)?{space:Jd[g],local:c}:c}};na.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node();c=x.ns.qualify(c);return c.local?e.getAttributeNS(c.space,
c.local):e.getAttribute(c)}for(a in c)this.each(T(a,c[a]));return this}return this.each(T(c,a))};na.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node(),b=(c=(c+"").trim().split(/^|\s+/)).length,h=-1;if(a=e.classList)for(;++h<b;){if(!a.contains(c[h]))return!1}else for(a=e.getAttribute("class");++h<b;)if(!S(c[h]).test(a))return!1;return!0}for(a in c)this.each(R(a,c[a]));return this}return this.each(R(c,a))};na.style=function(c,a,g){var e=arguments.length;if(3>e){if("string"!==
typeof c){2>e&&(a="");for(g in c)this.each(A(g,c[g],a));return this}if(2>e)return Ba.getComputedStyle(this.node(),null).getPropertyValue(c);g=""}return this.each(A(c,a,g))};na.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(N(a,c[a]));return this}return this.each(N(c,a))};na.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=
""}:function(){this.textContent=c}):this.node().textContent};na.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};na.append=function(c){c=w(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};na.insert=function(c,a){c=w(c);a=Q(a);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),a.apply(this,arguments)||null)})};na.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};na.data=function(c,a){function e(c,e){var g,b=c.length,l=e.length,h=Math.min(b,l),q=Array(l),n=Array(l),F=Array(b),p,U;if(a){var h=new z,w=new z,C=[],X;for(g=-1;++g<b;)X=a.call(p=c[g],p.__data__,g),h.has(X)?F[g]=p:h.set(X,p),C.push(X);for(g=-1;++g<l;)X=a.call(e,U=e[g],g),(p=h.get(X))?(q[g]=p,p.__data__=U):w.has(X)||(n[g]={__data__:U}),w.set(X,U),h.remove(X);
for(g=-1;++g<b;)h.has(C[g])&&(F[g]=c[g])}else{for(g=-1;++g<h;)p=c[g],U=e[g],p?(p.__data__=U,q[g]=p):n[g]={__data__:U};for(;g<l;++g)n[g]={__data__:e[g]};for(;g<b;++g)F[g]=c[g]}n.update=q;n.parentNode=q.parentNode=F.parentNode=c.parentNode;u.push(n);f.push(q);k.push(F)}var b=-1,h=this.length,q,n;if(!arguments.length){for(c=Array(h=(q=this[0]).length);++b<h;)if(n=q[b])c[b]=n.__data__;return c}var u=M([]),f=O([]),k=O([]);if("function"===typeof c)for(;++b<h;)e(q=this[b],c.call(q,q.parentNode.__data__,
b));else for(;++b<h;)e(q=this[b],c);f.enter=function(){return u};f.exit=function(){return k};return f};na.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};na.filter=function(c){var a=[],g,b,h;"function"!==typeof c&&(c=V(c));for(var q=0,n=this.length;q<n;q++){a.push(g=[]);g.parentNode=(b=this[q]).parentNode;for(var u=0,f=b.length;u<f;u++)(h=b[u])&&c.call(h,h.__data__,u,q)&&g.push(h)}return O(a)};na.order=function(){for(var c=-1,a=this.length;++c<a;)for(var g=
this[c],b=g.length-1,h=g[b],q;0<=--b;)if(q=g[b])h&&h!==q.nextSibling&&h.parentNode.insertBefore(q,h),h=q;return this};na.sort=function(c){c=W.apply(this,arguments);for(var a=-1,g=this.length;++a<g;)this[a].sort(c);return this.order()};na.each=function(c){return Z(this,function(a,g,b){c.call(a,a.__data__,g,b)})};na.call=function(c){var a=Ya(arguments);c.apply(a[0]=this,a);return this};na.empty=function(){return!this.node()};na.node=function(){for(var c=0,a=this.length;c<a;c++)for(var g=this[c],b=0,
h=g.length;b<h;b++){var q=g[b];if(q)return q}return null};na.size=function(){var c=0;this.each(function(){++c});return c};var Ra=[];x.selection.enter=M;x.selection.enter.prototype=Ra;Ra.append=na.append;Ra.empty=na.empty;Ra.node=na.node;Ra.call=na.call;Ra.size=na.size;Ra.select=function(c){for(var a=[],g,b,h,q,n,u=-1,f=this.length;++u<f;){h=(q=this[u]).update;a.push(g=[]);g.parentNode=q.parentNode;for(var k=-1,p=q.length;++k<p;)(n=q[k])?(g.push(h[k]=b=c.call(q.parentNode,n.__data__,k,u)),b.__data__=
n.__data__):g.push(null)}return O(a)};Ra.insert=function(c,a){2>arguments.length&&(a=da(this));return na.insert.call(this,c,a)};na.transition=function(){for(var c=qb||++Uf,a=[],g,b,h=yc||{time:Date.now(),ease:$g,delay:0,duration:250},q=-1,n=this.length;++q<n;){a.push(g=[]);for(var u=this[q],f=-1,k=u.length;++f<k;)(b=u[f])&&vc(b,f,c,h),g.push(b)}return Rb(a,c)};na.interrupt=function(){return this.each(Y)};x.select=function(c){c=["string"===typeof c?Mc(c,Oa):c];c.parentNode=Sa;return O([c])};x.selectAll=
function(c){c=Ya("string"===typeof c?Nc(c,Oa):c);c.parentNode=Sa;return O([c])};var Tf=x.select(Sa);na.on=function(c,a,g){var e=arguments.length;if(3>e){if("string"!==typeof c){2>e&&(a=!1);for(g in c)this.each(n(g,c[g],a));return this}if(2>e)return(e=this.node()["__on"+c])&&e._;g=!1}return this.each(n(c,a,g))};var Oc=x.map({mouseenter:"mouseover",mouseleave:"mouseout"});Oc.forEach(function(c){"on"+c in Oa&&Oc.remove(c)});var Eb="onselectstart"in Oa?null:H(Sa.style,"userSelect"),kg=0;x.mouse=function(c){return la(c,
P())};var Pc=/WebKit/.test(Ba.navigator.userAgent)?-1:0;x.touches=function(c,a){2>arguments.length&&(a=P().touches);return a?Ya(a).map(function(a){var e=la(c,a);e.identifier=a.identifier;return e}):[]};x.behavior.drag=function(){function c(){this.on("mousedown.drag",h).on("touchstart.drag",q)}function a(c,a,e,l,h){return function(){var q=x.event.target,n=this.parentNode,u=g.of(this,arguments),f=0,k=c(),F=".drag"+(null==k?"":"-"+k),p,U=x.select(e()).on(l+F,function(){var c=a(n,k),e,g;c&&(e=c[0]-C[0],
g=c[1]-C[1],f|=e|g,C=c,u({type:"drag",x:c[0]+p[0],y:c[1]+p[1],dx:e,dy:g}))}).on(h+F,function(){a(n,k)&&(U.on(l+F,null).on(h+F,null),w(f&&x.event.target===q),u({type:"dragend"}))}),w=va(),C=a(n,k);b?(p=b.apply(this,arguments),p=[p.x-C[0],p.y-C[1]]):p=[0,0];u({type:"dragstart"})}}var g=B(c,"drag","dragstart","dragend"),b=null,h=a(D,x.mouse,ha,"mousemove","mouseup"),q=a(aa,x.touch,ea,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return b;b=a;return c};return x.rebind(c,g,"on")};var ja=
Math.PI,Ga=2*ja,za=ja/2,ia=ja/180,ta=180/ja,zc=Math.SQRT2;x.interpolateZoom=function(c,a){function e(c){var a=c*r;if(m){c=fa(C);var e,g=zc*a+C;e=((g=Math.exp(2*g))-1)/(g+1);var l=C,g=((l=Math.exp(l))-1/l)/2;e=q/(2*p)*(c*e-g);return[b+e*u,h+e*f,q*c/fa(zc*a+C)]}return[b+c*u,h+c*f,q*Math.exp(zc*a)]}var b=c[0],h=c[1],q=c[2],n=a[2],u=a[0]-b,f=a[1]-h,k=u*u+f*f,p=Math.sqrt(k),w=(n*n-q*q+4*k)/(4*q*p),k=(n*n-q*q-4*k)/(4*n*p),C=Math.log(Math.sqrt(w*w+1)-w),m=Math.log(Math.sqrt(k*k+1)-k)-C,r=(m||Math.log(n/
q))/zc;e.duration=1E3*r;return e};x.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",f).on(Xh+".zoom",p).on("mousemove.zoom",w).on("dblclick.zoom",C).on("touchstart.zoom",k)}function a(c){return[(c[0]-m.x)/m.k,(c[1]-m.y)/m.k]}function g(c){m.k=Math.max(A[0],Math.min(A[1],c))}function b(c,a){a=[a[0]*m.k+m.x,a[1]*m.k+m.y];m.x+=c[0]-a[0];m.y+=c[1]-a[1]}function h(){V&&V.domain(z.range().map(function(c){return(c-m.x)/m.k}).map(z.invert));E&&E.domain(I.range().map(function(c){return(c-m.y)/
m.k}).map(I.invert))}function q(c){c({type:"zoomstart"})}function n(c){h();c({type:"zoom",scale:m.k,translate:[m.x,m.y]})}function u(c){c({type:"zoomend"})}function f(){var c=this,e=x.event.target,g=v.of(c,arguments),l=0,h=x.select(Ba).on("mousemove.zoom",function(){l=1;b(x.mouse(c),f);n(g)}).on("mouseup.zoom",function(){h.on("mousemove.zoom",Ba===c?w:null).on("mouseup.zoom",null);k(l&&x.event.target===e);u(g)}),f=a(x.mouse(c)),k=va();Y.call(c);q(g)}function k(){function c(){var c=x.touches(F);U=
m.k;c.forEach(function(c){c.identifier in w&&(w[c.identifier]=a(c))});return c}function e(){var a=x.event.target;x.select(a).on(X,l).on(y,h);t.push(a);for(var a=x.event.changedTouches,e=0,q=a.length;e<q;++e)w[a[e].identifier]=null;q=c();e=Date.now();1===q.length?(500>e-N&&(a=q[0],q=w[a.identifier],g(2*m.k),b(a,q),L(),n(p)),N=e):1<q.length&&(a=q[0],q=q[1],e=a[0]-q[0],a=a[1]-q[1],C=e*e+a*a)}function l(){for(var c=x.touches(F),a,e,l,h,q=0,u=c.length;q<u;++q,h=null)if(l=c[q],h=w[l.identifier]){if(e)break;
a=l;e=h}if(h){var f=(f=l[0]-a[0])*f+(f=l[1]-a[1])*f,c=C&&Math.sqrt(f/C);a=[(a[0]+l[0])/2,(a[1]+l[1])/2];e=[(e[0]+h[0])/2,(e[1]+h[1])/2];g(c*U)}N=null;b(a,e);n(p)}function h(){if(x.event.touches.length){for(var a=x.event.changedTouches,e=0,g=a.length;e<g;++e)delete w[a[e].identifier];for(var b in w)return void c()}x.selectAll(t).on(r,null);A.on("mousedown.zoom",f).on("touchstart.zoom",k);B();u(p)}var F=this,p=v.of(F,arguments),w={},C=0,U,r=".zoom-"+x.event.changedTouches[0].identifier,X="touchmove"+
r,y="touchend"+r,t=[],A=x.select(F).on("mousedown.zoom",null).on("touchstart.zoom",e),B=va();Y.call(F);e();q(p)}function p(){var c=v.of(this,arguments);M?clearTimeout(M):(Y.call(this),q(c));M=setTimeout(function(){M=null;u(c)},50);L();var e=y||x.mouse(this);r||(r=a(e));g(Math.pow(2,.002*Ac())*m.k);b(e,r);n(c)}function w(){r=null}function C(){var c=v.of(this,arguments),e=x.mouse(this),l=a(e),h=Math.log(m.k)/Math.LN2;q(c);g(Math.pow(2,x.event.shiftKey?Math.ceil(h)-1:Math.floor(h)+1));b(e,l);n(c);u(c)}
var m={x:0,y:0,k:1},r,y,t=[960,500],A=Vf,M,N,v=B(c,"zoomstart","zoom","zoomend"),z,V,I,E;c.event=function(c){c.each(function(){var c=v.of(this,arguments),a=m;qb?x.select(this).transition().each("start.zoom",function(){m=this.__chart__||{x:0,y:0,k:1};q(c)}).tween("zoom:zoom",function(){var e=t[0],g=e/2,b=t[1]/2,l=x.interpolateZoom([(g-m.x)/m.k,(b-m.y)/m.k,e/m.k],[(g-a.x)/a.k,(b-a.y)/a.k,e/a.k]);return function(a){a=l(a);var h=e/a[2];this.__chart__=m={x:g-a[0]*h,y:b-a[1]*h,k:h};n(c)}}).each("end.zoom",
function(){u(c)}):(this.__chart__=m,q(c),n(c),u(c))})};c.translate=function(a){if(!arguments.length)return[m.x,m.y];m={x:+a[0],y:+a[1],k:m.k};h();return c};c.scale=function(a){if(!arguments.length)return m.k;m={x:m.x,y:m.y,k:+a};h();return c};c.scaleExtent=function(a){if(!arguments.length)return A;A=null==a?Vf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return y;y=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return t;t=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return V;
V=a;z=a.copy();m={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return E;E=a;I=a.copy();m={x:0,y:0,k:1};return c};return x.rebind(c,v,"on")};var Vf=[0,Infinity],Ac,Xh="onwheel"in Oa?(Ac=function(){return-x.event.deltaY*(x.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Oa?(Ac=function(){return x.event.wheelDelta},"mousewheel"):(Ac=function(){return-x.event.detail},"MozMousePixelScroll");x.color=pa;pa.prototype.toString=function(){return this.rgb()+""};x.hsl=Ca;var Kd=Ca.prototype=
new pa;Kd.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ca(this.h,this.s,this.l/a)};Kd.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ca(this.h,this.s,a*this.l)};Kd.rgb=function(){return rb(this.h,this.s,this.l)};x.hcl=Ka;var Ld=Ka.prototype=new pa;Ld.brighter=function(a){return new Ka(this.h,this.c,Math.min(100,this.l+Bc*(arguments.length?a:1)))};Ld.darker=function(a){return new Ka(this.h,this.c,Math.max(0,this.l-Bc*(arguments.length?a:1)))};Ld.rgb=function(){return Qc(this.h,
this.c,this.l).rgb()};x.lab=La;var Bc=18,Zd=.95047,$d=1,ae=1.08883,Md=La.prototype=new pa;Md.brighter=function(a){return new La(Math.min(100,this.l+Bc*(arguments.length?a:1)),this.a,this.b)};Md.darker=function(a){return new La(Math.max(0,this.l-Bc*(arguments.length?a:1)),this.a,this.b)};Md.rgb=function(){return Yd(this.l,this.a,this.b)};x.rgb=Da;var Cc=Da.prototype=new pa;Cc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var c=this.r,g=this.g,b=this.b;if(!c&&!g&&!b)return new Da(30,30,30);
c&&30>c&&(c=30);g&&30>g&&(g=30);b&&30>b&&(b=30);return new Da(Math.min(255,c/a),Math.min(255,g/a),Math.min(255,b/a))};Cc.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Da(a*this.r,a*this.g,a*this.b)};Cc.hsl=function(){return Vd(this.r,this.g,this.b)};Cc.toString=function(){return"#"+sb(this.r)+sb(this.g)+sb(this.b)};var Vb=x.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,
blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vb.forEach(function(a,e){Vb.set(a,
new Da(e>>16,e>>8&255,e&255))});x.functor=ra;x.xhr=Wc(ya);x.dsv=function(a,e){function c(a,c,g){3>arguments.length&&(g=c,c=null);var l=Wb(a,e,null==c?b:h(c),g);l.row=function(a){return arguments.length?l.response(null==(c=a)?b:h(a)):c};return l}function b(a){return c.parse(a.responseText)}function h(a){return function(e){return c.parse(e.responseText,a)}}function q(c){return c.map(n).join(a)}function n(a){return u.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var u=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);
c.parse=function(a,e){var g;return c.parseRows(a,function(a,c){if(g)return g(a,c-1);var b=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");g=e?function(a,c){return e(b(a),c)}:b})};c.parseRows=function(a,c){function e(){if(q>=h)return b;if(k)return k=!1,g;var c=q;if(34===a.charCodeAt(c)){for(var e=c;e++<h;)if(34===a.charCodeAt(e)){if(34!==a.charCodeAt(e+1))break;++e}q=e+2;var l=a.charCodeAt(e+1);13===l?(k=!0,10===a.charCodeAt(e+2)&&++q):10===l&&
(k=!0);return a.substring(c+1,e).replace(/""/g,'"')}for(;q<h;){l=a.charCodeAt(q++);e=1;if(10===l)k=!0;else if(13===l)k=!0,10===a.charCodeAt(q)&&(++q,++e);else if(l!==f)continue;return a.substring(c,q-e)}return a.substring(c)}for(var g={},b={},l=[],h=a.length,q=0,n=0,u,k;(u=e())!==b;){for(var F=[];u!==g&&u!==b;)F.push(u),u=e();c&&!(F=c(F,n++))||l.push(F)}return l};c.format=function(e){if(Array.isArray(e[0]))return c.formatRows(e);var g=new t,b=[];e.forEach(function(a){for(var c in a)g.has(c)||b.push(g.add(c))});
return[b.map(n).join(a)].concat(e.map(function(c){return b.map(function(a){return n(c[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(q).join("\n")};return c};x.csv=x.dsv(",","text/csv");x.tsv=x.dsv("\t","text/tab-separated-values");x.touch=function(a,e,g){3>arguments.length&&(g=e,e=P().changedTouches);if(e)for(var c=0,b=e.length,q;c<b;++c)if((q=e[c]).identifier===g)return la(a,q)};var Zb,$b,Yb,Xb,Ta,de=Ba[H(Ba,"requestAnimationFrame")]||function(a){setTimeout(a,17)};x.timer=function(a,
e,g){var c=arguments.length;2>c&&(e=0);3>c&&(g=Date.now());c={c:a,t:g+e,f:!1,n:null};$b?$b.n=c:Zb=c;$b=c;Yb||(Xb=clearTimeout(Xb),Yb=1,de(Xc))};x.timer.flush=function(){be();ce()};x.round=function(a,e){return e?Math.round(a*(e=Math.pow(10,e)))/e:Math.round(a)};var Yh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,e){var c=Math.pow(10,3*ka(8-e));return{scale:8<e?function(a){return a/c}:function(a){return a*c},symbol:a}});x.formatPrefix=function(a,e){var c=0;a&&(0>a&&(a*=-1),e&&(a=
x.round(a,Yc(a,e))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3))));return Yh[8+c/3]};var ee=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ng=x.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,e){return a.toPrecision(e)},e:function(a,e){return a.toExponential(e)},
f:function(a,e){return a.toFixed(e)},r:function(a,e){return(a=x.round(a,Yc(a,e))).toFixed(Math.max(0,Math.min(20,Yc(a*(1+1E-15),e))))}}),ba=x.time={},Aa=Date;Ua.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xa.setUTCDate.apply(this._,arguments)},setDay:function(){Xa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Xa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xa.setTime.apply(this._,arguments)}};var Xa=Date.prototype;ba.year=gb(function(a){a=ba.day(a);a.setMonth(0,1);return a},function(a,e){a.setFullYear(a.getFullYear()+e)},function(a){return a.getFullYear()});ba.years=ba.year.range;ba.years.utc=ba.year.utc.range;ba.day=gb(function(a){var c=new Aa(2E3,0);c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());
return c},function(a,e){a.setDate(a.getDate()+e)},function(a){return a.getDate()-1});ba.days=ba.day.range;ba.days.utc=ba.day.utc.range;ba.dayOfYear=function(a){var c=ba.year(a);return Math.floor((a-c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,e){e=7-e;var c=ba[a]=gb(function(a){(a=ba.day(a)).setDate(a.getDate()-(a.getDay()+e)%7);return a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var c=
ba.year(a).getDay();return Math.floor((ba.dayOfYear(a)+(c+e)%7)/7)-(c!==e)});ba[a+"s"]=c.range;ba[a+"s"].utc=c.utc.range;ba[a+"OfYear"]=function(a){var c=ba.year(a).getDay();return Math.floor((ba.dayOfYear(a)+(c+e)%7)/7)}});ba.week=ba.sunday;ba.weeks=ba.sunday.range;ba.weeks.utc=ba.sunday.utc.range;ba.weekOfYear=ba.sundayOfYear;var fe={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,ie=/^%/;x.locale=function(a){return{numberFormat:mg(a),timeFormat:pg(a)}};var Wf=x.locale({decimal:".",thousands:",",grouping:[3],
currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});x.format=Wf.numberFormat;x.geo={};Zc.prototype={s:0,t:0,add:function(a){je(a,this.t,Dc);je(Dc.s,this.s,
this);this.s?this.t+=Dc.t:this.s=Dc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Dc=new Zc;x.geo.stream=function(a,e){if(a&&Xf.hasOwnProperty(a.type))Xf[a.type](a,e);else dc(a,e)};var Xf={Feature:function(a,e){dc(a.geometry,e)},FeatureCollection:function(a,e){for(var c=a.features,b=-1,h=c.length;++b<h;)dc(c[b].geometry,e)}},ke={Sphere:function(a,e){e.sphere()},Point:function(a,e){a=a.coordinates;e.point(a[0],a[1],a[2])},MultiPoint:function(a,e){for(var c=a.coordinates,
b=-1,h=c.length;++b<h;)a=c[b],e.point(a[0],a[1],a[2])},LineString:function(a,e){$c(a.coordinates,e,0)},MultiLineString:function(a,e){for(var c=a.coordinates,b=-1,h=c.length;++b<h;)$c(c[b],e,0)},Polygon:function(a,e){le(a.coordinates,e)},MultiPolygon:function(a,e){for(var c=a.coordinates,b=-1,h=c.length;++b<h;)le(c[b],e)},GeometryCollection:function(a,e){for(var c=a.geometries,b=-1,h=c.length;++b<h;)dc(c[b],e)}};x.geo.area=function(a){Ec=0;x.geo.stream(a,Fa);return Ec};var Ec,hb=new Zc,Fa={sphere:function(){Ec+=
4*ja},point:D,lineStart:D,lineEnd:D,polygonStart:function(){hb.reset();Fa.lineStart=Eg},polygonEnd:function(){var a=2*hb;Ec+=0>a?4*ja+a:a;Fa.lineStart=Fa.lineEnd=Fa.point=D}};x.geo.bounds=function(){function a(a,c){M.push(N=[p=a,w=a]);c<m&&(m=c);c>C&&(C=c)}function e(c,e){var b=ib([c*ia,e*ia]);if(A){var g=tb(A,b),g=tb([g[1],-g[0],0],g);gc(g);var g=hc(g),l=c-r,h=0<l?1:-1,q=g[0]*ta*h,l=180<ka(l);l^(h*r<q&&q<h*c)?(g=g[1]*ta,g>C&&(C=g)):(q=(q+360)%360-180,l^(h*r<q&&q<h*c))?(g=-g[1]*ta,g<m&&(m=g)):(e<
m&&(m=e),e>C&&(C=e));l?c<r?u(p,c)>u(p,w)&&(w=c):u(c,w)>u(p,w)&&(p=c):w>=p?(c<p&&(p=c),c>w&&(w=c)):c>r?u(p,c)>u(p,w)&&(w=c):u(c,w)>u(p,w)&&(p=c)}else a(c,e);A=b;r=c}function b(){v.point=e}function l(){N[0]=p;N[1]=w;v.point=a;A=null}function h(a,c){if(A){var g=a-r;B+=180<ka(g)?g+(0<g?360:-360):g}else y=a,t=c;Fa.point(a,c);e(a,c)}function q(){Fa.lineStart()}function n(){h(y,t);Fa.lineEnd();1E-6<ka(B)&&(p=-(w=180));N[0]=p;N[1]=w;A=null}function u(a,c){return 0>(c-=a)?c+360:c}function f(a,c){return a[0]-
c[0]}function k(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var p,m,w,C,r,y,t,A,B,M,N,v={point:a,lineStart:b,lineEnd:l,polygonStart:function(){v.point=h;v.lineStart=q;v.lineEnd=n;B=0;Fa.polygonStart()},polygonEnd:function(){Fa.polygonEnd();v.point=a;v.lineStart=b;v.lineEnd=l;0>hb?(p=-(w=180),m=-(C=90)):1E-6<B?C=90:-1E-6>B&&(m=-90);N[0]=p;N[1]=w}};return function(a){C=w=-(p=m=Infinity);M=[];x.geo.stream(a,v);if(a=M.length){M.sort(f);for(var c=1,e=M[0],g,b=[e];c<a;++c)g=M[c],k(g[0],e)||k(g[1],
e)?(u(e[0],g[1])>u(e[0],e[1])&&(e[1]=g[1]),u(g[0],e[1])>u(e[0],e[1])&&(e[0]=g[0])):b.push(e=g);var l=-Infinity,h;a=b.length-1;c=0;for(e=b[a];c<=a;e=g,++c)g=b[c],(h=u(e[1],g[0]))>l&&(l=h,p=g[0],w=e[1])}M=N=null;return Infinity===p||Infinity===m?[[NaN,NaN],[NaN,NaN]]:[[p,m],[w,C]]}}();x.geo.centroid=function(a){Gb=jc=jb=kb=Va=Za=$a=Pa=ub=vb=ab=0;x.geo.stream(a,Ma);a=ub;var c=vb,g=ab,b=a*a+c*c+g*g;return 1E-12>b&&(a=Za,c=$a,g=Pa,1E-6>jc&&(a=jb,c=kb,g=Va),b=a*a+c*c+g*g,1E-12>b)?[NaN,NaN]:[Math.atan2(c,
a)*ta,ma(g/Math.sqrt(b))*ta]};var Gb,jc,jb,kb,Va,Za,$a,Pa,ub,vb,ab,Ma={sphere:D,point:bd,lineStart:me,lineEnd:ne,polygonStart:function(){Ma.lineStart=Fg},polygonEnd:function(){Ma.lineStart=me}},De=qe(wb,function(a){var c=NaN,g=NaN,b=NaN,h;return{lineStart:function(){a.lineStart();h=1},point:function(e,l){var q=0<e?ja:-ja,n=ka(e-c);if(1E-6>ka(n-ja))a.point(c,g=0<(g+l)/2?za:-za),a.point(b,g),a.lineEnd(),a.lineStart(),a.point(q,g),a.point(e,g),h=0;else if(b!==q&&n>=ja){1E-6>ka(c-b)&&(c-=1E-6*b);1E-6>
ka(e-q)&&(e-=1E-6*q);var n=c,f=g,k=e,p,w,m=Math.sin(n-k);g=1E-6<ka(m)?Math.atan((Math.sin(f)*(w=Math.cos(l))*Math.sin(k)-Math.sin(l)*(p=Math.cos(f))*Math.sin(n))/(p*w*m)):(f+l)/2;a.point(b,g);a.lineEnd();a.lineStart();a.point(q,g);h=0}a.point(c=e,g=l);b=q},lineEnd:function(){a.lineEnd();c=g=NaN},clean:function(){return 2-h}}},function(a,e,g,b){null==a?(g*=za,b.point(-ja,g),b.point(0,g),b.point(ja,g),b.point(ja,0),b.point(ja,-g),b.point(0,-g),b.point(-ja,-g),b.point(-ja,0),b.point(-ja,g)):1E-6<ka(a[0]-
e[0])?(a=a[0]<e[0]?ja:-ja,g=g*a/2,b.point(-a,g),b.point(0,g),b.point(a,g)):b.point(e[0],e[1])},[-ja,-ja/2]);x.geo.clipExtent=function(){var a,e,b,l,h,q,n={stream:function(a){h&&(h.valid=!1);h=q(a);h.valid=!0;return h},extent:function(c){if(!arguments.length)return[[a,e],[b,l]];q=te(a=+c[0][0],e=+c[0][1],b=+c[1][0],l=+c[1][1]);h&&(h.valid=!1,h=null);return n}};return n.extent([[0,0],[960,500]])};(x.geo.conicEqualArea=function(){return dd(ve)}).raw=ve;x.geo.albers=function(){return x.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};x.geo.albersUsa=function(){function a(a){var c=a[0];a=a[1];h=null;(n(c,a),h)||(u(c,a),h)||f(c,a);return h}var e=x.geo.albers(),b=x.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=x.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h,q={point:function(a,c){h=[a,c]}},n,u,f;a.invert=function(a){var c=e.scale(),g=e.translate(),h=(a[0]-g[0])/c,c=(a[1]-g[1])/c;return(.12<=c&&.234>c&&-.425<=h&&-.214>
h?b:.166<=c&&.234>c&&-.214<=h&&-.115>h?l:e).invert(a)};a.stream=function(a){var c=e.stream(a),g=b.stream(a),h=l.stream(a);return{point:function(a,e){c.point(a,e);g.point(a,e);h.point(a,e)},sphere:function(){c.sphere();g.sphere();h.sphere()},lineStart:function(){c.lineStart();g.lineStart();h.lineStart()},lineEnd:function(){c.lineEnd();g.lineEnd();h.lineEnd()},polygonStart:function(){c.polygonStart();g.polygonStart();h.polygonStart()},polygonEnd:function(){c.polygonEnd();g.polygonEnd();h.polygonEnd()}}};
a.precision=function(c){if(!arguments.length)return e.precision();e.precision(c);b.precision(c);l.precision(c);return a};a.scale=function(c){if(!arguments.length)return e.scale();e.scale(c);b.scale(.35*c);l.scale(c);return a.translate(e.translate())};a.translate=function(c){if(!arguments.length)return e.translate();var g=e.scale(),h=+c[0],k=+c[1];n=e.translate(c).clipExtent([[h-.455*g,k-.238*g],[h+.455*g,k+.238*g]]).stream(q).point;u=b.translate([h-.307*g,k+.201*g]).clipExtent([[h-.425*g+1E-6,k+.12*
g+1E-6],[h-.214*g-1E-6,k+.234*g-1E-6]]).stream(q).point;f=l.translate([h-.205*g,k+.212*g]).clipExtent([[h-.214*g+1E-6,k+.166*g+1E-6],[h-.115*g-1E-6,k+.234*g-1E-6]]).stream(q).point;return a};return a.scale(1070)};var Nd,fd,bb={point:D,lineStart:D,lineEnd:D,polygonStart:function(){fd=0;bb.lineStart=Jg},polygonEnd:function(){bb.lineStart=bb.lineEnd=bb.point=D;Nd+=ka(fd/2)}},Fc,Gc,Hc,Ic,Zh={point:function(a,e){a<Fc&&(Fc=a);a>Hc&&(Hc=a);e<Gc&&(Gc=e);e>Ic&&(Ic=e)},lineStart:D,lineEnd:D,polygonStart:D,
polygonEnd:D},Na={point:lb,lineStart:xe,lineEnd:ye,polygonStart:function(){Na.lineStart=Lg},polygonEnd:function(){Na.point=lb;Na.lineStart=xe;Na.lineEnd=ye}};x.geo.path=function(){function a(a){a&&("function"===typeof g&&n.pointRadius(+g.apply(this,arguments)),u&&u.valid||(u=q(n)),x.geo.stream(a,u));return n.result()}function e(){u=null;return a}var g=4.5,b,h,q,n,u;a.area=function(a){Nd=0;x.geo.stream(a,q(bb));return Nd};a.centroid=function(a){jb=kb=Va=Za=$a=Pa=ub=vb=ab=0;x.geo.stream(a,q(Na));return ab?
[ub/ab,vb/ab]:Pa?[Za/Pa,$a/Pa]:Va?[jb/Va,kb/Va]:[NaN,NaN]};a.bounds=function(a){Hc=Ic=-(Fc=Gc=Infinity);x.geo.stream(a,q(Zh));return[[Fc,Gc],[Hc,Ic]]};a.projection=function(a){if(!arguments.length)return b;q=(b=a)?a.stream||Ng(a):ya;return e()};a.context=function(a){if(!arguments.length)return h;n=null==(h=a)?new Kg:new Mg(a);"function"!==typeof g&&n.pointRadius(g);return e()};a.pointRadius=function(c){if(!arguments.length)return g;g="function"===typeof c?c:(n.pointRadius(+c),+c);return a};return a.projection(x.geo.albersUsa()).context(null)};
x.geo.transform=function(a){return{stream:function(c){c=new Ce(c);for(var e in a)c[e]=a[e];return c}}};Ce.prototype={point:function(a,e){this.stream.point(a,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};x.geo.projection=cb;x.geo.projectionMutator=ed;(x.geo.equirectangular=function(){return cb(Hb)}).raw=Hb.invert=
Hb;x.geo.rotation=function(a){function c(c){c=a(c[0]*ia,c[1]*ia);return c[0]*=ta,c[1]*=ta,c}a=gd(a[0]%360*ia,a[1]*ia,2<a.length?a[2]*ia:0);c.invert=function(c){c=a.invert(c[0]*ia,c[1]*ia);return c[0]*=ta,c[1]*=ta,c};return c};Ee.invert=Hb;x.geo.circle=function(){function a(){var a="function"===typeof e?e.apply(this,arguments):e,c=gd(-a[0]*ia,-a[1]*ia,0).invert,b=[];h(null,null,1,{point:function(a,e){b.push(a=c(a,e));a[0]*=ta;a[1]*=ta}});return{type:"Polygon",coordinates:[b]}}var e=[0,0],b,l=6,h;a.origin=
function(c){if(!arguments.length)return e;e=c;return a};a.angle=function(c){if(!arguments.length)return b;h=cd((b=+c)*ia,l*ia);return a};a.precision=function(c){if(!arguments.length)return l;h=cd(b*ia,(l=+c)*ia);return a};return a.angle(90)};x.geo.distance=function(a,e){var c=(e[0]-a[0])*ia,b=a[1]*ia,h=e[1]*ia,q=Math.cos(c),n=Math.sin(b),b=Math.cos(b),u=Math.sin(h),h=Math.cos(h),f;return Math.atan2(Math.sqrt((f=h*Math.sin(c))*f+(f=b*u-n*h*q)*f),n*u+b*h*q)};x.geo.graticule=function(){function a(){return{type:"MultiLineString",
coordinates:e()}}function e(){return x.range(Math.ceil(q/C)*C,h,C).map(A).concat(x.range(Math.ceil(p/r)*r,k,r).map(B)).concat(x.range(Math.ceil(l/w)*w,b,w).filter(function(a){return 1E-6<ka(a%C)}).map(y)).concat(x.range(Math.ceil(f/m)*m,n,m).filter(function(a){return 1E-6<ka(a%r)}).map(t))}var b,l,h,q,n,f,k,p,w=10,m=w,C=90,r=360,y,t,A,B,M=2.5;a.lines=function(){return e().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[A(q).concat(B(k).slice(1),
A(h).reverse().slice(1),B(p).reverse().slice(1))]}};a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()};a.majorExtent=function(c){if(!arguments.length)return[[q,p],[h,k]];q=+c[0][0];h=+c[1][0];p=+c[0][1];k=+c[1][1];q>h&&(c=q,q=h,h=c);p>k&&(c=p,p=k,k=c);return a.precision(M)};a.minorExtent=function(c){if(!arguments.length)return[[l,f],[b,n]];l=+c[0][0];b=+c[1][0];f=+c[0][1];n=+c[1][1];l>b&&(c=l,l=b,b=c);f>n&&(c=f,f=n,n=c);return a.precision(M)};a.step=function(c){return arguments.length?
a.majorStep(c).minorStep(c):a.minorStep()};a.majorStep=function(c){if(!arguments.length)return[C,r];C=+c[0];r=+c[1];return a};a.minorStep=function(c){if(!arguments.length)return[w,m];w=+c[0];m=+c[1];return a};a.precision=function(c){if(!arguments.length)return M;M=+c;y=Je(f,n,90);t=Ke(l,b,M);A=Je(p,k,90);B=Ke(q,h,M);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};x.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||
e.apply(this,arguments),h||l.apply(this,arguments)]}}var e=hd,b,l=id,h;a.distance=function(){return x.geo.distance(b||e.apply(this,arguments),h||l.apply(this,arguments))};a.source=function(c){if(!arguments.length)return e;e=c;b="function"===typeof c?null:c;return a};a.target=function(c){if(!arguments.length)return l;l=c;h="function"===typeof c?null:c;return a};a.precision=function(){return arguments.length?a:0};return a};x.geo.interpolate=function(a,e){return Og(a[0]*ia,a[1]*ia,e[0]*ia,e[1]*ia)};
x.geo.length=function(a){Od=0;x.geo.stream(a,Db);return Od};var Od,Db={sphere:D,point:D,lineStart:function(){function a(a,c){var g=Math.sin(c*=ia),h=Math.cos(c),q=ka((a*=ia)-e),n=Math.cos(q);Od+=Math.atan2(Math.sqrt((q=h*Math.sin(q))*q+(q=l*g-b*h*n)*q),b*g+l*h*n);e=a;b=g;l=h}var e,b,l;Db.point=function(c,g){e=c*ia;b=Math.sin(g*=ia);l=Math.cos(g);Db.point=a};Db.lineEnd=function(){Db.point=Db.lineEnd=D}},lineEnd:D,polygonStart:D,polygonEnd:D},Yf=Ib(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*
Math.asin(a/2)});(x.geo.azimuthalEqualArea=function(){return cb(Yf)}).raw=Yf;var Zf=Ib(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ya);(x.geo.azimuthalEquidistant=function(){return cb(Zf)}).raw=Zf;(x.geo.conicConformal=function(){return dd(Le)}).raw=Le;(x.geo.conicEquidistant=function(){return dd(Me)}).raw=Me;var $f=Ib(function(a){return 1/a},Math.atan);(x.geo.gnomonic=function(){return cb($f)}).raw=$f;lc.invert=function(a,e){return[a,2*Math.atan(Math.exp(e))-za]};(x.geo.mercator=function(){return Ne(lc)}).raw=
lc;var ag=Ib(function(){return 1},Math.asin);(x.geo.orthographic=function(){return cb(ag)}).raw=ag;var bg=Ib(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(x.geo.stereographic=function(){return cb(bg)}).raw=bg;jd.invert=function(a,e){return[-e,2*Math.atan(Math.exp(a))-za]};(x.geo.transverseMercator=function(){var a=Ne(jd),e=a.center,b=a.rotate;a.center=function(a){return a?e([-a[1],a[0]]):(a=e(),[-a[1],a[0]])};a.rotate=function(a){return a?b([a[0],a[1],2<a.length?a[2]+90:90]):(a=
b(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=jd;x.geom={};x.geom.hull=function(a){function c(a){if(3>a.length)return[];var c=ra(b),e=ra(l),g,h=a.length,n=[],f=[];for(g=0;g<h;g++)n.push([+c.call(this,a[g],g),+e.call(this,a[g],g),g]);n.sort(Pg);for(g=0;g<h;g++)f.push([n[g][0],-n[g][1]]);var c=Oe(n),f=Oe(f),e=f[0]===c[0],h=f[f.length-1]===c[c.length-1],k=[];for(g=c.length-1;0<=g;--g)k.push(a[n[c[g]][2]]);for(g=+e;g<f.length-h;++g)k.push(a[n[f[g]][2]]);return k}var b=xb,l=Jb;if(arguments.length)return c(a);
c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(l=a,c):l};return c};x.geom.polygon=function(a){Tb(a,Jc);return a};var Jc=x.geom.polygon.prototype=[];Jc.area=function(){for(var a=-1,e=this.length,b,l=this[e-1],h=0;++a<e;)b=l,l=this[a],h+=b[1]*l[0]-b[0]*l[1];return.5*h};Jc.centroid=function(a){var c=-1,b=this.length,l=0,h=0,q,n=this[b-1],f;for(arguments.length||(a=-1/(6*this.area()));++c<b;)q=n,n=this[c],f=q[0]*n[1]-n[0]*q[1],l+=(q[0]+n[0])*f,h+=(q[1]+n[1])*
f;return[l*a,h*a]};Jc.clip=function(a){for(var c,b=Qe(a),l=-1,h=this.length-Qe(this),q,n,f=this[h-1],k,p,w;++l<h;){c=a.slice();a.length=0;k=this[l];p=c[(n=c.length-b)-1];for(q=-1;++q<n;)w=c[q],kd(w,f,k)?(kd(p,f,k)||a.push(Pe(p,w,f,k)),a.push(w)):kd(p,f,k)&&a.push(Pe(p,w,f,k)),p=w;b&&a.push(a[0]);f=k}return a};var Bb,mb,zb,Se=[],md,Kb,We=[];Ue.prototype.prepare=function(){for(var a=this.edges,e=a.length,b;e--;)b=a[e].edge,b.b&&b.a||a.splice(e,1);a.sort(Ve);return a.length};oc.prototype={start:function(){return this.edge.l===
this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nd.prototype={insert:function(a,e){var c,b,h;if(a){e.P=a;if(e.N=a.N)a.N.P=e;a.N=e;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=e}else a.R=e;c=a}else this._?(a=Ye(this._),e.P=null,e.N=a,a.P=a.L=e,c=a):(e.P=e.N=null,this._=e,c=null);e.L=e.R=null;e.U=c;e.C=!0;for(a=e;c&&c.C;)b=c.U,c===b.L?(h=b.R)&&h.C?(c.C=h.C=!1,b.C=!0,a=b):(a===c.R&&(Mb(this,c),a=c,c=a.U),c.C=!1,b.C=!0,Nb(this,b)):(h=b.L)&&h.C?(c.C=h.C=!1,
b.C=!0,a=b):(a===c.L&&(Nb(this,c),a=c,c=a.U),c.C=!1,b.C=!0,Mb(this,b)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var c=a.U,b=a.L,l=a.R,h,q;h=b?l?Ye(l):b:l;c?c.L===a?c.L=h:c.R=h:this._=h;b&&l?(q=h.C,h.C=a.C,h.L=b,b.U=h,h!==l?(c=h.U,h.U=a.U,a=h.R,c.L=a,h.R=l,l.U=h):(h.U=c,c=h,a=h.R)):(q=a.C,a=h);a&&(a.U=c);if(!q)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===c.L){if(a=c.R,a.C&&(a.C=!1,c.C=!0,Mb(this,c),a=c.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=
!1,a.C=!0,Nb(this,a),a=c.R);a.C=c.C;c.C=a.R.C=!1;Mb(this,c);a=this._;break}}else if(a=c.L,a.C&&(a.C=!1,c.C=!0,Nb(this,c),a=c.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Mb(this,a),a=c.L);a.C=c.C;c.C=a.L.C=!1;Nb(this,c);a=this._;break}a.C=!0;a=c;c=c.U}while(!a.C);a&&(a.C=!1)}}};x.geom.voronoi=function(a){function c(a){var c=Array(a.length),e=f[0][0],g=f[0][1],h=f[1][0],l=f[1][1];od(b(a),f).cells.forEach(function(b,q){var n=b.edges,f=b.site;(c[q]=n.length?n.map(function(a){a=a.start();return[a.x,
a.y]}):f.x>=e&&f.x<=h&&f.y>=g&&f.y<=l?[[e,l],[h,l],[h,g],[e,g]]:[]).point=a[q]});return c}function b(a){return a.map(function(a,c){return{x:1E-6*Math.round(q(a,c)/1E-6),y:1E-6*Math.round(n(a,c)/1E-6),i:c}})}var l=xb,h=Jb,q=l,n=h,f=Kc;if(a)return c(a);c.links=function(a){return od(b(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};c.triangles=function(a){var c=[];od(b(a)).cells.forEach(function(e,b){for(var g=e.site,h=e.edges.sort(Ve),l=-1,q=
h.length,n,f=h[q-1].edge,f=f.l===g?f.r:f.l;++l<q;)n=f,f=h[l].edge,f=f.l===g?f.r:f.l,b<n.i&&b<f.i&&0>(g.x-f.x)*(n.y-g.y)-(g.x-n.x)*(f.y-g.y)&&c.push([a[b],a[n.i],a[f.i]])});return c};c.x=function(a){return arguments.length?(q=ra(l=a),c):l};c.y=function(a){return arguments.length?(n=ra(h=a),c):h};c.clipExtent=function(a){if(!arguments.length)return f===Kc?null:f;f=null==a?Kc:a;return c};c.size=function(a){return arguments.length?c.clipExtent(a&&[[0,0],a]):f===Kc?null:f&&f[1]};return c};var Kc=[[-1E6,
-1E6],[1E6,1E6]];x.geom.delaunay=function(a){return x.geom.voronoi().triangles(a)};x.geom.quadtree=function(a,e,b,l,h){function c(a){function c(a,c,e,b,g,h,l,n){if(!isNaN(e)&&!isNaN(b))if(a.leaf){var f=a.x,k=a.y;if(null!=f){if(!(.01>ka(f-e)+ka(k-b))){var u=a.point;a.x=a.y=a.point=null;q(a,u,f,k,g,h,l,n)}q(a,c,e,b,g,h,l,n)}else a.x=e,a.y=b,a.point=c}else q(a,c,e,b,g,h,l,n)}function q(a,e,b,g,h,l,q,n){var f=.5*(h+q),k=.5*(l+n),u=b>=f,p=g>=k,w=(p<<1)+u;a.leaf=!1;a=a.nodes[w]||(a.nodes[w]=Ze());u?h=f:
q=f;p?l=k:n=k;c(a,e,b,g,h,l,q,n)}var k,u=ra(g),p=ra(n),w,m,C,r,F,y,t,A;if(null!=e)F=e,y=b,t=l,A=h;else if(t=A=-(F=y=Infinity),w=[],m=[],r=a.length,f)for(C=0;C<r;++C)k=a[C],k.x<F&&(F=k.x),k.y<y&&(y=k.y),k.x>t&&(t=k.x),k.y>A&&(A=k.y),w.push(k.x),m.push(k.y);else for(C=0;C<r;++C){var B=+u(k=a[C],C);k=+p(k,C);B<F&&(F=B);k<y&&(y=k);B>t&&(t=B);k>A&&(A=k);w.push(B);m.push(k)}B=t-F;k=A-y;B>k?A=y+B:t=F+k;var M=Ze();M.add=function(a){c(M,a,+u(a,++C),+p(a,C),F,y,t,A)};M.visit=function(a){Ob(a,M,F,y,t,A)};C=
-1;if(null==e){for(;++C<r;)c(M,a[C],w[C],m[C],F,y,t,A);--C}else a.forEach(M.add);w=m=a=k=null;return M}var g=xb,n=Jb,f;if(f=arguments.length)return g=Vg,n=Wg,3===f&&(h=b,l=e,b=e=0),c(a);c.x=function(a){return arguments.length?(g=a,c):g};c.y=function(a){return arguments.length?(n=a,c):n};c.extent=function(a){if(!arguments.length)return null==e?null:[[e,b],[l,h]];null==a?e=b=l=h=null:(e=+a[0][0],b=+a[0][1],l=+a[1][0],h=+a[1][1]);return c};c.size=function(a){if(!arguments.length)return null==e?null:
[l-e,h-b];null==a?e=b=l=h=null:(e=b=0,l=+a[0],h=+a[1]);return c};return c};x.interpolateRgb=pd;x.interpolateObject=$e;x.interpolateNumber=Wa;x.interpolateString=af;var qd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rd=new RegExp(qd.source,"g");x.interpolate=nb;x.interpolators=[function(a,e){var c=typeof e;return("string"===c?Vb.has(e)||/^(#|rgb\(|hsl\()/.test(e)?pd:af:e instanceof pa?pd:Array.isArray(e)?pc:"object"===c&&isNaN(e)?$e:Wa)(a,e)}];x.interpolateArray=pc;var cg=function(){return ya},$h=
x.map({linear:cg,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Yg},cubic:function(){return Zg},sin:function(){return ah},exp:function(){return bh},circle:function(){return ch},elastic:function(a,e){var c;2>arguments.length&&(e=.45);arguments.length?c=e/Ga*Math.asin(1/a):(a=1,c=e/4);return function(b){return 1+a*Math.pow(2,-10*b)*Math.sin((b-c)*Ga/e)}},back:function(a){a||(a=1.70158);return function(c){return c*c*((a+1)*c-a)}},bounce:function(){return dh}}),ai=x.map({"in":ya,
out:bf,"in-out":cf,"out-in":function(a){return cf(bf(a))}});x.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in",b=$h.get(b)||cg,c=ai.get(c)||ya;return Xg(c(b.apply(null,Qf.call(arguments,1))))};x.interpolateHcl=function(a,e){a=x.hcl(a);e=x.hcl(e);var c=a.h,b=a.c,h=a.l,q=e.h-c,n=e.c-b,f=e.l-h;isNaN(n)&&(n=0,b=isNaN(b)?e.c:b);isNaN(q)?(q=0,c=isNaN(c)?e.h:c):180<q?q-=360:-180>q&&(q+=360);return function(a){return Qc(c+q*a,b+n*a,h+f*a)+""}};x.interpolateHsl=
function(a,e){a=x.hsl(a);e=x.hsl(e);var c=a.h,b=a.s,h=a.l,q=e.h-c,n=e.s-b,f=e.l-h;isNaN(n)&&(n=0,b=isNaN(b)?e.s:b);isNaN(q)?(q=0,c=isNaN(c)?e.h:c):180<q?q-=360:-180>q&&(q+=360);return function(a){return rb(c+q*a,b+n*a,h+f*a)+""}};x.interpolateLab=function(a,e){a=x.lab(a);e=x.lab(e);var c=a.l,b=a.a,h=a.b,q=e.l-c,n=e.a-b,f=e.b-h;return function(a){return Yd(c+q*a,b+n*a,h+f*a)+""}};x.interpolateRound=df;x.transform=function(a){var c=Oa.createElementNS(x.ns.prefix.svg,"g");return(x.transform=function(a){if(null!=
a){c.setAttribute("transform",a);var e=c.transform.baseVal.consolidate()}return new ef(e?e.matrix:bi)})(a)};ef.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bi={a:1,b:0,c:0,d:1,e:0,f:0};x.interpolateTransform=gf;x.layout={};x.layout.bundle=function(){return function(a){for(var c=[],b=-1,l=a.length;++b<l;)c.push(gh(a[b]));return c}};x.layout.chord=function(){function a(){var a={},c=[],b=x.range(n),g=[],u,m,C,
r,y;l=[];h=[];u=0;for(r=-1;++r<n;){m=0;for(y=-1;++y<n;)m+=q[r][y];c.push(m);g.push(x.range(n));u+=m}k&&b.sort(function(a,e){return k(c[a],c[e])});p&&g.forEach(function(a,c){a.sort(function(a,e){return p(q[c][a],q[c][e])})});u=(Ga-f*n)/u;m=0;for(r=-1;++r<n;){C=m;for(y=-1;++y<n;){var F=b[r],t=g[F][y],A=q[F][t],B=m,M=m+=A*u;a[F+"-"+t]={index:F,subindex:t,startAngle:B,endAngle:M,value:A}}h[F]={index:F,startAngle:C,endAngle:m,value:(m-C)/u};m+=f}for(r=-1;++r<n;)for(y=r-1;++y<n;)b=a[r+"-"+y],g=a[y+"-"+
r],(b.value||g.value)&&l.push(b.value<g.value?{source:g,target:b}:{source:b,target:g});w&&e()}function e(){l.sort(function(a,c){return w((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var b={},l,h,q,n,f=0,k,p,w;b.matrix=function(a){if(!arguments.length)return q;n=(q=a)&&q.length;l=h=null;return b};b.padding=function(a){if(!arguments.length)return f;f=a;l=h=null;return b};b.sortGroups=function(a){if(!arguments.length)return k;k=a;l=h=null;return b};b.sortSubgroups=function(a){if(!arguments.length)return p;
p=a;l=null;return b};b.sortChords=function(a){if(!arguments.length)return w;w=a;l&&e();return b};b.chords=function(){l||a();return l};b.groups=function(){h||a();return h};return b};x.layout.force=function(){function a(a){return function(c,e,b,g){if(c.point!==a){b=c.cx-a.x;var h=c.cy-a.y;e=g-e;g=b*b+h*h;if(e*e/r<g)return g<m&&(e=c.charge/g,a.px-=b*e,a.py-=h*e),!0;c.point&&g&&g<m&&(e=c.pointCharge/g,a.px-=b*e,a.py-=h*e)}return!c.charge}}function e(a){a.px=x.event.x;a.py=x.event.y;b.resume()}var b={},
l=x.dispatch("start","tick","end"),h=[1,1],q,n,f=.9,k=ci,p=di,w=-30,m=ei,C=.1,r=.64,y=[],t=[],A,B,M;b.tick=function(){if(.005>(n*=.99))return l.end({type:"end",alpha:n=0}),!0;var c=y.length,e=t.length,b,g,q,k,u,p,m;for(b=0;b<e;++b)if(g=t[b],q=g.source,k=g.target,p=k.x-q.x,m=k.y-q.y,u=p*p+m*m)u=n*B[b]*((u=Math.sqrt(u))-A[b])/u,p*=u,m*=u,k.x-=p*(u=q.weight/(k.weight+q.weight)),k.y-=m*u,q.x+=p*(u=1-u),q.y+=m*u;if(u=n*C)if(p=h[0]/2,m=h[1]/2,b=-1,u)for(;++b<c;)g=y[b],g.x+=(p-g.x)*u,g.y+=(m-g.y)*u;if(w)for(jf(e=
x.geom.quadtree(y),n,M),b=-1;++b<c;)(g=y[b]).fixed||e.visit(a(g));for(b=-1;++b<c;)g=y[b],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*f,g.y-=(g.py-(g.py=g.y))*f);l.tick({type:"tick",alpha:n})};b.nodes=function(a){if(!arguments.length)return y;y=a;return b};b.links=function(a){if(!arguments.length)return t;t=a;return b};b.size=function(a){if(!arguments.length)return h;h=a;return b};b.linkDistance=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return b};b.distance=b.linkDistance;
b.linkStrength=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return b};b.friction=function(a){if(!arguments.length)return f;f=+a;return b};b.charge=function(a){if(!arguments.length)return w;w="function"===typeof a?a:+a;return b};b.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(m);m=a*a;return b};b.gravity=function(a){if(!arguments.length)return C;C=+a;return b};b.theta=function(a){if(!arguments.length)return Math.sqrt(r);r=a*a;return b};b.alpha=function(a){if(!arguments.length)return n;
a=+a;n?n=0<a?a:0:0<a&&(l.start({type:"start",alpha:n=a}),x.timer(b.tick));return b};b.start=function(){function a(a,b){if(!n){n=Array(e);for(h=0;h<e;++h)n[h]=[];for(h=0;h<l;++h){var g=t[h];n[g.source.index].push(g.target);n[g.target.index].push(g.source)}}for(var g=n[c],h=-1,l=g.length,q;++h<l;)if(!isNaN(q=g[h][a]))return q;return Math.random()*b}var c,e=y.length,g=t.length,l=h[0],q=h[1],n,f;for(c=0;c<e;++c)(f=y[c]).index=c,f.weight=0;for(c=0;c<g;++c)f=t[c],"number"==typeof f.source&&(f.source=y[f.source]),
"number"==typeof f.target&&(f.target=y[f.target]),++f.source.weight,++f.target.weight;for(c=0;c<e;++c)f=y[c],isNaN(f.x)&&(f.x=a("x",l)),isNaN(f.y)&&(f.y=a("y",q)),isNaN(f.px)&&(f.px=f.x),isNaN(f.py)&&(f.py=f.y);A=[];if("function"===typeof k)for(c=0;c<g;++c)A[c]=+k.call(this,t[c],c);else for(c=0;c<g;++c)A[c]=k;B=[];if("function"===typeof p)for(c=0;c<g;++c)B[c]=+p.call(this,t[c],c);else for(c=0;c<g;++c)B[c]=p;M=[];if("function"===typeof w)for(c=0;c<e;++c)M[c]=+w.call(this,y[c],c);else for(c=0;c<e;++c)M[c]=
w;return b.resume()};b.resume=function(){return b.alpha(.1)};b.stop=function(){return b.alpha(0)};b.drag=function(){q||(q=x.behavior.drag().origin(ya).on("dragstart.force",hh).on("drag.force",e).on("dragend.force",ih));if(!arguments.length)return q;this.on("mouseover.force",jh).on("mouseout.force",kh).call(q)};return x.rebind(b,l,"on")};var ci=20,di=1,ei=Infinity;x.layout.hierarchy=function(){function a(c){var g=[c],h=[],n;for(c.depth=0;null!=(n=g.pop());)if(h.push(n),(k=b.call(a,n,n.depth))&&(f=
k.length)){for(var f,k,p;0<=--f;)g.push(p=k[f]),p.parent=n,p.depth=n.depth+1;l&&(n.value=0);n.children=k}else l&&(n.value=+l.call(a,n,n.depth)||0),delete n.children;Qa(c,function(a){var c,b;e&&(c=a.children)&&c.sort(e);l&&(b=a.parent)&&(b.value+=a.value)});return h}var e=oh,b=mh,l=nh;a.sort=function(c){if(!arguments.length)return e;e=c;return a};a.children=function(c){if(!arguments.length)return b;b=c;return a};a.value=function(c){if(!arguments.length)return l;l=c;return a};a.revalue=function(c){l&&
(Qb(c,function(a){a.children&&(a.value=0)}),Qa(c,function(c){var e;c.children||(c.value=+l.call(a,c,c.depth)||0);if(e=c.parent)e.value+=c.value}));return c};return a};x.layout.partition=function(){function a(c,e,b,g){var h=c.children;c.x=e;c.y=c.depth*g;c.dx=b;c.dy=g;if(h&&(q=h.length)){var l=-1,q,n;for(b=c.value?b/c.value:0;++l<q;)a(n=h[l],e,c=n.value*b,g),e+=c}}function e(a){a=a.children;var c=0;if(a&&(g=a.length))for(var b=-1,g;++b<g;)c=Math.max(c,e(a[b]));return 1+c}function b(c,b){var g=l.call(this,
c,b);a(g[0],0,h[0],h[1]/e(g[0]));return g}var l=x.layout.hierarchy(),h=[1,1];b.size=function(a){if(!arguments.length)return h;h=a;return b};return Pb(b,l)};x.layout.pie=function(){function a(c){var g=c.map(function(c,b){return+e.call(a,c,b)}),n=+("function"===typeof l?l.apply(this,arguments):l),q=(("function"===typeof h?h.apply(this,arguments):h)-n)/x.sum(g),f=x.range(c.length);null!=b&&f.sort(b===dg?function(a,c){return g[c]-g[a]}:function(a,e){return b(c[a],c[e])});var k=[];f.forEach(function(a){var e;
k[a]={data:c[a],value:e=g[a],startAngle:n,endAngle:n+=e*q}});return k}var e=Number,b=dg,l=0,h=Ga;a.value=function(c){if(!arguments.length)return e;e=c;return a};a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.startAngle=function(c){if(!arguments.length)return l;l=c;return a};a.endAngle=function(c){if(!arguments.length)return h;h=c;return a};return a};var dg={};x.layout.stack=function(){function a(c,g){var q=c.map(function(c,b){return e.call(a,c,b)}),k=q.map(function(c){return c.map(function(c,
e){return[n.call(a,c,e),f.call(a,c,e)]})}),u=b.call(a,k,g),q=x.permute(q,u),k=x.permute(k,u),u=l.call(a,k,g),p=q.length,w=q[0].length,m,C,r;for(C=0;C<w;++C)for(h.call(a,q[0][C],r=u[C],k[0][C][1]),m=1;m<p;++m)h.call(a,q[m][C],r+=k[m-1][C][1],k[m][C][1]);return c}var e=ya,b=sd,l=td,h=rh,n=ph,f=qh;a.values=function(c){if(!arguments.length)return e;e=c;return a};a.order=function(c){if(!arguments.length)return b;b="function"===typeof c?c:fi.get(c)||sd;return a};a.offset=function(c){if(!arguments.length)return l;
l="function"===typeof c?c:gi.get(c)||td;return a};a.x=function(c){if(!arguments.length)return n;n=c;return a};a.y=function(c){if(!arguments.length)return f;f=c;return a};a.out=function(c){if(!arguments.length)return h;h=c;return a};return a};var fi=x.map({"inside-out":function(a){var c=a.length,b,l=a.map(sh),h=a.map(th),n=x.range(c).sort(function(a,c){return l[a]-l[c]}),f=0,k=0,p=[],m=[];for(a=0;a<c;++a)b=n[a],f<k?(f+=h[b],p.push(b)):(k+=h[b],m.push(b));return m.reverse().concat(p)},reverse:function(a){return x.range(a.length).reverse()},
"default":sd}),gi=x.map({silhouette:function(a){var c=a.length,b=a[0].length,l=[],h=0,n,f,k,p=[];for(f=0;f<b;++f){for(k=n=0;n<c;n++)k+=a[n][f][1];k>h&&(h=k);l.push(k)}for(f=0;f<b;++f)p[f]=(h-l[f])/2;return p},wiggle:function(a){var c=a.length,b=a[0],l=b.length,h,n,f,k,p,m,w,C,r,y=[];y[0]=C=r=0;for(n=1;n<l;++n){for(k=h=0;h<c;++h)k+=a[h][n][1];p=h=0;for(w=b[n][0]-b[n-1][0];h<c;++h){f=0;for(m=(a[h][n][1]-a[h][n-1][1])/(2*w);f<h;++f)m+=(a[f][n][1]-a[f][n-1][1])/w;p+=m*a[h][n][1]}y[n]=C-=k?p/k*w:0;C<r&&
(r=C)}for(n=0;n<l;++n)y[n]-=r;return y},expand:function(a){var c=a.length,b=a[0].length,l=1/c,h,n,f,k=[];for(n=0;n<b;++n){for(f=h=0;h<c;h++)f+=a[h][n][1];if(f)for(h=0;h<c;h++)a[h][n][1]/=f;else for(h=0;h<c;h++)a[h][n][1]=l}for(n=0;n<b;++n)k[n]=0;return k},zero:td});x.layout.histogram=function(){function a(a,c){var g=[],l=a.map(b,this),q=n.call(this,l,c),f=h.call(this,q,l,c),k;c=-1;for(var p=l.length,m=f.length-1,w=e?1:1/p;++c<m;)k=g[c]=[],k.dx=f[c+1]-(k.x=f[c]),k.y=0;if(0<m)for(c=-1;++c<p;)k=l[c],
k>=q[0]&&k<=q[1]&&(k=g[x.bisect(f,k,1,m)-1],k.y+=w,k.push(a[c]));return g}var e=!0,b=Number,n=wh,h=vh;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.range=function(c){if(!arguments.length)return n;n=ra(c);return a};a.bins=function(c){if(!arguments.length)return h;h="number"===typeof c?function(a){return kf(a,c)}:ra(c);return a};a.frequency=function(c){if(!arguments.length)return e;e=!!c;return a};return a};x.layout.pack=function(){function a(a,c){var g=e.call(this,a,c),l=g[0],q=
n[0],f=n[1],k=null==h?Math.sqrt:"function"===typeof h?h:function(){return h};l.x=l.y=0;Qa(l,function(a){a.r=+k(a.value)});Qa(l,nf);if(b){var p=b*(h?1:Math.max(2*l.r/q,2*l.r/f))/2;Qa(l,function(a){a.r+=p});Qa(l,nf);Qa(l,function(a){a.r-=p})}pf(l,q/2,f/2,h?1:1/Math.max(2*l.r/q,2*l.r/f));return g}var e=x.layout.hierarchy().sort(xh),b=0,n=[1,1],h;a.size=function(c){if(!arguments.length)return n;n=c;return a};a.radius=function(c){if(!arguments.length)return h;h=null==c||"function"===typeof c?c:+c;return a};
a.padding=function(c){if(!arguments.length)return b;b=+c;return a};return Pb(a,e)};x.layout.tree=function(){function a(a,c){var g=q.call(this,a,c),l=g[0],u=e(l);Qa(u,b);u.parent.m=-u.z;Qb(u,n);if(p)Qb(l,h);else{var m=l,w=l,C=l;Qb(l,function(a){a.x<m.x&&(m=a);a.x>w.x&&(w=a);a.depth>C.depth&&(C=a)});var r=f(m,w)/2-m.x,y=k[0]/(w.x+f(w,m)/2+r),t=k[1]/(C.depth||1);Qb(l,function(a){a.x=(a.x+r)*y;a.y=a.depth*t})}return g}function e(a){a={A:null,children:[a]};for(var c=[a],b;null!=(b=c.pop());)for(var e=
b.children,g,h=0,n=e.length;h<n;++h)c.push((e[h]=g={_:e[h],parent:b,children:(g=e[h].children)&&g.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:h}).a=g);return a.children[0]}function b(a){var c=a.children,b=a.parent.children,e=a.i?b[a.i-1]:null;if(c.length){for(var g=0,h=0,n=a.children,l=n.length,q;0<=--l;)q=n[l],q.z+=g,q.m+=g,g+=q.s+(h+=q.c);c=(c[0].z+c[c.length-1].z)/2;e?(a.z=e.z+f(a._,e._),a.m=a.z-c):a.z=c}else e&&(a.z=e.z+f(a._,e._));c=a.parent;b=a.parent.A||b[0];if(e){h=g=a;n=g.parent.children[0];
l=g.m;q=h.m;for(var k=e.m,p=n.m,u;e=wd(e),g=vd(g),e&&g;){n=vd(n);h=wd(h);h.a=a;u=e.z+k-g.z-l+f(e._,g._);if(0<u){var m=e.a.parent===a.parent?e.a:b,w=a,C=u,r=C/(w.i-m.i);w.c-=r;w.s+=C;m.c+=r;w.z+=C;w.m+=C;l+=u;q+=u}k+=e.m;l+=g.m;p+=n.m;q+=h.m}e&&!wd(h)&&(h.t=e,h.m+=k-q);g&&!vd(n)&&(n.t=g,n.m+=l-p,b=a)}c.A=b}function n(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=k[0];a.y=a.depth*k[1]}var q=x.layout.hierarchy().sort(null).value(null),f=qf,k=[1,1],p=null;a.separation=function(c){if(!arguments.length)return f;
f=c;return a};a.size=function(c){if(!arguments.length)return p?null:k;p=null==(k=c)?h:null;return a};a.nodeSize=function(c){if(!arguments.length)return p?k:null;p=null==(k=c)?null:h;return a};return Pb(a,q)};x.layout.cluster=function(){function a(a,c){var g=e.call(this,a,c),l=g[0],q,f=0;Qa(l,function(a){var c=a.children;c&&c.length?(a.x=Bh(c),a.y=Ah(c)):(a.x=q?f+=b(a,q):0,a.y=0,q=a)});var k=rf(l),p=sf(l),w=k.x-b(k,p)/2,m=p.x+b(p,k)/2;Qa(l,h?function(a){a.x=(a.x-l.x)*n[0];a.y=(l.y-a.y)*n[1]}:function(a){a.x=
(a.x-w)/(m-w)*n[0];a.y=(1-(l.y?a.y/l.y:1))*n[1]});return g}var e=x.layout.hierarchy().sort(null).value(null),b=qf,n=[1,1],h=!1;a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return h?null:n;h=null==(n=c);return a};a.nodeSize=function(c){if(!arguments.length)return h?n:null;h=null!=(n=c);return a};return Pb(a,e)};x.layout.treemap=function(){function a(a,c){for(var e=-1,b=a.length,g,h;++e<b;)h=(g=a[e]).value*(0>c?0:c),g.area=isNaN(h)||0>=
h?0:h}function e(c){var b=c.children;if(b&&b.length){var g=w(c),h=[],l=b.slice(),f=Infinity,q,k="slice"===r?g.dx:"dice"===r?g.dy:"slice-dice"===r?c.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);a(l,g.dx*g.dy/c.value);for(h.area=0;0<(c=l.length);){h.push(c=l[c-1]);h.area+=c.area;if(!(c="squarify"!==r)){c=k;for(var p=h.area,u=0,m=Infinity,C=-1,t=h.length;++C<t;)if(q=h[C].area)q<m&&(m=q),q>u&&(u=q);p*=p;c*=c;c=(q=p?Math.max(c*u*y/p,p/(c*m*y)):Infinity)<=f}c?(l.pop(),f=q):(h.area-=h.pop().area,n(h,k,g,!1),k=
Math.min(g.dx,g.dy),h.length=h.area=0,f=Infinity)}h.length&&(n(h,k,g,!0),h.length=h.area=0);b.forEach(e)}}function b(c){var e=c.children;if(e&&e.length){var g=w(c),h=e.slice(),l=[];a(h,g.dx*g.dy/c.value);for(l.area=0;c=h.pop();)l.push(c),l.area+=c.area,null!=c.z&&(n(l,c.z?g.dx:g.dy,g,!h.length),l.length=l.area=0);e.forEach(b)}}function n(a,c,e,b){var g=-1,h=a.length,n=e.x,l=e.y,q=c?f(a.area/c):0,k;if(c==e.dx){if(b||q>e.dy)q=e.dy;for(;++g<h;)k=a[g],k.x=n,k.y=l,k.dy=q,n+=k.dx=Math.min(e.x+e.dx-n,q?
f(k.area/q):0);k.z=!0;k.dx+=e.x+e.dx-n;e.y+=q;e.dy-=q}else{if(b||q>e.dx)q=e.dx;for(;++g<h;)k=a[g],k.x=n,k.y=l,k.dx=q,l+=k.dy=Math.min(e.y+e.dy-l,q?f(k.area/q):0);k.z=!1;k.dy+=e.y+e.dy-l;e.x+=q;e.dx-=q}}function h(c){c=C||q(c);var g=c[0];g.x=0;g.y=0;g.dx=k[0];g.dy=k[1];C&&q.revalue(g);a([g],g.dx*g.dy/g.value);(C?b:e)(g);m&&(C=c);return c}var q=x.layout.hierarchy(),f=Math.round,k=[1,1],p=null,w=xd,m=!1,C,r="squarify",y=.5*(1+Math.sqrt(5));h.size=function(a){if(!arguments.length)return k;k=a;return h};
h.padding=function(a){function c(c){var e=a.call(h,c,c.depth);return null==e?xd(c):tf(c,"number"===typeof e?[e,e,e,e]:e)}function e(c){return tf(c,a)}if(!arguments.length)return p;var b;w=null==(p=a)?xd:"function"===(b=typeof a)?c:"number"===b?(a=[a,a,a,a],e):e;return h};h.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return h};h.sticky=function(a){if(!arguments.length)return m;m=a;C=null;return h};h.ratio=function(a){if(!arguments.length)return y;y=a;return h};h.mode=
function(a){if(!arguments.length)return r;r=a+"";return h};return Pb(h,q)};x.random={normal:function(a,e){var c=arguments.length;2>c&&(e=1);1>c&&(a=0);return function(){var c,b;do c=2*Math.random()-1,b=2*Math.random()-1,b=c*c+b*b;while(!b||1<b);return a+e*c*Math.sqrt(-2*Math.log(b)/b)}},logNormal:function(){var a=x.random.normal.apply(x,arguments);return function(){return Math.exp(a())}},bates:function(a){var c=x.random.irwinHall(a);return function(){return c()/a}},irwinHall:function(a){return function(){for(var c=
0,b=0;b<a;b++)c+=Math.random();return c}}};x.scale={};var Dh={floor:ya,ceil:ya};x.scale.linear=function(){return vf([0,1],[0,1],nb,!1)};var Gh={s:1,g:1,p:1,r:1,e:1};x.scale.log=function(){return wf(x.scale.linear().domain([0,1]),10,!0,[1,10])};var xf=x.format(".0e"),Hh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};x.scale.pow=function(){return yf(x.scale.linear(),1,[0,1])};x.scale.sqrt=function(){return x.scale.pow().exponent(.5)};x.scale.ordinal=function(){return zf([],
{t:"range",a:[[]]})};x.scale.category10=function(){return x.scale.ordinal().range(hi)};x.scale.category20=function(){return x.scale.ordinal().range(ii)};x.scale.category20b=function(){return x.scale.ordinal().range(ji)};x.scale.category20c=function(){return x.scale.ordinal().range(ki)};var hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ub),ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ub),ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ub),ki=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ub);x.scale.quantile=function(){return Af([],[])};x.scale.quantize=
function(){return Bf(0,1,[0,1])};x.scale.threshold=function(){return Cf([.5],[0,1])};x.scale.identity=function(){return Df([0,1])};x.svg={};x.svg.arc=function(){function a(){var a=e.apply(this,arguments),c=b.apply(this,arguments),g=n.apply(this,arguments)+ob,l=h.apply(this,arguments)+ob,f=(l<g&&(f=g,g=l,l=f),l-g),k=f<ja?"0":"1",p=Math.cos(g),g=Math.sin(g),m=Math.cos(l),l=Math.sin(l);return f>=li?a?"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+
a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z":a?"M"+c*p+","+c*g+"A"+c+","+c+" 0 "+k+",1 "+c*m+","+c*l+"L"+a*m+","+a*l+"A"+a+","+a+" 0 "+k+",0 "+a*p+","+a*g+"Z":"M"+c*p+","+c*g+"A"+c+","+c+" 0 "+k+",1 "+c*m+","+c*l+"L0,0Z"}var e=Ih,b=Jh,n=Ef,h=Ff;a.innerRadius=function(c){if(!arguments.length)return e;e=ra(c);return a};a.outerRadius=function(c){if(!arguments.length)return b;b=ra(c);return a};a.startAngle=function(c){if(!arguments.length)return n;n=ra(c);
return a};a.endAngle=function(c){if(!arguments.length)return h;h=ra(c);return a};a.centroid=function(){var a=(e.apply(this,arguments)+b.apply(this,arguments))/2,c=(n.apply(this,arguments)+h.apply(this,arguments))/2+ob;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var ob=-za,li=Ga-1E-6;x.svg.line=function(){return Gf(ya)};var Ad=x.map({linear:Ha,"linear-closed":function(a){return Ha(a)+"Z"},step:function(a){for(var c=0,b=a.length,n=a[0],h=[n[0],",",n[1]];++c<b;)h.push("H",(n[0]+(n=a[c])[0])/2,"V",
n[1]);1<b&&h.push("H",n[0]);return h.join("")},"step-before":Bd,"step-after":Cd,basis:Hf,"basis-open":function(a){if(4>a.length)return Ha(a);for(var c=[],b=-1,n=a.length,h,f=[0],k=[0];3>++b;)h=a[b],f.push(h[0]),k.push(h[1]);c.push(Ia(eb,f)+","+Ia(eb,k));for(--b;++b<n;)h=a[b],f.shift(),f.push(h[0]),k.shift(),k.push(h[1]),Ed(c,f,k);return c.join("")},"basis-closed":function(a){for(var c,b=-1,n=a.length,h=n+4,f,k=[],p=[];4>++b;)f=a[b%n],k.push(f[0]),p.push(f[1]);c=[Ia(eb,k),",",Ia(eb,p)];for(--b;++b<
h;)f=a[b%n],k.shift(),k.push(f[0]),p.shift(),p.push(f[1]),Ed(c,k,p);return c.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var e=a[0][0],h=a[0][1],n=a[c][0]-e,f=a[c][1]-h,k=-1,p,m;++k<=c;)p=a[k],m=k/c,p[0]=b*p[0]+(1-b)*(e+m*n),p[1]=b*p[1]+(1-b)*(h+m*f);return Hf(a)},cardinal:function(a,b){return 3>a.length?Ha(a):a[0]+uc(a,Dd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Ha(a):a[1]+uc(a.slice(1,a.length-1),Dd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Ha(a):a[0]+uc((a.push(a[0]),
a),Dd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Ha(a);else{var c=a[0],b=[],n,h,f,k;n=0;h=a.length-1;var p=[];f=a[1];for(k=p[0]=Fd(a[0],f);++n<h;)p[n]=(k+(k=Fd(f,f=a[n+1])))/2;p[n]=k;for(var m=-1,w=a.length-1;++m<w;)n=Fd(a[m],a[m+1]),1E-6>ka(n)?p[m]=p[m+1]=0:(h=p[m]/n,f=p[m+1]/n,k=h*h+f*f,9<k&&(k=3*n/Math.sqrt(k),p[m]=k*h,p[m+1]=k*f));for(m=-1;++m<=w;)k=(a[Math.min(w,m+1)][0]-a[Math.max(0,m-1)][0])/(6*(1+p[m]*p[m])),b.push([k||0,p[m]*k||0]);a=c+uc(a,b)}return a}});
Ad.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var If=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],eb=[0,1/6,2/3,1/6];x.svg.line.radial=function(){var a=Gf(Kf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Bd.reverse=Cd;Cd.reverse=Bd;x.svg.area=function(){return Lf(ya)};x.svg.area.radial=function(){var a=Lf(Kf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};
x.svg.chord=function(){function a(a,c){var e=b(this,n,a,c),l=b(this,h,a,c);return"M"+e.p0+g(e.r,e.p1,e.a1-e.a0)+(e.a0==l.a0&&e.a1==l.a1?"Q 0,0 "+e.p0:"Q 0,0 "+l.p0+g(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+e.p0))+"Z"}function b(a,c,b,e){var g=c.call(a,b,e);c=f.call(a,g,e);b=k.call(a,g,e)+ob;a=p.call(a,g,e)+ob;return{r:c,a0:b,a1:a,p0:[c*Math.cos(b),c*Math.sin(b)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function g(a,c,b){return"A"+a+","+a+" 0 "+ +(b>ja)+",1 "+c}var n=hd,h=id,f=Kh,k=Ef,p=Ff;a.radius=function(c){if(!arguments.length)return f;
f=ra(c);return a};a.source=function(c){if(!arguments.length)return n;n=ra(c);return a};a.target=function(c){if(!arguments.length)return h;h=ra(c);return a};a.startAngle=function(c){if(!arguments.length)return k;k=ra(c);return a};a.endAngle=function(c){if(!arguments.length)return p;p=ra(c);return a};return a};x.svg.diagonal=function(){function a(a,c){var e=b.call(this,a,c),h=g.call(this,a,c),l=(e.y+h.y)/2,e=[e,{x:e.x,y:l},{x:h.x,y:l},h],e=e.map(n);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var b=hd,
g=id,n=Mf;a.source=function(c){if(!arguments.length)return b;b=ra(c);return a};a.target=function(c){if(!arguments.length)return g;g=ra(c);return a};a.projection=function(c){if(!arguments.length)return n;n=c;return a};return a};x.svg.diagonal.radial=function(){var a=x.svg.diagonal(),b=Mf,g=a.projection;a.projection=function(a){return arguments.length?g(Lh(b=a)):b};return a};x.svg.symbol=function(){function a(a,c){return(eg.get(b.call(this,a,c))||Nf)(g.call(this,a,c))}var b=Nh,g=Mh;a.type=function(c){if(!arguments.length)return b;
b=ra(c);return a};a.size=function(c){if(!arguments.length)return g;g=ra(c);return a};return a};var eg=x.map({circle:Nf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*fg));var c=a*fg;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Lc);var c=a*Lc/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Lc);var c=a*Lc/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});x.svg.symbolTypes=eg.keys();var Lc=Math.sqrt(3),fg=Math.tan(30*ia),xa=[],Uf=0,qb,yc;xa.call=na.call;xa.empty=na.empty;xa.node=na.node;xa.size=na.size;x.transition=function(a){return arguments.length?qb?a.transition():a:Tf.transition()};x.transition.prototype=xa;xa.select=function(a){var c=this.id,b=[],n,h,f;a=Q(a);for(var k=-1,p=this.length;++k<
p;){b.push(n=[]);for(var m=this[k],w=-1,C=m.length;++w<C;)(f=m[w])&&(h=a.call(f,f.__data__,w,k))?("__data__"in f&&(h.__data__=f.__data__),vc(h,w,c,f.__transition__[c]),n.push(h)):n.push(null)}return Rb(b,c)};xa.selectAll=function(a){var c=this.id,b=[],n,h,f,k;a=I(a);for(var p=-1,m=this.length;++p<m;)for(var w=this[p],C=-1,r=w.length;++C<r;)if(n=w[C]){k=n.__transition__[c];h=a.call(n,n.__data__,C,p);b.push(n=[]);for(var y=-1,t=h.length;++y<t;)(f=h[y])&&vc(f,y,c,k),n.push(f)}return Rb(b,c)};xa.filter=
function(a){var c=[],b,n,h;"function"!==typeof a&&(a=V(a));for(var f=0,k=this.length;f<k;f++){c.push(b=[]);n=this[f];for(var p=0,m=n.length;p<m;p++)(h=n[p])&&a.call(h,h.__data__,p,f)&&b.push(h)}return Rb(c,this.id)};xa.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):Z(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(e){e.__transition__[c].tween.set(a,b)})};xa.attr=function(a,b){function c(){this.removeAttribute(k)}function e(){this.removeAttributeNS(k.space,
k.local)}function h(a){return null==a?c:(a+="",function(){var c=this.getAttribute(k),b;return c!==a&&(b=f(c,a),function(a){this.setAttribute(k,b(a))})})}function n(a){return null==a?e:(a+="",function(){var c=this.getAttributeNS(k.space,k.local),b;return c!==a&&(b=f(c,a),function(a){this.setAttributeNS(k.space,k.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var f="transform"==a?gf:nb,k=x.ns.qualify(a);return Gd(this,"attr."+a,b,k.local?n:h)};xa.attrTween=function(a,
b){function c(a,c){var e=b.call(this,a,c,this.getAttribute(h));return e&&function(a){this.setAttribute(h,e(a))}}function e(a,c){var e=b.call(this,a,c,this.getAttributeNS(h.space,h.local));return e&&function(a){this.setAttributeNS(h.space,h.local,e(a))}}var h=x.ns.qualify(a);return this.tween("attr."+a,h.local?e:c)};xa.style=function(a,b,g){function c(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(g in a)this.style(g,a[g],b);return this}g=""}return Gd(this,
"style."+a,b,function(b){return null==b?c:(b+="",function(){var c=Ba.getComputedStyle(this,null).getPropertyValue(a),e;return c!==b&&(e=nb(c,b),function(c){this.style.setProperty(a,e(c),g)})})})};xa.styleTween=function(a,b,g){3>arguments.length&&(g="");return this.tween("style."+a,function(c,e){var h=b.call(this,c,e,Ba.getComputedStyle(this,null).getPropertyValue(a));return h&&function(c){this.style.setProperty(a,h(c),g)}})};xa.text=function(a){return Gd(this,"text",a,Oh)};xa.remove=function(){return this.each("end.transition",
function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};xa.ease=function(a){var c=this.id;if(1>arguments.length)return this.node().__transition__[c].ease;"function"!==typeof a&&(a=x.ease.apply(x,arguments));return Z(this,function(b){b.__transition__[c].ease=a})};xa.delay=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].delay:Z(this,"function"===typeof a?function(b,e,h){b.__transition__[c].delay=+a.call(b,b.__data__,e,h)}:(a=+a,function(b){b.__transition__[c].delay=
a}))};xa.duration=function(a){var c=this.id;return 1>arguments.length?this.node().__transition__[c].duration:Z(this,"function"===typeof a?function(b,e,h){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,e,h))}:(a=Math.max(1,a),function(b){b.__transition__[c].duration=a}))};xa.each=function(a,b){var c=this.id;if(2>arguments.length){var e=yc,h=qb;qb=c;Z(this,function(b,e,g){yc=b.__transition__[c];a.call(b,b.__data__,e,g)});yc=e;qb=h}else Z(this,function(e){e=e.__transition__[c];(e.event||
(e.event=x.dispatch("start","end"))).on(a,b)});return this};xa.transition=function(){for(var a=this.id,b=++Uf,g=[],n,h,f,k,p=0,m=this.length;p<m;p++){g.push(n=[]);h=this[p];for(var w=0,C=h.length;w<C;w++){if(f=h[w])k=Object.create(f.__transition__[a]),k.delay+=k.duration,vc(f,w,b,k);n.push(f)}}return Rb(g,b)};x.svg.axis=function(){function a(a){a.each(function(){var a=x.select(this),c=this.__chart__||b,e=this.__chart__=b.copy(),l=null==p?e.ticks?e.ticks.apply(e,k):e.domain():p,q=null==m?e.tickFormat?
e.tickFormat.apply(e,k):ya:m,w=a.selectAll(".tick").data(l,e),l=w.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),C=x.transition(w.exit()).style("opacity",1E-6).remove(),u=x.transition(w.order()).style("opacity",1),r,y=qc(e),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),x.transition(a));l.append("line");l.append("text");var t=l.select("line"),A=u.select("line"),q=w.select("text").text(q),w=l.select("text"),B=u.select("text");switch(g){case "bottom":r=
Of;t.attr("y2",n);w.attr("y",Math.max(n,0)+f);A.attr("x2",0).attr("y2",n);B.attr("x",0).attr("y",Math.max(n,0)+f);q.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+y[0]+","+h+"V0H"+y[1]+"V"+h);break;case "top":r=Of;t.attr("y2",-n);w.attr("y",-(Math.max(n,0)+f));A.attr("x2",0).attr("y2",-n);B.attr("x",0).attr("y",-(Math.max(n,0)+f));q.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+y[0]+","+-h+"V0H"+y[1]+"V"+-h);break;case "left":r=Pf;t.attr("x2",-n);w.attr("x",-(Math.max(n,
0)+f));A.attr("x2",-n).attr("y2",0);B.attr("x",-(Math.max(n,0)+f)).attr("y",0);q.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-h+","+y[0]+"H0V"+y[1]+"H"+-h);break;case "right":r=Pf,t.attr("x2",n),w.attr("x",Math.max(n,0)+f),A.attr("x2",n).attr("y2",0),B.attr("x",Math.max(n,0)+f).attr("y",0),q.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+h+","+y[0]+"H0V"+y[1]+"H"+h)}if(e.rangeBand)var M=e,N=M.rangeBand()/2,c=e=function(a){return M(a)+N};else c.rangeBand?c=e:C.call(r,
e);l.call(r,c);u.call(r,e)})}var b=x.scale.linear(),g=gg,n=6,h=6,f=3,k=[10],p=null,m;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(c){if(!arguments.length)return g;g=c in mi?c+"":gg;return a};a.ticks=function(){if(!arguments.length)return k;k=arguments;return a};a.tickValues=function(c){if(!arguments.length)return p;p=c;return a};a.tickFormat=function(c){if(!arguments.length)return m;m=c;return a};a.tickSize=function(c){var b=arguments.length;if(!b)return n;n=+c;
h=+arguments[b-1];return a};a.innerTickSize=function(c){if(!arguments.length)return n;n=+c;return a};a.outerTickSize=function(c){if(!arguments.length)return h;h=+c;return a};a.tickPadding=function(c){if(!arguments.length)return f;f=+c;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var gg="bottom",mi={top:1,right:1,bottom:1,left:1};x.svg.brush=function(){function a(c){c.each(function(){var c=x.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",h).on("touchstart.brush",h),e=c.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var f=c.selectAll(".resize").data(A,ya);f.exit().remove();f.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ni[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");f.style("display",a.empty()?"none":null);c=x.transition(c);e=x.transition(e);k&&(f=qc(k),e.attr("x",f[0]).attr("width",f[1]-f[0]),g(c));p&&(f=qc(p),e.attr("y",f[0]).attr("height",f[1]-f[0]),n(c));b(c)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+m[+/e$/.test(a)]+","+w[+/^s/.test(a)]+")"})}function g(a){a.select(".extent").attr("x",
m[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",m[1]-m[0])}function n(a){a.select(".extent").attr("y",w[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",w[1]-w[0])}function h(){function c(){var a=x.mouse(l),c=!1;E&&(a[0]+=E[0],a[1]+=E[1]);v||(x.event.altKey?(V||(V=[(m[0]+m[1])/2,(w[0]+w[1])/2]),I[0]=m[+(a[0]<V[0])],I[1]=w[+(a[1]<V[1])]):V=null);M&&e(a,k,0)&&(g(A),c=!0);N&&e(a,p,1)&&(n(A),c=!0);c&&(b(A),u({type:"brush",mode:v?"move":"resize"}))}function e(a,c,b){var e=qc(c);c=e[0];
var g=e[1],e=I[b],n=b?w:m,h=n[1]-n[0];v&&(c-=e,g-=h+e);a=(b?t:y)?Math.max(c,Math.min(g,a[b])):a[b];v?c=(a+=e)+h:(V&&(e=Math.max(c,Math.min(g,2*V[b]-a))),e<a?(c=a,a=e):c=e);if(n[0]!=a||n[1]!=c)return b?r=null:C=null,n[0]=a,n[1]=c,!0}function h(){c();A.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);x.select("body").style("cursor",null);Z.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);z();u({type:"brushend"})}var l=this,q=x.select(x.event.target),u=f.of(l,arguments),A=x.select(l),B=q.datum(),M=!/^(n|s)$/.test(B)&&k,N=!/^(e|w)$/.test(B)&&p,v=q.classed("extent"),z=va(),V,I=x.mouse(l),E,Z=x.select(Ba).on("keydown.brush",function(){32==x.event.keyCode&&(v||(V=null,I[0]-=m[1],I[1]-=w[1],v=2),L())}).on("keyup.brush",function(){32==x.event.keyCode&&2==v&&(I[0]+=m[1],I[1]+=w[1],v=0,L())});if(x.event.changedTouches)Z.on("touchmove.brush",c).on("touchend.brush",
h);else Z.on("mousemove.brush",c).on("mouseup.brush",h);A.interrupt().selectAll("*").interrupt();if(v)I[0]=m[0]-I[0],I[1]=w[0]-I[1];else if(B){var W=+/w$/.test(B),B=+/^n/.test(B);E=[m[1-W]-I[0],w[1-B]-I[1]];I[0]=m[W];I[1]=w[B]}else x.event.altKey&&(V=I.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null);x.select("body").style("cursor",q.style("cursor"));u({type:"brushstart"});c()}var f=B(a,"brushstart","brush","brushend"),k=null,p=null,m=[0,0],w=[0,0],C,r,y=!0,t=!0,
A=Pd[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),c={x:m,y:w,i:C,j:r},b=this.__chart__||c;this.__chart__=c;qb?x.select(this).transition().each("start.brush",function(){C=b.i;r=b.j;m=b.x;w=b.y;a({type:"brushstart"})}).tween("brush:brush",function(){var b=pc(m,c.x),e=pc(w,c.y);C=r=null;return function(g){m=c.x=b(g);w=c.y=e(g);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){C=c.i;r=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(c){if(!arguments.length)return k;k=c;A=Pd[!k<<1|!p];return a};a.y=function(c){if(!arguments.length)return p;p=c;A=Pd[!k<<1|!p];return a};a.clamp=function(c){if(!arguments.length)return k&&p?[y,t]:k?y:p?t:null;k&&p?(y=!!c[0],t=!!c[1]):k?y=!!c:p&&(t=!!c);return a};a.extent=function(c){var b,e,g,n,h;if(!arguments.length)return k&&(C?(b=C[0],e=C[1]):(b=m[0],e=m[1],k.invert&&(b=k.invert(b),e=k.invert(e)),e<b&&(h=b,b=e,e=h))),p&&(r?(g=
r[0],n=r[1]):(g=w[0],n=w[1],p.invert&&(g=p.invert(g),n=p.invert(n)),n<g&&(h=g,g=n,n=h))),k&&p?[[b,g],[e,n]]:k?[b,e]:p&&[g,n];k&&(b=c[0],e=c[1],p&&(b=b[0],e=e[0]),C=[b,e],k.invert&&(b=k(b),e=k(e)),e<b&&(h=b,b=e,e=h),b!=m[0]||e!=m[1])&&(m=[b,e]);p&&(g=c[0],n=c[1],k&&(g=g[1],n=n[1]),r=[g,n],p.invert&&(g=p(g),n=p(n)),n<g&&(h=g,g=n,n=h),g!=w[0]||n!=w[1])&&(w=[g,n]);return a};a.clear=function(){a.empty()||(m=[0,0],w=[0,0],C=r=null);return a};a.empty=function(){return!!k&&m[0]==m[1]||!!p&&w[0]==w[1]};return x.rebind(a,
f,"on")};var ni={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Qd=ba.format=Wf.timeFormat,hg=Qd.utc,ig=hg("%Y-%m-%dT%H:%M:%S.%LZ");Qd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Hd:ig;Hd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Hd.toString=ig.toString;ba.second=gb(function(a){return new Aa(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});ba.seconds=ba.second.range;ba.seconds.utc=ba.second.utc.range;ba.minute=gb(function(a){return new Aa(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});ba.minutes=ba.minute.range;ba.minutes.utc=ba.minute.utc.range;ba.hour=gb(function(a){var c=a.getTimezoneOffset()/60;return new Aa(36E5*(Math.floor(a/36E5-c)+c))},function(a,b){a.setTime(a.getTime()+36E5*
Math.floor(b))},function(a){return a.getHours()});ba.hours=ba.hour.range;ba.hours.utc=ba.hour.utc.range;ba.month=gb(function(a){a=ba.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});ba.months=ba.month.range;ba.months.utc=ba.month.utc.range;var wc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Rd=[[ba.second,1],[ba.second,5],[ba.second,15],[ba.second,30],[ba.minute,1],[ba.minute,5],[ba.minute,
15],[ba.minute,30],[ba.hour,1],[ba.hour,3],[ba.hour,6],[ba.hour,12],[ba.day,1],[ba.day,2],[ba.week,1],[ba.month,1],[ba.month,3],[ba.year,1]],oi=Qd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",wb]]),Ph={range:function(a,
b,g){return x.range(Math.ceil(a/g)*g,+b,g).map(pb)},floor:ya,ceil:ya};Rd.year=ba.year;ba.scale=function(){return Id(x.scale.linear(),Rd,oi)};var jg=Rd.map(function(a){return[a[0].utc,a[1]]}),pi=hg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],
["%B",function(a){return a.getUTCMonth()}],["%Y",wb]]);jg.year=ba.year.utc;ba.scale.utc=function(){return Id(x.scale.linear(),jg,pi)};x.text=Wc(function(a){return a.responseText});x.json=function(a,b){return Wb(a,"application/json",Qh,b)};x.html=function(a,b){return Wb(a,"text/html",Rh,b)};x.xml=Wc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(x):"object"===typeof module&&module.exports?module.exports=x:this.d3=x}();
(function(){function K(a,b){return(new Date(b,a+1,0)).getDate()}var m=window.nv||{};m.version="1.1.15b";m.dev=!0;window.nv=m;m.tooltip=m.tooltip||{};m.utils=m.utils||{};m.models=m.models||{};m.charts={};m.graphs=[];m.logs={};m.dispatch=d3.dispatch("render_start","render_end");m.dev&&(m.dispatch.on("render_start",function(a){m.logs.startTime=+new Date}),m.dispatch.on("render_end",function(a){m.logs.endTime=+new Date;m.logs.totalTime=m.logs.endTime-m.logs.startTime;m.log("total",m.logs.totalTime)}));
m.log=function(){m.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):m.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};m.render=function(a){a=a||1;m.render.active=!0;m.dispatch.render_start();setTimeout(function(){for(var b,p,z=0;z<a&&(p=m.render.queue[z]);z++)b=p.generate(),typeof p.callback==typeof Function&&p.callback(b),m.graphs.push(b);m.render.queue.splice(0,
z);m.render.queue.length?setTimeout(arguments.callee,0):(m.dispatch.render_end(),m.render.active=!1)},0)};m.render.active=!1;m.render.queue=[];m.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});m.render.queue.push(a);m.render.active||m.render()};m.identity=function(a){return a};m.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,p){return function(m,r,k){var f=
a(m),v=[];f<m&&b(f);if(1<k)for(;f<r;)m=new Date(+f),0===p(m)%k&&v.push(m),b(f);else for(;f<r;)v.push(new Date(+f)),b(f);return v}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(K(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});m.interactiveGuideline=function(){function a(H){H.each(function(D){function G(){var p=d3.mouse(this),m=p[0],p=p[1],t=!0,B=!1;J&&(m=d3.event.offsetX,p=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(t=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(B=!0));t&&(m-=r.left,p-=r.top);0>m||0>p||m>L||p>P||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||B?J&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(f.elementMouseout({mouseX:m,mouseY:p}),a.renderGuideLine(null)):(t=k.invert(m),f.elementMousemove({mouseX:m,mouseY:p,pointXValue:t}),"dblclick"===d3.event.type&&f.elementDblclick({mouseX:m,mouseY:p,pointXValue:t}))}var E=d3.select(this),
L=p||960,P=z||400,B=E.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([D]);B.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");t&&(t.on("mousemove",G,!0).on("mouseout",G,!0).on("dblclick",G),a.renderGuideLine=function(a){v&&(a=B.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[m.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",P).attr("y2",0),a.exit().remove())})})}var b=m.models.tooltip(),p=null,z=null,r={left:0,top:0},k=d3.scale.linear();d3.scale.linear();var f=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),v=!0,t=null,J=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=f;a.tooltip=b;a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return p;
p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.showGuideLine=function(b){if(!arguments.length)return v;v=b;return a};a.svgContainer=function(b){if(!arguments.length)return t;t=b;return a};return a};m.interactiveBisect=function(a,b,p){if(!a instanceof Array)return null;"function"!==typeof p&&(p=function(a,b){return a.x});var m=d3.bisector(p).left,m=d3.max([0,m(a,b)-1]),r=p(a[m],m);"undefined"===typeof r&&
(r=m);if(r===b)return m;var k=d3.min([m+1,a.length-1]);a=p(a[k],k);"undefined"===typeof a&&(a=k);return Math.abs(a-b)>=Math.abs(r-b)?m:k};m.nearestValueIndex=function(a,b,p){var m=Infinity,r=null;a.forEach(function(a,f){var k=Math.abs(b-a);k<=m&&k<p&&(m=k,r=f)});return r};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(D){var b;b=p&&p.series&&0<p.series.length?!0:!1;if(b){if(t){b=d3.select(t);"svg"!==b.node().tagName&&(b=b.select("svg"));var E=b.node()?b.attr("viewBox"):
null;E&&(E=E.split(" "),b=parseInt(b.style("width"))/E[2],H.left*=b,H.top*=b)}b=H.left;var E=null!=f?f:H.top,L;L=P(p);var I;I=t?d3.select(t):d3.select("body");var T=I.select(".nvtooltip");null===T.node()&&(T=I.append("div").attr("class","nvtooltip "+(v?v:"xy-tooltip")).attr("id",G));T.node().innerHTML=L;T.style("top",0).style("left",0).style("opacity",0);T.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);T.classed("nv-pointer-events-none",!0);J=L=T.node();if(t){(T=t.getElementsByTagName("svg")[0])?
T.getBoundingClientRect():t.getBoundingClientRect();var S=0;I=0;if(T){T=T.getBoundingClientRect();S=t.getBoundingClientRect();I=T.top;if(0>I){var R=t.getBoundingClientRect();I=Math.abs(I)>R.height?0:I}I=Math.abs(I-S.top);S=Math.abs(T.left-S.left)}b+=t.offsetLeft+S-2*t.scrollLeft;E+=t.offsetTop+I-2*t.scrollTop}k&&0<k&&(E=Math.floor(E/k)*k);m.tooltip.calcTooltipPosition([b,E],z,r,L);return a}}}var b=null,p=null,z="w",r=50,k=25,f=null,v=null,t=null,J=null,H={left:null,top:null},D=!0,G="nvtooltip-"+Math.floor(1E5*
Math.random()),E=function(a,b){return a},L=function(a){return a},P=function(a){if(null!=b)return b;if(null==a)return"";var f=d3.select(document.createElement("table"));f.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(L(a.value));var k=f.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
k.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});k.append("td").classed("key",!0).html(function(a){return a.key});k.append("td").classed("value",!0).html(function(a,b){return E(a.value,b)});k.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});f=f.node().outerHTML;void 0!==a.footer&&(f+="<div class='footer'>"+
a.footer+"</div>");return f};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(f){if(!arguments.length)return b;b=f;return a};a.tooltipElem=function(){return J};a.contentGenerator=function(b){if(!arguments.length)return P;"function"===typeof b&&(P=b);return a};a.data=function(b){if(!arguments.length)return p;p=b;return a};a.gravity=function(b){if(!arguments.length)return z;z=b;return a};a.distance=function(b){if(!arguments.length)return r;r=b;return a};a.snapDistance=function(b){if(!arguments.length)return k;
k=b;return a};a.classes=function(b){if(!arguments.length)return v;v=b;return a};a.chartContainer=function(b){if(!arguments.length)return t;t=b;return a};a.position=function(b){if(!arguments.length)return H;H.left="undefined"!==typeof b.left?b.left:H.left;H.top="undefined"!==typeof b.top?b.top:H.top;return a};a.fixedTop=function(b){if(!arguments.length)return f;f=b;return a};a.enabled=function(b){if(!arguments.length)return D;D=b;return a};a.valueFormatter=function(b){if(!arguments.length)return E;
"function"===typeof b&&(E=b);return a};a.headerFormatter=function(b){if(!arguments.length)return L;"function"===typeof b&&(L=b);return a};a.id=function(){return G};return a};m.tooltip.show=function(a,b,p,z,r,k){var f=document.createElement("div");f.className="nvtooltip "+(k?k:"xy-tooltip");k=r;if(!r||r.tagName.match(/g|svg/i))k=document.getElementsByTagName("body")[0];f.style.left=0;f.style.top=0;f.style.opacity=0;f.innerHTML=b;k.appendChild(f);r&&(a[0]-=r.scrollLeft,a[1]-=r.scrollTop);m.tooltip.calcTooltipPosition(a,
p,z,f)};m.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};m.tooltip.findTotalOffsetTop=function(a,b){var p=b;do isNaN(a.offsetTop)||(p+=a.offsetTop);while(a=a.offsetParent);return p};m.tooltip.findTotalOffsetLeft=function(a,b){var p=b;do isNaN(a.offsetLeft)||(p+=a.offsetLeft);while(a=a.offsetParent);return p};m.tooltip.calcTooltipPosition=function(a,b,p,z){var r=parseInt(z.offsetHeight),k=parseInt(z.offsetWidth),f=m.utils.windowSize().width,
v=m.utils.windowSize().height,t=window.pageYOffset,J=window.pageXOffset,H,D,v=window.innerWidth>=document.body.scrollWidth?v:v-16,f=window.innerHeight>=document.body.scrollHeight?f:f-16;p=p||20;var G=function(a){return m.tooltip.findTotalOffsetTop(a,D)},E=function(a){return m.tooltip.findTotalOffsetLeft(a,H)};switch(b||"s"){case "e":H=a[0]-k-p;D=a[1]-r/2;b=E(z);G=G(z);b<J&&(H=a[0]+p>J?a[0]+p:J-b+H);G<t&&(D=t-G+D);G+r>t+v&&(D=t+v-G+D-r);break;case "w":H=a[0]+p;D=a[1]-r/2;b=E(z);G=G(z);b+k>f&&(H=a[0]-
k-p);G<t&&(D=t+5);G+r>t+v&&(D=t+v-G+D-r);break;case "n":H=a[0]-k/2-5;D=a[1]+p;b=E(z);G=G(z);b<J&&(H=J+5);b+k>f&&(H=H-k/2+5);G+r>t+v&&(D=t+v-G+D-r);break;case "s":H=a[0]-k/2;D=a[1]-r-p;b=E(z);G=G(z);b<J&&(H=J+5);b+k>f&&(H=H-k/2+5);t>G&&(D=t);break;case "none":H=a[0],D=a[1]-p,b=E(z),G=G(z)}z.style.left=H+"px";z.style.top=D+"px";z.style.opacity=1;z.style.position="absolute";return z};m.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();m.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};m.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(p){"function"==typeof b&&b(p);a(p)}}};m.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,p){return b.color||a[p%a.length]}:a:m.utils.defaultColor()};m.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
p){return b.color||a[p%a.length]}};m.utils.customTheme=function(a,b,p){b=b||function(a){return a.key};p=p||d3.scale.category20().range();var m=p.length;return function(r,k){var f=b(r);m||(m=p.length);return"undefined"!==typeof a[f]?"function"===typeof a[f]?a[f]():a[f]:p[--m]}};m.utils.pjax=function(a,b){function p(p){d3.html(p,function(p){var k=d3.select(b).node();k.parentNode.replaceChild(d3.select(p).select(b).node(),k);m.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);p(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&p(d3.event.state)})};m.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};m.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};m.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,p){if("function"===
typeof this[a])this[a](p)}.bind(this));return this};m.models.axis=function(){function a(m){m.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var m=a.select("g");null!==E?b.ticks(E):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(k.range()[1]-k.range()[0])/100);m.transition().call(b);P=P||b.scale();var r=b.tickFormat();null==r&&(r=P.tickFormat());var B=m.selectAll("text.nv-axislabel").data([f||
null]);B.exit().remove();switch(b.orient()){case "top":B.enter().append("text").attr("class","nv-axislabel");var S=2==k.range().length?k.range()[1]:k.range()[k.range().length-1]+(k.range()[1]-k.range()[0]);B.attr("text-anchor","middle").attr("y",0).attr("x",S/2);v&&(S=a.selectAll("g.nv-axisMaxMin").data(k.domain()),S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(a,b){return"translate("+k(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),S.transition().attr("transform",function(a,b){return"translate("+k.range()[b]+",0)"}));break;case "bottom":var R=36,y=30,A=m.selectAll("g").select("text");J%360&&(A.each(function(a,b){var f=this.getBBox().width;f>y&&(y=f)}),S=Math.abs(Math.sin(J*Math.PI/180)),R=(S?S*y:y)+30,A.attr("transform",function(a,b,f){return"rotate("+J+" 0,0)"}).style("text-anchor",0<J%360?"start":"end"));B.enter().append("text").attr("class",
"nv-axislabel");S=2==k.range().length?k.range()[1]:k.range()[k.range().length-1]+(k.range()[1]-k.range()[0]);B.attr("text-anchor","middle").attr("y",R).attr("x",S/2);v&&(S=a.selectAll("g.nv-axisMaxMin").data([k.domain()[0],k.domain()[k.domain().length-1]]),S.enter().append("g").attr("class","nv-axisMaxMin").append("text"),S.exit().remove(),S.attr("transform",function(a,b){return"translate("+(k(a)+(G?k.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,f){return"rotate("+J+" 0,0)"}).style("text-anchor",J?0<J%360?"start":"end":"middle").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),S.transition().attr("transform",function(a,b){return"translate("+(k(a)+(G?k.rangeBand()/2:0))+",0)"}));D&&A.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":B.enter().append("text").attr("class","nv-axislabel");B.style("text-anchor",H?"middle":"begin").attr("transform",H?"rotate(90)":"").attr("y",
H?-Math.max(p.right,z)+12:-10).attr("x",H?k.range()[0]/2:b.tickPadding());v&&(S=a.selectAll("g.nv-axisMaxMin").data(k.domain()),S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(a,b){return"translate(0,"+k(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),S.transition().attr("transform",function(a,
b){return"translate(0,"+k.range()[b]+")"}).select("text").style("opacity",1));break;case "left":B.enter().append("text").attr("class","nv-axislabel"),B.style("text-anchor",H?"middle":"end").attr("transform",H?"rotate(-90)":"").attr("y",H?-Math.max(p.left,z)+L:-10).attr("x",H?-k.range()[0]/2:-b.tickPadding()),v&&(S=a.selectAll("g.nv-axisMaxMin").data(k.domain()),S.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),S.exit().remove(),S.attr("transform",function(a,b){return"translate(0,"+
P(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),S.transition().attr("transform",function(a,b){return"translate(0,"+k.range()[b]+")"}).select("text").style("opacity",1))}B.text(function(a){return a});!v||"left"!==b.orient()&&"right"!==b.orient()||(m.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(k(a)<k.range()[1]+10||k(a)>k.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),k.domain()[0]==k.domain()[1]&&0==k.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(v&&("top"===b.orient()||"bottom"===b.orient())){var N=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?N.push(k(a)-this.getBBox().width-4):N.push(k(a)+this.getBBox().width+4)}catch(W){b?N.push(k(a)-4):N.push(k(a)+4)}});m.selectAll("g").each(function(a,b){if(k(a)<N[0]||
k(a)>N[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}t&&m.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);P=k.copy()});return a}var b=d3.svg.axis(),p={top:0,right:0,bottom:0,left:0},z=75,r=60,k=d3.scale.linear(),f=null,v=!0,t=!0,J=0,H=!0,D=!1,G=!1,E=null,L=12;b.scale(k).orient("bottom").tickFormat(function(a){return a});var P;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,k,"domain","range","rangeBand","rangeBands");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return z;z=b;return a};a.ticks=function(b){if(!arguments.length)return E;
E=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.axisLabel=function(b){if(!arguments.length)return f;f=b;return a};a.showMaxMin=function(b){if(!arguments.length)return v;v=b;return a};a.highlightZero=function(b){if(!arguments.length)return t;t=b;return a};a.scale=function(f){if(!arguments.length)return k;k=f;b.scale(k);G="function"===typeof k.rangeBands;d3.rebind(a,k,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return H;
H=b;return a};a.rotateLabels=function(b){if(!arguments.length)return J;J=b;return a};a.staggerLabels=function(b){if(!arguments.length)return D;D=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return L;L=b;return a};return a};m.models.historicalBar=function(){function a(T){T.each(function(a){var T=p-b.left-b.right,y=z-b.top-b.bottom,A=d3.select(this);k.domain(L||d3.extent(a[0].values.map(v).concat(J)));D?k.range(B||[.5*T/a[0].values.length,T*(a[0].values.length-.5)/a[0].values.length]):
k.range(B||[0,T]);f.domain(P||d3.extent(a[0].values.map(t).concat(H))).range(O||[y,0]);k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1]));f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var N=A.selectAll("g.nv-wrap.nv-historicalBar-"+r).data([a[0].values]),w=N.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
r),V=w.append("defs"),w=w.append("g"),W=N.select("g");w.append("g").attr("class","nv-bars");N.attr("transform","translate("+b.left+","+b.top+")");A.on("click",function(a,b){Q.chartClick({data:a,index:b,pos:d3.event,id:r})});V.append("clipPath").attr("id","nv-chart-clip-path-"+r).append("rect");N.select("#nv-chart-clip-path-"+r+" rect").attr("width",T).attr("height",y);W.attr("clip-path",G?"url(#nv-chart-clip-path-"+r+")":"");y=N.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return v(a,b)});y.exit().remove();y.enter().append("rect").attr("x",0).attr("y",function(a,b){return m.utils.NaNtoZero(f(Math.max(0,t(a,b))))}).attr("height",function(a,b){return m.utils.NaNtoZero(Math.abs(f(t(a,b))-f(0)))}).attr("transform",function(b,f){return"translate("+(k(v(b,f))-T/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,p){I&&(d3.select(this).classed("hover",!0),Q.elementMouseover({point:b,series:a[0],pos:[k(v(b,p)),f(t(b,p))],pointIndex:p,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,f){I&&(d3.select(this).classed("hover",!1),Q.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){I&&(Q.elementClick({value:t(a,b),data:a,index:b,pos:[k(v(a,b)),f(t(a,b))],e:d3.event,id:r}),d3.event.stopPropagation())}).on("dblclick",function(a,b){I&&(Q.elementDblClick({value:t(a,b),data:a,index:b,pos:[k(v(a,b)),f(t(a,b))],e:d3.event,id:r}),d3.event.stopPropagation())});y.attr("fill",function(a,b){return E(a,b)}).attr("class",function(a,
b,f){return(0>t(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+f+"-"+b}).transition().attr("transform",function(b,f){return"translate("+(k(v(b,f))-T/a[0].values.length*.45)+",0)"}).attr("width",T/a[0].values.length*.9);y.transition().attr("y",function(a,b){var k=0>t(a,b)?f(0):1>f(0)-f(t(a,b))?f(0)-1:f(t(a,b));return m.utils.NaNtoZero(k)}).attr("height",function(a,b){return m.utils.NaNtoZero(Math.max(Math.abs(f(t(a,b))-f(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,
r=Math.floor(1E4*Math.random()),k=d3.scale.linear(),f=d3.scale.linear(),v=function(a){return a.x},t=function(a){return a.y},J=[],H=[0],D=!1,G=!0,E=m.utils.defaultColor(),L,P,B,O,Q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),I=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+r).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+r).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=Q;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return t;t=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};
a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;return a};a.xDomain=function(b){if(!arguments.length)return L;L=b;return a};a.yDomain=function(b){if(!arguments.length)return P;P=b;return a};a.xRange=function(b){if(!arguments.length)return B;B=b;return a};a.yRange=function(b){if(!arguments.length)return O;O=b;return a};a.forceX=function(b){if(!arguments.length)return J;
J=b;return a};a.forceY=function(b){if(!arguments.length)return H;H=b;return a};a.padData=function(b){if(!arguments.length)return D;D=b;return a};a.clipEdge=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return E;E=m.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return r;r=b;return a};a.interactive=function(b){if(!arguments.length)return I;I=!1;return a};return a};m.models.bullet=function(){function a(p){p.each(function(a,p){var m=
t-b.left-b.right,E=J-b.top-b.bottom,L=d3.select(this),I=r.call(this,a,p).slice().sort(d3.descending),P=k.call(this,a,p).slice().sort(d3.descending),S=f.call(this,a,p).slice().sort(d3.descending),R=(a.rangeLabels?a.rangeLabels:[]).slice(),y=(a.markerLabels?a.markerLabels:[]).slice(),A=(a.measureLabels?a.measureLabels:[]).slice(),N=d3.scale.linear().domain(d3.extent(d3.merge([v,I]))).range(z?[m,0]:[0,m]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(N.range());this.__chart__=N;var m=
d3.min(I),w=d3.max(I),I=I[1],L=L.selectAll("g.nv-wrap.nv-bullet").data([a]),V=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),W=L.select("g");V.append("rect").attr("class","nv-range nv-rangeMax");V.append("rect").attr("class","nv-range nv-rangeAvg");V.append("rect").attr("class","nv-range nv-rangeMin");V.append("rect").attr("class","nv-measure");V.append("path").attr("class","nv-markerTriangle");L.attr("transform","translate("+b.left+","+b.top+")");var V=function(a){return Math.abs(N(a)-
N(0))},Z=function(a){return 0>a?N(a):N(0)};W.select("rect.nv-rangeMax").attr("height",E).attr("width",V(0<w?w:m)).attr("x",Z(0<w?w:m)).datum(0<w?w:m);W.select("rect.nv-rangeAvg").attr("height",E).attr("width",V(I)).attr("x",Z(I)).datum(I);W.select("rect.nv-rangeMin").attr("height",E).attr("width",V(w)).attr("x",Z(w)).attr("width",V(0<w?m:w)).attr("x",Z(0<w?m:w)).datum(0<w?m:w);W.select("rect.nv-measure").style("fill",D).attr("height",E/3).attr("y",E/3).attr("width",0>S?N(0)-N(S[0]):N(S[0])-N(0)).attr("x",
Z(S)).on("mouseover",function(){G.elementMouseover({value:S[0],label:A[0]||"Current",pos:[N(S[0]),E/2]})}).on("mouseout",function(){G.elementMouseout({value:S[0],label:A[0]||"Current"})});m=E/6;if(P[0])W.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+N(P[0])+","+E/2+")"}).attr("d","M0,"+m+"L"+m+","+-m+" "+-m+","+-m+"Z").on("mouseover",function(){G.elementMouseover({value:P[0],label:y[0]||"Previous",pos:[N(P[0]),E/2]})}).on("mouseout",function(){G.elementMouseout({value:P[0],
label:y[0]||"Previous"})});else W.selectAll("path.nv-markerTriangle").remove();L.selectAll(".nv-range").on("mouseover",function(a,b){G.elementMouseover({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[N(a),E/2]})}).on("mouseout",function(a,b){G.elementMouseout({value:a,label:R[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},p="left",z=!1,r=function(a){return a.ranges},k=function(a){return a.markers},f=function(a){return a.measures},v=[0],t=
380,J=30,H=null,D=m.utils.getColor(["#1f77b4"]),G=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=G;a.options=m.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return p;p=b;z="right"==p||"bottom"==p;return a};a.ranges=function(b){if(!arguments.length)return r;r=b;return a};a.markers=function(b){if(!arguments.length)return k;k=b;return a};a.measures=function(b){if(!arguments.length)return f;f=b;return a};a.forceX=function(b){if(!arguments.length)return v;v=b;return a};
a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return J;J=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return D;
D=m.utils.getColor(b);return a};return a};m.models.bulletChart=function(){function a(p){p.each(function(B,P){var O=d3.select(this),I=(t||parseInt(O.style("width"))||960)-r.left-r.right,T=J-r.top-r.bottom,S=this;a.update=function(){a(p)};a.container=this;if(B&&k.call(this,B,P))O.selectAll(".nv-noData").remove();else return O=O.selectAll(".nv-noData").data([E]),O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",r.left+I/2).attr("y",18+
r.top+T/2).text(function(a){return a}),a;var R=k.call(this,B,P).slice().sort(d3.descending),y=f.call(this,B,P).slice().sort(d3.descending),A=v.call(this,B,P).slice().sort(d3.descending),N=O.selectAll("g.nv-wrap.nv-bulletChart").data([B]),w=N.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),O=N.select("g");w.append("g").attr("class","nv-bulletWrap");w.append("g").attr("class","nv-titles");N.attr("transform","translate("+r.left+","+r.top+")");var V=d3.scale.linear().domain([0,
Math.max(R[0],y[0],A[0])]).range(z?[I,0]:[0,I]),W=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(V.range());this.__chart__=V;R=w.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(J-r.top-r.bottom)/2+")");R.append("text").attr("class","nv-title").text(function(a){return a.title});R.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(I).height(T);R=O.select(".nv-bulletWrap");d3.transition(R).call(b);
var Z=H||V.tickFormat(I/100),I=O.selectAll("g.nv-tick").data(V.ticks(I/50),function(a){return this.textContent||Z(a)}),O=I.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+W(a)+",0)"}).style("opacity",1E-6);O.append("line").attr("y1",T).attr("y2",7*T/6);O.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*T/6).text(Z);O=d3.transition(I).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1);O.select("line").attr("y1",
T).attr("y2",7*T/6);O.select("text").attr("y",7*T/6);d3.transition(I.exit()).attr("transform",function(a){return"translate("+V(a)+",0)"}).style("opacity",1E-6).remove();L.on("tooltipShow",function(b){b.key=B.title;if(D){var f=S.parentNode,k=b.pos[0]+(f.offsetLeft||0)+r.left,n=b.pos[1]+(f.offsetTop||0)+r.top,p=G(b.key,b.label,b.value,b,a);m.tooltip.show([k,n],p,0>b.value?"e":"w",null,f)}})});d3.timer.flush();return a}var b=m.models.bullet(),p="left",z=!1,r={top:5,right:40,bottom:20,left:120},k=function(a){return a.ranges},
f=function(a){return a.markers},v=function(a){return a.measures},t=null,J=55,H=null,D=!0,G=function(a,b,f,k,p){return"<h3>"+b+"</h3><p>"+f+"</p>"},E="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){L.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){L.tooltipHide(a)});L.on("tooltipHide",function(){D&&m.tooltip.cleanup()});a.dispatch=L;a.bullet=b;d3.rebind(a,b,"color");a.options=m.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return p;p=b;z="right"==p||"bottom"==p;return a};a.ranges=function(b){if(!arguments.length)return k;k=b;return a};a.markers=function(b){if(!arguments.length)return f;f=b;return a};a.measures=function(b){if(!arguments.length)return v;v=b;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return J;J=b;return a};a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;
r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.tickFormat=function(b){if(!arguments.length)return H;H=b;return a};a.tooltips=function(b){if(!arguments.length)return D;D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return G;G=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};return a};m.models.cumulativeLineChart=function(){function a(n){n.each(function(n){function C(){oa.data([Y]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var M=d3.select(this).classed("nv-chart-"+y,!0),K=this,aa=(H||parseInt(M.style("width"))||960)-t.left-t.right,ea=(D||parseInt(M.style("height"))||400)-t.top-t.bottom;a.update=function(){M.transition().duration(Z).call(a)};a.container=this;A.disabled=n.map(function(a){return!!a.disabled});if(!N){var ha;N={};for(ha in A)N[ha]=A[ha]instanceof Array?A[ha].slice(0):A[ha]}ha=d3.behavior.drag().on("dragstart",function(b,
n){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){Y.x=d3.event.x;Y.i=Math.round(da.invert(Y.x));C()}).on("dragend",function(b,n){d3.select(a.container).style("cursor","auto");A.index=Y.i;W.stateChange(A)});if(n&&n.length&&n.filter(function(a){return a.values.length}).length)M.selectAll(".nv-noData").remove();else return ha=M.selectAll(".nv-noData").data([w]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",
t.left+aa/2).attr("y",t.top+ea/2).text(function(a){return a}),a;S=p.xScale();R=p.yScale();if(I)p.yDomain(null);else{var ga=n.filter(function(a){return!a.disabled}).map(function(a,b){var n=d3.extent(a.values,p.y());-.95>n[0]&&(n[0]=-.95);return[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),ga=[d3.min(ga,function(a){return a[0]}),d3.max(ga,function(a){return a[1]})];p.yDomain(ga)}da.domain([0,n[0].values.length-1]).range([0,aa]).clamp(!0);n=b(Y.i,n);var ca=Q?"none":"all",ma=M.selectAll("g.nv-wrap.nv-cumulativeLine").data([n]),
fa=ma.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ga=ma.select("g");fa.append("g").attr("class","nv-interactive");fa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-background");fa.append("g").attr("class","nv-linesWrap").style("pointer-events",ca);fa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");fa.append("g").attr("class","nv-legendWrap");
fa.append("g").attr("class","nv-controlsWrap");G&&(k.width(aa),ga.select(".nv-legendWrap").datum(n).call(k),t.top!=k.height()&&(t.top=k.height(),ea=(D||parseInt(M.style("height"))||400)-t.top-t.bottom),ga.select(".nv-legendWrap").attr("transform","translate(0,"+-t.top+")"));O&&(ca=[{key:"Re-scale y-axis",disabled:!I}],f.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ga.select(".nv-controlsWrap").datum(ca).attr("transform","translate(0,"+-t.top+")").call(f));
ma.attr("transform","translate("+t.left+","+t.top+")");P&&ga.select(".nv-y.nv-axis").attr("transform","translate("+aa+",0)");ca=n.filter(function(a){return a.tempDisabled});ma.select(".tempDisabled").remove();ca.length&&ma.append("text").attr("class","tempDisabled").attr("x",aa/2).attr("y","-.71em").style("text-anchor","end").text(ca.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");Q&&(v.width(aa).height(ea).margin({left:t.left,top:t.top}).svgContainer(M).xScale(S),
ma.select(".nv-interactive").call(v));fa.select(".nv-background").append("rect");ga.select(".nv-background rect").attr("width",aa).attr("height",ea);p.y(function(a){return a.display.y}).width(aa).height(ea).color(n.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!n[b].disabled&&!n[b].tempDisabled}));ma=ga.select(".nv-linesWrap").datum(n.filter(function(a){return!a.disabled&&!a.tempDisabled}));ma.call(p);n.forEach(function(a,b){a.seriesIndex=b});fa=n.filter(function(a){return!a.disabled&&
!!V(a)});fa=ga.select(".nv-avgLinesWrap").selectAll("line").data(fa,function(a){return a.key});ca=function(a){a=R(V(a));return 0>a?0:a>ea?ea:a};fa.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return p.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",aa).attr("y1",ca).attr("y2",ca);fa.style("stroke-opacity",function(a){a=R(V(a));return 0>a||a>ea?0:1}).attr("x1",0).attr("x2",aa).attr("y1",ca).attr("y2",ca);fa.exit().remove();var oa=ma.selectAll(".nv-indexLine").data([Y]);
oa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ha);oa.attr("transform",function(a){return"translate("+da(a.i)+",0)"}).attr("height",ea);E&&(z.scale(S).ticks(Math.min(n[0].values.length,aa/70)).tickSize(-ea,0),ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),d3.transition(ga.select(".nv-x.nv-axis")).call(z));L&&(r.scale(R).ticks(ea/36).tickSize(-aa,0),d3.transition(ga.select(".nv-y.nv-axis")).call(r));
ga.select(".nv-background rect").on("click",function(){Y.x=d3.mouse(this)[0];Y.i=Math.round(da.invert(Y.x));A.index=Y.i;W.stateChange(A);C()});p.dispatch.on("elementClick",function(a){Y.i=a.pointIndex;Y.x=da(Y.i);A.index=Y.i;W.stateChange(A);C()});f.dispatch.on("legendClick",function(b,n){b.disabled=!b.disabled;I=!b.disabled;A.rescaleY=I;W.stateChange(A);a.update()});k.dispatch.on("stateChange",function(b){A.disabled=b.disabled;W.stateChange(A);a.update()});v.dispatch.on("elementMousemove",function(b){p.clearHighlights();
var f,k,w,C=[];n.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(n,r){k=m.interactiveBisect(n.values,b.pointXValue,a.x());p.highlightPoint(r,k,!0);var y=n.values[k];"undefined"!==typeof y&&("undefined"===typeof f&&(f=y),"undefined"===typeof w&&(w=a.xScale()(a.x()(y,k))),C.push({key:n.key,value:a.y()(y,k),color:J(n,n.seriesIndex)}))});if(2<C.length){var y=a.yScale().invert(b.mouseY),A=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),y=m.nearestValueIndex(C.map(function(a){return a.value}),
y,A);null!==y&&(C[y].highlight=!0)}y=z.tickFormat()(a.x()(f,k),k);v.tooltip.position({left:w+t.left,top:b.mouseY+t.top}).chartContainer(K.parentNode).enabled(B).valueFormatter(function(a,b){return r.tickFormat()(a)}).data({value:y,series:C})();v.renderGuideLine(w)});v.dispatch.on("elementMouseout",function(a){W.tooltipHide();p.clearHighlights()});W.on("tooltipShow",function(b){if(B){var n=K.parentNode,f=b.pos[0]+(n.offsetLeft||0),k=b.pos[1]+(n.offsetTop||0),w=z.tickFormat()(p.x()(b.point,b.pointIndex)),
C=r.tickFormat()(p.y()(b.point,b.pointIndex));b=T(b.series.key,w,C,b,a);m.tooltip.show([f,k],b,null,null,n)}});W.on("changeState",function(b){"undefined"!==typeof b.disabled&&(n.forEach(function(a,n){a.disabled=b.disabled[n]}),A.disabled=b.disabled);"undefined"!==typeof b.index&&(Y.i=b.index,Y.x=da(Y.i),A.index=b.index,oa.data([Y]));"undefined"!==typeof b.rescaleY&&(I=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,n){if(!b.values)return b;var f=b.values[a];if(null==f)return b;
var k=p.y()(f,a);if(-.95>k&&!M)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(p.y()(a,b)-k)/(1+k)};return a});return b})}var p=m.models.line(),z=m.models.axis(),r=m.models.axis(),k=m.models.legend(),f=m.models.legend(),v=m.interactiveGuideline(),t={top:30,right:30,bottom:50,left:60},J=m.utils.defaultColor(),H=null,D=null,G=!0,E=!0,L=!0,P=!1,B=!0,O=!0,Q=!1,I=!0,T=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},S,R,y=p.id(),A={index:0,
rescaleY:I},N=null,w="No Data Available.",V=function(a){return a.average},W=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),Z=250,M=!1;z.orient("bottom").tickPadding(7);r.orient(P?"right":"left");f.updateState(!1);var da=d3.scale.linear(),Y={i:0,x:0};p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];W.tooltipShow(a)});p.dispatch.on("elementMouseout.tooltip",function(a){W.tooltipHide(a)});W.on("tooltipHide",function(){B&&m.tooltip.cleanup()});
a.dispatch=W;a.lines=p;a.legend=k;a.xAxis=z;a.yAxis=r;a.interactiveLayer=v;d3.rebind(a,p,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left=
"undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return H;H=b;return a};a.height=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return J;J=m.utils.getColor(b);k.color(J);return a};a.rescaleY=function(b){if(!arguments.length)return I;I=b;return a};a.showControls=function(b){if(!arguments.length)return O;O=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return Q;Q=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return G;G=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return L;L=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return P;P=b;r.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return B;B=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return A;
A=b;return a};a.defaultState=function(b){if(!arguments.length)return N;N=b;return a};a.noData=function(b){if(!arguments.length)return w;w=b;return a};a.average=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Z;Z=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return M;M=b;return a};return a};m.models.discreteBar=function(){function a(m){m.each(function(a){var m=p-b.left-b.right,r=z-b.top-b.bottom,A=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var N=E&&L?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:t(a,b),y0:a.y0}})});k.domain(E||d3.merge(N).map(function(a){return a.x})).rangeBands(P||[0,m],.1);f.domain(L||d3.extent(d3.merge(N).map(function(a){return a.y}).concat(J)));D?f.range(B||[r-(0>f.domain()[0]?12:0),0<f.domain()[1]?12:0]):f.range(B||[r,0]);I=I||f.copy().range([f(0),f(0)]);m=A.selectAll("g.nv-wrap.nv-discretebar").data([a]);r=m.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");m.select("g");r.append("g").attr("class","nv-groups");m.attr("transform","translate("+b.left+","+b.top+")");m=m.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});m.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);m.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();m.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
m.transition().style("stroke-opacity",1).style("fill-opacity",.75);m=m.selectAll("g.nv-bar").data(function(a){return a.values});m.exit().remove();r=m.enter().append("g").attr("transform",function(a,b,p){return"translate("+(k(v(a,b))+.05*k.rangeBand())+", "+f(0)+")"}).on("mouseover",function(b,p){d3.select(this).classed("hover",!0);O.elementMouseover({value:t(b,p),point:b,series:a[b.series],pos:[k(v(b,p))+k.rangeBand()*(b.series+.5)/a.length,f(t(b,p))],pointIndex:p,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,f){d3.select(this).classed("hover",!1);O.elementMouseout({value:t(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,p){O.elementClick({value:t(b,p),point:b,series:a[b.series],pos:[k(v(b,p))+k.rangeBand()*(b.series+.5)/a.length,f(t(b,p))],pointIndex:p,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,p){O.elementDblClick({value:t(b,p),point:b,series:a[b.series],pos:[k(v(b,p))+k.rangeBand()*(b.series+
.5)/a.length,f(t(b,p))],pointIndex:p,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});r.append("rect").attr("height",0).attr("width",.9*k.rangeBand()/a.length);D?(r.append("text").attr("text-anchor","middle"),m.select("text").text(function(a,b){return G(t(a,b))}).transition().attr("x",.9*k.rangeBand()/2).attr("y",function(a,b){return 0>t(a,b)?f(t(a,b))-f(0)+12:-4})):m.selectAll("text").remove();m.attr("class",function(a,b){return 0>t(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||H(a,b)}).style("stroke",function(a,b){return a.color||H(a,b)}).select("rect").attr("class",Q).transition().attr("width",.9*k.rangeBand()/a.length);m.transition().attr("transform",function(a,b){var p=k(v(a,b))+.05*k.rangeBand(),m=0>t(a,b)?f(0):1>f(0)-f(t(a,b))?f(0)-1:f(t(a,b));return"translate("+p+", "+m+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(f(t(a,b))-f(L&&L[0]||0))||1)});k.copy();I=f.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},p=960,z=500,r=Math.floor(1E4*Math.random()),k=d3.scale.ordinal(),f=d3.scale.linear(),v=function(a){return a.x},t=function(a){return a.y},J=[0],H=m.utils.defaultColor(),D=!1,G=d3.format(",.2f"),E,L,P,B,O=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),Q="discreteBar",I;a.dispatch=O;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return t;t=b;return a};a.margin=
function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;
return a};a.xDomain=function(b){if(!arguments.length)return E;E=b;return a};a.yDomain=function(b){if(!arguments.length)return L;L=b;return a};a.xRange=function(b){if(!arguments.length)return P;P=b;return a};a.yRange=function(b){if(!arguments.length)return B;B=b;return a};a.forceY=function(b){if(!arguments.length)return J;J=b;return a};a.color=function(b){if(!arguments.length)return H;H=m.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return r;r=b;return a};a.showValues=function(b){if(!arguments.length)return D;
D=b;return a};a.valueFormat=function(b){if(!arguments.length)return G;G=b;return a};a.rectClass=function(b){if(!arguments.length)return Q;Q=b;return a};return a};m.models.discreteBarChart=function(){function a(v){v.each(function(v){var I=d3.select(this),R=this,y=(k||parseInt(I.style("width"))||960)-r.left-r.right,A=(f||parseInt(I.style("height"))||400)-r.top-r.bottom;a.update=function(){O.beforeUpdate();I.transition().duration(Q).call(a)};a.container=this;if(v&&v.length&&v.filter(function(a){return a.values.length}).length)I.selectAll(".nv-noData").remove();
else return v=I.selectAll(".nv-noData").data([B]),v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",r.left+y/2).attr("y",r.top+A/2).text(function(a){return a}),a;L=b.xScale();P=b.yScale().clamp(!0);var N=I.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([v]),w=N.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),V=w.append("defs"),N=N.select("g");w.append("g").attr("class","nv-x nv-axis");w.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");w.append("g").attr("class","nv-barsWrap");N.attr("transform","translate("+r.left+","+r.top+")");H&&N.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");b.width(y).height(A);N.select(".nv-barsWrap").datum(v.filter(function(a){return!a.disabled})).transition().call(b);V.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");N.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",L.rangeBand()*(D?2:1)).attr("height",
16).attr("x",-L.rangeBand()/(D?1:2));t&&(p.scale(L).ticks(y/100).tickSize(-A,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+(P.range()[0]+(b.showValues()&&0>P.domain()[0]?16:0))+")"),N.select(".nv-x.nv-axis").transition().call(p),v=N.select(".nv-x.nv-axis").selectAll("g"),D&&v.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?"5":"17")+")"}));J&&(z.scale(P).ticks(A/36).tickSize(-y,0),N.select(".nv-y.nv-axis").transition().call(z));N.select(".nv-zeroLine line").attr("x1",
0).attr("x2",y).attr("y1",P(0)).attr("y2",P(0));O.on("tooltipShow",function(f){if(G){var k=R.parentNode,r=f.pos[0]+(k.offsetLeft||0),w=f.pos[1]+(k.offsetTop||0),y=p.tickFormat()(b.x()(f.point,f.pointIndex)),n=z.tickFormat()(b.y()(f.point,f.pointIndex)),y=E(f.series.key,y,n,f,a);m.tooltip.show([r,w],y,0>f.value?"n":"s",null,k)}})});return a}var b=m.models.discreteBar(),p=m.models.axis(),z=m.models.axis(),r={top:15,right:10,bottom:50,left:60},k=null,f=null,v=m.utils.getColor(),t=!0,J=!0,H=!1,D=!1,G=
!0,E=function(a,b,f,k,p){return"<h3>"+b+"</h3><p>"+f+"</p>"},L,P,B="No Data Available.",O=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),Q=250;p.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});z.orient(H?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+r.left,a.pos[1]+r.top];O.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){G&&
m.tooltip.cleanup()});a.dispatch=O;a.discretebar=b;a.xAxis=p;a.yAxis=z;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return r;r.top="undefined"!=typeof b.top?b.top:r.top;r.right="undefined"!=typeof b.right?b.right:r.right;r.bottom="undefined"!=typeof b.bottom?b.bottom:r.bottom;r.left="undefined"!=typeof b.left?b.left:r.left;return a};a.width=function(b){if(!arguments.length)return k;
k=b;return a};a.height=function(b){if(!arguments.length)return f;f=b;return a};a.color=function(f){if(!arguments.length)return v;v=m.utils.getColor(f);b.color(v);return a};a.showXAxis=function(b){if(!arguments.length)return t;t=b;return a};a.showYAxis=function(b){if(!arguments.length)return J;J=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return H;H=b;z.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return D;D=b;return a};a.tooltips=function(b){if(!arguments.length)return G;
G=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return B;B=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Q;Q=b;return a};return a};m.models.distribution=function(){function a(p){p.each(function(a){var p="x"==r?"y":"x",m=d3.select(this);t=t||v;a=m.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");m=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=m.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return f(a,b)});m=a.selectAll("line.nv-dist"+r).data(function(a){return a.values});m.enter().append("line").attr(r+"1",function(a,b){return t(k(a,b))}).attr(r+"2",function(a,b){return t(k(a,b))});a.exit().selectAll("line.nv-dist"+r).transition().attr(r+"1",function(a,b){return v(k(a,
b))}).attr(r+"2",function(a,b){return v(k(a,b))}).style("stroke-opacity",0).remove();m.attr("class",function(a,b){return"nv-dist"+r+" nv-dist"+r+"-"+b}).attr(p+"1",0).attr(p+"2",z);m.transition().attr(r+"1",function(a,b){return v(k(a,b))}).attr(r+"2",function(a,b){return v(k(a,b))});t=v.copy()});return a}var b={top:0,right:0,bottom:0,left:0},p=400,z=8,r="x",k=function(a){return a[r]},f=m.utils.defaultColor(),v=d3.scale.linear(),t;a.options=m.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.axis=function(b){if(!arguments.length)return r;r=b;return a};a.size=function(b){if(!arguments.length)return z;z=b;return a};a.getData=function(b){if(!arguments.length)return k;k=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return v;
v=b;return a};a.color=function(b){if(!arguments.length)return f;f=m.utils.getColor(b);return a};return a};m.models.historicalBarChart=function(){function a(R){R.each(function(y){var A=d3.select(this),N=this,w=(v||parseInt(A.style("width"))||960)-k.left-k.right,V=(t||parseInt(A.style("height"))||400)-k.top-k.bottom;a.update=function(){A.transition().duration(S).call(a)};a.container=this;O.disabled=y.map(function(a){return!!a.disabled});if(!Q){var W;Q={};for(W in O)Q[W]=O[W]instanceof Array?O[W].slice(0):
O[W]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return W=A.selectAll(".nv-noData").data([I]),W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),W.attr("x",k.left+w/2).attr("y",k.top+V/2).text(function(a){return a}),a;P=b.xScale();B=b.yScale();var Z=A.selectAll("g.nv-wrap.nv-historicalBarChart").data([y]);W=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var M=Z.select("g");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-legendWrap");J&&(r.width(w),M.select(".nv-legendWrap").datum(y).call(r),k.top!=r.height()&&(k.top=r.height(),V=(t||parseInt(A.style("height"))||400)-k.top-k.bottom),Z.select(".nv-legendWrap").attr("transform","translate(0,"+-k.top+")"));Z.attr("transform","translate("+k.left+","+k.top+")");G&&M.select(".nv-y.nv-axis").attr("transform",
"translate("+w+",0)");b.width(w).height(V).color(y.map(function(a,b){return a.color||f(a,b)}).filter(function(a,b){return!y[b].disabled}));M.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);H&&(p.scale(P).tickSize(-V,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")"),M.select(".nv-x.nv-axis").transition().call(p));D&&(z.scale(B).ticks(V/36).tickSize(-w,0),M.select(".nv-y.nv-axis").transition().call(z));r.dispatch.on("legendClick",
function(b,f){b.disabled=!b.disabled;y.filter(function(a){return!a.disabled}).length||y.map(function(a){a.disabled=!1;Z.selectAll(".nv-series").classed("disabled",!1);return a});O.disabled=y.map(function(a){return!!a.disabled});T.stateChange(O);R.transition().call(a)});r.dispatch.on("legendDblclick",function(b){y.forEach(function(a){a.disabled=!0});b.disabled=!1;O.disabled=y.map(function(a){return!!a.disabled});T.stateChange(O);a.update()});T.on("tooltipShow",function(f){if(E){var k=N.parentNode;
if(k){var n=d3.select(k).select("svg"),C=n.node()?n.attr("viewBox"):null;C&&(C=C.split(" "),n=parseInt(n.style("width"))/C[2],f.pos[0]*=n,f.pos[1]*=n)}var n=f.pos[0]+(k.offsetLeft||0),C=f.pos[1]+(k.offsetTop||0),r=p.tickFormat()(b.x()(f.point,f.pointIndex)),w=z.tickFormat()(b.y()(f.point,f.pointIndex));f=L(f.series.key,r,w,f,a);m.tooltip.show([n,C],f,null,null,k)}});T.on("changeState",function(b){"undefined"!==typeof b.disabled&&(y.forEach(function(a,n){a.disabled=b.disabled[n]}),O.disabled=b.disabled);
a.update()})});return a}var b=m.models.historicalBar(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k={top:30,right:90,bottom:50,left:90},f=m.utils.defaultColor(),v=null,t=null,J=!1,H=!0,D=!0,G=!1,E=!0,L=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},P,B,O={},Q=null,I="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=250;p.orient("bottom").tickPadding(7);z.orient(G?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+k.left,a.pos[1]+k.top];T.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){T.tooltipHide(a)});T.on("tooltipHide",function(){E&&m.tooltip.cleanup()});a.dispatch=T;a.bars=b;a.legend=r;a.xAxis=p;a.yAxis=z;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=m.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return k;k.top="undefined"!=typeof b.top?b.top:k.top;k.right="undefined"!=typeof b.right?b.right:k.right;k.bottom="undefined"!=typeof b.bottom?b.bottom:k.bottom;k.left="undefined"!=typeof b.left?b.left:k.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return f;f=m.utils.getColor(b);r.color(f);return a};a.showLegend=function(b){if(!arguments.length)return J;
J=b;return a};a.showXAxis=function(b){if(!arguments.length)return H;H=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return G;G=b;z.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return L;L=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return Q;
Q=b;return a};a.noData=function(b){if(!arguments.length)return I;I=b;return a};a.transitionDuration=function(b){if(!arguments.length)return S;S=b;return a};return a};m.models.indentedTree=function(){function a(b){b.each(function(b){function k(b,f,p){d3.event.stopPropagation();if(d3.event.shiftKey&&!p)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&k(a,0,!0)}),!0;if(!r(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function p(a){return a._values&&a._values.length?D:a.values&&a.values.length?G:""}function m(a){return a._values&&a._values.length}function r(a){return(a=a.values||a._values)&&a.length}var B=1,y=d3.select(this),A=d3.layout.tree().children(function(a){return a.values}).size([z,20]);a.update=function(){y.transition().duration(600).call(a)};b[0]||(b[0]={key:t});var B=A.nodes(b[0]),N=d3.select(this).selectAll("div").data([[B]]);b=N.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
N=N.select("table").attr("width","100%").attr("class",H);if(f){var w=b.append("thead").append("tr");J.forEach(function(a){w.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=N.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");B=d3.max(B,function(a){return a.depth});A.size([z,20*B]);var V=b.selectAll("tr").data(function(a){return a.filter(function(a){return v&&!a.children?v(a):!0})},function(a,
b){return a.id||a.id||++P});V.exit().remove();V.select("img.nv-treeicon").attr("src",p).classed("folded",m);var W=V.enter().append("tr");J.forEach(function(a,b){var f=W.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(p(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)f.append("img").classed("nv-treeicon",!0).classed("nv-folded",m).attr("src",p).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return p(a)?
"inline-block":"none"}).on("click",k);f.each(function(f){!b&&L(f)?d3.select(this).append("a").attr("href",L).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(f.append("span").attr("class","nv-childrenCount"),V.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return v?v(a):!0}).length||a._values&&a._values.filter(function(a){return v?v(a):!0}).length||0)+")":""}))});V.order().on("click",function(a){E.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){E.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){E.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){E.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=m.utils.defaultColor(),k=Math.floor(1E4*Math.random()),f=!0,v=!1,t="No Data Available.",J=[{key:"key",label:"Name",type:"text"}],H=null,D="images/grey-plus.png",G="images/grey-minus.png",E=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),L=function(a){return a.url},P=0;a.options=m.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.color=function(b){if(!arguments.length)return r;r=m.utils.getColor(b);scatter.color(r);return a};a.id=function(b){if(!arguments.length)return k;k=b;return a};a.header=function(b){if(!arguments.length)return f;f=b;return a};a.noData=
function(b){if(!arguments.length)return t;t=b;return a};a.filterZero=function(b){if(!arguments.length)return v;v=b;return a};a.columns=function(b){if(!arguments.length)return J;J=b;return a};a.tableClass=function(b){if(!arguments.length)return H;H=b;return a};a.iconOpen=function(b){if(!arguments.length)return D;D=b;return a};a.iconClose=function(b){if(!arguments.length)return G;G=b;return a};a.getUrl=function(b){if(!arguments.length)return L;L=b;return a};return a};m.models.legend=function(){function a(D){D.each(function(a){var D=
p-b.left-b.right,L=d3.select(this).selectAll("g.nv-legend").data([a]);L.enter().append("g").attr("class","nvd3 nv-legend").append("g");var G=L.select("g");L.attr("transform","translate("+b.left+","+b.top+")");var L=G.selectAll(".nv-series").data(function(a){return a}),B=L.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){H.legendMouseover(a,b)}).on("mouseout",function(a,b){H.legendMouseout(a,b)}).on("click",function(b,f){H.legendClick(b,f);t&&(J?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),H.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,f){H.legendDblclick(b,f);t&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,H.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});B.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);B.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");L.classed("disabled",function(a){return a.disabled});L.exit().remove();L.select("circle").style("fill",function(a,b){return a.color||k(a,b)}).style("stroke",function(a,b){return a.color||k(a,b)});L.select("text").text(r);if(f){var O=[];L.each(function(a,b){var f=d3.select(this).select("text"),k;try{if(k=f.getComputedTextLength(),0>=k)throw Error();}catch(M){k=m.utils.calcApproxTextWidth(f)}O.push(k+28)});for(var Q=0,I=0,B=[];I<D&&Q<O.length;)B[Q]=
O[Q],I+=O[Q++];for(0===Q&&(Q=1);I>D&&1<Q;){B=[];Q--;for(I=0;I<O.length;I++)O[I]>(B[I%Q]||0)&&(B[I%Q]=O[I]);I=B.reduce(function(a,b,f,k){return a+b})}for(var T=[],S=D=0;D<Q;D++)T[D]=S,S+=B[D];L.attr("transform",function(a,b){return"translate("+T[b%Q]+","+(5+20*Math.floor(b/Q))+")"});v?G.attr("transform","translate("+(p-b.right-I)+","+b.top+")"):G.attr("transform","translate(0,"+b.top+")");z=b.top+b.bottom+20*Math.ceil(O.length/Q)}else{var R=5,y=5,A=0,N;L.attr("transform",function(a,f){var k=d3.select(this).select("text").node().getComputedTextLength()+
28;N=y;p<b.left+b.right+N+k&&(y=N=5,R+=20);y+=k;y>A&&(A=y);return"translate("+N+","+R+")"});G.attr("transform","translate("+(p-b.right-A)+","+b.top+")");z=b.top+b.bottom+R+15}});return a}var b={top:5,right:0,bottom:5,left:0},p=400,z=20,r=function(a){return a.key},k=m.utils.defaultColor(),f=!0,v=!0,t=!0,J=!1,H=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=H;a.options=m.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.key=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return k;k=m.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return f;
f=b;return a};a.rightAlign=function(b){if(!arguments.length)return v;v=b;return a};a.updateState=function(b){if(!arguments.length)return t;t=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return J;J=b;return a};return a};m.models.line=function(){function a(B){B.each(function(a){var B=z-p.left-p.right,I=r-p.top-p.bottom,O=d3.select(this);D=b.xScale();G=b.yScale();L=L||D;P=P||G;a=O.selectAll("g.nv-wrap.nv-line").data([a]);var S=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
O=S.append("defs"),R=S.append("g"),S=a.select("g");R.append("g").attr("class","nv-groups");R.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+p.left+","+p.top+")");b.width(B).height(I);R=a.select(".nv-scatterWrap");R.transition().call(b);O.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",B).attr("height",0<I?I:0);S.attr("clip-path",H?"url(#nv-edge-clip-"+b.id()+")":"");R.attr("clip-path",H?"url(#nv-edge-clip-"+
b.id()+")":"");B=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});B.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);B.exit().remove();B.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return k(a,b)}).style("stroke",function(a,b){return k(a,b)});B.transition().style("stroke-opacity",1).style("fill-opacity",.5);I=B.selectAll("path.nv-area").data(function(a){return J(a)?
[a]:[]});I.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(t).x(function(a,b){return m.utils.NaNtoZero(L(f(a,b)))}).y0(function(a,b){return m.utils.NaNtoZero(P(v(a,b)))}).y1(function(a,b){return P(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});B.exit().selectAll("path.nv-area").remove();I.transition().attr("d",function(a){return d3.svg.area().interpolate(E).defined(t).x(function(a,b){return m.utils.NaNtoZero(D(f(a,
b)))}).y0(function(a,b){return m.utils.NaNtoZero(G(v(a,b)))}).y1(function(a,b){return G(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});B=B.selectAll("path.nv-line").data(function(a){return[a.values]});B.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(t).x(function(a,b){return m.utils.NaNtoZero(L(f(a,b)))}).y(function(a,b){return m.utils.NaNtoZero(P(v(a,b)))}));B.transition().attr("d",d3.svg.line().interpolate(E).defined(t).x(function(a,
b){return m.utils.NaNtoZero(D(f(a,b)))}).y(function(a,b){return m.utils.NaNtoZero(G(v(a,b)))}));L=D.copy();P=G.copy()});return a}var b=m.models.scatter(),p={top:0,right:0,bottom:0,left:0},z=960,r=500,k=m.utils.defaultColor(),f=function(a){return a.x},v=function(a){return a.y},t=function(a,b){return!isNaN(v(a,b))&&null!==v(a,b)},J=function(a){return a.area},H=!1,D,G,E="linear";b.size(16).sizeDomain([16,256]);var L,P;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return z;
z=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.x=function(k){if(!arguments.length)return f;f=k;b.x(k);return a};a.y=function(f){if(!arguments.length)return v;v=f;b.y(f);return a};a.clipEdge=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(f){if(!arguments.length)return k;k=m.utils.getColor(f);b.color(k);return a};a.interpolate=function(b){if(!arguments.length)return E;E=b;return a};a.defined=function(b){if(!arguments.length)return t;t=b;return a};
a.isArea=function(b){if(!arguments.length)return J;J=d3.functor(b);return a};return a};m.models.lineChart=function(){function a(A){A.each(function(A){var w=d3.select(this),N=this,W=(t||parseInt(w.style("width"))||960)-f.left-f.right,Z=(J||parseInt(w.style("height"))||400)-f.top-f.bottom;a.update=function(){w.transition().duration(y).call(a)};a.container=this;I.disabled=A.map(function(a){return!!a.disabled});if(!T){var M;T={};for(M in I)T[M]=I[M]instanceof Array?I[M].slice(0):I[M]}if(A&&A.length&&
A.filter(function(a){return a.values.length}).length)w.selectAll(".nv-noData").remove();else return M=w.selectAll(".nv-noData").data([S]),M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",f.left+W/2).attr("y",f.top+Z/2).text(function(a){return a}),a;O=b.xScale();Q=b.yScale();M=w.selectAll("g.nv-wrap.nv-lineChart").data([A]);var da=M.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),Y=M.select("g");da.append("rect").style("opacity",
0);da.append("g").attr("class","nv-x nv-axis");da.append("g").attr("class","nv-y nv-axis");da.append("g").attr("class","nv-linesWrap");da.append("g").attr("class","nv-legendWrap");da.append("g").attr("class","nv-interactive");Y.select("rect").attr("width",W).attr("height",0<Z?Z:0);H&&(r.width(W),Y.select(".nv-legendWrap").datum(A).call(r),f.top!=r.height()&&(f.top=r.height(),Z=(J||parseInt(w.style("height"))||400)-f.top-f.bottom),M.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"));
M.attr("transform","translate("+f.left+","+f.top+")");E&&Y.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)");L&&(k.width(W).height(Z).margin({left:f.left,top:f.top}).svgContainer(w).xScale(O),M.select(".nv-interactive").call(k));b.width(W).height(Z).color(A.map(function(a,b){return a.color||v(a,b)}).filter(function(a,b){return!A[b].disabled}));Y.select(".nv-linesWrap").datum(A.filter(function(a){return!a.disabled})).transition().call(b);D&&(p.scale(O).ticks(W/100).tickSize(-Z,0),Y.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+Q.range()[0]+")"),Y.select(".nv-x.nv-axis").transition().call(p));G&&(z.scale(Q).ticks(Z/36).tickSize(-W,0),Y.select(".nv-y.nv-axis").transition().call(z));r.dispatch.on("stateChange",function(b){I=b;R.stateChange(I);a.update()});k.dispatch.on("elementMousemove",function(n){b.clearHighlights();var C,r,w,y=[];A.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(f,k){r=m.interactiveBisect(f.values,n.pointXValue,a.x());b.highlightPoint(k,r,!0);var p=f.values[r];
"undefined"!==typeof p&&("undefined"===typeof C&&(C=p),"undefined"===typeof w&&(w=a.xScale()(a.x()(p,r))),y.push({key:f.key,value:a.y()(p,r),color:v(f,f.seriesIndex)}))});if(2<y.length){var t=a.yScale().invert(n.mouseY),M=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),t=m.nearestValueIndex(y.map(function(a){return a.value}),t,M);null!==t&&(y[t].highlight=!0)}t=p.tickFormat()(a.x()(C,r));k.tooltip.position({left:w+f.left,top:n.mouseY+f.top}).chartContainer(N.parentNode).enabled(P).valueFormatter(function(a,
b){return z.tickFormat()(a)}).data({value:t,series:y})();k.renderGuideLine(w)});k.dispatch.on("elementMouseout",function(a){R.tooltipHide();b.clearHighlights()});R.on("tooltipShow",function(f){if(P){var n=N.parentNode,k=f.pos[0]+(n.offsetLeft||0),r=f.pos[1]+(n.offsetTop||0),w=p.tickFormat()(b.x()(f.point,f.pointIndex)),y=z.tickFormat()(b.y()(f.point,f.pointIndex));f=B(f.series.key,w,y,f,a);m.tooltip.show([k,r],f,null,null,n)}});R.on("changeState",function(b){"undefined"!==typeof b.disabled&&A.length===
b.disabled.length&&(A.forEach(function(a,f){a.disabled=b.disabled[f]}),I.disabled=b.disabled);a.update()})});return a}var b=m.models.line(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k=m.interactiveGuideline(),f={top:30,right:20,bottom:50,left:60},v=m.utils.defaultColor(),t=null,J=null,H=!0,D=!0,G=!0,E=!1,L=!1,P=!0,B=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},O,Q,I={},T=null,S="No Data Available.",R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
y=250;p.orient("bottom").tickPadding(7);z.orient(E?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){P&&m.tooltip.cleanup()});a.dispatch=R;a.lines=b;a.legend=r;a.xAxis=p;a.yAxis=z;a.interactiveLayer=k;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return f;f.top="undefined"!=typeof b.top?b.top:f.top;f.right="undefined"!=typeof b.right?b.right:f.right;f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom;f.left="undefined"!=typeof b.left?b.left:f.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return J;J=b;return a};a.color=
function(b){if(!arguments.length)return v;v=m.utils.getColor(b);r.color(v);return a};a.showLegend=function(b){if(!arguments.length)return H;H=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return G;G=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return E;E=b;z.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return L;L=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return P;P=b;return a};a.tooltipContent=function(b){if(!arguments.length)return B;B=b;return a};a.state=function(b){if(!arguments.length)return I;I=b;return a};a.defaultState=function(b){if(!arguments.length)return T;T=b;return a};a.noData=function(b){if(!arguments.length)return S;S=b;return a};a.transitionDuration=function(b){if(!arguments.length)return y;y=b;return a};return a};m.models.linePlusBarChart=function(){function a(y){y.each(function(y){var A=
d3.select(this),w=this,V=(t||parseInt(A.style("width"))||960)-v.left-v.right,D=(J||parseInt(A.style("height"))||400)-v.top-v.bottom;a.update=function(){A.transition().call(a)};I.disabled=y.map(function(a){return!!a.disabled});if(!T){var H;T={};for(H in I)T[H]=I[H]instanceof Array?I[H].slice(0):I[H]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return H=A.selectAll(".nv-noData").data([S]),H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),H.attr("x",v.left+V/2).attr("y",v.top+D/2).text(function(a){return a}),a;H=y.filter(function(a){return!a.disabled&&a.bar});var M=y.filter(function(a){return!a.bar});B=M.filter(function(a){return!a.disabled}).length&&M.filter(function(a){return!a.disabled})[0].values.length?b.xScale():p.xScale();O=p.yScale();Q=b.yScale();var da=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([y]),Y=da.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
n=da.select("g");Y.append("g").attr("class","nv-x nv-axis");Y.append("g").attr("class","nv-y1 nv-axis");Y.append("g").attr("class","nv-y2 nv-axis");Y.append("g").attr("class","nv-barsWrap");Y.append("g").attr("class","nv-linesWrap");Y.append("g").attr("class","nv-legendWrap");E&&(f.width(V/2),n.select(".nv-legendWrap").datum(y.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(f),v.top!=f.height()&&(v.top=
f.height(),D=(J||parseInt(A.style("height"))||400)-v.top-v.bottom),n.select(".nv-legendWrap").attr("transform","translate("+V/2+","+-v.top+")"));da.attr("transform","translate("+v.left+","+v.top+")");b.width(V).height(D).color(y.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!y[b].disabled&&!y[b].bar}));p.width(V).height(D).color(y.map(function(a,b){return a.color||G(a,b)}).filter(function(a,b){return!y[b].disabled&&y[b].bar}));da=n.select(".nv-barsWrap").datum(H.length?H:[{values:[]}]);
Y=n.select(".nv-linesWrap").datum(M[0]&&!M[0].disabled?M:[{values:[]}]);d3.transition(da).call(p);d3.transition(Y).call(b);z.scale(B).ticks(V/100).tickSize(-D,0);n.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")");d3.transition(n.select(".nv-x.nv-axis")).call(z);r.scale(O).ticks(D/36).tickSize(-V,0);d3.transition(n.select(".nv-y1.nv-axis")).style("opacity",H.length?1:0).call(r);k.scale(Q).ticks(D/36).tickSize(H.length?0:-V,0);n.select(".nv-y2.nv-axis").style("opacity",M.length?
1:0).attr("transform","translate("+V+",0)");d3.transition(n.select(".nv-y2.nv-axis")).call(k);f.dispatch.on("stateChange",function(b){I=b;R.stateChange(I);a.update()});R.on("tooltipShow",function(f){if(L){var n=w.parentNode,p=f.pos[0]+(n.offsetLeft||0),y=f.pos[1]+(n.offsetTop||0),C=z.tickFormat()(b.x()(f.point,f.pointIndex)),t=(f.series.bar?r:k).tickFormat()(b.y()(f.point,f.pointIndex)),C=P(f.series.key,C,t,f,a);m.tooltip.show([p,y],C,0>f.value?"n":"s",null,n)}});R.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(y.forEach(function(a,f){a.disabled=b.disabled[f]}),I.disabled=b.disabled);a.update()})});return a}var b=m.models.line(),p=m.models.historicalBar(),z=m.models.axis(),r=m.models.axis(),k=m.models.axis(),f=m.models.legend(),v={top:30,right:60,bottom:50,left:60},t=null,J=null,H=function(a){return a.x},D=function(a){return a.y},G=m.utils.defaultColor(),E=!0,L=!0,P=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},B,O,Q,I={},T=null,S="No Data Available.",R=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");p.padData(!0);b.clipEdge(!1).padData(!0);z.orient("bottom").tickPadding(7).highlightZero(!1);r.orient("left");k.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];R.tooltipShow(a)});p.dispatch.on("elementMouseout.tooltip",
function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){L&&m.tooltip.cleanup()});a.dispatch=R;a.legend=f;a.lines=b;a.bars=p;a.xAxis=z;a.y1Axis=r;a.y2Axis=k;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=m.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return H;H=f;b.x(f);p.x(f);return a};a.y=function(f){if(!arguments.length)return D;D=f;b.y(f);p.y(f);return a};a.margin=function(b){if(!arguments.length)return v;v.top="undefined"!=typeof b.top?b.top:v.top;
v.right="undefined"!=typeof b.right?b.right:v.right;v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom;v.left="undefined"!=typeof b.left?b.left:v.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=function(b){if(!arguments.length)return J;J=b;return a};a.color=function(b){if(!arguments.length)return G;G=m.utils.getColor(b);f.color(G);return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.tooltips=function(b){if(!arguments.length)return L;
L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.state=function(b){if(!arguments.length)return I;I=b;return a};a.defaultState=function(b){if(!arguments.length)return T;T=b;return a};a.noData=function(b){if(!arguments.length)return S;S=b;return a};return a};m.models.lineWithFocusChart=function(){function a(w){w.each(function(w){function V(){t.empty()||t.extent(T);ea.data([t.empty()?O.domain():T]).each(function(a,b){var f=O(a[0])-P.range()[0],n=P.range()[1]-O(a[1]);
d3.select(this).select(".left").attr("width",0>f?0:f);d3.select(this).select(".right").attr("x",O(a[1])).attr("width",0>n?0:n)})}function Z(){T=t.empty()?null:t.extent();var a=t.empty()?O.domain():t.extent();1>=Math.abs(a[0]-a[1])||(A.brush({extent:a,brush:t}),V(),la.select(".nv-focus .nv-linesWrap").datum(w.filter(function(a){return!a.disabled}).map(function(f,n){return{key:f.key,values:f.values.filter(function(f,n){return b.x()(f,n)>=a[0]&&b.x()(f,n)<=a[1]})}})).transition().duration(N).call(b),
la.select(".nv-focus .nv-x.nv-axis").transition().duration(N).call(z),la.select(".nv-focus .nv-y.nv-axis").transition().duration(N).call(r))}var M=d3.select(this),da=this,Y=(G||parseInt(M.style("width"))||960)-J.left-J.right,n=(E||parseInt(M.style("height"))||400)-J.top-J.bottom-L,C=L-H.top-H.bottom;a.update=function(){M.transition().duration(N).call(a)};a.container=this;if(w&&w.length&&w.filter(function(a){return a.values.length}).length)M.selectAll(".nv-noData").remove();else{var qa=M.selectAll(".nv-noData").data([y]);
qa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");qa.attr("x",J.left+Y/2).attr("y",J.top+n/2).text(function(a){return a});return a}P=b.xScale();B=b.yScale();O=p.xScale();Q=p.yScale();var qa=M.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([w]),K=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),la=qa.select("g");K.append("g").attr("class","nv-legendWrap");var aa=K.append("g").attr("class","nv-focus");aa.append("g").attr("class",
"nv-x nv-axis");aa.append("g").attr("class","nv-y nv-axis");aa.append("g").attr("class","nv-linesWrap");K=K.append("g").attr("class","nv-context");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis");K.append("g").attr("class","nv-linesWrap");K.append("g").attr("class","nv-brushBackground");K.append("g").attr("class","nv-x nv-brush");I&&(v.width(Y),la.select(".nv-legendWrap").datum(w).call(v),J.top!=v.height()&&(J.top=v.height(),n=(E||parseInt(M.style("height"))||
400)-J.top-J.bottom-L),la.select(".nv-legendWrap").attr("transform","translate(0,"+-J.top+")"));qa.attr("transform","translate("+J.left+","+J.top+")");b.width(Y).height(n).color(w.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!w[b].disabled}));p.defined(b.defined()).width(Y).height(C).color(w.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!w[b].disabled}));la.select(".nv-context").attr("transform","translate(0,"+(n+J.bottom+H.top)+")");qa=la.select(".nv-context .nv-linesWrap").datum(w.filter(function(a){return!a.disabled}));
d3.transition(qa).call(p);z.scale(P).ticks(Y/100).tickSize(-n,0);r.scale(B).ticks(n/36).tickSize(-Y,0);la.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+n+")");t.x(O).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);Z();a.transitionDuration(b)});T&&t.extent(T);var ea=la.select(".nv-brushBackground").selectAll("g").data([T||t.extent()]),n=ea.enter().append("g");n.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",C);n.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",C);n=la.select(".nv-x.nv-brush").call(t);n.selectAll("rect").attr("height",C);n.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,f=C/3;return"M"+.5*b+","+f+"A6,6 0 0 "+a+" "+6.5*b+","+(f+6)+"V"+(2*f-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*f+"ZM"+2.5*b+","+(f+8)+"V"+(2*f-8)+"M"+4.5*b+","+(f+8)+"V"+(2*f-8)});Z();k.scale(O).ticks(Y/100).tickSize(-C,0);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+
")");d3.transition(la.select(".nv-context .nv-x.nv-axis")).call(k);f.scale(Q).ticks(C/36).tickSize(-Y,0);d3.transition(la.select(".nv-context .nv-y.nv-axis")).call(f);la.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")");v.dispatch.on("stateChange",function(b){a.update()});A.on("tooltipShow",function(f){if(S){var n=da.parentNode,k=f.pos[0]+(n.offsetLeft||0),p=f.pos[1]+(n.offsetTop||0),w=z.tickFormat()(b.x()(f.point,f.pointIndex)),C=r.tickFormat()(b.y()(f.point,f.pointIndex));
f=R(f.series.key,w,C,f,a);m.tooltip.show([k,p],f,null,null,n)}})});return a}var b=m.models.line(),p=m.models.line(),z=m.models.axis(),r=m.models.axis(),k=m.models.axis(),f=m.models.axis(),v=m.models.legend(),t=d3.svg.brush(),J={top:30,right:30,bottom:30,left:60},H={top:0,right:30,bottom:20,left:60},D=m.utils.defaultColor(),G=null,E=null,L=100,P,B,O,Q,I=!0,T=null,S=!0,R=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},y="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide",
"brush"),N=250;b.clipEdge(!0);p.interactive(!1);z.orient("bottom").tickPadding(5);r.orient("left");k.orient("bottom").tickPadding(5);f.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+J.left,a.pos[1]+J.top];A.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)});A.on("tooltipHide",function(){S&&m.tooltip.cleanup()});a.dispatch=A;a.legend=v;a.lines=b;a.lines2=p;a.xAxis=z;a.yAxis=r;a.x2Axis=k;a.y2Axis=f;d3.rebind(a,b,"defined","isArea",
"size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=m.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return b.x;b.x(f);p.x(f);return a};a.y=function(f){if(!arguments.length)return b.y;b.y(f);p.y(f);return a};a.margin=function(b){if(!arguments.length)return J;J.top="undefined"!=typeof b.top?b.top:J.top;J.right="undefined"!=typeof b.right?b.right:J.right;J.bottom="undefined"!=typeof b.bottom?b.bottom:J.bottom;J.left="undefined"!=
typeof b.left?b.left:J.left;return a};a.margin2=function(b){if(!arguments.length)return H;H=b;return a};a.width=function(b){if(!arguments.length)return G;G=b;return a};a.height=function(b){if(!arguments.length)return E;E=b;return a};a.height2=function(b){if(!arguments.length)return L;L=b;return a};a.color=function(b){if(!arguments.length)return D;D=m.utils.getColor(b);v.color(D);return a};a.showLegend=function(b){if(!arguments.length)return I;I=b;return a};a.tooltips=function(b){if(!arguments.length)return S;
S=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.interpolate=function(f){if(!arguments.length)return b.interpolate();b.interpolate(f);p.interpolate(f);return a};a.noData=function(b){if(!arguments.length)return y;y=b;return a};a.xTickFormat=function(b){if(!arguments.length)return z.tickFormat();z.tickFormat(b);k.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return r.tickFormat();r.tickFormat(b);f.tickFormat(b);return a};a.brushExtent=
function(b){if(!arguments.length)return T;T=b;return a};a.transitionDuration=function(b){if(!arguments.length)return N;N=b;return a};return a};m.models.linePlusBarWithFocusChart=function(){function a(n){n.each(function(n){function C(){G.empty()||G.extent(R);rb.data([G.empty()?w.domain():R]).each(function(a,b){var f=w(a[0])-w.range()[0],n=w.range()[1]-w(a[1]);d3.select(this).select(".left").attr("width",0>f?0:f);d3.select(this).select(".right").attr("x",w(a[1])).attr("width",0>n?0:n)})}function K(){R=
G.empty()?null:G.extent();S=G.empty()?w.domain():G.extent();Y.brush({extent:S,brush:G});C();z.width(ea).height(ha).color(n.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!n[b].disabled&&n[b].bar}));b.width(ea).height(ha).color(n.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!n[b].disabled&&!n[b].bar}));var a=pa.select(".nv-focus .nv-barsWrap").datum(ma.length?ma.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return z.x()(a,b)>=
S[0]&&z.x()(a,b)<=S[1]})}}):[{values:[]}]),f=pa.select(".nv-focus .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa.map(function(a,f){return{key:a.key,values:a.values.filter(function(a,f){return b.x()(a,f)>=S[0]&&b.x()(a,f)<=S[1]})}}));N=ma.length?z.xScale():b.xScale();k.scale(N).ticks(ea/100).tickSize(-ha,0);k.domain([Math.ceil(S[0]),Math.floor(S[1])]);pa.select(".nv-x.nv-axis").transition().duration(0).call(k);a.transition().duration(0).call(z);f.transition().duration(0).call(b);pa.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");v.scale(V).ticks(ha/36).tickSize(-ea,0);pa.select(".nv-focus .nv-y1.nv-axis").style("opacity",ma.length?1:0);t.scale(W).ticks(ha/36).tickSize(ma.length?0:-ea,0);pa.select(".nv-focus .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+N.range()[1]+",0)");pa.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(v);pa.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(t)}var la=d3.select(this),aa=this,ea=(P||parseInt(la.style("width"))||
960)-E.left-E.right,ha=(B||parseInt(la.style("height"))||400)-E.top-E.bottom-100,ga=100-L.top-L.bottom;a.update=function(){la.transition().duration(0).call(a)};a.container=this;if(n&&n.length&&n.filter(function(a){return a.values.length}).length)la.selectAll(".nv-noData").remove();else{var ca=la.selectAll(".nv-noData").data([da]);ca.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ca.attr("x",E.left+ea/2).attr("y",E.top+ha/2).text(function(a){return a});
return a}var ma=n.filter(function(a){return!a.disabled&&a.bar}),fa=n.filter(function(a){return!a.bar});N=z.xScale();w=f.scale();V=z.yScale();W=b.yScale();Z=r.yScale();M=p.yScale();var ca=n.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:O(a,b),y:Q(a,b)}})}),oa=n.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:O(a,b),y:Q(a,b)}})});N.range([0,ea]);w.domain(d3.extent(d3.merge(ca.concat(oa)),
function(a){return a.x})).range([0,ea]);var ca=la.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),oa=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),pa=ca.select("g");oa.append("g").attr("class","nv-legendWrap");var Ca=oa.append("g").attr("class","nv-focus");Ca.append("g").attr("class","nv-x nv-axis");Ca.append("g").attr("class","nv-y1 nv-axis");Ca.append("g").attr("class","nv-y2 nv-axis");Ca.append("g").attr("class","nv-barsWrap");Ca.append("g").attr("class","nv-linesWrap");
oa=oa.append("g").attr("class","nv-context");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y1 nv-axis");oa.append("g").attr("class","nv-y2 nv-axis");oa.append("g").attr("class","nv-barsWrap");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-brushBackground");oa.append("g").attr("class","nv-x nv-brush");T&&(D.width(ea/2),pa.select(".nv-legendWrap").datum(n.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+
(a.bar?" (left axis)":" (right axis)");return a})).call(D),E.top!=D.height()&&(E.top=D.height(),ha=(B||parseInt(la.style("height"))||400)-E.top-E.bottom-100),pa.select(".nv-legendWrap").attr("transform","translate("+ea/2+","+-E.top+")"));ca.attr("transform","translate("+E.left+","+E.top+")");r.width(ea).height(ga).color(n.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!n[b].disabled&&n[b].bar}));p.width(ea).height(ga).color(n.map(function(a,b){return a.color||I(a,b)}).filter(function(a,
b){return!n[b].disabled&&!n[b].bar}));ca=pa.select(".nv-context .nv-barsWrap").datum(ma.length?ma:[{values:[]}]);oa=pa.select(".nv-context .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa);pa.select(".nv-context").attr("transform","translate(0,"+(ha+E.bottom+L.top)+")");ca.transition().call(r);oa.transition().call(p);G.x(w).on("brush",K);R&&G.extent(R);var rb=pa.select(".nv-brushBackground").selectAll("g").data([R||G.extent()]),ca=rb.enter().append("g");ca.append("rect").attr("class","left").attr("x",
0).attr("y",0).attr("height",ga);ca.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ga);ca=pa.select(".nv-x.nv-brush").call(G);ca.selectAll("rect").attr("height",ga);ca.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,f=ga/3;return"M"+.5*b+","+f+"A6,6 0 0 "+a+" "+6.5*b+","+(f+6)+"V"+(2*f-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*f+"ZM"+2.5*b+","+(f+8)+"V"+(2*f-8)+"M"+4.5*b+","+(f+8)+"V"+(2*f-8)});f.ticks(ea/100).tickSize(-ga,0);pa.select(".nv-context .nv-x.nv-axis").attr("transform",
"translate(0,"+Z.range()[0]+")");pa.select(".nv-context .nv-x.nv-axis").transition().call(f);J.scale(Z).ticks(ga/36).tickSize(-ea,0);pa.select(".nv-context .nv-y1.nv-axis").style("opacity",ma.length?1:0).attr("transform","translate(0,"+w.range()[0]+")");pa.select(".nv-context .nv-y1.nv-axis").transition().call(J);H.scale(M).ticks(ga/36).tickSize(ma.length?0:-ea,0);pa.select(".nv-context .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+w.range()[1]+",0)");pa.select(".nv-context .nv-y2.nv-axis").transition().call(H);
D.dispatch.on("stateChange",function(b){a.update()});Y.on("tooltipShow",function(f){if(y){var n=aa.parentNode;S&&(f.pointIndex+=Math.ceil(S[0]));var p=f.pos[0]+(n.offsetLeft||0),r=f.pos[1]+(n.offsetTop||0),C=k.tickFormat()(b.x()(f.point,f.pointIndex)),w=(f.series.bar?v:t).tickFormat()(b.y()(f.point,f.pointIndex)),C=A(f.series.key,C,w,f,a);m.tooltip.show([p,r],C,0>f.value?"n":"s",null,n)}});K()});return a}var b=m.models.line(),p=m.models.line(),z=m.models.historicalBar(),r=m.models.historicalBar(),
k=m.models.axis(),f=m.models.axis(),v=m.models.axis(),t=m.models.axis(),J=m.models.axis(),H=m.models.axis(),D=m.models.legend(),G=d3.svg.brush(),E={top:30,right:30,bottom:30,left:60},L={top:0,right:30,bottom:20,left:60},P=null,B=null,O=function(a){return a.x},Q=function(a){return a.y},I=m.utils.defaultColor(),T=!0,S,R=null,y=!0,A=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},N,w,V,W,Z,M,da="No Data Available.",Y=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);p.interactive(!1);
k.orient("bottom").tickPadding(5);v.orient("left");t.orient("right");f.orient("bottom").tickPadding(5);J.orient("left");H.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];Y.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){Y.tooltipHide(a)});z.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];Y.tooltipShow(a)});z.dispatch.on("elementMouseout.tooltip",function(a){Y.tooltipHide(a)});
Y.on("tooltipHide",function(){y&&m.tooltip.cleanup()});a.dispatch=Y;a.legend=D;a.lines=b;a.lines2=p;a.bars=z;a.bars2=r;a.xAxis=k;a.x2Axis=f;a.y1Axis=v;a.y2Axis=t;a.y3Axis=J;a.y4Axis=H;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=m.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return O;O=f;b.x(f);z.x(f);return a};a.y=function(f){if(!arguments.length)return Q;Q=f;b.y(f);z.y(f);return a};a.margin=function(b){if(!arguments.length)return E;E.top="undefined"!=typeof b.top?
b.top:E.top;E.right="undefined"!=typeof b.right?b.right:E.right;E.bottom="undefined"!=typeof b.bottom?b.bottom:E.bottom;E.left="undefined"!=typeof b.left?b.left:E.left;return a};a.width=function(b){if(!arguments.length)return P;P=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return I;I=m.utils.getColor(b);D.color(I);return a};a.showLegend=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return y;
y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return da;da=b;return a};a.brushExtent=function(b){if(!arguments.length)return R;R=b;return a};return a};m.models.multiBar=function(){function a(m){m.each(function(a){var m=p-b.left-b.right,w=z-b.top-b.bottom,N=d3.select(this);L&&a.length&&(L=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);D&&(a=d3.layout.stack().offset(G).values(function(a){return a.values}).y(t)(!a.length&&
L?L:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});D&&a[0].values.map(function(b,f){var n=0,k=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=k,k-=a.size):(a.y1=a.size+n,n+=a.size)})});var M=Q&&I?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:t(a,b),y0:a.y0,y1:a.y1}})});r.domain(Q||d3.merge(M).map(function(a){return a.x})).rangeBands(T||[0,m],R);k.domain(I||d3.extent(d3.merge(M).map(function(a){return D?0<a.y?a.y1:a.y1+a.y:a.y}).concat(J))).range(S||
[w,0]);r.domain()[0]===r.domain()[1]&&(r.domain()[0]?r.domain([r.domain()[0]-.01*r.domain()[0],r.domain()[1]+.01*r.domain()[1]]):r.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));A=A||k;var N=N.selectAll("g.nv-wrap.nv-multibar").data([a]),da=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),M=da.append("defs"),da=da.append("g"),Y=N.select("g");da.append("g").attr("class","nv-groups");
N.attr("transform","translate("+b.left+","+b.top+")");M.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect");N.select("#nv-edge-clip-"+f+" rect").attr("width",m).attr("height",w);Y.attr("clip-path",H?"url(#nv-edge-clip-"+f+")":"");m=N.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});m.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);m.exit().transition().selectAll("rect.nv-bar").delay(function(b,f){return f*O/a[0].values.length}).attr("y",
function(a){return D?A(a.y0):A(0)}).attr("height",0).remove();m.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return E(a,b)}).style("stroke",function(a,b){return E(a,b)});m.transition().style("stroke-opacity",1).style("fill-opacity",.75);m=m.selectAll("rect.nv-bar").data(function(b){return L&&!a.length?L.values:b.values});m.exit().remove();m.enter().append("rect").attr("class",function(a,b){return 0>t(a,b)?"nv-bar negative":
"nv-bar positive"}).attr("x",function(b,f,k){return D?0:k*r.rangeBand()/a.length}).attr("y",function(a){return A(D?a.y0:0)}).attr("height",0).attr("width",r.rangeBand()/(D?1:a.length)).attr("transform",function(a,b){return"translate("+r(v(a,b))+",0)"});m.style("fill",function(a,b,f){return E(a,f,b)}).style("stroke",function(a,b,f){return E(a,f,b)}).on("mouseover",function(b,f){d3.select(this).classed("hover",!0);y.elementMouseover({value:t(b,f),point:b,series:a[b.series],pos:[r(v(b,f))+r.rangeBand()*
(D?a.length/2:b.series+.5)/a.length,k(t(b,f)+(D?b.y0:0))],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);y.elementMouseout({value:t(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,f){y.elementClick({value:t(b,f),point:b,series:a[b.series],pos:[r(v(b,f))+r.rangeBand()*(D?a.length/2:b.series+.5)/a.length,k(t(b,f)+(D?b.y0:0))],pointIndex:f,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,f){y.elementDblClick({value:t(b,f),point:b,series:a[b.series],pos:[r(v(b,f))+r.rangeBand()*(D?a.length/2:b.series+.5)/a.length,k(t(b,f)+(D?b.y0:0))],pointIndex:f,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});m.attr("class",function(a,b){return 0>t(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(a,b){return"translate("+r(v(a,b))+",0)"});P&&(B||(B=a.map(function(){return!0})),m.style("fill",function(a,b,f){return d3.rgb(P(a,b)).darker(B.map(function(a,
b){return b}).filter(function(a,b){return!B[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(P(a,b)).darker(B.map(function(a,b){return b}).filter(function(a,b){return!B[b]})[f]).toString()}));D?m.transition().delay(function(b,f){return f*O/a[0].values.length}).attr("y",function(a,b){return k(D?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(k(a.y+(D?a.y0:0))-k(D?a.y0:0)),1)}).attr("x",function(b,f){return D?0:b.series*r.rangeBand()/a.length}).attr("width",r.rangeBand()/
(D?1:a.length)):m.transition().delay(function(b,f){return f*O/a[0].values.length}).attr("x",function(b,f){return b.series*r.rangeBand()/a.length}).attr("width",r.rangeBand()/a.length).attr("y",function(a,b){return 0>t(a,b)?k(0):1>k(0)-k(t(a,b))?k(0)-1:k(t(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(k(t(a,b))-k(0)),1)||0});r.copy();A=k.copy()});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=d3.scale.ordinal(),k=d3.scale.linear(),f=Math.floor(1E4*Math.random()),v=function(a){return a.x},
t=function(a){return a.y},J=[0],H=!0,D=!1,G="zero",E=m.utils.defaultColor(),L=!1,P=null,B,O=1200,Q,I,T,S,R=.1,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),A;a.dispatch=y;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return t;t=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?
f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return r;r=b;return a};a.yScale=function(b){if(!arguments.length)return k;k=b;return a};a.xDomain=function(b){if(!arguments.length)return Q;Q=b;return a};a.yDomain=function(b){if(!arguments.length)return I;
I=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return S;S=b;return a};a.forceY=function(b){if(!arguments.length)return J;J=b;return a};a.stacked=function(b){if(!arguments.length)return D;D=b;return a};a.stackOffset=function(b){if(!arguments.length)return G;G=b;return a};a.clipEdge=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return E;E=m.utils.getColor(b);return a};a.barColor=
function(b){if(!arguments.length)return P;P=m.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return B;B=b;return a};a.id=function(b){if(!arguments.length)return f;f=b;return a};a.hideable=function(b){if(!arguments.length)return L;L=b;return a};a.delay=function(b){if(!arguments.length)return O;O=b;return a};a.groupSpacing=function(b){if(!arguments.length)return R;R=b;return a};return a};m.models.multiBarChart=function(){function a(V){V.each(function(V){var W=d3.select(this),
M=this,da=(v||parseInt(W.style("width"))||960)-f.left-f.right,Y=(t||parseInt(W.style("height"))||400)-f.top-f.bottom;a.update=function(){W.transition().duration(w).call(a)};a.container=this;R.disabled=V.map(function(a){return!!a.disabled});if(!y){var n;y={};for(n in R)y[n]=R[n]instanceof Array?R[n].slice(0):R[n]}if(V&&V.length&&V.filter(function(a){return a.values.length}).length)W.selectAll(".nv-noData").remove();else return n=W.selectAll(".nv-noData").data([A]),n.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),n.attr("x",f.left+da/2).attr("y",f.top+Y/2).text(function(a){return a}),a;T=b.xScale();S=b.yScale();var C=W.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([V]),qa=C.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");n=C.select("g");qa.append("g").attr("class","nv-x nv-axis");qa.append("g").attr("class","nv-y nv-axis");qa.append("g").attr("class","nv-barsWrap");qa.append("g").attr("class","nv-legendWrap");
qa.append("g").attr("class","nv-controlsWrap");D&&(r.width(da-(H?180:0)),b.barColor()&&V.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),n.select(".nv-legendWrap").datum(V).call(r),f.top!=r.height()&&(f.top=r.height(),Y=(t||parseInt(W.style("height"))||400)-f.top-f.bottom),n.select(".nv-legendWrap").attr("transform","translate("+(H?180:0)+","+-f.top+")"));if(H){var K=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];k.width(H?180:0).color(["#444",
"#444","#444"]);n.select(".nv-controlsWrap").datum(K).attr("transform","translate(0,"+-f.top+")").call(k)}C.attr("transform","translate("+f.left+","+f.top+")");L&&n.select(".nv-y.nv-axis").attr("transform","translate("+da+",0)");b.disabled(V.map(function(a){return a.disabled})).width(da).height(Y).color(V.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!V[b].disabled}));n.select(".nv-barsWrap").datum(V.filter(function(a){return!a.disabled})).transition().call(b);if(G){p.scale(T).ticks(da/
100).tickSize(-Y,0);n.select(".nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")");n.select(".nv-x.nv-axis").transition().call(p);C=n.select(".nv-x.nv-axis > g").selectAll("g");C.selectAll("line, text").style("opacity",1);if(B){C.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?5:17)+")"});var la=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;n.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return"translate(0,"+
(0===b||0!==la%2?17:5)+")"})}P&&C.filter(function(a,b){return 0!==b%Math.ceil(V[0].values.length/(da/100))}).selectAll("text, line").style("opacity",0);O&&C.selectAll(".tick text").attr("transform","rotate("+O+" 0,0)").style("text-anchor",0<O?"start":"end");n.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}E&&(z.scale(S).ticks(Y/36).tickSize(-da,0),n.select(".nv-y.nv-axis").transition().call(z));r.dispatch.on("stateChange",function(b){R=b;N.stateChange(R);a.update()});
k.dispatch.on("legendClick",function(f,n){if(f.disabled){K=K.map(function(a){a.disabled=!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}R.stacked=b.stacked();N.stateChange(R);a.update()}});N.on("tooltipShow",function(f){if(Q){var n=M.parentNode,k=f.pos[0]+(n.offsetLeft||0),r=f.pos[1]+(n.offsetTop||0),t=p.tickFormat()(b.x()(f.point,f.pointIndex)),y=z.tickFormat()(b.y()(f.point,f.pointIndex)),t=I(f.series.key,t,y,f,a);m.tooltip.show([k,r],t,
0>f.value?"n":"s",null,n)}});N.on("changeState",function(f){"undefined"!==typeof f.disabled&&(V.forEach(function(a,b){a.disabled=f.disabled[b]}),R.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),R.stacked=f.stacked);a.update()})});return a}var b=m.models.multiBar(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k=m.models.legend(),f={top:30,right:20,bottom:50,left:60},v=null,t=null,J=m.utils.defaultColor(),H=!0,D=!0,G=!0,E=!0,L=!1,P=!0,B=!1,O=0,Q=!0,I=function(a,
b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},T,S,R={stacked:!1},y=null,A="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=250;b.stacked(!1);p.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});z.orient(L?"right":"left").tickFormat(d3.format(",.1f"));k.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top];N.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){Q&&m.tooltip.cleanup()});a.dispatch=N;a.multibar=b;a.legend=r;a.xAxis=p;a.yAxis=z;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return f;f.top="undefined"!=typeof b.top?b.top:f.top;f.right="undefined"!=typeof b.right?b.right:f.right;f.bottom="undefined"!=
typeof b.bottom?b.bottom:f.bottom;f.left="undefined"!=typeof b.left?b.left:f.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return J;J=m.utils.getColor(b);r.color(J);return a};a.showControls=function(b){if(!arguments.length)return H;H=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return G;
G=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;E=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return L;L=b;z.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return P;P=b;return a};a.rotateLabels=function(b){if(!arguments.length)return O;O=b;return a};a.staggerLabels=function(b){if(!arguments.length)return B;B=b;return a};a.tooltip=function(b){if(!arguments.length)return I;I=b;return a};a.tooltips=function(b){if(!arguments.length)return Q;
Q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=function(b){if(!arguments.length)return A;A=b;return a};a.transitionDuration=function(b){if(!arguments.length)return w;w=b;return a};return a};m.models.multiBarHorizontal=function(){function a(m){m.each(function(a){var m=p-b.left-b.right,r=z-b.top-b.bottom;d3.select(this);
E&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(t)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});E&&a[0].values.map(function(b,f){var k=0,n=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=n-a.size,n-=a.size):(a.y1=k,k+=a.size)})});var w=I&&T?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:t(a,b),y0:a.y0,y1:a.y1}})});k.domain(I||d3.merge(w).map(function(a){return a.x})).rangeBands(S||[0,r],.1);f.domain(T||
d3.extent(d3.merge(w).map(function(a){return E?0<a.y?a.y1+a.y:a.y1:a.y}).concat(J)));L&&!E?f.range(R||[0>f.domain()[0]?B:0,m-(0<f.domain()[1]?B:0)]):f.range(R||[0,m]);A=A||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);m=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);r=m.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");r.append("defs");r=r.append("g");m.select("g");r.append("g").attr("class","nv-groups");m.attr("transform","translate("+b.left+
","+b.top+")");m=m.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});m.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);m.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();m.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return H(a,b)}).style("stroke",function(a,b){return H(a,b)});m.transition().style("stroke-opacity",
1).style("fill-opacity",.75);m=m.selectAll("g.nv-bar").data(function(a){return a.values});m.exit().remove();r=m.enter().append("g").attr("transform",function(b,f,p){return"translate("+A(E?b.y0:0)+","+(E?0:p*k.rangeBand()/a.length+k(v(b,f)))+")"});r.append("rect").attr("width",0).attr("height",k.rangeBand()/(E?1:a.length));m.on("mouseover",function(b,p){d3.select(this).classed("hover",!0);y.elementMouseover({value:t(b,p),point:b,series:a[b.series],pos:[f(t(b,p)+(E?b.y0:0)),k(v(b,p))+k.rangeBand()*
(E?a.length/2:b.series+.5)/a.length],pointIndex:p,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);y.elementMouseout({value:t(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,p){y.elementClick({value:t(b,p),point:b,series:a[b.series],pos:[k(v(b,p))+k.rangeBand()*(E?a.length/2:b.series+.5)/a.length,f(t(b,p)+(E?b.y0:0))],pointIndex:p,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,p){y.elementDblClick({value:t(b,p),point:b,series:a[b.series],pos:[k(v(b,p))+k.rangeBand()*(E?a.length/2:b.series+.5)/a.length,f(t(b,p)+(E?b.y0:0))],pointIndex:p,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});r.append("text");L&&!E?(m.select("text").attr("text-anchor",function(a,b){return 0>t(a,b)?"end":"start"}).attr("y",k.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return O(t(a,b))}),m.transition().select("text").attr("x",function(a,b){return 0>t(a,
b)?-4:f(t(a,b))-f(0)+4})):m.selectAll("text").text("");P&&!E?(r.append("text").classed("nv-bar-label",!0),m.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>t(a,b)?"start":"end"}).attr("y",k.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return v(a,b)}),m.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>t(a,b)?f(0)-f(t(a,b))+4:-4})):m.selectAll("text.nv-bar-label").text("");m.attr("class",function(a,b){return 0>t(a,b)?"nv-bar negative":
"nv-bar positive"});D&&(G||(G=a.map(function(){return!0})),m.style("fill",function(a,b,f){return d3.rgb(D(a,b)).darker(G.map(function(a,b){return b}).filter(function(a,b){return!G[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(D(a,b)).darker(G.map(function(a,b){return b}).filter(function(a,b){return!G[b]})[f]).toString()}));E?m.transition().attr("transform",function(a,b){return"translate("+f(a.y1)+","+k(v(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(f(t(a,
b)+a.y0)-f(a.y0))}).attr("height",k.rangeBand()):m.transition().attr("transform",function(b,p){return"translate("+(0>t(b,p)?f(t(b,p)):f(0))+","+(b.series*k.rangeBand()/a.length+k(v(b,p)))+")"}).select("rect").attr("height",k.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(f(t(a,b))-f(0)),1)});k.copy();A=f.copy()});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=Math.floor(1E4*Math.random()),k=d3.scale.ordinal(),f=d3.scale.linear(),v=function(a){return a.x},t=
function(a){return a.y},J=[0],H=m.utils.defaultColor(),D=null,G,E=!1,L=!1,P=!1,B=60,O=d3.format(",.2f"),Q=1200,I,T,S,R,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),A;a.dispatch=y;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return t;t=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;return a};a.xDomain=function(b){if(!arguments.length)return I;I=b;return a};a.yDomain=function(b){if(!arguments.length)return T;
T=b;return a};a.xRange=function(b){if(!arguments.length)return S;S=b;return a};a.yRange=function(b){if(!arguments.length)return R;R=b;return a};a.forceY=function(b){if(!arguments.length)return J;J=b;return a};a.stacked=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return H;H=m.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return D;D=m.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return G;G=b;return a};
a.id=function(b){if(!arguments.length)return r;r=b;return a};a.delay=function(b){if(!arguments.length)return Q;Q=b;return a};a.showValues=function(b){if(!arguments.length)return L;L=b;return a};a.showBarLabels=function(b){if(!arguments.length)return P;P=b;return a};a.valueFormat=function(b){if(!arguments.length)return O;O=b;return a};a.valuePadding=function(b){if(!arguments.length)return B;B=b;return a};return a};m.models.multiBarHorizontalChart=function(){function a(y){y.each(function(y){var A=d3.select(this),
w=this,V=(v||parseInt(A.style("width"))||960)-f.left-f.right,W=(t||parseInt(A.style("height"))||400)-f.top-f.bottom;a.update=function(){A.transition().duration(R).call(a)};a.container=this;Q.disabled=y.map(function(a){return!!a.disabled});if(!I){var Z;I={};for(Z in Q)I[Z]=Q[Z]instanceof Array?Q[Z].slice(0):Q[Z]}if(y&&y.length&&y.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return Z=A.selectAll(".nv-noData").data([T]),Z.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Z.attr("x",f.left+V/2).attr("y",f.top+W/2).text(function(a){return a}),a;B=b.xScale();O=b.yScale();Z=A.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([y]);var M=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),K=Z.select("g");M.append("g").attr("class","nv-x nv-axis");M.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");M.append("g").attr("class",
"nv-barsWrap");M.append("g").attr("class","nv-legendWrap");M.append("g").attr("class","nv-controlsWrap");D&&(r.width(V-(H?180:0)),b.barColor()&&y.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),K.select(".nv-legendWrap").datum(y).call(r),f.top!=r.height()&&(f.top=r.height(),W=(t||parseInt(A.style("height"))||400)-f.top-f.bottom),K.select(".nv-legendWrap").attr("transform","translate("+(H?180:0)+","+-f.top+")"));if(H){var Y=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];k.width(H?180:0).color(["#444","#444","#444"]);K.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+-f.top+")").call(k)}Z.attr("transform","translate("+f.left+","+f.top+")");b.disabled(y.map(function(a){return a.disabled})).width(V).height(W).color(y.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!y[b].disabled}));K.select(".nv-barsWrap").datum(y.filter(function(a){return!a.disabled})).transition().call(b);G&&(p.scale(B).ticks(W/24).tickSize(-V,
0),K.select(".nv-x.nv-axis").transition().call(p),K.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));E&&(z.scale(O).ticks(V/100).tickSize(-W,0),K.select(".nv-y.nv-axis").attr("transform","translate(0,"+W+")"),K.select(".nv-y.nv-axis").transition().call(z));K.select(".nv-zeroLine line").attr("x1",O(0)).attr("x2",O(0)).attr("y1",0).attr("y2",-W);r.dispatch.on("stateChange",function(b){Q=b;S.stateChange(Q);a.update()});k.dispatch.on("legendClick",function(f,k){if(f.disabled){Y=Y.map(function(a){a.disabled=
!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}Q.stacked=b.stacked();S.stateChange(Q);a.update()}});S.on("tooltipShow",function(f){if(L){var k=w.parentNode,n=f.pos[0]+(k.offsetLeft||0),r=f.pos[1]+(k.offsetTop||0),t=p.tickFormat()(b.x()(f.point,f.pointIndex)),y=z.tickFormat()(b.y()(f.point,f.pointIndex)),t=P(f.series.key,t,y,f,a);m.tooltip.show([n,r],t,0>f.value?"e":"w",null,k)}});S.on("changeState",function(f){"undefined"!==typeof f.disabled&&
(y.forEach(function(a,b){a.disabled=f.disabled[b]}),Q.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),Q.stacked=f.stacked);a.update()})});return a}var b=m.models.multiBarHorizontal(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend().height(30),k=m.models.legend().height(30),f={top:30,right:20,bottom:50,left:60},v=null,t=null,J=m.utils.defaultColor(),H=!0,D=!0,G=!0,E=!0,L=!0,P=function(a,b,f,k,p){return"<h3>"+a+" - "+b+"</h3><p>"+f+"</p>"},B,O,Q={stacked:!1},I=null,
T="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),R=250;b.stacked(!1);p.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});z.orient("bottom").tickFormat(d3.format(",.1f"));k.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top];S.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){S.tooltipHide(a)});S.on("tooltipHide",function(){L&&m.tooltip.cleanup()});
a.dispatch=S;a.multibar=b;a.legend=r;a.xAxis=p;a.yAxis=z;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return f;f.top="undefined"!=typeof b.top?b.top:f.top;f.right="undefined"!=typeof b.right?b.right:f.right;f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom;f.left="undefined"!=typeof b.left?b.left:
f.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return t;t=b;return a};a.color=function(b){if(!arguments.length)return J;J=m.utils.getColor(b);r.color(J);return a};a.showControls=function(b){if(!arguments.length)return H;H=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return G;G=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;
E=b;return a};a.tooltip=function(b){if(!arguments.length)return P;P=b;return a};a.tooltips=function(b){if(!arguments.length)return L;L=b;return a};a.tooltipContent=function(b){if(!arguments.length)return P;P=b;return a};a.state=function(b){if(!arguments.length)return Q;Q=b;return a};a.defaultState=function(b){if(!arguments.length)return I;I=b;return a};a.noData=function(b){if(!arguments.length)return T;T=b;return a};a.transitionDuration=function(b){if(!arguments.length)return R;R=b;return a};return a};
m.models.multiChart=function(){function a(A){A.each(function(A){var w=d3.select(this),N=this;a.update=function(){w.transition().call(a)};a.container=this;var W=(z||parseInt(w.style("width"))||960)-b.left-b.right,K=(r||parseInt(w.style("height"))||400)-b.top-b.bottom,M=A.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),da=A.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),Y=A.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),n=A.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),C=A.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),qa=A.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),va=A.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),la=A.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});t.domain(d3.extent(d3.merge(va.concat(la)),function(a){return a.x})).range([0,
W]);var aa=w.selectAll("g.wrap.multiChart").data([A]),ea=aa.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ea.append("g").attr("class","x axis");ea.append("g").attr("class","y1 axis");ea.append("g").attr("class","y2 axis");ea.append("g").attr("class","lines1Wrap");ea.append("g").attr("class","lines2Wrap");ea.append("g").attr("class","bars1Wrap");ea.append("g").attr("class","bars2Wrap");ea.append("g").attr("class","stack1Wrap");ea.append("g").attr("class","stack2Wrap");ea.append("g").attr("class",
"legendWrap");aa=aa.select("g");k&&(R.width(W/2),aa.select(".legendWrap").datum(A.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(R),b.top!=R.height()&&(b.top=R.height(),K=(r||parseInt(w.style("height"))||400)-b.top-b.bottom),aa.select(".legendWrap").attr("transform","translate("+W/2+","+-b.top+")"));E.width(W).height(K).interpolate("monotone").color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,
b){return!A[b].disabled&&1==A[b].yAxis&&"line"==A[b].type}));L.width(W).height(K).interpolate("monotone").color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,b){return!A[b].disabled&&2==A[b].yAxis&&"line"==A[b].type}));P.width(W).height(K).color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,b){return!A[b].disabled&&1==A[b].yAxis&&"bar"==A[b].type}));B.width(W).height(K).color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,b){return!A[b].disabled&&
2==A[b].yAxis&&"bar"==A[b].type}));O.width(W).height(K).color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,b){return!A[b].disabled&&1==A[b].yAxis&&"area"==A[b].type}));Q.width(W).height(K).color(A.map(function(a,b){return a.color||p[b%p.length]}).filter(function(a,b){return!A[b].disabled&&2==A[b].yAxis&&"area"==A[b].type}));aa.attr("transform","translate("+b.left+","+b.top+")");var ea=aa.select(".lines1Wrap").datum(M),ha=aa.select(".bars1Wrap").datum(Y),ga=aa.select(".stack1Wrap").datum(C),
ca=aa.select(".lines2Wrap").datum(da),ma=aa.select(".bars2Wrap").datum(n),fa=aa.select(".stack2Wrap").datum(qa),oa=C.length?C.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[],pa=qa.length?qa.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[];D.domain(J||d3.extent(d3.merge(va).concat(oa),function(a){return a.y})).range([0,K]);G.domain(H||
d3.extent(d3.merge(la).concat(pa),function(a){return a.y})).range([0,K]);E.yDomain(D.domain());P.yDomain(D.domain());O.yDomain(D.domain());L.yDomain(G.domain());B.yDomain(G.domain());Q.yDomain(G.domain());C.length&&d3.transition(ga).call(O);qa.length&&d3.transition(fa).call(Q);Y.length&&d3.transition(ha).call(P);n.length&&d3.transition(ma).call(B);M.length&&d3.transition(ea).call(E);da.length&&d3.transition(ca).call(L);I.ticks(W/100).tickSize(-K,0);aa.select(".x.axis").attr("transform","translate(0,"+
K+")");d3.transition(aa.select(".x.axis")).call(I);T.ticks(K/36).tickSize(-W,0);d3.transition(aa.select(".y1.axis")).call(T);S.ticks(K/36).tickSize(-W,0);d3.transition(aa.select(".y2.axis")).call(S);aa.select(".y2.axis").style("opacity",la.length?1:0).attr("transform","translate("+t.range()[1]+",0)");R.dispatch.on("stateChange",function(b){a.update()});y.on("tooltipShow",function(b){if(f){var k=N.parentNode,n=b.pos[0]+(k.offsetLeft||0),p=b.pos[1]+(k.offsetTop||0),r=I.tickFormat()(E.x()(b.point,b.pointIndex)),
t=(2==b.series.yAxis?S:T).tickFormat()(E.y()(b.point,b.pointIndex));b=v(b.series.key,r,t,b,a);m.tooltip.show([n,p],b,void 0,void 0,k.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},p=d3.scale.category20().range(),z=null,r=null,k=!0,f=!0,v=function(a,b,f,k,p){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},t,J,H;t=d3.scale.linear();var D=d3.scale.linear(),G=d3.scale.linear(),E=m.models.line().yScale(D),L=m.models.line().yScale(G),P=m.models.multiBar().stacked(!1).yScale(D),B=m.models.multiBar().stacked(!1).yScale(G),
O=m.models.stackedArea().yScale(D),Q=m.models.stackedArea().yScale(G),I=m.models.axis().scale(t).orient("bottom").tickPadding(5),T=m.models.axis().scale(D).orient("left"),S=m.models.axis().scale(G).orient("right"),R=m.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide");E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});L.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});L.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});P.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});P.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});B.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});B.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});
O.dispatch.on("tooltipShow",function(a){if(!Math.round(100*O.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});O.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)});Q.dispatch.on("tooltipShow",function(a){if(!Math.round(100*Q.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});Q.dispatch.on("tooltipHide",
function(a){y.tooltipHide(a)});E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});L.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];y.tooltipShow(a)});L.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)});y.on("tooltipHide",function(){f&&m.tooltip.cleanup()});a.dispatch=y;a.lines1=E;a.lines2=L;a.bars1=P;a.bars2=
B;a.stack1=O;a.stack2=Q;a.xAxis=I;a.yAxis1=T;a.yAxis2=S;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;E.x(b);P.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;E.y(b);P.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return J;J=b;return a};a.yDomain2=function(b){if(!arguments.length)return H;H=b;return a};a.margin=function(f){if(!arguments.length)return b;b=f;return a};a.width=function(b){if(!arguments.length)return z;
z=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return p;p=b;R.color(b);return a};a.showLegend=function(b){if(!arguments.length)return k;k=b;return a};a.tooltips=function(b){if(!arguments.length)return f;f=b;return a};a.tooltipContent=function(b){if(!arguments.length)return v;v=b;return a};return a};m.models.ohlcBar=function(){function a(m){m.each(function(a){var m=p-b.left-b.right,y=z-b.top-b.bottom,A=d3.select(this);k.domain(K||
d3.extent(a[0].values.map(v).concat(E)));P?k.range(T||[.5*m/a[0].values.length,m*(a[0].values.length-.5)/a[0].values.length]):k.range(T||[0,m]);f.domain(I||[d3.min(a[0].values.map(G).concat(L)),d3.max(a[0].values.map(D).concat(L))]).range(S||[y,0]);k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1]));f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):
f.domain([-1,1]));var O=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),Q=O.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),M=Q.append("defs"),Q=Q.append("g"),da=O.select("g");Q.append("g").attr("class","nv-ticks");O.attr("transform","translate("+b.left+","+b.top+")");A.on("click",function(a,b){R.chartClick({data:a,index:b,pos:d3.event,id:r})});M.append("clipPath").attr("id","nv-chart-clip-path-"+r).append("rect");O.select("#nv-chart-clip-path-"+r+" rect").attr("width",
m).attr("height",y);da.attr("clip-path",B?"url(#nv-chart-clip-path-"+r+")":"");y=O.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});y.exit().remove();y.enter().append("path").attr("class",function(a,b,f){return(J(a,b)>H(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b}).attr("d",function(b,k){var n=m/a[0].values.length*.9;return"m0,0l0,"+(f(J(b,k))-f(D(b,k)))+"l"+-n/2+",0l"+n/2+",0l0,"+(f(G(b,k))-f(J(b,k)))+"l0,"+(f(H(b,k))-f(G(b,k)))+"l"+n/2+",0l"+-n/2+",0z"}).attr("transform",
function(a,b){return"translate("+k(v(a,b))+","+f(D(a,b))+")"}).on("mouseover",function(b,n){d3.select(this).classed("hover",!0);R.elementMouseover({point:b,series:a[0],pos:[k(v(b,n)),f(t(b,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);R.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event})}).on("click",function(a,b){R.elementClick({value:t(a,b),data:a,index:b,pos:[k(v(a,b)),f(t(a,b))],e:d3.event,id:r});d3.event.stopPropagation()}).on("dblclick",
function(a,b){R.elementDblClick({value:t(a,b),data:a,index:b,pos:[k(v(a,b)),f(t(a,b))],e:d3.event,id:r});d3.event.stopPropagation()});y.attr("class",function(a,b,f){return(J(a,b)>H(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b});d3.transition(y).attr("transform",function(a,b){return"translate("+k(v(a,b))+","+f(D(a,b))+")"}).attr("d",function(b,k){var n=m/a[0].values.length*.9;return"m0,0l0,"+(f(J(b,k))-f(D(b,k)))+"l"+-n/2+",0l"+n/2+",0l0,"+(f(G(b,k))-f(J(b,k)))+"l0,"+(f(H(b,k))-
f(G(b,k)))+"l"+n/2+",0l"+-n/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=Math.floor(1E4*Math.random()),k=d3.scale.linear(),f=d3.scale.linear(),v=function(a){return a.x},t=function(a){return a.y},J=function(a){return a.open},H=function(a){return a.close},D=function(a){return a.high},G=function(a){return a.low},E=[],L=[],P=!1,B=!0,O=m.utils.defaultColor(),K,I,T,S,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
R;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return t;t=b;return a};a.open=function(b){if(!arguments.length)return J;J=b;return a};a.close=function(b){if(!arguments.length)return H;H=b;return a};a.high=function(b){if(!arguments.length)return D;D=b;return a};a.low=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:
b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;return a};a.xDomain=function(b){if(!arguments.length)return K;K=b;return a};a.yDomain=
function(b){if(!arguments.length)return I;I=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return S;S=b;return a};a.forceX=function(b){if(!arguments.length)return E;E=b;return a};a.forceY=function(b){if(!arguments.length)return L;L=b;return a};a.padData=function(b){if(!arguments.length)return P;P=b;return a};a.clipEdge=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return O;O=
m.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return r;r=b;return a};return a};m.models.pie=function(){function a(f){f.each(function(a){var f=p-b.left-b.right,m=z-b.top-b.bottom,J=Math.min(f,m)/2,w=J-J/5,S=d3.select(this);a=S.selectAll(".nv-wrap.nv-pie").data(a);var W=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+v).append("g"),R=a.select("g");W.append("g").attr("class","nv-pie");W.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");R.select(".nv-pie").attr("transform","translate("+f/2+","+m/2+")");R.select(".nv-pieLabels").attr("transform","translate("+f/2+","+m/2+")");S.on("click",function(a,b){T.chartClick({data:a,index:b,pos:d3.event,id:v})});var M=d3.svg.arc().outerRadius(w);O&&M.startAngle(O);K&&M.endAngle(K);P&&M.innerRadius(J*I);m=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:k(a)});f=a.select(".nv-pie").selectAll(".nv-slice").data(m);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(m);
f.exit().remove();a.exit().remove();m=f.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);T.elementMouseover({label:r(a.data),value:k(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:v})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);T.elementMouseout({label:r(a.data),value:k(a.data),point:a.data,index:b,id:v})}).on("click",function(a,b){T.elementClick({label:r(a.data),value:k(a.data),point:a.data,
index:b,pos:d3.event,id:v});d3.event.stopPropagation()}).on("dblclick",function(a,b){T.elementDblClick({label:r(a.data),value:k(a.data),point:a.data,index:b,pos:d3.event,id:v});d3.event.stopPropagation()});f.attr("fill",function(a,b){return t(a,b)}).attr("stroke",function(a,b){return t(a,b)});m.append("path").each(function(a){this._current=a});f.select("path").transition().attr("d",M).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
P||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return M(b(a))}});if(H){var Q=d3.svg.arc().innerRadius(0);D&&(Q=M);G&&(Q=d3.svg.arc().outerRadius(M.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var f=d3.select(this);f.attr("transform",function(a){if(B){a.outerRadius=w+10;a.innerRadius=w+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+Q.centroid(a)+
") rotate("+b+")"}a.outerRadius=J+10;a.innerRadius=J+15;return"translate("+Q.centroid(a)+")"});f.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);f.append("text").style("text-anchor",B?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var Y={},n=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(B){a.outerRadius=w+10;a.innerRadius=w+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+Q.centroid(a)+") rotate("+b+")"}a.outerRadius=J+10;a.innerRadius=J+15;a=Q.centroid(a);b=n(a);Y[b]&&(a[1]-=14);Y[n(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",B?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var f=(a.endAngle-a.startAngle)/(2*Math.PI),n={key:r(a.data),value:k(a.data),percent:d3.format("%")(f)};return a.value&&f>L?n[E]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},p=500,z=500,r=function(a){return a.x},k=function(a){return a.y},f=function(a){return a.description},v=Math.floor(1E4*Math.random()),t=m.utils.defaultColor(),J=d3.format(",.2f"),H=!0,D=!0,G=!1,E="key",L=.02,P=!1,B=!1,O=!1,K=!1,I=.5,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=T;a.options=m.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.values=function(b){m.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return r;r=b;return a};a.y=function(b){if(!arguments.length)return k;k=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return f;f=b;return a};a.showLabels=function(b){if(!arguments.length)return H;H=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return B;B=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return G;G=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return D;D=b;return a};a.labelType=function(b){if(!arguments.length)return E;E=(E=b)||"key";return a};a.donut=function(b){if(!arguments.length)return P;
P=b;return a};a.donutRatio=function(b){if(!arguments.length)return I;I=b;return a};a.startAngle=function(b){if(!arguments.length)return O;O=b;return a};a.endAngle=function(b){if(!arguments.length)return K;K=b;return a};a.id=function(b){if(!arguments.length)return v;v=b;return a};a.color=function(b){if(!arguments.length)return t;t=m.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return J;J=b;return a};a.labelThreshold=function(b){if(!arguments.length)return L;L=b;return a};
return a};m.models.pieChart=function(){function a(m){m.each(function(m){var t=d3.select(this),v=(r||parseInt(t.style("width"))||960)-z.left-z.right,L=(k||parseInt(t.style("height"))||400)-z.top-z.bottom;a.update=function(){t.transition().call(a)};a.container=this;H.disabled=m.map(function(a){return!!a.disabled});if(!D){var I;D={};for(I in H)D[I]=H[I]instanceof Array?H[I].slice(0):H[I]}if(m&&m.length)t.selectAll(".nv-noData").remove();else return I=t.selectAll(".nv-noData").data([G]),I.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",z.left+v/2).attr("y",z.top+L/2).text(function(a){return a}),a;I=t.selectAll("g.nv-wrap.nv-pieChart").data([m]);var J=I.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),P=I.select("g");J.append("g").attr("class","nv-pieWrap");J.append("g").attr("class","nv-legendWrap");f&&(p.width(v).key(b.x()),I.select(".nv-legendWrap").datum(m).call(p),z.top!=p.height()&&(z.top=p.height(),L=(k||parseInt(t.style("height"))||
400)-z.top-z.bottom),I.select(".nv-legendWrap").attr("transform","translate(0,"+-z.top+")"));I.attr("transform","translate("+z.left+","+z.top+")");b.width(v).height(L);v=P.select(".nv-pieWrap").datum([m]);d3.transition(v).call(b);p.dispatch.on("stateChange",function(b){H=b;E.stateChange(H);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a)});E.on("changeState",function(b){"undefined"!==typeof b.disabled&&(m.forEach(function(a,f){a.disabled=b.disabled[f]}),H.disabled=
b.disabled);a.update()})});return a}var b=m.models.pie(),p=m.models.legend(),z={top:30,right:20,bottom:20,left:20},r=null,k=null,f=!0,v=m.utils.defaultColor(),t=!0,J=function(a,b,f,k){return"<h3>"+a+"</h3><p>"+b+"</p>"},H={},D=null,G="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+z.left,a.pos[1]+z.top];E.tooltipShow(a)});E.on("tooltipShow",function(f){if(t){var k=b.description()(f.point)||
b.x()(f.point),p=f.pos[0]+0,r=f.pos[1]+0,v=b.valueFormat()(b.y()(f.point)),k=J(k,v,f,a);m.tooltip.show([p,r],k,0>f.value?"n":"s",null,void 0)}});E.on("tooltipHide",function(){t&&m.tooltip.cleanup()});a.legend=p;a.dispatch=E;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return z;z.top="undefined"!=
typeof b.top?b.top:z.top;z.right="undefined"!=typeof b.right?b.right:z.right;z.bottom="undefined"!=typeof b.bottom?b.bottom:z.bottom;z.left="undefined"!=typeof b.left?b.left:z.left;return a};a.width=function(b){if(!arguments.length)return r;r=b;return a};a.height=function(b){if(!arguments.length)return k;k=b;return a};a.color=function(f){if(!arguments.length)return v;v=m.utils.getColor(f);p.color(v);b.color(v);return a};a.showLegend=function(b){if(!arguments.length)return f;f=b;return a};a.tooltips=
function(b){if(!arguments.length)return t;t=b;return a};a.tooltipContent=function(b){if(!arguments.length)return J;J=b;return a};a.state=function(b){if(!arguments.length)return H;H=b;return a};a.defaultState=function(b){if(!arguments.length)return D;D=b;return a};a.noData=function(b){if(!arguments.length)return G;G=b;return a};return a};m.models.scatter=function(){function a(aa){aa.each(function(a){var aa=p-b.left-b.right,Q=z-b.top-b.bottom,ca=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var ma=N&&w&&Z?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:J(a,b),y:H(a,b),size:D(a,b)}})}));f.domain(N||d3.extent(ma.map(function(a){return a.x}).concat(L)));T&&a[0]?f.range(V||[(aa*S+aa)/(2*a[0].values.length),aa-aa*(1+S)/(2*a[0].values.length)]):f.range(V||[0,aa]);v.domain(w||d3.extent(ma.map(function(a){return a.y}).concat(P))).range(W||[Q,0]);t.domain(Z||d3.extent(ma.map(function(a){return a.size}).concat(B))).range(M||[16,256]);if(f.domain()[0]===f.domain()[1]||
v.domain()[0]===v.domain()[1])da=!0;f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1]));v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));isNaN(f.domain()[0])&&f.domain([-1,1]);isNaN(v.domain()[0])&&v.domain([-1,1]);C=C||f;qa=qa||v;var fa=ca.selectAll("g.nv-wrap.nv-scatter").data([a]),ma=fa.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+k+(da?" nv-single-point":"")),ca=ma.append("defs"),ma=ma.append("g"),ea=fa.select("g");ma.append("g").attr("class","nv-groups");ma.append("g").attr("class","nv-point-paths");fa.attr("transform","translate("+b.left+","+b.top+")");ca.append("clipPath").attr("id","nv-edge-clip-"+k).append("rect");fa.select("#nv-edge-clip-"+k+" rect").attr("width",aa).attr("height",0<Q?Q:0);ea.attr("clip-path",R?"url(#nv-edge-clip-"+k+")":"");la=!0;aa=fa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});aa.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);aa.exit().remove();aa.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});aa.transition().style("fill",function(a,b){return r(a,b)}).style("stroke",function(a,b){return r(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);E?(Q=aa.selectAll("circle.nv-point").data(function(a){return a.values},K),Q.enter().append("circle").style("fill",
function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return m.utils.NaNtoZero(C(J(a,b)))}).attr("cy",function(a,b){return m.utils.NaNtoZero(qa(H(a,b)))}).attr("r",function(a,b){return Math.sqrt(t(D(a,b))/Math.PI)}),Q.exit().remove(),aa.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return m.utils.NaNtoZero(f(J(a,b)))}).attr("cy",function(a,b){return m.utils.NaNtoZero(v(H(a,b)))}).remove(),Q.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Q.transition().attr("cx",function(a,b){return m.utils.NaNtoZero(f(J(a,b)))}).attr("cy",function(a,b){return m.utils.NaNtoZero(v(H(a,b)))}).attr("r",function(a,b){return Math.sqrt(t(D(a,b))/Math.PI)})):(Q=aa.selectAll("path.nv-point").data(function(a){return a.values}),Q.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+C(J(a,b))+","+qa(H(a,
b))+")"}).attr("d",d3.svg.symbol().type(G).size(function(a,b){return t(D(a,b))})),Q.exit().remove(),aa.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+f(J(a,b))+","+v(H(a,b))+")"}).remove(),Q.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),Q.transition().attr("transform",function(a,b){return"translate("+f(J(a,b))+","+v(H(a,b))+")"}).attr("d",d3.svg.symbol().type(G).size(function(a,b){return t(D(a,
b))})));clearTimeout(va);va=setTimeout(function(){if(!O)return!1;var m=d3.merge(a.map(function(a,b){return a.values.map(function(a,k){var n=J(a,k),p=H(a,k);return[f(n)+1E-7*Math.random(),v(p)+1E-7*Math.random(),b,k,a]}).filter(function(a,b){return I(a[4],b)})}));if(!0===n){if(y){fa.select("defs").selectAll(".nv-point-clips").data([k]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+k);var r=fa.select("#nv-points-clip-"+k).selectAll("circle").data(m);r.enter().append("circle").attr("r",
A);r.exit().remove();r.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});fa.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+k+")")}m.length&&(m.push([f.range()[0]-20,v.range()[0]-20,null,null]),m.push([f.range()[1]+20,v.range()[1]+20,null,null]),m.push([f.range()[0]-20,v.range()[0]+20,null,null]),m.push([f.range()[1]+20,v.range()[1]-20,null,null]));var t=d3.geom.polygon([[-10,-10],[-10,z+10],[p+10,z+10],[p+10,-10]]),r=d3.geom.voronoi(m).map(function(a,b){return{data:t.clip(a),
series:m[b][2],point:m[b][3]}}),r=fa.select(".nv-point-paths").selectAll("path").data(r);r.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});r.exit().remove();r.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var w=function(k,n){if(la)return 0;var p=a[k.series];if("undefined"!==typeof p){var m=p.values[k.point];n({point:m,series:p,pos:[f(J(m,k.point))+b.left,v(H(m,k.point))+b.top],seriesIndex:k.series,pointIndex:k.point})}};r.on("click",function(a){w(a,
Y.elementClick)}).on("mouseover",function(a){w(a,Y.elementMouseover)}).on("mouseout",function(a,b){w(a,Y.elementMouseout)})}else fa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(k,n){if(la||!a[k.series])return 0;var p=a[k.series],m=p.values[n];Y.elementClick({point:m,series:p,pos:[f(J(m,n))+b.left,v(H(m,n))+b.top],seriesIndex:k.series,pointIndex:n})}).on("mouseover",function(k,n){if(la||!a[k.series])return 0;var p=a[k.series],m=p.values[n];Y.elementMouseover({point:m,
series:p,pos:[f(J(m,n))+b.left,v(H(m,n))+b.top],seriesIndex:k.series,pointIndex:n})}).on("mouseout",function(b,f){if(la||!a[b.series])return 0;var k=a[b.series];Y.elementMouseout({point:k.values[f],series:k,seriesIndex:b.series,pointIndex:f})});la=!1},300);C=f.copy();qa=v.copy();t.copy()});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=m.utils.defaultColor(),k=Math.floor(1E5*Math.random()),f=d3.scale.linear(),v=d3.scale.linear(),t=d3.scale.linear(),J=function(a){return a.x},H=function(a){return a.y},
D=function(a){return a.size||1},G=function(a){return a.shape||"circle"},E=!0,L=[],P=[],B=[],O=!0,K=null,I=function(a){return!a.notActive},T=!1,S=.1,R=!1,y=!0,A=function(){return 25},N=null,w=null,V=null,W=null,Z=null,M=null,da=!1,Y=d3.dispatch("elementClick","elementMouseover","elementMouseout"),n=!0,C,qa,va,la=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+k+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,f){d3.select(".nv-chart-"+k+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",f)};Y.on("elementMouseover.point",function(b){O&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});Y.on("elementMouseout.point",function(b){O&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=Y;a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return J;J=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return H;H=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return D;D=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return v;v=b;return a};a.zScale=function(b){if(!arguments.length)return t;
t=b;return a};a.xDomain=function(b){if(!arguments.length)return N;N=b;return a};a.yDomain=function(b){if(!arguments.length)return w;w=b;return a};a.sizeDomain=function(b){if(!arguments.length)return Z;Z=b;return a};a.xRange=function(b){if(!arguments.length)return V;V=b;return a};a.yRange=function(b){if(!arguments.length)return W;W=b;return a};a.sizeRange=function(b){if(!arguments.length)return M;M=b;return a};a.forceX=function(b){if(!arguments.length)return L;L=b;return a};a.forceY=function(b){if(!arguments.length)return P;
P=b;return a};a.forceSize=function(b){if(!arguments.length)return B;B=b;return a};a.interactive=function(b){if(!arguments.length)return O;O=b;return a};a.pointKey=function(b){if(!arguments.length)return K;K=b;return a};a.pointActive=function(b){if(!arguments.length)return I;I=b;return a};a.padData=function(b){if(!arguments.length)return T;T=b;return a};a.padDataOuter=function(b){if(!arguments.length)return S;S=b;return a};a.clipEdge=function(b){if(!arguments.length)return R;R=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return y;y=b;return a};a.useVoronoi=function(b){if(!arguments.length)return n;n=b;!1===n&&(y=!1);return a};a.clipRadius=function(b){if(!arguments.length)return A;A=b;return a};a.color=function(b){if(!arguments.length)return r;r=m.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return G;G=b;return a};a.onlyCircles=function(b){if(!arguments.length)return E;E=b;return a};a.id=function(b){if(!arguments.length)return k;k=b;return a};a.singlePoint=function(b){if(!arguments.length)return da;
da=b;return a};return a};m.models.scatterChart=function(){function a(Q){Q.each(function(Q){function qa(){if(A)return fa.select(".nv-point-paths").style("pointer-events","all"),!1;fa.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);G.distortion(y).focus(a[0]);E.distortion(y).focus(a[1]);fa.select(".nv-scatterWrap").call(b);I&&fa.select(".nv-x.nv-axis").call(p);T&&fa.select(".nv-y.nv-axis").call(z);fa.select(".nv-distributionX").datum(Q.filter(function(a){return!a.disabled})).call(f);
fa.select(".nv-distributionY").datum(Q.filter(function(a){return!a.disabled})).call(v)}var aa=d3.select(this),ea=this,ha=(J||parseInt(aa.style("width"))||960)-t.left-t.right,ga=(H||parseInt(aa.style("height"))||400)-t.top-t.bottom;a.update=function(){aa.transition().duration(n).call(a)};a.container=this;Z.disabled=Q.map(function(a){return!!a.disabled});if(!M){var ca;M={};for(ca in Z)M[ca]=Z[ca]instanceof Array?Z[ca].slice(0):Z[ca]}if(Q&&Q.length&&Q.filter(function(a){return a.values.length}).length)aa.selectAll(".nv-noData").remove();
else return ca=aa.selectAll(".nv-noData").data([Y]),ca.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ca.attr("x",t.left+ha/2).attr("y",t.top+ga/2).text(function(a){return a}),a;ca=aa.selectAll("g.nv-wrap.nv-scatterChart").data([Q]);var ma=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),fa=ca.select("g");ma.append("rect").attr("class","nvd3 nv-background");ma.append("g").attr("class","nv-x nv-axis");
ma.append("g").attr("class","nv-y nv-axis");ma.append("g").attr("class","nv-scatterWrap");ma.append("g").attr("class","nv-distWrap");ma.append("g").attr("class","nv-legendWrap");ma.append("g").attr("class","nv-controlsWrap");if(K){var oa=R?ha/2:ha;r.width(oa);ca.select(".nv-legendWrap").datum(Q).call(r);t.top!=r.height()&&(t.top=r.height(),ga=(H||parseInt(aa.style("height"))||400)-t.top-t.bottom);ca.select(".nv-legendWrap").attr("transform","translate("+(ha-oa)+","+-t.top+")")}R&&(k.width(180).color(["#444"]),
fa.select(".nv-controlsWrap").datum(C).attr("transform","translate(0,"+-t.top+")").call(k));ca.attr("transform","translate("+t.left+","+t.top+")");S&&fa.select(".nv-y.nv-axis").attr("transform","translate("+ha+",0)");b.width(ha).height(ga).color(Q.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!Q[b].disabled}));0!==L&&b.xDomain(null);0!==P&&b.yDomain(null);ca.select(".nv-scatterWrap").datum(Q.filter(function(a){return!a.disabled})).call(b);0!==L&&(oa=G.domain()[1]-G.domain()[0],
b.xDomain([G.domain()[0]-L*oa,G.domain()[1]+L*oa]));0!==P&&(oa=E.domain()[1]-E.domain()[0],b.yDomain([E.domain()[0]-P*oa,E.domain()[1]+P*oa]));0===P&&0===L||ca.select(".nv-scatterWrap").datum(Q.filter(function(a){return!a.disabled})).call(b);I&&(p.scale(G).ticks(p.ticks()&&p.ticks().length?p.ticks():ha/100).tickSize(-ga,0),fa.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(p));T&&(z.scale(E).ticks(z.ticks()&&z.ticks().length?z.ticks():ga/36).tickSize(-ha,0),fa.select(".nv-y.nv-axis").call(z));
B&&(f.getData(b.x()).scale(G).width(ha).color(Q.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!Q[b].disabled})),ma.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),fa.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(Q.filter(function(a){return!a.disabled})).call(f));O&&(v.getData(b.y()).scale(E).width(ga).color(Q.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!Q[b].disabled})),ma.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),fa.select(".nv-distributionY").attr("transform","translate("+(S?ha:-v.size())+",0)").datum(Q.filter(function(a){return!a.disabled})).call(v));d3.fisheye&&(fa.select(".nv-background").attr("width",ha).attr("height",ga),fa.select(".nv-background").on("mousemove",qa),fa.select(".nv-background").on("click",function(){A=!A}),b.dispatch.on("elementClick.freezeFisheye",function(){A=!A}));k.dispatch.on("legendClick",function(f,k){f.disabled=!f.disabled;y=f.disabled?0:2.5;fa.select(".nv-background").style("pointer-events",
f.disabled?"none":"all");fa.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(G.distortion(y).focus(0),E.distortion(y).focus(0),fa.select(".nv-scatterWrap").call(b),fa.select(".nv-x.nv-axis").call(p),fa.select(".nv-y.nv-axis").call(z)):A=!1;a.update()});r.dispatch.on("stateChange",function(b){Z.disabled=b.disabled;da.stateChange(Z);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,f){return a.pos[1]-ga});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+f.size());a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];da.tooltipShow(a)});da.on("tooltipShow",function(f){if(N){var k=ea.parentNode,n=f.pos[0]+(k.offsetLeft||0),r=f.pos[1]+(k.offsetTop||0),v=f.pos[0]+(k.offsetLeft||0),y=E.range()[0]+t.top+(k.offsetTop||0),A=G.range()[0]+t.left+(k.offsetLeft||0),C=f.pos[1]+(k.offsetTop||0),B=p.tickFormat()(b.x()(f.point,
f.pointIndex)),I=z.tickFormat()(b.y()(f.point,f.pointIndex));null!=w&&m.tooltip.show([v,y],w(f.series.key,B,I,f,a),"n",1,k,"x-nvtooltip");null!=V&&m.tooltip.show([A,C],V(f.series.key,B,I,f,a),"e",1,k,"y-nvtooltip");null!=W&&m.tooltip.show([n,r],W(f.series.key,B,I,f,a),0>f.value?"n":"s",null,k)}});da.on("changeState",function(b){"undefined"!==typeof b.disabled&&(Q.forEach(function(a,f){a.disabled=b.disabled[f]}),Z.disabled=b.disabled);a.update()});G.copy();E.copy()});return a}var b=m.models.scatter(),
p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k=m.models.legend(),f=m.models.distribution(),v=m.models.distribution(),t={top:30,right:20,bottom:50,left:75},J=null,H=null,D=m.utils.defaultColor(),G=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),L=0,P=0,B=!1,O=!1,K=!0,I=!0,T=!0,S=!1,R=!!d3.fisheye,y=0,A=!1,N=!0,w=function(a,b,f){return"<strong>"+b+"</strong>"},V=function(a,b,f){return"<strong>"+
f+"</strong>"},W=null,Z={},M=null,da=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),Y="No Data Available.",n=250;b.xScale(G).yScale(E);p.orient("bottom").tickPadding(10);z.orient(S?"right":"left").tickPadding(10);f.axis("x");v.axis("y");k.updateState(!1);var C=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){da.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",v.size())});da.on("tooltipHide",function(){N&&m.tooltip.cleanup()});a.dispatch=da;a.scatter=b;a.legend=r;a.controls=k;a.xAxis=p;a.yAxis=z;a.distX=f;a.distY=v;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=m.utils.optionsFunc.bind(a);
a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:t.left;return a};a.width=function(b){if(!arguments.length)return J;J=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return D;D=m.utils.getColor(b);r.color(D);f.color(D);v.color(D);return a};
a.showDistX=function(b){if(!arguments.length)return B;B=b;return a};a.showDistY=function(b){if(!arguments.length)return O;O=b;return a};a.showControls=function(b){if(!arguments.length)return R;R=b;return a};a.showLegend=function(b){if(!arguments.length)return K;K=b;return a};a.showXAxis=function(b){if(!arguments.length)return I;I=b;return a};a.showYAxis=function(b){if(!arguments.length)return T;T=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return S;S=b;z.orient(b?"right":"left");
return a};a.fisheye=function(b){if(!arguments.length)return y;y=b;return a};a.xPadding=function(b){if(!arguments.length)return L;L=b;return a};a.yPadding=function(b){if(!arguments.length)return P;P=b;return a};a.tooltips=function(b){if(!arguments.length)return N;N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return W;W=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return w;w=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return V;V=b;return a};a.state=
function(b){if(!arguments.length)return Z;Z=b;return a};a.defaultState=function(b){if(!arguments.length)return M;M=b;return a};a.noData=function(b){if(!arguments.length)return Y;Y=b;return a};a.transitionDuration=function(b){if(!arguments.length)return n;n=b;return a};return a};m.models.scatterPlusLineChart=function(){function a(n){n.each(function(n){function C(){if(R)return ca.select(".nv-point-paths").style("pointer-events","all"),!1;ca.select(".nv-point-paths").style("pointer-events","none");var a=
d3.mouse(this);G.distortion(S).focus(a[0]);E.distortion(S).focus(a[1]);ca.select(".nv-scatterWrap").datum(n.filter(function(a){return!a.disabled})).call(b);O&&ca.select(".nv-x.nv-axis").call(p);Q&&ca.select(".nv-y.nv-axis").call(z);ca.select(".nv-distributionX").datum(n.filter(function(a){return!a.disabled})).call(f);ca.select(".nv-distributionY").datum(n.filter(function(a){return!a.disabled})).call(v)}var T=d3.select(this),la=this,aa=(J||parseInt(T.style("width"))||960)-t.left-t.right,ea=(H||parseInt(T.style("height"))||
400)-t.top-t.bottom;a.update=function(){T.transition().duration(da).call(a)};a.container=this;V.disabled=n.map(function(a){return!!a.disabled});if(!W){var ha;W={};for(ha in V)W[ha]=V[ha]instanceof Array?V[ha].slice(0):V[ha]}if(n&&n.length&&n.filter(function(a){return a.values.length}).length)T.selectAll(".nv-noData").remove();else return ha=T.selectAll(".nv-noData").data([M]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",t.left+
aa/2).attr("y",t.top+ea/2).text(function(a){return a}),a;G=b.xScale();E=b.yScale();var ga=T.selectAll("g.nv-wrap.nv-scatterChart").data([n]);ha=ga.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var ca=ga.select("g");ha.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-scatterWrap");ha.append("g").attr("class",
"nv-regressionLinesWrap");ha.append("g").attr("class","nv-distWrap");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");ga.attr("transform","translate("+t.left+","+t.top+")");I&&ca.select(".nv-y.nv-axis").attr("transform","translate("+aa+",0)");B&&(r.width(aa/2),ga.select(".nv-legendWrap").datum(n).call(r),t.top!=r.height()&&(t.top=r.height(),ea=(H||parseInt(T.style("height"))||400)-t.top-t.bottom),ga.select(".nv-legendWrap").attr("transform","translate("+
aa/2+","+-t.top+")"));K&&(k.width(180).color(["#444"]),ca.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+-t.top+")").call(k));b.width(aa).height(ea).color(n.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!n[b].disabled}));ga.select(".nv-scatterWrap").datum(n.filter(function(a){return!a.disabled})).call(b);ga.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");ga=ga.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});
ga.enter().append("g").attr("class","nv-regLines");ga=ga.selectAll(".nv-regLine").data(function(a){return[a]});ga.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);ga.transition().attr("x1",G.range()[0]).attr("x2",G.range()[1]).attr("y1",function(a,b){return E(G.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return E(G.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,f){return D(a,f)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===
typeof a.slope||"undefined"===typeof a.intercept?0:1});O&&(p.scale(G).ticks(p.ticks()?p.ticks():aa/100).tickSize(-ea,0),ca.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(p));Q&&(z.scale(E).ticks(z.ticks()?z.ticks():ea/36).tickSize(-aa,0),ca.select(".nv-y.nv-axis").call(z));L&&(f.getData(b.x()).scale(G).width(aa).color(n.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!n[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),
ca.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(n.filter(function(a){return!a.disabled})).call(f));P&&(v.getData(b.y()).scale(E).width(ea).color(n.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!n[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),ca.select(".nv-distributionY").attr("transform","translate("+(I?aa:-v.size())+",0)").datum(n.filter(function(a){return!a.disabled})).call(v));d3.fisheye&&(ca.select(".nv-background").attr("width",
aa).attr("height",ea),ca.select(".nv-background").on("mousemove",C),ca.select(".nv-background").on("click",function(){R=!R}),b.dispatch.on("elementClick.freezeFisheye",function(){R=!R}));k.dispatch.on("legendClick",function(f,k){f.disabled=!f.disabled;S=f.disabled?0:2.5;ca.select(".nv-background").style("pointer-events",f.disabled?"none":"all");ca.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(G.distortion(S).focus(0),E.distortion(S).focus(0),ca.select(".nv-scatterWrap").call(b),
ca.select(".nv-x.nv-axis").call(p),ca.select(".nv-y.nv-axis").call(z)):R=!1;a.update()});r.dispatch.on("stateChange",function(b){V=b;Z.stateChange(V);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-ea);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+f.size());a.pos=[a.pos[0]+t.left,a.pos[1]+t.top];Z.tooltipShow(a)});Z.on("tooltipShow",
function(f){if(y){var k=la.parentNode,n=f.pos[0]+(k.offsetLeft||0),r=f.pos[1]+(k.offsetTop||0),v=f.pos[0]+(k.offsetLeft||0),C=E.range()[0]+t.top+(k.offsetTop||0),B=G.range()[0]+t.left+(k.offsetLeft||0),I=f.pos[1]+(k.offsetTop||0),D=p.tickFormat()(b.x()(f.point,f.pointIndex)),H=z.tickFormat()(b.y()(f.point,f.pointIndex));null!=A&&m.tooltip.show([v,C],A(f.series.key,D,H,f,a),"n",1,k,"x-nvtooltip");null!=N&&m.tooltip.show([B,I],N(f.series.key,D,H,f,a),"e",1,k,"y-nvtooltip");null!=w&&m.tooltip.show([n,
r],w(f.series.key,D,H,f.point.tooltip,f,a),0>f.value?"n":"s",null,k)}});Z.on("changeState",function(b){"undefined"!==typeof b.disabled&&(n.forEach(function(a,f){a.disabled=b.disabled[f]}),V.disabled=b.disabled);a.update()});G.copy();E.copy()});return a}var b=m.models.scatter(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k=m.models.legend(),f=m.models.distribution(),v=m.models.distribution(),t={top:30,right:20,bottom:50,left:75},J=null,H=null,D=m.utils.defaultColor(),G=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),L=!1,P=!1,B=!0,O=!0,Q=!0,I=!1,K=!!d3.fisheye,S=0,R=!1,y=!0,A=function(a,b,f){return"<strong>"+b+"</strong>"},N=function(a,b,f){return"<strong>"+f+"</strong>"},w=function(a,b,f,k){return"<h3>"+a+"</h3><p>"+k+"</p>"},V={},W=null,Z=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M="No Data Available.",da=250;b.xScale(G).yScale(E);p.orient("bottom").tickPadding(10);z.orient(I?"right":"left").tickPadding(10);
f.axis("x");v.axis("y");k.updateState(!1);var Y=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){Z.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",v.size())});Z.on("tooltipHide",function(){y&&m.tooltip.cleanup()});a.dispatch=Z;a.scatter=b;a.legend=r;a.controls=k;a.xAxis=p;a.yAxis=z;a.distX=f;a.distY=v;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return t;t.top="undefined"!=typeof b.top?b.top:t.top;t.right="undefined"!=typeof b.right?b.right:t.right;t.bottom="undefined"!=typeof b.bottom?b.bottom:t.bottom;t.left="undefined"!=typeof b.left?b.left:
t.left;return a};a.width=function(b){if(!arguments.length)return J;J=b;return a};a.height=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return D;D=m.utils.getColor(b);r.color(D);f.color(D);v.color(D);return a};a.showDistX=function(b){if(!arguments.length)return L;L=b;return a};a.showDistY=function(b){if(!arguments.length)return P;P=b;return a};a.showControls=function(b){if(!arguments.length)return K;K=b;return a};a.showLegend=function(b){if(!arguments.length)return B;
B=b;return a};a.showXAxis=function(b){if(!arguments.length)return O;O=b;return a};a.showYAxis=function(b){if(!arguments.length)return Q;Q=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return I;I=b;z.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return S;S=b;return a};a.tooltips=function(b){if(!arguments.length)return y;y=b;return a};a.tooltipContent=function(b){if(!arguments.length)return w;w=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return A;
A=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return N;N=b;return a};a.state=function(b){if(!arguments.length)return V;V=b;return a};a.defaultState=function(b){if(!arguments.length)return W;W=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};a.transitionDuration=function(b){if(!arguments.length)return da;da=b;return a};return a};m.models.sparkline=function(){function a(m){m.each(function(a){var m=p-b.left-b.right,r=z-b.top-b.bottom,L=d3.select(this);k.domain(H||
d3.extent(a,v)).range(G||[0,m]);f.domain(D||d3.extent(a,t)).range(E||[r,0]);a=L.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");m=a.selectAll("path").data(function(a){return[a]});m.enter().append("path");m.exit().remove();m.style("stroke",function(a,b){return a.color||J(a,b)}).attr("d",d3.svg.line().x(function(a,b){return k(v(a,b))}).y(function(a,b){return f(t(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var f=a[b];f.pointIndex=b;return f}return null}var k=a.map(function(a,b){return t(a,b)}),p=b(k.lastIndexOf(f.domain()[1])),m=b(k.indexOf(f.domain()[0])),k=b(k.length-1);return[m,p,k].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return k(v(a,a.pointIndex))}).attr("cy",function(a,b){return f(t(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return v(a,
a.pointIndex)==k.domain()[1]?"nv-point nv-currentValue":t(a,a.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},p=400,z=32,r=!0,k=d3.scale.linear(),f=d3.scale.linear(),v=function(a){return a.x},t=function(a){return a.y},J=m.utils.getColor(["#000"]),H,D,G,E;a.options=m.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:
b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.x=function(b){if(!arguments.length)return v;v=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return t;t=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return k;k=b;return a};a.yScale=function(b){if(!arguments.length)return f;
f=b;return a};a.xDomain=function(b){if(!arguments.length)return H;H=b;return a};a.yDomain=function(b){if(!arguments.length)return D;D=b;return a};a.xRange=function(b){if(!arguments.length)return G;G=b;return a};a.yRange=function(b){if(!arguments.length)return E;E=b;return a};a.animate=function(b){if(!arguments.length)return r;r=b;return a};a.color=function(b){if(!arguments.length)return J;J=m.utils.getColor(b);return a};return a};m.models.sparklinePlus=function(){function a(m){m.each(function(B){function D(){if(!t){var a=
y.selectAll(".nv-hoverValue").data(v),f=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+k(b.x()(B[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);v.length&&(f.append("line").attr("x1",0).attr("y1",-p.top).attr("x2",0).attr("y2",K),f.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-p.top).attr("text-anchor","end").attr("dy",".9em"),y.select(".nv-hoverValue .nv-xValue").text(J(b.x()(B[v[0]],v[0]))),f.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-p.top).attr("text-anchor","start").attr("dy",".9em"),y.select(".nv-hoverValue .nv-yValue").text(H(b.y()(B[v[0]],v[0]))))}}var P=d3.select(this),I=(z||parseInt(P.style("width"))||960)-p.left-p.right,K=(r||parseInt(P.style("height"))||400)-p.top-p.bottom;a.update=function(){a(m)};a.container=
this;if(B&&B.length)P.selectAll(".nv-noData").remove();else{var S=P.selectAll(".nv-noData").data([L]);S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");S.attr("x",p.left+I/2).attr("y",p.top+K/2).text(function(a){return a});return a}S=b.y()(B[B.length-1],B.length-1);k=b.xScale();f=b.yScale();var R=P.selectAll("g.nv-wrap.nv-sparklineplus").data([B]),P=R.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),y=R.select("g");
P.append("g").attr("class","nv-sparklineWrap");P.append("g").attr("class","nv-valueWrap");P.append("g").attr("class","nv-hoverArea");R.attr("transform","translate("+p.left+","+p.top+")");R=y.select(".nv-sparklineWrap");b.width(I).height(K);R.call(b);R=y.select(".nv-valueWrap").selectAll(".nv-currentValue").data([S]);R.enter().append("text").attr("class","nv-currentValue").attr("dx",E?-8:8).attr("dy",".9em").style("text-anchor",E?"end":"start");R.attr("x",I+(E?p.right:0)).attr("y",G?function(a){return f(a)}:
0).style("fill",b.color()(B[B.length-1],B.length-1)).text(H(S));P.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!t){for(var a=d3.mouse(this)[0]-p.left,a=Math.round(k.invert(a)),f=Math.abs(b.x()(B[0],0)-a),m=0,r=0;r<B.length;r++)Math.abs(b.x()(B[r],r)-a)<f&&(f=Math.abs(b.x()(B[r],r)-a),m=r);v=[m];D()}}).on("click",function(){t=!t}).on("mouseout",function(){v=[];D()});y.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-p.left+","+-p.top+")"}).attr("width",
I+p.left+p.right).attr("height",K+p.top)});return a}var b=m.models.sparkline(),p={top:15,right:100,bottom:10,left:50},z=null,r=null,k,f,v=[],t=!1,J=d3.format(",r"),H=d3.format(",.2f"),D=!0,G=!0,E=!1,L="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?
b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return z;z=b;return a};a.height=function(b){if(!arguments.length)return r;r=b;return a};a.xTickFormat=function(b){if(!arguments.length)return J;J=b;return a};a.yTickFormat=function(b){if(!arguments.length)return H;H=b;return a};a.showValue=function(b){if(!arguments.length)return D;D=b;return a};a.alignValue=function(b){if(!arguments.length)return G;G=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return E;
E=b;return a};a.noData=function(b){if(!arguments.length)return L;L=b;return a};return a};m.models.stackedArea=function(){function a(m){m.each(function(m){var t=p-b.left-b.right,O=z-b.top-b.bottom,P=d3.select(this);E=K.xScale();L=K.yScale();var R=m;m.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,f){a.index=f;a.seriesIndex=b;return a})});m=m.filter(function(a){return!a.disabled});m=d3.layout.stack().order(H).offset(J).values(function(a){return a.values}).x(f).y(v).out(function(a,
b,f){f=0===v(a)?0:f;a.display={y:f,y0:b}})(m);var P=P.selectAll("g.nv-wrap.nv-stackedarea").data([m]),y=P.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),A=y.append("defs"),y=y.append("g"),N=P.select("g");y.append("g").attr("class","nv-areaWrap");y.append("g").attr("class","nv-scatterWrap");P.attr("transform","translate("+b.left+","+b.top+")");K.width(t).height(O).x(f).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(m.map(function(a,b){return a.color||r(a,a.seriesIndex)}));
N.select(".nv-scatterWrap").datum(m).call(K);A.append("clipPath").attr("id","nv-edge-clip-"+k).append("rect");P.select("#nv-edge-clip-"+k+" rect").attr("width",t).attr("height",O);N.attr("clip-path",G?"url(#nv-edge-clip-"+k+")":"");var w=d3.svg.area().x(function(a,b){return E(f(a,b))}).y0(function(a){return L(a.display.y0)}).y1(function(a){return L(a.display.y+a.display.y0)}).interpolate(D),Q=d3.svg.area().x(function(a,b){return E(f(a,b))}).y0(function(a){return L(a.display.y0)}).y1(function(a){return L(a.display.y0)}),
t=N.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});t.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return Q(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);B.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);B.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);B.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});t.exit().remove();t.style("fill",function(a,b){return a.color||r(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||r(a,a.seriesIndex)});t.transition().attr("d",function(a,b){return w(a.values,b)});K.dispatch.on("elementMouseover.area",function(a){N.select(".nv-chart-"+k+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});K.dispatch.on("elementMouseout.area",function(a){N.select(".nv-chart-"+k+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,f=a[0].length,k=1/b,m,n,p,r=[];for(n=0;n<f;++n){for(p=m=0;m<R.length;m++)p+=v(R[m].values[n]);if(p)for(m=0;m<b;m++)a[m][n][1]/=p;else for(m=0;m<b;m++)a[m][n][1]=k}for(n=0;n<f;++n)r[n]=0;return r}});return a}var b={top:0,right:0,bottom:0,left:0},p=960,z=500,r=m.utils.defaultColor(),
k=Math.floor(1E5*Math.random()),f=function(a){return a.x},v=function(a){return a.y},t="stack",J="zero",H="default",D="linear",G=!1,E,L,K=m.models.scatter(),B=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");K.size(2.2).sizeDomain([2.2,2.2]);K.dispatch.on("elementClick.area",function(a){B.areaClick(a)});K.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];B.tooltipShow(a)});K.dispatch.on("elementMouseout.tooltip",function(a){B.tooltipHide(a)});
a.dispatch=B;a.scatter=K;d3.rebind(a,K,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=m.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return f;f=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return v;v=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return z;z=b;return a};a.clipEdge=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return r;r=m.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return J;
J=b;return a};a.order=function(b){if(!arguments.length)return H;H=b;return a};a.style=function(b){if(!arguments.length)return t;t=b;switch(t){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return D;
D=b;return a};return a};m.models.stackedAreaChart=function(){function a(M){M.each(function(M){var L=d3.select(this),n=this,C=(t||parseInt(L.style("width"))||960)-v.left-v.right,da=(J||parseInt(L.style("height"))||400)-v.top-v.bottom;a.update=function(){L.transition().duration(Z).call(a)};a.container=this;R.disabled=M.map(function(a){return!!a.disabled});if(!y){var va;y={};for(va in R)y[va]=R[va]instanceof Array?R[va].slice(0):R[va]}if(M&&M.length&&M.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();
else return va=L.selectAll(".nv-noData").data([A]),va.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),va.attr("x",v.left+C/2).attr("y",v.top+da/2).text(function(a){return a}),a;I=b.xScale();T=b.yScale();va=L.selectAll("g.nv-wrap.nv-stackedAreaChart").data([M]);var la=va.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),aa=va.select("g");la.append("rect").style("opacity",0);la.append("g").attr("class","nv-x nv-axis");
la.append("g").attr("class","nv-y nv-axis");la.append("g").attr("class","nv-stackedWrap");la.append("g").attr("class","nv-legendWrap");la.append("g").attr("class","nv-controlsWrap");la.append("g").attr("class","nv-interactive");aa.select("rect").attr("width",C).attr("height",da);G&&(la=D?C-w:C,r.width(la),aa.select(".nv-legendWrap").datum(M).call(r),v.top!=r.height()&&(v.top=r.height(),da=(J||parseInt(L.style("height"))||400)-v.top-v.bottom),aa.select(".nv-legendWrap").attr("transform","translate("+
(C-la)+","+-v.top+")"));if(D){var ea=[{key:W.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:W.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:W.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:W.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];w=V.length/3*260;ea=ea.filter(function(a){return-1!==V.indexOf(a.metaKey)});k.width(w).color(["#444",
"#444","#444"]);aa.select(".nv-controlsWrap").datum(ea).call(k);v.top!=Math.max(k.height(),r.height())&&(v.top=Math.max(k.height(),r.height()),da=(J||parseInt(L.style("height"))||400)-v.top-v.bottom);aa.select(".nv-controlsWrap").attr("transform","translate(0,"+-v.top+")")}va.attr("transform","translate("+v.left+","+v.top+")");P&&aa.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)");B&&(f.width(C).height(da).margin({left:v.left,top:v.top}).svgContainer(L).xScale(I),va.select(".nv-interactive").call(f));
b.width(C).height(da);aa.select(".nv-stackedWrap").datum(M).transition().call(b);E&&(p.scale(I).ticks(C/100).tickSize(-da,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+da+")"),aa.select(".nv-x.nv-axis").transition().duration(0).call(p));K&&(z.scale(T).ticks("wiggle"==b.offset()?0:da/36).tickSize(-C,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):S),aa.select(".nv-y.nv-axis").transition().duration(0).call(z));b.dispatch.on("areaClick.toggle",function(b){1===
M.filter(function(a){return!a.disabled}).length?M.forEach(function(a){a.disabled=!1}):M.forEach(function(a,f){a.disabled=f!=b.seriesIndex});R.disabled=M.map(function(a){return!!a.disabled});N.stateChange(R);a.update()});r.dispatch.on("stateChange",function(b){R.disabled=b.disabled;N.stateChange(R);a.update()});k.dispatch.on("legendClick",function(f,k){f.disabled&&(ea=ea.map(function(a){a.disabled=!0;return a}),f.disabled=!1,b.style(f.style),R.style=b.style(),N.stateChange(R),a.update())});f.dispatch.on("elementMousemove",
function(k){b.clearHighlights();var r,t,w,y=[];M.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(f,n){t=m.interactiveBisect(f.values,k.pointXValue,a.x());b.highlightPoint(n,t,!0);var p=f.values[t];if("undefined"!==typeof p){"undefined"===typeof r&&(r=p);"undefined"===typeof w&&(w=a.xScale()(a.x()(p,t)));var v="expand"==b.style()?p.display.y:a.y()(p,t);y.push({key:f.key,value:v,color:H(f,f.seriesIndex),stackedValue:p.display})}});y.reverse();if(2<y.length){var A=a.yScale().invert(k.mouseY),
B=null;y.forEach(function(a,b){A=Math.abs(A);var f=Math.abs(a.stackedValue.y0),k=Math.abs(a.stackedValue.y);A>=f&&A<=k+f&&(B=b)});null!=B&&(y[B].highlight=!0)}var C=p.tickFormat()(a.x()(r,t)),D="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return z.tickFormat()(a)};f.tooltip.position({left:w+v.left,top:k.mouseY+v.top}).chartContainer(n.parentNode).enabled(O).valueFormatter(D).data({value:C,series:y})();f.renderGuideLine(w)});f.dispatch.on("elementMouseout",function(a){N.tooltipHide();
b.clearHighlights()});N.on("tooltipShow",function(f){if(O){var k=n.parentNode,r=f.pos[0]+(k.offsetLeft||0),t=f.pos[1]+(k.offsetTop||0),v=p.tickFormat()(b.x()(f.point,f.pointIndex)),w=z.tickFormat()(b.y()(f.point,f.pointIndex)),v=Q(f.series.key,v,w,f,a);m.tooltip.show([r,t],v,0>f.value?"n":"s",null,k)}});N.on("changeState",function(f){"undefined"!==typeof f.disabled&&M.length===f.disabled.length&&(M.forEach(function(a,b){a.disabled=f.disabled[b]}),R.disabled=f.disabled);"undefined"!==typeof f.style&&
b.style(f.style);a.update()})});return a}var b=m.models.stackedArea(),p=m.models.axis(),z=m.models.axis(),r=m.models.legend(),k=m.models.legend(),f=m.interactiveGuideline(),v={top:30,right:25,bottom:50,left:60},t=null,J=null,H=m.utils.defaultColor(),D=!0,G=!0,E=!0,K=!0,P=!1,B=!1,O=!0,Q=function(a,b,f,k,m){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},I,T,S=d3.format(",.2f"),R={style:b.style()},y=null,A="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=250,
V=["Stacked","Stream","Expanded"],W={},Z=250;p.orient("bottom").tickPadding(7);z.orient(P?"right":"left");k.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];N.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){O&&m.tooltip.cleanup()});a.dispatch=N;a.stacked=b;a.legend=r;a.controls=k;a.xAxis=p;a.yAxis=z;a.interactiveLayer=f;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=m.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return v;v.top="undefined"!=typeof b.top?b.top:v.top;v.right="undefined"!=typeof b.right?b.right:v.right;v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom;v.left="undefined"!=typeof b.left?b.left:v.left;return a};a.width=function(b){if(!arguments.length)return t;t=b;return a};a.height=
function(b){if(!arguments.length)return J;J=b;return a};a.color=function(f){if(!arguments.length)return H;H=m.utils.getColor(f);r.color(H);b.color(H);return a};a.showControls=function(b){if(!arguments.length)return D;D=b;return a};a.showLegend=function(b){if(!arguments.length)return G;G=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return K;K=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return P;P=b;z.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return B;B=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltips=function(b){if(!arguments.length)return O;O=b;return a};a.tooltipContent=function(b){if(!arguments.length)return Q;Q=b;return a};a.state=function(b){if(!arguments.length)return R;R=b;return a};a.defaultState=function(b){if(!arguments.length)return y;y=b;return a};a.noData=
function(b){if(!arguments.length)return A;A=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Z;Z=b;return a};a.controlsData=function(b){if(!arguments.length)return V;V=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return W;W=b;return a};z.setTickFormat=z.tickFormat;z.tickFormat=function(a){if(!arguments.length)return S;S=a;return z};return a}})();
(function(K,m){var a=0;K.widget("s3.timeplot",{options:{ajaxURL:null,autoSubmit:1E3,burnDown:!1,emptyMessage:"No data available",thousandSeparator:" ",thousandGrouping:"3",precision:null,defaultChartType:"linechart",defaultChartAxis:"totals"},_create:function(){this.id=a;a+=1},_init:function(){var a=K(this.element),m=this.options;this.widget_id=a.attr("id");this.input=a.find('input[type="hidden"][name="tp-data"]').first();this.svg=this.data=null;a=a.find(".tp-chart");this.chart=a.length?a.first():
null;this.currentChart={type:null,chart:null,container:null};m.numberFormatter=function(a){var b=m.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");a=b[0];b=1<b.length?"."+b[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+m.thousandGrouping+"})+(?!\\d))","g"),m.thousandSeparator);return a+b};this.refresh()},_destroy:function(){var a=this.element;this._unbindEvents();this.svg&&(this.svg.remove(),this.svg=null,a.find(".tp-chart").empty());this.data=
null;K.Widget.prototype.destroy.call(this)},refresh:function(){var a=this.element;this._unbindEvents();this._renderChart();this._renderChartOptions();this.options.autoSubmit?a.find(".tp-submit").hide():a.find(".tp-submit").show();this._bindEvents();a.find(".tp-throbber").hide()},_renderChartOptions:function(){var a=K(this.element),m=a.find(".tp-chart-controls").first().empty();if(!this.data.e){var z=a.attr("id"),a=K('<div class="pt-chart-opts">'),r=z+"-bchart-totals",z=z+"-lchart-totals";K(a).append(K('<span id="'+
z+'" class="tp-chart-icon tp-lchart"/><span class="tp-chart-label">Line Chart</span>'));K(a).append(K('<span id="'+r+'" class="tp-chart-icon tp-bchart"/><span class="tp-chart-label">Bar Chart</span>'));K(m).append(a)}},_renderChart:function(a){var b=this.chart;if(b){var m=this.options,r=this.currentChart,k=null,f=null;a?(k=a.type,f=a.axis):(r&&(k=r.type,f=r.axis),k&&f||(k=m.defaultChartType,f=m.defaultChartAxis));r.type==k&&r.axis==f||this._removeChart();a=this.element;m=a.find(".tp-empty");r=this.data;
null===r&&(r=JSON.parse(this.input.val()));r||(r={e:!0});this.data=r;if(r.e)this._removeChart(),a.find(".tp-empty").show();else switch(m.hide(),b.show(),f){case "totals":switch(k){case "barchart":this._renderBarChart(b,r.f,r.p);break;default:this._renderLineChart(b,r.f,r.p)}}}},_removeChart:function(){var a=this.chart;a&&(a.empty().hide(),a=this.currentChart,a.container=null,a.chart=null,a.type=null,a.axis=null,K(window).off("resize.tp"))},_renderBarChart:function(a,m,z){var b=[];for(m=0;m<z.length;m++){var k=
z[m];b.push({start:(new Date(k.t[0])).getTime(),value:k.v[0]})}z=this.currentChart;var f,p;z.chart?(p=z.container,f=z.chart,p.datum([{key:"reportChart",values:b}]).transition().duration(500).call(f)):(K(a).closest(".tp-chart-contents").show().css({width:"96%"}),K(a).css({height:"360px"}),p=d3.select(K(a).get(0)).append("svg").attr("class","nv"),f=nv.models.discreteBarChart().x(function(a){return a.start}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!1).showValues(!0).forceY([0,
1]),a=this.options.numberFormatter,f.valueFormat(a),f.yAxis.tickFormat(a),f.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){p.datum([{key:"reportChart",values:b}]).transition().duration(500).call(f);K(window).off("resize.tp").on("resize.tp",function(a){f.update(a)});return f}),z.container=p,z.chart=f,z.type="barchart",z.axis="totals")},_renderLineChart:function(a,m,z){var b=[],k={},f,p=0,t=1==m.length,J;for(J=0;J<m.length;J++){f=m[J][0];k.hasOwnProperty(f)&&
(p=k[f]+1);(k[f]=p)&&(f+=" ["+(p+1)+"]");var H={key:f,label:m[J][0],area:t},D,G=[];for(f=0;f<z.length;f++)D=z[f],G.push({start:(new Date(D.t[0])).getTime(),value:D.v[J]});H.values=G;b.push(H)}m=this.currentChart;var E,L;m.chart?(L=m.container,E=m.chart,L.datum(b).transition().duration(250).call(E)):(K(a).closest(".tp-chart-contents").show().css({width:"96%"}),K(a).css({height:"360px"}),L=d3.select(K(a).get(0)).append("svg").attr("class","nv"),E=nv.models.lineChart().x(function(a){return a.start}).y(function(a){return a.value}).margin({right:50}).transitionDuration(250).showLegend(!0).useInteractiveGuideline(!0).forceY([0,
1]),E.yAxis.tickFormat(this.options.numberFormatter),E.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){L.datum(b).transition().duration(500).call(E);K(window).off("resize.tp").on("resize.tp",function(a){E.update(a)});return E}),m.container=L,m.chart=E,m.type="linechart",m.axis="totals")},reload:function(a,m,z){z="undefined"!=typeof z?z:!0;"undefined"==typeof m&&(m=this._getFilters());var b=this,k=!1;K(this.element).find(".tp-throbber").show();if(a||m)k=
this._updateAjaxURL(a,m);k||z?K.ajax({url:this.options.ajaxURL,dataType:"json"}).done(function(a){b.input.val(JSON.stringify(a));b.data=a;b.refresh()}).fail(function(a,b,k){msg="UNAUTHORIZED"==k?i18n.gis_requires_login:a.responseText;console.log(msg)}):b.refresh()},_getOptions:function(){var a="#"+K(this.element).attr("id"),m=K(a+"-time").val(),z=a=null,r=null;"custom"!=m&&(m=m.split("|"),3==m.length&&(a=m[0],z=m[1],r=m[2]));return{start:a,end:z,slots:r}},_getFilters:function(){var a=K("#"+this.widget_id+
"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(p){return null}},_updateAjaxURL:function(a,m){var b=this.options.ajaxURL;if(!b)return!1;var p,k=b.split("?"),f;1<k.length?(p=k[1],f=p.split("&")):f=[];var v=[],b=!1;if(a)for(var t in a)p=a[t],p=t+"="+p,b||-1!=K.inArray(p,f)||(b=!0),v.push(p);t={};p={};var J,H,D,G;if(m)for(H=0,D=m.length;H<D;H++)J=m[H],G=J[0],J=J[1],null===J?t[G]||(p[G]=!0):(p[G]&&(p[G]=!1),J=G+"="+encodeURIComponent(J),t[G]?t[G].push(J):t[G]=[J]);H=
0;for(D=f.length;H<D;H++)J=f[H].split("="),1<J.length&&(G=decodeURIComponent(J[0]),J=decodeURIComponent(J[1]),p[G]?b=!0:t[G]?b||-1!=K.inArray(G+"="+J,t[G])||(b=!0):a&&a.hasOwnProperty(G)||v.push(f[H]));for(G in t)for(H=0,D=t[G].length;H<D;H++)b||-1!=K.inArray(t[G][H],f)||(b=!0),v.push(t[G][H]);G=v.join("&");k=k[0];G&&(k=k+"?"+G);this.options.ajaxURL=k;return b},_parseDate:function(a){return d3.time.format("%Y-%m-%dT%H:%M:%S+00:00").parse(a)},_bindEvents:function(){var a=this,m="#"+this.widget_id;
K(m+"-options legend").click(function(){K(this).siblings().toggle();K(this).children().toggle()});K(m+"-filters legend").click(function(){K(this).siblings().toggle();K(this).children().toggle()});K(m+"-time").on("change.autosubmit",function(){K(m+"-tp-form").trigger("optionChanged")});if(this.options.autoSubmit){var z=this.options.autoSubmit;K(m+"-tp-form").on("optionChanged",function(){var b=K(this);if(!b.data("noAutoSubmit")){var k=b.data("autoSubmitTimeout");k&&clearTimeout(k);k=setTimeout(function(){var b=
a._getOptions(),k=a._getFilters();a.reload(b,k,!1)},z);b.data("autoSubmitTimeout",k)}})}else K(m+"-tp-form input.tp-submit").on("click.timeplot",function(){var b=a._getOptions(),k=a._getFilters();a.reload(b,k,!1)});K(m+"-lchart-totals").click(function(){a._renderChart({type:"linechart",axis:"totals"})});K(m+"-bchart-totals").click(function(){a._renderChart({type:"barchart",axis:"totals"})})},_unbindEvents:function(){var a="#"+this.widget_id;K(window).off("resize.timeplot");K(a+"-tp-form").off("optionChanged");
K(a+"-tp-form input.tp-submit").off("click.timeplot");K(a+"-time").unbind("change.autosubmit");K(a+"-options legend").unbind("click");K(a+"-filters legend").unbind("click");K(a+"-lchart-totals,"+a+"-bchart-totals").unbind("click")}})})(jQuery);
