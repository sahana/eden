/*
 2013-2017 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,c){e!=Array.prototype&&e!=Object.prototype&&(e[a]=c.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var a=0;return $jscomp.iteratorPrototype(function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,a){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var c=0,f={next:function(){if(c<e.length){var n=c++;return{value:a(n,e[n]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(e,a,c,f){if(a){c=$jscomp.global;e=e.split(".");for(f=0;f<e.length-1;f++){var n=e[f];n in c||(c[n]={});c=c[n]}e=e[e.length-1];f=c[e];a=a(f);a!=f&&null!=a&&$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var a=e[Symbol.iterator];return a?a.call(e):$jscomp.arrayIterator(e)};$jscomp.owns=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)};
$jscomp.polyfill("WeakMap",function(e){function a(a){$jscomp.owns(a,f)||$jscomp.defineProperty(a,f,{value:{}})}function c(c){var e=Object[c];e&&(Object[c]=function(c){a(c);return e(c)})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),f=new e([[a,2],[c,3]]);if(2!=f.get(a)||3!=f.get(c))return!1;f["delete"](a);f.set(c,4);return!f.has(a)&&4==f.get(c)}catch(w){return!1}}())return e;var f="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var n=0,h=function(a){this.id_=(n+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};h.prototype.set=function(c,e){a(c);if(!$jscomp.owns(c,f))throw Error("WeakMap key fail: "+c);c[f][this.id_]=e;return this};h.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};h.prototype.has=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};h.prototype["delete"]=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return h},"es6-impl","es3");$jscomp.MapEntry=function(){};$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(e){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new e($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var f=c.entries(),h=f.next();if(h.done||h.value[0]!=a||"s"!=h.value[1])return!1;h=f.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!f.next().done?!1:!0}catch(F){return!1}}())return e;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var a=new WeakMap,c=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(a,c){var e=f(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};c.prototype["delete"]=
function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};c.prototype.has=function(a){return!!f(this,a).entry};c.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};c.prototype.entries=function(){return n(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return n(this,function(a){return a.key})};c.prototype.values=function(){return n(this,function(a){return a.value})};c.prototype.forEach=function(a,c){for(var e=this.entries(),f;!(f=e.next()).done;)f=f.value,a.call(c,f[1],f[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var f=function(c,e){var f=e&&typeof e;"object"==f||"function"==f?a.has(e)?f=a.get(e):(f=""+ ++r,a.set(e,f)):f="p_"+e;var h=c.data_[f];if(h&&$jscomp.owns(c.data_,f))for(var k=0;k<h.length;k++){var n=
h[k];if(e!==e&&n.key!==n.key||e===n.key)return{id:f,list:h,index:k,entry:n}}return{id:f,list:h,index:-1,entry:void 0}},n=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=a.next=a.head=a},r=0;return c},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(e){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),f=new e($jscomp.makeIterator([a]));if(!f.has(a)||1!=f.size||f.add(a)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var n=f.entries(),h=n.next();if(h.done||h.value[0]!=a||h.value[1]!=a)return!1;h=n.next();return h.done||h.value[0]==a||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:n.next().done}catch(r){return!1}}())return e;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=
function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(a,e){var c=this;this.map_.forEach(function(f){return a.call(e,f,f,c)})};return a},"es6-impl","es3");$jscomp.polyfill("Array.prototype.entries",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6-impl","es3");
$jscomp.findInternal=function(e,a,c){e instanceof String&&(e=String(e));for(var f=e.length,n=0;n<f;n++){var h=e[n];if(a.call(c,h,n,e))return{i:n,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function e(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function c(b){return null===b?NaN:+b}function f(b){return!isNaN(b)}function n(b){return{left:function(d,g,m,t){3>arguments.length&&(m=0);4>arguments.length&&(t=d.length);for(;m<t;){var a=m+t>>>1;0>b(d[a],g)?m=a+1:t=a}return m},right:function(d,g,m,t){3>arguments.length&&(m=0);4>arguments.length&&(t=d.length);for(;m<t;){var a=m+t>>>1;0<b(d[a],
g)?t=a:m=a+1}return m}}}function h(b){return b.length}function r(b,d){for(var g in d)Object.defineProperty(b.prototype,g,{value:d[g],enumerable:!1})}function v(){this._=Object.create(null)}function k(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function w(b){return"\x00"===(b+="")[0]?b.slice(1):b}function z(b){return k(b)in this._}function F(b){return(b=k(b))in this._&&delete this._[b]}function G(){var b=[],d;for(d in this._)b.push(w(d));return b}function H(){var b=0,d;for(d in this._)++b;
return b}function D(){for(var b in this._)return!1;return!0}function J(){this._=Object.create(null)}function B(b){return b}function O(b,d,g){return function(){var m=g.apply(d,arguments);return m===d?b:m}}function K(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var g=0,m=ce.length;g<m;++g){var t=ce[g]+d;if(t in b)return t}}function M(){}function C(){}function p(b){function d(){for(var d=g,m=-1,a=d.length,c;++m<a;)(c=d[m].on)&&c.apply(this,arguments);return b}var g=[],m=new v;d.on=
function(d,a){var t=m.get(d),S;if(2>arguments.length)return t&&t.on;t&&(t.on=null,g=g.slice(0,S=g.indexOf(t)).concat(g.slice(S+1)),m.remove(d));a&&g.push(m.set(d,{on:a}));return b};return d}function V(){y.event.preventDefault()}function R(){for(var b=y.event,d;d=b.sourceEvent;)b=d;return b}function I(b){for(var d=new C,g=0,m=arguments.length;++g<m;)d[arguments[g]]=p(d);d.of=function(g,m){return function(t){try{var a=t.sourceEvent=y.event;t.target=b;y.event=t;d[t.type].apply(g,m)}finally{y.event=a}}};
return d}function E(b){Zb(b,qa);return b}function u(b){return"function"===typeof b?b:function(){return $c(b,this)}}function N(b){return"function"===typeof b?b:function(){return ad(b,this)}}function Q(b,d){function g(){this.removeAttribute(b)}function m(){this.removeAttributeNS(b.space,b.local)}function t(){this.setAttribute(b,d)}function a(){this.setAttributeNS(b.space,b.local,d)}function c(){var g=d.apply(this,arguments);null==g?this.removeAttribute(b):this.setAttribute(b,g)}function e(){var g=d.apply(this,
arguments);null==g?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,g)}b=y.ns.qualify(b);return null==d?b.local?m:g:"function"===typeof d?b.local?e:c:b.local?a:t}function A(b){return new RegExp("(?:^|\\s+)"+y.requote(b)+"(?:\\s+|$)","g")}function l(b,d){function g(){for(var g=-1;++g<t;)b[g](this,d)}function m(){for(var g=-1,m=d.apply(this,arguments);++g<t;)b[g](this,m)}b=(b+"").trim().split(/^|\s+/).map(q);var t=b.length;return"function"===typeof d?m:g}function q(b){var d=
A(b);return function(g,m){if(t=g.classList)return m?t.add(b):t.remove(b);var t=g.getAttribute("class")||"";m?(d.lastIndex=0,d.test(t)||g.setAttribute("class",(t+" "+b).trim().replace(/\s+/g," "))):g.setAttribute("class",t.replace(d," ").trim().replace(/\s+/g," "))}}function Z(b,d,g){function m(){this.style.removeProperty(b)}function t(){this.style.setProperty(b,d,g)}function a(){var m=d.apply(this,arguments);null==m?this.style.removeProperty(b):this.style.setProperty(b,m,g)}return null==d?m:"function"===
typeof d?a:t}function ca(b,d){function g(){delete this[b]}function m(){this[b]=d}function t(){var g=d.apply(this,arguments);null==g?delete this[b]:this[b]=g}return null==d?g:"function"===typeof d?t:m}function Y(b){function d(){var d=this.ownerDocument,g=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===g&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(g,b)}function g(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=y.ns.qualify(b)).local?g:d}function aa(){var b=this.parentNode;b&&b.removeChild(this)}function x(b){return function(){return $b(this,b)}}function U(b){arguments.length||(b=a);return function(d,g){return d&&g?b(d.__data__,g.__data__):!d-!g}}function X(b,d){for(var g=0,m=b.length;g<m;g++)for(var t=b[g],a=0,c=t.length,e;a<c;a++)(e=t[a])&&d(e,a,g);return b}function oa(b){Zb(b,Xa);return b}function Ba(b){var d,g;return function(m,t,a){m=b[a].update;var S=m.length;a!=g&&(g=a,d=0);for(t>=d&&
(d=t+1);!(t=m[d])&&++d<S;);return t}}function W(b,d,g){function m(){var d=this[c];d&&(this.removeEventListener(b,d,d.$),delete this[c])}function t(){var t=P(d,Ua(arguments));m.call(this);this.addEventListener(b,this[c]=t,t.$=g);t._=d}function a(){var d=new RegExp("^__on([^.]+)"+y.requote(b)+"$"),g,m;for(m in this)if(g=m.match(d)){var t=this[m];this.removeEventListener(g[1],t,t.$);delete this[m]}}var c="__on"+b,e=b.indexOf("."),P=ka;0<e&&(b=b.slice(0,e));var T=bd.get(b);T&&(b=T,P=la);return e?d?t:
m:d?M:a}function ka(b,d){return function(g){var m=y.event;y.event=g;d[0]=this.__data__;try{b.apply(this,d)}finally{y.event=m}}}function la(b,d){var g=ka(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||g.call(this,b)}}function wa(b){var d=".dragsuppress-"+ ++pg,g="click"+d,m=y.select(e(b)).on("touchmove"+d,V).on("dragstart"+d,V).on("selectstart"+d,V);null==jb&&(jb="onselectstart"in b?!1:K(b.style,"userSelect"));if(jb){var t=(b&&(b.ownerDocument||b.document||
b).documentElement).style;var a=t[jb];t[jb]="none"}return function(b){m.on(d,null);jb&&(t[jb]=a);if(b){var S=function(){m.on(g,null)};m.on(g,function(){V();S()},!0);setTimeout(S,0)}}}function xa(b,d){d.changedTouches&&(d=d.changedTouches[0]);var g=b.ownerSVGElement||b;if(g.createSVGPoint){var m=g.createSVGPoint();if(0>cd&&(g=e(b),g.scrollX||g.scrollY)){var g=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),t=g[0][0].getScreenCTM();
cd=!(t.f||t.e);g.remove()}cd?(m.x=d.pageX,m.y=d.pageY):(m.x=d.clientX,m.y=d.clientY);m=m.matrixTransform(b.getScreenCTM().inverse());return[m.x,m.y]}m=b.getBoundingClientRect();return[d.clientX-m.left-b.clientLeft,d.clientY-m.top-b.clientTop]}function ga(){return y.event.changedTouches[0].identifier}function da(b,d,g){return(d[0]-b[0])*(g[1]-b[1])-(d[1]-b[1])*(g[0]-b[0])}function fa(b){return 1<b?0:-1>b?ha:Math.acos(b)}function ya(b){return 1<b?Ca:-1>b?-Ca:Math.asin(b)}function va(b){return((b=Math.exp(b))+
1/b)/2}function ta(b){return(b=Math.sin(b/2))*b}function ra(){}function Ja(b,d,g){return this instanceof Ja?void(this.h=+b,this.s=+d,this.l=+g):2>arguments.length?b instanceof Ja?new Ja(b.h,b.s,b.l):bc(""+b,cc,Ja):new Ja(b,d,g)}function sa(b,d,g){function m(b){360<b?b-=360:0>b&&(b+=360);return 60>b?a+(t-a)*b/60:180>b?t:240>b?a+(t-a)*(240-b)/60:a}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;g=0>g?0:1<g?1:g;var t=.5>=g?g*(1+d):g+d-g*d;var a=2*g-t;return new Ka(Math.round(255*m(b+120)),
Math.round(255*m(b)),Math.round(255*m(b-120)))}function ma(b,d,g){return this instanceof ma?void(this.h=+b,this.c=+d,this.l=+g):2>arguments.length?b instanceof ma?new ma(b.h,b.c,b.l):b instanceof na?ea(b.l,b.a,b.b):ea((b=dc((b=y.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ma(b,d,g)}function Ga(b,d,g){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new na(g,Math.cos(b*=ia)*d,Math.sin(b)*d)}function na(b,d,g){return this instanceof na?void(this.l=+b,this.a=+d,this.b=+g):2>arguments.length?b instanceof na?new na(b.l,
b.a,b.b):b instanceof ma?Ga(b.h,b.c,b.l):dc((b=Ka(b)).r,b.g,b.b):new na(b,d,g)}function za(b,d,g){b=(b+16)/116;g=b-g/200;d=Ea(b+d/500)*de;b=Ea(b)*ee;g=Ea(g)*fe;return new Ka(kb(3.2404542*d-1.5371385*b-.4985314*g),kb(-.969266*d+1.8760108*b+.041556*g),kb(.0556434*d-.2040259*b+1.0572252*g))}function ea(b,d,g){return 0<b?new ma(Math.atan2(g,d)*Aa,Math.sqrt(d*d+g*g),b):new ma(NaN,NaN,b)}function Ea(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Fa(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function kb(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ka(b,d,g){return this instanceof Ka?void(this.r=~~b,this.g=~~d,this.b=~~g):2>arguments.length?b instanceof Ka?new Ka(b.r,b.g,b.b):bc(""+b,Ka,sa):new Ka(b,d,g)}function vb(b){return new Ka(b>>16,b>>8&255,b&255)+""}function bb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function bc(b,d,g){var m=0,t=0,a=0,c;if(c=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var e=c[2].split(",");
switch(c[1]){case "hsl":return g(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return d(dd(e[0]),dd(e[1]),dd(e[2]))}}if(g=ec.get(b))return d(g.r,g.g,g.b);null==b||"#"!==b.charAt(0)||isNaN(g=parseInt(b.slice(1),16))||(4===b.length?(m=(g&3840)>>4,m|=m>>4,t=g&240,t|=t>>4,a=g&15,a|=a<<4):7===b.length&&(m=(g&16711680)>>16,t=(g&65280)>>8,a=g&255));return d(m,t,a)}function cc(b,d,g){var m=Math.min(b/=255,d/=255,g/=255),t=Math.max(b,d,g),a=t-m,c=(t+m)/2;a?(m=.5>c?a/(t+m):a/(2-t-m),
b=60*(b==t?(d-g)/a+(d<g?6:0):d==t?(g-b)/a+2:(b-d)/a+4)):(b=NaN,m=0<c&&1>c?0:b);return new Ja(b,m,c)}function dc(b,d,g){b=Ib(b);d=Ib(d);g=Ib(g);var m=Fa((.4124564*b+.3575761*d+.1804375*g)/de),t=Fa((.2126729*b+.7151522*d+.072175*g)/ee);b=Fa((.0193339*b+.119192*d+.9503041*g)/fe);return na(116*t-16,500*(m-t),200*(t-b))}function Ib(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function dd(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function ua(b){return"function"===
typeof b?b:function(){return b}}function ed(b){return function(d,g,m){2===arguments.length&&"function"===typeof g&&(m=g,g=null);return Jb(d,g,b,m)}}function Jb(b,d,g,m){function t(){var b=P.status,d;if(d=!b)d=(d=P.responseType)&&"text"!==d?P.response:P.responseText;if(d||200<=b&&300>b||304===b){try{var m=g.call(a,P)}catch(og){c.error.call(a,og);return}c.load.call(a,m)}else c.error.call(a,P)}var a={},c=y.dispatch("beforesend","progress","load","error"),e={},P=new XMLHttpRequest,T=null;!this.XDomainRequest||
"withCredentials"in P||!/^(http(s)?:)?\/\//.test(b)||(P=new XDomainRequest);"onload"in P?P.onload=P.onerror=t:P.onreadystatechange=function(){3<P.readyState&&t()};P.onprogress=function(b){var d=y.event;y.event=b;try{c.progress.call(a,P)}finally{y.event=d}};a.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return e[b];null==d?delete e[b]:e[b]=d+"";return a};a.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return a};a.responseType=function(b){if(!arguments.length)return T;
T=b;return a};a.response=function(b){g=b;return a};["get","post"].forEach(function(b){a[b]=function(){return a.send.apply(a,[b].concat(Ua(arguments)))}});a.send=function(g,m,t){2===arguments.length&&"function"===typeof m&&(t=m,m=null);P.open(g,b,!0);null==d||"accept"in e||(e.accept=d+",*/*");if(P.setRequestHeader)for(var S in e)P.setRequestHeader(S,e[S]);null!=d&&P.overrideMimeType&&P.overrideMimeType(d);null!=T&&(P.responseType=T);if(null!=t)a.on("error",t).on("load",function(b){t(null,b)});c.beforesend.call(a,
P);P.send(null==m?null:m);return a};a.abort=function(){P.abort();return a};y.rebind(a,c,"on");return null==m?a:a.get(qg(m))}function qg(b){return 1===b.length?function(d,g){b(null==d?g:null)}:b}function fc(b,d,g){var m=arguments.length;2>m&&(d=0);3>m&&(g=Date.now());m={c:b,t:g+d,n:null};gc?gc.n=m:hc=m;gc=m;ic||(jc=clearTimeout(jc),ic=1,ge(kc));return m}function kc(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(jc),jc=setTimeout(kc,b)),ic=0):(ic=1,ge(kc))}function he(){for(var b=Date.now(),
d=hc;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=hc,g=Infinity;d;)d.c?(d.t<g&&(g=d.t),d=(b=d).n):d=b?b.n=d.n:hc=d.n;gc=b;return g}function fd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,g=b.thousands,m=b.grouping,t=b.currency,a=m&&g?function(b,d){for(var t=b.length,a=[],S=0,c=m[0],e=0;0<t&&0<c;){e+c+1>d&&(c=Math.max(1,d-e));a.push(b.substring(t-=c,t+c));if((e+=c+1)>d)break;c=m[S=(S+1)%m.length]}return a.reverse().join(g)}:B;return function(b){b=
je.exec(b);var g=b[1]||" ",m=b[2]||">",S=b[3]||"-",c=b[4]||"",e=b[5],pa=+b[6],f=b[7],h=b[8],l=b[9],q=1,p="",k="",n=!1,u=!0;h&&(h=+h.substring(1));if(e||"0"===g&&"="===m)e=g="0",m="=";switch(l){case "n":f=!0;l="g";break;case "%":q=100;k="%";l="f";break;case "p":q=100;k="%";l="r";break;case "b":case "o":case "x":case "X":"#"===c&&(p="0"+l.toLowerCase());case "c":u=!1;case "d":n=!0;h=0;break;case "s":q=-1,l="r"}"$"===c&&(p=t[0],k=t[1]);"r"!=l||h||(l="g");if(null!=h)if("g"==l)h=Math.max(1,Math.min(21,
h));else if("e"==l||"f"==l)h=Math.max(0,Math.min(20,h));var l=sg.get(l)||tg,r=e&&f;return function(b){var t=k;if(n&&b%1)return"";var c=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===S?"":S;0>q?(t=y.formatPrefix(b,h),b=t.scale(b),t=t.symbol+k):b*=q;b=l(b,h);var P=b.lastIndexOf(".");if(0>P)if(P=u?b.lastIndexOf("e"):-1,0>P){var L=b;b=""}else L=b.substring(0,P),b=b.substring(P);else L=b.substring(0,P),b=d+b.substring(P+1);!e&&f&&(L=a(L,Infinity));var P=p.length+L.length+b.length+(r?0:c.length),T=P<pa?Array(P=pa-
P+1).join(g):"";r&&(L=a(T+L,T.length?pa-b.length:Infinity));c+=p;b=L+b;return("<"===m?c+b+T:">"===m?T+c+b:"^"===m?T.substring(0,P>>=1)+c+b+T.substring(P):c+(r?b:T+b))+t}}}function tg(b){return b+""}function Ya(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function lb(b,d,g){function m(d){var g=b(d),m=a(g,1);return d-g<m-d?g:m}function t(g){d(g=b(new La(g-1)),1);return g}function a(b,g){d(b=new La(+b),g);return b}function c(b,m,a){b=t(b);var c=[];if(1<a)for(;b<m;)g(b)%
a||c.push(new Date(+b)),d(b,1);else for(;b<m;)c.push(new Date(+b)),d(b,1);return c}b.floor=b;b.round=m;b.ceil=t;b.offset=a;b.range=c;var e=b.utc=lc(b);e.floor=e;e.round=lc(m);e.ceil=lc(t);e.offset=lc(a);e.range=function(b,d,g){try{La=Ya;var m=new Ya;m._=b;return c(m,d,g)}finally{La=Date}};return b}function lc(b){return function(d,g){try{La=Ya;var m=new Ya;m._=d;return b(m,g)._}finally{La=Date}}}function ug(b){function d(b){function d(d){for(var g=[],t=-1,a=0,c,e;++t<m;)if(37===b.charCodeAt(t)){g.push(b.slice(a,
t));null!=(c=ke[a=b.charAt(++t)])&&(a=b.charAt(++t));if(e=C[a])a=e(d,null==c?"e"===a?" ":"0":c);g.push(a);a=t+1}g.push(b.slice(a,t));return g.join("")}var m=b.length;d.parse=function(d){var m={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(g(m,b,d,0)!=d.length)return null;"p"in m&&(m.H=m.H%12+12*m.p);d=null!=m.Z&&La!==Ya;var t=new (d?Ya:La);"j"in m?t.setFullYear(m.y,0,m.j):"W"in m||"U"in m?("w"in m||(m.w="W"in m?1:0),t.setFullYear(m.y,0,1),t.setFullYear(m.y,0,"W"in m?(m.w+6)%7+7*m.W-(t.getDay()+5)%7:m.w+
7*m.U-(t.getDay()+6)%7)):t.setFullYear(m.y,m.m,m.d);t.setHours(m.H+(m.Z/100|0),m.M+m.Z%100,m.S,m.L);return d?t._:t};d.toString=function(){return b};return d}function g(b,d,g,m){for(var t,a=0,c=d.length,e=g.length;a<c;){if(m>=e)return-1;t=d.charCodeAt(a++);if(37===t){if(t=d.charAt(a++),t=A[t in ke?d.charAt(a++):t],!t||0>(m=t(b,g,m)))return-1}else if(t!=g.charCodeAt(m++))return-1}return m}var m=b.dateTime,t=b.date,a=b.time,c=b.periods,e=b.days,P=b.shortDays,T=b.months,f=b.shortMonths;d.utc=function(b){function g(b){try{La=
Ya;var d=new La;d._=b;return m(d)}finally{La=Date}}var m=d(b);g.parse=function(b){try{La=Ya;var d=m.parse(b);return d&&d._}finally{La=Date}};g.toString=m.toString;return g};d.multi=d.utc.multi=vg;var h=y.map(),l=mc(e),q=nc(e),k=mc(P),p=nc(P),n=mc(T),u=nc(T),r=mc(f),x=nc(f);c.forEach(function(b,d){h.set(b.toLowerCase(),d)});var C={a:function(b){return P[b.getDay()]},A:function(b){return e[b.getDay()]},b:function(b){return f[b.getMonth()]},B:function(b){return T[b.getMonth()]},c:d(m),d:function(b,d){return Na(b.getDate(),
d,2)},e:function(b,d){return Na(b.getDate(),d,2)},H:function(b,d){return Na(b.getHours(),d,2)},I:function(b,d){return Na(b.getHours()%12||12,d,2)},j:function(b,d){return Na(1+ba.dayOfYear(b),d,3)},L:function(b,d){return Na(b.getMilliseconds(),d,3)},m:function(b,d){return Na(b.getMonth()+1,d,2)},M:function(b,d){return Na(b.getMinutes(),d,2)},p:function(b){return c[+(12<=b.getHours())]},S:function(b,d){return Na(b.getSeconds(),d,2)},U:function(b,d){return Na(ba.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Na(ba.mondayOfYear(b),d,2)},x:d(t),X:d(a),y:function(b,d){return Na(b.getFullYear()%100,d,2)},Y:function(b,d){return Na(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},A={a:function(b,d,g){k.lastIndex=0;return(d=k.exec(d.slice(g)))?(b.w=p.get(d[0].toLowerCase()),g+d[0].length):-1},A:function(b,d,g){l.lastIndex=0;return(d=l.exec(d.slice(g)))?(b.w=q.get(d[0].toLowerCase()),g+d[0].length):-1},b:function(b,d,g){r.lastIndex=0;return(d=r.exec(d.slice(g)))?(b.m=x.get(d[0].toLowerCase()),
g+d[0].length):-1},B:function(b,d,g){n.lastIndex=0;return(d=n.exec(d.slice(g)))?(b.m=u.get(d[0].toLowerCase()),g+d[0].length):-1},c:function(b,d,m){return g(b,C.c.toString(),d,m)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,g){d=h.get(d.slice(g,g+=2).toLowerCase());return null==d?-1:(b.p=d,g)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,m){return g(b,C.x.toString(),d,m)},X:function(b,d,m){return g(b,C.X.toString(),d,m)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Na(b,d,g){var m=0>b?"-":"";b=(m?-b:
b)+"";var t=b.length;return m+(t<g?Array(g-t+1).join(d)+b:b)}function mc(b){return new RegExp("^(?:"+b.map(y.requote).join("|")+")","i")}function nc(b){for(var d=new v,g=-1,m=b.length;++g<m;)d.set(b[g].toLowerCase(),g);return d}function Dg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+1)))?(b.w=+d[0],g+d[0].length):-1}function Cg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g)))?(b.U=+d[0],g+d[0].length):-1}function Eg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g)))?(b.W=+d[0],g+d[0].length):
-1}function Gg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+4)))?(b.y=+d[0],g+d[0].length):-1}function Fg(b,d,g){Da.lastIndex=0;if(d=Da.exec(d.slice(g,g+2))){var m=+d[0];b=(b.y=m+(68<m?1900:2E3),g+d[0].length)}else b=-1;return b}function Hg(b,d,g){return/^[+-]\d{4}$/.test(d=d.slice(g,g+5))?(b.Z=-d,g+5):-1}function zg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.m=d[0]-1,g+d[0].length):-1}function le(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.d=+d[0],g+d[0].length):
-1}function xg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+3)))?(b.j=+d[0],g+d[0].length):-1}function me(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.H=+d[0],g+d[0].length):-1}function Ag(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.M=+d[0],g+d[0].length):-1}function Bg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+2)))?(b.S=+d[0],g+d[0].length):-1}function yg(b,d,g){Da.lastIndex=0;return(d=Da.exec(d.slice(g,g+3)))?(b.L=+d[0],g+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var g=ja(d)/60|0,d=ja(d)%60;return b+Na(g,"0",2)+Na(d,"0",2)}function Ig(b,d,g){ne.lastIndex=0;return(b=ne.exec(d.slice(g,g+1)))?g+b[0].length:-1}function vg(b){for(var d=b.length,g=-1;++g<d;)b[g][0]=this(b[g][0]);return function(d){for(var g=0,m=b[g];!m[1](d);)m=b[++g];return m[0](d)}}function gd(){}function oe(b,d,g){var m=g.s=b+d,t=m-b;g.t=b-(m-t)+(d-t)}function oc(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function hd(b,d,g){var m=-1;g=b.length-g;
for(d.lineStart();++m<g;){var t=b[m];d.point(t[0],t[1],t[2])}d.lineEnd()}function qe(b,d){var g=-1,m=b.length;for(d.polygonStart();++g<m;)hd(b[g],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ia;d=d*ia/2+ha/4;var g=b-m,c=0<=g?1:-1,g=c*g,e=Math.cos(d),S=Math.sin(d),L=a*S;mb.add(Math.atan2(L*c*Math.sin(g),t*e+L*Math.cos(g)));m=b;t=e;a=S}var d,g,m,t,a;Oa.point=function(c,e){Oa.point=b;m=(d=c)*ia;t=Math.cos(e=(g=e)*ia/2+ha/4);a=Math.sin(e)};Oa.lineEnd=function(){b(d,g)}}function nb(b){var d=b[0];
b=b[1];var g=Math.cos(b);return[g*Math.cos(d),g*Math.sin(d),Math.sin(b)]}function pc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function wb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function id(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function qc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function rc(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function sc(b){return[Math.atan2(b[1],b[0]),ya(b[2])]}function tc(b,d){return 1E-6>ja(b[0]-d[0])&&1E-6>ja(b[1]-
d[1])}function jd(b,d){b*=ia;var g=Math.cos(d*=ia);Kb(g*Math.cos(b),g*Math.sin(b),Math.sin(d))}function Kb(b,d,g){++Lb;ob+=(b-ob)/Lb;pb+=(d-pb)/Lb;Za+=(g-Za)/Lb}function re(){function b(b,a){b*=ia;var t=Math.cos(a*=ia),c=t*Math.cos(b),t=t*Math.sin(b),e=Math.sin(a),S=Math.atan2(Math.sqrt((S=g*e-m*t)*S+(S=m*c-d*e)*S+(S=d*t-g*c)*S),d*c+g*t+m*e);uc+=S;cb+=S*(d+(d=c));db+=S*(g+(g=t));Va+=S*(m+(m=e));Kb(d,g,m)}var d,g,m;Ra.point=function(t,a){t*=ia;var c=Math.cos(a*=ia);d=c*Math.cos(t);g=c*Math.sin(t);
m=Math.sin(a);Ra.point=b;Kb(d,g,m)}}function se(){Ra.point=jd}function Kg(){function b(b,d){b*=ia;var g=Math.cos(d*=ia),c=g*Math.cos(b),g=g*Math.sin(b),e=Math.sin(d),S=t*e-a*g,L=a*c-m*e,pa=m*g-t*c,f=Math.sqrt(S*S+L*L+pa*pa),h=m*c+t*g+a*e,l=f&&-fa(h)/f,f=Math.atan2(f,h);xb+=l*S;yb+=l*L;eb+=l*pa;uc+=f;cb+=f*(m+(m=c));db+=f*(t+(t=g));Va+=f*(a+(a=e));Kb(m,t,a)}var d,g,m,t,a;Ra.point=function(c,e){d=c;g=e;Ra.point=b;c*=ia;var S=Math.cos(e*=ia);m=S*Math.cos(c);t=S*Math.sin(c);a=Math.sin(e);Kb(m,t,a)};Ra.lineEnd=
function(){b(d,g);Ra.lineEnd=se;Ra.point=jd}}function te(b,d){function g(g,t){return g=b(g,t),d(g[0],g[1])}b.invert&&d.invert&&(g.invert=function(g,t){return g=d.invert(g,t),g&&b.invert(g[0],g[1])});return g}function Mb(){return!0}function ue(b,d,g,m,t){var a=[],c=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,g=b[0],m=b[d];if(tc(g,m)){t.lineStart();for(m=0;m<d;++m)t.point((g=b[m])[0],g[1]);t.lineEnd()}else d=new vc(g,b,null,!0),g=new vc(g,null,d,!1),d.o=g,a.push(d),c.push(g),d=new vc(m,
b,null,!1),g=new vc(m,null,d,!0),d.o=g,a.push(d),c.push(g)}});c.sort(d);ve(a);ve(c);if(a.length){b=0;d=g;for(g=c.length;b<g;++b)c[b].e=d=!d;d=a[0];for(var e,P;;){for(var T=d,f=!0;T.v;)if((T=T.n)===d)return;e=T.z;t.lineStart();do{T.v=T.o.v=!0;if(T.e){if(f)for(b=0,g=e.length;b<g;++b)t.point((P=e[b])[0],P[1]);else m(T.x,T.n.x,1,t);T=T.n}else{if(f)for(e=T.p.z,b=e.length-1;0<=b;--b)t.point((P=e[b])[0],P[1]);else m(T.x,T.p.x,-1,t);T=T.p}T=T.o;e=T.z;f=!f}while(!T.v);t.lineEnd()}}}function ve(b){if(d=b.length){for(var d,
g=0,m=b[0],a;++g<d;)m.n=a=b[g],a.p=m,m=a;m.n=a=b[0];a.p=m}}function vc(b,d,g,m){this.x=b;this.z=d;this.o=g;this.e=m;this.v=!1;this.n=this.p=null}function we(b,d,g,m){return function(a,c){function t(d,g){var m=a(d,g);b(d=m[0],g=m[1])&&c.point(d,g)}function e(b,d){var g=a(b,d);q.point(g[0],g[1])}function S(){p.point=e;q.lineStart()}function T(){p.point=t;q.lineEnd()}function f(b,d){A.push([b,d]);var g=a(b,d);r.point(g[0],g[1])}function h(){r.lineStart();A=[]}function l(){f(A[0][0],A[0][1]);r.lineEnd();
var b=r.clean(),d=u.buffer();var g=d.length;A.pop();C.push(A);A=null;if(g)if(b&1){b=d[0];g=b.length-1;var d=-1,m;if(0<g){x||(c.polygonStart(),x=!0);for(c.lineStart();++d<g;)c.point((m=b[d])[0],m[1]);c.lineEnd()}}else 1<g&&b&2&&d.push(d.pop().concat(d.shift())),n.push(d.filter(Lg))}var q=d(c),k=a.invert(m[0],m[1]),p={point:t,lineStart:S,lineEnd:T,polygonStart:function(){p.point=f;p.lineStart=h;p.lineEnd=l;n=[];C=[]},polygonEnd:function(){p.point=t;p.lineStart=S;p.lineEnd=T;n=y.merge(n);var b=k;var d=
C;var m=b[0],a=b[1],e=[Math.sin(m),-Math.cos(m),0],P=0,L=0;mb.reset();for(var f=0,pa=d.length;f<pa;++f){var h=d[f],Ha=h.length;if(Ha)for(var l=h[0],q=l[0],b=l[1]/2+ha/4,u=Math.sin(b),r=Math.cos(b),ac=1;;){ac===Ha&&(ac=0);var b=h[ac],A=b[0],Hb=b[1]/2+ha/4,I=Math.sin(Hb),Hb=Math.cos(Hb),v=A-q,W=0<=v?1:-1,K=W*v,E=K>ha,u=u*I;mb.add(Math.atan2(u*W*Math.sin(K),r*Hb+u*Math.cos(K)));P+=E?v+W*Pa:v;E^q>=m^A>=m&&(l=wb(nb(l),nb(b)),rc(l),q=wb(e,l),rc(q),q=(E^0<=v?-1:1)*ya(q[2]),a>q||a===q&&(l[0]||l[1]))&&(L+=
E^0<=v?1:-1);if(!ac++)break;q=A;u=I;r=Hb;l=b}}d=(-1E-6>P||1E-6>P&&-1E-6>mb)^L&1;n.length?(x||(c.polygonStart(),x=!0),ue(n,Mg,d,g,c)):d&&(x||(c.polygonStart(),x=!0),c.lineStart(),g(null,null,1,c),c.lineEnd());x&&(c.polygonEnd(),x=!1);n=C=null},sphere:function(){c.polygonStart();c.lineStart();g(null,null,1,c);c.lineEnd();c.polygonEnd()}},n,u=xe(),r=d(u),x=!1,C,A;return p}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,m){d.push([b,
m])},lineEnd:M,buffer:function(){var g=b;b=[];d=null;return g},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-Ca-1E-6:Ca-b[1])-(0>(d=d.x)[0]?d[1]-Ca-1E-6:Ca-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>a}function g(b,d,g){var m=nb(b),t=nb(d),c=[1,0,0],t=wb(m,t),e=pc(t,t),m=t[0],S=e-m*m;if(!S)return!g&&b;e=a*e/S;S=-a*m/S;m=wb(c,t);c=qc(c,e);t=qc(t,S);id(c,t);t=pc(c,m);e=pc(m,m);S=t*t-e*(pc(c,c)-1);if(!(0>S)){var L=
Math.sqrt(S),S=qc(m,(-t-L)/e);id(S,c);S=sc(S);if(!g)return S;g=b[0];var P=d[0];b=b[1];d=d[1];if(P<g){var f=g;g=P;P=f}var pa=P-g,T=1E-6>ja(pa-ha);!T&&d<b&&(f=b,b=d,d=f);if(T||1E-6>pa?T?0<b+d^S[1]<(1E-6>ja(S[0]-g)?b:d):b<=S[1]&&S[1]<=d:pa>ha^(g<=S[0]&&S[0]<=P))return d=qc(m,(-t+L)/e),id(d,c),[S,sc(d)]}}function m(d,g){var m=c?b:ha-b,a=0;d<-m?a|=1:d>m&&(a|=2);g<-m?a|=4:g>m&&(a|=8);return a}var a=Math.cos(b),c=0<a,e=1E-6<ja(a),L=kd(b,6*ia);return we(d,function(b){var a,t,S,L,P;return{lineStart:function(){L=
S=!1;P=1},point:function(f,pa){var T=[f,pa],h=d(f,pa),l=c?h?0:m(f,pa):h?m(f+(0>f?ha:-ha),pa):0;!a&&(L=S=h)&&b.lineStart();if(h!==S){var Ha=g(a,T);if(tc(a,Ha)||tc(T,Ha))T[0]+=1E-6,T[1]+=1E-6,h=d(T[0],T[1])}if(h!==S)P=0,h?(b.lineStart(),Ha=g(T,a),b.point(Ha[0],Ha[1])):(Ha=g(a,T),b.point(Ha[0],Ha[1]),b.lineEnd()),a=Ha;else if(e&&a&&c^h){var q;l&t||!(q=g(T,a,!0))||(P=0,c?(b.lineStart(),b.point(q[0][0],q[0][1]),b.point(q[1][0],q[1][1]),b.lineEnd()):(b.point(q[1][0],q[1][1]),b.lineEnd(),b.lineStart(),b.point(q[0][0],
q[0][1])))}!h||a&&tc(a,T)||b.point(T[0],T[1]);a=T;S=h;t=l},lineEnd:function(){S&&b.lineEnd();a=null},clean:function(){return P|(L&&S)<<1}}},L,c?[0,-b]:[-ha,b-ha])}function ye(b,d,g,m){return function(a){var t=a.a,c=a.b,e=t.x,t=t.y,P=0,f=1,h=c.x-e,c=c.y-t;var l=b-e;if(h||!(0<l)){l/=h;if(0>h){if(l<P)return;l<f&&(f=l)}else if(0<h){if(l>f)return;l>P&&(P=l)}l=g-e;if(h||!(0>l)){l/=h;if(0>h){if(l>f)return;l>P&&(P=l)}else if(0<h){if(l<P)return;l<f&&(f=l)}l=d-t;if(c||!(0<l)){l/=c;if(0>c){if(l<P)return;l<f&&
(f=l)}else if(0<c){if(l>f)return;l>P&&(P=l)}l=m-t;if(c||!(0>l)){l/=c;if(0>c){if(l>f)return;l>P&&(P=l)}else if(0<c){if(l<P)return;l<f&&(f=l)}0<P&&(a.a={x:e+P*h,y:t+P*c});1>f&&(a.b={x:e+f*h,y:t+f*c});return a}}}}}}function ze(b,d,g,m){function a(m,a){return 1E-6>ja(m[0]-b)?0<a?0:3:1E-6>ja(m[0]-g)?0<a?2:1:1E-6>ja(m[1]-d)?0<a?1:0:0<a?3:2}function c(b,d){return e(b.x,d.x)}function e(b,d){var g=a(b,1),m=a(d,1);return g!==m?g-m:0===g?d[1]-b[1]:1===g?b[0]-d[0]:2===g?b[1]-d[1]:d[0]-b[0]}return function(t){function S(t,
c,S,L){var P=0,f=0;if(null==t||(P=a(t,S))!==(f=a(c,S))||0>e(t,c)^0<S){do L.point(0===P||3===P?b:g,1<P?m:d);while((P=(P+S+4)%4)!==f)}else L.point(c[0],c[1])}function L(a,c){b<=a&&a<=g&&d<=c&&c<=m&&t.point(a,c)}function f(a,c){a=Math.max(-1E9,Math.min(1E9,a));c=Math.max(-1E9,Math.min(1E9,c));var e=b<=a&&a<=g&&d<=c&&c<=m;p&&k.push([a,c]);if(v)u=a,r=c,x=e,v=!1,e&&(t.lineStart(),t.point(a,c));else if(e&&I)t.point(a,c);else{var S={a:{x:C,y:A},b:{x:a,y:c}};h(S)?(I||(t.lineStart(),t.point(S.a.x,S.a.y)),t.point(S.b.x,
S.b.y),e||t.lineEnd(),W=!1):e&&(t.lineStart(),t.point(a,c),W=!1)}C=a;A=c;I=e}var pa=t,l=xe(),h=ye(b,d,g,m),q,p,k,n={point:L,lineStart:function(){n.point=f;p&&p.push(k=[]);v=!0;I=!1;C=A=NaN},lineEnd:function(){q&&(f(u,r),x&&I&&l.rejoin(),q.push(l.buffer()));n.point=L;I&&t.lineEnd()},polygonStart:function(){t=l;q=[];p=[];W=!0},polygonEnd:function(){t=pa;q=y.merge(q);var d=[b,m];for(var g=0,a=p.length,e=d[1],L=0;L<a;++L)for(var P=1,f=p[L],T=f.length,l=f[0],h;P<T;++P)h=f[P],l[1]<=e?h[1]>e&&0<da(l,h,d)&&
++g:h[1]<=e&&0>da(l,h,d)&&--g,l=h;d=0!==g;g=W&&d;a=q.length;if(g||a)t.polygonStart(),g&&(t.lineStart(),S(null,null,1,t),t.lineEnd()),a&&ue(q,c,d,S,t),t.polygonEnd();q=p=k=null}},u,r,x,C,A,I,v,W;return n}}function ld(b){var d=0,g=ha/3,m=md(b);b=m(d,g);b.parallels=function(b){return arguments.length?m(d=b[0]*ha/180,g=b[1]*ha/180):[d/ha*180,g/ha*180]};return b}function Ae(b,d){function g(b,d){var g=Math.sqrt(c-2*a*Math.sin(d))/a;return[g*Math.sin(b*=a),e-g*Math.cos(b)]}var m=Math.sin(b),a=(m+Math.sin(d))/
2,c=1+m*(2*a-m),e=Math.sqrt(c)/a;g.invert=function(b,d){var g=e-d;return[Math.atan2(b,g)/a,ya((c-(b*b+g*g)*a*a)/(2*a))]};return g}function Og(){function b(b,d){nd+=a*b-m*d;m=b;a=d}var d,g,m,a;fb.point=function(t,c){fb.point=b;d=m=t;g=a=c};fb.lineEnd=function(){b(d,g)}}function Pg(){function b(b,d){e.push("M",b,",",d,c)}function d(b,d){e.push("M",b,",",d);L.point=g}function g(b,d){e.push("L",b,",",d)}function m(){L.point=b}function a(){e.push("Z")}var c=Be(4.5),e=[],L={point:b,lineStart:function(){L.point=
d},lineEnd:m,polygonStart:function(){L.lineEnd=a},polygonEnd:function(){L.lineEnd=m;L.point=b},pointRadius:function(b){c=Be(b);return L},result:function(){if(e.length){var b=e.join("");e=[];return b}}};return L}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function qb(b,d){ob+=b;pb+=d;++Za}function Ce(){function b(b,a){var m=b-d,t=a-g,m=Math.sqrt(m*m+t*t);cb+=m*(d+b)/2;db+=m*(g+a)/2;Va+=m;qb(d=b,g=a)}var d,g;Sa.point=function(m,a){Sa.point=b;qb(d=m,g=a)}}
function De(){Sa.point=qb}function Qg(){function b(b,d){var g=b-m,t=d-a,g=Math.sqrt(g*g+t*t);cb+=g*(m+b)/2;db+=g*(a+d)/2;Va+=g;g=a*b-m*d;xb+=g*(m+b);yb+=g*(a+d);eb+=3*g;qb(m=b,a=d)}var d,g,m,a;Sa.point=function(t,c){Sa.point=b;qb(d=m=t,g=a=c)};Sa.lineEnd=function(){b(d,g)}}function Rg(b){function d(d,g){b.moveTo(d+e,g);b.arc(d,g,e,0,Pa)}function g(d,g){b.moveTo(d,g);L.point=m}function m(d,g){b.lineTo(d,g)}function a(){L.point=d}function c(){b.closePath()}var e=4.5,L={point:d,lineStart:function(){L.point=
g},lineEnd:a,polygonStart:function(){L.lineEnd=c},polygonEnd:function(){L.lineEnd=a;L.point=d},pointRadius:function(b){e=b;return L},result:M};return L}function Ee(b){function d(b){return(L?m:g)(b)}function g(d){return Fe(d,function(g,m){g=b(g,m);d.point(g[0],g[1])})}function m(d){function g(g,m){g=b(g,m);d.point(g[0],g[1])}function m(){n=NaN;A.point=t;d.lineStart()}function t(g,m){var t=nb([g,m]),c=b(g,m);a(n,u,k,r,x,C,n=c[0],u=c[1],k=g,r=t[0],x=t[1],C=t[2],L,d);d.point(n,u)}function c(){A.point=
g;d.lineEnd()}function e(){m();A.point=S;A.lineEnd=f}function S(b,d){t(P=b,d);pa=n;l=u;h=r;q=x;p=C;A.point=t}function f(){a(n,u,k,r,x,C,pa,l,P,h,q,p,L,d);A.lineEnd=c;c()}var P,pa,l,h,q,p,k,n,u,r,x,C,A={point:g,lineStart:m,lineEnd:c,polygonStart:function(){d.polygonStart();A.lineStart=e},polygonEnd:function(){d.polygonEnd();A.lineStart=m}};return A}function a(d,g,m,t,S,L,f,pa,l,h,q,p,k,n){var P=f-d,T=pa-g,Ha=P*P+T*T;if(Ha>4*c&&k--){var u=t+h,r=S+q,x=L+p,C=Math.sqrt(u*u+r*r+x*x),A=Math.asin(x/=C),I=
1E-6>ja(ja(x)-1)||1E-6>ja(m-l)?(m+l)/2:Math.atan2(r,u),v=b(I,A),A=v[0],v=v[1],W=A-d,K=v-g,E=T*W-P*K;if(E*E/Ha>c||.3<ja((P*W+T*K)/Ha-.5)||t*h+S*q+L*p<e)a(d,g,m,t,S,L,A,v,I,u/=C,r/=C,x,k,n),n.point(A,v),a(A,v,I,u,r,x,f,pa,l,h,q,p,k,n)}}var c=.5,e=Math.cos(30*ia),L=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(c);L=0<(c=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,m){return b([d*Aa,m*Aa])});return function(b){return Ge(d(b))}}function He(b){this.stream=b}function Fe(b,
d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function gb(b){return md(function(){return b})()}function md(b){function d(b){b=L(b[0]*ia,b[1]*ia);return[b[0]*T+r,x-b[1]*T]}function g(b){return(b=L.invert((b[0]-r)/T,(x-b[1])/T))&&[b[0]*Aa,b[1]*Aa]}function m(){L=te(e=od(k,n,u),c);var b=c(q,p);r=l-b[0]*T;x=h+b[1]*T;return a()}function a(){W&&(W.valid=
!1,W=null);return d}var c,e,L,f=Ee(function(b,d){b=c(b,d);return[b[0]*T+r,x-b[1]*T]}),T=150,l=480,h=250,q=0,p=0,k=0,n=0,u=0,r,x,C=Ie,A=B,I=null,v=null,W;d.stream=function(b){W&&(W.valid=!1);W=Ge(C(e,f(A(b))));W.valid=!0;return W};d.clipAngle=function(b){if(!arguments.length)return I;C=null==b?(I=b,Ie):Ng((I=+b)*ia);return a()};d.clipExtent=function(b){if(!arguments.length)return v;A=(v=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):B;return a()};d.scale=function(b){if(!arguments.length)return T;T=+b;return m()};
d.translate=function(b){if(!arguments.length)return[l,h];l=+b[0];h=+b[1];return m()};d.center=function(b){if(!arguments.length)return[q*Aa,p*Aa];q=b[0]%360*ia;p=b[1]%360*ia;return m()};d.rotate=function(b){if(!arguments.length)return[k*Aa,n*Aa,u*Aa];k=b[0]%360*ia;n=b[1]%360*ia;u=2<b.length?b[2]%360*ia:0;return m()};y.rebind(d,f,"precision");return function(){c=b.apply(this,arguments);d.invert=c.invert&&g;return m()}}function Ge(b){return Fe(b,function(d,g){b.point(d*ia,g*ia)})}function Nb(b,d){return[b,
d]}function Je(b,d){return[b>ha?b-Pa:b<-ha?b+Pa:b,d]}function od(b,d,g){return b?d||g?te(Ke(b),Le(d,g)):Ke(b):d||g?Le(d,g):Je}function Me(b){return function(d,g){return d+=b,[d>ha?d-Pa:d<-ha?d+Pa:d,g]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function g(b,d){var g=Math.cos(d),t=Math.cos(b)*g,g=Math.sin(b)*g,S=Math.sin(d),L=S*m+t*a;return[Math.atan2(g*c-L*e,t*m-S*a),ya(L*c+g*e)]}var m=Math.cos(b),a=Math.sin(b),c=Math.cos(d),e=Math.sin(d);g.invert=function(b,d){var g=Math.cos(d),
t=Math.cos(b)*g,g=Math.sin(b)*g,S=Math.sin(d),L=S*c-g*e;return[Math.atan2(g*c+S*e,t*m+L*a),ya(L*m-t*a)]};return g}function kd(b,d){var g=Math.cos(b),m=Math.sin(b);return function(a,c,e,L){var t=e*d;if(null!=a){if(a=Ne(g,a),c=Ne(g,c),0<e?a<c:a>c)a+=e*Pa}else a=b+e*Pa,c=b-.5*t;for(var S;0<e?a>c:a<c;a-=t)L.point((S=sc([g,-m*Math.cos(a),-m*Math.sin(a)]))[0],S[1])}}function Ne(b,d){var g=nb(d);g[0]-=b;rc(g);var m=fa(-g[1]);return((0>-g[2]?-m:m)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,d,g){var m=y.range(b,
d-1E-6,g).concat(d);return function(b){return m.map(function(d){return[b,d]})}}function Pe(b,d,g){var m=y.range(b,d-1E-6,g).concat(d);return function(b){return m.map(function(d){return[d,b]})}}function pd(b){return b.source}function qd(b){return b.target}function Tg(b,d,g,m){var a=Math.cos(d),c=Math.sin(d),e=Math.cos(m),L=Math.sin(m),f=a*Math.cos(b),T=a*Math.sin(b),l=e*Math.cos(g),h=e*Math.sin(g),q=2*Math.asin(Math.sqrt(ta(m-d)+a*e*ta(g-b))),p=1/Math.sin(q);g=q?function(b){var d=Math.sin(b*=q)*p;
b=Math.sin(q-b)*p;var g=b*f+d*l,m=b*T+d*h;return[Math.atan2(m,g)*Aa,Math.atan2(b*c+d*L,Math.sqrt(g*g+m*m))*Aa]}:function(){return[b*Aa,d*Aa]};g.distance=q;return g}function Ob(b,d){function g(d,g){var m=Math.cos(g),a=b(Math.cos(d)*m);return[a*m*Math.sin(d),a*Math.sin(g)]}g.invert=function(b,g){var m=Math.sqrt(b*b+g*g),a=d(m),t=Math.sin(a);return[Math.atan2(b*t,m*Math.cos(a)),Math.asin(m&&g*t/m)]};return g}function Qe(b,d){function g(b,d){0<c?d<-Ca+1E-6&&(d=-Ca+1E-6):d>Ca-1E-6&&(d=Ca-1E-6);var g=c/
Math.pow(Math.tan(ha/4+d/2),a);return[g*Math.sin(a*b),c-g*Math.cos(a*b)]}var m=Math.cos(b),a=b===d?Math.sin(b):Math.log(m/Math.cos(d))/Math.log(Math.tan(ha/4+d/2)/Math.tan(ha/4+b/2)),c=m*Math.pow(Math.tan(ha/4+b/2),a)/a;if(!a)return wc;g.invert=function(b,d){var g=c-d;return[Math.atan2(b,g)/a,2*Math.atan(Math.pow(c/((0<a?1:0>a?-1:0)*Math.sqrt(b*b+g*g)),1/a))-Ca]};return g}function Re(b,d){function g(b,d){var g=c-d;return[g*Math.sin(a*b),c-g*Math.cos(a*b)]}var m=Math.cos(b),a=b===d?Math.sin(b):(m-
Math.cos(d))/(d-b),c=m/a+b;if(1E-6>ja(a))return Nb;g.invert=function(b,d){var g=c-d;return[Math.atan2(b,g)/a,c-(0<a?1:0>a?-1:0)*Math.sqrt(b*b+g*g)]};return g}function wc(b,d){return[b,Math.log(Math.tan(ha/4+d/2))]}function Se(b){var d=gb(b),g=d.scale,m=d.translate,a=d.clipExtent,c;d.scale=function(){var b=g.apply(d,arguments);return b===d?c?d.clipExtent(null):d:b};d.translate=function(){var b=m.apply(d,arguments);return b===d?c?d.clipExtent(null):d:b};d.clipExtent=function(b){var t=a.apply(d,arguments);
if(t===d){if(c=null==b){var e=ha*g(),S=m();a([[S[0]-e,S[1]-e],[S[0]+e,S[1]+e]])}}else c&&(t=null);return t};return d.clipExtent(null)}function rd(b,d){return[Math.log(Math.tan(ha/4+d/2)),-b]}function zb(b){return b[0]}function Pb(b){return b[1]}function Te(b){for(var d=b.length,g=[0,1],m=2,a=2;a<d;a++){for(;1<m&&0>=da(b[g[m-2]],b[g[m-1]],b[a]);)--m;g[m++]=a}return g.slice(0,m)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function sd(b,d,g){return(g[0]-d[0])*(b[1]-d[1])<(g[1]-d[1])*(b[0]-d[0])}function td(b,
d,g,m){var a=b[0],c=g[0],e=d[0]-a,f=m[0]-c;b=b[1];g=g[1];d=d[1]-b;m=m[1]-g;c=(f*(b-g)-m*(a-c))/(m*e-f*d);return[a+c*e,b+c*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){xc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function ud(b){Ab(b);Bb.remove(b);We.push(b);xc(b)}function Xe(b,d){var g=b.site,a=g.x,t=g.y,c=t-d;if(!c)return a;var e=b.P;if(!e)return-Infinity;var g=e.site,e=g.x,g=g.y,f=g-d;if(!f)return e;
var P=e-a,T=1/c-1/f,l=P/f;return T?(-l+Math.sqrt(l*l-2*T*(P*P/(-2*f)-g+f/2+t-c/2)))/T+a:(a+e)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){xc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Cb(b){var d=b.P,g=b.N;if(d&&g){var a=d.site,d=b.site,t=g.site;if(a!==t){var g=d.x,c=d.y,e=a.x-g,f=a.y-c,a=t.x-g,t=t.y-c,P=2*(e*t-f*a);if(!(-1E-12<=P)){var T=e*e+f*f,l=a*a+t*t,f=(t*T-f*l)/P,e=(e*l-a*T)/P,t=e+c,c=$e.pop()||new Wg;c.arc=b;c.site=d;c.x=
f+g;c.y=t+Math.sqrt(f*f+e*e);c.cy=t;b.circle=c;b=null;for(d=Qb._;d;)if(c.y<d.y||c.y===d.y&&c.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Qb.insert(b,c);b||(vd=c)}}}}function Ab(b){var d=b.circle;d&&(d.P||(vd=d.N),Qb.remove(d),$e.push(d),xc(d),b.circle=null)}function Xg(b,d){var g=b.b;if(g)return!0;var a=b.a,g=d[0][0],c=d[1][0],e=d[0][1],f=d[1][1],L=b.l,P=b.r,T=L.x,L=L.y,l=P.x,P=P.y,h=(T+l)/2;if(P===L){if(h<g||h>=c)return;if(T>l){if(!a)a={x:h,y:e};else if(a.y>=f)return;g=
{x:h,y:f}}else{if(!a)a={x:h,y:f};else if(a.y<e)return;g={x:h,y:e}}}else{var q=(T-l)/(P-L);h=(L+P)/2-q*h;if(-1>q||1<q)if(T>l){if(!a)a={x:(e-h)/q,y:e};else if(a.y>=f)return;g={x:(f-h)/q,y:f}}else{if(!a)a={x:(f-h)/q,y:f};else if(a.y<e)return;g={x:(e-h)/q,y:e}}else if(L<P){if(!a)a={x:g,y:q*g+h};else if(a.x>=c)return;g={x:c,y:q*c+h}}else{if(!a)a={x:c,y:q*c+h};else if(a.x<g)return;g={x:g,y:q*g+h}}}b.a=a;b.b=g;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Rb(b,d,g,a){var m=new af(b,
d);Db.push(m);g&&yc(m,b,d,g);a&&yc(m,d,b,a);rb[b.i].edges.push(new zc(m,b,d));rb[d.i].edges.push(new zc(m,d,b));return m}function Yg(b,d,g){b=new af(b,null);b.a=d;b.b=g;Db.push(b);return b}function yc(b,d,g,a){b.a||b.b?b.l===g?b.b=a:b.a=a:(b.a=a,b.l=d,b.r=g)}function zc(b,d,g){var a=b.a,c=b.b;this.edge=b;this.site=d;this.angle=g?Math.atan2(g.y-d.y,g.x-d.x):b.l===d?Math.atan2(c.x-a.x,a.y-c.y):Math.atan2(a.x-c.x,c.y-a.y)}function wd(){this._=null}function xc(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Sb(b,
d){var g=d.R,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.R=g.L;d.R&&(d.R.U=d);g.L=d}function Tb(b,d){var g=d.L,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.L=g.R;d.L&&(d.L.U=d);g.R=d}function bf(b){for(;b.L;)b=b.L;return b}function xd(b,d){var g=b.sort(Zg).pop(),a;Db=[];rb=Array(b.length);Bb=new wd;for(Qb=new wd;;){var c=vd;if(g&&(!c||g.y<c.y||g.y===c.y&&g.x<c.x)){if(g.x!==a||g.y!==e){rb[g.i]=new Ye(g);var e=a=void 0;c=g;for(var f=c.x,L=c.y,P=Bb._;P;){var T=Xe(P,L)-f;if(1E-6<T)P=P.L;else{var l=
P;var h=L;var q=l.N;q?h=Xe(q,h):(l=l.site,h=l.y===h?l.x:Infinity);h=f-h;if(1E-6<h){if(!P.R){e=P;break}P=P.R}else{-1E-6<T?(e=P.P,a=P):-1E-6<h?(e=P,a=P.N):e=a=P;break}}}T=Ve(c);Bb.insert(e,T);if(e||a)if(e===a)Ab(e),a=Ve(e.site),Bb.insert(T,a),T.edge=a.edge=Rb(e.site,T.site),Cb(e),Cb(a);else if(a){Ab(e);Ab(a);f=e.site;P=f.x;h=f.y;var l=c.x-P,q=c.y-h,L=a.site,p=L.x-P,k=L.y-h,n=2*(l*k-q*p),u=l*l+q*q,r=p*p+k*k,P={x:(k*u-q*r)/n+P,y:(l*r-p*u)/n+h};yc(a.edge,f,L,P);T.edge=Rb(f,c,null,P);a.edge=Rb(c,L,null,
P);Cb(e);Cb(a)}else T.edge=Rb(e.site,T.site);a=g.x;e=g.y}g=b.pop()}else if(c){L=c.arc;c=L.circle;f=c.x;P=c.cy;c={x:f,y:P};l=L.P;h=L.N;T=[L];ud(L);for(L=l;L.circle&&1E-6>ja(f-L.circle.x)&&1E-6>ja(P-L.circle.cy);)l=L.P,T.unshift(L),ud(L),L=l;T.unshift(L);Ab(L);for(l=h;l.circle&&1E-6>ja(f-l.circle.x)&&1E-6>ja(P-l.circle.cy);)h=l.N,T.push(l),ud(l),l=h;T.push(l);Ab(l);P=T.length;for(f=1;f<P;++f)l=T[f],L=T[f-1],yc(l.edge,L.site,l.site,c);L=T[0];l=T[P-1];l.edge=Rb(L.site,l.site,null,c);Cb(L);Cb(l)}else break}if(d){g=
Db;a=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(e=g.length;e--;)if(c=g[e],!Xg(c,d)||!a(c)||1E-6>ja(c.a.x-c.b.x)&&1E-6>ja(c.a.y-c.b.y))c.a=c.b=null,g.splice(e,1);g=d[0][0];a=d[1][0];e=d[0][1];c=d[1][1];P=rb;for(h=P.length;h--;)if((l=P[h])&&l.prepare())for(p=l.edges,k=p.length,q=0;q<k;)if(n=p[q].end(),f=n.x,L=n.y,u=p[++q%k].start(),T=u.x,u=u.y,1E-6<ja(f-T)||1E-6<ja(L-u))p.splice(q,0,new zc(Yg(l.site,n,1E-6>ja(f-g)&&1E-6<c-L?{x:g,y:1E-6>ja(T-g)?u:c}:1E-6>ja(L-c)&&1E-6<a-f?{x:1E-6>ja(u-c)?T:a,y:c}:1E-6>
ja(f-a)&&1E-6<L-e?{x:a,y:1E-6>ja(T-a)?u:e}:1E-6>ja(L-e)&&1E-6<f-g?{x:1E-6>ja(u-e)?T:g,y:e}:null),l.site,null)),++k}g={cells:rb,edges:Db};Bb=Qb=Db=rb=null;return g}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ub(b,d,g,a,c,e){if(!b(d,g,a,c,e)){var m=.5*(g+c),t=.5*(a+e);d=d.nodes;d[0]&&Ub(b,d[0],g,a,m,t);d[1]&&Ub(b,d[1],m,a,c,t);d[2]&&Ub(b,d[2],g,t,m,e);d[3]&&Ub(b,d[3],m,t,c,e)}}function bh(b,
d,g,a,c,e,f){var m=Infinity,t;(function Ha(b,S,L,P,l){var h;if(!(S>e||L>f||P<a||l<c)){if(h=b.point){var q=d-b.x,pa=g-b.y,q=q*q+pa*pa;q<m&&(q=Math.sqrt(m=q),a=d-q,c=g-q,e=d+q,f=g+q,t=h)}h=b.nodes;for(var q=.5*(S+P),pa=.5*(L+l),p=(g>=pa)<<1|d>=q,k=p+4;p<k;++p)if(b=h[p&3])switch(p&3){case 0:Ha(b,S,L,q,pa);break;case 1:Ha(b,q,L,P,pa);break;case 2:Ha(b,S,pa,q,l);break;case 3:Ha(b,q,pa,P,l)}}})(b,a,c,e,f);return t}function yd(b,d){b=y.rgb(b);d=y.rgb(d);var g=b.r,a=b.g,c=b.b,e=d.r-g,f=d.g-a,L=d.b-c;return function(b){return"#"+
bb(Math.round(g+e*b))+bb(Math.round(a+f*b))+bb(Math.round(c+L*b))}}function df(b,d){var g={},a={},c;for(c in b)c in d?g[c]=sb(b[c],d[c]):a[c]=b[c];for(c in d)c in b||(a[c]=d[c]);return function(b){for(c in g)a[c]=g[c](b);return a}}function $a(b,d){b=+b;d=+d;return function(g){return b*(1-g)+d*g}}function ef(b,d){var g=zd.lastIndex=Ad.lastIndex=0,a,c,e,f=-1,L=[],P=[];b+="";for(d+="";(a=zd.exec(b))&&(c=Ad.exec(d));)(e=c.index)>g&&(e=d.slice(g,e),L[f]?L[f]+=e:L[++f]=e),(a=a[0])===(c=c[0])?L[f]?L[f]+=
c:L[++f]=c:(L[++f]=null,P.push({i:f,x:$a(a,c)})),g=Ad.lastIndex;g<d.length&&(e=d.slice(g),L[f]?L[f]+=e:L[++f]=e);return 2>L.length?P[0]?(d=P[0].x,function(b){return d(b)+""}):function(){return d}:(d=P.length,function(b){for(var g=0,a;g<d;++g)L[(a=P[g]).i]=a.x(b);return L.join("")})}function sb(b,d){for(var g=y.interpolators.length,a;0<=--g&&!(a=y.interpolators[g](b,d)););return a}function Ac(b,d){var g=[],a=[],c=b.length,e=d.length,f=Math.min(b.length,d.length),L;for(L=0;L<f;++L)g.push(sb(b[L],d[L]));
for(;L<c;++L)a[L]=b[L];for(;L<e;++L)a[L]=d[L];return function(b){for(L=0;L<f;++L)a[L]=g[L](b);return a}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,g=d*b;return 4*(.5>b?g:3*(b-d)+g-.75)}function gh(b){return 1-Math.cos(b*Ca)}function hh(b){return Math.pow(2,
10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(g){return Math.round(b+d*g)}}function jf(b){var d=[b.a,b.b],g=[b.c,b.d],a=kf(d),c=d[0]*g[0]+d[1]*g[1],e=-c;g[0]+=e*d[0];g[1]+=e*d[1];e=kf(g)||0;d[0]*g[1]<g[0]*d[1]&&(d[0]*=-1,d[1]*=-1,a*=-1,c*=-1);this.rotate=(a?Math.atan2(d[1],d[0]):Math.atan2(-g[0],g[1]))*Aa;
this.translate=[b.e,b.f];this.scale=[a,e];this.skew=e?Math.atan2(c,e)*Aa:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function Eb(b){return b.length?b.pop()+",":""}function kh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push("translate(",null,",",null,")"),a.push({i:g-4,x:$a(b[0],d[0])},{i:g-2,x:$a(b[1],d[1])})):(d[0]||d[1])&&g.push("translate("+d+")")}function lh(b,d,g,a){b!==d?(180<b-d?d+=360:180<d-b&&(b+=360),a.push({i:g.push(Eb(g)+"rotate(",null,")")-2,x:$a(b,
d)})):d&&g.push(Eb(g)+"rotate("+d+")")}function mh(b,d,g,a){b!==d?a.push({i:g.push(Eb(g)+"skewX(",null,")")-2,x:$a(b,d)}):d&&g.push(Eb(g)+"skewX("+d+")")}function nh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push(Eb(g)+"scale(",null,",",null,")"),a.push({i:g-4,x:$a(b[0],d[0])},{i:g-2,x:$a(b[1],d[1])})):1===d[0]&&1===d[1]||g.push(Eb(g)+"scale("+d+")")}function lf(b,d){var g=[],a=[];b=y.transform(b);d=y.transform(d);kh(b.translate,d.translate,g,a);lh(b.rotate,d.rotate,g,a);mh(b.skew,d.skew,g,a);nh(b.scale,
d.scale,g,a);b=d=null;return function(b){for(var d=-1,m=a.length,c;++d<m;)g[(c=a[d]).i]=c.x(b);return g.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(g){return(g-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(g){return Math.max(0,Math.min(1,(g-b)/d))}}function qh(b){var d=b.source;b=b.target;var g=b;if(d===g)var a=d;else{a=mf(d);for(var g=mf(g),c=a.pop(),e=g.pop(),f=null;c===e;)f=c,c=a.pop(),e=g.pop();a=f}for(g=[d];d!==a;)d=d.parent,g.push(d);for(d=g.length;b!==a;)g.splice(d,
0,b),b=b.parent;return g}function mf(b){for(var d=[],g=b.parent;null!=g;)d.push(b),b=g,g=g.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,g){var a=0,c=0;b.charge=0;if(!b.leaf)for(var e=b.nodes,f=e.length,L=-1,P;++L<f;)P=e[L],null!=P&&(nf(P,d,g),b.charge+=P.charge,a+=P.charge*P.cx,c+=P.charge*P.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=g[b.point.index],
b.charge+=b.pointCharge=d,a+=d*b.point.x,c+=d*b.point.y);b.cx=a/b.charge;b.cy=c/b.charge}function Vb(b,d){y.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Wb(b,d){for(var g,a,c=[b];null!=(b=c.pop());)if(d(b),(g=b.children)&&(a=g.length))for(;0<=--a;)c.push(g[a])}function Wa(b,d){for(var g,a,c=[b],e=[];null!=(b=c.pop());)if(e.push(b),(g=b.children)&&(a=g.length))for(var f=-1;++f<a;)c.push(g[f]);for(;null!=(b=e.pop());)d(b)}function wh(b){return b.children}function xh(b){return b.value}
function yh(b,d){return d.value-b.value}function vh(b){return y.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,g){b.y0=d;b.y=g}function Bd(b){return y.range(b.length)}function Cd(b){var d=-1;b=b[0].length;for(var g=[];++d<b;)g[d]=0;return g}function Ch(b){for(var d=1,g=0,a=b[0][1],c,e=b.length;d<e;++d)(c=b[d][1])>a&&(g=d,a=c);return g}function Dh(b){return b.reduce(Eh,0)}function Eh(b,
d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var g=-1,a=+b[0],c=(b[1]-a)/d,e=[];++g<=d;)e[g]=c*g+a;return e}function Gh(b){return[y.min(b),y.max(b)]}function Hh(b,d){return b.value-d.value}function Dd(b,d){var g=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=g;g._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}function qf(b,d){var g=d.x-b.x,a=d.y-b.y,c=b.r+d.r;return.999*c*c>g*g+a*a}function rf(b){function d(b){a=
Math.min(b.x-b.r,a);c=Math.max(b.x+b.r,c);e=Math.min(b.y-b.r,e);f=Math.max(b.y+b.r,f)}if((g=b.children)&&(h=g.length)){var g,a=Infinity,c=-Infinity,e=Infinity,f=-Infinity,L,P,l,h;g.forEach(Ih);var q=g[0];q.x=-q.r;q.y=0;d(q);if(1<h){var p=g[1];p.x=p.r;p.y=0;d(p);if(2<h){var k=g[2];sf(q,p,k);d(k);Dd(q,k);q._pack_prev=k;Dd(k,p);p=q._pack_next;for(L=3;L<h;L++){sf(q,p,k=g[L]);var n=0,u=1,r=1;for(P=p._pack_next;P!==p;P=P._pack_next,u++)if(qf(P,k)){n=1;break}if(1==n)for(l=q._pack_prev;l!==P._pack_prev&&
!qf(l,k);l=l._pack_prev,r++);n?(u<r||u==r&&p.r<q.r?pf(q,p=P):pf(q=l,p),L--):(Dd(q,k),p=k,d(k))}}}q=(a+c)/2;p=(e+f)/2;for(L=P=0;L<h;L++)k=g[L],k.x-=q,k.y-=p,P=Math.max(P,k.r+Math.sqrt(k.x*k.x+k.y*k.y));b.r=P;g.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,g,a){var c=b.children;b.x=d+=a*b.x;b.y=g+=a*b.y;b.r*=a;if(c){b=-1;for(var m=c.length;++b<m;)tf(c[b],d,g,a)}}function sf(b,d,g){var a=b.r+g.r,c=d.x-b.x,e=d.y-b.y;if(a&&
(c||e)){var f=d.r+g.r,L=c*c+e*e,f=f*f,a=a*a;d=.5+(a-f)/(2*L);f=Math.sqrt(Math.max(0,2*f*(a+L)-(a-=L)*a-f*f))/(2*L);g.x=b.x+d*c+f*e;g.y=b.y+d*e-f*c}else g.x=b.x+a,g.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ed(b){var d=b.children;return d.length?d[0]:b.t}function Fd(b){var d=b.children,g;return(g=d.length)?d[g-1]:b.t}function Kh(b){return 1+y.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,g){return b+g.x},0)/b.length}function vf(b){var d=b.children;return d&&
d.length?vf(d[0]):b}function wf(b){var d=b.children,g;return d&&(g=d.length)?wf(d[g-1]):b}function Gd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var g=b.x+d[3],a=b.y+d[0],c=b.dx-d[1]-d[3],e=b.dy-d[0]-d[2];0>c&&(g+=c/2,c=0);0>e&&(a+=e/2,e=0);return{x:g,y:a,dx:c,dy:e}}function Fb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function Bc(b){return b.rangeExtent?b.rangeExtent():Fb(b.range())}function Mh(b,d,g,a){var c=g(b[0],b[1]),m=a(d[0],d[1]);return function(b){return m(c(b))}}
function Cc(b,d){var g=0,a=b.length-1,c=b[g],e=b[a];if(e<c){var f=g;g=a;a=f;f=c;c=e;e=f}b[g]=d.floor(c);b[a]=d.ceil(e);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,g,a){var c=[],m=[],e=0,f=Math.min(b.length,d.length)-1;b[f]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++e<=f;)c.push(g(b[e-1],b[e])),m.push(a(d[e-1],d[e]));return function(d){var g=y.bisect(b,d,1,f)-1;return m[g](c[g](d))}}function zf(b,
d,g,a){function c(){var c=2<Math.min(b.length,d.length)?Oh:Mh,t=a?ph:oh;e=c(b,d,t,g);f=c(d,b,t,sb);return m}function m(b){return e(b)}var e,f;m.invert=function(b){return f(b)};m.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return c()};m.range=function(b){if(!arguments.length)return d;d=b;return c()};m.rangeRound=function(b){return m.range(b).interpolate(hf)};m.clamp=function(b){if(!arguments.length)return a;a=b;return c()};m.interpolate=function(b){if(!arguments.length)return g;
g=b;return c()};m.ticks=function(d){return y.range.apply(y,hb(b,d))};m.tickFormat=function(d,g){return Hd(b,d,g)};m.nice=function(d){Af(b,d);return c()};m.copy=function(){return zf(b,d,g,a)};return c()}function Id(b,d){return y.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){Cc(b,yf(hb(b,d)[2]));Cc(b,yf(hb(b,d)[2]));return b}function hb(b,d){null==d&&(d=10);var g=Fb(b),a=g[1]-g[0],c=Math.pow(10,Math.floor(Math.log(a/d)/Math.LN10)),a=d/a*c;.15>=a?c*=10:.35>=a?c*=5:.75>=a&&(c*=
2);g[0]=Math.ceil(g[0]/c)*c;g[1]=Math.floor(g[1]/c)*c+.5*c;g[2]=c;return g}function Hd(b,d,g){b=hb(b,d);if(g){d=je.exec(g);d.shift();if("s"===d[8]){var a=y.formatPrefix(Math.max(ja(b[0]),ja(b[1])));d[7]||(d[7]="."+Dc(a.scale(b[2])));d[8]="f";g=y.format(d.join(""));return function(b){return g(a.scale(b))+a.symbol}}d[7]||(d[7]="."+Ph(d[8],b));g=d.join("")}else g=",."+Dc(b[2])+"f";return y.format(g)}function Dc(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Ph(b,d){var g=Dc(d[2]);return b in
Qh?Math.abs(g-Dc(Math.max(ja(d[0]),ja(d[1]))))+ +("e"!==b):g-2*("%"===b)}function Bf(b,d,g,a){function c(b){return(g?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function m(b){return g?Math.pow(d,b):-Math.pow(d,-b)}function e(d){return b(c(d))}e.invert=function(d){return m(b.invert(d))};e.domain=function(d){if(!arguments.length)return a;g=0<=d[0];b.domain((a=d.map(Number)).map(c));return e};e.base=function(g){if(!arguments.length)return d;d=+g;b.domain(a.map(c));return e};e.nice=function(){var d=
Cc(a.map(c),g?Math:Rh);b.domain(d);a=d.map(m);return e};e.ticks=function(){var b=Fb(a),e=[],t=b[0],b=b[1],f=Math.floor(c(t)),S=Math.ceil(c(b)),l=d%1?2:d;if(isFinite(S-f)){if(g){for(;f<S;f++)for(var h=1;h<l;h++)e.push(m(f)*h);e.push(m(f))}else for(e.push(m(f));f++<S;)for(h=l-1;0<h;h--)e.push(m(f)*h);for(f=0;e[f]<t;f++);for(S=e.length;e[S-1]>b;S--);e=e.slice(f,S)}return e};e.tickFormat=function(b,g){if(!arguments.length)return Cf;2>arguments.length?g=Cf:"function"!==typeof g&&(g=y.format(g));var a=
Math.max(1,d*b/e.ticks().length);return function(b){var e=b/m(Math.round(c(b)));e*d<d-.5&&(e*=d);return e<=a?g(b):""}};e.copy=function(){return Bf(b.copy(),d,g,a)};return Id(e,b)}function Df(b,d,g){function a(d){return b(c(d))}var c=Ec(d),e=Ec(1/d);a.invert=function(d){return e(b.invert(d))};a.domain=function(d){if(!arguments.length)return g;b.domain((g=d.map(Number)).map(c));return a};a.ticks=function(b){return y.range.apply(y,hb(g,b))};a.tickFormat=function(b,d){return Hd(g,b,d)};a.nice=function(b){return a.domain(Af(g,
b))};a.exponent=function(m){if(!arguments.length)return d;c=Ec(d=m);e=Ec(1/d);b.domain(g.map(c));return a};a.copy=function(){return Df(b.copy(),d,g)};return Id(a,b)}function Ec(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function g(g){return e[((c.get(g)||("range"===d.t?c.set(g,b.push(g)):NaN))-1)%e.length]}function a(d,g){return y.range(b.length).map(function(b){return d+g*b})}var c,e,f;g.domain=function(a){if(!arguments.length)return b;b=[];c=new v;for(var e=
-1,m=a.length,t;++e<m;)c.has(t=a[e])||c.set(t,b.push(t));return g[d.t].apply(g,d.a)};g.range=function(b){if(!arguments.length)return e;e=b;f=0;d={t:"range",a:arguments};return g};g.rangePoints=function(c,m){2>arguments.length&&(m=0);var t=c[0],S=c[1],S=2>b.length?(t=(t+S)/2,0):(S-t)/(b.length-1+m);e=a(t+S*m/2,S);f=0;d={t:"rangePoints",a:arguments};return g};g.rangeRoundPoints=function(c,m){2>arguments.length&&(m=0);var t=c[0],S=c[1],L=2>b.length?(t=S=Math.round((t+S)/2),0):(S-t)/(b.length-1+m)|0;
e=a(t+Math.round(L*m/2+(S-t-(b.length-1+m)*L)/2),L);f=0;d={t:"rangeRoundPoints",a:arguments};return g};g.rangeBands=function(c,m,t){2>arguments.length&&(m=0);3>arguments.length&&(t=m);var S=c[1]<c[0],L=c[S-0],l=(c[1-S]-L)/(b.length-m+2*t);e=a(L+l*t,l);S&&e.reverse();f=l*(1-m);d={t:"rangeBands",a:arguments};return g};g.rangeRoundBands=function(c,m,t){2>arguments.length&&(m=0);3>arguments.length&&(t=m);var S=c[1]<c[0],l=c[S-0],L=c[1-S],h=Math.floor((L-l)/(b.length-m+2*t));e=a(l+Math.round((L-l-(b.length-
m)*h)/2),h);S&&e.reverse();f=Math.round(h*(1-m));d={t:"rangeRoundBands",a:arguments};return g};g.rangeBand=function(){return f};g.rangeExtent=function(){return Fb(d.a[0])};g.copy=function(){return Ef(b,d)};return g.domain(b)}function Ff(b,d){function g(){var g=0,a=d.length;for(t=[];++g<a;)t[g-1]=y.quantile(b,g/a);return e}function e(b){if(!isNaN(b=+b))return d[y.bisect(t,b)]}var t;e.domain=function(d){if(!arguments.length)return b;b=d.map(c).filter(f).sort(a);return g()};e.range=function(b){if(!arguments.length)return d;
d=b;return g()};e.quantiles=function(){return t};e.invertExtent=function(g){g=d.indexOf(g);return 0>g?[NaN,NaN]:[0<g?t[g-1]:b[0],g<t.length?t[g]:b[b.length-1]]};e.copy=function(){return Ff(b,d)};return g()}function Gf(b,d,g){function a(d){return g[Math.max(0,Math.min(f,Math.floor(e*(d-b))))]}function c(){e=g.length/(d-b);f=g.length-1;return a}var e,f;a.domain=function(g){if(!arguments.length)return[b,d];b=+g[0];d=+g[g.length-1];return c()};a.range=function(b){if(!arguments.length)return g;g=b;return c()};
a.invertExtent=function(d){d=g.indexOf(d);d=0>d?NaN:d/e+b;return[d,d+1/e]};a.copy=function(){return Gf(b,d,g)};return c()}function Hf(b,d){function g(g){if(g<=g)return d[y.bisect(b,g)]}g.domain=function(d){if(!arguments.length)return b;b=d;return g};g.range=function(b){if(!arguments.length)return d;d=b;return g};g.invertExtent=function(g){g=d.indexOf(g);return[b[g-1],b[g]]};g.copy=function(){return Hf(b,d)};return g}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(g){if(!arguments.length)return b;
b=g.map(d);return d};d.ticks=function(d){return y.range.apply(y,hb(b,d))};d.tickFormat=function(d,a){return Hd(b,d,a)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function Fc(b,d,g,a){return 0<(b-g)*d-(d-a)*b?0:1}function Gc(b,d,g,a,c){var e=b[0]-d[0],m=b[1]-d[1];c=(c?a:-a)/Math.sqrt(e*e+m*m);var m=c*m,e=
-c*e,t=b[0]+m,f=b[1]+e,l=d[0]+m,h=d[1]+e;b=(t+l)/2;d=(f+h)/2;c=l-t;var q=h-f,p=c*c+q*q;a=g-a;var h=t*h-l*f,k=(0>q?-1:1)*Math.sqrt(Math.max(0,a*a*p-h*h)),t=(h*q-c*k)/p,f=(-h*c-q*k)/p,l=(h*q+c*k)/p;c=(-h*c+q*k)/p;q=t-b;p=f-d;b=l-b;d=c-d;q*q+p*p>b*b+d*d&&(t=l,f=c);return[[t-m,f-e],[t*g/a,f*g/a]]}function Lf(b){function d(d){function m(){t.push("M",e(b(f),l))}for(var t=[],f=[],S=-1,h=d.length,L,q=ua(g),P=ua(a);++S<h;)c.call(this,L=d[S],S)?f.push([+q.call(this,L,S),+P.call(this,L,S)]):f.length&&(m(),f=
[]);f.length&&m();return t.length?t.join(""):null}var g=zb,a=Pb,c=Mb,e=Ta,f=e.key,l=.7;d.x=function(b){if(!arguments.length)return g;g=b;return d};d.y=function(b){if(!arguments.length)return a;a=b;return d};d.defined=function(b){if(!arguments.length)return c;c=b;return d};d.interpolate=function(b){if(!arguments.length)return f;f="function"===typeof b?e=b:(e=Jd.get(b)||Ta).key;return d};d.tension=function(b){if(!arguments.length)return l;l=b;return d};return d}function Ta(b){return 1<b.length?b.join("L"):
b+"Z"}function Mf(b){return b.join("L")+"Z"}function Kd(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("V",(a=b[d])[1],"H",a[0]);return c.join("")}function Ld(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("H",(a=b[d])[0],"V",a[1]);return c.join("")}function Hc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Ta(b);var g=b.length!=d.length,a="",c=b[0],e=b[1],f=d[0],l=f,h=1;g&&(a+="Q"+(e[0]-2*f[0]/3)+","+(e[1]-2*f[1]/3)+","+e[0]+","+e[1],c=b[1],
h=2);if(1<d.length)for(l=d[1],e=b[h],h++,a+="C"+(c[0]+f[0])+","+(c[1]+f[1])+","+(e[0]-l[0])+","+(e[1]-l[1])+","+e[0]+","+e[1],c=2;c<d.length;c++,h++)e=b[h],l=d[c],a+="S"+(e[0]-l[0])+","+(e[1]-l[1])+","+e[0]+","+e[1];g&&(g=b[h],a+="Q"+(e[0]+2*l[0]/3)+","+(e[1]+2*l[1]/3)+","+g[0]+","+g[1]);return a}function Md(b,d){for(var g=[],a=(1-d)/2,c,e=b[0],f=b[1],l=1,h=b.length;++l<h;)c=e,e=f,f=b[l],g.push([a*(f[0]-c[0]),a*(f[1]-c[1])]);return g}function Nf(b){if(3>b.length)return Ta(b);var d=1,g=b.length,a=
b[0],c=a[0],e=a[1],f=[c,c,c,(a=b[1])[0]],l=[e,e,e,a[1]],c=[c,",",e,"L",Qa(ib,f),",",Qa(ib,l)];for(b.push(b[g-1]);++d<=g;)a=b[d],f.shift(),f.push(a[0]),l.shift(),l.push(a[1]),Nd(c,f,l);b.pop();c.push("L",a);return c.join("")}function Qa(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Nd(b,d,g){b.push("C",Qa(Of,d),",",Qa(Of,g),",",Qa(Pf,d),",",Qa(Pf,g),",",Qa(ib,d),",",Qa(ib,g))}function Od(b,d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,g=-1,a=b.length,c,e;++g<a;)d=b[g],c=
d[0],e=d[1]-Ca,d[0]=c*Math.cos(e),d[1]=c*Math.sin(e);return b}function Rf(b){function d(d){function m(){t.push("M",l(b(S),k),p,q(b(h.reverse()),k),"Z")}for(var t=[],h=[],S=[],L=-1,P=d.length,T,n=ua(g),u=ua(c),r=g===a?function(){return C}:ua(a),x=c===e?function(){return A}:ua(e),C,A;++L<P;)f.call(this,T=d[L],L)?(h.push([C=+n.call(this,T,L),A=+u.call(this,T,L)]),S.push([+r.call(this,T,L),+x.call(this,T,L)])):h.length&&(m(),h=[],S=[]);h.length&&m();return t.length?t.join(""):null}var g=zb,a=zb,c=0,e=
Pb,f=Mb,l=Ta,h=l.key,q=l,p="L",k=.7;d.x=function(b){if(!arguments.length)return a;g=a=b;return d};d.x0=function(b){if(!arguments.length)return g;g=b;return d};d.x1=function(b){if(!arguments.length)return a;a=b;return d};d.y=function(b){if(!arguments.length)return e;c=e=b;return d};d.y0=function(b){if(!arguments.length)return c;c=b;return d};d.y1=function(b){if(!arguments.length)return e;e=b;return d};d.defined=function(b){if(!arguments.length)return f;f=b;return d};d.interpolate=function(b){if(!arguments.length)return h;
h="function"===typeof b?l=b:(l=Jd.get(b)||Ta).key;q=l.reverse||l;p=l.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return k;k=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),g=d[0],d=d[1]-Ca;return[g*Math.cos(d),g*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}function Tf(b){b=Math.sqrt(b/ha);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+
"Z"}function Uf(b){return function(){var d,g,a;(d=this[b])&&(a=d[g=d.active])&&(a.timer.c=null,a.timer.t=NaN,--d.count?delete d[g]:delete this[b],d.active+=.5,a.event&&a.event.interrupt.call(this,this.__data__,a.index))}}function Xb(b,d,g){Zb(b,Ia);b.namespace=d;b.id=g;return b}function Pd(b,d,g,a){var c=b.id,e=b.namespace;return X(b,"function"===typeof g?function(b,m,t){b[e][c].tween.set(d,a(g.call(b,b.__data__,m,t)))}:(g=a(g),function(b){b[e][c].tween.set(d,g)}))}function $h(b){null==b&&(b="");
return function(){this.textContent=b}}function Qd(b){return null==b?"__transition__":"__transition_"+b+"__"}function Ic(b,d,g,a,c){function e(b){var d=l.delay;n.t=d+k;if(d<=b)return m(b-d);n.c=m}function m(g){var c=f.active,e=f[c];e&&(e.timer.c=null,e.timer.t=NaN,--f.count,delete f[c],e.event&&e.event.interrupt.call(b,b.__data__,e.index));for(var m in f)+m<a&&(c=f[m],c.timer.c=null,c.timer.t=NaN,--f.count,delete f[m]);n.c=t;fc(function(){n.c&&t(g||1)&&(n.c=null,n.t=NaN);return 1},0,k);f.active=a;
l.event&&l.event.start.call(b,b.__data__,d);p=[];l.tween.forEach(function(g,a){(a=a.call(b,b.__data__,d))&&p.push(a)});q=l.ease;h=l.duration}function t(c){c/=h;for(var e=q(c),m=p.length;0<m;)p[--m].call(b,e);if(1<=c)return l.event&&l.event.end.call(b,b.__data__,d),--f.count?delete f[a]:delete b[g],1}var f=b[g]||(b[g]={active:0,count:0}),l=f[a],h,q,p;if(!l){var k=c.time;var n=fc(e,0,k);l=f[a]={tween:new v,time:k,timer:n,delay:c.delay,duration:c.duration,ease:c.ease,index:d};c=null;++f.count}}function ai(b,
d,g){b.attr("transform",function(b){var a=d(b);return"translate("+(isFinite(a)?a:g(b))+",0)"})}function bi(b,d,g){b.attr("transform",function(b){var a=d(b);return"translate(0,"+(isFinite(a)?a:g(b))+")"})}function Rd(b){return b.toISOString()}function Sd(b,d,g){function a(d){return b(d)}function c(b,g){var a=(b[1]-b[0])/g,c=y.bisect(Jc,a);return c==Jc.length?[d.year,hb(b.map(function(b){return b/31536E6}),g)[2]]:c?d[a/Jc[c-1]<Jc[c]/a?c-1:c]:[ci,hb(b,g)[2]]}a.invert=function(d){return tb(b.invert(d))};
a.domain=function(d){if(!arguments.length)return b.domain().map(tb);b.domain(d);return a};a.nice=function(b,d){function g(g){return!isNaN(g)&&!b.range(g,tb(+g+1),d).length}var e=a.domain(),m=Fb(e);if(m=null==b?c(m,10):"number"===typeof b&&c(m,b))b=m[0],d=m[1];return a.domain(Cc(e,1<d?{floor:function(d){for(;g(d=b.floor(d));)d=tb(d-1);return d},ceil:function(d){for(;g(d=b.ceil(d));)d=tb(+d+1);return d}}:b))};a.ticks=function(b,d){var g=Fb(a.domain()),e=null==b?c(g,10):"number"===typeof b?c(g,b):!b.range&&
[{range:b},d];e&&(b=e[0],d=e[1]);return b.range(g[0],tb(+g[1]+1),1>d?1:d)};a.tickFormat=function(){return g};a.copy=function(){return Sd(b.copy(),d,g)};return Id(a,b)}function tb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Ma.createRange();d.selectNode(Ma.body);return d.createContextualFragment(b.responseText)}var y={version:"3.5.17"},Vf=[].slice,Ua=function(b){return Vf.call(b)},Ma=this.document;if(Ma)try{Ua(Ma.documentElement.childNodes)[0].nodeType}catch(b){Ua=
function(b){for(var d=b.length,a=Array(d);d--;)a[d]=b[d];return a}}Date.now||(Date.now=function(){return+new Date});if(Ma)try{Ma.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Kc=this.Element.prototype,fi=Kc.setAttribute,gi=Kc.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Kc.setAttribute=function(b,g){fi.call(this,b,g+"")};Kc.setAttributeNS=function(b,g,a){gi.call(this,b,g,a+"")};Wf.setProperty=function(b,g,a){hi.call(this,b,g+"",a)}}y.ascending=a;y.descending=
function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};y.min=function(b,d){var g=-1,a=b.length,c;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var e=c;break}for(;++g<a;)null!=(c=b[g])&&e>c&&(e=c)}else{for(;++g<a;)if(null!=(c=d.call(b,b[g],g))&&c>=c){e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&e>c&&(e=c)}return e};y.max=function(b,d){var g=-1,a=b.length,c;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var e=c;break}for(;++g<a;)null!=(c=b[g])&&c>e&&(e=c)}else{for(;++g<a;)if(null!=
(c=d.call(b,b[g],g))&&c>=c){e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&c>e&&(e=c)}return e};y.extent=function(b,d){var g=-1,a=b.length,c,e;if(1===arguments.length){for(;++g<a;)if(null!=(c=b[g])&&c>=c){var f=e=c;break}for(;++g<a;)null!=(c=b[g])&&(f>c&&(f=c),e<c&&(e=c))}else{for(;++g<a;)if(null!=(c=d.call(b,b[g],g))&&c>=c){f=e=c;break}for(;++g<a;)null!=(c=d.call(b,b[g],g))&&(f>c&&(f=c),e<c&&(e=c))}return[f,e]};y.sum=function(b,d){var g=0,a=b.length,c,e=-1;if(1===arguments.length)for(;++e<a;)isNaN(c=
+b[e])||(g+=c);else for(;++e<a;)isNaN(c=+d.call(b,b[e],e))||(g+=c);return g};y.mean=function(b,d){var g=0,a=b.length,e,f=-1,l=a;if(1===arguments.length)for(;++f<a;)isNaN(e=c(b[f]))?--l:g+=e;else for(;++f<a;)isNaN(e=c(d.call(b,b[f],f)))?--l:g+=e;if(l)return g/l};y.quantile=function(b,d){var g=(b.length-1)*d+1,a=Math.floor(g),c=+b[a-1];return(g-=a)?c+g*(b[a]-c):c};y.median=function(b,d){var g=[],e=b.length,f,l=-1;if(1===arguments.length)for(;++l<e;)isNaN(f=c(b[l]))||g.push(f);else for(;++l<e;)isNaN(f=
c(d.call(b,b[l],l)))||g.push(f);if(g.length)return y.quantile(g.sort(a),.5)};y.variance=function(b,d){var g=b.length,a=0,e,f=0,l=-1,h=0;if(1===arguments.length)for(;++l<g;){if(!isNaN(e=c(b[l]))){var q=e-a;a+=q/++h;f+=q*(e-a)}}else for(;++l<g;)isNaN(e=c(d.call(b,b[l],l)))||(q=e-a,a+=q/++h,f+=q*(e-a));if(1<h)return f/(h-1)};y.deviation=function(){var b=y.variance.apply(this,arguments);return b?Math.sqrt(b):b};var Xf=n(a);y.bisectLeft=Xf.left;y.bisect=y.bisectRight=Xf.right;y.bisector=function(b){return n(1===
b.length?function(d,g){return a(b(d),g)}:b)};y.shuffle=function(b,d,g){3>(a=arguments.length)&&(g=b.length,2>a&&(d=0));for(var a=g-d,c,e;a;)e=Math.random()*a--|0,c=b[a+d],b[a+d]=b[e+d],b[e+d]=c;return b};y.permute=function(b,d){for(var a=d.length,c=Array(a);a--;)c[a]=b[d[a]];return c};y.pairs=function(b){for(var d=0,a=b.length-1,c=b[0],e=Array(0>a?0:a);d<a;)e[d]=[c,c=b[++d]];return e};y.transpose=function(b){if(!(f=b.length))return[];for(var d=-1,a=y.min(b,h),c=Array(a);++d<a;)for(var e=-1,f,l=c[d]=
Array(f);++e<f;)l[e]=b[e][d];return c};y.zip=function(){return y.transpose(arguments)};y.keys=function(b){var d=[],a;for(a in b)d.push(a);return d};y.values=function(b){var d=[],a;for(a in b)d.push(b[a]);return d};y.entries=function(b){var d=[],a;for(a in b)d.push({key:a,value:b[a]});return d};y.merge=function(b){var d=b.length;var a=-1;for(var c=0,e,f;++a<d;)c+=b[a].length;for(e=Array(c);0<=--d;)for(f=b[d],a=f.length;0<=--a;)e[--c]=f[a];return e};var ja=Math.abs;y.range=function(b,d,a){3>arguments.length&&
(a=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/a)throw Error("infinite range");var g=[];var c=ja(a);for(var e=1;c*e%1;)e*=10;c=e;var e=-1,f;b*=c;d*=c;a*=c;if(0>a)for(;(f=b+a*++e)>d;)g.push(f/c);else for(;(f=b+a*++e)<d;)g.push(f/c);return g};y.map=function(b,d){var a=new v;if(b instanceof v)b.forEach(function(b,d){a.set(b,d)});else if(Array.isArray(b)){var c=-1,e=b.length,f;if(1===arguments.length)for(;++c<e;)a.set(c,b[c]);else for(;++c<e;)a.set(d.call(b,f=b[c],c),f)}else for(c in b)a.set(c,
b[c]);return a};r(v,{has:z,get:function(b){return this._[k(b)]},set:function(b,d){return this._[k(b)]=d},remove:F,keys:G,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:w(d),value:this._[d]});return b},size:H,empty:D,forEach:function(b){for(var d in this._)b.call(this,w(d),this._[d])}});y.nest=function(){function b(d,g,e){if(e>=c.length)return l?l.call(a,g):f?g.sort(f):g;for(var m=-1,t=g.length,h=c[e++],q,L,p=new v,
k;++m<t;)(k=p.get(q=h(L=g[m])))?k.push(L):p.set(q,[L]);d?(L=d(),g=function(a,g){L.set(a,b(d,g,e))}):(L={},g=function(a,g){L[a]=b(d,g,e)});p.forEach(g);return L}function d(b,a){if(a>=c.length)return b;var g=[],m=e[a++];b.forEach(function(b,c){g.push({key:b,values:d(c,a)})});return m?g.sort(function(b,d){return m(b.key,d.key)}):g}var a={},c=[],e=[],f,l;a.map=function(d,a){return b(a,d,0)};a.entries=function(a){return d(b(y.map,a,0),0)};a.key=function(b){c.push(b);return a};a.sortKeys=function(b){e[c.length-
1]=b;return a};a.sortValues=function(b){f=b;return a};a.rollup=function(b){l=b;return a};return a};y.set=function(b){var d=new J;if(b)for(var a=0,c=b.length;a<c;++a)d.add(b[a]);return d};r(J,{has:z,add:function(b){this._[k(b+="")]=!0;return b},remove:F,values:G,size:H,empty:D,forEach:function(b){for(var d in this._)b.call(this,w(d))}});y.behavior={};y.rebind=function(b,d){for(var a=1,c=arguments.length,e;++a<c;)b[e=arguments[a]]=O(b,d,d[e]);return b};var ce="webkit ms moz Moz o O".split(" ");y.dispatch=
function(){for(var b=new C,d=-1,a=arguments.length;++d<a;)b[arguments[d]]=p(b);return b};C.prototype.on=function(b,d){var a=b.indexOf("."),c="";0<=a&&(c=b.slice(a+1),b=b.slice(0,a));if(b)return 2>arguments.length?this[b].on(c):this[b].on(c,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(c,null);return this}};y.event=null;y.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Zb={}.__proto__?function(b,d){b.__proto__=d}:
function(b,d){for(var a in d)b[a]=d[a]},$c=function(b,d){return d.querySelector(b)},ad=function(b,d){return d.querySelectorAll(b)},$b=function(b,d){var a=b.matches||b[K(b,"matchesSelector")];$b=function(b,d){return a.call(b,d)};return $b(b,d)};"function"===typeof Sizzle&&($c=function(b,d){return Sizzle(b,d)[0]||null},ad=Sizzle,$b=Sizzle.matchesSelector);y.selection=function(){return y.select(Ma.documentElement)};var qa=y.selection.prototype=[];qa.select=function(b){var d=[],a,c,e,f;b=u(b);for(var l=
-1,h=this.length;++l<h;){d.push(a=[]);a.parentNode=(e=this[l]).parentNode;for(var q=-1,p=e.length;++q<p;)(f=e[q])?(a.push(c=b.call(f,f.__data__,q,l)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return E(d)};qa.selectAll=function(b){var d=[],a,c;b=N(b);for(var e=-1,f=this.length;++e<f;)for(var l=this[e],h=-1,q=l.length;++h<q;)if(c=l[h])d.push(a=Ua(b.call(c,c.__data__,h,e))),a.parentNode=c;return E(d)};var Td={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:Td,qualify:function(b){var d=b.indexOf(":"),a=b;0<=d&&"xmlns"!==(a=b.slice(0,d))&&(b=b.slice(d+1));return Td.hasOwnProperty(a)?{space:Td[a],local:b}:b}};qa.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node();b=y.ns.qualify(b);return b.local?a.getAttributeNS(b.space,b.local):a.getAttribute(b)}for(d in b)this.each(Q(d,b[d]));return this}return this.each(Q(b,d))};qa.classed=
function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node(),c=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(d=a.classList)for(;++e<c;){if(!d.contains(b[e]))return!1}else for(d=a.getAttribute("class");++e<c;)if(!A(b[e]).test(d))return!1;return!0}for(d in b)this.each(l(d,b[d]));return this}return this.each(l(b,d))};qa.style=function(b,d,a){var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.each(Z(a,b[a],d));return this}if(2>g)return g=this.node(),
e(g).getComputedStyle(g,null).getPropertyValue(b);a=""}return this.each(Z(b,d,a))};qa.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(ca(d,b[d]));return this}return this.each(ca(b,d))};qa.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};qa.html=
function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};qa.append=function(b){b=Y(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};qa.insert=function(b,d){b=Y(b);d=u(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};qa.remove=
function(){return this.each(aa)};qa.data=function(b,d){function a(b,a){var g,c=b.length,e=a.length,f=Math.min(c,e),m=Array(e),t=Array(e),l=Array(c),L,k;if(d){var f=new v,T=Array(c),S;for(g=-1;++g<c;)if(L=b[g])f.has(S=d.call(L,L.__data__,g))?l[g]=L:f.set(S,L),T[g]=S;for(g=-1;++g<e;)(L=f.get(S=d.call(a,k=a[g],g)))?!0!==L&&(m[g]=L,L.__data__=k):t[g]={__data__:k},f.set(S,!0);for(g=-1;++g<c;)g in T&&!0!==f.get(T[g])&&(l[g]=b[g])}else{for(g=-1;++g<f;)L=b[g],k=a[g],L?(L.__data__=k,m[g]=L):t[g]={__data__:k};
for(;g<e;++g)t[g]={__data__:a[g]};for(;g<c;++g)l[g]=b[g]}t.update=m;t.parentNode=m.parentNode=l.parentNode=b.parentNode;h.push(t);q.push(m);p.push(l)}var c=-1,e=this.length,f,l;if(!arguments.length){for(b=Array(e=(f=this[0]).length);++c<e;)if(l=f[c])b[c]=l.__data__;return b}var h=oa([]),q=E([]),p=E([]);if("function"===typeof b)for(;++c<e;)a(f=this[c],b.call(f,f.parentNode.__data__,c));else for(;++c<e;)a(f=this[c],b);q.enter=function(){return h};q.exit=function(){return p};return q};qa.datum=function(b){return arguments.length?
this.property("__data__",b):this.property("__data__")};qa.filter=function(b){var d=[],a,c,e;"function"!==typeof b&&(b=x(b));for(var f=0,l=this.length;f<l;f++){d.push(a=[]);a.parentNode=(c=this[f]).parentNode;for(var h=0,q=c.length;h<q;h++)(e=c[h])&&b.call(e,e.__data__,h,f)&&a.push(e)}return E(d)};qa.order=function(){for(var b=-1,d=this.length;++b<d;)for(var a=this[b],c=a.length-1,e=a[c],f;0<=--c;)if(f=a[c])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};qa.sort=function(b){b=
U.apply(this,arguments);for(var d=-1,a=this.length;++d<a;)this[d].sort(b);return this.order()};qa.each=function(b){return X(this,function(d,a,c){b.call(d,d.__data__,a,c)})};qa.call=function(b){var d=Ua(arguments);b.apply(d[0]=this,d);return this};qa.empty=function(){return!this.node()};qa.node=function(){for(var b=0,d=this.length;b<d;b++)for(var a=this[b],c=0,e=a.length;c<e;c++){var f=a[c];if(f)return f}return null};qa.size=function(){var b=0;X(this,function(){++b});return b};var Xa=[];y.selection.enter=
oa;y.selection.enter.prototype=Xa;Xa.append=qa.append;Xa.empty=qa.empty;Xa.node=qa.node;Xa.call=qa.call;Xa.size=qa.size;Xa.select=function(b){for(var d=[],a,c,e,f,l,h=-1,q=this.length;++h<q;){e=(f=this[h]).update;d.push(a=[]);a.parentNode=f.parentNode;for(var p=-1,k=f.length;++p<k;)(l=f[p])?(a.push(e[p]=c=b.call(f.parentNode,l.__data__,p,h)),c.__data__=l.__data__):a.push(null)}return E(d)};Xa.insert=function(b,d){2>arguments.length&&(d=Ba(this));return qa.insert.call(this,b,d)};y.select=function(b){if("string"===
typeof b){var d=[$c(b,Ma)];d.parentNode=Ma.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return E([d])};y.selectAll=function(b){"string"===typeof b?(b=Ua(ad(b,Ma)),b.parentNode=Ma.documentElement):(b=Ua(b),b.parentNode=null);return E([b])};qa.on=function(b,d,a){var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d=!1);for(a in b)this.each(W(a,b[a],d));return this}if(2>g)return(g=this.node()["__on"+b])&&g._;a=!1}return this.each(W(b,d,a))};var bd=
y.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ma&&bd.forEach(function(b){"on"+b in Ma&&bd.remove(b)});var jb,pg=0;y.mouse=function(b){return xa(b,R())};var cd=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;y.touch=function(b,d,a){3>arguments.length&&(a=d,d=R().changedTouches);if(d)for(var g=0,c=d.length,e;g<c;++g)if((e=d[g]).identifier===a)return xa(b,e)};y.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",l)}function d(b,d,g,e,f){return function(){var m=
y.event.target.correspondingElement||y.event.target,t=this.parentNode,l=a.of(this,arguments),h=0,q=b(),p=".drag"+(null==q?"":"-"+q),L=y.select(g(m)).on(e+p,function(){var b=d(t,q);if(b){var a=b[0]-T[0];var g=b[1]-T[1];h|=a|g;T=b;l({type:"drag",x:b[0]+n[0],y:b[1]+n[1],dx:a,dy:g})}}).on(f+p,function(){d(t,q)&&(L.on(e+p,null).on(f+p,null),k(h),l({type:"dragend"}))}),k=wa(m),T=d(t,q);if(c){var n=c.apply(this,arguments);n=[n.x-T[0],n.y-T[1]]}else n=[0,0];l({type:"dragstart"})}}var a=I(b,"drag","dragstart",
"dragend"),c=null,f=d(M,y.mouse,e,"mousemove","mouseup"),l=d(ga,y.touch,B,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return c;c=d;return b};return y.rebind(b,a,"on")};y.touches=function(b,d){2>arguments.length&&(d=R().touches);return d?Ua(d).map(function(d){var a=xa(b,d);a.identifier=d.identifier;return a}):[]};var ha=Math.PI,Pa=2*ha,ji=Pa-1E-6,Ca=ha/2,ia=ha/180,Aa=180/ha,Yb=Math.SQRT2;y.interpolateZoom=function(b,d){var a=b[0],c=b[1],e=b[2],f=d[2],l=d[0]-a,h=d[1]-c,q=l*l+h*
h;if(1E-12>q){var p=Math.log(f/e)/Yb;var k=function(b){return[a+b*l,c+b*h,e*Math.exp(Yb*b*p)]}}else{var n=Math.sqrt(q);k=(f*f-e*e+4*q)/(4*e*n);var f=(f*f-e*e-4*q)/(4*f*n),u=Math.log(Math.sqrt(k*k+1)-k);p=(Math.log(Math.sqrt(f*f+1)-f)-u)/Yb;k=function(b){b*=p;var d=va(u),g=e/(2*n),f=Yb*b+u;var m=((f=Math.exp(2*f))-1)/(f+1);var t=u,f=((t=Math.exp(t))-1/t)/2,g=g*(d*m-f);return[a+g*l,c+g*h,e*d/va(Yb*b+u)]}}k.duration=1E3*p;return k};y.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",k).on(Ud+
".zoom",u).on("dblclick.zoom",r).on("touchstart.zoom",n)}function d(b){return[(b[0]-x.x)/x.k,(b[1]-x.y)/x.k]}function a(b){x.k=Math.max(K[0],Math.min(K[1],b))}function c(b,d){d=[d[0]*x.k+x.x,d[1]*x.k+x.y];x.x+=b[0]-d[0];x.y+=b[1]-d[1]}function f(d,g,e,f){d.__chart__={x:x.x,y:x.y,k:x.k};a(Math.pow(2,f));c(A=g,e);d=y.select(d);0<E&&(d=d.transition().duration(E));d.call(b.event)}function l(){Q&&Q.domain(aa.range().map(function(b){return(b-x.x)/x.k}).map(aa.invert));z&&z.domain(M.range().map(function(b){return(b-
x.y)/x.k}).map(M.invert))}function h(b){N++||b({type:"zoomstart"})}function q(b){l();b({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function p(b){--N||(b({type:"zoomend"}),A=null)}function k(){var b=this,a=w.of(b,arguments),g=0,f=y.select(e(b)).on("mousemove.zoom",function(){g=1;c(y.mouse(b),m);q(a)}).on("mouseup.zoom",function(){f.on("mousemove.zoom",null).on("mouseup.zoom",null);t(g);p(a)}),m=d(y.mouse(b)),t=wa(b);Lc.call(b);h(a)}function n(){function b(){var b=y.touches(t);u=x.k;b.forEach(function(b){b.identifier in
L&&(L[b.identifier]=d(b))});return b}function g(){var d=y.event.target;y.select(d).on(S,e).on(r,m);A.push(d);d=y.event.changedTouches;for(var a=0,g=d.length;a<g;++a)L[d[a].identifier]=null;a=b();g=Date.now();1===a.length?(500>g-X&&(d=a[0],f(t,d,L[d.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),V()),X=g):1<a.length&&(d=a[0],g=a[1],a=d[0]-g[0],d=d[1]-g[1],T=a*a+d*d)}function e(){var b=y.touches(t),d;Lc.call(t);for(var g=0,e=b.length;g<e;++g,d=null){var f=b[g];if(d=L[f.identifier]){if(h)break;var m=
f;var h=d}}if(d){var p=(p=f[0]-m[0])*p+(p=f[1]-m[1])*p,b=T&&Math.sqrt(p/T);m=[(m[0]+f[0])/2,(m[1]+f[1])/2];h=[(h[0]+d[0])/2,(h[1]+d[1])/2];a(b*u)}X=null;c(m,h);q(l)}function m(){if(y.event.touches.length){for(var d=y.event.changedTouches,a=0,g=d.length;a<g;++a)delete L[d[a].identifier];for(var c in L)return void b()}y.selectAll(A).on(P,null);C.on("mousedown.zoom",k).on("touchstart.zoom",n);I();p(l)}var t=this,l=w.of(t,arguments),L={},T=0,u,P=".zoom-"+y.event.changedTouches[0].identifier,S="touchmove"+
P,r="touchend"+P,A=[],C=y.select(t),I=wa(t);g();h(l);C.on("mousedown.zoom",null).on("touchstart.zoom",g)}function u(){var b=w.of(this,arguments);U?clearTimeout(U):(Lc.call(this),C=d(A=v||y.mouse(this)),h(b));U=setTimeout(function(){U=null;p(b)},50);V();a(Math.pow(2,.002*Mc())*x.k);c(A,C);q(b)}function r(){var b=y.mouse(this),a=Math.log(x.k)/Math.LN2;f(this,b,d(b),y.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var x={x:0,y:0,k:1},C,A,v,W=[960,500],K=Yf,E=250,N=0,U,X,w=I(b,"zoomstart","zoom","zoomend"),
aa,Q,M,z;Ud||(Ud="onwheel"in Ma?(Mc=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(Mc=function(){return y.event.wheelDelta},"mousewheel"):(Mc=function(){return-y.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=w.of(this,arguments),d=x;ub?y.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1};h(b)}).tween("zoom:zoom",function(){var a=W[0],g=W[1],c=A?A[0]:a/2,e=A?A[1]:g/2,f=y.interpolateZoom([(c-
x.x)/x.k,(e-x.y)/x.k,a/x.k],[(c-d.x)/d.k,(e-d.y)/d.k,a/d.k]);return function(d){d=f(d);var g=a/d[2];this.__chart__=x={x:c-d[0]*g,y:e-d[1]*g,k:g};q(b)}}).each("interrupt.zoom",function(){p(b)}).each("end.zoom",function(){p(b)}):(this.__chart__=x,h(b),q(b),p(b))})};b.translate=function(d){if(!arguments.length)return[x.x,x.y];x={x:+d[0],y:+d[1],k:x.k};l();return b};b.scale=function(d){if(!arguments.length)return x.k;x={x:x.x,y:x.y,k:null};a(+d);l();return b};b.scaleExtent=function(d){if(!arguments.length)return K;
K=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return v;v=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return W;W=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return E;E=+d;return b};b.x=function(d){if(!arguments.length)return Q;Q=d;aa=d.copy();x={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return z;z=d;M=d.copy();x={x:0,y:0,k:1};return b};return y.rebind(b,w,"on")};var Yf=[0,Infinity],Mc,Ud;y.color=ra;
ra.prototype.toString=function(){return this.rgb()+""};y.hsl=Ja;var Vd=Ja.prototype=new ra;Vd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ja(this.h,this.s,this.l/b)};Vd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ja(this.h,this.s,b*this.l)};Vd.rgb=function(){return sa(this.h,this.s,this.l)};y.hcl=ma;var Wd=ma.prototype=new ra;Wd.brighter=function(b){return new ma(this.h,this.c,Math.min(100,this.l+Nc*(arguments.length?b:1)))};Wd.darker=function(b){return new ma(this.h,
this.c,Math.max(0,this.l-Nc*(arguments.length?b:1)))};Wd.rgb=function(){return Ga(this.h,this.c,this.l).rgb()};y.lab=na;var Nc=18,de=.95047,ee=1,fe=1.08883,Xd=na.prototype=new ra;Xd.brighter=function(b){return new na(Math.min(100,this.l+Nc*(arguments.length?b:1)),this.a,this.b)};Xd.darker=function(b){return new na(Math.max(0,this.l-Nc*(arguments.length?b:1)),this.a,this.b)};Xd.rgb=function(){return za(this.l,this.a,this.b)};y.rgb=Ka;var Oc=Ka.prototype=new ra;Oc.brighter=function(b){b=Math.pow(.7,
arguments.length?b:1);var d=this.r,a=this.g,c=this.b;if(!d&&!a&&!c)return new Ka(30,30,30);d&&30>d&&(d=30);a&&30>a&&(a=30);c&&30>c&&(c=30);return new Ka(Math.min(255,d/b),Math.min(255,a/b),Math.min(255,c/b))};Oc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ka(b*this.r,b*this.g,b*this.b)};Oc.hsl=function(){return cc(this.r,this.g,this.b)};Oc.toString=function(){return"#"+bb(this.r)+bb(this.g)+bb(this.b)};var ec=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ec.forEach(function(b,d){ec.set(b,new Ka(d>>16,d>>8&255,d&255))});y.functor=ua;y.xhr=ed(B);y.dsv=function(b,d){function a(b,a,g){3>arguments.length&&(g=a,a=null);var f=Jb(b,d,null==a?c:e(a),g);f.row=function(b){return arguments.length?f.response(null==(a=b)?c:e(b)):a};return f}function c(b){return a.parse(b.responseText)}function e(b){return function(d){return a.parse(d.responseText,b)}}function f(d){return d.map(l).join(b)}
function l(b){return h.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var h=new RegExp('["'+b+"\n]"),q=b.charCodeAt(0);a.parse=function(b,d){var g;return a.parseRows(b,function(b,a){if(g)return g(b,a-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");g=d?function(b,a){return d(c(b),a)}:c})};a.parseRows=function(b,d){function a(){var d;if(m>=f)return c;if(h)return h=!1,g;var a=m;if(34===b.charCodeAt(a)){for(d=a;d++<f;)if(34===b.charCodeAt(d)){if(34!==
b.charCodeAt(d+1))break;++d}m=d+2;var e=b.charCodeAt(d+1);13===e?(h=!0,10===b.charCodeAt(d+2)&&++m):10===e&&(h=!0);return b.slice(a+1,d).replace(/""/g,'"')}for(;m<f;){e=b.charCodeAt(m++);d=1;if(10===e)h=!0;else if(13===e)h=!0,10===b.charCodeAt(m)&&(++m,++d);else if(e!==q)continue;return b.slice(a,m-d)}return b.slice(a)}for(var g={},c={},e=[],f=b.length,m=0,t=0,l,h;(l=a())!==c;){for(var p=[];l!==g&&l!==c;)p.push(l),l=a();d&&null==(p=d(p,t++))||e.push(p)}return e};a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);
var g=new J,c=[];d.forEach(function(b){for(var d in b)g.has(d)||c.push(g.add(d))});return[c.map(l).join(b)].concat(d.map(function(d){return c.map(function(b){return l(d[b])}).join(b)})).join("\n")};a.formatRows=function(b){return b.map(f).join("\n")};return a};y.csv=y.dsv(",","text/csv");y.tsv=y.dsv("\t","text/tab-separated-values");var hc,gc,ic,jc,ge=this[K(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};y.timer=function(){fc.apply(this,arguments)};y.timer.flush=function(){he();ie()};
y.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var a=Math.pow(10,3*ja(8-d));return{scale:8<d?function(b){return b/a}:function(b){return b*a},symbol:b}});y.formatPrefix=function(b,d){var a=0;if(b=+b)0>b&&(b*=-1),d&&(b=y.round(b,fd(b,d))),a=1+Math.floor(1E-12+Math.log(b)/Math.LN10),a=Math.max(-24,Math.min(24,3*Math.floor((a-1)/3)));return ki[8+a/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
sg=y.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=y.round(b,fd(b,d))).toFixed(Math.max(0,Math.min(20,fd(b*(1+1E-15),d))))}}),ba=y.time={},La=Date;Ya.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ab.setUTCDate.apply(this._,
arguments)},setDay:function(){ab.setUTCDay.apply(this._,arguments)},setFullYear:function(){ab.setUTCFullYear.apply(this._,arguments)},setHours:function(){ab.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ab.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ab.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ab.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ab.setUTCSeconds.apply(this._,arguments)},setTime:function(){ab.setTime.apply(this._,arguments)}};
var ab=Date.prototype;ba.year=lb(function(b){b=ba.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});ba.years=ba.year.range;ba.years.utc=ba.year.utc.range;ba.day=lb(function(b){var d=new La(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});ba.days=ba.day.range;ba.days.utc=ba.day.utc.range;ba.dayOfYear=function(b){var d=ba.year(b);return Math.floor((b-
d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var a=ba[b]=lb(function(b){(b=ba.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+(a+d)%7)/7)-(a!==d)});ba[b+"s"]=a.range;ba[b+"s"].utc=a.utc.range;ba[b+"OfYear"]=function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+
(a+d)%7)/7)}});ba.week=ba.sunday;ba.weeks=ba.sunday.range;ba.weeks.utc=ba.sunday.utc.range;ba.weekOfYear=ba.sundayOfYear;var ke={"-":"",_:" ",0:"0"},Da=/^\s*\d+/,ne=/^%/;y.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=y.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});y.format=Zf.numberFormat;y.geo={};gd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Pc);oe(Pc.s,this.s,this);this.s?this.t+=Pc.t:this.s=Pc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Pc=new gd;y.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else oc(b,d)};var $f=
{Feature:function(b,d){oc(b.geometry,d)},FeatureCollection:function(b,d){for(var a=b.features,c=-1,e=a.length;++c<e;)oc(a[c].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)b=a[c],d.point(b[0],b[1],b[2])},LineString:function(b,d){hd(b.coordinates,d,0)},MultiLineString:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)hd(a[c],d,0)},Polygon:function(b,d){qe(b.coordinates,
d)},MultiPolygon:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)qe(a[c],d)},GeometryCollection:function(b,d){for(var a=b.geometries,c=-1,e=a.length;++c<e;)oc(a[c],d)}};y.geo.area=function(b){Qc=0;y.geo.stream(b,Oa);return Qc};var Qc,mb=new gd,Oa={sphere:function(){Qc+=4*ha},point:M,lineStart:M,lineEnd:M,polygonStart:function(){mb.reset();Oa.lineStart=Jg},polygonEnd:function(){var b=2*mb;Qc+=0>b?4*ha+b:b;Oa.lineStart=Oa.lineEnd=Oa.point=M}};y.geo.bounds=function(){function b(b,d){W.push(K=
[k=b,x=b]);d<n&&(n=d);d>u&&(u=d)}function d(d,a){var g=nb([d*ia,a*ia]);if(I){var c=wb(I,g);var e=[c[1],-c[0],0];e=wb(e,c);rc(e);e=sc(e);var f=d-r;c=0<f?1:-1;var m=e[0]*Aa*c,f=180<ja(f);f^(c*r<m&&m<c*d)?(e=e[1]*Aa,e>u&&(u=e)):(m=(m+360)%360-180,f^(c*r<m&&m<c*d))?(e=-e[1]*Aa,e<n&&(n=e)):(a<n&&(n=a),a>u&&(u=a));f?d<r?h(k,d)>h(k,x)&&(x=d):h(d,x)>h(k,x)&&(k=d):x>=k?(d<k&&(k=d),d>x&&(x=d)):d>r?h(k,d)>h(k,x)&&(x=d):h(d,x)>h(k,x)&&(k=d)}else b(d,a);I=g;r=d}function a(){E.point=d}function c(){K[0]=k;K[1]=
x;E.point=b;I=null}function e(b,a){if(I){var g=b-r;v+=180<ja(g)?g+(0<g?360:-360):g}else A=b,C=a;Oa.point(b,a);d(b,a)}function f(){Oa.lineStart()}function l(){e(A,C);Oa.lineEnd();1E-6<ja(v)&&(k=-(x=180));K[0]=k;K[1]=x;I=null}function h(b,d){return 0>(d-=b)?d+360:d}function q(b,d){return b[0]-d[0]}function p(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var k,n,x,u,r,A,C,I,v,W,K,E={point:b,lineStart:a,lineEnd:c,polygonStart:function(){E.point=e;E.lineStart=f;E.lineEnd=l;v=0;Oa.polygonStart()},
polygonEnd:function(){Oa.polygonEnd();E.point=b;E.lineStart=a;E.lineEnd=c;0>mb?(k=-(x=180),n=-(u=90)):1E-6<v?u=90:-1E-6>v&&(n=-90);K[0]=k;K[1]=x}};return function(b){u=x=-(k=n=Infinity);W=[];y.geo.stream(b,E);if(b=W.length){W.sort(q);for(var d=1,a=W[0],g,c=[a];d<b;++d)g=W[d],p(g[0],a)||p(g[1],a)?(h(a[0],g[1])>h(a[0],a[1])&&(a[1]=g[1]),h(g[0],a[1])>h(a[0],a[1])&&(a[0]=g[0])):c.push(a=g);var e=-Infinity,f;b=c.length-1;d=0;for(a=c[b];d<=b;a=g,++d)g=c[d],(f=h(a[1],g[0]))>e&&(e=f,k=g[0],x=a[1])}W=K=null;
return Infinity===k||Infinity===n?[[NaN,NaN],[NaN,NaN]]:[[k,n],[x,u]]}}();y.geo.centroid=function(b){Lb=uc=ob=pb=Za=cb=db=Va=xb=yb=eb=0;y.geo.stream(b,Ra);b=xb;var d=yb,a=eb,c=b*b+d*d+a*a;return 1E-12>c&&(b=cb,d=db,a=Va,1E-6>uc&&(b=ob,d=pb,a=Za),c=b*b+d*d+a*a,1E-12>c)?[NaN,NaN]:[Math.atan2(d,b)*Aa,ya(a/Math.sqrt(c))*Aa]};var Lb,uc,ob,pb,Za,cb,db,Va,xb,yb,eb,Ra={sphere:M,point:jd,lineStart:re,lineEnd:se,polygonStart:function(){Ra.lineStart=Kg},polygonEnd:function(){Ra.lineStart=re}},Ie=we(Mb,function(b){var d=
NaN,a=NaN,c=NaN,e;return{lineStart:function(){b.lineStart();e=1},point:function(g,f){var m=0<g?ha:-ha,l=ja(g-d);if(1E-6>ja(l-ha))b.point(d,a=0<(a+f)/2?Ca:-Ca),b.point(c,a),b.lineEnd(),b.lineStart(),b.point(m,a),b.point(g,a),e=0;else if(c!==m&&l>=ha){1E-6>ja(d-c)&&(d-=1E-6*c);1E-6>ja(g-m)&&(g-=1E-6*m);var l=d,t=a,h=g,q,p,k=Math.sin(l-h);a=1E-6<ja(k)?Math.atan((Math.sin(t)*(p=Math.cos(f))*Math.sin(h)-Math.sin(f)*(q=Math.cos(t))*Math.sin(l))/(q*p*k)):(t+f)/2;b.point(c,a);b.lineEnd();b.lineStart();b.point(m,
a);e=0}b.point(d=g,a=f);c=m},lineEnd:function(){b.lineEnd();d=a=NaN},clean:function(){return 2-e}}},function(b,d,a,c){null==b?(a*=Ca,c.point(-ha,a),c.point(0,a),c.point(ha,a),c.point(ha,0),c.point(ha,-a),c.point(0,-a),c.point(-ha,-a),c.point(-ha,0),c.point(-ha,a)):1E-6<ja(b[0]-d[0])?(b=b[0]<d[0]?ha:-ha,a=a*b/2,c.point(-b,a),c.point(0,a),c.point(b,a)):c.point(d[0],d[1])},[-ha,-ha/2]);y.geo.clipExtent=function(){var b,d,a,c,e,f,l={stream:function(b){e&&(e.valid=!1);e=f(b);e.valid=!0;return e},extent:function(g){if(!arguments.length)return[[b,
d],[a,c]];f=ze(b=+g[0][0],d=+g[0][1],a=+g[1][0],c=+g[1][1]);e&&(e.valid=!1,e=null);return l}};return l.extent([[0,0],[960,500]])};(y.geo.conicEqualArea=function(){return ld(Ae)}).raw=Ae;y.geo.albers=function(){return y.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};y.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];e=null;(l(d,b),e)||(h(d,b),e)||q(d,b);return e}var d=y.geo.albers(),a=y.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,
65]),c=y.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(b,d){e=[b,d]}},l,h,q;b.invert=function(b){var g=d.scale(),e=d.translate(),f=(b[0]-e[0])/g,g=(b[1]-e[1])/g;return(.12<=g&&.234>g&&-.425<=f&&-.214>f?a:.166<=g&&.234>g&&-.214<=f&&-.115>f?c:d).invert(b)};b.stream=function(b){var g=d.stream(b),e=a.stream(b),f=c.stream(b);return{point:function(b,d){g.point(b,d);e.point(b,d);f.point(b,d)},sphere:function(){g.sphere();e.sphere();f.sphere()},lineStart:function(){g.lineStart();
e.lineStart();f.lineStart()},lineEnd:function(){g.lineEnd();e.lineEnd();f.lineEnd()},polygonStart:function(){g.polygonStart();e.polygonStart();f.polygonStart()},polygonEnd:function(){g.polygonEnd();e.polygonEnd();f.polygonEnd()}}};b.precision=function(g){if(!arguments.length)return d.precision();d.precision(g);a.precision(g);c.precision(g);return b};b.scale=function(g){if(!arguments.length)return d.scale();d.scale(g);a.scale(.35*g);c.scale(g);return b.translate(d.translate())};b.translate=function(g){if(!arguments.length)return d.translate();
var e=d.scale(),m=+g[0],t=+g[1];l=d.translate(g).clipExtent([[m-.455*e,t-.238*e],[m+.455*e,t+.238*e]]).stream(f).point;h=a.translate([m-.307*e,t+.201*e]).clipExtent([[m-.425*e+1E-6,t+.12*e+1E-6],[m-.214*e-1E-6,t+.234*e-1E-6]]).stream(f).point;q=c.translate([m-.205*e,t+.212*e]).clipExtent([[m-.214*e+1E-6,t+.166*e+1E-6],[m-.115*e-1E-6,t+.234*e-1E-6]]).stream(f).point;return b};return b.scale(1070)};var Yd,nd,fb={point:M,lineStart:M,lineEnd:M,polygonStart:function(){nd=0;fb.lineStart=Og},polygonEnd:function(){fb.lineStart=
fb.lineEnd=fb.point=M;Yd+=ja(nd/2)}},Rc,Sc,Tc,Uc,li={point:function(b,d){b<Rc&&(Rc=b);b>Tc&&(Tc=b);d<Sc&&(Sc=d);d>Uc&&(Uc=d)},lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},Sa={point:qb,lineStart:Ce,lineEnd:De,polygonStart:function(){Sa.lineStart=Qg},polygonEnd:function(){Sa.point=qb;Sa.lineStart=Ce;Sa.lineEnd=De}};y.geo.path=function(){function b(b){b&&("function"===typeof a&&l.pointRadius(+a.apply(this,arguments)),h&&h.valid||(h=f(l)),y.geo.stream(b,h));return l.result()}function d(){h=null;
return b}var a=4.5,c,e,f,l,h;b.area=function(b){Yd=0;y.geo.stream(b,f(fb));return Yd};b.centroid=function(b){ob=pb=Za=cb=db=Va=xb=yb=eb=0;y.geo.stream(b,f(Sa));return eb?[xb/eb,yb/eb]:Va?[cb/Va,db/Va]:Za?[ob/Za,pb/Za]:[NaN,NaN]};b.bounds=function(b){Tc=Uc=-(Rc=Sc=Infinity);y.geo.stream(b,f(li));return[[Rc,Sc],[Tc,Uc]]};b.projection=function(b){if(!arguments.length)return c;f=(c=b)?b.stream||Sg(b):B;return d()};b.context=function(b){if(!arguments.length)return e;l=null==(e=b)?new Pg:new Rg(b);"function"!==
typeof a&&l.pointRadius(a);return d()};b.pointRadius=function(d){if(!arguments.length)return a;a="function"===typeof d?d:(l.pointRadius(+d),+d);return b};return b.projection(y.geo.albersUsa()).context(null)};y.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var a in b)d[a]=b[a];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};y.geo.projection=gb;y.geo.projectionMutator=md;(y.geo.equirectangular=function(){return gb(Nb)}).raw=Nb.invert=Nb;y.geo.rotation=function(b){function d(d){d=b(d[0]*ia,d[1]*ia);return d[0]*=Aa,d[1]*=Aa,d}b=od(b[0]%360*ia,b[1]*ia,2<b.length?b[2]*ia:0);d.invert=function(d){d=b.invert(d[0]*ia,d[1]*ia);return d[0]*=Aa,d[1]*=Aa,d};return d};Je.invert=Nb;y.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,a=od(-b[0]*
ia,-b[1]*ia,0).invert,c=[];e(null,null,1,{point:function(b,d){c.push(b=a(b,d));b[0]*=Aa;b[1]*=Aa}});return{type:"Polygon",coordinates:[c]}}var d=[0,0],a,c=6,e;b.origin=function(a){if(!arguments.length)return d;d=a;return b};b.angle=function(d){if(!arguments.length)return a;e=kd((a=+d)*ia,c*ia);return b};b.precision=function(d){if(!arguments.length)return c;e=kd(a*ia,(c=+d)*ia);return b};return b.angle(90)};y.geo.distance=function(b,d){var a=(d[0]-b[0])*ia,c=b[1]*ia,e=d[1]*ia,f=Math.cos(a),l=Math.sin(c),
c=Math.cos(c),h=Math.sin(e),e=Math.cos(e),q;return Math.atan2(Math.sqrt((q=e*Math.sin(a))*q+(q=c*h-l*e*f)*q),l*h+c*e*f)};y.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return y.range(Math.ceil(f/x)*x,e,x).map(C).concat(y.range(Math.ceil(p/u)*u,q,u).map(I)).concat(y.range(Math.ceil(c/k)*k,a,k).filter(function(b){return 1E-6<ja(b%x)}).map(r)).concat(y.range(Math.ceil(h/n)*n,l,n).filter(function(b){return 1E-6<ja(b%u)}).map(A))}var a,c,e,f,l,h,q,p,
k=10,n=k,x=90,u=360,r,A,C,I,v=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[C(f).concat(I(q).slice(1),C(e).reverse().slice(1),I(p).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[f,p],[e,q]];f=+d[0][0];e=+d[1][0];p=+d[0][1];q=+d[1][1];f>e&&(d=f,f=e,e=d);p>q&&(d=p,p=q,q=d);return b.precision(v)};
b.minorExtent=function(d){if(!arguments.length)return[[c,h],[a,l]];c=+d[0][0];a=+d[1][0];h=+d[0][1];l=+d[1][1];c>a&&(d=c,c=a,a=d);h>l&&(d=h,h=l,l=d);return b.precision(v)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[x,u];x=+d[0];u=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[k,n];k=+d[0];n=+d[1];return b};b.precision=function(d){if(!arguments.length)return v;v=+d;r=Oe(h,l,90);A=Pe(c,
a,v);C=Oe(p,q,90);I=Pe(f,e,v);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};y.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[a||d.apply(this,arguments),e||c.apply(this,arguments)]}}var d=pd,a,c=qd,e;b.distance=function(){return y.geo.distance(a||d.apply(this,arguments),e||c.apply(this,arguments))};b.source=function(c){if(!arguments.length)return d;d=c;a="function"===typeof c?null:c;return b};b.target=
function(d){if(!arguments.length)return c;c=d;e="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};y.geo.interpolate=function(b,d){return Tg(b[0]*ia,b[1]*ia,d[0]*ia,d[1]*ia)};y.geo.length=function(b){Zd=0;y.geo.stream(b,Gb);return Zd};var Zd,Gb={sphere:M,point:M,lineStart:function(){function b(b,g){var e=Math.sin(g*=ia),f=Math.cos(g),m=ja((b*=ia)-d),l=Math.cos(m);Zd+=Math.atan2(Math.sqrt((m=f*Math.sin(m))*m+(m=c*e-a*f*l)*m),a*e+c*f*l);d=b;a=e;c=f}
var d,a,c;Gb.point=function(g,e){d=g*ia;a=Math.sin(e*=ia);c=Math.cos(e);Gb.point=b};Gb.lineEnd=function(){Gb.point=Gb.lineEnd=M}},lineEnd:M,polygonStart:M,polygonEnd:M},ag=Ob(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(y.geo.azimuthalEqualArea=function(){return gb(ag)}).raw=ag;var bg=Ob(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},B);(y.geo.azimuthalEquidistant=function(){return gb(bg)}).raw=bg;(y.geo.conicConformal=function(){return ld(Qe)}).raw=Qe;(y.geo.conicEquidistant=
function(){return ld(Re)}).raw=Re;var cg=Ob(function(b){return 1/b},Math.atan);(y.geo.gnomonic=function(){return gb(cg)}).raw=cg;wc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-Ca]};(y.geo.mercator=function(){return Se(wc)}).raw=wc;var dg=Ob(function(){return 1},Math.asin);(y.geo.orthographic=function(){return gb(dg)}).raw=dg;var eg=Ob(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(y.geo.stereographic=function(){return gb(eg)}).raw=eg;rd.invert=function(b,d){return[-d,
2*Math.atan(Math.exp(b))-Ca]};(y.geo.transverseMercator=function(){var b=Se(rd),d=b.center,a=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?a([b[0],b[1],2<b.length?b[2]+90:90]):(b=a(),[b[0],b[1],b[2]-90])};return a([0,0,90])}).raw=rd;y.geom={};y.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=ua(a),g=ua(c),e,f=b.length,m=[],l=[];for(e=0;e<f;e++)m.push([+d.call(this,b[e],e),+g.call(this,b[e],e),e]);m.sort(Ug);for(e=0;e<f;e++)l.push([m[e][0],
-m[e][1]]);var d=Te(m),l=Te(l),g=l[0]===d[0],f=l[l.length-1]===d[d.length-1],h=[];for(e=d.length-1;0<=e;--e)h.push(b[m[d[e]][2]]);for(e=+g;e<l.length-f;++e)h.push(b[m[l[e]][2]]);return h}var a=zb,c=Pb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(a=b,d):a};d.y=function(b){return arguments.length?(c=b,d):c};return d};y.geom.polygon=function(b){Zb(b,Vc);return b};var Vc=y.geom.polygon.prototype=[];Vc.area=function(){for(var b=-1,d=this.length,a,c=this[d-1],e=0;++b<d;)a=c,
c=this[b],e+=a[1]*c[0]-a[0]*c[1];return.5*e};Vc.centroid=function(b){var d=-1,a=this.length,c=0,e=0,f=this[a-1];for(arguments.length||(b=-1/(6*this.area()));++d<a;){var l=f;f=this[d];var h=l[0]*f[1]-f[0]*l[1];c+=(l[0]+f[0])*h;e+=(l[1]+f[1])*h}return[c*b,e*b]};Vc.clip=function(b){for(var d,a=Ue(b),c=-1,e=this.length-Ue(this),f,l,h=this[e-1],q,p,k;++c<e;){d=b.slice();b.length=0;q=this[c];p=d[(l=d.length-a)-1];for(f=-1;++f<l;)k=d[f],sd(k,h,q)?(sd(p,h,q)||b.push(td(p,k,h,q)),b.push(k)):sd(p,h,q)&&b.push(td(p,
k,h,q)),p=k;a&&b.push(b[0]);h=q}return b};var Db,rb,Bb,We=[],vd,Qb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,a;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);b.sort(Ze);return b.length};zc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};wd.prototype={insert:function(b,d){var a;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var c=b}else this._?
(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,c=b):(d.P=d.N=null,this._=d,c=null);d.L=d.R=null;d.U=c;d.C=!0;for(b=d;c&&c.C;){var e=c.U;c===e.L?(a=e.R)&&a.C?(c.C=a.C=!1,e.C=!0,b=e):(b===c.R&&(Sb(this,c),b=c,c=b.U),c.C=!1,e.C=!0,Tb(this,e)):(a=e.L)&&a.C?(c.C=a.C=!1,e.C=!0,b=e):(b===c.L&&(Tb(this,c),b=c,c=b.U),c.C=!1,e.C=!0,Sb(this,e));c=b.U}this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,a=b.L,c=b.R;var e=a?c?bf(c):a:c;d?d.L===b?d.L=e:d.R=e:this._=e;if(a&&c){var f=
e.C;e.C=b.C;e.L=a;a.U=e;e!==c?(d=e.U,e.U=b.U,b=e.R,d.L=b,e.R=c,c.U=e):(e.U=d,d=e,b=e.R)}else f=b.C,b=e;b&&(b.U=d);if(!f)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Sb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Tb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Sb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Tb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Sb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Tb(this,d);b=this._;
break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};y.geom.voronoi=function(b){function d(b){var d=Array(b.length),c=h[0][0],e=h[0][1],g=h[1][0],f=h[1][1];xd(a(b),h).cells.forEach(function(a,l){var m=a.edges,h=a.site;(d[l]=m.length?m.map(function(b){b=b.start();return[b.x,b.y]}):h.x>=c&&h.x<=g&&h.y>=e&&h.y<=f?[[c,f],[g,f],[g,e],[c,e]]:[]).point=b[l]});return d}function a(b){return b.map(function(b,d){return{x:1E-6*Math.round(f(b,d)/1E-6),y:1E-6*Math.round(l(b,d)/1E-6),i:d}})}var c=zb,e=Pb,f=c,l=e,h=
Wc;if(b)return d(b);d.links=function(b){return xd(a(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];xd(a(b)).cells.forEach(function(a,c){for(var e=a.site,g=a.edges.sort(Ze),f=-1,l=g.length,m,h=g[l-1].edge,h=h.l===e?h.r:h.l;++f<l;)m=h,h=g[f].edge,h=h.l===e?h.r:h.l,c<m.i&&c<h.i&&0>(e.x-h.x)*(m.y-e.y)-(e.x-m.x)*(h.y-e.y)&&d.push([b[c],b[m.i],b[h.i]])});return d};d.x=function(b){return arguments.length?(f=ua(c=
b),d):c};d.y=function(b){return arguments.length?(l=ua(e=b),d):e};d.clipExtent=function(b){if(!arguments.length)return h===Wc?null:h;h=null==b?Wc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):h===Wc?null:h&&h[1]};return d};var Wc=[[-1E6,-1E6],[1E6,1E6]];y.geom.delaunay=function(b){return y.geom.voronoi().triangles(b)};y.geom.quadtree=function(b,d,a,c,e){function g(b){function g(b,d,a,c,e,g,f,l){if(!isNaN(a)&&!isNaN(c))if(b.leaf){var m=b.x,q=b.y;if(null!=m){if(!(.01>
ja(m-a)+ja(q-c))){var t=b.point;b.x=b.y=b.point=null;h(b,t,m,q,e,g,f,l)}h(b,d,a,c,e,g,f,l)}else b.x=a,b.y=c,b.point=d}else h(b,d,a,c,e,g,f,l)}function h(b,d,a,c,e,f,l,m){var h=.5*(e+l),q=.5*(f+m),t=a>=h,p=c>=q,k=p<<1|t;b.leaf=!1;b=b.nodes[k]||(b.nodes[k]=cf());t?e=h:l=h;p?f=q:m=q;g(b,d,a,c,e,f,l,m)}var q=ua(f),t=ua(l),p;if(null!=d){var k=d;var n=a;var x=c;var u=e}else{x=u=-(k=n=Infinity);var r=[];var A=[];var C=b.length;if(m)for(p=0;p<C;++p){var L=b[p];L.x<k&&(k=L.x);L.y<n&&(n=L.y);L.x>x&&(x=L.x);
L.y>u&&(u=L.y);r.push(L.x);A.push(L.y)}else for(p=0;p<C;++p){var I=+q(L=b[p],p);L=+t(L,p);I<k&&(k=I);L<n&&(n=L);I>x&&(x=I);L>u&&(u=L);r.push(I);A.push(L)}}I=x-k;L=u-n;I>L?u=n+I:x=k+L;var v=cf();v.add=function(b){g(v,b,+q(b,++p),+t(b,p),k,n,x,u)};v.visit=function(b){Ub(b,v,k,n,x,u)};v.find=function(b){return bh(v,b[0],b[1],k,n,x,u)};p=-1;if(null==d){for(;++p<C;)g(v,b[p],r[p],A[p],k,n,x,u);--p}else b.forEach(v.add);r=A=b=L=null;return v}var f=zb,l=Pb,m;if(m=arguments.length)return f=$g,l=ah,3===m&&
(e=a,c=d,a=d=0),g(b);g.x=function(b){return arguments.length?(f=b,g):f};g.y=function(b){return arguments.length?(l=b,g):l};g.extent=function(b){if(!arguments.length)return null==d?null:[[d,a],[c,e]];null==b?d=a=c=e=null:(d=+b[0][0],a=+b[0][1],c=+b[1][0],e=+b[1][1]);return g};g.size=function(b){if(!arguments.length)return null==d?null:[c-d,e-a];null==b?d=a=c=e=null:(d=a=0,c=+b[0],e=+b[1]);return g};return g};y.interpolateRgb=yd;y.interpolateObject=df;y.interpolateNumber=$a;y.interpolateString=ef;var zd=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ad=new RegExp(zd.source,"g");y.interpolate=sb;y.interpolators=[function(b,d){var a=typeof d;return("string"===a?ec.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?yd:ef:d instanceof ra?yd:Array.isArray(d)?Ac:"object"===a&&isNaN(d)?df:$a)(b,d)}];y.interpolateArray=Ac;var fg=function(){return B},mi=y.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},
exp:function(){return hh},circle:function(){return ih},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var a=d/Pa*Math.asin(1/b);else b=1,a=d/4;return function(c){return 1+b*Math.pow(2,-10*c)*Math.sin((c-a)*Pa/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=y.map({"in":B,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});y.ease=function(b){var d=b.indexOf("-"),a=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):
"in",a=mi.get(a)||fg,d=ni.get(d)||B;return ch(d(a.apply(null,Vf.call(arguments,1))))};y.interpolateHcl=function(b,d){b=y.hcl(b);d=y.hcl(d);var a=b.h,c=b.c,e=b.l,f=d.h-a,l=d.c-c,h=d.l-e;isNaN(l)&&(l=0,c=isNaN(c)?d.c:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return Ga(a+f*b,c+l*b,e+h*b)+""}};y.interpolateHsl=function(b,d){b=y.hsl(b);d=y.hsl(d);var a=b.h,c=b.s,e=b.l,f=d.h-a,l=d.s-c,h=d.l-e;isNaN(l)&&(l=0,c=isNaN(c)?d.s:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<
f?f-=360:-180>f&&(f+=360);return function(b){return sa(a+f*b,c+l*b,e+h*b)+""}};y.interpolateLab=function(b,d){b=y.lab(b);d=y.lab(d);var a=b.l,c=b.a,e=b.b,f=d.l-a,l=d.a-c,h=d.b-e;return function(b){return za(a+f*b,c+l*b,e+h*b)+""}};y.interpolateRound=hf;y.transform=function(b){var d=Ma.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(b){if(null!=b){d.setAttribute("transform",b);var a=d.transform.baseVal.consolidate()}return new jf(a?a.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=lf;y.layout={};y.layout.bundle=function(){return function(b){for(var d=[],a=-1,c=b.length;++a<c;)d.push(qh(b[a]));return d}};y.layout.chord=function(){function b(){var b={},a=[],g=y.range(l),m=[],t,n;c=[];e=[];var x=0;for(t=-1;++t<l;){var u=0;for(n=-1;++n<l;)u+=f[t][n];a.push(u);m.push(y.range(l));x+=u}q&&g.sort(function(b,d){return q(a[b],a[d])});p&&m.forEach(function(b,
d){b.sort(function(b,a){return p(f[d][b],f[d][a])})});x=(Pa-h*l)/x;u=0;for(t=-1;++t<l;){var r=u;for(n=-1;++n<l;){var A=g[t];var C=m[A][n],L=f[A][C],I=u,v=u+=L*x;b[A+"-"+C]={index:A,subindex:C,startAngle:I,endAngle:v,value:L}}e[A]={index:A,startAngle:r,endAngle:u,value:a[A]};u+=h}for(t=-1;++t<l;)for(n=t-1;++n<l;)A=b[t+"-"+n],g=b[n+"-"+t],(A.value||g.value)&&c.push(A.value<g.value?{source:g,target:A}:{source:A,target:g});k&&d()}function d(){c.sort(function(b,d){return k((b.source.value+b.target.value)/
2,(d.source.value+d.target.value)/2)})}var a={},c,e,f,l,h=0,q,p,k;a.matrix=function(b){if(!arguments.length)return f;l=(f=b)&&f.length;c=e=null;return a};a.padding=function(b){if(!arguments.length)return h;h=b;c=e=null;return a};a.sortGroups=function(b){if(!arguments.length)return q;q=b;c=e=null;return a};a.sortSubgroups=function(b){if(!arguments.length)return p;p=b;c=null;return a};a.sortChords=function(b){if(!arguments.length)return k;k=b;c&&d();return a};a.chords=function(){c||b();return c};a.groups=
function(){e||b();return e};return a};y.layout.force=function(){function b(b){return function(d,a,c,e){if(d.point!==b){var g=d.cx-b.x;c=d.cy-b.y;e-=a;a=g*g+c*c;if(e*e/r<a)return a<x&&(a=d.charge/a,b.px-=g*a,b.py-=c*a),!0;d.point&&a&&a<x&&(a=d.pointCharge/a,b.px-=g*a,b.py-=c*a)}return!d.charge}}function d(b){b.px=y.event.x;b.py=y.event.y;a.resume()}var a={},c=y.dispatch("start","tick","end"),e,f=[1,1],l,h,q=.9,p=pi,k=qi,n=-30,x=ri,u=.1,r=.64,A=[],C=[],I,v,W;a.tick=function(){if(.005>(h*=.99))return e=
null,c.end({type:"end",alpha:h=0}),!0;var d=A.length,a=C.length,g,l;for(g=0;g<a;++g){var m=C[g];var p=m.source;var t=m.target;var k=t.x-p.x;var x=t.y-p.y;if(l=k*k+x*x)l=h*v[g]*((l=Math.sqrt(l))-I[g])/l,k*=l,x*=l,t.x-=k*(l=p.weight+t.weight?p.weight/(p.weight+t.weight):.5),t.y-=x*l,p.x+=k*(l=1-l),p.y+=x*l}if(l=h*u)if(k=f[0]/2,x=f[1]/2,g=-1,l)for(;++g<d;)m=A[g],m.x+=(k-m.x)*l,m.y+=(x-m.y)*l;if(n)for(nf(a=y.geom.quadtree(A),h,W),g=-1;++g<d;)(m=A[g]).fixed||a.visit(b(m));for(g=-1;++g<d;)m=A[g],m.fixed?
(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*q,m.y-=(m.py-(m.py=m.y))*q);c.tick({type:"tick",alpha:h})};a.nodes=function(b){if(!arguments.length)return A;A=b;return a};a.links=function(b){if(!arguments.length)return C;C=b;return a};a.size=function(b){if(!arguments.length)return f;f=b;return a};a.linkDistance=function(b){if(!arguments.length)return p;p="function"===typeof b?b:+b;return a};a.distance=a.linkDistance;a.linkStrength=function(b){if(!arguments.length)return k;k="function"===typeof b?b:+b;
return a};a.friction=function(b){if(!arguments.length)return q;q=+b;return a};a.charge=function(b){if(!arguments.length)return n;n="function"===typeof b?b:+b;return a};a.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(x);x=b*b;return a};a.gravity=function(b){if(!arguments.length)return u;u=+b;return a};a.theta=function(b){if(!arguments.length)return Math.sqrt(r);r=b*b;return a};a.alpha=function(b){if(!arguments.length)return h;b=+b;h?0<b?h=b:(e.c=null,e.t=NaN,e=null,c.end({type:"end",
alpha:h=0})):0<b&&(c.start({type:"start",alpha:h=b}),e=fc(a.tick));return a};a.start=function(){function b(b,a){if(!h){h=Array(c);for(f=0;f<c;++f)h[f]=[];for(f=0;f<e;++f){var g=C[f];h[g.source.index].push(g.target);h[g.target.index].push(g.source)}}for(var g=h[d],f=-1,l=g.length,m;++f<l;)if(!isNaN(m=g[f][b]))return m;return Math.random()*a}var d,c=A.length,e=C.length,g=f[0],l=f[1],h,m;for(d=0;d<c;++d)(m=A[d]).index=d,m.weight=0;for(d=0;d<e;++d)m=C[d],"number"==typeof m.source&&(m.source=A[m.source]),
"number"==typeof m.target&&(m.target=A[m.target]),++m.source.weight,++m.target.weight;for(d=0;d<c;++d)m=A[d],isNaN(m.x)&&(m.x=b("x",g)),isNaN(m.y)&&(m.y=b("y",l)),isNaN(m.px)&&(m.px=m.x),isNaN(m.py)&&(m.py=m.y);I=[];if("function"===typeof p)for(d=0;d<e;++d)I[d]=+p.call(this,C[d],d);else for(d=0;d<e;++d)I[d]=p;v=[];if("function"===typeof k)for(d=0;d<e;++d)v[d]=+k.call(this,C[d],d);else for(d=0;d<e;++d)v[d]=k;W=[];if("function"===typeof n)for(d=0;d<c;++d)W[d]=+n.call(this,A[d],d);else for(d=0;d<c;++d)W[d]=
n;return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){l||(l=y.behavior.drag().origin(B).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return l;this.on("mouseover.force",th).on("mouseout.force",uh).call(l)};return y.rebind(a,c,"on")};var pi=20,qi=1,ri=Infinity;y.layout.hierarchy=function(){function b(e){var g,f,l=[e],m=[],h;for(e.depth=0;null!=(h=l.pop());)if(m.push(h),(g=a.call(b,h,h.depth))&&
(f=g.length)){for(var q;0<=--f;)l.push(q=g[f]),q.parent=h,q.depth=h.depth+1;c&&(h.value=0);h.children=g}else c&&(h.value=+c.call(b,h,h.depth)||0),delete h.children;Wa(e,function(b){var a,e;d&&(a=b.children)&&a.sort(d);c&&(e=b.parent)&&(e.value+=b.value)});return m}var d=yh,a=wh,c=xh;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(d){if(!arguments.length)return a;a=d;return b};b.value=function(d){if(!arguments.length)return c;c=d;return b};b.revalue=function(d){c&&
(Wb(d,function(b){b.children&&(b.value=0)}),Wa(d,function(d){var a;d.children||(d.value=+c.call(b,d,d.depth)||0);if(a=d.parent)a.value+=d.value}));return d};return b};y.layout.partition=function(){function b(d,a,c,e){var g,f=d.children;d.x=a;d.y=d.depth*e;d.dx=c;d.dy=e;if(f&&(g=f.length)){var l=-1,h;for(c=d.value?c/d.value:0;++l<g;)b(h=f[l],a,d=h.value*c,e),a+=d}}function d(b){var a;b=b.children;var c=0;if(b&&(a=b.length))for(var e=-1;++e<a;)c=Math.max(c,d(b[e]));return 1+c}function a(a,g){var f=
c.call(this,a,g);b(f[0],0,e[0],e[1]/d(f[0]));return f}var c=y.layout.hierarchy(),e=[1,1];a.size=function(b){if(!arguments.length)return e;e=b;return a};return Vb(a,c)};y.layout.pie=function(){function b(g){var l=g.length,h=g.map(function(a,c){return+d.call(b,a,c)}),m=+("function"===typeof c?c.apply(this,arguments):c),q=("function"===typeof e?e.apply(this,arguments):e)-m,p=Math.min(Math.abs(q)/l,+("function"===typeof f?f.apply(this,arguments):f)),k=p*(0>q?-1:1),t=y.sum(h),n=t?(q-l*k)/t:0,l=y.range(l),
x=[],u;null!=a&&l.sort(a===gg?function(b,d){return h[d]-h[b]}:function(b,d){return a(g[b],g[d])});l.forEach(function(b){x[b]={data:g[b],value:u=h[b],startAngle:m,endAngle:m+=u*n+k,padAngle:p}});return x}var d=Number,a=gg,c=0,e=Pa,f=0;b.value=function(a){if(!arguments.length)return d;d=a;return b};b.sort=function(d){if(!arguments.length)return a;a=d;return b};b.startAngle=function(d){if(!arguments.length)return c;c=d;return b};b.endAngle=function(d){if(!arguments.length)return e;e=d;return b};b.padAngle=
function(d){if(!arguments.length)return f;f=d;return b};return b};var gg={};y.layout.stack=function(){function b(g,h){if(!(t=g.length))return g;var m=g.map(function(a,c){return d.call(b,a,c)}),q=m.map(function(d){return d.map(function(d,a){return[f.call(b,d,a),l.call(b,d,a)]})}),p=a.call(b,q,h),m=y.permute(m,p),q=y.permute(q,p),p=c.call(b,q,h),k=m[0].length,t,n,x,u;for(x=0;x<k;++x)for(e.call(b,m[0][x],u=p[x],q[0][x][1]),n=1;n<t;++n)e.call(b,m[n][x],u+=q[n-1][x][1],q[n][x][1]);return g}var d=B,a=Bd,
c=Cd,e=Bh,f=zh,l=Ah;b.values=function(a){if(!arguments.length)return d;d=a;return b};b.order=function(d){if(!arguments.length)return a;a="function"===typeof d?d:si.get(d)||Bd;return b};b.offset=function(d){if(!arguments.length)return c;c="function"===typeof d?d:ti.get(d)||Cd;return b};b.x=function(d){if(!arguments.length)return f;f=d;return b};b.y=function(d){if(!arguments.length)return l;l=d;return b};b.out=function(d){if(!arguments.length)return e;e=d;return b};return b};var si=y.map({"inside-out":function(b){var d=
b.length,a=b.map(Ch),c=b.map(Dh),e=y.range(d).sort(function(b,d){return a[b]-a[d]}),f=0,l=0,h=[],q=[];for(b=0;b<d;++b){var p=e[b];f<l?(f+=c[p],h.push(p)):(l+=c[p],q.push(p))}return q.reverse().concat(h)},reverse:function(b){return y.range(b.length).reverse()},"default":Bd}),ti=y.map({silhouette:function(b){var d=b.length,a=b[0].length,c=[],e=0,f,l,h,q=[];for(l=0;l<a;++l){for(h=f=0;f<d;f++)h+=b[f][l][1];h>e&&(e=h);c.push(h)}for(l=0;l<a;++l)q[l]=(e-c[l])/2;return q},wiggle:function(b){var d=b.length,
a=b[0],c=a.length,e,f,l,h,q,p,k,n=[];n[0]=p=k=0;for(f=1;f<c;++f){for(l=e=0;e<d;++e)l+=b[e][f][1];var x=e=0;for(q=a[f][0]-a[f-1][0];e<d;++e){var u=0;for(h=(b[e][f][1]-b[e][f-1][1])/(2*q);u<e;++u)h+=(b[u][f][1]-b[u][f-1][1])/q;x+=h*b[e][f][1]}n[f]=p-=l?x/l*q:0;p<k&&(k=p)}for(f=0;f<c;++f)n[f]-=k;return n},expand:function(b){var d=b.length,a=b[0].length,c=1/d,e,f,l,h=[];for(f=0;f<a;++f){for(l=e=0;e<d;e++)l+=b[e][f][1];if(l)for(e=0;e<d;e++)b[e][f][1]/=l;else for(e=0;e<d;e++)b[e][f][1]=c}for(f=0;f<a;++f)h[f]=
0;return h},zero:Cd});y.layout.histogram=function(){function b(b,g){var f=[],l=b.map(a,this),h=c.call(this,l,g),m=e.call(this,h,l,g);g=-1;for(var q=l.length,p=m.length-1,k=d?1:1/q;++g<p;){var t=f[g]=[];t.dx=m[g+1]-(t.x=m[g]);t.y=0}if(0<p)for(g=-1;++g<q;)t=l[g],t>=h[0]&&t<=h[1]&&(t=f[y.bisect(m,t,1,p)-1],t.y+=k,t.push(b[g]));return f}var d=!0,a=Number,c=Gh,e=Fh;b.value=function(d){if(!arguments.length)return a;a=d;return b};b.range=function(d){if(!arguments.length)return c;c=ua(d);return b};b.bins=
function(d){if(!arguments.length)return e;e="number"===typeof d?function(b){return of(b,d)}:ua(d);return b};b.frequency=function(a){if(!arguments.length)return d;d=!!a;return b};return b};y.layout.pack=function(){function b(b,g){var f=d.call(this,b,g),l=f[0],h=c[0],m=c[1],q=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};l.x=l.y=0;Wa(l,function(b){b.r=+q(b.value)});Wa(l,rf);if(a){var p=a*(e?1:Math.max(2*l.r/h,2*l.r/m))/2;Wa(l,function(b){b.r+=p});Wa(l,rf);Wa(l,function(b){b.r-=p})}tf(l,
h/2,m/2,e?1:1/Math.max(2*l.r/h,2*l.r/m));return f}var d=y.layout.hierarchy().sort(Hh),a=0,c=[1,1],e;b.size=function(d){if(!arguments.length)return c;c=d;return b};b.radius=function(d){if(!arguments.length)return e;e=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return a;a=+d;return b};return Vb(b,d)};y.layout.tree=function(){function b(b,g){var m=f.call(this,b,g),p=m[0],k=d(p);Wa(k,a);k.parent.m=-k.z;Wb(k,c);if(q)Wb(p,e);else{var t=p,n=p,x=p;Wb(p,function(b){b.x<
t.x&&(t=b);b.x>n.x&&(n=b);b.depth>x.depth&&(x=b)});var u=l(t,n)/2-t.x,r=h[0]/(n.x+l(n,t)/2+u),A=h[1]/(x.depth||1);Wb(p,function(b){b.x=(b.x+u)*r;b.y=b.depth*A})}return m}function d(b){b={A:null,children:[b]};for(var d=[b],a;null!=(a=d.pop());)for(var c=a.children,e,g=0,f=c.length;g<f;++g)d.push((c[g]=e={_:c[g],parent:a,children:(e=c[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return b.children[0]}function a(b){var d=b.children,a=b.parent.children,c=b.i?a[b.i-1]:null;
if(d.length){for(var e=0,g=0,f=b.children,h=f.length,m;0<=--h;)m=f[h],m.z+=e,m.m+=e,e+=m.s+(g+=m.c);d=(d[0].z+d[d.length-1].z)/2;c?(b.z=c.z+l(b._,c._),b.m=b.z-d):b.z=d}else c&&(b.z=c.z+l(b._,c._));d=b.parent;a=b.parent.A||a[0];if(c){g=e=b;f=e.parent.children[0];h=e.m;m=g.m;for(var q=c.m,p=f.m,k;c=Fd(c),e=Ed(e),c&&e;){f=Ed(f);g=Fd(g);g.a=b;k=c.z+q-e.z-h+l(c._,e._);if(0<k){var t=c.a.parent===b.parent?c.a:a,n=b,x=k,u=x/(n.i-t.i);n.c-=u;n.s+=x;t.c+=u;n.z+=x;n.m+=x;h+=k;m+=k}q+=c.m;h+=e.m;p+=f.m;m+=g.m}c&&
!Fd(g)&&(g.t=c,g.m+=q-m);e&&!Ed(f)&&(f.t=e,f.m+=h-p,a=b)}d.A=a}function c(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=h[0];b.y=b.depth*h[1]}var f=y.layout.hierarchy().sort(null).value(null),l=uf,h=[1,1],q=null;b.separation=function(d){if(!arguments.length)return l;l=d;return b};b.size=function(d){if(!arguments.length)return q?null:h;q=null==(h=d)?e:null;return b};b.nodeSize=function(d){if(!arguments.length)return q?h:null;q=null==(h=d)?null:e;return b};return Vb(b,f)};y.layout.cluster=
function(){function b(b,g){var f=d.call(this,b,g),l=f[0],h,m=0;Wa(l,function(b){var d=b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=h?m+=a(b,h):0,b.y=0,h=b)});var q=vf(l),p=wf(l),k=q.x-a(q,p)/2,n=p.x+a(p,q)/2;Wa(l,e?function(b){b.x=(b.x-l.x)*c[0];b.y=(l.y-b.y)*c[1]}:function(b){b.x=(b.x-k)/(n-k)*c[0];b.y=(1-(l.y?b.y/l.y:1))*c[1]});return f}var d=y.layout.hierarchy().sort(null).value(null),a=uf,c=[1,1],e=!1;b.separation=function(d){if(!arguments.length)return a;a=d;return b};b.size=function(d){if(!arguments.length)return e?
null:c;e=null==(c=d);return b};b.nodeSize=function(d){if(!arguments.length)return e?c:null;e=null!=(c=d);return b};return Vb(b,d)};y.layout.treemap=function(){function b(b,d){for(var a=-1,c=b.length,e,g;++a<c;)g=(e=b[a]).value*(0>d?0:d),e.area=isNaN(g)||0>=g?0:g}function d(a){var e=a.children;if(e&&e.length){var g=p(a),f=[],l=e.slice(),h=Infinity,m,q="slice"===x?g.dx:"dice"===x?g.dy:"slice-dice"===x?a.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);b(l,g.dx*g.dy/a.value);for(f.area=0;0<(a=l.length);){f.push(a=
l[a-1]);f.area+=a.area;if(!(a="squarify"!==x)){a=q;for(var k=f.area,n=0,t=Infinity,r=-1,A=f.length;++r<A;)if(m=f[r].area)m<t&&(t=m),m>n&&(n=m);k*=k;a*=a;a=(m=k?Math.max(a*n*u/k,k/(a*t*u)):Infinity)<=h}a?(l.pop(),h=m):(f.area-=f.pop().area,c(f,q,g,!1),q=Math.min(g.dx,g.dy),f.length=f.area=0,h=Infinity)}f.length&&(c(f,q,g,!0),f.length=f.area=0);e.forEach(d)}}function a(d){var e=d.children;if(e&&e.length){var g=p(d),f=e.slice(),l=[];b(f,g.dx*g.dy/d.value);for(l.area=0;d=f.pop();)l.push(d),l.area+=d.area,
null!=d.z&&(c(l,d.z?g.dx:g.dy,g,!f.length),l.length=l.area=0);e.forEach(a)}}function c(b,d,a,c){var e=-1,g=b.length,f=a.x,h=a.y,m=d?l(b.area/d):0;if(d==a.dx){if(c||m>a.dy)m=a.dy;for(;++e<g;){var q=b[e];q.x=f;q.y=h;q.dy=m;f+=q.dx=Math.min(a.x+a.dx-f,m?l(q.area/m):0)}q.z=!0;q.dx+=a.x+a.dx-f;a.y+=m;a.dy-=m}else{if(c||m>a.dx)m=a.dx;for(;++e<g;)q=b[e],q.x=f,q.y=h,q.dx=m,h+=q.dy=Math.min(a.y+a.dy-h,m?l(q.area/m):0);q.z=!1;q.dy+=a.y+a.dy-h;a.x+=m;a.dx-=m}}function e(c){c=n||f(c);var e=c[0];e.x=e.y=0;e.value?
(e.dx=h[0],e.dy=h[1]):e.dx=e.dy=0;n&&f.revalue(e);b([e],e.dx*e.dy/e.value);(n?a:d)(e);k&&(n=c);return c}var f=y.layout.hierarchy(),l=Math.round,h=[1,1],q=null,p=Gd,k=!1,n,x="squarify",u=.5*(1+Math.sqrt(5));e.size=function(b){if(!arguments.length)return h;h=b;return e};e.padding=function(b){function d(d){var a=b.call(e,d,d.depth);return null==a?Gd(d):xf(d,"number"===typeof a?[a,a,a,a]:a)}function a(d){return xf(d,b)}if(!arguments.length)return q;var c;p=null==(q=b)?Gd:"function"===(c=typeof b)?d:"number"===
c?(b=[b,b,b,b],a):a;return e};e.round=function(b){if(!arguments.length)return l!=Number;l=b?Math.round:Number;return e};e.sticky=function(b){if(!arguments.length)return k;k=b;n=null;return e};e.ratio=function(b){if(!arguments.length)return u;u=b;return e};e.mode=function(b){if(!arguments.length)return x;x=b+"";return e};return Vb(e,f)};y.random={normal:function(b,d){var a=arguments.length;2>a&&(d=1);1>a&&(b=0);return function(){do{var a=2*Math.random()-1;var c=2*Math.random()-1;c=a*a+c*c}while(!c||
1<c);return b+d*a*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var b=y.random.normal.apply(y,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=y.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,a=0;a<b;a++)d+=Math.random();return d}}};y.scale={};var Nh={floor:B,ceil:B};y.scale.linear=function(){return zf([0,1],[0,1],sb,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};y.scale.log=function(){return Bf(y.scale.linear().domain([0,
1]),10,!0,[1,10])};var Cf=y.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};y.scale.pow=function(){return Df(y.scale.linear(),1,[0,1])};y.scale.sqrt=function(){return y.scale.pow().exponent(.5)};y.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};y.scale.category10=function(){return y.scale.ordinal().range(ui)};y.scale.category20=function(){return y.scale.ordinal().range(vi)};y.scale.category20b=function(){return y.scale.ordinal().range(wi)};
y.scale.category20c=function(){return y.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(vb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vb);y.scale.quantile=function(){return Ff([],[])};y.scale.quantize=function(){return Gf(0,1,[0,1])};y.scale.threshold=function(){return Hf([.5],[0,1])};y.scale.identity=function(){return If([0,1])};y.svg={};y.svg.arc=function(){function b(){var b=Math.max(0,+a.apply(this,arguments)),
g=Math.max(0,+c.apply(this,arguments)),m=l.apply(this,arguments)-Ca,p=h.apply(this,arguments)-Ca,k=Math.abs(p-m),n=m>p?0:1;if(g<b){var x=g;g=b;b=x}if(k>=ji)return d(g,n)+(b?d(b,1-n):"")+"Z";var t,u=0,r=0,A=[];if(t=(+q.apply(this,arguments)||0)/2){var C=f===Xc?Math.sqrt(b*b+g*g):+f.apply(this,arguments);n||(r*=-1);g&&(r=ya(C/g*Math.sin(t)));b&&(u=ya(C/b*Math.sin(t)))}if(g){C=g*Math.cos(m+r);t=g*Math.sin(m+r);var I=g*Math.cos(p-r);var v=g*Math.sin(p-r);var W=Math.abs(p-m-2*r)<=ha?0:1;r&&Fc(C,t,I,v)===
n^W&&(I=(m+p)/2,C=g*Math.cos(I),t=g*Math.sin(I),I=v=null)}else C=t=0;if(b){r=b*Math.cos(p-u);var E=b*Math.sin(p-u);var K=b*Math.cos(m+u);var N=b*Math.sin(m+u);var U=Math.abs(m-p+2*u)<=ha?0:1;u&&Fc(r,E,K,N)===1-n^U&&(K=(m+p)/2,r=b*Math.cos(K),E=b*Math.sin(K),K=N=null)}else r=E=0;1E-6<k&&.001<(x=Math.min(Math.abs(g-b)/2,+e.apply(this,arguments)))?(U=b<g^n?0:1,W=m=x,k<ha&&(k=null==K?[r,E]:null==I?[C,t]:td([C,t],[K,N],[I,v],[r,E]),W=C-k[0],m=t-k[1],p=I-k[0],u=v-k[1],m=1/Math.sin(Math.acos((W*p+m*u)/(Math.sqrt(W*
W+m*m)*Math.sqrt(p*p+u*u)))/2),k=Math.sqrt(k[0]*k[0]+k[1]*k[1]),W=Math.min(x,(b-k)/(m-1)),m=Math.min(x,(g-k)/(m+1))),null!=I?(k=Gc(null==K?[r,E]:[K,N],[C,t],g,m,n),p=Gc([I,v],[r,E],g,m,n),x===m?A.push("M",k[0],"A",m,",",m," 0 0,",U," ",k[1],"A",g,",",g," 0 ",1-n^Fc(k[1][0],k[1][1],p[1][0],p[1][1]),",",n," ",p[1],"A",m,",",m," 0 0,",U," ",p[0]):A.push("M",k[0],"A",m,",",m," 0 1,",U," ",p[0])):A.push("M",C,",",t),null!=K?(g=Gc([C,t],[K,N],b,-W,n),I=Gc([r,E],null==I?[C,t]:[I,v],b,-W,n),x===W?A.push("L",
I[0],"A",W,",",W," 0 0,",U," ",I[1],"A",b,",",b," 0 ",n^Fc(I[1][0],I[1][1],g[1][0],g[1][1]),",",1-n," ",g[1],"A",W,",",W," 0 0,",U," ",g[0]):A.push("L",I[0],"A",W,",",W," 0 0,",U," ",g[0])):A.push("L",r,",",E)):(A.push("M",C,",",t),null!=I&&A.push("A",g,",",g," 0 ",W,",",n," ",I,",",v),A.push("L",r,",",E),null!=K&&A.push("A",b,",",b," 0 ",U,",",1-n," ",K,",",N));A.push("Z");return A.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var a=Th,c=Uh,e=
Sh,f=Xc,l=Jf,h=Kf,q=Vh;b.innerRadius=function(d){if(!arguments.length)return a;a=ua(d);return b};b.outerRadius=function(d){if(!arguments.length)return c;c=ua(d);return b};b.cornerRadius=function(d){if(!arguments.length)return e;e=ua(d);return b};b.padRadius=function(d){if(!arguments.length)return f;f=d==Xc?Xc:ua(d);return b};b.startAngle=function(d){if(!arguments.length)return l;l=ua(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=ua(d);return b};b.padAngle=function(d){if(!arguments.length)return q;
q=ua(d);return b};b.centroid=function(){var b=(+a.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+l.apply(this,arguments)+ +h.apply(this,arguments))/2-Ca;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Xc="auto";y.svg.line=function(){return Lf(B)};var Jd=y.map({linear:Ta,"linear-closed":Mf,step:function(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c[0]+(c=b[d])[0])/2,"V",c[1]);1<a&&e.push("H",c[0]);return e.join("")},"step-before":Kd,"step-after":Ld,basis:Nf,"basis-open":function(b){if(4>
b.length)return Ta(b);for(var d=[],a=-1,c=b.length,e,f=[0],l=[0];3>++a;)e=b[a],f.push(e[0]),l.push(e[1]);d.push(Qa(ib,f)+","+Qa(ib,l));for(--a;++a<c;)e=b[a],f.shift(),f.push(e[0]),l.shift(),l.push(e[1]),Nd(d,f,l);return d.join("")},"basis-closed":function(b){for(var d,a=-1,c=b.length,e=c+4,f,l=[],h=[];4>++a;)f=b[a%c],l.push(f[0]),h.push(f[1]);d=[Qa(ib,l),",",Qa(ib,h)];for(--a;++a<e;)f=b[a%c],l.shift(),l.push(f[0]),h.shift(),h.push(f[1]),Nd(d,l,h);return d.join("")},bundle:function(b,d){var a=b.length-
1;if(a)for(var c=b[0][0],e=b[0][1],f=b[a][0]-c,l=b[a][1]-e,h=-1,q,p;++h<=a;)q=b[h],p=h/a,q[0]=d*q[0]+(1-d)*(c+p*f),q[1]=d*q[1]+(1-d)*(e+p*l);return Nf(b)},cardinal:function(b,d){return 3>b.length?Ta(b):b[0]+Hc(b,Md(b,d))},"cardinal-open":function(b,d){return 4>b.length?Ta(b):b[1]+Hc(b.slice(1,-1),Md(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+Hc((b.push(b[0]),b),Md([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Ta(b);else{var d=b[0],a=[],c;var e=
0;var f=b.length-1;var l=[];var h=b[1];for(c=l[0]=Od(b[0],h);++e<f;)l[e]=(c+(c=Od(h,h=b[e+1])))/2;l[e]=c;for(var q=-1,p=b.length-1;++q<p;)e=Od(b[q],b[q+1]),1E-6>ja(e)?l[q]=l[q+1]=0:(f=l[q]/e,h=l[q+1]/e,c=f*f+h*h,9<c&&(c=3*e/Math.sqrt(c),l[q]=c*f,l[q+1]=c*h));for(q=-1;++q<=p;)c=(b[Math.min(p,q+1)][0]-b[Math.max(0,q-1)][0])/(6*(1+l[q]*l[q])),a.push([c||0,l[q]*c||0]);b=d+Hc(b,a)}return b}});Jd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],ib=[0,1/6,
2/3,1/6];y.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Kd.reverse=Ld;Ld.reverse=Kd;y.svg.area=function(){return Rf(B)};y.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};y.svg.chord=function(){function b(b,g){var f=d(this,c,b,g),l=d(this,e,b,g);return"M"+f.p0+a(f.r,f.p1,f.a1-f.a0)+
(f.a0==l.a0&&f.a1==l.a1?"Q 0,0 "+f.p0:"Q 0,0 "+l.p0+a(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+f.p0))+"Z"}function d(b,d,a,c){var e=d.call(b,a,c);d=f.call(b,e,c);a=l.call(b,e,c)-Ca;b=h.call(b,e,c)-Ca;return{r:d,a0:a,a1:b,p0:[d*Math.cos(a),d*Math.sin(a)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function a(b,d,a){return"A"+b+","+b+" 0 "+ +(a>ha)+",1 "+d}var c=pd,e=qd,f=Wh,l=Jf,h=Kf;b.radius=function(d){if(!arguments.length)return f;f=ua(d);return b};b.source=function(d){if(!arguments.length)return c;c=ua(d);return b};
b.target=function(d){if(!arguments.length)return e;e=ua(d);return b};b.startAngle=function(d){if(!arguments.length)return l;l=ua(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=ua(d);return b};return b};y.svg.diagonal=function(){function b(b,e){var g=d.call(this,b,e),f=a.call(this,b,e),l=(g.y+f.y)/2,g=[g,{x:g.x,y:l},{x:f.x,y:l},f],g=g.map(c);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var d=pd,a=qd,c=Sf;b.source=function(a){if(!arguments.length)return d;d=ua(a);return b};b.target=
function(d){if(!arguments.length)return a;a=ua(d);return b};b.projection=function(d){if(!arguments.length)return c;c=d;return b};return b};y.svg.diagonal.radial=function(){var b=y.svg.diagonal(),d=Sf,a=b.projection;b.projection=function(b){return arguments.length?a(Xh(d=b)):d};return b};y.svg.symbol=function(){function b(b,c){return(hg.get(d.call(this,b,c))||Tf)(a.call(this,b,c))}var d=Zh,a=Yh;b.type=function(a){if(!arguments.length)return d;d=ua(a);return b};b.size=function(d){if(!arguments.length)return a;
a=ua(d);return b};return b};var hg=y.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Yc);var d=b*Yc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=
Math.sqrt(b/Yc);var d=b*Yc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});y.svg.symbolTypes=hg.keys();var Yc=Math.sqrt(3),ig=Math.tan(30*ia);qa.transition=function(b){var d=ub||++jg;b=Qd(b);for(var a=[],c,e,f=Zc||{time:Date.now(),ease:fh,delay:0,duration:250},l=-1,h=this.length;++l<h;){a.push(c=[]);for(var q=this[l],p=-1,k=q.length;++p<k;)(e=q[p])&&Ic(e,p,b,d,f),c.push(e)}return Xb(a,b,d)};qa.interrupt=function(b){return this.each(null==b?Lc:Uf(Qd(b)))};var Lc=Uf(Qd()),Ia=[],jg=0,ub,Zc;Ia.call=
qa.call;Ia.empty=qa.empty;Ia.node=qa.node;Ia.size=qa.size;y.transition=function(b,d){return b&&b.transition?ub?b.transition(d):b:y.selection().transition(b)};y.transition.prototype=Ia;Ia.select=function(b){var d=this.id,a=this.namespace,c=[],e,f,l;b=u(b);for(var h=-1,q=this.length;++h<q;){c.push(e=[]);for(var p=this[h],k=-1,n=p.length;++k<n;)(l=p[k])&&(f=b.call(l,l.__data__,k,h))?("__data__"in l&&(f.__data__=l.__data__),Ic(f,k,a,d,l[a][d]),e.push(f)):e.push(null)}return Xb(c,a,d)};Ia.selectAll=function(b){var d=
this.id,a=this.namespace,c=[],e,f;b=N(b);for(var l=-1,h=this.length;++l<h;)for(var q=this[l],p=-1,k=q.length;++p<k;)if(e=q[p]){var n=e[a][d];var x=b.call(e,e.__data__,p,l);c.push(e=[]);for(var u=-1,r=x.length;++u<r;)(f=x[u])&&Ic(f,u,a,d,n),e.push(f)}return Xb(c,a,d)};Ia.filter=function(b){var d=[],a,c;"function"!==typeof b&&(b=x(b));for(var e=0,f=this.length;e<f;e++){d.push(a=[]);var l=this[e];for(var h=0,q=l.length;h<q;h++)(c=l[h])&&b.call(c,c.__data__,h,e)&&a.push(c)}return Xb(d,this.namespace,
this.id)};Ia.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):X(this,null==d?function(d){d[c][a].tween.remove(b)}:function(e){e[c][a].tween.set(b,d)})};Ia.attr=function(b,d){function a(){this.removeAttribute(h)}function c(){this.removeAttributeNS(h.space,h.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(h),a;return d!==b&&(a=l(d,b),function(b){this.setAttribute(h,a(b))})})}function f(b){return null==b?c:(b+=
"",function(){var d=this.getAttributeNS(h.space,h.local),a;return d!==b&&(a=l(d,b),function(b){this.setAttributeNS(h.space,h.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var l="transform"==b?lf:sb,h=y.ns.qualify(b);return Pd(this,"attr."+b,d,h.local?f:e)};Ia.attrTween=function(b,d){function a(b,a){var c=d.call(this,b,a,this.getAttribute(e));return c&&function(b){this.setAttribute(e,c(b))}}function c(b,a){var c=d.call(this,b,a,this.getAttributeNS(e.space,e.local));
return c&&function(b){this.setAttributeNS(e.space,e.local,c(b))}}var e=y.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};Ia.style=function(b,d,a){function c(){this.style.removeProperty(b)}var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Pd(this,"style."+b,d,function(d){return null==d?c:(d+="",function(){var c=e(this).getComputedStyle(this,null).getPropertyValue(b),g;return c!==d&&(g=sb(c,d),function(d){this.style.setProperty(b,
g(d),a)})})})};Ia.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(c,g){var f=d.call(this,c,g,e(this).getComputedStyle(this,null).getPropertyValue(b));return f&&function(d){this.style.setProperty(b,f(d),a)}})};Ia.text=function(b){return Pd(this,"text",b,$h)};Ia.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Ia.ease=function(b){var d=this.id,a=this.namespace;
if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=y.ease.apply(y,arguments));return X(this,function(c){c[a][d].ease=b})};Ia.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:X(this,"function"===typeof b?function(c,e,g){c[a][d].delay=+b.call(c,c.__data__,e,g)}:(b=+b,function(c){c[a][d].delay=b}))};Ia.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:X(this,"function"===
typeof b?function(c,e,g){c[a][d].duration=Math.max(1,b.call(c,c.__data__,e,g))}:(b=Math.max(1,b),function(c){c[a][d].duration=b}))};Ia.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Zc,f=ub;try{ub=a,X(this,function(d,e,g){Zc=d[c][a];b.call(d,d.__data__,e,g)})}finally{Zc=e,ub=f}}else X(this,function(e){e=e[c][a];(e.event||(e.event=y.dispatch("start","end","interrupt"))).on(b,d)});return this};Ia.transition=function(){for(var b=this.id,d=++jg,a=this.namespace,c=[],e,
f,l,h,q=0,p=this.length;q<p;q++){c.push(e=[]);f=this[q];for(var k=0,n=f.length;k<n;k++){if(l=f[k])h=l[a][b],Ic(l,k,a,d,{time:h.time,ease:h.ease,delay:h.delay+h.duration,duration:h.duration});e.push(l)}}return Xb(c,a,d)};y.svg.axis=function(){function b(b){b.each(function(){var b=y.select(this),g=this.__chart__||d,m=this.__chart__=d.copy(),p=null==h?m.ticks?m.ticks.apply(m,l):m.domain():h,k=null==q?m.tickFormat?m.tickFormat.apply(m,l):B:q,n=b.selectAll(".tick").data(p,m),p=n.enter().insert("g",".domain").attr("class",
"tick").style("opacity",1E-6),x=y.transition(n.exit()).style("opacity",1E-6).remove(),u=y.transition(n.order()).style("opacity",1),r=Math.max(c,0)+f,A=Bc(m),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),y.transition(b));p.append("line");p.append("text");var C=p.select("line"),t=u.select("line"),n=n.select("text").text(k),I=p.select("text"),v=u.select("text"),W="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){k=ai;var K="x";var E="y";var U="x2";var N="y2";
n.attr("dy",0>W?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+A[0]+","+W*e+"V0H"+A[1]+"V"+W*e)}else k=bi,K="y",E="x",U="y2",N="x2",n.attr("dy",".32em").style("text-anchor",0>W?"end":"start"),b.attr("d","M"+W*e+","+A[0]+"H0V"+A[1]+"H"+W*e);C.attr(N,W*c);I.attr(E,W*r);t.attr(U,0).attr(N,W*c);v.attr(K,0).attr(E,W*r);if(m.rangeBand)var X=m,w=X.rangeBand()/2,g=m=function(b){return X(b)+w};else g.rangeBand?g=m:x.call(k,m,g);p.call(k,g,m);u.call(k,m,m)})}var d=y.scale.linear(),a=kg,c=6,e=6,
f=3,l=[10],h=null,q;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;a=d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return l;l=Ua(arguments);return b};b.tickValues=function(d){if(!arguments.length)return h;h=d;return b};b.tickFormat=function(d){if(!arguments.length)return q;q=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;
c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return f;f=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};y.svg.brush=function(){function b(e){e.each(function(){var e=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=e.selectAll(".background").data([0]);
g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=e.selectAll(".resize").data(A,B);l.exit().remove();l.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");l.style("display",b.empty()?"none":null);e=y.transition(e);g=y.transition(g);h&&(l=Bc(h),g.attr("x",l[0]).attr("width",l[1]-l[0]),a(e));q&&(l=Bc(q),g.attr("y",l[0]).attr("height",l[1]-l[0]),c(e));d(e)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+p[+/e$/.test(b)]+","+k[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",p[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function c(b){b.select(".extent").attr("y",
k[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function f(){function g(){var b=y.mouse(A),e=!1;Q&&(b[0]+=Q[0],b[1]+=Q[1]);E||(y.event.altKey?(N||(N=[(p[0]+p[1])/2,(k[0]+k[1])/2]),X[0]=p[+(b[0]<N[0])],X[1]=k[+(b[1]<N[1])]):N=null);W&&f(b,h,0)&&(a(I),e=!0);K&&f(b,q,1)&&(c(I),e=!0);e&&(d(I),t({type:"brush",mode:E?"move":"resize"}))}function f(b,d,a){var c=Bc(d);d=c[0];var e=c[1],c=X[a],g=a?k:p,f=g[1]-g[0];E&&(d-=c,e-=f+c);b=(a?r:u)?Math.max(d,Math.min(e,b[a])):b[a];E?d=(b+=c)+
f:(N&&(c=Math.max(d,Math.min(e,2*N[a]-b))),c<b?(d=b,b=c):d=c);if(g[0]!=b||g[1]!=d)return a?x=null:n=null,g[0]=b,g[1]=d,!0}function m(){g();I.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);y.select("body").style("cursor",null);w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);U();t({type:"brushend"})}var A=this,C=y.select(y.event.target),t=l.of(A,arguments),
I=y.select(A),v=C.datum(),W=!/^(n|s)$/.test(v)&&h,K=!/^(e|w)$/.test(v)&&q,E=C.classed("extent"),U=wa(A),N,X=y.mouse(A),w=y.select(e(A)).on("keydown.brush",function(){32==y.event.keyCode&&(E||(N=null,X[0]-=p[1],X[1]-=k[1],E=2),V())}).on("keyup.brush",function(){32==y.event.keyCode&&2==E&&(X[0]+=p[1],X[1]+=k[1],E=0,V())});if(y.event.changedTouches)w.on("touchmove.brush",g).on("touchend.brush",m);else w.on("mousemove.brush",g).on("mouseup.brush",m);I.interrupt().selectAll("*").interrupt();if(E)X[0]=
p[0]-X[0],X[1]=k[0]-X[1];else if(v){var aa=+/w$/.test(v),v=+/^n/.test(v);var Q=[p[1-aa]-X[0],k[1-v]-X[1]];X[0]=p[aa];X[1]=k[v]}else y.event.altKey&&(N=X.slice());I.style("pointer-events","none").selectAll(".resize").style("display",null);y.select("body").style("cursor",C.style("cursor"));t({type:"brushstart"});g()}var l=I(b,"brushstart","brush","brushend"),h=null,q=null,p=[0,0],k=[0,0],n,x,u=!0,r=!0,A=$d[0];b.event=function(b){b.each(function(){var b=l.of(this,arguments),d={x:p,y:k,i:n,j:x},a=this.__chart__||
d;this.__chart__=d;ub?y.select(this).transition().each("start.brush",function(){n=a.i;x=a.j;p=a.x;k=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=Ac(p,d.x),c=Ac(k,d.y);n=x=null;return function(e){p=d.x=a(e);k=d.y=c(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){n=d.i;x=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return h;h=d;A=
$d[!h<<1|!q];return b};b.y=function(d){if(!arguments.length)return q;q=d;A=$d[!h<<1|!q];return b};b.clamp=function(d){if(!arguments.length)return h&&q?[u,r]:h?u:q?r:null;h&&q?(u=!!d[0],r=!!d[1]):h?u=!!d:q&&(r=!!d);return b};b.extent=function(d){if(!arguments.length){if(h)if(n){var a=n[0];var c=n[1]}else if(a=p[0],c=p[1],h.invert&&(a=h.invert(a),c=h.invert(c)),c<a){var e=a;a=c;c=e}if(q)if(x){var g=x[0];var f=x[1]}else g=k[0],f=k[1],q.invert&&(g=q.invert(g),f=q.invert(f)),f<g&&(e=g,g=f,f=e);return h&&
q?[[a,g],[c,f]]:h?[a,c]:q&&[g,f]}h&&(a=d[0],c=d[1],q&&(a=a[0],c=c[0]),n=[a,c],h.invert&&(a=h(a),c=h(c)),c<a&&(e=a,a=c,c=e),a!=p[0]||c!=p[1])&&(p=[a,c]);q&&(g=d[0],f=d[1],h&&(g=g[1],f=f[1]),x=[g,f],q.invert&&(g=q(g),f=q(f)),f<g&&(e=g,g=f,f=e),g!=k[0]||f!=k[1])&&(k=[g,f]);return b};b.clear=function(){b.empty()||(p=[0,0],k=[0,0],n=x=null);return b};b.empty=function(){return!!h&&p[0]==p[1]||!!q&&k[0]==k[1]};return y.rebind(b,l,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",
ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$d=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],ae=ba.format=Zf.timeFormat,lg=ae.utc,mg=lg("%Y-%m-%dT%H:%M:%S.%LZ");ae.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rd:mg;Rd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Rd.toString=mg.toString;ba.second=lb(function(b){return new La(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});ba.seconds=
ba.second.range;ba.seconds.utc=ba.second.utc.range;ba.minute=lb(function(b){return new La(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});ba.minutes=ba.minute.range;ba.minutes.utc=ba.minute.utc.range;ba.hour=lb(function(b){var d=b.getTimezoneOffset()/60;return new La(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});ba.hours=ba.hour.range;ba.hours.utc=ba.hour.utc.range;
ba.month=lb(function(b){b=ba.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});ba.months=ba.month.range;ba.months.utc=ba.month.utc.range;var Jc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],be=[[ba.second,1],[ba.second,5],[ba.second,15],[ba.second,30],[ba.minute,1],[ba.minute,5],[ba.minute,15],[ba.minute,30],[ba.hour,1],[ba.hour,3],[ba.hour,6],[ba.hour,12],[ba.day,1],[ba.day,2],[ba.week,
1],[ba.month,1],[ba.month,3],[ba.year,1]],Ai=ae.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Mb]]),ci={range:function(b,d,a){return y.range(Math.ceil(b/a)*a,+d,a).map(tb)},floor:B,ceil:B};be.year=ba.year;ba.scale=
function(){return Sd(y.scale.linear(),be,Ai)};var ng=be.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Mb]]);ng.year=ba.year.utc;ba.scale.utc=function(){return Sd(y.scale.linear(),
ng,Bi)};y.text=ed(function(b){return b.responseText});y.json=function(b,d){return Jb(b,"application/json",di,d)};y.html=function(b,d){return Jb(b,"text/html",ei,d)};y.xml=ed(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=y,define(y)):"object"===typeof module&&module.exports?module.exports=y:this.d3=y}();
(function(){var e={dev:!1};e.tooltip=e.tooltip||{};e.utils=e.utils||{};e.models=e.models||{};e.charts={};e.logs={};e.dom={};"undefined"!==typeof module&&"undefined"!==typeof exports&&"undefined"==typeof d3&&(d3=require("d3"));e.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,
1),e=this,n=function(){},h=function(){return e.apply(this instanceof n&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};n.prototype=this.prototype;h.prototype=new n;return h});e.dev&&(e.dispatch.on("render_start",function(a){e.logs.startTime=+new Date}),e.dispatch.on("render_end",function(a){e.logs.endTime=+new Date;e.logs.totalTime=e.logs.endTime-e.logs.startTime;e.log("total",e.logs.totalTime)}));e.log=function(){e.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,
arguments):e.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};e.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};e.render=function(a){a=a||1;e.render.active=!0;e.dispatch.render_start();var c=function(){for(var f,n,h=0;h<a&&(n=e.render.queue[h]);h++)f=n.generate(),typeof n.callback==typeof Function&&
n.callback(f);e.render.queue.splice(0,h);e.render.queue.length?setTimeout(c):(e.dispatch.render_end(),e.render.active=!1)};setTimeout(c)};e.render.active=!1;e.render.queue=[];e.addGraph=function(a,c){typeof a===typeof Function&&(a={generate:a,callback:c});e.render.queue.push(a);e.render.active||e.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=e);"undefined"!==typeof window&&(window.nv=e);e.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):
a()};e.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()};e.interactiveGuideline=function(){function a(F){F.each(function(G){function H(){var e=d3.mouse(this),f=e[0],e=e[1],k=!0,p=!1;z&&(f=d3.event.offsetX,e=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(k=!1),d3.event.target.className.baseVal.match("nv-legend")&&(p=!0));k&&(f-=c.left,e-=c.top);if("mouseout"===d3.event.type||0>f||0>e||f>F||e>B||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||p)z&&
d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(w.nvPointerEventsClass))||(r.elementMouseout({mouseX:f,mouseY:e}),a.renderGuideLine(null),w.hidden(!0));else{w.hidden(!1);if("function"===typeof h.rangeBands)if(k=d3.bisect(h.range(),f)-1,h.range()[k]+h.rangeBand()>=f)k=h.domain()[d3.bisect(h.range(),f)-1];else{r.elementMouseout({mouseX:f,mouseY:e});a.renderGuideLine(null);w.hidden(!0);return}else k=
h.invert(f);r.elementMousemove({mouseX:f,mouseY:e,pointXValue:k});"dblclick"===d3.event.type&&r.elementDblclick({mouseX:f,mouseY:e,pointXValue:k});"click"===d3.event.type&&r.elementClick({mouseX:f,mouseY:e,pointXValue:k});"mousedown"===d3.event.type&&r.elementMouseDown({mouseX:f,mouseY:e,pointXValue:k});"mouseup"===d3.event.type&&r.elementMouseUp({mouseX:f,mouseY:e,pointXValue:k})}}var D=d3.select(this),F=f||960,B=n||400,O=D.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([G]);O.enter().append("g").attr("class",
" nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");k&&(k.on("touchmove",H).on("mousemove",H,!0).on("mouseout",H,!0).on("mousedown",H,!0).on("mouseup",H,!0).on("dblclick",H).on("click",H),a.guideLine=null,a.renderGuideLine=function(c){v&&(a.guideLine&&a.guideLine.attr("x1")===c||e.dom.write(function(){var a=O.select(".nv-interactiveGuideLine").selectAll("line").data(null!=c?[e.utils.NaNtoZero(c)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",
function(a){return a}).attr("x2",function(a){return a}).attr("y1",B).attr("y2",0);a.exit().remove()}))})})}var c={left:0,top:0},f=null,n=null,h=d3.scale.linear(),r=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),v=!0,k=null,w=e.models.tooltip(),z=window.ActiveXObject;w.duration(0).hideDelay(0).hidden(!1);a.dispatch=r;a.tooltip=w;a.margin=function(e){if(!arguments.length)return c;c.top="undefined"!=typeof e.top?e.top:c.top;c.left=
"undefined"!=typeof e.left?e.left:c.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.height=function(c){if(!arguments.length)return n;n=c;return a};a.xScale=function(c){if(!arguments.length)return h;h=c;return a};a.showGuideLine=function(c){if(!arguments.length)return v;v=c;return a};a.svgContainer=function(c){if(!arguments.length)return k;k=c;return a};return a};e.interactiveBisect=function(a,c,e){if(!(a instanceof Array))return null;var f="function"!==typeof e?function(a){return a.x}:
e;e=d3.bisector(function(a,c){return f(a)-c}).left;e=d3.max([0,e(a,c)-1]);var h=f(a[e]);"undefined"===typeof h&&(h=e);if(h===c)return e;var r=d3.min([e+1,a.length-1]);a=f(a[r]);"undefined"===typeof a&&(a=r);return Math.abs(a-c)>=Math.abs(h-c)?e:r};e.nearestValueIndex=function(a,c,e){var f=Infinity,h=null;a.forEach(function(a,n){var k=Math.abs(c-a);null!=a&&k<=f&&k<e&&(f=k,h=n)});return h};e.models.tooltip=function(){function a(){if(H&&p(f))return e.dom.write(function(){z&&z.node()||(z=d3.select(document.body).select("#"+
c).data([1]),z.enter().append("div").attr("class","nvtooltip "+(v?v:"xy-tooltip")).attr("id",c).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0).classed("nv-pointer-events-none",!0),z.exit().remove());var a=M(f);a&&(z.node().innerHTML=a);R()}),a}var c="nvtooltip-"+Math.floor(1E5*Math.random()),f=null,n="w",h=25,r=0,v=null,k=!0,w=200,z=null,F=null,G=null,H=!0,D=100,J=!0,B=function(a,c){return a},O=function(a){return a},
K=function(a,c){return a},M=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));J&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(O(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",
function(a){return a.color});e.append("td").classed("key",!0).classed("total",function(a){return!!a.total}).html(function(a,c){return K(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return B(a.value,c)});e.filter(function(a,c){return void 0!==a.percent}).append("td").classed("percent",!0).html(function(a,c){return"("+d3.format("%")(a.percent)+")"});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",
a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},C=function(){var a={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var c=document.body.getBoundingClientRect();a.left-=c.left;a.top-=c.top}return a},p=function(a){if(a&&a.series){if(e.utils.isArray(a.series))return!0;if(e.utils.isObject(a.series))return a.series=[a.series],!0}return!1},
V=function(a){var c=z.node().offsetHeight,e=z.node().offsetWidth,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,k;switch(n){case "e":var l=-e-h;var q=-(c/2);0>a.left+l&&(l=h);0>(k=a.top+q)&&(q-=k);(k=a.top+q+c)>p&&(q-=k-p);break;case "w":l=h;q=-(c/2);a.left+l+e>f&&(l=-e-h);0>(k=a.top+q)&&(q-=k);(k=a.top+q+c)>p&&(q-=k-p);break;case "n":l=-(e/2)-5;q=h;a.top+q+c>p&&(q=-c-h);0>(k=a.left+l)&&(l-=k);(k=a.left+l+e)>f&&(l-=k-f);break;case "s":l=-(e/2);q=-c-h;0>a.top+q&&(q=
h);0>(k=a.left+l)&&(l-=k);(k=a.left+l+e)>f&&(l-=k-f);break;case "center":l=-(e/2);q=-(c/2);break;default:q=l=0}return{left:l,top:q}},R=function(){e.dom.read(function(){var a=C(),c=V(a),e=a.left+c.left,a=a.top+c.top;if(k)z.interrupt().transition().delay(w).duration(0).style("opacity",0);else{var c="translate("+Math.round(e)+"px, "+Math.round(a)+"px)",f=d3.interpolateString("translate("+F+"px, "+G+"px)",c),h=.1>z.style("opacity");z.interrupt().transition().duration(h?0:D).styleTween("transform",function(a){return f},
"important").styleTween("-webkit-transform",function(a){return f}).style("-ms-transform",c).style("opacity",1)}F=e;G=a})};a.nvPointerEventsClass="nv-pointer-events-none";a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{duration:{get:function(){return D},set:function(a){D=a}},gravity:{get:function(){return n},set:function(a){n=a}},distance:{get:function(){return h},set:function(a){h=a}},snapDistance:{get:function(){return r},set:function(a){r=a}},classes:{get:function(){return v},
set:function(a){v=a}},enabled:{get:function(){return H},set:function(a){H=a}},hideDelay:{get:function(){return w},set:function(a){w=a}},contentGenerator:{get:function(){return M},set:function(a){M=a}},valueFormatter:{get:function(){return B},set:function(a){B=a}},headerFormatter:{get:function(){return O},set:function(a){O=a}},keyFormatter:{get:function(){return K},set:function(a){K=a}},headerEnabled:{get:function(){return J},set:function(a){J=a}},position:{get:function(){return C},set:function(a){C=
a}},chartContainer:{get:function(){return document.body},set:function(a){e.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(a){e.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(a){e.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return k},set:function(c){k!=c&&(k=!!c,a())}},data:{get:function(){return f},set:function(a){a.point&&(a.value=
a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color);f=a}},node:{get:function(){return z.node()},set:function(a){}},id:{get:function(){return c},set:function(a){}}});e.utils.initOptions(a);return a};e.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=
document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};e.utils.isArray=Array.isArray;e.utils.isObject=function(a){return null!==a&&"object"===typeof a};e.utils.isFunction=function(a){return"function"===typeof a};e.utils.isDate=function(a){return"[object Date]"===toString.call(a)};e.utils.isNumber=function(a){return!isNaN(a)&&"number"===typeof a};
e.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):e.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};e.utils.getColor=function(a){if(void 0===a)return e.utils.defaultColor();if(e.utils.isArray(a)){var c=d3.scale.ordinal().range(a);return function(a,e){return a.color||c(void 0===e?a:e)}}return a};e.utils.defaultColor=function(){return e.utils.getColor(d3.scale.category20().range())};
e.utils.customTheme=function(a,c,f){c=c||function(a){return a.key};f=f||d3.scale.category20().range();var n=f.length;return function(h,r){var v=c(h);if(e.utils.isFunction(a[v]))return a[v]();if(void 0!==a[v])return a[v];n||(n=f.length);--n;return f[n]}};e.utils.pjax=function(a,c){var f=function(f){d3.html(f,function(f){var h=d3.select(c).node();h.parentNode.replaceChild(d3.select(f).select(c).node(),h);e.utils.pjax(a,c)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,
this.href);f(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&f(d3.event.state)})};e.utils.calcApproxTextWidth=function(a){if(e.utils.isFunction(a.style)&&e.utils.isFunction(a.text)){var c=parseInt(a.style("font-size").replace("px",""),10);a=a.text().length;return e.utils.NaNtoZero(a*c*.5)}return 0};e.utils.NaNtoZero=function(a){return!e.utils.isNumber(a)||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=
[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};e.utils.renderWatch=function(a,c){if(!(this instanceof e.utils.renderWatch))return new e.utils.renderWatch(a,c);var f=void 0!==c?c:250,n=[],h=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=!0;h.renderEnd("model")})})(a);0>n.indexOf(a)&&n.push(a)});return this};this.reset=function(a){void 0!==a&&(f=a);n=[]};this.transition=
function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==f?f:250;a.__rendered=!1;0>n.indexOf(a)&&n.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var k=0;return a.transition().duration(e).each(function(){++k}).each("end",function(e,f){0===--k&&(a.__rendered=!0,h.renderEnd.apply(this,c))})};this.renderEnd=
function(){n.every(function(a){return a.__rendered})&&(n.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};e.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(c){for(var f in c){var n=e.utils.isArray(a[f]),h=e.utils.isObject(a[f]),r=e.utils.isObject(c[f]);h&&!n&&r?e.utils.deepExtend(a[f],c[f]):a[f]=c[f]}})};e.utils.state=function(){if(!(this instanceof e.utils.state))return new e.utils.state;var a={},c=function(){},f=function(){return{}},
n=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){c(a,!0)});this.getter=function(a){f=a;return this};this.setter=function(a,e){e||(e=function(){});c=function(c,f){a(c);f&&e()};return this};this.init=function(a){n=n||{};e.utils.deepExtend(n,a)};this.update=function(){n&&(c(n,!1),n=null);var e=f();if(JSON.stringify(e)===JSON.stringify(a))e=!1;else{for(var r in e)void 0===a[r]&&(a[r]={}),a[r]=e[r];e=!0}e&&this.dispatch.change(a)}};e.utils.optionsFunc=function(a){a&&
d3.map(a).forEach(function(a,f){if(e.utils.isFunction(this[a]))this[a](f)}.bind(this));return this};e.utils.calcTicksX=function(a,c){for(var f=1,n=0;n<c.length;n+=1)var h=c[n]&&c[n].values?c[n].values.length:0,f=h>f?h:f;e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.calcTicksY=function(a,c){for(var f=1,n=0;n<c.length;n+=1)for(var h=c[n]&&c[n].values?c[n].values:[],r,v=0;v<
h.length;v+=1)r=h[v]&&h[v].value?h[v].value:0,f=r>f?r:f;e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]||(a._options[c]=e);return a})};
e.utils.initOptions=function(a){a._overrides=a._overrides||{};var c=Object.getOwnPropertyNames(a._options||{}),f=Object.getOwnPropertyNames(a._calls||{}),c=c.concat(f),n;for(n in c)e.utils.initOption(a,c[n])};e.utils.inheritOptionsD3=function(a,c,e){a._d3options=e.concat(a._d3options||[]);e.unshift(c);e.unshift(a);d3.rebind.apply(this,e)};e.utils.arrayUnique=function(a){return a.sort().filter(function(c,e){return!e||c!=a[e-1]})};e.utils.symbolMap=d3.map();e.utils.symbol=function(){function a(a,h){var n=
c.call(this,a,h),v=f.call(this,a,h);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(v)():e.utils.symbolMap.get(n)(v)}var c,f=64;a.type=function(e){if(!arguments.length)return c;c=d3.functor(e);return a};a.size=function(c){if(!arguments.length)return f;f=d3.functor(c);return a};return a};e.utils.inheritOptions=function(a,c){var f=Object.getOwnPropertyNames(c._options||{}),n=Object.getOwnPropertyNames(c._calls||{}),h=c._inherited||[],r=c._d3options||[],v=f.concat(n).concat(h).concat(r);
v.unshift(c);v.unshift(a);d3.rebind.apply(this,v);a._inherited=e.utils.arrayUnique(f.concat(n).concat(h).concat(f).concat(a._inherited||[]));a._d3options=e.utils.arrayUnique(r.concat(a._d3options||[]))};e.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};e.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};e.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};e.utils.availableHeight=function(a,c,f){return Math.max(0,e.utils.sanitizeHeight(a,
c)-f.top-f.bottom)};e.utils.availableWidth=function(a,c,f){return Math.max(0,e.utils.sanitizeWidth(a,c)-f.left-f.right)};e.utils.noData=function(a,c){var f=a.options(),n=f.margin(),f=f.noData(),f=null==f?["No Data Available."]:[f],h=e.utils.availableHeight(null,c,n),r=e.utils.availableWidth(null,c,n),r=n.left+r/2,n=n.top+h/2;c.selectAll("g").remove();f=c.selectAll(".nv-noData").data(f);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");f.attr("x",
r).attr("y",n).text(function(a){return a})};e.utils.wrapTicks=function(a,c){a.each(function(){for(var a=d3.select(this),e=a.text().split(/\s+/).reverse(),h,r=[],v=0,k=a.attr("y"),w=parseFloat(a.attr("dy")),z=a.text(null).append("tspan").attr("x",0).attr("y",k).attr("dy",w+"em");h=e.pop();)r.push(h),z.text(r.join(" ")),z.node().getComputedTextLength()>c&&(r.pop(),z.text(r.join(" ")),r=[h],z=a.append("tspan").attr("x",0).attr("y",k).attr("dy",1.1*++v+w+"em").text(h))})};e.utils.arrayEquals=function(a,
c){if(a===c)return!0;if(!a||!c||a.length!=c.length)return!1;for(var f=0,n=a.length;f<n;f++)if(a[f]instanceof Array&&c[f]instanceof Array){if(!e.arrayEquals(a[f],c[f]))return!1}else if(a[f]!=c[f])return!1;return!0};e.models.axis=function(){function a(r){M.reset();r.each(function(a){var p=d3.select(this);e.utils.initSVG(p);a=p.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");p=a.select("g");null!==H?c.ticks(H):"top"!=c.orient()&&"bottom"!=
c.orient()||c.ticks(Math.abs(f.range()[1]-f.range()[0])/100);p.watchTransition(M,"axis").call(c);K=K||c.scale();var r=c.tickFormat();null==r&&(r=K.tickFormat());var C=p.selectAll("text.nv-axislabel").data([v||null]);C.exit().remove();void 0!==J&&p.selectAll("g").select("text").style("font-size",J);switch(c.orient()){case "top":C.enter().append("text").attr("class","nv-axislabel");var E=0;1===f.range().length?E=G?2*f.range()[0]+f.rangeBand():0:2===f.range().length?E=G?f.range()[0]+f.range()[1]+f.rangeBand():
f.range()[1]:2<f.range().length&&(E=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));C.attr("text-anchor","middle").attr("y",0).attr("x",E/2);if(k){var u=a.selectAll("g.nv-axisMaxMin").data(f.domain());u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");u.exit().remove();u.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-c.tickPadding()).attr("text-anchor","middle").text(function(a,c){var e=r(a);return(""+e).match("NaN")?"":e});u.watchTransition(M,"min-max top").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f.range()[c])+",0)"})}break;case "bottom":u=D+36;var N=30,Q=0;E=p.selectAll("g").select("text");var A="";w%360?(E.attr("transform",""),E.each(function(a,c){var e=this.getBoundingClientRect(),f=e.width;Q=e.height;f>N&&(N=f)}),A="rotate("+w+" 0,"+(Q/2+c.tickPadding())+")",u=Math.abs(Math.sin(w*
Math.PI/180)),u=(u?u*N:N)+30,E.attr("transform",A).style("text-anchor",0<w%360?"start":"end")):F?E.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"}):E.attr("transform","translate(0,0)");C.enter().append("text").attr("class","nv-axislabel");E=0;1===f.range().length?E=G?2*f.range()[0]+f.rangeBand():0:2===f.range().length?E=G?f.range()[0]+f.range()[1]+f.rangeBand():f.range()[1]:2<f.range().length&&(E=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));C.attr("text-anchor",
"middle").attr("y",u).attr("x",E/2);k&&(u=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),u.exit().remove(),u.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a)+(G?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",c.tickPadding()).attr("transform",A).style("text-anchor",
w?0<w%360?"start":"end":"middle").text(function(a,c){var e=r(a);return(""+e).match("NaN")?"":e}),u.watchTransition(M,"min-max bottom").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a)+(G?f.rangeBand()/2:0))+",0)"}));break;case "right":C.enter().append("text").attr("class","nv-axislabel");C.style("text-anchor",z?"middle":"begin").attr("transform",z?"rotate(90)":"").attr("y",z?-Math.max(n.right,h)+12-(D||0):-10).attr("x",z?d3.max(f.range())/2:c.tickPadding());k&&(u=a.selectAll("g.nv-axisMaxMin").data(f.domain()),
u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),u.exit().remove(),u.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(f(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",c.tickPadding()).style("text-anchor","start").text(function(a,c){var e=r(a);return(""+e).match("NaN")?"":e}),u.watchTransition(M,"min-max right").attr("transform",function(a,
c){return"translate(0,"+e.utils.NaNtoZero(f.range()[c])+")"}).select("text").style("opacity",1));break;case "left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",z?"middle":"end").attr("transform",z?"rotate(-90)":"").attr("y",z?-Math.max(n.left,h)+25-(D||0):-10).attr("x",z?-d3.max(f.range())/2:-c.tickPadding()),k&&(u=a.selectAll("g.nv-axisMaxMin").data(f.domain()),u.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":
"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),u.exit().remove(),u.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(K(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-c.tickPadding()).attr("text-anchor","end").text(function(a,c){var e=r(a);return(""+e).match("NaN")?"":e}),u.watchTransition(M,"min-max right").attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(f.range()[c])+")"}).select("text").style("opacity",1))}C.text(function(a){return a});
!k||"left"!==c.orient()&&"right"!==c.orient()||(p.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(k&&("top"===c.orient()||"bottom"===c.orient())){var l=[];a.selectAll("g.nv-axisMaxMin").each(function(a,
c){try{c?l.push(f(a)-this.getBoundingClientRect().width-4):l.push(f(a)+this.getBoundingClientRect().width+4)}catch(ca){c?l.push(f(a)-4):l.push(f(a)+4)}});p.selectAll("g").each(function(a,c){if(f(a)<l[0]||f(a)>l[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}p.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);K=f.copy()});M.renderEnd("axis immediate");return a}var c=d3.svg.axis(),f=d3.scale.linear(),
n={top:0,right:0,bottom:0,left:0},h=75,r=60,v=null,k=!0,w=0,z=!0,F=!1,G=!1,H=null,D=0,J=void 0,B=250,O=d3.dispatch("renderEnd");c.scale(f).orient("bottom").tickFormat(function(a){return a});var K,M=e.utils.renderWatch(O,B);a.axis=c;a.dispatch=O;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return D},set:function(a){D=a}},staggerLabels:{get:function(){return F},set:function(a){F=a}},rotateLabels:{get:function(){return w},set:function(a){w=a}},
rotateYLabel:{get:function(){return z},set:function(a){z=a}},showMaxMin:{get:function(){return k},set:function(a){k=a}},axisLabel:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return r},set:function(a){r=a}},ticks:{get:function(){return H},set:function(a){H=a}},width:{get:function(){return h},set:function(a){h=a}},fontSize:{get:function(){return J},set:function(a){J=a}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?
a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return B},set:function(a){B=a;M.reset(B)}},scale:{get:function(){return f},set:function(h){f=h;c.scale(f);G="function"===typeof f.rangeBands;e.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"])}}});e.utils.initOptions(a);e.utils.inheritOptionsD3(a,c,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));e.utils.inheritOptionsD3(a,
f,["domain","range","rangeBand","rangeBands"]);return a};e.models.boxPlot=function(){function a(l){A.reset();l.each(function(a){var l=f-c.left-c.right,h=n-c.top-c.bottom;C=d3.select(this);e.utils.initSVG(C);r.domain(p||a.map(function(a,c){return k(a,c)})).rangeBands(V||[0,l],.1);l=[];if(!R){var q=[];a.forEach(function(a,c){var e=w(a),f=F(a),l=G(a),h=H(a),p=J(a);p&&p.forEach(function(a,c){q.push(B(a,c,void 0))});l&&q.push(l);e&&q.push(e);f&&q.push(f);h&&q.push(h)});l=d3.min(q);var aa=d3.max(q);l=[l,
aa]}v.domain(R||l);v.range(I||[h,0]);Q=Q||v.copy().range([v(0),v(0)]);h=C.selectAll("g.nv-wrap").data([a]);h.enter().append("g").attr("class","nvd3 nv-wrap");h.attr("transform","translate("+c.left+","+c.top+")");var x=h.selectAll(".nv-boxplot").data(function(a){return a}),U=x.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);x.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(r(k(a,c))+.05*r.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});
x.watchTransition(A,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*u/a.length}).attr("transform",function(a,c){return"translate("+(r(k(a,c))+.05*r.rangeBand())+", 0)"});x.exit().remove();U.each(function(a,c){var e=d3.select(this);[G,H].forEach(function(f){void 0!==f(a)&&null!==f(a)&&(f=f===G?"low":"high",e.append("line").style("stroke",D(a)||M(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+f),e.append("line").style("stroke",D(a)||M(a,
c)).attr("class","nv-boxplot-tick nv-boxplot-"+f))})});var X=function(){return null===N?.9*r.rangeBand():Math.min(75,.9*r.rangeBand())},oa=function(){return.45*r.rangeBand()-X()/2},Ba=function(){return.45*r.rangeBand()+X()/2};[G,H].forEach(function(a){var c=a===G?"low":"high",e=a===G?w:F;x.select("line.nv-boxplot-whisker.nv-boxplot-"+c).watchTransition(A,"nv-boxplot: boxplots").attr("x1",.45*r.rangeBand()).attr("y1",function(c,e){return v(a(c))}).attr("x2",.45*r.rangeBand()).attr("y2",function(a,
c){return v(e(a))});x.select("line.nv-boxplot-tick.nv-boxplot-"+c).watchTransition(A,"nv-boxplot: boxplots").attr("x1",oa).attr("y1",function(c,e){return v(a(c))}).attr("x2",Ba).attr("y2",function(c,e){return v(a(c))})});[G,H].forEach(function(a){U.selectAll(".nv-boxplot-"+(a===G?"low":"high")).on("mouseover",function(c,e,f){d3.select(this).classed("hover",!0);E.elementMouseover({series:{key:a(c),color:D(c)||M(c,f)},e:d3.event})}).on("mouseout",function(c,e,f){d3.select(this).classed("hover",!1);
E.elementMouseout({series:{key:a(c),color:D(c)||M(c,f)},e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})})});U.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);E.elementMouseover({key:k(a),value:k(a),series:[{key:"Q3",value:F(a),color:D(a)||M(a,c)},{key:"Q2",value:z(a),color:D(a)||M(a,c)},{key:"Q1",value:w(a),color:D(a)||M(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);E.elementMouseout({key:k(a),value:k(a),series:[{key:"Q3",value:F(a),color:D(a)||M(a,c)},{key:"Q2",value:z(a),color:D(a)||M(a,c)},{key:"Q1",value:w(a),color:D(a)||M(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})});x.select("rect.nv-boxplot-box").watchTransition(A,"nv-boxplot: boxes").attr("y",function(a,c){return v(F(a))}).attr("width",X).attr("x",oa).attr("height",function(a,c){return Math.abs(v(F(a))-v(w(a)))||1}).style("fill",function(a,c){return D(a)||
M(a,c)}).style("stroke",function(a,c){return D(a)||M(a,c)});U.append("line").attr("class","nv-boxplot-median");x.select("line.nv-boxplot-median").watchTransition(A,"nv-boxplot: boxplots line").attr("x1",oa).attr("y1",function(a,c){return v(z(a))}).attr("x2",Ba).attr("y2",function(a,c){return v(z(a))});h=x.selectAll(".nv-boxplot-outlier").data(function(a){return J(a)||[]});h.enter().append("circle").style("fill",function(a,c,e){return K(a,c,e)||M(a,e)}).style("stroke",function(a,c,e){return K(a,c,
e)||M(a,e)}).style("z-index",9E3).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);E.elementMouseover({series:{key:O(a,c,e),color:K(a,c,e)||M(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);E.elementMouseout({series:{key:O(a,c,e),color:K(a,c,e)||M(a,e)},e:d3.event})}).on("mousemove",function(a,c){E.elementMousemove({e:d3.event})});h.attr("class","nv-boxplot-outlier");h.watchTransition(A,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*r.rangeBand()).attr("cy",
function(a,c,e){return v(B(a,c,e))}).attr("r","3");h.exit().remove();r.copy();Q=v.copy()});A.renderEnd("nv-boxplot immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,n=500,h=Math.floor(1E4*Math.random()),r=d3.scale.ordinal(),v=d3.scale.linear(),k=function(a){return a.label},w=function(a){return a.values.Q1},z=function(a){return a.values.Q2},F=function(a){return a.values.Q3},G=function(a){return a.values.whisker_low},H=function(a){return a.values.whisker_high},D=function(a){return a.color},
J=function(a){return a.values.outliers},B=function(a,c,e){return a},O=function(a,c,e){return a},K=function(a,c,e){},M=e.utils.defaultColor(),C=null,p,V,R,I,E=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),u=250,N=null,Q,A=e.utils.renderWatch(E,u);a.dispatch=E;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},maxBoxWidth:{get:function(){return N},
set:function(a){N=a}},x:{get:function(){return k},set:function(a){k=a}},q1:{get:function(){return w},set:function(a){w=a}},q2:{get:function(){return z},set:function(a){z=a}},q3:{get:function(){return F},set:function(a){F=a}},wl:{get:function(){return G},set:function(a){G=a}},wh:{get:function(){return H},set:function(a){H=a}},itemColor:{get:function(){return D},set:function(a){D=a}},outliers:{get:function(){return J},set:function(a){J=a}},outlierValue:{get:function(){return B},set:function(a){B=a}},
outlierLabel:{get:function(){return O},set:function(a){O=a}},outlierColor:{get:function(){return K},set:function(a){K=a}},xScale:{get:function(){return r},set:function(a){r=a}},yScale:{get:function(){return v},set:function(a){v=a}},xDomain:{get:function(){return p},set:function(a){p=a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return V},set:function(a){V=a}},yRange:{get:function(){return I},set:function(a){I=a}},id:{get:function(){return h},set:function(a){h=
a}},y:{get:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");return{}},set:function(a){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}},
duration:{get:function(){return u},set:function(a){u=a;A.reset(u)}}});e.utils.initOptions(a);return a};e.models.boxPlotChart=function(){function a(k){M.reset();M.models(c);w&&M.models(f);z&&M.models(n);k.each(function(p){var k=d3.select(this);e.utils.initSVG(k);var C=(r||parseInt(k.style("width"))||960)-h.left-h.right,I=(v||parseInt(k.style("height"))||400)-h.top-h.bottom;a.update=function(){O.beforeUpdate();k.transition().duration(K).call(a)};a.container=this;if(p&&p.length)k.selectAll(".nv-noData").remove();
else return p=k.selectAll(".nv-noData").data([B]),p.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),p.attr("x",h.left+C/2).attr("y",h.top+I/2).text(function(a){return a}),a;D=c.xScale();J=c.yScale().clamp(!0);var E=k.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([p]),u=E.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),N=u.append("defs"),E=E.select("g");u.append("g").attr("class","nv-x nv-axis");u.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");u.append("g").attr("class","nv-barsWrap");E.attr("transform","translate("+h.left+","+h.top+")");F&&E.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)");c.width(C).height(I);E.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(c);N.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");E.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",D.rangeBand()*(G?2:1)).attr("height",
16).attr("x",-D.rangeBand()/(G?1:2));w&&(f.scale(D).ticks(e.utils.calcTicksX(C/100,p)).tickSize(-I,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+J.range()[0]+")"),E.select(".nv-x.nv-axis").call(f),p=E.select(".nv-x.nv-axis").selectAll("g"),G&&p.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0===e%2?"5":"17")+")"}));z&&(n.scale(J).ticks(Math.floor(I/36)).tickSize(-C,0),E.select(".nv-y.nv-axis").call(n));E.select(".nv-zeroLine line").attr("x1",0).attr("x2",C).attr("y1",
J(0)).attr("y2",J(0))});M.renderEnd("nv-boxplot chart immediate");return a}var c=e.models.boxPlot(),f=e.models.axis(),n=e.models.axis(),h={top:15,right:10,bottom:50,left:60},r=null,v=null,k=e.utils.getColor(),w=!0,z=!0,F=!1,G=!1,H=e.models.tooltip(),D,J,B="No Data Available.",O=d3.dispatch("beforeUpdate","renderEnd"),K=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});n.orient(F?"right":"left").tickFormat(d3.format(",.1f"));H.duration(0);var M=e.utils.renderWatch(O,K);c.dispatch.on("elementMouseover.tooltip",
function(a){H.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){H.data(a).hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){H()});a.dispatch=O;a.boxplot=c;a.xAxis=f;a.yAxis=n;a.tooltip=H;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return r},set:function(a){r=a}},height:{get:function(){return v},set:function(a){v=a}},staggerLabels:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return w},set:function(a){w=
a}},showYAxis:{get:function(){return z},set:function(a){z=a}},tooltipContent:{get:function(){return H},set:function(a){H=a}},noData:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return K},set:function(a){K=a;M.reset(K);c.duration(K);f.duration(K);n.duration(K)}},color:{get:function(){return k},
set:function(a){k=e.utils.getColor(a);c.color(k)}},rightAlignYAxis:{get:function(){return F},set:function(a){F=a;n.orient(a?"right":"left")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.bullet=function(){function a(a,c){var e=a.slice();a.sort(function(a,f){var h=e.indexOf(a),p=e.indexOf(f);return d3.descending(c[h],c[p])})}function c(n){n.each(function(c,p){var n=z-f.left-f.right,C=F-f.top-f.bottom;G=d3.select(this);e.utils.initSVG(G);var I=r.call(this,c,p).slice(),E=v.call(this,
c,p).slice(),u=(c.markerLines?c.markerLines:[0]).slice(),N=k.call(this,c,p).slice(),Q=(c.rangeLabels?c.rangeLabels:[]).slice(),A=(c.markerLabels?c.markerLabels:[]).slice(),l=(c.markerLineLabels?c.markerLineLabels:[]).slice(),q=(c.measureLabels?c.measureLabels:[]).slice();a(Q,I);a(A,E);a(l,u);a(q,N);I.sort(d3.descending);E.sort(d3.descending);u.sort(d3.descending);N.sort(d3.descending);var M=d3.scale.linear().domain(d3.extent(d3.merge([w,I]))).range(h?[n,0]:[0,n]);this.__chart__||d3.scale.linear().domain([0,
Infinity]).range(M.range());this.__chart__=M;d3.min(I);d3.max(I);var n=G.selectAll("g.nv-wrap.nv-bullet").data([c]),H=n.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),Y=n.select("g");p=0;for(var aa=I.length;p<aa;p++){var x="nv-range nv-range"+p;2>=p&&(x=x+" nv-range"+O[p]);H.append("rect").attr("class",x)}H.append("rect").attr("class","nv-measure");n.attr("transform","translate("+f.left+","+f.top+")");p=0;for(aa=I.length;p<aa;p++)x=I[p],Y.select("rect.nv-range"+p).datum(x).attr("height",
C).transition().duration(K).attr("width",Math.abs(M(x)-M(0))).attr("x",0>x?M(x):M(0));Y.select("rect.nv-measure").style("fill",D).attr("height",C/3).attr("y",C/3).on("mouseover",function(){J.elementMouseover({value:N[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){J.elementMousemove({value:N[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){J.elementMouseout({value:N[0],label:q[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(K).attr("width",
0>N?M(0)-M(N[0]):M(N[0])-M(0)).attr("x",0>N?M(N):M(0));I=C/6;E=E.map(function(a,c){return{value:a,label:A[c]}});H.selectAll("path.nv-markerTriangle").data(E).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+I+"L"+I+","+-I+" "+-I+","+-I+"Z").on("mouseover",function(a){J.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[M(a.value),C/2]})}).on("mousemove",function(a){J.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",
function(a,c){J.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});Y.selectAll("path.nv-markerTriangle").data(E).transition().duration(K).attr("transform",function(a){return"translate("+M(a.value)+","+C/2+")"});u=u.map(function(a,c){return{value:a,label:l[c]}});H.selectAll("line.nv-markerLine").data(u).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(a){return M(a.value)}).attr("y1","2").attr("x2",function(a){return M(a.value)}).attr("y2",
C-2).on("mouseover",function(a){J.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[M(a.value),C/2]})}).on("mousemove",function(a){J.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){J.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});Y.selectAll("line.nv-markerLine").data(u).transition().duration(K).attr("x1",function(a){return M(a.value)}).attr("x2",
function(a){return M(a.value)});n.selectAll(".nv-range").on("mouseover",function(a,c){J.elementMouseover({value:a,label:Q[c]||B[c],color:d3.select(this).style("fill")})}).on("mousemove",function(){J.elementMousemove({value:N[0],label:q[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){J.elementMouseout({value:a,label:Q[c]||B[c],color:d3.select(this).style("fill")})})});return c}var f={top:0,right:0,bottom:0,left:0},n="left",h=!1,r=function(a){return a.ranges},v=function(a){return a.markers?
a.markers:[]},k=function(a){return a.measures},w=[0],z=380,F=30,G=null,H=null,D=e.utils.getColor(["#1f77b4"]),J=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),B=["Maximum","Mean","Minimum"],O=["Max","Avg","Min"],K=1E3;c.dispatch=J;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{ranges:{get:function(){return r},set:function(a){r=a}},markers:{get:function(){return v},set:function(a){v=a}},measures:{get:function(){return k},set:function(a){k=a}},forceX:{get:function(){return w},
set:function(a){w=a}},width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return F},set:function(a){F=a}},tickFormat:{get:function(){return H},set:function(a){H=a}},duration:{get:function(){return K},set:function(a){K=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},orient:{get:function(){return n},set:function(a){n=
a;h="right"==n||"bottom"==n}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}}});e.utils.initOptions(c);return c};e.models.bulletChart=function(){function a(f){f.each(function(n,K){var B=d3.select(this);e.utils.initSVG(B);var C=e.utils.availableWidth(z,B,r),p=F-r.top-r.bottom;a.update=function(){a(f)};a.container=this;if(n&&v.call(this,n,K))B.selectAll(".nv-noData").remove();else return e.utils.noData(a,B),a;var D=v.call(this,n,K).slice().sort(d3.descending),R=k.call(this,n,
K).slice().sort(d3.descending),I=w.call(this,n,K).slice().sort(d3.descending),E=B.selectAll("g.nv-wrap.nv-bulletChart").data([n]),u=E.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),B=E.select("g");u.append("g").attr("class","nv-bulletWrap");u.append("g").attr("class","nv-titles");E.attr("transform","translate("+r.left+","+r.top+")");var N=d3.scale.linear().domain([0,Math.max(D[0],R[0]||0,I[0])]).range(h?[C,0]:[0,C]),Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(N.range());
this.__chart__=N;D=u.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(F-r.top-r.bottom)/2+")");D.append("text").attr("class","nv-title").text(function(a){return a.title});D.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});c.width(C).height(p);D=B.select(".nv-bulletWrap");d3.transition(D).call(c);var A=G||N.tickFormat(C/100),C=B.selectAll("g.nv-tick").data(N.ticks(H?H:C/50),function(a){return this.textContent||
A(a)}),B=C.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+Q(a)+",0)"}).style("opacity",1E-6);B.append("line").attr("y1",p).attr("y2",7*p/6);B.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*p/6).text(A);B=d3.transition(C).transition().duration(c.duration()).attr("transform",function(a){return"translate("+N(a)+",0)"}).style("opacity",1);B.select("line").attr("y1",p).attr("y2",7*p/6);B.select("text").attr("y",7*p/6);d3.transition(C.exit()).transition().duration(c.duration()).attr("transform",
function(a){return"translate("+N(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var c=e.models.bullet(),f=e.models.tooltip(),n="left",h=!1,r={top:5,right:40,bottom:20,left:120},v=function(a){return a.ranges},k=function(a){return a.markers?a.markers:[]},w=function(a){return a.measures},z=null,F=55,G=null,H=null,D=null,J=d3.dispatch();f.duration(0).headerEnabled(!1);c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};f.data(a).hidden(!1)});
c.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){f()});a.bullet=c;a.dispatch=J;a.tooltip=f;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return v},set:function(a){v=a}},markers:{get:function(){return k},set:function(a){k=a}},measures:{get:function(){return w},set:function(a){w=a}},width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return F},set:function(a){F=
a}},tickFormat:{get:function(){return G},set:function(a){G=a}},ticks:{get:function(){return H},set:function(a){H=a}},noData:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return r},set:function(a){r.top=void 0!==a.top?a.top:r.top;r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},orient:{get:function(){return n},set:function(a){n=a;h="right"==n||"bottom"==n}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);
return a};e.models.candlestickBar=function(){function a(u){u.each(function(a){r=d3.select(this);var u=e.utils.availableWidth(f,r,c),A=e.utils.availableHeight(n,r,c);e.utils.initSVG(r);var l=u/a[0].values.length*.45;v.domain(p||d3.extent(a[0].values.map(w).concat(J)));O?v.range(R||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):v.range(R||[5+l/2,u-l/2-5]);k.domain(V||[d3.min(a[0].values.map(D).concat(B)),d3.max(a[0].values.map(H).concat(B))]).range(I||[A,0]);v.domain()[0]===
v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var q=a.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),C=q.append("defs"),q=q.append("g"),N=a.select("g");q.append("g").attr("class","nv-ticks");
a.attr("transform","translate("+c.left+","+c.top+")");r.on("click",function(a,c){E.chartClick({data:a,index:c,pos:d3.event,id:h})});C.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");a.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",A);N.attr("clip-path",K?"url(#nv-chart-clip-path-"+h+")":"");u=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});u.exit().remove();A=u.enter().append("g");u.attr("class",function(a,c,e){return(F(a,c)>G(a,
c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});A.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+v(w(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(H(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(D(a,c))});A.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(v(w(a,c))-l/2)+","+(k(z(a,c))-(F(a,c)>G(a,c)?k(G(a,c))-k(F(a,c)):0))+")"}).attr("x",0).attr("y",
0).attr("width",l).attr("height",function(a,c){var e=F(a,c),f=G(a,c);return e>f?k(f)-k(e):k(e)-k(f)});u.select(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+v(w(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(H(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(D(a,c))});u.select(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+(v(w(a,c))-l/2)+","+(k(z(a,c))-(F(a,c)>G(a,c)?k(G(a,c))-k(F(a,c)):0))+")"}).attr("x",
0).attr("y",0).attr("width",l).attr("height",function(a,c){var e=F(a,c),f=G(a,c);return e>f?k(f)-k(e):k(e)-k(f)})});return a}var c={top:0,right:0,bottom:0,left:0},f=null,n=null,h=Math.floor(1E4*Math.random()),r,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},F=function(a){return a.open},G=function(a){return a.close},H=function(a){return a.high},D=function(a){return a.low},J=[],B=[],O=!1,K=!0,M=e.utils.defaultColor(),C=!1,p,V,R,I,E=d3.dispatch("stateChange",
"changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();r.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){r.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=E;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},
set:function(a){n=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return p},set:function(a){p=a}},yDomain:{get:function(){return V},set:function(a){V=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return I},set:function(a){I=a}},forceX:{get:function(){return J},set:function(a){J=a}},forceY:{get:function(){return B},set:function(a){B=a}},padData:{get:function(){return O},set:function(a){O=
a}},clipEdge:{get:function(){return K},set:function(a){K=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return C},set:function(a){C=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return z},set:function(a){z=a}},open:{get:function(){return F()},set:function(a){F=a}},close:{get:function(){return G()},set:function(a){G=a}},high:{get:function(){return H},set:function(a){H=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return c},
set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.cumulativeLineChart=function(){function a(q){Y.reset();Y.models(f);B&&Y.models(n);O&&Y.models(h);q.each(function(q){function X(){ya.data([ca]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var w=d3.select(this);
e.utils.initSVG(w);w.classed("nv-chart-"+I,!0);var N=e.utils.availableWidth(H,w,z),U=e.utils.availableHeight(D,w,z);a.update=function(){0===l?w.call(a):w.transition().duration(l).call(a)};a.container=this;E.setter(x(q),a.update).getter(aa(q)).update();E.disabled=q.map(function(a){return!!a.disabled});if(!u)for(oa in u={},E)u[oa]=E[oa]instanceof Array?E[oa].slice(0):E[oa];var oa=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,
c){ca.x=d3.event.x;ca.i=Math.round(Z.invert(ca.x));X()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");E.index=ca.i;A.stateChange(E)});if(q&&q.length&&q.filter(function(a){return a.values.length}).length)w.selectAll(".nv-noData").remove();else return e.utils.noData(a,w),a;V=f.xScale();R=f.yScale();if(p)f.yDomain(null);else{var Y=q.filter(function(a){return!a.disabled}).map(function(a,c){var e=d3.extent(a.values,f.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-
e[0])/(1+e[0])]}),Y=[d3.min(Y,function(a){return a[0]}),d3.max(Y,function(a){return a[1]})];f.yDomain(Y)}Z.domain([0,q[0].values.length-1]).range([0,N]).clamp(!0);q=c(ca.i,q);var ga=C?"none":"all",da=w.selectAll("g.nv-wrap.nv-cumulativeLine").data([q]),fa=da.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),Y=da.select("g");fa.append("g").attr("class","nv-interactive");fa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");fa.append("g").attr("class",
"nv-y nv-axis");fa.append("g").attr("class","nv-background");fa.append("g").attr("class","nv-linesWrap").style("pointer-events",ga);fa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");J?(r.width(N),Y.select(".nv-legendWrap").datum(q).call(r),F||r.height()===z.top||(z.top=r.height(),U=e.utils.availableHeight(D,w,z)),Y.select(".nv-legendWrap").attr("transform","translate(0,"+-z.top+
")")):Y.select(".nv-legendWrap").selectAll("*").remove();M?(ga=[{key:"Re-scale y-axis",disabled:!p}],v.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),Y.select(".nv-controlsWrap").datum(ga).attr("transform","translate(0,"+-z.top+")").call(v)):Y.select(".nv-controlsWrap").selectAll("*").remove();da.attr("transform","translate("+z.left+","+z.top+")");K&&Y.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)");ga=q.filter(function(a){return a.tempDisabled});
da.select(".tempDisabled").remove();ga.length&&da.append("text").attr("class","tempDisabled").attr("x",N/2).attr("y","-.71em").style("text-anchor","end").text(ga.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");C&&(k.width(N).height(U).margin({left:z.left,top:z.top}).svgContainer(w).xScale(V),da.select(".nv-interactive").call(k));fa.select(".nv-background").append("rect");Y.select(".nv-background rect").attr("width",N).attr("height",U);f.y(function(a){return a.display.y}).width(N).height(U).color(q.map(function(a,
c){return a.color||G(a,c)}).filter(function(a,c){return!q[c].disabled&&!q[c].tempDisabled}));da=Y.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled&&!a.tempDisabled}));da.call(f);q.forEach(function(a,c){a.seriesIndex=c});fa=q.filter(function(a){return!a.disabled&&!!Q(a)});fa=Y.select(".nv-avgLinesWrap").selectAll("line").data(fa,function(a){return a.key});ga=function(a){a=R(Q(a));return 0>a?0:a>U?U:a};fa.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",
function(a,c){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",N).attr("y1",ga).attr("y2",ga);fa.style("stroke-opacity",function(a){a=R(Q(a));return 0>a||a>U?0:1}).attr("x1",0).attr("x2",N).attr("y1",ga).attr("y2",ga);fa.exit().remove();var ya=da.selectAll(".nv-indexLine").data([ca]);ya.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(oa);ya.attr("transform",function(a){return"translate("+
Z(a.i)+",0)"}).attr("height",U);B&&(n.scale(V)._ticks(e.utils.calcTicksX(N/70,q)).tickSize(-U,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")"),Y.select(".nv-x.nv-axis").call(n));O&&(h.scale(R)._ticks(e.utils.calcTicksY(U/36,q)).tickSize(-N,0),Y.select(".nv-y.nv-axis").call(h));Y.select(".nv-background rect").on("click",function(){ca.x=d3.mouse(this)[0];ca.i=Math.round(Z.invert(ca.x));E.index=ca.i;A.stateChange(E);X()});f.dispatch.on("elementClick",function(a){ca.i=a.pointIndex;
ca.x=Z(ca.i);E.index=ca.i;A.stateChange(E);X()});v.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;p=!c.disabled;E.rescaleY=p;A.stateChange(E);a.update()});r.dispatch.on("stateChange",function(c){for(var e in c)E[e]=c[e];A.stateChange(E);a.update()});k.dispatch.on("elementMousemove",function(c){f.clearHighlights();var l,p,x,u=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,q){p=e.interactiveBisect(h.values,c.pointXValue,a.x());f.highlightPoint(q,p,!0);
var k=h.values[p];"undefined"!==typeof k&&("undefined"===typeof l&&(l=k),"undefined"===typeof x&&(x=a.xScale()(a.x()(k,p))),u.push({key:h.key,value:a.y()(k,p),color:G(h,h.seriesIndex)}))});if(2<u.length){var A=a.yScale().invert(c.mouseY),r=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),A=e.nearestValueIndex(u.map(function(a){return a.value}),A,r);null!==A&&(u[A].highlight=!0)}A=n.tickFormat()(a.x()(l,p),p);k.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:A,
series:u})();k.renderGuideLine(x)});k.dispatch.on("elementMouseout",function(a){f.clearHighlights()});A.on("changeState",function(c){"undefined"!==typeof c.disabled&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),E.disabled=c.disabled);"undefined"!==typeof c.index&&(ca.i=c.index,ca.x=Z(ca.i),E.index=c.index,ya.data([ca]));"undefined"!==typeof c.rescaleY&&(p=c.rescaleY);a.update()})});Y.renderEnd("cumulativeLineChart immediate");return a}function c(a,c){U||(U=f.y());return c.map(function(c,e){if(!c.values)return c;
var f=c.values[a];if(null==f)return c;var h=U(f,a);if(-.95>h&&!q)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(U(a,c)-h)/(1+h)};return a});return c})}var f=e.models.line(),n=e.models.axis(),h=e.models.axis(),r=e.models.legend(),v=e.models.legend(),k=e.interactiveGuideline(),w=e.models.tooltip(),z={top:30,right:30,bottom:50,left:60},F=null,G=e.utils.defaultColor(),H=null,D=null,J=!0,B=!0,O=!0,K=!1,M=!0,C=!1,p=!0,V,R,I=f.id(),E=e.utils.state(),u=null,
N=null,Q=function(a){return a.average},A=d3.dispatch("stateChange","changeState","renderEnd"),l=250,q=!1;E.index=0;E.rescaleY=p;n.orient("bottom").tickPadding(7);h.orient(K?"right":"left");w.valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,c){return n.tickFormat()(a,c)});v.updateState(!1);var Z=d3.scale.linear(),ca={i:0,x:0},Y=e.utils.renderWatch(A,l),aa=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:ca.i,rescaleY:p}}},x=
function(a){return function(c){void 0!==c.index&&(ca.i=c.index);void 0!==c.rescaleY&&(p=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};f.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;w.data(c).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){w.hidden(!0)});var U=null;a.dispatch=A;a.lines=f;a.legend=r;a.controls=v;a.xAxis=n;a.yAxis=h;a.interactiveLayer=k;a.state=E;a.tooltip=
w;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return H},set:function(a){H=a}},height:{get:function(){return D},set:function(a){D=a}},rescaleY:{get:function(){return p},set:function(a){p=a}},showControls:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return J},set:function(a){J=a}},average:{get:function(){return Q},set:function(a){Q=a}},defaultState:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return N},
set:function(a){N=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return O},set:function(a){O=a}},noErrorCheck:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return z},set:function(a){void 0!==a.top&&(F=z.top=a.top);z.right=void 0!==a.right?a.right:z.right;z.bottom=void 0!==a.bottom?a.bottom:z.bottom;z.left=void 0!==a.left?a.left:z.left}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a);r.color(G)}},useInteractiveGuideline:{get:function(){return C},
set:function(c){C=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return K},set:function(a){K=a;h.orient(a?"right":"left")}},duration:{get:function(){return l},set:function(a){l=a;f.duration(l);n.duration(l);h.duration(l);Y.reset(l)}}});e.utils.inheritOptions(a,f);e.utils.initOptions(a);return a};e.models.discreteBar=function(){function a(h){R.reset();h.each(function(a){var h=f-c.left-c.right,p=n-c.top-c.bottom;r=d3.select(this);e.utils.initSVG(r);a.forEach(function(a,
c){a.values.forEach(function(a){a.series=c})});var E=J&&B?[]:a.map(function(a){return a.values.map(function(a,c){return{x:w(a,c),y:z(a,c),y0:a.y0}})});v.domain(J||d3.merge(E).map(function(a){return a.x})).rangeBands(O||[0,h],.1);k.domain(B||d3.extent(d3.merge(E).map(function(a){return a.y}).concat(F)));H?k.range(K||[p-(0>k.domain()[0]?12:0),0<k.domain()[1]?12:0]):k.range(K||[p,0]);V=V||k.copy().range([k(0),k(0)]);h=r.selectAll("g.nv-wrap.nv-discretebar").data([a]);p=h.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");h.select("g");p.append("g").attr("class","nv-groups");h.attr("transform","translate("+c.left+","+c.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(R,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover});h.watchTransition(R,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();p=h.enter().append("g").attr("transform",function(a,c,e){return"translate("+(v(w(a,c))+.05*v.rangeBand())+", "+k(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);M.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,
c){d3.select(this).classed("hover",!1);M.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){M.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){M.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){M.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});p.append("rect").attr("height",
0).attr("width",.9*v.rangeBand()/a.length);H?(p.append("text").attr("text-anchor","middle"),h.select("text").text(function(a,c){return D(z(a,c))}).watchTransition(R,"discreteBar: bars text").attr("x",.9*v.rangeBand()/2).attr("y",function(a,c){return 0>z(a,c)?k(z(a,c))-k(0)+12:-4})):h.selectAll("text").remove();h.attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||G(a,c)}).style("stroke",function(a,c){return a.color||G(a,c)}).select("rect").attr("class",
C).watchTransition(R,"discreteBar: bars rect").attr("width",.9*v.rangeBand()/a.length);h.watchTransition(R,"discreteBar: bars").attr("transform",function(a,c){var e=v(w(a,c))+.05*v.rangeBand(),f=0>z(a,c)?k(0):1>k(0)-k(z(a,c))?k(0)-1:k(z(a,c));return"translate("+e+", "+f+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(k(z(a,c))-k(0)),1)});v.copy();V=k.copy()});R.renderEnd("discreteBar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,n=500,h=Math.floor(1E4*
Math.random()),r,v=d3.scale.ordinal(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},F=[0],G=e.utils.defaultColor(),H=!1,D=d3.format(",.2f"),J,B,O,K,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C="discreteBar",p=250,V,R=e.utils.renderWatch(M,p);a.dispatch=M;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},
set:function(a){n=a}},forceY:{get:function(){return F},set:function(a){F=a}},showValues:{get:function(){return H},set:function(a){H=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return z},set:function(a){z=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return J},set:function(a){J=a}},yDomain:{get:function(){return B},set:function(a){B=a}},xRange:{get:function(){return O},set:function(a){O=
a}},yRange:{get:function(){return K},set:function(a){K=a}},valueFormat:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return h},set:function(a){h=a}},rectClass:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a)}},
duration:{get:function(){return p},set:function(a){p=a;R.reset(p)}}});e.utils.initOptions(a);return a};e.models.discreteBarChart=function(){function a(p){I.reset();I.models(c);H&&I.models(f);D&&I.models(n);p.each(function(p){var r=d3.select(this);e.utils.initSVG(r);var u=e.utils.availableWidth(w,r,v),A=e.utils.availableHeight(z,r,v);a.update=function(){V.beforeUpdate();r.transition().duration(R).call(a)};a.container=this;if(p&&p.length&&p.filter(function(a){return a.values.length}).length)r.selectAll(".nv-noData").remove();
else return e.utils.noData(a,r),a;M=c.xScale();C=c.yScale().clamp(!0);var l=r.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([p]),q=l.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),E=q.append("defs"),I=l.select("g");q.append("g").attr("class","nv-x nv-axis");q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");q.append("g").attr("class","nv-barsWrap");q.append("g").attr("class","nv-legendWrap");I.attr("transform",
"translate("+v.left+","+v.top+")");G?(h.width(u),I.select(".nv-legendWrap").datum(p).call(h),k||h.height()===v.top||(v.top=h.height(),A=e.utils.availableHeight(z,r,v)),l.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")")):I.select(".nv-legendWrap").selectAll("*").remove();J&&I.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)");c.width(u).height(A);I.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(c);E.append("clipPath").attr("id",
"nv-x-label-clip-"+c.id()).append("rect");I.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",M.rangeBand()*(B?2:1)).attr("height",16).attr("x",-M.rangeBand()/(B?1:2));H&&(f.scale(M)._ticks(e.utils.calcTicksX(u/100,p)).tickSize(-A,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+(C.range()[0]+(c.showValues()&&0>C.domain()[0]?16:0))+")"),I.select(".nv-x.nv-axis").call(f),l=I.select(".nv-x.nv-axis").selectAll("g"),B&&l.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+
(0==e%2?"5":"17")+")"}),K&&l.selectAll(".tick text").attr("transform","rotate("+K+" 0,0)").style("text-anchor",0<K?"start":"end"),O&&I.selectAll(".tick text").call(e.utils.wrapTicks,a.xAxis.rangeBand()));D&&(n.scale(C)._ticks(e.utils.calcTicksY(A/36,p)).tickSize(-u,0),I.select(".nv-y.nv-axis").call(n));I.select(".nv-zeroLine line").attr("x1",0).attr("x2",J?-u:u).attr("y1",C(0)).attr("y2",C(0))});I.renderEnd("discreteBar chart immediate");return a}var c=e.models.discreteBar(),f=e.models.axis(),n=e.models.axis(),
h=e.models.legend(),r=e.models.tooltip(),v={top:15,right:10,bottom:50,left:60},k=null,w=null,z=null,F=e.utils.getColor(),G=!1,H=!0,D=!0,J=!1,B=!1,O=!1,K=0,M,C,p=null,V=d3.dispatch("beforeUpdate","renderEnd"),R=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});n.orient(J?"right":"left").tickFormat(d3.format(",.1f"));r.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return n.tickFormat()(a,c)}).keyFormatter(function(a,c){return f.tickFormat()(a,c)});var I=e.utils.renderWatch(V,
R);c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};r.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){r.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){r()});a.dispatch=V;a.discretebar=c;a.legend=h;a.xAxis=f;a.yAxis=n;a.tooltip=r;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return z},set:function(a){z=
a}},showLegend:{get:function(){return G},set:function(a){G=a}},staggerLabels:{get:function(){return B},set:function(a){B=a}},rotateLabels:{get:function(){return K},set:function(a){K=a}},wrapLabels:{get:function(){return O},set:function(a){O=!!a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return D},set:function(a){D=a}},noData:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return v},set:function(a){void 0!==a.top&&(k=v.top=a.top);v.right=
void 0!==a.right?a.right:v.right;v.bottom=void 0!==a.bottom?a.bottom:v.bottom;v.left=void 0!==a.left?a.left:v.left}},duration:{get:function(){return R},set:function(a){R=a;I.reset(R);c.duration(R);f.duration(R);n.duration(R)}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a);c.color(F);h.color(F)}},rightAlignYAxis:{get:function(){return J},set:function(a){J=a;n.orient(a?"right":"left")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.distribution=function(){function a(f){G.reset();
f.each(function(a){var f="x"==h?"y":"x",w=d3.select(this);e.utils.initSVG(w);F=F||k;a=w.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");w=a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");a=w.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return v(a,c)});w=a.selectAll("line.nv-dist"+
h).data(function(a){return a.values});w.enter().append("line").attr(h+"1",function(a,c){return F(r(a,c))}).attr(h+"2",function(a,c){return F(r(a,c))});G.transition(a.exit().selectAll("line.nv-dist"+h),"dist exit").attr(h+"1",function(a,c){return k(r(a,c))}).attr(h+"2",function(a,c){return k(r(a,c))}).style("stroke-opacity",0).remove();w.attr("class",function(a,c){return"nv-dist"+h+" nv-dist"+h+"-"+c}).attr(f+"1",0).attr(f+"2",n);G.transition(w,"dist").attr(h+"1",function(a,c){return k(r(a,c))}).attr(h+
"2",function(a,c){return k(r(a,c))});F=k.copy()});G.renderEnd("distribution immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=400,n=8,h="x",r=function(a){return a[h]},v=e.utils.defaultColor(),k=d3.scale.linear(),w=250,z=d3.dispatch("renderEnd"),F,G=e.utils.renderWatch(z,w);a.options=e.utils.optionsFunc.bind(a);a.dispatch=z;a.margin=function(e){if(!arguments.length)return c;c.top="undefined"!=typeof e.top?e.top:c.top;c.right="undefined"!=typeof e.right?e.right:c.right;c.bottom="undefined"!=
typeof e.bottom?e.bottom:c.bottom;c.left="undefined"!=typeof e.left?e.left:c.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.axis=function(c){if(!arguments.length)return h;h=c;return a};a.size=function(c){if(!arguments.length)return n;n=c;return a};a.getData=function(c){if(!arguments.length)return r;r=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return k;k=c;return a};a.color=function(c){if(!arguments.length)return v;v=e.utils.getColor(c);return a};
a.duration=function(c){if(!arguments.length)return w;w=c;G.reset(w);return a};return a};e.models.focus=function(a){function c(C){M.reset();M.models(a);z&&M.models(f);F&&M.models(n);C.each(function(p){function C(){h.empty()||h.extent(J);l.data([h.empty()?H.domain():J]).each(function(a,c){var e=H(a[0])-H.range()[0],f=E-H(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",H(a[1])).attr("width",0>f?0:f)})}function R(a){J=h.empty()?null:h.extent();var c=
h.empty()?H.domain():h.extent();O.brush({extent:c,brush:h});C();if(a)O.onBrush(c)}var I=d3.select(this);e.utils.initSVG(I);var E=e.utils.availableWidth(k,I,r),u=w-r.top-r.bottom;c.update=function(){0===B?I.call(c):I.transition().duration(B).call(c)};c.container=this;H=a.xScale();D=a.yScale();var N=I.selectAll("g.nv-focus").data([p]),Q=N.enter().append("g").attr("class","nvd3 nv-focus").append("g"),A=N.select("g");N.attr("transform","translate("+r.left+","+r.top+")");Q.append("g").attr("class","nv-background").append("rect");
Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis");Q.append("g").attr("class","nv-contentWrap");Q.append("g").attr("class","nv-brushBackground");Q.append("g").attr("class","nv-x nv-brush");G&&A.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)");A.select(".nv-background rect").attr("width",E).attr("height",u);a.width(E).height(u).color(p.map(function(a,c){return a.color||v(a,c)}).filter(function(a,c){return!p[c].disabled}));N=A.select(".nv-contentWrap").datum(p.filter(function(a){return!a.disabled}));
d3.transition(N).call(a);h.x(H).on("brush",function(){R(K)});h.on("brushend",function(){if(!K)O.onBrush(h.empty()?H.domain():h.extent())});J&&h.extent(J);var l=A.select(".nv-brushBackground").selectAll("g").data([J||h.extent()]),N=l.enter().append("g");N.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",u);N.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",u);N=A.select(".nv-x.nv-brush").call(h);N.selectAll("rect").attr("height",u);N.selectAll(".resize").append("path").attr("d",
function(a){var c=(a=+("e"==a))?1:-1,e=u/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});R(!0);A.select(".nv-background rect").attr("width",E).attr("height",u);z&&(f.scale(H)._ticks(e.utils.calcTicksX(E/100,p)).tickSize(-u,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),d3.transition(A.select(".nv-x.nv-axis")).call(f));F&&(n.scale(D)._ticks(e.utils.calcTicksY(u/
36,p)).tickSize(-E,0),d3.transition(A.select(".nv-y.nv-axis")).call(n));A.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")")});M.renderEnd("focus immediate");return c}a=a||e.models.line();var f=e.models.axis(),n=e.models.axis(),h=d3.svg.brush(),r={top:10,right:0,bottom:30,left:0},v=e.utils.defaultColor(),k=null,w=70,z=!0,F=!1,G=!1,H,D,J=null,B=250,O=d3.dispatch("brush","onBrush","renderEnd"),K=!0;a.interactive(!1);a.pointActive(function(a){return!1});var M=e.utils.renderWatch(O,
B);c.dispatch=O;c.content=a;c.brush=h;c.xAxis=f;c.yAxis=n;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return w},set:function(a){w=a}},showXAxis:{get:function(){return z},set:function(a){z=a}},showYAxis:{get:function(){return F},set:function(a){F=a}},brushExtent:{get:function(){return J},set:function(a){J=a}},syncBrushing:{get:function(){return K},set:function(a){K=a}},margin:{get:function(){return r},
set:function(a){r.top=void 0!==a.top?a.top:r.top;r.right=void 0!==a.right?a.right:r.right;r.bottom=void 0!==a.bottom?a.bottom:r.bottom;r.left=void 0!==a.left?a.left:r.left}},duration:{get:function(){return B},set:function(c){B=c;M.reset(B);a.duration(B);f.duration(B);n.duration(B)}},color:{get:function(){return v},set:function(c){v=e.utils.getColor(c);a.color(v)}},interpolate:{get:function(){return a.interpolate()},set:function(c){a.interpolate(c)}},xTickFormat:{get:function(){return f.tickFormat()},
set:function(a){f.tickFormat(a)}},yTickFormat:{get:function(){return n.tickFormat()},set:function(a){n.tickFormat(a)}},x:{get:function(){return a.x()},set:function(c){a.x(c)}},y:{get:function(){return a.y()},set:function(c){a.y(c)}},rightAlignYAxis:{get:function(){return G},set:function(a){G=a;n.orient(G?"right":"left")}}});e.utils.inheritOptions(c,a);e.utils.initOptions(c);return c};e.models.forceDirectedGraph=function(){function a(p){C.reset();p.each(function(p){h=d3.select(this);e.utils.initSVG(h);
var r=e.utils.availableWidth(f,h,c),w=e.utils.availableHeight(n,h,c);h.attr("width",r).attr("height",w);if(p&&p.links&&p.nodes)h.selectAll(".nv-noData").remove();else return e.utils.noData(a,h),a;h.selectAll("*").remove();var C=new Set;p.nodes.forEach(function(a){Object.keys(a).forEach(function(a){C.add(a)})});var r=d3.layout.force().nodes(p.nodes).links(p.links).size([r,w]).linkStrength(z).friction(F).linkDistance(G).charge(H).gravity(D).theta(J).alpha(B).start(),u=h.selectAll(".link").data(p.links).enter().append("line").attr("class",
"nv-force-link").style("stroke-width",function(a){return Math.sqrt(a.value)}),N=h.selectAll(".node").data(p.nodes).enter().append("g").attr("class","nv-force-node").call(r.drag);N.append("circle").attr("r",O).style("fill",function(a){return v(a)}).on("mouseover",function(a){h.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.py);h.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.px);var c=v(a);a.series=[];C.forEach(function(e){a.series.push({color:c,
key:e,value:a[e]})});k.data(a).hidden(!1)}).on("mouseout",function(a){k.hidden(!0)});k.headerFormatter(function(a){return"Node"});M(u);K(N);r.on("tick",function(){u.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y});N.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"})})});return a}var c={top:2,right:0,bottom:2,left:0},f=400,n=32,h=null,r=d3.dispatch("renderEnd"),v=e.utils.getColor(["#000"]),
k=e.models.tooltip(),w=null,z=.1,F=.9,G=30,H=-120,D=.1,J=.8,B=.1,O=5,K=function(a){},M=function(a){},C=e.utils.renderWatch(r);a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},linkStrength:{get:function(){return z},set:function(a){z=a}},friction:{get:function(){return F},set:function(a){F=a}},linkDist:{get:function(){return G},set:function(a){G=a}},charge:{get:function(){return H},
set:function(a){H=a}},gravity:{get:function(){return D},set:function(a){D=a}},theta:{get:function(){return J},set:function(a){J=a}},alpha:{get:function(){return B},set:function(a){B=a}},radius:{get:function(){return O},set:function(a){O=a}},x:{get:function(){return getX},set:function(a){getX=d3.functor(a)}},y:{get:function(){return getY},set:function(a){getY=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}},noData:{get:function(){return w},set:function(a){w=a}},nodeExtras:{get:function(){return K},set:function(a){K=a}},linkExtras:{get:function(){return M},set:function(a){M=a}}});a.dispatch=r;a.tooltip=k;e.utils.initOptions(a);return a};e.models.furiousLegend=function(){function a(O){function K(a,c){if("furious"!=B)return"#000";if(D)return a.disengaged?v(a,
c):"#fff";if(!D)return a.disabled?v(a,c):"#fff"}function M(a,c){return D&&"furious"==B?a.disengaged?"#fff":v(a,c):a.disabled?"#fff":v(a,c)}O.each(function(a){var p=f-c.left-c.right,C=d3.select(this);e.utils.initSVG(C);C=C.selectAll("g.nv-legend").data([a]);C.enter().append("g").attr("class","nvd3 nv-legend").append("g");a=C.select("g");C.attr("transform","translate("+c.left+","+c.top+")");var R=a.selectAll(".nv-series").data(function(a){return"furious"!=B?a:a.filter(function(a){return D?!0:!a.disengaged})}),
C=R.enter().append("g").attr("class","nv-series");if("classic"==B){C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var I=R.select("circle")}else"furious"==B&&(C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),I=R.select("rect"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),R.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",K(a,c))}));C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var E=R.select("text.nv-legend-text");R.on("mouseover",function(a,c){J.legendMouseover(a,c)}).on("mouseout",function(a,c){J.legendMouseout(a,c)}).on("click",function(a,c){J.legendClick(a,c);var e=R.data();G&&("classic"==B?H?(e.forEach(function(a){a.disabled=
!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==B&&(D?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):D||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),J.stateChange({disabled:e.map(function(a){return!!a.disabled}),
disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=B||!D)if(J.legendDblclick(a,c),G){var e=R.data();e.forEach(function(a){a.disabled=!0;"furious"==B&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==B&&(a.userDisabled=a.disabled);J.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});R.classed("nv-disabled",function(a){return a.userDisabled});R.exit().remove();E.attr("fill",K).text(function(a){return r(h(a))});switch(B){case "furious":var u=
23;break;case "classic":u=20}if(w){var N=[];R.each(function(a,c){if(r(h(a))&&r(h(a)).length>k){var f=r(h(a)).substring(0,k);f=d3.select(this).select("text").text(f+"...");d3.select(this).append("svg:title").text(r(h(a)))}else f=d3.select(this).select("text");try{var l=f.node().getComputedTextLength();if(0>=l)throw Error();}catch(Ba){l=e.utils.calcApproxTextWidth(f)}N.push(l+z)});for(var Q=0,A=0,C=[];A<p&&Q<N.length;)C[Q]=N[Q],A+=N[Q++];for(0===Q&&(Q=1);A>p&&1<Q;){C=[];Q--;for(A=0;A<N.length;A++)N[A]>
(C[A%Q]||0)&&(C[A%Q]=N[A]);A=C.reduce(function(a,c,e,f){return a+c})}for(var l=[],q=p=0;p<Q;p++)l[p]=q,q+=C[p];R.attr("transform",function(a,c){return"translate("+l[c%Q]+","+(5+Math.floor(c/Q)*u)+")"});F?a.attr("transform","translate("+(f-c.right-A)+","+c.top+")"):a.attr("transform","translate(0,"+c.top+")");n=c.top+c.bottom+Math.ceil(N.length/Q)*u}else{var O=5,ca=5,Y=0,aa;R.attr("transform",function(a,e){var h=d3.select(this).select("text").node().getComputedTextLength()+z;aa=ca;f<c.left+c.right+
aa+h&&(ca=aa=5,O+=u);ca+=h;ca>Y&&(Y=ca);return"translate("+aa+","+O+")"});a.attr("transform","translate("+(f-c.right-Y)+","+c.top+")");n=c.top+c.bottom+O+15}"furious"==B&&I.attr("width",function(a,c){return E[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);I.style("fill",M).style("stroke",function(a,c){return a.color||v(a,c)})});return a}var c={top:5,right:0,bottom:5,left:0},f=400,n=20,h=function(a){return a.key},r=function(a){return a},v=e.utils.getColor(),k=20,w=
!0,z=28,F=!0,G=!0,H=!1,D=!1,J=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),B="classic";a.dispatch=J;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},key:{get:function(){return h},set:function(a){h=a}},keyFormatter:{get:function(){return r},set:function(a){r=a}},align:{get:function(){return w},set:function(a){w=a}},rightAlign:{get:function(){return F},
set:function(a){F=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},padding:{get:function(){return z},set:function(a){z=a}},updateState:{get:function(){return G},set:function(a){G=a}},radioButtonMode:{get:function(){return H},set:function(a){H=a}},expanded:{get:function(){return D},set:function(a){D=a}},vers:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBar=function(){function a(R){R.each(function(a){V.reset();r=d3.select(this);var E=e.utils.availableWidth(f,r,c),u=e.utils.availableHeight(n,r,c);e.utils.initSVG(r);v.domain(B||d3.extent(a[0].values.map(w).concat(F)));H?v.range(K||[.5*E/a[0].values.length,E*(a[0].values.length-.5)/a[0].values.length]):
v.range(K||[0,E]);k.domain(O||d3.extent(a[0].values.map(z).concat(G))).range(M||[u,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var N=r.selectAll("g.nv-wrap.nv-historicalBar-"+h).data([a[0].values]),I=N.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
h),A=I.append("defs"),I=I.append("g"),l=N.select("g");I.append("g").attr("class","nv-bars");N.attr("transform","translate("+c.left+","+c.top+")");r.on("click",function(a,c){C.chartClick({data:a,index:c,pos:d3.event,id:h})});A.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");N.select("#nv-chart-clip-path-"+h+" rect").attr("width",E).attr("height",u);l.attr("clip-path",D?"url(#nv-chart-clip-path-"+h+")":"");u=N.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
c){return w(a,c)});u.exit().remove();u.enter().append("rect").attr("x",0).attr("y",function(a,c){return e.utils.NaNtoZero(k(Math.max(0,z(a,c))))}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.abs(k(z(a,c))-k(0)))}).attr("transform",function(c,e){return"translate("+(v(w(c,e))-E/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){p&&(d3.select(this).classed("hover",!0),C.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){p&&(d3.select(this).classed("hover",
!1),C.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){p&&C.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){p&&(C.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(a,c){p&&(C.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});u.attr("fill",function(a,
c){return J(a,c)}).attr("class",function(a,c,e){return(0>z(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(V,"bars").attr("transform",function(c,e){return"translate("+(v(w(c,e))-E/a[0].values.length*.45)+",0)"}).attr("width",E/a[0].values.length*.9);u.watchTransition(V,"bars").attr("y",function(a,c){var f=0>z(a,c)?k(0):1>k(0)-k(z(a,c))?k(0)-1:k(z(a,c));return e.utils.NaNtoZero(f)}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.max(Math.abs(k(z(a,c))-k(0)),
1))})});V.renderEnd("historicalBar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=null,n=null,h=Math.floor(1E4*Math.random()),r=null,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},F=[],G=[0],H=!1,D=!0,J=e.utils.defaultColor(),B,O,K,M,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),p=!0,V=e.utils.renderWatch(C,0);a.highlightPoint=function(a,c){r.select(".nv-bars .nv-bar-0-"+
a).classed("hover",c)};a.clearHighlights=function(){r.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=C;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},forceX:{get:function(){return F},set:function(a){F=a}},forceY:{get:function(){return G},set:function(a){G=a}},padData:{get:function(){return H},set:function(a){H=a}},x:{get:function(){return w},set:function(a){w=
a}},y:{get:function(){return z},set:function(a){z=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return B},set:function(a){B=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return K},set:function(a){K=a}},yRange:{get:function(){return M},set:function(a){M=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return p},
set:function(a){p=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return J},set:function(a){J=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBarChart=function(a){function c(a){a.each(function(k){u.reset();u.models(f);J&&u.models(n);B&&u.models(h);var A=d3.select(this);e.utils.initSVG(A);
var l=e.utils.availableWidth(G,A,w),q=e.utils.availableHeight(H,A,w);c.update=function(){A.transition().duration(E).call(c)};c.container=this;p.disabled=k.map(function(a){return!!a.disabled});if(!V)for(Q in V={},p)V[Q]=p[Q]instanceof Array?p[Q].slice(0):p[Q];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return e.utils.noData(c,A),c;M=f.xScale();C=f.yScale();var N=A.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]);var Q=N.enter().append("g").attr("class",
"nvd3 nv-wrap nv-historicalBarChart").append("g");var R=N.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis");Q.append("g").attr("class","nv-barsWrap");Q.append("g").attr("class","nv-legendWrap");Q.append("g").attr("class","nv-interactive");D?(r.width(l),R.select(".nv-legendWrap").datum(k).call(r),z||r.height()===w.top||(w.top=r.height(),q=e.utils.availableHeight(H,A,w)),N.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")")):R.select(".nv-legendWrap").selectAll("*").remove();
N.attr("transform","translate("+w.left+","+w.top+")");O&&R.select(".nv-y.nv-axis").attr("transform","translate("+l+",0)");K&&(v.width(l).height(q).margin({left:w.left,top:w.top}).svgContainer(A).xScale(M),N.select(".nv-interactive").call(v));f.width(l).height(q).color(k.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!k[c].disabled}));R.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled})).transition().call(f);J&&(n.scale(M)._ticks(e.utils.calcTicksX(l/100,k)).tickSize(-q,
0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")"),R.select(".nv-x.nv-axis").transition().call(n));B&&(h.scale(C)._ticks(e.utils.calcTicksY(q/36,k)).tickSize(-l,0),R.select(".nv-y.nv-axis").transition().call(h));v.dispatch.on("elementMousemove",function(a){f.clearHighlights();var l,p,q,r=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,k){p=e.interactiveBisect(h.values,a.pointXValue,c.x());f.highlightPoint(p,!0);var n=h.values[p];void 0!==
n&&(void 0===l&&(l=n),void 0===q&&(q=c.xScale()(c.x()(n,p))),r.push({key:h.key,value:c.y()(n,p),color:F(h,h.seriesIndex),data:h.values[p]}))});var u=n.tickFormat()(c.x()(l,p));v.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:u,index:p,series:r})();v.renderGuideLine(q)});v.dispatch.on("elementMouseout",function(a){I.tooltipHide();f.clearHighlights()});r.dispatch.on("legendClick",function(e,f){e.disabled=!e.disabled;k.filter(function(a){return!a.disabled}).length||k.map(function(a){a.disabled=
!1;N.selectAll(".nv-series").classed("disabled",!1);return a});p.disabled=k.map(function(a){return!!a.disabled});I.stateChange(p);a.transition().call(c)});r.dispatch.on("legendDblclick",function(a){k.forEach(function(a){a.disabled=!0});a.disabled=!1;p.disabled=k.map(function(a){return!!a.disabled});I.stateChange(p);c.update()});I.on("changeState",function(a){"undefined"!==typeof a.disabled&&(k.forEach(function(c,e){c.disabled=a.disabled[e]}),p.disabled=a.disabled);c.update()})});u.renderEnd("historicalBarChart immediate");
return c}var f=a||e.models.historicalBar(),n=e.models.axis(),h=e.models.axis(),r=e.models.legend(),v=e.interactiveGuideline(),k=e.models.tooltip(),w={top:30,right:90,bottom:50,left:90},z=null,F=e.utils.defaultColor(),G=null,H=null,D=!1,J=!0,B=!0,O=!1,K=!1,M,C,p={},V=null,R=null,I=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),E=250;n.orient("bottom").tickPadding(7);h.orient(O?"right":"left");k.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,
c){return n.tickFormat()(a,c)});var u=e.utils.renderWatch(I,0);f.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:c.x()(a.data),value:c.y()(a.data),color:a.color};k.data(a).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});f.dispatch.on("elementMousemove.tooltip",function(a){k()});c.dispatch=I;c.bars=f;c.legend=r;c.xAxis=n;c.yAxis=h;c.interactiveLayer=v;c.tooltip=k;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return G},
set:function(a){G=a}},height:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return J},set:function(a){J=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return V},set:function(a){V=a}},noData:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(z=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==
a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a);r.color(F);f.color(F)}},duration:{get:function(){return E},set:function(a){E=a;u.reset(E);h.duration(E);n.duration(E)}},rightAlignYAxis:{get:function(){return O},set:function(a){O=a;h.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return K},set:function(a){K=a;!0===a&&c.interactive(!1)}}});e.utils.inheritOptions(c,f);e.utils.initOptions(c);return c};
e.models.ohlcBarChart=function(){var a=e.models.historicalBarChart(e.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+
a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.candlestickBarChart=function(){var a=e.models.historicalBarChart(e.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+
a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.legend=function(){function a(O){function K(a,c){if("furious"!=B)return"#000";if(D)return a.disengaged?"#000":"#fff";if(!D)return a.color||(a.color=v(a,c)),a.disabled?a.color:"#fff"}function M(a,c){return D&&"furious"==B?a.disengaged?"#eee":a.color||v(a,c):a.color||v(a,c)}function C(a,c){return D&&"furious"==B?1:a.disabled?0:1}O.each(function(a){var p=f-c.left-c.right,
v=d3.select(this);e.utils.initSVG(v);var I=v.selectAll("g.nv-legend").data([a]);a=I.enter().append("g").attr("class","nvd3 nv-legend").append("g");v=I.select("g");F?I.attr("transform","translate("+-c.right+","+c.top+")"):I.attr("transform","translate("+c.left+","+c.top+")");var E=v.selectAll(".nv-series").data(function(a){return"furious"!=B?a:a.filter(function(a){return D?!0:!a.disengaged})}),I=E.enter().append("g").attr("class","nv-series");switch(B){case "furious":var u=23;break;case "classic":u=
20}if("classic"==B){I.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var N=E.select(".nv-legend-symbol")}else"furious"==B&&(I.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),N=E.select(".nv-legend-symbol"),I.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),E.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",K(a,c))}));I.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var Q=E.select("text.nv-legend-text");E.on("mouseover",function(a,c){J.legendMouseover(a,c)}).on("mouseout",function(a,c){J.legendMouseout(a,c)}).on("click",function(a,c){J.legendClick(a,c);var e=E.data();G&&("classic"==B?H?(e.forEach(function(a){a.disabled=
!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==B&&(D?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):D||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),J.stateChange({disabled:e.map(function(a){return!!a.disabled}),
disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=B||!D)if(J.legendDblclick(a,c),G){var e=E.data();e.forEach(function(a){a.disabled=!0;"furious"==B&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==B&&(a.userDisabled=a.disabled);J.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});E.classed("nv-disabled",function(a){return a.userDisabled});E.exit().remove();Q.attr("fill",K).text(function(a){return r(h(a))});var A=0;if(w){var l=
[];E.each(function(a,c){if(r(h(a))&&r(h(a)).length>k){var f=r(h(a)).substring(0,k);f=d3.select(this).select("text").text(f+"...");d3.select(this).append("svg:title").text(r(h(a)))}else f=d3.select(this).select("text");try{var p=f.node().getComputedTextLength();if(0>=p)throw Error();}catch(ka){p=e.utils.calcApproxTextWidth(f)}l.push(p+z)});for(var q=0,I=[],A=0;A<p&&q<l.length;)I[q]=l[q],A+=l[q++];for(0===q&&(q=1);A>p&&1<q;){I=[];q--;for(var O=0;O<l.length;O++)l[O]>(I[O%q]||0)&&(I[O%q]=l[O]);A=I.reduce(function(a,
c,e,f){return a+c})}for(var ca=[],O=p=0;p<q;p++)ca[p]=O,O+=I[p];E.attr("transform",function(a,c){return"translate("+ca[c%q]+","+(5+Math.floor(c/q)*u)+")"});F?v.attr("transform","translate("+(f-c.right-A)+","+c.top+")"):v.attr("transform","translate(0,"+c.top+")");n=c.top+c.bottom+Math.ceil(l.length/q)*u}else{var Y=5,aa=5,x=0,U;E.attr("transform",function(a,e){var h=d3.select(this).select("text").node().getComputedTextLength()+z;U=aa;f<c.left+c.right+U+h&&(aa=U=5,Y+=u);aa+=h;aa>x&&(x=aa);A<U+x&&(A=
U+x);return"translate("+U+","+Y+")"});v.attr("transform","translate("+(f-c.right-x)+","+c.top+")");n=c.top+c.bottom+Y+15}"furious"==B&&(N.attr("width",function(a,c){return Q[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),v.select(".nv-legend-bg").transition().duration(300).attr("x",-u).attr("width",A+u-12).attr("height",n+10).attr("y",-c.top-10).attr("opacity",D?1:0));
N.style("fill",M).style("fill-opacity",C).style("stroke",M)});return a}var c={top:5,right:0,bottom:5,left:0},f=400,n=20,h=function(a){return a.key},r=function(a){return a},v=e.utils.getColor(),k=20,w=!0,z=32,F=!0,G=!0,H=!1,D=!1,J=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),B="classic";a.dispatch=J;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},
set:function(a){n=a}},key:{get:function(){return h},set:function(a){h=a}},keyFormatter:{get:function(){return r},set:function(a){r=a}},align:{get:function(){return w},set:function(a){w=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},rightAlign:{get:function(){return F},set:function(a){F=a}},padding:{get:function(){return z},set:function(a){z=a}},updateState:{get:function(){return G},set:function(a){G=a}},radioButtonMode:{get:function(){return H},set:function(a){H=a}},expanded:{get:function(){return D},
set:function(a){D=a}},vers:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.line=function(){function a(p){C.reset();C.models(c);p.each(function(a){r=d3.select(this);var p=e.utils.availableWidth(n,
r,f),I=e.utils.availableHeight(h,r,f);e.utils.initSVG(r);H=c.xScale();D=c.yScale();K=K||H;M=M||D;a=r.selectAll("g.nv-wrap.nv-line").data([a]);var E=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),u=E.append("defs"),N=E.append("g"),E=a.select("g");N.append("g").attr("class","nv-groups");N.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+f.left+","+f.top+")");c.width(p).height(I);N=a.select(".nv-scatterWrap");N.call(c);u.append("clipPath").attr("id","nv-edge-clip-"+
c.id()).append("rect");a.select("#nv-edge-clip-"+c.id()+" rect").attr("width",p).attr("height",0<I?I:0);E.attr("clip-path",G?"url(#nv-edge-clip-"+c.id()+")":"");N.attr("clip-path",G?"url(#nv-edge-clip-"+c.id()+")":"");p=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});p.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);p.exit().remove();p.attr("class",function(a,
c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return v(a,c)}).style("stroke",function(a,c){return v(a,c)});p.watchTransition(C,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});I=p.selectAll("path.nv-area").data(function(a){return F(a)?[a]:[]});I.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(J).defined(z).x(function(a,
c){return e.utils.NaNtoZero(K(k(a,c)))}).y0(function(a,c){return e.utils.NaNtoZero(M(w(a,c)))}).y1(function(a,c){return M(0>=D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});p.exit().selectAll("path.nv-area").remove();I.watchTransition(C,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(J).defined(z).x(function(a,c){return e.utils.NaNtoZero(H(k(a,c)))}).y0(function(a,c){return e.utils.NaNtoZero(D(w(a,c)))}).y1(function(a,c){return D(0>=
D.domain()[0]?0<=D.domain()[1]?0:D.domain()[1]:D.domain()[0])}).apply(this,[a.values])});p=p.selectAll("path.nv-line").data(function(a){return[a.values]});p.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(J).defined(z).x(function(a,c){return e.utils.NaNtoZero(K(k(a,c)))}).y(function(a,c){return e.utils.NaNtoZero(M(w(a,c)))}));p.watchTransition(C,"line: linePaths").attr("d",d3.svg.line().interpolate(J).defined(z).x(function(a,c){return e.utils.NaNtoZero(H(k(a,c)))}).y(function(a,
c){return e.utils.NaNtoZero(D(w(a,c)))}));K=H.copy();M=D.copy()});C.renderEnd("line immediate");return a}var c=e.models.scatter(),f={top:0,right:0,bottom:0,left:0},n=960,h=500,r=null,v=e.utils.defaultColor(),k=function(a){return a.x},w=function(a){return a.y},z=function(a,c){return!isNaN(w(a,c))&&null!==w(a,c)},F=function(a){return a.area},G=!1,H,D,J="linear",B=250,O=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");c.pointSize(16).pointDomain([16,256]);var K,M,C=e.utils.renderWatch(O,
B);a.dispatch=O;a.scatter=c;c.dispatch.on("elementClick",function(){O.elementClick.apply(this,arguments)});c.dispatch.on("elementMouseover",function(){O.elementMouseover.apply(this,arguments)});c.dispatch.on("elementMouseout",function(){O.elementMouseout.apply(this,arguments)});a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return h},set:function(a){h=a}},defined:{get:function(){return z},set:function(a){z=
a}},interpolate:{get:function(){return J},set:function(a){J=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},duration:{get:function(){return B},set:function(a){B=a;C.reset(B);c.duration(B)}},isArea:{get:function(){return F},set:function(a){F=d3.functor(a)}},x:{get:function(){return k},
set:function(a){k=a;c.x(a)}},y:{get:function(){return w},set:function(a){w=a;c.y(a)}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a);c.color(v)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineChart=function(){function a(q){Q.reset();Q.models(c);B&&Q.models(f);O&&Q.models(n);q.each(function(q){function v(){B&&W.select(".nv-focus .nv-x.nv-axis").transition().duration(N).call(f)}function E(){O&&W.select(".nv-focus .nv-y.nv-axis").transition().duration(N).call(n)}
function aa(a){W.select(".nv-focus .nv-linesWrap").datum(q.filter(function(a){return!a.disabled}).map(function(e,f){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,f){return c.x()(e,f)>=a[0]&&c.x()(e,f)<=a[1]}),disableTooltip:e.disableTooltip}})).transition().duration(N).call(c);v();E()}var x=d3.select(this);e.utils.initSVG(x);var U=e.utils.availableWidth(G,x,w),X=e.utils.availableHeight(H,x,w)-(V?k.height():0);a.update=function(){0===N?x.call(a):x.transition().duration(N).call(a)};
a.container=this;R.setter(l(q),a.update).getter(A(q)).update();R.disabled=q.map(function(a){return!!a.disabled});if(!I)for(Q in I={},R)I[Q]=R[Q]instanceof Array?R[Q].slice(0):R[Q];if(q&&q.length&&q.filter(function(a){return a.values.length}).length)x.selectAll(".nv-noData").remove();else return e.utils.noData(a,x),a;k.dispatch.on("onBrush",function(a){aa(a)});C=c.xScale();p=c.yScale();var Q=x.selectAll("g.nv-wrap.nv-lineChart").data([q]);var Ba=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),
W=Q.select("g");Ba.append("g").attr("class","nv-legendWrap");var Z=Ba.append("g").attr("class","nv-focus");Z.append("g").attr("class","nv-background").append("rect");Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-linesWrap");Z.append("g").attr("class","nv-interactive");Ba.append("g").attr("class","nv-focusWrap");D?(h.width(U),W.select(".nv-legendWrap").datum(q).call(h),"bottom"===J?Q.select(".nv-legendWrap").attr("transform","translate(0,"+
X+")"):"top"===J&&(z||h.height()===w.top||(w.top=h.height(),X=e.utils.availableHeight(H,x,w)-(V?k.height():0)),Q.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")"))):W.select(".nv-legendWrap").selectAll("*").remove();Q.attr("transform","translate("+w.left+","+w.top+")");K&&W.select(".nv-y.nv-axis").attr("transform","translate("+U+",0)");M&&(r.width(U).height(X).margin({left:w.left,top:w.top}).svgContainer(x).xScale(C),Q.select(".nv-interactive").call(r));W.select(".nv-focus .nv-background rect").attr("width",
U).attr("height",X);c.width(U).height(X).color(q.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!q[c].disabled}));Q=W.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled}));B&&f.scale(C)._ticks(e.utils.calcTicksX(U/100,q)).tickSize(-X,0);O&&n.scale(p)._ticks(e.utils.calcTicksY(X/36,q)).tickSize(-U,0);W.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+X+")");V?(k.width(U),W.select(".nv-focusWrap").attr("transform","translate(0,"+(X+w.bottom+
k.margin().top)+")").datum(q.filter(function(a){return!a.disabled})).call(k),U=k.brush.empty()?k.xDomain():k.brush.extent(),null!==U&&aa(U)):(Q.call(c),v(),E());h.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];u.stateChange(R);a.update()});r.dispatch.on("elementMousemove",function(f){c.clearHighlights();var h,l,p,x=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled&&!a.disableTooltip}).forEach(function(q,n){var r=V?k.brush.empty()?k.xScale().domain():k.brush.extent():C.domain(),
u=q.values.filter(function(a,e){return r[0]<=r[1]?c.x()(a,e)>=r[0]&&c.x()(a,e)<=r[1]:c.x()(a,e)>=r[1]&&c.x()(a,e)<=r[0]});l=e.interactiveBisect(u,f.pointXValue,c.x());var u=u[l],v=a.y()(u,l);null!==v&&c.highlightPoint(n,l,!0);void 0!==u&&(void 0===h&&(h=u),void 0===p&&(p=a.xScale()(a.x()(u,l))),x.push({key:q.key,value:v,color:F(q,q.seriesIndex),data:u}))});if(2<x.length){var u=a.yScale().invert(f.mouseY),v=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),u=e.nearestValueIndex(x.map(function(a){return a.value}),
u,v);null!==u&&(x[u].highlight=!0)}u=function(a,c){return null==a?"N/A":n.tickFormat()(a)};r.tooltip.valueFormatter(r.tooltip.valueFormatter()||u).data({value:a.x()(h,l),index:l,series:x})();r.renderGuideLine(p)});r.dispatch.on("elementClick",function(f){var h,l=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(c){var k=e.interactiveBisect(c.values,f.pointXValue,a.x()),q=c.values[k];if("undefined"!==typeof q){"undefined"===typeof h&&(h=a.xScale()(a.x()(q,k)));var p=a.yScale()(a.y()(q,
k));l.push({point:q,pointIndex:k,pos:[h,p],seriesIndex:c.seriesIndex,series:c})}});c.dispatch.elementClick(l)});r.dispatch.on("elementMouseout",function(a){c.clearHighlights()});u.on("changeState",function(c){"undefined"!==typeof c.disabled&&q.length===c.disabled.length&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);a.update()})});Q.renderEnd("lineChart immediate");return a}var c=e.models.line(),f=e.models.axis(),n=e.models.axis(),h=e.models.legend(),r=e.interactiveGuideline(),
v=e.models.tooltip(),k=e.models.focus(e.models.line()),w={top:30,right:20,bottom:50,left:60},z=null,F=e.utils.defaultColor(),G=null,H=null,D=!0,J="top",B=!0,O=!0,K=!1,M=!1,C,p,V=!1,R=e.utils.state(),I=null,E=null,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),N=250;f.orient("bottom").tickPadding(7);n.orient(K?"right":"left");c.clipEdge(!0).duration(0);v.valueFormatter(function(a,c){return n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,
c)});r.tooltip.valueFormatter(function(a,c){return n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});var Q=e.utils.renderWatch(u,N),A=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},l=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(a){a.series.disableTooltip||v.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});
a.dispatch=u;a.lines=c;a.legend=h;a.focus=k;a.xAxis=f;a.x2Axis=k.xAxis;a.yAxis=n;a.y2Axis=k.yAxis;a.interactiveLayer=r;a.tooltip=v;a.state=R;a.dispatch=u;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return G},set:function(a){G=a}},height:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return D},set:function(a){D=a}},legendPosition:{get:function(){return J},set:function(a){J=a}},showXAxis:{get:function(){return B},set:function(a){B=
a}},showYAxis:{get:function(){return O},set:function(a){O=a}},defaultState:{get:function(){return I},set:function(a){I=a}},noData:{get:function(){return E},set:function(a){E=a}},focusEnable:{get:function(){return V},set:function(a){V=a}},focusHeight:{get:function(){return k.height()},set:function(a){k.height(a)}},focusShowAxisX:{get:function(){return k.showXAxis()},set:function(a){k.showXAxis(a)}},focusShowAxisY:{get:function(){return k.showYAxis()},set:function(a){k.showYAxis(a)}},brushExtent:{get:function(){return k.brushExtent()},
set:function(a){k.brushExtent(a)}},focusMargin:{get:function(){return k.margin},set:function(a){void 0!==a.top&&(z=w.top=a.top);k.margin.right=void 0!==a.right?a.right:k.margin.right;k.margin.bottom=void 0!==a.bottom?a.bottom:k.margin.bottom;k.margin.left=void 0!==a.left?a.left:k.margin.left}},margin:{get:function(){return w},set:function(a){w.top=void 0!==a.top?a.top:w.top;w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},
duration:{get:function(){return N},set:function(a){N=a;Q.reset(N);c.duration(N);k.duration(N);f.duration(N);n.duration(N)}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a);h.color(F);c.color(F);k.color(F)}},interpolate:{get:function(){return c.interpolate()},set:function(a){c.interpolate(a);k.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a);k.xTickFormat(a)}},yTickFormat:{get:function(){return n.tickFormat()},set:function(a){n.tickFormat(a);
k.yTickFormat(a)}},x:{get:function(){return c.x()},set:function(a){c.x(a);k.x(a)}},y:{get:function(){return c.y()},set:function(a){c.y(a);k.y(a)}},rightAlignYAxis:{get:function(){return K},set:function(a){K=a;n.orient(K?"right":"left")}},useInteractiveGuideline:{get:function(){return M},set:function(a){if(M=a)c.interactive(!1),c.useVoronoi(!1)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineWithFocusChart=function(){return e.models.lineChart().margin({bottom:30}).focusEnable(!0)};
e.models.linePlusBarChart=function(){function a(x){x.each(function(x){function D(){H.empty()||H.extent(A);Fa.data([H.empty()?q.domain():A]).each(function(a,c){var e=q(a[0])-q.range()[0],f=q.range()[1]-q(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",q(a[1])).attr("width",0>f?0:f)})}function da(){A=H.empty()?null:H.extent();Q=H.empty()?q.domain():H.extent();U.brush({extent:Q,brush:H});D();n.width(ra).height(fa).color(x.map(function(a,c){return a.color||
V(a,c)}).filter(function(a,c){return!x[c].disabled&&x[c].bar}));c.width(ra).height(fa).color(x.map(function(a,c){return a.color||V(a,c)}).filter(function(a,c){return!x[c].disabled&&!x[c].bar}));var a=ea.select(".nv-focus .nv-barsWrap").datum(ma.length?ma.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return n.x()(a,c)>=Q[0]&&n.x()(a,c)<=Q[1]})}}):[{values:[]}]),f=ea.select(".nv-focus .nv-linesWrap").datum(ga(Ga)?[{values:[]}]:Ga.filter(function(a){return!a.disabled}).map(function(a,
e){return{area:a.area,fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,key:a.key,values:a.values.filter(function(a,e){return c.x()(a,e)>=Q[0]&&c.x()(a,e)<=Q[1]})}}));l=ma.length&&!la?n.xScale():c.xScale();r.scale(l)._ticks(e.utils.calcTicksX(ra/100,x)).tickSize(-fa,0);r.domain([Math.ceil(Q[0]),Math.floor(Q[1])]);ea.select(".nv-x.nv-axis").transition().duration(X).call(r);a.transition().duration(X).call(n);f.transition().duration(X).call(c);ea.select(".nv-focus .nv-x.nv-axis").attr("transform",
"translate(0,"+Z.range()[0]+")");k.scale(Z)._ticks(e.utils.calcTicksY(fa/36,x)).tickSize(-ra,0);w.scale(ca)._ticks(e.utils.calcTicksY(fa/36,x));la?w.tickSize(Ga.length?0:-ra,0):w.tickSize(ma.length?0:-ra,0);var f=ma.length?1:0,h=Ga.length&&!ga(Ga)?1:0,a=la?h:f,f=la?f:h;ea.select(".nv-focus .nv-y1.nv-axis").style("opacity",a);ea.select(".nv-focus .nv-y2.nv-axis").style("opacity",f).attr("transform","translate("+l.range()[1]+",0)");ea.select(".nv-focus .nv-y1.nv-axis").transition().duration(X).call(k);
ea.select(".nv-focus .nv-y2.nv-axis").transition().duration(X).call(w)}var ta=d3.select(this);e.utils.initSVG(ta);var ra=e.utils.availableWidth(K,ta,J),fa=e.utils.availableHeight(M,ta,J)-(I?N:0),sa=N-O.top-O.bottom;a.update=function(){ta.transition().duration(X).call(a)};a.container=this;oa.setter(xa(x),a.update).getter(wa(x)).update();oa.disabled=x.map(function(a){return!!a.disabled});if(!Ba)for(na in Ba={},oa)Ba[na]=oa[na]instanceof Array?oa[na].slice(0):oa[na];if(x&&x.length&&x.filter(function(a){return a.values.length}).length)ta.selectAll(".nv-noData").remove();
else return e.utils.noData(a,ta),a;var ma=x.filter(function(a){return!a.disabled&&a.bar}),Ga=x.filter(function(a){return!a.bar});l=ma.length&&!la?n.xScale():c.xScale();q=v.scale();Z=la?c.yScale():n.yScale();ca=la?n.yScale():c.yScale();Y=la?f.yScale():h.yScale();aa=la?h.yScale():f.yScale();var na=x.filter(function(a){return!a.disabled&&(la?!a.bar:a.bar)}).map(function(a){return a.values.map(function(a,c){return{x:C(a,c),y:p(a,c)}})});var za=x.filter(function(a){return!a.disabled&&(la?a.bar:!a.bar)}).map(function(a){return a.values.map(function(a,
c){return{x:C(a,c),y:p(a,c)}})});l.range([0,ra]);q.domain(d3.extent(d3.merge(na.concat(za)),function(a){return a.x})).range([0,ra]);na=ta.selectAll("g.nv-wrap.nv-linePlusBar").data([x]);var za=na.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ea=na.select("g");za.append("g").attr("class","nv-legendWrap");var Ea=za.append("g").attr("class","nv-focus");Ea.append("g").attr("class","nv-x nv-axis");Ea.append("g").attr("class","nv-y1 nv-axis");Ea.append("g").attr("class","nv-y2 nv-axis");
Ea.append("g").attr("class","nv-barsWrap");Ea.append("g").attr("class","nv-linesWrap");za=za.append("g").attr("class","nv-context");za.append("g").attr("class","nv-x nv-axis");za.append("g").attr("class","nv-y1 nv-axis");za.append("g").attr("class","nv-y2 nv-axis");za.append("g").attr("class","nv-barsWrap");za.append("g").attr("class","nv-linesWrap");za.append("g").attr("class","nv-brushBackground");za.append("g").attr("class","nv-x nv-brush");R?(za=G.align()?ra/2:ra,Ea=G.align()?za:0,G.width(za),
ea.select(".nv-legendWrap").datum(x.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=la?a.originalKey+(a.bar?ka:W):a.originalKey+(a.bar?W:ka);return a})).call(G),B||G.height()===J.top||(J.top=G.height(),fa=e.utils.availableHeight(M,ta,J)-N),ea.select(".nv-legendWrap").attr("transform","translate("+Ea+","+-J.top+")")):ea.select(".nv-legendWrap").selectAll("*").remove();na.attr("transform","translate("+J.left+","+J.top+")");ea.select(".nv-context").style("display",I?"initial":
"none");h.width(ra).height(sa).color(x.map(function(a,c){return a.color||V(a,c)}).filter(function(a,c){return!x[c].disabled&&x[c].bar}));f.width(ra).height(sa).color(x.map(function(a,c){return a.color||V(a,c)}).filter(function(a,c){return!x[c].disabled&&!x[c].bar}));na=ea.select(".nv-context .nv-barsWrap").datum(ma.length?ma:[{values:[]}]);za=ea.select(".nv-context .nv-linesWrap").datum(ga(Ga)?[{values:[]}]:Ga.filter(function(a){return!a.disabled}));ea.select(".nv-context").attr("transform","translate(0,"+
(fa+J.bottom+O.top)+")");na.transition().call(h);za.transition().call(f);u&&(v._ticks(e.utils.calcTicksX(ra/100,x)).tickSize(-sa,0),ea.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Y.range()[0]+")"),ea.select(".nv-context .nv-x.nv-axis").transition().call(v));E&&(z.scale(Y)._ticks(sa/36).tickSize(-ra,0),F.scale(aa)._ticks(sa/36).tickSize(ma.length?0:-ra,0),ea.select(".nv-context .nv-y3.nv-axis").style("opacity",ma.length?1:0).attr("transform","translate(0,"+q.range()[0]+")"),
ea.select(".nv-context .nv-y2.nv-axis").style("opacity",Ga.length?1:0).attr("transform","translate("+q.range()[1]+",0)"),ea.select(".nv-context .nv-y1.nv-axis").transition().call(z),ea.select(".nv-context .nv-y2.nv-axis").transition().call(F));H.x(q).on("brush",da);A&&H.extent(A);var Fa=ea.select(".nv-brushBackground").selectAll("g").data([A||H.extent()]);na=Fa.enter().append("g");na.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",sa);na.append("rect").attr("class","right").attr("x",
0).attr("y",0).attr("height",sa);na=ea.select(".nv-x.nv-brush").call(H);na.selectAll("rect").attr("height",sa);na.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=sa/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});G.dispatch.on("stateChange",function(c){for(var e in c)oa[e]=c[e];U.stateChange(oa);a.update()});U.on("changeState",function(c){"undefined"!==
typeof c.disabled&&(x.forEach(function(a,e){a.disabled=c.disabled[e]}),oa.disabled=c.disabled);a.update()});da()});return a}var c=e.models.line(),f=e.models.line(),n=e.models.historicalBar(),h=e.models.historicalBar(),r=e.models.axis(),v=e.models.axis(),k=e.models.axis(),w=e.models.axis(),z=e.models.axis(),F=e.models.axis(),G=e.models.legend(),H=d3.svg.brush(),D=e.models.tooltip(),J={top:30,right:30,bottom:30,left:60},B=null,O={top:0,right:30,bottom:20,left:60},K=null,M=null,C=function(a){return a.x},
p=function(a){return a.y},V=e.utils.defaultColor(),R=!0,I=!0,E=!1,u=!0,N=50,Q,A=null,l,q,Z,ca,Y,aa,x=null,U=d3.dispatch("brush","stateChange","changeState"),X=0,oa=e.utils.state(),Ba=null,W=" (left axis)",ka=" (right axis)",la=!1;c.clipEdge(!0);f.interactive(!1);f.pointActive(function(a){return!1});r.orient("bottom").tickPadding(5);k.orient("left");w.orient("right");v.orient("bottom").tickPadding(5);z.orient("left");F.orient("right");D.headerEnabled(!0).headerFormatter(function(a,c){return r.tickFormat()(a,
c)});var wa=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},xa=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},ga=function(a){return a.every(function(a){return a.disabled})};c.dispatch.on("elementMouseover.tooltip",function(a){D.duration(100).valueFormatter(function(a,c){return(la?{main:k,focus:z}:{main:w,focus:F}).main.tickFormat()(a,c)}).data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){D.hidden(!0)});
n.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};D.duration(0).valueFormatter(function(a,c){return(la?{main:w,focus:F}:{main:k,focus:z}).main.tickFormat()(a,c)}).data(c).hidden(!1)});n.dispatch.on("elementMouseout.tooltip",function(a){D.hidden(!0)});n.dispatch.on("elementMousemove.tooltip",function(a){D()});a.dispatch=U;a.legend=G;a.lines=c;a.lines2=f;a.bars=n;a.bars2=h;a.xAxis=r;a.x2Axis=v;a.y1Axis=k;a.y2Axis=w;a.y3Axis=z;a.y4Axis=
F;a.tooltip=D;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return K},set:function(a){K=a}},height:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return R},set:function(a){R=a}},brushExtent:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return x},set:function(a){x=a}},focusEnable:{get:function(){return I},set:function(a){I=a}},focusHeight:{get:function(){return N},set:function(a){N=a}},focusShowAxisX:{get:function(){return u},
set:function(a){u=a}},focusShowAxisY:{get:function(){return E},set:function(a){E=a}},legendLeftAxisHint:{get:function(){return W},set:function(a){W=a}},legendRightAxisHint:{get:function(){return ka},set:function(a){ka=a}},margin:{get:function(){return J},set:function(a){void 0!==a.top&&(B=J.top=a.top);J.right=void 0!==a.right?a.right:J.right;J.bottom=void 0!==a.bottom?a.bottom:J.bottom;J.left=void 0!==a.left?a.left:J.left}},focusMargin:{get:function(){return O},set:function(a){O.top=void 0!==a.top?
a.top:O.top;O.right=void 0!==a.right?a.right:O.right;O.bottom=void 0!==a.bottom?a.bottom:O.bottom;O.left=void 0!==a.left?a.left:O.left}},duration:{get:function(){return X},set:function(a){X=a}},color:{get:function(){return V},set:function(a){V=e.utils.getColor(a);G.color(V)}},x:{get:function(){return C},set:function(a){C=a;c.x(a);f.x(a);n.x(a);h.x(a)}},y:{get:function(){return p},set:function(a){p=a;c.y(a);f.y(a);n.y(a);h.y(a)}},switchYAxisOrder:{get:function(){return la},set:function(a){if(la!==
a){var c=k;k=w;w=c;c=z;z=F;F=c}la=a;k.orient("left");w.orient("right");z.orient("left");F.orient("right")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiBar=function(){function a(l){Q.reset();l.each(function(a){var l=f-c.left-c.right,q=n-c.top-c.bottom;k=d3.select(this);e.utils.initSVG(k);var Y=0;B&&a.length&&(B=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(H){var aa=d3.layout.stack().offset(D).values(function(a){return a.values}).y(z)(!a.length&&
B?B:a);aa.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=Y++,aa[e]=a[e]):0<e&&aa[e-1].nonStackable&&aa[e].values.map(function(a,c){a.y0-=aa[e-1].values[c].y;a.y1=a.y0+a.y})});a=aa}a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});H&&0<a.length&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(c,l){if(!a[l].nonStackable){var k=c.values[e];k.size=Math.abs(k.y);0>k.y?(k.y1=h,h-=k.size):(k.y1=k.size+f,f+=k.size)}})});var x=C&&p?[]:a.map(function(a,
c){return a.values.map(function(a,e){return{x:w(a,e),y:z(a,e),y0:a.y0,y1:a.y1,idx:c}})});h.domain(C||d3.merge(x).map(function(a){return a.x})).rangeBands(V||[0,l],I);r.domain(p||d3.extent(d3.merge(x).map(function(c){var e=c.y;H&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+c.y);return e}).concat(F))).range(R||[q,0]);h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));r.domain()[0]===r.domain()[1]&&(r.domain()[0]?
r.domain([r.domain()[0]+.01*r.domain()[0],r.domain()[1]-.01*r.domain()[1]]):r.domain([-1,1]));N=N||r;var x=k.selectAll("g.nv-wrap.nv-multibar").data([a]),U=x.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),X=U.append("defs"),U=U.append("g"),oa=x.select("g");U.append("g").attr("class","nv-groups");x.attr("transform","translate("+c.left+","+c.top+")");X.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");x.select("#nv-edge-clip-"+v+" rect").attr("width",l).attr("height",q);oa.attr("clip-path",
G?"url(#nv-edge-clip-"+v+")":"");l=x.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);q=Q.transition(l.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,M)).attr("y",function(c,e,f){e=N(0)||0;H&&a[c.series]&&!a[c.series].nonStackable&&(e=N(c.y0));return e}).attr("height",0).remove();q.delay&&q.delay(function(a,c){return M/(A+1)*c-c});l.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return J(a,c)}).style("stroke",function(a,c){return J(a,c)});l.style("stroke-opacity",1).style("fill-opacity",E);l=l.selectAll("rect.nv-bar").data(function(c){return B&&!a.length?B.values:c.values});l.exit().remove();l.enter().append("rect").attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,f){return H&&!a[f].nonStackable?0:f*h.rangeBand()/a.length}).attr("y",function(c,
e,f){return N(H&&!a[f].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,f){return h.rangeBand()/(H&&!a[f].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+h(w(a,c))+",0)"});l.style("fill",function(a,c,e){return J(a,e,c)}).style("stroke",function(a,c,e){return J(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);u.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);u.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){u.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){u.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){u.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});l.attr("class",function(a,c){return 0>z(a,
c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+h(w(a,c))+",0)"});O&&(K||(K=a.map(function(){return!0})),l.style("fill",function(a,c,e){return d3.rgb(O(a,c)).darker(K.map(function(a,c){return c}).filter(function(a,c){return!K[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(O(a,c)).darker(K.map(function(a,c){return c}).filter(function(a,c){return!K[c]})[e]).toString()}));l=l.watchTransition(Q,"multibar",Math.min(250,M)).delay(function(c,
e){return e*M/a[0].values.length});H?l.attr("y",function(c,e,f){return a[f].nonStackable?0>z(c,e)?r(0):-1>r(0)-r(z(c,e))?r(0)-1:r(z(c,e))||0:r(c.y1)}).attr("height",function(c,e,f){return a[f].nonStackable?Math.max(Math.abs(r(z(c,e))-r(0)),0)||0:Math.max(Math.abs(r(c.y+c.y0)-r(c.y0)),0)}).attr("x",function(c,e,f){e=0;a[f].nonStackable&&(e=c.series*h.rangeBand()/a.length,a.length!==Y&&(e=a[f].nonStackableSeries*h.rangeBand()/(2*Y)));return e}).attr("width",function(c,e,f){return a[f].nonStackable?
(c=h.rangeBand()/Y,a.length!==Y&&(c=h.rangeBand()/(2*Y)),c):h.rangeBand()}):l.attr("x",function(c,e){return c.series*h.rangeBand()/a.length}).attr("width",h.rangeBand()/a.length).attr("y",function(a,c){return 0>z(a,c)?r(0):1>r(0)-r(z(a,c))?r(0)-1:r(z(a,c))||0}).attr("height",function(a,c){return Math.max(Math.abs(r(z(a,c))-r(0)),1)||0});h.copy();N=r.copy();a[0]&&a[0].values&&(A=a[0].values.length)});Q.renderEnd("multibar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,n=500,h=d3.scale.ordinal(),
r=d3.scale.linear(),v=Math.floor(1E4*Math.random()),k=null,w=function(a){return a.x},z=function(a){return a.y},F=[0],G=!0,H=!1,D="zero",J=e.utils.defaultColor(),B=!1,O=null,K,M=500,C,p,V,R,I=.1,E=.75,u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),N,Q=e.utils.renderWatch(u,M),A=0;a.dispatch=u;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},
set:function(a){n=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return z},set:function(a){z=a}},xScale:{get:function(){return h},set:function(a){h=a}},yScale:{get:function(){return r},set:function(a){r=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return p},set:function(a){p=a}},xRange:{get:function(){return V},set:function(a){V=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceY:{get:function(){return F},set:function(a){F=
a}},stacked:{get:function(){return H},set:function(a){H=a}},stackOffset:{get:function(){return D},set:function(a){D=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},disabled:{get:function(){return K},set:function(a){K=a}},id:{get:function(){return v},set:function(a){v=a}},hideable:{get:function(){return B},set:function(a){B=a}},groupSpacing:{get:function(){return I},set:function(a){I=a}},fillOpacity:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return c},set:function(a){c.top=
void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return M},set:function(a){M=a;Q.reset(M)}},color:{get:function(){return J},set:function(a){J=e.utils.getColor(a)}},barColor:{get:function(){return O},set:function(a){O=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarChart=function(){function a(x){Z.reset();Z.models(c);O&&Z.models(f);K&&Z.models(n);
x.each(function(x){var U=d3.select(this);e.utils.initSVG(U);var Q=e.utils.availableWidth(F,U,w),Z=e.utils.availableHeight(G,U,w);a.update=function(){0===l?U.call(a):U.transition().duration(l).call(a)};a.container=this;u.setter(aa(x),a.update).getter(Y(x)).update();u.disabled=x.map(function(a){return!!a.disabled});if(!N)for(W in N={},u)N[W]=u[W]instanceof Array?u[W].slice(0):u[W];if(x&&x.length&&x.filter(function(a){return a.values.length}).length)U.selectAll(".nv-noData").remove();else return e.utils.noData(a,
U),a;I=c.xScale();E=c.yScale();var W=U.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([x]);var ka=W.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),la=W.select("g");ka.append("g").attr("class","nv-x nv-axis");ka.append("g").attr("class","nv-y nv-axis");ka.append("g").attr("class","nv-barsWrap");ka.append("g").attr("class","nv-legendWrap");ka.append("g").attr("class","nv-controlsWrap");ka.append("g").attr("class","nv-interactive");B?(r.width(Q-(D?180:0)),la.select(".nv-legendWrap").datum(x).call(r),
z||r.height()===w.top||(w.top=r.height(),Z=e.utils.availableHeight(G,U,w)),la.select(".nv-legendWrap").attr("transform","translate("+(D?180:0)+","+-w.top+")")):la.select(".nv-legendWrap").selectAll("*").remove();if(D){var wa=[{key:J.grouped||"Grouped",disabled:c.stacked()},{key:J.stacked||"Stacked",disabled:!c.stacked()}];v.width(D?180:0).color(["#444","#444","#444"]);la.select(".nv-controlsWrap").datum(wa).attr("transform","translate(0,"+-w.top+")").call(v)}else la.select(".nv-controlsWrap").selectAll("*").remove();
W.attr("transform","translate("+w.left+","+w.top+")");M&&la.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)");c.disabled(x.map(function(a){return a.disabled})).width(Q).height(Z).color(x.map(function(a,c){return a.color||H(a,c)}).filter(function(a,c){return!x[c].disabled}));la.select(".nv-barsWrap").datum(x.filter(function(a){return!a.disabled})).call(c);if(O){f.scale(I)._ticks(e.utils.calcTicksX(Q/100,x)).tickSize(-Z,0);la.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+
")");la.select(".nv-x.nv-axis").call(f);ka=la.select(".nv-x.nv-axis > g").selectAll("g");ka.selectAll("line, text").style("opacity",1);if(p){ka.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var xa=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;la.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==xa%2?17:5)+")"})}V&&la.selectAll(".tick text").call(e.utils.wrapTicks,a.xAxis.rangeBand());
C&&ka.filter(function(a,c){return 0!==c%Math.ceil(x[0].values.length/(Q/100))}).selectAll("text, line").style("opacity",0);R&&ka.selectAll(".tick text").attr("transform","rotate("+R+" 0,0)").style("text-anchor",0<R?"start":"end");la.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}K&&(n.scale(E)._ticks(e.utils.calcTicksY(Z/36,x)).tickSize(-Q,0),la.select(".nv-y.nv-axis").call(n));q&&(h.width(Q).height(Z).margin({left:w.left,top:w.top}).svgContainer(U).xScale(I),W.select(".nv-interactive").call(h));
r.dispatch.on("stateChange",function(c){for(var e in c)u[e]=c[e];A.stateChange(u);a.update()});v.dispatch.on("legendClick",function(e,f){if(e.disabled){wa=wa.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":case J.grouped:c.stacked(!1);break;case "Stacked":case J.stacked:c.stacked(!0)}u.stacked=c.stacked();A.stateChange(u);a.update()}});A.on("changeState",function(e){"undefined"!==typeof e.disabled&&(x.forEach(function(a,c){a.disabled=e.disabled[c]}),u.disabled=
e.disabled);"undefined"!==typeof e.stacked&&(c.stacked(e.stacked),ca=u.stacked=e.stacked);a.update()});q?(h.dispatch.on("elementMousemove",function(c){if(void 0!=c.pointXValue){var e,f,l,k,p=[];x.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,q){f=I.domain().indexOf(c.pointXValue);var n=h.values[f];void 0!==n&&(k=n.x,void 0===e&&(e=n),void 0===l&&(l=c.mouseX),p.push({key:h.key,value:a.y()(n,f),color:H(h,h.seriesIndex),data:h.values[f]}))});h.tooltip.data({value:k,index:f,
series:p})();h.renderGuideLine(l)}}),h.dispatch.on("elementMouseout",function(a){h.tooltip.hidden(!0)})):(c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};k.data(c).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(a){k()}))});Z.renderEnd("multibarchart immediate");return a}var c=e.models.multiBar(),f=e.models.axis(),n=e.models.axis(),
h=e.interactiveGuideline(),r=e.models.legend(),v=e.models.legend(),k=e.models.tooltip(),w={top:30,right:20,bottom:50,left:60},z=null,F=null,G=null,H=e.utils.defaultColor(),D=!0,J={},B=!0,O=!0,K=!0,M=!1,C=!0,p=!1,V=!1,R=0,I,E,u=e.utils.state(),N=null,Q=null,A=d3.dispatch("stateChange","changeState","renderEnd"),l=250,q=!1;u.stacked=!1;c.stacked(!1);f.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});n.orient(M?"right":"left").tickFormat(d3.format(",.1f"));k.duration(0).valueFormatter(function(a,
c){return n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.duration(0).valueFormatter(function(a,c){return n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,
c)});v.updateState(!1);var Z=e.utils.renderWatch(A),ca=!1,Y=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:ca}}},aa=function(a){return function(c){void 0!==c.stacked&&(ca=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=A;a.multibar=c;a.legend=r;a.controls=v;a.xAxis=f;a.yAxis=n;a.state=u;a.tooltip=k;a.interactiveLayer=h;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return F},
set:function(a){F=a}},height:{get:function(){return G},set:function(a){G=a}},showLegend:{get:function(){return B},set:function(a){B=a}},showControls:{get:function(){return D},set:function(a){D=a}},controlLabels:{get:function(){return J},set:function(a){J=a}},showXAxis:{get:function(){return O},set:function(a){O=a}},showYAxis:{get:function(){return K},set:function(a){K=a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return Q},set:function(a){Q=a}},reduceXTicks:{get:function(){return C},
set:function(a){C=a}},rotateLabels:{get:function(){return R},set:function(a){R=a}},staggerLabels:{get:function(){return p},set:function(a){p=a}},wrapLabels:{get:function(){return V},set:function(a){V=!!a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(z=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},duration:{get:function(){return l},set:function(a){l=a;c.duration(l);f.duration(l);n.duration(l);
Z.reset(l)}},color:{get:function(){return H},set:function(a){H=e.utils.getColor(a);r.color(H)}},rightAlignYAxis:{get:function(){return M},set:function(a){M=a;n.orient(M?"right":"left")}},useInteractiveGuideline:{get:function(){return q},set:function(a){q=a}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);r.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiBarHorizontal=function(){function a(h){A.reset();
h.each(function(a){var h=f-c.left-c.right,l=n-c.top-c.bottom;r=d3.select(this);e.utils.initSVG(r);B&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(z)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});B&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=f,f+=a.size)})});var q=V&&R?[]:a.map(function(a){return a.values.map(function(a,c){return{x:w(a,c),y:z(a,
c),y0:a.y0,y1:a.y1}})});v.domain(V||d3.merge(q).map(function(a){return a.x})).rangeBands(I||[0,l],M);k.domain(R||d3.extent(d3.merge(q).map(function(a){return B?0<a.y?a.y1+a.y:a.y1:a.y}).concat(G)));O&&!B?k.range(E||[0>k.domain()[0]?K:0,h-(0<k.domain()[1]?K:0)]):k.range(E||[0,h]);Q=Q||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);h=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);l=h.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");l.append("defs");
l=l.append("g");h.select("g");l.append("g").attr("class","nv-groups");h.attr("transform","translate("+c.left+","+c.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(A,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",
function(a){return a.hover}).style("fill",function(a,c){return H(a,c)}).style("stroke",function(a,c){return H(a,c)});h.watchTransition(A,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",C);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();l=h.enter().append("g").attr("transform",function(c,e,f){return"translate("+Q(B?c.y0:0)+","+(B?0:f*v.rangeBand()/a.length+v(w(c,e)))+")"});l.append("rect").attr("width",0).attr("height",v.rangeBand()/(B?1:
a.length));h.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);N.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);N.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){N.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){N.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){N.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){N.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});F(a[0],0)&&(l.append("polyline"),h.select("polyline").attr("fill","none").attr("points",function(c,e){var f=F(c,e),h=.8*v.rangeBand()/(2*(B?1:a.length)),f=f.length?f:[-Math.abs(f),Math.abs(f)],f=f.map(function(a){return k(a)-k(0)});
return[[f[0],-h],[f[0],h],[f[0],0],[f[1],0],[f[1],-h],[f[1],h]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var f=v.rangeBand()/(2*(B?1:a.length));return"translate("+(0>z(c,e)?0:k(z(c,e))-k(0))+", "+f+")"}));l.append("text");O&&!B?(h.select("text").attr("text-anchor",function(a,c){return 0>z(a,c)?"end":"start"}).attr("y",v.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=p(z(a,c)),f=F(a,c);return void 0===f?e:f.length?e+"+"+p(Math.abs(f[1]))+
"-"+p(Math.abs(f[0])):e+"\u00b1"+p(Math.abs(f))}),h.watchTransition(A,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>z(a,c)?-4:k(z(a,c))-k(0)+4})):h.selectAll("text").text("");h.selectAll("text.nv-bar-label").text("");h.attr("class",function(a,c){return 0>z(a,c)?"nv-bar negative":"nv-bar positive"});D&&(J||(J=a.map(function(){return!0})),h.style("fill",function(a,c,e){return d3.rgb(D(a,c)).darker(J.map(function(a,c){return c}).filter(function(a,c){return!J[c]})[e]).toString()}).style("stroke",
function(a,c,e){return d3.rgb(D(a,c)).darker(J.map(function(a,c){return c}).filter(function(a,c){return!J[c]})[e]).toString()}));B?h.watchTransition(A,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+k(a.y1)+","+v(w(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(k(z(a,c)+a.y0)-k(a.y0))||0}).attr("height",v.rangeBand()):h.watchTransition(A,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>z(c,e)?k(z(c,e)):k(0))+","+
(c.series*v.rangeBand()/a.length+v(w(c,e)))+")"}).select("rect").attr("height",v.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(k(z(a,c))-k(0)),1)||0});v.copy();Q=k.copy()});A.renderEnd("multibarHorizontal immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,n=500,h=Math.floor(1E4*Math.random()),r=null,v=d3.scale.ordinal(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},F=function(a){return a.yErr},G=[0],H=e.utils.defaultColor(),D=null,
J,B=!1,O=!1,K=60,M=.1,C=.75,p=d3.format(",.2f"),V,R,I,E,u=250,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),Q,A=e.utils.renderWatch(N,u);a.dispatch=N;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return z},set:function(a){z=
a}},yErr:{get:function(){return F},set:function(a){F=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return V},set:function(a){V=a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return I},set:function(a){I=a}},yRange:{get:function(){return E},set:function(a){E=a}},forceY:{get:function(){return G},set:function(a){G=a}},stacked:{get:function(){return B},set:function(a){B=a}},showValues:{get:function(){return O},
set:function(a){O=a}},disabled:{get:function(){return J},set:function(a){J=a}},id:{get:function(){return h},set:function(a){h=a}},valueFormat:{get:function(){return p},set:function(a){p=a}},valuePadding:{get:function(){return K},set:function(a){K=a}},groupSpacing:{get:function(){return M},set:function(a){M=a}},fillOpacity:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return u},set:function(a){u=a;A.reset(u)}},color:{get:function(){return H},set:function(a){H=e.utils.getColor(a)}},barColor:{get:function(){return D},set:function(a){D=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarHorizontalChart=function(){function a(v){Q.reset();Q.models(c);B&&Q.models(f);O&&Q.models(n);v.each(function(l){var q=d3.select(this);e.utils.initSVG(q);
var v=e.utils.availableWidth(z,q,k),A=e.utils.availableHeight(F,q,k);a.update=function(){q.transition().duration(E).call(a)};a.container=this;K=c.stacked();p.setter(N(l),a.update).getter(u(l)).update();p.disabled=l.map(function(a){return!!a.disabled});if(!V)for(Q in V={},p)V[Q]=p[Q]instanceof Array?p[Q].slice(0):p[Q];if(l&&l.length&&l.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return e.utils.noData(a,q),a;M=c.xScale();C=c.yScale().clamp(!0);var Q=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([l]);
var R=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),x=Q.select("g");R.append("g").attr("class","nv-x nv-axis");R.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");R.append("g").attr("class","nv-barsWrap");R.append("g").attr("class","nv-legendWrap");R.append("g").attr("class","nv-controlsWrap");J?(h.width(v-(H?180:0)),x.select(".nv-legendWrap").datum(l).call(h),w||h.height()===k.top||(k.top=h.height(),A=e.utils.availableHeight(F,
q,k)),x.select(".nv-legendWrap").attr("transform","translate("+(H?180:0)+","+-k.top+")")):x.select(".nv-legendWrap").selectAll("*").remove();if(H){var U=[{key:D.grouped||"Grouped",disabled:c.stacked()},{key:D.stacked||"Stacked",disabled:!c.stacked()}];r.width(H?180:0).color(["#444","#444","#444"]);x.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+-k.top+")").call(r)}else x.select(".nv-controlsWrap").selectAll("*").remove();Q.attr("transform","translate("+k.left+","+k.top+")");
c.disabled(l.map(function(a){return a.disabled})).width(v).height(A).color(l.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!l[c].disabled}));x.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(c);B&&(f.scale(M)._ticks(e.utils.calcTicksX(A/24,l)).tickSize(-v,0),x.select(".nv-x.nv-axis").call(f),x.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));O&&(n.scale(C)._ticks(e.utils.calcTicksY(v/100,l)).tickSize(-A,0),x.select(".nv-y.nv-axis").attr("transform",
"translate(0,"+A+")"),x.select(".nv-y.nv-axis").call(n));x.select(".nv-zeroLine line").attr("x1",C(0)).attr("x2",C(0)).attr("y1",0).attr("y2",-A);h.dispatch.on("stateChange",function(c){for(var e in c)p[e]=c[e];I.stateChange(p);a.update()});r.dispatch.on("legendClick",function(e,f){if(e.disabled){U=U.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":case D.grouped:c.stacked(!1);break;case "Stacked":case D.stacked:c.stacked(!0)}p.stacked=c.stacked();I.stateChange(p);
K=c.stacked();a.update()}});I.on("changeState",function(e){"undefined"!==typeof e.disabled&&(l.forEach(function(a,c){a.disabled=e.disabled[c]}),p.disabled=e.disabled);"undefined"!==typeof e.stacked&&(c.stacked(e.stacked),K=p.stacked=e.stacked);a.update()})});Q.renderEnd("multibar horizontal chart immediate");return a}var c=e.models.multiBarHorizontal(),f=e.models.axis(),n=e.models.axis(),h=e.models.legend().height(30),r=e.models.legend().height(30),v=e.models.tooltip(),k={top:30,right:20,bottom:50,
left:60},w=null,z=null,F=null,G=e.utils.defaultColor(),H=!0,D={},J=!0,B=!0,O=!0,K=!1,M,C,p=e.utils.state(),V=null,R=null,I=d3.dispatch("stateChange","changeState","renderEnd"),E=250;p.stacked=!1;c.stacked(K);f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});n.orient("bottom").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(a,c){return n.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});r.updateState(!1);var u=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
stacked:K}}},N=function(a){return function(c){void 0!==c.stacked&&(K=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Q=e.utils.renderWatch(I,E);c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};v.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){v()});a.dispatch=I;a.multibar=c;a.legend=h;a.controls=
r;a.xAxis=f;a.yAxis=n;a.state=p;a.tooltip=v;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return F},set:function(a){F=a}},showLegend:{get:function(){return J},set:function(a){J=a}},showControls:{get:function(){return H},set:function(a){H=a}},controlLabels:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return O},set:function(a){O=
a}},defaultState:{get:function(){return V},set:function(a){V=a}},noData:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return k},set:function(a){void 0!==a.top&&(w=k.top=a.top);k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return E},set:function(a){E=a;Q.reset(E);c.duration(E);f.duration(E);n.duration(E)}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a);
h.color(G)}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);h.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiChart=function(){function a(k){k.each(function(k){function K(a){var c=2===k[a.seriesIndex].yAxis?Z:q;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};Y.duration(0).headerFormatter(function(a,c){return l.tickFormat()(a,c)}).valueFormatter(function(a,
e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function D(a){var c=2===k[a.seriesIndex].yAxis?Z:q;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};Y.duration(100).headerFormatter(function(a,c){return l.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function U(a){var c=2===k[a.seriesIndex].yAxis?Z:q;a.point.x=Q.x()(a.point);a.point.y=Q.y()(a.point);Y.duration(0).headerFormatter(function(a,c){return l.tickFormat()(a,
c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function aa(a){var c=2===k[a.data.series].yAxis?Z:q;a.value=u.x()(a.data);a.series={value:u.y()(a.data),color:a.color,key:a.data.key};Y.duration(0).headerFormatter(function(a,c){return l.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function X(){for(var a=0,c=x.length;a<c;a++){var e=x[a];try{e.clearHighlights()}catch(Jb){}}}function wa(a,c,e){for(var f=0,h=x.length;f<
h;f++){var k=x[f];try{k.highlightPoint(a,c,e)}catch(kc){}}}var xa=d3.select(this);e.utils.initSVG(xa);a.update=function(){xa.transition().call(a)};a.container=this;var ga=e.utils.availableWidth(h,xa,c),da=e.utils.availableHeight(r,xa,c),fa=k.filter(function(a){return"line"==a.type&&1==a.yAxis}),ya=k.filter(function(a){return"line"==a.type&&2==a.yAxis}),va=k.filter(function(a){return"scatter"==a.type&&1==a.yAxis}),ta=k.filter(function(a){return"scatter"==a.type&&2==a.yAxis}),ra=k.filter(function(a){return"bar"==
a.type&&1==a.yAxis}),Ja=k.filter(function(a){return"bar"==a.type&&2==a.yAxis}),sa=k.filter(function(a){return"area"==a.type&&1==a.yAxis}),ma=k.filter(function(a){return"area"==a.type&&2==a.yAxis});if(k&&k.length&&k.filter(function(a){return a.values.length}).length)xa.selectAll(".nv-noData").remove();else return e.utils.noData(a,xa),a;var Ga=k.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:F(a),y:G(a)}})}),na=k.filter(function(a){return!a.disabled&&
2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:F(a),y:G(a)}})});M.domain(d3.extent(d3.merge(Ga.concat(na)),function(a){return a.x})).range([0,ga]);var za=xa.selectAll("g.wrap.multiChart").data([k]),ea=za.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y1 nv-axis");ea.append("g").attr("class","nv-y2 nv-axis");ea.append("g").attr("class","stack1Wrap");ea.append("g").attr("class",
"stack2Wrap");ea.append("g").attr("class","bars1Wrap");ea.append("g").attr("class","bars2Wrap");ea.append("g").attr("class","scatters1Wrap");ea.append("g").attr("class","scatters2Wrap");ea.append("g").attr("class","lines1Wrap");ea.append("g").attr("class","lines2Wrap");ea.append("g").attr("class","legendWrap");ea.append("g").attr("class","nv-interactive");var ea=za.select("g"),Ea=k.map(function(a,c){return k[c].color||n(a,c)});if(v){var Fa=ca.align()?ga/2:ga,kb=ca.align()?Fa:0;ca.width(Fa);ca.color(Ea);
ea.select(".legendWrap").datum(k.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":O);return a})).call(ca);f||ca.height()===c.top||(c.top=ca.height(),da=e.utils.availableHeight(r,xa,c));ea.select(".legendWrap").attr("transform","translate("+kb+","+-c.top+")")}else ea.select(".legendWrap").selectAll("*").remove();V.width(ga).height(da).interpolate(H).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"line"==k[c].type}));R.width(ga).height(da).interpolate(H).color(Ea.filter(function(a,
c){return!k[c].disabled&&2==k[c].yAxis&&"line"==k[c].type}));I.width(ga).height(da).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"scatter"==k[c].type}));E.width(ga).height(da).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"scatter"==k[c].type}));u.width(ga).height(da).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"bar"==k[c].type}));N.width(ga).height(da).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"bar"==k[c].type}));
Q.width(ga).height(da).interpolate(H).color(Ea.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"area"==k[c].type}));A.width(ga).height(da).interpolate(H).color(Ea.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"area"==k[c].type}));ea.attr("transform","translate("+c.left+","+c.top+")");var Ea=ea.select(".lines1Wrap").datum(fa.filter(function(a){return!a.disabled})),Fa=ea.select(".scatters1Wrap").datum(va.filter(function(a){return!a.disabled})),kb=ea.select(".bars1Wrap").datum(ra.filter(function(a){return!a.disabled})),
Ka=ea.select(".stack1Wrap").datum(sa.filter(function(a){return!a.disabled})),vb=ea.select(".lines2Wrap").datum(ya.filter(function(a){return!a.disabled})),bb=ea.select(".scatters2Wrap").datum(ta.filter(function(a){return!a.disabled})),bc=ea.select(".bars2Wrap").datum(Ja.filter(function(a){return!a.disabled})),cc=ea.select(".stack2Wrap").datum(ma.filter(function(a){return!a.disabled})),dc=sa.length?sa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+
c[e].y}})}).concat([{x:0,y:0}]):[],Ib=ma.length?ma.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[];C.domain(w||d3.extent(d3.merge(Ga).concat(dc),function(a){return a.y})).range([0,da]);p.domain(z||d3.extent(d3.merge(na).concat(Ib),function(a){return a.y})).range([0,da]);V.yDomain(C.domain());I.yDomain(C.domain());u.yDomain(C.domain());Q.yDomain(C.domain());R.yDomain(p.domain());E.yDomain(p.domain());N.yDomain(p.domain());
A.yDomain(p.domain());sa.length&&d3.transition(Ka).call(Q);ma.length&&d3.transition(cc).call(A);ra.length&&d3.transition(kb).call(u);Ja.length&&d3.transition(bc).call(N);fa.length&&d3.transition(Ea).call(V);ya.length&&d3.transition(vb).call(R);va.length&&d3.transition(Fa).call(I);ta.length&&d3.transition(bb).call(E);l._ticks(e.utils.calcTicksX(ga/100,k)).tickSize(-da,0);ea.select(".nv-x.nv-axis").attr("transform","translate(0,"+da+")");d3.transition(ea.select(".nv-x.nv-axis")).call(l);q._ticks(e.utils.calcTicksY(da/
36,k)).tickSize(-ga,0);d3.transition(ea.select(".nv-y1.nv-axis")).call(q);Z._ticks(e.utils.calcTicksY(da/36,k)).tickSize(-ga,0);d3.transition(ea.select(".nv-y2.nv-axis")).call(Z);ea.select(".nv-y1.nv-axis").classed("nv-disabled",Ga.length?!1:!0).attr("transform","translate("+M.range()[0]+",0)");ea.select(".nv-y2.nv-axis").classed("nv-disabled",na.length?!1:!0).attr("transform","translate("+M.range()[1]+",0)");ca.dispatch.on("stateChange",function(c){a.update()});B&&(J.width(ga).height(da).margin({left:c.left,
top:c.top}).svgContainer(xa).xScale(M),za.select(".nv-interactive").call(J));B?(J.dispatch.on("elementMousemove",function(c){X();var f,h,p,r=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,l){var u=M.domain(),x=k.values.filter(function(c,e){return a.x()(c,e)>=u[0]&&a.x()(c,e)<=u[1]});h=e.interactiveBisect(x,c.pointXValue,a.x());var x=x[h],v=a.y()(x,h);null!==v&&wa(l,h,!0);void 0!==x&&(void 0===f&&(f=x),void 0===p&&(p=M(a.x()(x,h))),r.push({key:k.key,value:v,color:n(k,
k.seriesIndex),data:x,yAxis:2==k.yAxis?Z:q}))});var u=function(a,c){var e=r[c].yAxis;return null==a?"N/A":e.tickFormat()(a)};J.tooltip.headerFormatter(function(a,c){return l.tickFormat()(a,c)}).valueFormatter(J.tooltip.valueFormatter()||u).data({value:a.x()(f,h),index:h,series:r})();J.renderGuideLine(p)}),J.dispatch.on("elementMouseout",function(a){X()})):(V.dispatch.on("elementMouseover.tooltip",K),R.dispatch.on("elementMouseover.tooltip",K),V.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),
R.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),I.dispatch.on("elementMouseover.tooltip",D),E.dispatch.on("elementMouseover.tooltip",D),I.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),E.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),Q.dispatch.on("elementMouseover.tooltip",U),A.dispatch.on("elementMouseover.tooltip",U),Q.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),A.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),
u.dispatch.on("elementMouseover.tooltip",aa),N.dispatch.on("elementMouseover.tooltip",aa),u.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),N.dispatch.on("elementMouseout.tooltip",function(a){Y.hidden(!0)}),u.dispatch.on("elementMousemove.tooltip",function(a){Y()}),N.dispatch.on("elementMousemove.tooltip",function(a){Y()}))});return a}var c={top:30,right:20,bottom:50,left:60},f=null,n=e.utils.defaultColor(),h=null,r=null,v=!0,k=null,w,z,F=function(a){return a.x},G=function(a){return a.y},
H="linear",D=!0,J=e.interactiveGuideline(),B=!1,O=" (right axis)",K=250,M=d3.scale.linear(),C=d3.scale.linear(),p=d3.scale.linear(),V=e.models.line().yScale(C).duration(K),R=e.models.line().yScale(p).duration(K),I=e.models.scatter().yScale(C).duration(K),E=e.models.scatter().yScale(p).duration(K),u=e.models.multiBar().stacked(!1).yScale(C).duration(K),N=e.models.multiBar().stacked(!1).yScale(p).duration(K),Q=e.models.stackedArea().yScale(C).duration(K),A=e.models.stackedArea().yScale(p).duration(K),
l=e.models.axis().scale(M).orient("bottom").tickPadding(5).duration(K),q=e.models.axis().scale(C).orient("left").duration(K),Z=e.models.axis().scale(p).orient("right").duration(K),ca=e.models.legend().height(30),Y=e.models.tooltip(),aa=d3.dispatch(),x=[V,R,I,E,u,N,Q,A];a.dispatch=aa;a.legend=ca;a.lines1=V;a.lines2=R;a.scatters1=I;a.scatters2=E;a.bars1=u;a.bars2=N;a.stack1=Q;a.stack2=A;a.xAxis=l;a.yAxis1=q;a.yAxis2=Z;a.tooltip=Y;a.interactiveLayer=J;a.options=e.utils.optionsFunc.bind(a);a._options=
Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return r},set:function(a){r=a}},showLegend:{get:function(){return v},set:function(a){v=a}},yDomain1:{get:function(){return w},set:function(a){w=a}},yDomain2:{get:function(){return z},set:function(a){z=a}},noData:{get:function(){return k},set:function(a){k=a}},interpolate:{get:function(){return H},set:function(a){H=a}},legendRightAxisHint:{get:function(){return O},set:function(a){O=a}},margin:{get:function(){return c},
set:function(a){void 0!==a.top&&(f=c.top=a.top);c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return n},set:function(a){n=e.utils.getColor(a)}},x:{get:function(){return F},set:function(a){F=a;V.x(a);R.x(a);I.x(a);E.x(a);u.x(a);N.x(a);Q.x(a);A.x(a)}},y:{get:function(){return G},set:function(a){G=a;V.y(a);R.y(a);I.y(a);E.y(a);Q.y(a);A.y(a);u.y(a);N.y(a)}},useVoronoi:{get:function(){return D},set:function(a){D=
a;V.useVoronoi(a);R.useVoronoi(a);Q.useVoronoi(a);A.useVoronoi(a)}},useInteractiveGuideline:{get:function(){return B},set:function(a){if(B=a)V.interactive(!1),V.useVoronoi(!1),R.interactive(!1),R.useVoronoi(!1),Q.interactive(!1),Q.useVoronoi(!1),A.interactive(!1),A.useVoronoi(!1),I.interactive(!1),E.interactive(!1)}},duration:{get:function(){return K},set:function(a){K=a;[V,R,Q,A,I,E,l,q,Z].forEach(function(a){a.duration(K)})}}});e.utils.initOptions(a);return a};e.models.ohlcBar=function(){function a(u){u.each(function(a){r=
d3.select(this);var u=e.utils.availableWidth(f,r,c),A=e.utils.availableHeight(n,r,c);e.utils.initSVG(r);var l=u/a[0].values.length*.9;v.domain(p||d3.extent(a[0].values.map(w).concat(J)));O?v.range(R||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):v.range(R||[5+l/2,u-l/2-5]);k.domain(V||[d3.min(a[0].values.map(D).concat(B)),d3.max(a[0].values.map(H).concat(B))]).range(I||[A,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+
.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var q=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),C=q.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),N=C.append("defs"),C=C.append("g"),Y=q.select("g");C.append("g").attr("class","nv-ticks");q.attr("transform","translate("+c.left+","+c.top+")");r.on("click",function(a,c){E.chartClick({data:a,
index:c,pos:d3.event,id:h})});N.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");q.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",A);Y.attr("clip-path",K?"url(#nv-chart-clip-path-"+h+")":"");A=q.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});A.exit().remove();A.enter().append("path").attr("class",function(a,c,e){return(F(a,c)>G(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+
(k(F(a,c))-k(H(a,c)))+"l"+-l/2+",0l"+l/2+",0l0,"+(k(D(a,c))-k(F(a,c)))+"l0,"+(k(G(a,c))-k(D(a,c)))+"l"+l/2+",0l"+-l/2+",0z"}).attr("transform",function(a,c){return"translate("+v(w(a,c))+","+k(H(a,c))+")"}).attr("fill",function(a,c){return M[0]}).attr("stroke",function(a,c){return M[0]}).attr("x",0).attr("y",function(a,c){return k(Math.max(0,z(a,c)))}).attr("height",function(a,c){return Math.abs(k(z(a,c))-k(0))});A.attr("class",function(a,c,e){return(F(a,c)>G(a,c)?"nv-tick negative":"nv-tick positive")+
" nv-tick-"+e+"-"+c});d3.transition(A).attr("transform",function(a,c){return"translate("+v(w(a,c))+","+k(H(a,c))+")"}).attr("d",function(c,e){var f=u/a[0].values.length*.9;return"m0,0l0,"+(k(F(c,e))-k(H(c,e)))+"l"+-f/2+",0l"+f/2+",0l0,"+(k(D(c,e))-k(F(c,e)))+"l0,"+(k(G(c,e))-k(D(c,e)))+"l"+f/2+",0l"+-f/2+",0z"})});return a}var c={top:0,right:0,bottom:0,left:0},f=null,n=null,h=Math.floor(1E4*Math.random()),r=null,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},
F=function(a){return a.open},G=function(a){return a.close},H=function(a){return a.high},D=function(a){return a.low},J=[],B=[],O=!1,K=!0,M=e.utils.defaultColor(),C=!1,p,V,R,I,E=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();r.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){r.select(".nv-ohlcBar .nv-tick.hover").classed("hover",
!1)};a.dispatch=E;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return p},set:function(a){p=a}},yDomain:{get:function(){return V},set:function(a){V=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return I},
set:function(a){I=a}},forceX:{get:function(){return J},set:function(a){J=a}},forceY:{get:function(){return B},set:function(a){B=a}},padData:{get:function(){return O},set:function(a){O=a}},clipEdge:{get:function(){return K},set:function(a){K=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return C},set:function(a){C=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return z},set:function(a){z=a}},open:{get:function(){return F()},set:function(a){F=
a}},close:{get:function(){return G()},set:function(a){G=a}},high:{get:function(){return H},set:function(a){H=a}},low:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.parallelCoordinates=
function(){function a(N){u.reset();N.each(function(a){function u(a){return R(F.map(function(c){if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key]))||Ba){var e=k[c.key].domain(),f=k[c.key].range(),h=e[0]-(e[1]-e[0])/9;0>K.indexOf(c.key)&&(e=d3.scale.linear().domain([h,e[1]]).range([r-12,f[1]]),k[c.key].brush.y(e),K.push(c.key));if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key])))return[v(c.key),k[c.key](h)]}void 0!==ga&&(0<K.length||Ba?(ga.style("display","inline"),da.style("display",
"inline")):(ga.style("display","none"),da.style("display","none")));return[v(c.key),k[c.key](a.values[c.key])]}))}function l(a){J.forEach(function(c){var e=k[c.dimension].brush.y().domain();c.hasOnlyNaN&&(c.extent[1]=(k[c.dimension].domain()[1]-e[0])*(c.extent[1]-c.extent[0])/(oa[c.dimension]-c.extent[0])+e[0]);c.hasNaN&&(c.extent[0]=e[0]);a&&k[c.dimension].brush.extent(c.extent)});V.select(".nv-brushBackground").each(function(a){d3.select(this).call(k[a.key].brush)}).selectAll("rect").attr("x",-8).attr("width",
16);Y()}function q(){!1===H&&(H=!0,l(!0))}function N(){fa=G.filter(function(a){return!k[a].brush.empty()});ya=fa.map(function(a){return k[a].brush.extent()});J=[];fa.forEach(function(a,c){J[c]={dimension:a,extent:ya[c],hasNaN:!1,hasOnlyNaN:!1}});B=[];C.style("display",function(a){var c=fa.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&ya[e][0]==k[c].brush.y().domain()[0]?!0:ya[e][0]<=a.values[c]&&a.values[c]<=ya[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&B.push(a);
return c?null:"none"});Y();E.brush({filters:J,active:B})}function Q(){var a=0<fa.length?!0:!1;J.forEach(function(a){a.extent[0]===k[a.dimension].brush.y().domain()[0]&&0<=K.indexOf(a.dimension)&&(a.hasNaN=!0);a.extent[1]<k[a.dimension].domain()[0]&&(a.hasOnlyNaN=!0)});E.brushEnd(B,a)}function Y(){V.select(".nv-axis").each(function(a,c){var e=J.filter(function(c){return c.dimension==a.key});W[a.key]=k[a.key].domain();0!=e.length&&H&&(W[a.key]=[],e[0].extent[1]>k[a.key].domain()[0]&&(W[a.key]=[e[0].extent[1]]),
e[0].extent[0]>=k[a.key].domain()[0]&&W[a.key].push(e[0].extent[0]));d3.select(this).call(I.scale(k[a.key]).tickFormat(a.format).tickValues(W[a.key]))})}function aa(a){var c=O[a];return null==c?v(a):c}var x=d3.select(this);h=e.utils.availableWidth(f,x,c);r=e.utils.availableHeight(n,x,c);e.utils.initSVG(x);if(void 0===a[0].values){var U=[];a.forEach(function(a){var c={};Object.keys(a).forEach(function(e){"name"!==e&&(c[e]=a[e])});U.push({key:a.name,values:c})});a=U}var X=a.map(function(a){return a.values});
0===B.length&&(B=a);G=z.sort(function(a,c){return a.currentPosition-c.currentPosition}).map(function(a){return a.key});F=z.filter(function(a){return!a.disabled});v.rangePoints([0,h],1).domain(F.map(function(a){return a.key}));var oa={},Ba=!1,W=[];G.forEach(function(a){var c=d3.extent(X,function(c){return+c[a]}),e=c[0],c=c[1],f=!1;if(isNaN(e)||isNaN(c))f=!0,c=e=0;e===c&&(--e,c+=1);var h=J.filter(function(c){return c.dimension==a});0!==h.length&&(f?(e=k[a].domain()[0],c=k[a].domain()[1]):!h[0].hasOnlyNaN&&
H?(e=e>h[0].extent[0]?h[0].extent[0]:e,c=c<h[0].extent[1]?h[0].extent[1]:c):h[0].hasNaN&&(c=c<h[0].extent[1]?h[0].extent[1]:c,oa[a]=k[a].domain()[1],Ba=!0));k[a]=d3.scale.linear().domain([e,c]).range([.9*(r-12),0]);K=[];k[a].brush=d3.svg.brush().y(k[a]).on("brushstart",q).on("brush",N).on("brushend",Q)});var x=x.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),ka=x.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),la=x.select("g");ka.append("g").attr("class",
"nv-parallelCoordinates background");ka.append("g").attr("class","nv-parallelCoordinates foreground");ka.append("g").attr("class","nv-parallelCoordinates missingValuesline");x.attr("transform","translate("+c.left+","+c.top+")");R.interpolate("cardinal").tension(M);I.orient("left");var ka=d3.behavior.drag().on("dragstart",function(a){O[a.key]=this.parentNode.__origin__=v(a.key);p.attr("visibility","hidden")}).on("drag",function(a){O[a.key]=Math.min(h,Math.max(0,this.parentNode.__origin__+=d3.event.x));
C.attr("d",u);F.sort(function(a,c){return aa(a.key)-aa(c.key)});F.forEach(function(a,c){return a.currentPosition=c});v.domain(F.map(function(a){return a.key}));V.attr("transform",function(a){return"translate("+aa(a.key)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete O[a.key];d3.select(this.parentNode).attr("transform","translate("+v(a.key)+")");C.attr("d",u);p.attr("d",u).attr("visibility",null);E.dimensionsOrder(F)}),wa=v.range()[1]-v.range()[0],wa=isNaN(wa)?v.range()[0]:
wa;if(!isNaN(wa)){var xa=[0+wa/2,r-12,h-wa/2,r-12];var ga=x.select(".missingValuesline").selectAll("line").data([xa]);ga.enter().append("line");ga.exit().remove();ga.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var da=x.select(".missingValuesline").selectAll("text").data([w]);da.append("text").data([w]);da.enter().append("text");da.exit().remove();da.attr("y",r).attr("x",h-92-wa/2).text(function(a){return a})}p=
x.select(".background").selectAll("path").data(a);p.enter().append("path");p.exit().remove();p.attr("d",u);C=x.select(".foreground").selectAll("path").data(a);C.enter().append("path");C.exit().remove();C.attr("d",u).style("stroke-width",function(a,c){isNaN(a.strokeWidth)&&(a.strokeWidth=1);return a.strokeWidth}).attr("stroke",function(a,c){return a.color||D(a,c)});C.on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("stroke-width",a.strokeWidth+2+"px").style("stroke-opacity",1);
E.elementMouseover({label:a.name,color:a.color||D(a,c),values:a.values,dimensions:F})});C.on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("stroke-width",a.strokeWidth+"px").style("stroke-opacity",.7);E.elementMouseout({label:a.name,index:c})});C.on("mousemove",function(a,c){E.elementMousemove()});C.on("click",function(a){E.elementClick({id:a.id})});V=la.selectAll(".dimension").data(F);a=V.enter().append("g").attr("class","nv-parallelCoordinates dimension");V.attr("transform",
function(a){return"translate("+v(a.key)+",0)"});a.append("g").attr("class","nv-axis");a.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(a,c){E.elementMouseover({label:a.tooltip||a.key,color:a.color})}).on("mouseout",function(a,c){E.elementMouseout({label:a.tooltip})}).on("mousemove",function(a,c){E.elementMousemove()}).call(ka);a.append("g").attr("class","nv-brushBackground");V.exit().remove();V.select(".nv-label").text(function(a){return a.key});
l(H);var fa=G.filter(function(a){return!k[a].brush.empty()}),ya=fa.map(function(a){return k[a].brush.extent()});a=B.slice(0);B=[];C.style("display",function(a){var c=fa.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&ya[e][0]==k[c].brush.y().domain()[0]?!0:ya[e][0]<=a.values[c]&&a.values[c]<=ya[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&B.push(a);return c?null:"none"});(0<J.length||!e.utils.arrayEquals(B,a))&&E.activeChanged(B)});return a}var c={top:30,right:0,bottom:10,
left:0},f=null,n=null,h=null,r=null,v=d3.scale.ordinal(),k={},w="undefined values",z=[],F=[],G=[],H=!0,D=e.utils.defaultColor(),J=[],B=[],O=[],K=[],M=1,C,p,V,R=d3.svg.line(),I=d3.svg.axis(),E=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),u=e.utils.renderWatch(E);a.dispatch=E;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},
set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},dimensionData:{get:function(){return z},set:function(a){z=a}},displayBrush:{get:function(){return H},set:function(a){H=a}},filters:{get:function(){return J},set:function(a){J=a}},active:{get:function(){return B},set:function(a){B=a}},lineTension:{get:function(){return M},set:function(a){M=a}},undefinedValuesLabel:{get:function(){return w},set:function(a){w=a}},dimensions:{get:function(){return z.map(function(a){return a.key})},
set:function(a){e.deprecated("dimensions","use dimensionData instead");0===z.length?a.forEach(function(a){z.push({key:a})}):a.forEach(function(a,c){z[c].key=a})}},dimensionNames:{get:function(){return z.map(function(a){return a.key})},set:function(a){e.deprecated("dimensionNames","use dimensionData instead");G=[];0===z.length?a.forEach(function(a){z.push({key:a})}):a.forEach(function(a,c){z[c].key=a})}},dimensionFormats:{get:function(){return z.map(function(a){return a.format})},set:function(a){e.deprecated("dimensionFormats",
"use dimensionData instead");0===z.length?a.forEach(function(a){z.push({format:a})}):a.forEach(function(a,c){z[c].format=a})}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.parallelCoordinatesChart=function(){function a(p){K.reset();
K.models(c);p.each(function(p){var n=d3.select(this);e.utils.initSVG(n);var K=e.utils.availableWidth(v,n,h),E=e.utils.availableHeight(k,n,h);a.update=function(){n.call(a)};a.container=this;F.setter(C(G),a.update).getter(M(G)).update();F.disabled=G.map(function(a){return!!a.disabled});G=G.map(function(a){a.disabled=!!a.disabled;return a});G.forEach(function(a,c){a.originalPosition=isNaN(a.originalPosition)?c:a.originalPosition;a.currentPosition=isNaN(a.currentPosition)?c:a.currentPosition});if(!D)for(u in D=
{},F)D[u]=F[u]instanceof Array?F[u].slice(0):F[u];if(p&&p.length)n.selectAll(".nv-noData").remove();else return e.utils.noData(a,n),a;var u=n.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([p]);var z=u.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),B=u.select("g");z.append("g").attr("class","nv-parallelCoordinatesWrap");z.append("g").attr("class","nv-legendWrap");B.select("rect").attr("width",K).attr("height",0<E?E:0);w?(f.width(K).color(function(a){return"rgb(188,190,192)"}),
B.select(".nv-legendWrap").datum(G.sort(function(a,c){return a.originalPosition-c.originalPosition})).call(f),r||f.height()===h.top||(h.top=f.height(),E=e.utils.availableHeight(k,n,h)),u.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-h.top+")")):B.select(".nv-legendWrap").selectAll("*").remove();u.attr("transform","translate("+h.left+","+h.top+")");c.width(K).height(E).dimensionData(G).displayBrush(H);B.select(".nv-parallelCoordinatesWrap ").datum(p).transition().call(c);c.dispatch.on("brushEnd",
function(a,c){c?(H=!0,O.brushEnd(a)):H=!1});f.dispatch.on("stateChange",function(c){for(var e in c)F[e]=c[e];O.stateChange(F);a.update()});c.dispatch.on("dimensionsOrder",function(a){G.sort(function(a,c){return a.currentPosition-c.currentPosition});var c=!1;G.forEach(function(a,e){a.currentPosition=e;a.currentPosition!==a.originalPosition&&(c=!0)});O.dimensionsOrder(G,c)});O.on("changeState",function(c){"undefined"!==typeof c.disabled&&(G.forEach(function(a,e){a.disabled=c.disabled[e]}),F.disabled=
c.disabled);a.update()})});K.renderEnd("parraleleCoordinateChart immediate");return a}var c=e.models.parallelCoordinates(),f=e.models.legend(),n=e.models.tooltip();e.models.tooltip();var h={top:0,right:0,bottom:0,left:0},r=null,v=null,k=null,w=!0,z=e.utils.defaultColor(),F=e.utils.state(),G=[],H=!0,D=null,J=null,B="undefined",O=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),K=e.utils.renderWatch(O),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
C=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};n.contentGenerator(function(a){var c='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td><strong>'+a.key+"</strong></td></tr></thead>";0!==a.series.length&&(c+='<tbody><tr><td height ="10px"></td></tr>',a.series.forEach(function(a){c=c+'<tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td class="key">'+
a.key+'</td><td class="value">'+a.value+"</td></tr>"}),c+="</tbody>");return c+="</table>"});c.dispatch.on("elementMouseover.tooltip",function(a){var c={key:a.label,color:a.color,series:[]};a.values&&(Object.keys(a.values).forEach(function(e){var f=a.dimensions.filter(function(a){return a.key===e})[0];if(f){var h=isNaN(a.values[e])||isNaN(parseFloat(a.values[e]))?B:f.format(a.values[e]);c.series.push({idx:f.currentPosition,key:e,value:h,color:f.color})}}),c.series.sort(function(a,c){return a.idx-
c.idx}));n.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){n.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(){n()});a.dispatch=O;a.parallelCoordinates=c;a.legend=f;a.tooltip=n;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return k},set:function(a){k=a}},showLegend:{get:function(){return w},set:function(a){w=a}},defaultState:{get:function(){return D},set:function(a){D=
a}},dimensionData:{get:function(){return G},set:function(a){G=a}},displayBrush:{get:function(){return H},set:function(a){H=a}},noData:{get:function(){return J},set:function(a){J=a}},nanValue:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(r=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},color:{get:function(){return z},set:function(a){z=e.utils.getColor(a);
f.color(z);c.color(z)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.pie=function(){function a(q){l.reset();q.each(function(a){var q=f-c.left-c.right,Y=n-c.top-c.bottom,aa=Math.min(q,Y)/2,x=[],U=[];k=d3.select(this);if(0===u.length)for(var X=aa-aa/5,oa=I*aa,Z=0;Z<a[0].length;Z++)x.push(X),U.push(oa);else O?(x=u.map(function(a){return(a.outer-a.outer/5)*aa}),U=u.map(function(a){return(a.inner-a.inner/5)*aa}),I=d3.min(u.map(function(a){return a.inner-a.inner/5}))):(x=u.map(function(a){return a.outer*
aa}),U=u.map(function(a){return a.inner*aa}),I=d3.min(u.map(function(a){return a.inner})));e.utils.initSVG(k);var X=k.selectAll(".nv-wrap.nv-pie").data(a),Z=X.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+v).append("g"),W=X.select("g"),oa=Z.append("g").attr("class","nv-pie");Z.append("g").attr("class","nv-pieLabels");X.attr("transform","translate("+c.left+","+c.top+")");W.select(".nv-pie").attr("transform","translate("+q/2+","+Y/2+")");W.select(".nv-pieLabels").attr("transform",
"translate("+q/2+","+Y/2+")");k.on("click",function(a,c){N.chartClick({data:a,index:c,pos:d3.event,id:v})});Q=[];A=[];for(Z=0;Z<a[0].length;Z++){var W=d3.svg.arc().outerRadius(x[Z]),ka=d3.svg.arc().outerRadius(x[Z]+5);!1!==C&&(W.startAngle(C),ka.startAngle(C));!1!==V&&(W.endAngle(V),ka.endAngle(V));J&&(W.innerRadius(U[Z]),ka.innerRadius(U[Z]));W.cornerRadius&&R&&(W.cornerRadius(R),ka.cornerRadius(R));Q.push(W);A.push(ka)}U=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:r(a)});U.padAngle&&
p&&U.padAngle(p);J&&B&&(oa.append("text").attr("class","nv-pie-title"),X.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return B}).style("font-size",Math.min(q,Y)*I*2/(B.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+K+")"}));q=X.select(".nv-pie").selectAll(".nv-slice").data(U);Y=X.select(".nv-pieLabels").selectAll(".nv-label").data(U);q.exit().remove();Y.exit().remove();U=q.enter().append("g");U.attr("class","nv-slice");U.on("mouseover",
function(a,c){d3.select(this).classed("hover",!0);O&&d3.select(this).select("path").transition().duration(70).attr("d",A[c]);N.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill"),percent:(a.endAngle-a.startAngle)/(2*Math.PI)})});U.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);O&&d3.select(this).select("path").transition().duration(50).attr("d",Q[c]);N.elementMouseout({data:a.data,index:c})});U.on("mousemove",function(a,c){N.elementMousemove({data:a.data,index:c})});
U.on("click",function(a,c){N.elementClick({data:a.data,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this})});U.on("dblclick",function(a,c){N.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});q.attr("fill",function(a,c){return w(a.data,c)});q.attr("stroke",function(a,c){return w(a.data,c)});U.append("path").each(function(a){this._current=a});q.select("path").transition().duration(E).attr("d",function(a,c){return Q[c](a)}).attrTween("d",function(a,c){a.endAngle=
isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;J||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return Q[c](e(a))}});if(F){for(var la=[],Z=0;Z<a[0].length;Z++)la.push(Q[Z]),G?J&&(la[Z]=d3.svg.arc().outerRadius(Q[Z].outerRadius()),!1!==C&&la[Z].startAngle(C),!1!==V&&la[Z].endAngle(V)):J||la[Z].innerRadius(0);Y.enter().append("g").classed("nv-label",!0).each(function(a,c){var e=d3.select(this);e.attr("transform",function(a,
c){if(M){a.outerRadius=x[c]+10;a.innerRadius=x[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+la[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;return"translate("+la[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",M?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var wa=
{},xa=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};Y.watchTransition(l,"pie labels").attr("transform",function(a,c){if(M){a.outerRadius=x[c]+10;a.innerRadius=x[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+la[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;var e=la[c].centroid(a),f=(a.endAngle-a.startAngle)/(2*Math.PI);a.value&&f>=D&&(f=xa(e),wa[f]&&(e[1]-=14),wa[xa(e)]=!0);
return"translate("+e+")"});Y.select(".nv-label text").style("text-anchor",function(a,c){return M?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),f="";if(!a.value||e<D)return"";if("function"===typeof H)f=H(a,c,{key:h(a.data),value:r(a.data),percent:z(e)});else switch(H){case "key":f=h(a.data);break;case "value":f=z(r(a.data));break;case "percent":f=d3.format("%")(e)}return f})}});l.renderEnd("pie immediate");return a}var c=
{top:0,right:0,bottom:0,left:0},f=500,n=500,h=function(a){return a.x},r=function(a){return a.y},v=Math.floor(1E4*Math.random()),k=null,w=e.utils.defaultColor(),z=d3.format(",.2f"),F=!0,G=!1,H="key",D=.02,J=!1,B=!1,O=!0,K=0,M=!1,C=!1,p=!1,V=!1,R=0,I=.5,E=250,u=[],N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),Q=[],A=[],l=e.utils.renderWatch(N);a.dispatch=N;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return u},set:function(a){u=a}},width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},showLabels:{get:function(){return F},set:function(a){F=a}},title:{get:function(){return B},set:function(a){B=a}},titleOffset:{get:function(){return K},set:function(a){K=a}},labelThreshold:{get:function(){return D},set:function(a){D=a}},valueFormat:{get:function(){return z},set:function(a){z=a}},x:{get:function(){return h},set:function(a){h=
a}},id:{get:function(){return v},set:function(a){v=a}},endAngle:{get:function(){return V},set:function(a){V=a}},startAngle:{get:function(){return C},set:function(a){C=a}},padAngle:{get:function(){return p},set:function(a){p=a}},cornerRadius:{get:function(){return R},set:function(a){R=a}},donutRatio:{get:function(){return I},set:function(a){I=a}},labelsOutside:{get:function(){return G},set:function(a){G=a}},labelSunbeamLayout:{get:function(){return M},set:function(a){M=a}},donut:{get:function(){return J},
set:function(a){J=a}},growOnHover:{get:function(){return O},set:function(a){O=a}},pieLabelsOutside:{get:function(){return G},set:function(a){G=a;e.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return G},set:function(a){G=a;e.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return z},set:function(a){z=a;e.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return c},set:function(a){c.top=
"undefined"!=typeof a.top?a.top:c.top;c.right="undefined"!=typeof a.right?a.right:c.right;c.bottom="undefined"!=typeof a.bottom?a.bottom:c.bottom;c.left="undefined"!=typeof a.left?a.left:c.left}},duration:{get:function(){return E},set:function(a){E=a;l.reset(E)}},y:{get:function(){return r},set:function(a){r=d3.functor(a)}},color:{get:function(){return w},set:function(a){w=e.utils.getColor(a)}},labelType:{get:function(){return H},set:function(a){H=a||"key"}}});e.utils.initOptions(a);return a};e.models.pieChart=
function(){function a(p){K.reset();K.models(c);p.each(function(p){var n=d3.select(this);e.utils.initSVG(n);var w=e.utils.availableWidth(v,n,h),K=e.utils.availableHeight(k,n,h);a.update=function(){n.transition().call(a)};a.container=this;H.setter(C(p),a.update).getter(M(p)).update();H.disabled=p.map(function(a){return!!a.disabled});if(!D)for(u in D={},H)D[u]=H[u]instanceof Array?H[u].slice(0):H[u];if(p&&p.length)n.selectAll(".nv-noData").remove();else return e.utils.noData(a,n),a;var u=n.selectAll("g.nv-wrap.nv-pieChart").data([p]);
var G=u.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),B=u.select("g");G.append("g").attr("class","nv-pieWrap");G.append("g").attr("class","nv-legendWrap");z?"top"===F?(f.width(w).key(c.x()),u.select(".nv-legendWrap").datum(p).call(f),r||f.height()===h.top||(h.top=f.height(),K=e.utils.availableHeight(k,n,h)),u.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")")):"right"===F&&(G=e.models.legend().width(),w/2<G&&(G=w/2),f.height(K).key(c.x()),f.width(G),w-=
f.width(),u.select(".nv-legendWrap").datum(p).call(f).attr("transform","translate("+w+",0)")):B.select(".nv-legendWrap").selectAll("*").remove();u.attr("transform","translate("+h.left+","+h.top+")");c.width(w).height(K);w=B.select(".nv-pieWrap").datum([p]);d3.transition(w).call(c);f.dispatch.on("stateChange",function(c){for(var e in c)H[e]=c[e];O.stateChange(H);a.update()});O.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),H.disabled=
c.disabled);a.update()})});K.renderEnd("pieChart immediate");return a}var c=e.models.pie(),f=e.models.legend(),n=e.models.tooltip(),h={top:30,right:20,bottom:20,left:20},r=null,v=null,k=null,w=!1,z=!0,F="top",G=e.utils.defaultColor(),H=e.utils.state(),D=null,J=null,B=250,O=d3.dispatch("stateChange","changeState","renderEnd");n.duration(0).headerEnabled(!1).valueFormatter(function(a,e){return c.valueFormat()(a,e)});var K=e.utils.renderWatch(O),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
C=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color,percent:c.percent};w||(delete c.percent,delete c.series.percent);n.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){n.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){n()});a.legend=f;a.dispatch=O;a.pie=c;a.tooltip=n;a.options=e.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return k},set:function(a){k=a}},noData:{get:function(){return J},set:function(a){J=a}},showTooltipPercent:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return z},set:function(a){z=a}},legendPosition:{get:function(){return F},set:function(a){F=a}},defaultState:{get:function(){return D},set:function(a){D=a}},color:{get:function(){return G},set:function(a){G=a;f.color(G);
c.color(G)}},duration:{get:function(){return B},set:function(a){B=a;K.reset(B);c.duration(B)}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(r=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sankey=function(){function a(){H.forEach(function(a){a.sourceLinks=[];a.targetLinks=[]});D.forEach(function(a){var c=a.source,e=
a.target;"number"===typeof c&&(c=a.source=H[a.source]);"number"===typeof e&&(e=a.target=H[a.target]);c.sourceLinks.push(a);e.targetLinks.push(a)})}function c(){H.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,k),d3.sum(a.targetLinks,k))})}function f(){for(var a=H,c,e=0;a.length&&e<H.length;)c=[],a.forEach(function(a){a.x=e;a.dx=z;a.sourceLinks.forEach(function(a){0>c.indexOf(a.target)&&c.push(a.target)})}),a=c,++e;J&&n(e);h((G[0]-z)/(e-1))}function n(a){H.forEach(function(c){c.sourceLinks.length||
(c.x=a-1)})}function h(a){H.forEach(function(c){c.x*=a})}function r(a){function c(a){function c(a){return(a.source.y+a.sy+a.dy/2)*a.value}n.forEach(function(e,f){e.forEach(function(e){if(e.targetLinks.length){var f=d3.sum(e.targetLinks,c)/d3.sum(e.targetLinks,k);e.y+=(f-O(e))*a}})})}function e(a){function c(a){return(a.target.y+a.ty+a.dy/2)*a.value}n.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var f=d3.sum(e.sourceLinks,c)/d3.sum(e.sourceLinks,k);e.y+=(f-O(e))*
a}})})}function f(){n.forEach(function(a){var c=0;var e=a.length,f;a.sort(h);for(f=0;f<e;++f){var k=a[f];c-=k.y;0<c&&(k.y+=c);c=k.y+k.dy+F}c=c-F-G[1];if(0<c)for(c=k.y-=c,f=e-2;0<=f;--f)k=a[f],c=k.y+k.dy+F-c,0<c&&(k.y-=c),c=k.y})}function h(a,c){return a.y-c.y}var n=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(H).map(function(a){return a.values});(function(){var a=d3.min(n,function(a){return(G[1]-(a.length-1)*F)/d3.sum(a,k)});n.forEach(function(c){c.forEach(function(c,e){c.y=
e;c.dy=c.value*a})});D.forEach(function(c){c.dy=c.value*a})})();f();v();for(var r=1;0<a;--a)e(r*=.99),f(),v(),c(r),f(),v()}function v(){function a(a,c){return a.source.y-c.source.y}function c(a,c){return a.target.y-c.target.y}H.forEach(function(e){e.sourceLinks.sort(c);e.targetLinks.sort(a)});H.forEach(function(a){var c=0,e=0;a.sourceLinks.forEach(function(a){a.sy=c;c+=a.dy});a.targetLinks.forEach(function(a){a.ty=e;e+=a.dy})})}function k(a){return a.value}var w={},z=24,F=8,G=[1,1],H=[],D=[],J=!0,
B=function(){function a(a){var e=a.source.x+a.source.dx,f=a.target.x,h=d3.interpolateNumber(e,f),k=h(c),h=h(1-c),n=a.source.y+a.sy+a.dy/2;a=a.target.y+a.ty+a.dy/2;return"M"+e+","+n+"C"+k+","+n+" "+h+","+a+" "+f+","+a}var c=.5;a.curvature=function(e){if(!arguments.length)return c;c=+e;return a};return a},O=function(a){return a.y+a.dy/2};w.options=e.utils.optionsFunc.bind(w);w._options=Object.create({},{nodeWidth:{get:function(){return z},set:function(a){z=+a}},nodePadding:{get:function(){return F},
set:function(a){F=a}},nodes:{get:function(){return H},set:function(a){H=a}},links:{get:function(){return D},set:function(a){D=a}},size:{get:function(){return G},set:function(a){G=a}},sinksRight:{get:function(){return J},set:function(a){J=a}},layout:{get:function(){a();c();f();r(32)},set:function(e){a();c();f();r(e)}},relayout:{get:function(){v()},set:function(a){}},center:{get:function(){return O()},set:function(a){"function"===typeof a&&(O=a)}},link:{get:function(){return B()},set:function(a){"function"===
typeof a&&(B=a);return B()}}});e.utils.initOptions(w);return w};e.models.sankeyChart=function(){function a(c){c.each(function(a){var e={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},
{source:3,target:5,value:186}]},k=!1,z=!1;0<=("object"===typeof a.nodes&&a.nodes.length)&&0<=("object"===typeof a.links&&a.links.length)&&(k=!0);a.nodes&&0<a.nodes.length&&a.links&&0<a.links.length&&(z=!0);if(!k)return console.error("NVD3 Sankey chart error:","invalid data format for",a),console.info("Valid data format is: ",e,JSON.stringify(e)),O(c,"Error loading chart, data is invalid"),!1;if(!z)return O(c,"No data available"),!1;e=c.append("svg").attr("width",n).attr("height",h).append("g").attr("class",
"nvd3 nv-wrap nv-sankeyChart");f.nodeWidth(r).nodePadding(v).size([n,h]);var K=f.link();f.nodes(a.nodes).links(a.links).layout(32).center(w);var G=e.append("g").selectAll(".link").data(a.links).enter().append("path").attr("class","link").attr("d",K).style("stroke-width",function(a){return Math.max(1,a.dy)}).sort(function(a,c){return c.dy-a.dy});G.append("title").text(H);a=e.append("g").selectAll(".node").data(a.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+
a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(h-a.dy,d3.event.y)))+")");f.relayout();G.attr("d",K)}));a.append("rect").attr("height",function(a){return a.dy}).attr("width",f.nodeWidth()).style("fill",D).style("stroke",J).append("title").text(B);a.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",
".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<n/2}).attr("x",6+f.nodeWidth()).attr("text-anchor","start")});return a}var c={top:5,right:0,bottom:5,left:0},f=e.models.sankey(),n=600,h=400,r=36,v=40,k="units",w=void 0,z=d3.format(",.0f"),F=function(a){return z(a)+" "+k},G=d3.scale.category20(),H=function(a){return a.source.name+" \u2192 "+a.target.name+"\n"+F(a.value)},D=function(a){return a.color=G(a.name.replace(/ .*/,""))},
J=function(a){return d3.rgb(a.color).darker(2)},B=function(a){return a.name+"\n"+F(a.value)},O=function(a,c){a.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(c)};a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{units:{get:function(){return k},set:function(a){k=a}},width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return h},set:function(a){h=a}},format:{get:function(){return F},set:function(a){F=
a}},linkTitle:{get:function(){return H},set:function(a){H=a}},nodeWidth:{get:function(){return r},set:function(a){r=a}},nodePadding:{get:function(){return v},set:function(a){v=a}},center:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},nodeStyle:{get:function(){return{}},set:function(a){D=void 0!==
a.fillColor?a.fillColor:D;J=void 0!==a.strokeColor?a.strokeColor:J;B=void 0!==a.title?a.title:B}}});e.utils.initOptions(a);return a};e.models.scatter=function(){function a(a){delete va[a[0].series+":"+a[1]]}function c(a){var c=a[0].series+":"+a[1];var e=va[c]=va[c]||{};var f=!1;for(c=1;c<arguments.length;c+=2){var h=arguments[c];var k=arguments[c+1](a[0],a[1]);e[h]===k&&e.hasOwnProperty(h)||(e[h]=k,f=!0)}return f}function f(X){fa.reset();X.each(function(X){function ta(){da=!1;if(!p)return!1;if(!0===
U){var a=d3.merge(X.map(function(a,c){return a.values.map(function(a,f){var h=D(a,f),k=J(a,f);return[e.utils.NaNtoZero(F(h))+1E-4*Math.random(),e.utils.NaNtoZero(G(k))+1E-4*Math.random(),c,f,a]}).filter(function(a,c){return V(a[4],c)})}));if(0==a.length)return!1;3>a.length&&(a.push([F.range()[0]-20,G.range()[0]-20,null,null]),a.push([F.range()[1]+20,G.range()[1]+20,null,null]),a.push([F.range()[0]-20,G.range()[0]+20,null,null]),a.push([F.range()[1]+20,G.range()[1]-20,null,null]));var c=d3.geom.polygon([[-10,
-10],[-10,r+10],[h+10,r+10],[h+10,-10]]),f=d3.geom.voronoi(a).map(function(e,f){return{data:c.clip(e),series:a[f][2],point:a[f][3]}});Fa.select(".nv-point-paths").selectAll("path").remove();var f=Fa.select(".nv-point-paths").selectAll("path").data(f),k=f.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+w+"-"+c+")"});N&&k.style("fill",
d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));u&&(Fa.select(".nv-point-clips").selectAll("*").remove(),Fa.select(".nv-point-clips").selectAll("clipPath").data(a).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+w+"-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",Q));var l=function(a,c,e){if(da)return 0;var f=X[c.series];if(void 0!==f){var h=f.values[c.point];
h.color=v(f,c.series);h.x=D(h);h.y=J(h);var k=z.node().getBoundingClientRect(),l=window.pageYOffset||document.documentElement.scrollTop,p=window.pageXOffset||document.documentElement.scrollLeft,k={left:F(D(h,c.point))+k.left+p+n.left+10,top:G(J(h,c.point))+k.top+l+n.top+10};e({point:h,series:f,pos:k,relativePos:[F(D(h,c.point))+n.left,G(J(h,c.point))+n.top],seriesIndex:c.series,pointIndex:c.point,event:d3.event,element:a})}};f.on("click",function(a){l(this,a,x.elementClick)}).on("dblclick",function(a){l(this,
a,x.elementDblClick)}).on("mouseover",function(a){l(this,a,x.elementMouseover)}).on("mouseout",function(a,c){l(this,a,x.elementMouseout)})}else Fa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementClick({point:f,series:e,pos:[F(D(f,c))+n.left,G(J(f,c))+n.top],relativePos:[F(D(f,c))+n.left,G(J(f,c))+n.top],seriesIndex:a.series,pointIndex:c,event:d3.event,element:this})}).on("dblclick",function(a,
c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementDblClick({point:f,series:e,pos:[F(D(f,c))+n.left,G(J(f,c))+n.top],relativePos:[F(D(f,c))+n.left,G(J(f,c))+n.top],seriesIndex:a.series,pointIndex:c})}).on("mouseover",function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementMouseover({point:f,series:e,pos:[F(D(f,c))+n.left,G(J(f,c))+n.top],relativePos:[F(D(f,c))+n.left,G(J(f,c))+n.top],seriesIndex:a.series,pointIndex:c,color:v(a,c)})}).on("mouseout",
function(a,c){if(da||!X[a.series])return 0;var e=X[a.series],f=e.values[c];x.elementMouseout({point:f,series:e,pos:[F(D(f,c))+n.left,G(J(f,c))+n.top],relativePos:[F(D(f,c))+n.left,G(J(f,c))+n.top],seriesIndex:a.series,pointIndex:c,color:v(a,c)})})}z=d3.select(this);var sa=e.utils.availableWidth(h,z,n),ma=e.utils.availableHeight(r,z,n);e.utils.initSVG(z);X.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Ga=f.yScale().name===d3.scale.log().name?!0:!1,na=A&&l&&ca?[]:d3.merge(X.map(function(a){return a.values.map(function(a,
c){return{x:D(a,c),y:J(a,c),size:B(a,c)}})}));F.domain(A||d3.extent(na.map(function(a){return a.x}).concat(K)));R&&X[0]?F.range(q||[(sa*I+sa)/(2*X[0].values.length),sa-sa*(1+I)/(2*X[0].values.length)]):F.range(q||[0,sa]);if(Ga){var za=d3.min(na.map(function(a){if(0!==a.y)return a.y}));G.clamp(!0).domain(l||d3.extent(na.map(function(a){return 0!==a.y?a.y:.1*za}).concat(M))).range(Z||[ma,0])}else G.domain(l||d3.extent(na.map(function(a){return a.y}).concat(M))).range(Z||[ma,0]);H.domain(ca||d3.extent(na.map(function(a){return a.size}).concat(C))).range(Y||
ya);aa=F.domain()[0]===F.domain()[1]||G.domain()[0]===G.domain()[1];F.domain()[0]===F.domain()[1]&&(F.domain()[0]?F.domain([F.domain()[0]-.01*F.domain()[0],F.domain()[1]+.01*F.domain()[1]]):F.domain([-1,1]));G.domain()[0]===G.domain()[1]&&(G.domain()[0]?G.domain([G.domain()[0]-.01*G.domain()[0],G.domain()[1]+.01*G.domain()[1]]):G.domain([-1,1]));isNaN(F.domain()[0])&&F.domain([-1,1]);isNaN(G.domain()[0])&&G.domain([-1,1]);W=W||F;ka=ka||G;la=la||H;var ea=F(1)!==W(1)||G(1)!==ka(1)||H(1)!==la(1);wa=
wa||h;xa=xa||r;var ra=wa!==h||xa!==r,Fa=z.selectAll("g.nv-wrap.nv-scatter").data([X]),Ga=Fa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+w),na=Ga.append("defs"),va=Ga.append("g"),Ka=Fa.select("g");Fa.classed("nv-single-point",aa);va.append("g").attr("class","nv-groups");va.append("g").attr("class","nv-point-paths");Ga.append("g").attr("class","nv-point-clips");Fa.attr("transform","translate("+n.left+","+n.top+")");na.append("clipPath").attr("id","nv-edge-clip-"+w).append("rect").attr("transform",
"translate( -10, -10)");Fa.select("#nv-edge-clip-"+w+" rect").attr("width",sa+20).attr("height",0<ma?ma+20:0);Ka.attr("clip-path",E?"url(#nv-edge-clip-"+w+")":"");da=!0;sa=Fa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});sa.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);sa.exit().remove();sa.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("nv-noninteractive",!p).classed("hover",function(a){return a.hover});
sa.watchTransition(fa,"scatter: groups").style("fill",function(a,c){return v(a,c)}).style("stroke",function(a,c){return a.pointBorderColor||k||v(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);ma=sa.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return V(a[0],c)})});ma.enter().append("path").attr("class",function(a){return"nv-point nv-point-"+a[1]}).style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",
function(a){return"translate("+e.utils.NaNtoZero(W(D(a[0],a[1])))+","+e.utils.NaNtoZero(ka(J(a[0],a[1])))+")"}).attr("d",e.utils.symbol().type(function(a){return O(a[0])}).size(function(a){return H(B(a[0],a[1]))}));ma.exit().each(a).remove();sa.exit().selectAll("path.nv-point").watchTransition(fa,"scatter exit").attr("transform",function(a){return"translate("+e.utils.NaNtoZero(F(D(a[0],a[1])))+","+e.utils.NaNtoZero(G(J(a[0],a[1])))+")"}).remove();ma.filter(function(a){return ea||ra||c(a,"x",D,"y",
J)}).watchTransition(fa,"scatter points").attr("transform",function(a){return"translate("+e.utils.NaNtoZero(F(D(a[0],a[1])))+","+e.utils.NaNtoZero(G(J(a[0],a[1])))+")"});ma.filter(function(a){return ea||ra||c(a,"shape",O,"size",B)}).watchTransition(fa,"scatter points").attr("d",e.utils.symbol().type(function(a){return O(a[0])}).size(function(a){return H(B(a[0],a[1]))}));Ba&&(ma=sa.selectAll(".nv-label").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return V(a[0],
c)})}),ma.enter().append("text").style("fill",function(a,c){return a.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(W(D(a[0],a[1])))+Math.sqrt(H(B(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(ka(J(a[0],a[1])))+")"}).text(function(a,c){return a[0].label}),ma.exit().remove(),sa.exit().selectAll("path.nv-label").watchTransition(fa,"scatter exit").attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(F(D(a[0],
a[1])))+Math.sqrt(H(B(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(G(J(a[0],a[1])))+")"}).remove(),ma.each(function(a){d3.select(this).classed("nv-label",!0).classed("nv-label-"+a[1],!1).classed("hover",!1)}),ma.watchTransition(fa,"scatter labels").attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(F(D(a[0],a[1])))+Math.sqrt(H(B(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(G(J(a[0],a[1])))+")"}));oa?(clearTimeout(ga),ga=setTimeout(ta,oa)):ta();W=F.copy();ka=G.copy();la=H.copy();
wa=h;xa=r});fa.renderEnd("scatter immediate");return f}var n={top:0,right:0,bottom:0,left:0},h=null,r=null,v=e.utils.defaultColor(),k=null,w=Math.floor(1E5*Math.random()),z=null,F=d3.scale.linear(),G=d3.scale.linear(),H=d3.scale.linear(),D=function(a){return a.x},J=function(a){return a.y},B=function(a){return a.size||1},O=function(a){return a.shape||"circle"},K=[],M=[],C=[],p=!0,V=function(a){return!a.notActive},R=!1,I=.1,E=!1,u=!0,N=!1,Q=function(){return 25},A=null,l=null,q=null,Z=null,ca=null,
Y=null,aa=!1,x=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),U=!0,X=250,oa=300,Ba=!1,W,ka,la,wa,xa,ga,da=!1,fa=e.utils.renderWatch(x,X),ya=[16,256],va={};f.dispatch=x;f.options=e.utils.optionsFunc.bind(f);f._calls=new function(){this.clearHighlights=function(){e.dom.write(function(){z.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,c,f){e.dom.write(function(){z.select(".nv-groups").selectAll(".nv-series-"+
a).selectAll(".nv-point-"+c).classed("hover",f)})}};x.on("elementMouseover.point",function(a){p&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!0)});x.on("elementMouseout.point",function(a){p&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!1)});f._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return F},set:function(a){F=a}},yScale:{get:function(){return G},set:function(a){G=a}},
pointScale:{get:function(){return H},set:function(a){H=a}},xDomain:{get:function(){return A},set:function(a){A=a}},yDomain:{get:function(){return l},set:function(a){l=a}},pointDomain:{get:function(){return ca},set:function(a){ca=a}},xRange:{get:function(){return q},set:function(a){q=a}},yRange:{get:function(){return Z},set:function(a){Z=a}},pointRange:{get:function(){return Y},set:function(a){Y=a}},forceX:{get:function(){return K},set:function(a){K=a}},forceY:{get:function(){return M},set:function(a){M=
a}},forcePoint:{get:function(){return C},set:function(a){C=a}},interactive:{get:function(){return p},set:function(a){p=a}},pointActive:{get:function(){return V},set:function(a){V=a}},padDataOuter:{get:function(){return I},set:function(a){I=a}},padData:{get:function(){return R},set:function(a){R=a}},clipEdge:{get:function(){return E},set:function(a){E=a}},clipVoronoi:{get:function(){return u},set:function(a){u=a}},clipRadius:{get:function(){return Q},set:function(a){Q=a}},showVoronoi:{get:function(){return N},
set:function(a){N=a}},id:{get:function(){return w},set:function(a){w=a}},interactiveUpdateDelay:{get:function(){return oa},set:function(a){oa=a}},showLabels:{get:function(){return Ba},set:function(a){Ba=a}},pointBorderColor:{get:function(){return k},set:function(a){k=a}},x:{get:function(){return D},set:function(a){D=d3.functor(a)}},y:{get:function(){return J},set:function(a){J=d3.functor(a)}},pointSize:{get:function(){return B},set:function(a){B=d3.functor(a)}},pointShape:{get:function(){return O},
set:function(a){O=d3.functor(a)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return X},set:function(a){X=a;fa.reset(X)}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}},useVoronoi:{get:function(){return U},set:function(a){U=a;!1===U&&(u=!1)}}});e.utils.initOptions(f);return f};e.models.scatterChart=
function(){function a(u){A.reset();A.models(c);C&&A.models(f);p&&A.models(n);O&&A.models(r);K&&A.models(v);u.each(function(u){H=d3.select(this);e.utils.initSVG(H);var ca=e.utils.availableWidth(F,H,w),aa=e.utils.availableHeight(G,H,w);a.update=function(){0===N?H.call(a):H.transition().duration(N).call(a)};a.container=this;R.setter(q(u),a.update).getter(l(u)).update();R.disabled=u.map(function(a){return!!a.disabled});if(!I)for(U in I={},R)I[U]=R[U]instanceof Array?R[U].slice(0):R[U];if(u&&u.length&&
u.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return e.utils.noData(a,H),A.renderEnd("scatter immediate"),a;J=c.xScale();B=c.yScale();var x=H.selectAll("g.nv-wrap.nv-scatterChart").data([u]);var U=x.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()).append("g");var X=x.select("g");U.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");U.append("g").attr("class","nv-x nv-axis");U.append("g").attr("class",
"nv-y nv-axis");U.append("g").attr("class","nv-scatterWrap");U.append("g").attr("class","nv-regressionLinesWrap");U.append("g").attr("class","nv-distWrap");U.append("g").attr("class","nv-legendWrap");V&&X.select(".nv-y.nv-axis").attr("transform","translate("+ca+",0)");M?(h.width(ca),x.select(".nv-legendWrap").datum(u).call(h),z||h.height()===w.top||(w.top=h.height(),aa=e.utils.availableHeight(G,H,w)),x.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")")):X.select(".nv-legendWrap").selectAll("*").remove();
x.attr("transform","translate("+w.left+","+w.top+")");c.width(ca).height(aa).color(u.map(function(a,c){a.color=a.color||D(a,c);return a.color}).filter(function(a,c){return!u[c].disabled})).showLabels(Q);x.select(".nv-scatterWrap").datum(u.filter(function(a){return!a.disabled})).call(c);x.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");x=x.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});x.enter().append("g").attr("class","nv-regLines");
x=x.selectAll(".nv-regLine").data(function(a){return[a]});x.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);x.filter(function(a){return a.intercept&&a.slope}).watchTransition(A,"scatterPlusLineChart: regline").attr("x1",J.range()[0]).attr("x2",J.range()[1]).attr("y1",function(a,c){return B(J.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return B(J.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return D(a,e)}).style("stroke-opacity",function(a,
c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});C&&(f.scale(J)._ticks(e.utils.calcTicksX(ca/100,u)).tickSize(-aa,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+B.range()[0]+")").call(f));p&&(n.scale(B)._ticks(e.utils.calcTicksY(aa/36,u)).tickSize(-ca,0),X.select(".nv-y.nv-axis").call(n));O&&(r.getData(c.x()).scale(J).width(ca).color(u.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!u[c].disabled})),U.select(".nv-distWrap").append("g").attr("class",
"nv-distributionX"),X.select(".nv-distributionX").attr("transform","translate(0,"+B.range()[0]+")").datum(u.filter(function(a){return!a.disabled})).call(r));K&&(v.getData(c.y()).scale(B).width(aa).color(u.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!u[c].disabled})),U.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),X.select(".nv-distributionY").attr("transform","translate("+(V?ca:-v.size())+",0)").datum(u.filter(function(a){return!a.disabled})).call(v));
h.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];E.stateChange(R);a.update()});E.on("changeState",function(c){"undefined"!==typeof c.disabled&&(u.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);a.update()});c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0);H.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);H.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",
v.size())});c.dispatch.on("elementMouseover.tooltip",function(a){H.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-aa);H.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+r.size());k.data(a).hidden(!1)});J.copy();B.copy()});A.renderEnd("scatter with line immediate");return a}var c=e.models.scatter(),f=e.models.axis(),n=e.models.axis(),h=e.models.legend(),r=e.models.distribution(),v=e.models.distribution(),k=e.models.tooltip(),
w={top:30,right:20,bottom:50,left:75},z=null,F=null,G=null,H=null,D=e.utils.defaultColor(),J=c.xScale(),B=c.yScale(),O=!1,K=!1,M=!0,C=!0,p=!0,V=!1,R=e.utils.state(),I=null,E=d3.dispatch("stateChange","changeState","renderEnd"),u=null,N=250,Q=!1;c.xScale(J).yScale(B);f.orient("bottom").tickPadding(10);n.orient(V?"right":"left").tickPadding(10);r.axis("x");v.axis("y");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return n.tickFormat()(a,c)});var A=e.utils.renderWatch(E,
N),l=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},q=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=E;a.scatter=c;a.legend=h;a.xAxis=f;a.yAxis=n;a.distX=r;a.distY=v;a.tooltip=k;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return F},set:function(a){F=a}},height:{get:function(){return G},set:function(a){G=a}},container:{get:function(){return H},set:function(a){H=
a}},showDistX:{get:function(){return O},set:function(a){O=a}},showDistY:{get:function(){return K},set:function(a){K=a}},showLegend:{get:function(){return M},set:function(a){M=a}},showXAxis:{get:function(){return C},set:function(a){C=a}},showYAxis:{get:function(){return p},set:function(a){p=a}},defaultState:{get:function(){return I},set:function(a){I=a}},noData:{get:function(){return u},set:function(a){u=a}},duration:{get:function(){return N},set:function(a){N=a}},showLabels:{get:function(){return Q},
set:function(a){Q=a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(z=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},rightAlignYAxis:{get:function(){return V},set:function(a){V=a;n.orient(a?"right":"left")}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a);h.color(D);r.color(D);v.color(D)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sparkline=
function(){function a(r){M.reset();r.each(function(a){var p=f-c.left-c.right,r=n-c.top-c.bottom;h=d3.select(this);e.utils.initSVG(h);v.domain(G||d3.extent(a,w)).range(D||[0,p]);k.domain(H||d3.extent(a,z)).range(J||[r,0]);a=h.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");p=a.selectAll("path").data(function(a){return[a]});p.enter().append("path");p.exit().remove();
p.style("stroke",function(a,c){return a.color||F(a,c)}).attr("d",d3.svg.line().x(function(a,c){return v(w(a,c))}).y(function(a,c){return k(z(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return z(a,c)}),f=c(e.lastIndexOf(k.domain()[1])),h=c(e.indexOf(k.domain()[0])),e=c(e.length-1);return[B?h:null,B?f:null,O?e:null].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();
a.attr("cx",function(a,c){return v(w(a,a.pointIndex))}).attr("cy",function(a,c){return k(z(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return w(a,a.pointIndex)==v.domain()[1]?"nv-point nv-currentValue":z(a,a.pointIndex)==k.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});M.renderEnd("sparkline immediate");return a}var c={top:2,right:0,bottom:2,left:0},f=400,n=32,h=null,r=!0,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},z=function(a){return a.y},F=e.utils.getColor(["#000"]),
G,H,D,J,B=!0,O=!0,K=d3.dispatch("renderEnd"),M=e.utils.renderWatch(K);a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return H},set:function(a){H=a}},xRange:{get:function(){return D},set:function(a){D=a}},yRange:{get:function(){return J},set:function(a){J=a}},xScale:{get:function(){return v},
set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},animate:{get:function(){return r},set:function(a){r=a}},showMinMaxPoints:{get:function(){return B},set:function(a){B=a}},showCurrentPoint:{get:function(){return O},set:function(a){O=a}},x:{get:function(){return w},set:function(a){w=d3.functor(a)}},y:{get:function(){return z},set:function(a){z=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:
c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a)}}});a.dispatch=K;e.utils.initOptions(a);return a};e.models.sparklinePlus=function(){function a(B){O.reset();O.models(c);B.each(function(B){function C(){if(!w){var a=N.selectAll(".nv-hoverValue").data(k),e=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+r(c.x()(B[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);k.length&&(e.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",J),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),N.select(".nv-hoverValue .nv-xValue").text(z(c.x()(B[k[0]],k[0]))),e.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em"),N.select(".nv-hoverValue .nv-yValue").text(F(c.y()(B[k[0]],k[0]))))}}var p=d3.select(this);e.utils.initSVG(p);var K=e.utils.availableWidth(n,p,f),J=e.utils.availableHeight(h,p,f);a.update=function(){p.call(a)};a.container=this;if(B&&B.length)p.selectAll(".nv-noData").remove();else return e.utils.noData(a,p),a;var I=c.y()(B[B.length-1],B.length-1);r=c.xScale();v=c.yScale();var E=p.selectAll("g.nv-wrap.nv-sparklineplus").data([B]),u=
E.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),N=E.select("g");u.append("g").attr("class","nv-sparklineWrap");u.append("g").attr("class","nv-valueWrap");u.append("g").attr("class","nv-hoverArea");E.attr("transform","translate("+f.left+","+f.top+")");E=N.select(".nv-sparklineWrap");c.width(K).height(J);E.call(c);G&&(E=N.select(".nv-valueWrap").selectAll(".nv-currentValue").data([I]),E.enter().append("text").attr("class","nv-currentValue").attr("dx",D?-8:8).attr("dy",
".9em").style("text-anchor",D?"end":"start"),E.attr("x",K+(D?f.right:0)).attr("y",H?function(a){return v(a)}:0).style("fill",c.color()(B[B.length-1],B.length-1)).text(F(I)));u.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!w){for(var a=d3.mouse(this)[0]-f.left,a=Math.round(r.invert(a)),e=Math.abs(c.x()(B[0],0)-a),h=0,n=0;n<B.length;n++)Math.abs(c.x()(B[n],n)-a)<e&&(e=Math.abs(c.x()(B[n],n)-a),h=n);k=[h];C()}}).on("click",function(){w=!w}).on("mouseout",function(){k=[];C()});
N.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+","+-f.top+")"}).attr("width",K+f.left+f.right).attr("height",J+f.top)});O.renderEnd("sparklinePlus immediate");return a}var c=e.models.sparkline(),f={top:15,right:100,bottom:10,left:50},n=null,h=null,r,v,k=[],w=!1,z=d3.format(",r"),F=d3.format(",.2f"),G=!0,H=!0,D=!1,J=null,B=d3.dispatch("renderEnd"),O=e.utils.renderWatch(B);a.dispatch=B;a.sparkline=c;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return h},set:function(a){h=a}},xTickFormat:{get:function(){return z},set:function(a){z=a}},yTickFormat:{get:function(){return F},set:function(a){F=a}},showLastValue:{get:function(){return G},set:function(a){G=a}},alignValue:{get:function(){return H},set:function(a){H=a}},rightAlignValue:{get:function(){return D},set:function(a){D=a}},noData:{get:function(){return J},set:function(a){J=a}},margin:{get:function(){return f},
set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.stackedArea=function(){function a(F){p.reset();p.models(K);F.each(function(F){var I=f-c.left-c.right,E=n-c.top-c.bottom;v=d3.select(this);e.utils.initSVG(v);B=K.xScale();O=K.yScale();var u=F;F.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,
e){a.index=e;a.seriesIndex=c;return a})});F=F.filter(function(a){return!a.disabled});F=d3.layout.stack().order(H).offset(G).values(function(a){return a.values}).x(k).y(w).out(function(a,c,e){a.display={y:e,y0:c}})(F);var N=v.selectAll("g.nv-wrap.nv-stackedarea").data([F]),M=N.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),A=M.append("defs"),M=M.append("g"),l=N.select("g");M.append("g").attr("class","nv-areaWrap");M.append("g").attr("class","nv-scatterWrap");N.attr("transform","translate("+
c.left+","+c.top+")");0==K.forceY().length&&K.forceY().push(0);K.width(I).height(E).x(k).y(function(a){if(void 0!==a.display)return a.display.y+a.display.y0}).color(F.map(function(a,c){a.color=a.color||h(a,a.seriesIndex);return a.color}));l.select(".nv-scatterWrap").datum(F).call(K);A.append("clipPath").attr("id","nv-edge-clip-"+r).append("rect");N.select("#nv-edge-clip-"+r+" rect").attr("width",I).attr("height",E);l.attr("clip-path",J?"url(#nv-edge-clip-"+r+")":"");var q=d3.svg.area().defined(z).x(function(a,
c){return B(k(a,c))}).y0(function(a){return O(a.display.y0)}).y1(function(a){return O(a.display.y+a.display.y0)}).interpolate(D),V=d3.svg.area().defined(z).x(function(a,c){return B(k(a,c))}).y0(function(a){return O(a.display.y0)}).y1(function(a){return O(a.display.y0)}),I=l.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});I.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return V(a.values,a.seriesIndex)}).on("mouseover",
function(a,c){d3.select(this).classed("hover",!0);C.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);C.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);C.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});I.exit().remove();I.style("fill",
function(a,c){return a.color||h(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||h(a,a.seriesIndex)});I.watchTransition(p,"stackedArea path").attr("d",function(a,c){return q(a.values,c)});K.dispatch.on("elementMouseover.area",function(a){l.select(".nv-chart-"+r+" .nv-area-"+a.seriesIndex).classed("hover",!0)});K.dispatch.on("elementMouseout.area",function(a){l.select(".nv-chart-"+r+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,
e=a[0].length,f,h,k,l=[];for(h=0;h<e;++h){for(k=f=0;f<u.length;f++)k+=w(u[f].values[h]);if(k)for(f=0;f<c;f++)a[f][h][1]/=k;else for(f=0;f<c;f++)a[f][h][1]=0}for(h=0;h<e;++h)l[h]=0;return l}});p.renderEnd("stackedArea immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,n=500,h=e.utils.defaultColor(),r=Math.floor(1E5*Math.random()),v=null,k=function(a){return a.x},w=function(a){return a.y},z=function(a,c){return!isNaN(w(a,c))&&null!==w(a,c)},F="stack",G="zero",H="default",D="linear",J=
!1,B,O,K=e.models.scatter(),M=250,C=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");K.pointSize(2.2).pointDomain([2.2,2.2]);var p=e.utils.renderWatch(C,M);a.dispatch=C;a.scatter=K;K.dispatch.on("elementClick",function(){C.elementClick.apply(this,arguments)});K.dispatch.on("elementMouseover",function(){C.elementMouseover.apply(this,arguments)});K.dispatch.on("elementMouseout",function(){C.elementMouseout.apply(this,arguments)});
a.interpolate=function(c){if(!arguments.length)return D;D=c;return a};a.duration=function(c){if(!arguments.length)return M;M=c;p.reset(M);K.duration(M);return a};a.dispatch=C;a.scatter=K;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return n},set:function(a){n=a}},defined:{get:function(){return z},set:function(a){z=a}},clipEdge:{get:function(){return J},set:function(a){J=a}},offset:{get:function(){return G},
set:function(a){G=a}},order:{get:function(){return H},set:function(a){H=a}},interpolate:{get:function(){return D},set:function(a){D=a}},x:{get:function(){return k},set:function(a){k=d3.functor(a)}},y:{get:function(){return w},set:function(a){w=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return h},set:function(a){h=
e.utils.getColor(a)}},style:{get:function(){return F},set:function(c){F=c;switch(F){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return M},set:function(a){M=a;p.reset(M);K.duration(M)}}});e.utils.inheritOptions(a,
K);e.utils.initOptions(a);return a};e.models.stackedAreaChart=function(){function a(k){U.reset();U.models(c);K&&U.models(f);M&&U.models(n);k.each(function(k){function A(){K&&ta.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+fa+")").transition().duration(Y).call(f)}function W(){if(M){if("expand"===c.style()||"stack_percent"===c.style()){var a=n.tickFormat();aa&&a===Ba||(aa=a);n.tickFormat(Ba)}else aa&&(n.tickFormat(aa),aa=null);ta.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(n)}}
function U(a){ta.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}).map(function(e,f){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,f){return c.x()(e,f)>=a[0]&&c.x()(e,f)<=a[1]}),disableTooltip:e.disableTooltip}})).transition().duration(Y).call(c);A();W()}var ga=d3.select(this);e.utils.initSVG(ga);var da=e.utils.availableWidth(G,ga,z),fa=e.utils.availableHeight(H,ga,z)-(p?w.height():0);a.update=function(){ga.transition().duration(Y).call(a)};
a.container=this;N.setter(oa(k),a.update).getter(X(k)).update();N.disabled=k.map(function(a){return!!a.disabled});if(!Q)for(ka in Q={},N)Q[ka]=N[ka]instanceof Array?N[ka].slice(0):N[ka];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)ga.selectAll(".nv-noData").remove();else return e.utils.noData(a,ga),a;E=c.xScale();u=c.yScale();var ka=ga.selectAll("g.nv-wrap.nv-stackedAreaChart").data([k]);var va=ka.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),
ta=ka.select("g");va.append("g").attr("class","nv-legendWrap");va.append("g").attr("class","nv-controlsWrap");var ra=va.append("g").attr("class","nv-focus");ra.append("g").attr("class","nv-background").append("rect");ra.append("g").attr("class","nv-x nv-axis");ra.append("g").attr("class","nv-y nv-axis");ra.append("g").attr("class","nv-stackedWrap");ra.append("g").attr("class","nv-interactive");va.append("g").attr("class","nv-focusWrap");B?(va=J&&"top"===O?da-q:da,h.width(va),ta.select(".nv-legendWrap").datum(k).call(h),
"bottom"===O?(va=(K?12:0)+10,z.bottom=Math.max(h.height()+va,z.bottom),fa=e.utils.availableHeight(H,ga,z)-(p?w.height():0),va=fa+va,ta.select(".nv-legendWrap").attr("transform","translate(0,"+va+")")):"top"===O&&(F||z.top==h.height()||(z.top=h.height(),fa=e.utils.availableHeight(H,ga,z)-(p?w.height():0)),ta.select(".nv-legendWrap").attr("transform","translate("+(da-va)+","+-z.top+")"))):ta.select(".nv-legendWrap").selectAll("*").remove();if(J){var Ja=[{key:ca.stacked||"Stacked",metaKey:"Stacked",
disabled:"stack"!=c.style(),style:"stack"},{key:ca.stream||"Stream",metaKey:"Stream",disabled:"stream"!=c.style(),style:"stream"},{key:ca.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=c.style(),style:"expand"},{key:ca.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=c.style(),style:"stack_percent"}];q=Z.length/3*260;Ja=Ja.filter(function(a){return-1!==Z.indexOf(a.metaKey)});r.width(q).color(["#444","#444","#444"]);ta.select(".nv-controlsWrap").datum(Ja).call(r);
va=Math.max(r.height(),B&&"top"===O?h.height():0);z.top!=va&&(z.top=va,fa=e.utils.availableHeight(H,ga,z)-(p?w.height():0));ta.select(".nv-controlsWrap").attr("transform","translate(0,"+-z.top+")")}else ta.select(".nv-controlsWrap").selectAll("*").remove();ka.attr("transform","translate("+z.left+","+z.top+")");C&&ta.select(".nv-y.nv-axis").attr("transform","translate("+da+",0)");V&&(v.width(da).height(fa).margin({left:z.left,top:z.top}).svgContainer(ga).xScale(E),ka.select(".nv-interactive").call(v));
ta.select(".nv-focus .nv-background rect").attr("width",da).attr("height",fa);c.width(da).height(fa).color(k.map(function(a,c){return a.color||D(a,c)}).filter(function(a,c){return!k[c].disabled}));ka=ta.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}));K&&f.scale(E)._ticks(e.utils.calcTicksX(da/100,k)).tickSize(-fa,0);M&&(va="wiggle"===c.offset()?0:e.utils.calcTicksY(fa/36,k),n.scale(u)._ticks(va).tickSize(-da,0));p?(w.width(da),ta.select(".nv-focusWrap").attr("transform",
"translate(0,"+(fa+z.bottom+w.margin().top)+")").datum(k.filter(function(a){return!a.disabled})).call(w),da=w.brush.empty()?w.xDomain():w.brush.extent(),null!==da&&U(da)):(ka.transition().call(c),A(),W());c.dispatch.on("areaClick.toggle",function(c){1===k.filter(function(a){return!a.disabled}).length?k.forEach(function(a){a.disabled=!1}):k.forEach(function(a,e){a.disabled=e!=c.seriesIndex});N.disabled=k.map(function(a){return!!a.disabled});l.stateChange(N);a.update()});h.dispatch.on("stateChange",
function(c){for(var e in c)N[e]=c[e];l.stateChange(N);a.update()});r.dispatch.on("legendClick",function(e,f){e.disabled&&(Ja=Ja.map(function(a){a.disabled=!0;return a}),e.disabled=!1,c.style(e.style),N.style=c.style(),l.stateChange(N),a.update())});v.dispatch.on("elementMousemove",function(f){c.clearHighlights();var h,l,n,p=[],q=0,r=!0;k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,v){l=e.interactiveBisect(k.values,f.pointXValue,a.x());var u=k.values[l];null!=a.y()(u,
l)&&c.highlightPoint(v,l,!0);if("undefined"!==typeof u){"undefined"===typeof h&&(h=u);"undefined"===typeof n&&(n=a.xScale()(a.x()(u,l)));var x="expand"==c.style()?u.display.y:a.y()(u,l);p.push({key:k.key,value:x,color:D(k,k.seriesIndex),point:u});R&&"expand"!=c.style()&&null!=x&&(q+=x,r=!1)}});p.reverse();if(2<p.length){var u=a.yScale().invert(f.mouseY),w=null;p.forEach(function(a,c){u=Math.abs(u);var e=Math.abs(a.point.display.y0),f=Math.abs(a.point.display.y);u>=e&&u<=f+e&&(w=c)});null!=w&&(p[w].highlight=
!0)}R&&"expand"!=c.style()&&2<=p.length&&!r&&p.push({key:I,value:q,total:!0});var z=a.x()(h,l),G=v.tooltip.valueFormatter();"expand"===c.style()||"stack_percent"===c.style()?(x||(x=G),G=d3.format(".1%")):x&&(G=x,x=null);v.tooltip.valueFormatter(G).data({value:z,series:p})();v.renderGuideLine(n)});v.dispatch.on("elementMouseout",function(a){c.clearHighlights()});w.dispatch.on("onBrush",function(a){U(a)});l.on("changeState",function(e){"undefined"!==typeof e.disabled&&k.length===e.disabled.length&&
(k.forEach(function(a,c){a.disabled=e.disabled[c]}),N.disabled=e.disabled);"undefined"!==typeof e.style&&c.style(e.style);a.update()})});U.renderEnd("stacked Area chart immediate");return a}var c=e.models.stackedArea(),f=e.models.axis(),n=e.models.axis(),h=e.models.legend(),r=e.models.legend(),v=e.interactiveGuideline(),k=e.models.tooltip(),w=e.models.focus(e.models.stackedArea()),z={top:10,right:25,bottom:50,left:60},F=null,G=null,H=null,D=e.utils.defaultColor(),J=!0,B=!0,O="top",K=!0,M=!0,C=!1,
p=!1,V=!1,R=!0,I="TOTAL",E,u,N=e.utils.state(),Q=null,A=null,l=d3.dispatch("stateChange","changeState","renderEnd"),q=250,Z=["Stacked","Stream","Expanded"],ca={},Y=250;N.style=c.style();f.orient("bottom").tickPadding(7);n.orient(C?"right":"left");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return n.tickFormat()(a,c)});v.tooltip.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return null==a?"N/A":n.tickFormat()(a,
c)});var aa=null,x=null;r.updateState(!1);var U=e.utils.renderWatch(l);c.style();var X=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:c.style()}}},oa=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Ba=d3.format("%");c.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=c.x()(a.point);a.point.y=c.y()(a.point);k.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});
a.dispatch=l;a.stacked=c;a.legend=h;a.controls=r;a.xAxis=f;a.x2Axis=w.xAxis;a.yAxis=n;a.y2Axis=w.yAxis;a.interactiveLayer=v;a.tooltip=k;a.focus=w;a.dispatch=l;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return G},set:function(a){G=a}},height:{get:function(){return H},set:function(a){H=a}},showLegend:{get:function(){return B},set:function(a){B=a}},legendPosition:{get:function(){return O},set:function(a){O=a}},showXAxis:{get:function(){return K},set:function(a){K=
a}},showYAxis:{get:function(){return M},set:function(a){M=a}},defaultState:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return A},set:function(a){A=a}},showControls:{get:function(){return J},set:function(a){J=a}},controlLabels:{get:function(){return ca},set:function(a){ca=a}},controlOptions:{get:function(){return Z},set:function(a){Z=a}},showTotalInTooltip:{get:function(){return R},set:function(a){R=a}},totalLabel:{get:function(){return I},set:function(a){I=a}},focusEnable:{get:function(){return p},
set:function(a){p=a}},focusHeight:{get:function(){return w.height()},set:function(a){w.height(a)}},brushExtent:{get:function(){return w.brushExtent()},set:function(a){w.brushExtent(a)}},margin:{get:function(){return z},set:function(a){void 0!==a.top&&(F=z.top=a.top);z.right=void 0!==a.right?a.right:z.right;z.bottom=void 0!==a.bottom?a.bottom:z.bottom;z.left=void 0!==a.left?a.left:z.left}},focusMargin:{get:function(){return w.margin},set:function(a){w.margin.top=void 0!==a.top?a.top:w.margin.top;w.margin.right=
void 0!==a.right?a.right:w.margin.right;w.margin.bottom=void 0!==a.bottom?a.bottom:w.margin.bottom;w.margin.left=void 0!==a.left?a.left:w.margin.left}},duration:{get:function(){return Y},set:function(a){Y=a;U.reset(Y);c.duration(Y);f.duration(Y);n.duration(Y)}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a);h.color(D);c.color(D);w.color(D)}},x:{get:function(){return c.x()},set:function(a){c.x(a);w.x(a)}},y:{get:function(){return c.y()},set:function(a){c.y(a);w.y(a)}},rightAlignYAxis:{get:function(){return C},
set:function(a){C=a;n.orient(C?"right":"left")}},useInteractiveGuideline:{get:function(){return V},set:function(e){V=!!e;a.interactive(!e);a.useVoronoi(!e);c.scatter.interactive(!e)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.stackedAreaWithFocusChart=function(){return e.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)};e.models.sunburst=function(){function a(a){var c=Math.max(0,Math.min(2*Math.PI,E(a.x)));a=Math.max(0,Math.min(2*Math.PI,E(a.x+a.dx)));return(c+
a)/2*(180/Math.PI)-90}function c(a){var c=Math.max(0,Math.min(2*Math.PI,E(a.x)));return(Math.max(0,Math.min(2*Math.PI,E(a.x+a.dx)))-c)/(2*Math.PI)}function f(a){var c=Math.max(0,Math.min(2*Math.PI,E(a.x)));return Math.max(0,Math.min(2*Math.PI,E(a.x+a.dx)))-c>M}function n(a,c){var e=d3.interpolate(E.domain(),[Q.x,Q.x+Q.dx]),f=d3.interpolate(u.domain(),[Q.y,1]),h=d3.interpolate(u.range(),[Q.y?20:0,q]);return 0===c?function(){return ca(a)}:function(c){E.domain(e(c));u.domain(f(c)).range(h(c));return ca(a)}}
function h(a){var c=d3.interpolate({x:a.x0,dx:a.dx0,y:a.y0,dy:a.dy0},a);return function(e){e=c(e);a.x0=e.x;a.dx0=e.dx;a.y0=e.y;a.dy0=e.dy;return ca(e)}}function r(a){a.forEach(function(a){var c=p(a);(c=Z[c])?(a.dx0=c.dx,a.x0=c.x,a.dy0=c.dy,a.y0=c.y):(a.dx0=a.dx,a.x0=a.x,a.dy0=a.dy,a.y0=a.y);c=p(a);Z[c]||(Z[c]={});c=Z[c];c.dx=a.dx;c.x=a.x;c.dy=a.dy;c.y=a.y})}function v(c){var e=J.selectAll("text"),h=J.selectAll("path");e.transition().attr("opacity",0);Q=c;h.transition().duration(R).attrTween("d",n).each("end",
function(e){e.x>=c.x&&e.x<c.x+c.dx&&e.depth>=c.depth&&d3.select(this.parentNode).select("text").transition().duration(R).text(function(a){return K(a)}).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(){var f=this.getBBox().width;if(0===e.depth)return"translate("+f/2*-1+",0)";if(e.depth===c.depth)return"translate("+(u(e.y)+5)+",0)";var h=a(e),k=90<a(e)?180:0;return 0===k?"rotate("+h+")translate("+(u(e.y)+5)+",0)":"rotate("+h+")translate("+(u(e.y)+f+5)+",0)rotate("+k+")"})})}
function k(n){Y.reset();n.each(function(k){J=d3.select(this);A=e.utils.availableWidth(z,J,w);l=e.utils.availableHeight(F,J,w);q=Math.min(A,l)/2;u.range([0,q]);var n=J.select("g.nvd3.nv-wrap.nv-sunburst");n[0][0]?n.attr("transform","translate("+(A/2+w.left+w.right)+","+(l/2+w.top+w.bottom)+")"):n=J.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+D).attr("transform","translate("+(A/2+w.left+w.right)+","+(l/2+w.top+w.bottom)+")");J.on("click",function(a,c){I.chartClick({data:a,index:c,
pos:d3.event,id:D})});N.value(H[G]||H.count);k=N.nodes(k[0]).reverse();r(k);n=n.selectAll(".arc-container").data(k,p);n.enter().append("g").attr("class","arc-container").append("path").attr("d",ca).style("fill",function(a){return a.color?a.color:V?B((a.children?a:a.parent).name):B(a.name)}).style("stroke","#FFF").on("click",function(a,c){v(a);I.elementClick({data:a,index:c})}).on("mouseover",function(a,e){d3.select(this).classed("hover",!0).style("opacity",.8);I.elementMouseover({data:a,color:d3.select(this).style("fill"),
percent:c(a)})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);I.elementMouseout({data:a})}).on("mousemove",function(a,c){I.elementMousemove({data:a})});n.each(function(a){d3.select(this).select("path").transition().duration(R).attrTween("d",h)});O&&(n.selectAll("text").remove(),n.append("text").text(function(a){return K(a)}).transition().duration(R).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(c){var e=this.getBBox().width;if(0===c.depth)return"rotate(0)translate("+
e/2*-1+",0)";var f=a(c),h=90<a(c)?180:0;return 0===h?"rotate("+f+")translate("+(u(c.y)+5)+",0)":"rotate("+f+")translate("+(u(c.y)+e+5)+",0)rotate("+h+")"}));v(k[k.length-1]);n.exit().transition().duration(R).attr("opacity",0).each("end",function(a){a=p(a);Z[a]=void 0}).remove()});Y.renderEnd("sunburst immediate");return k}var w={top:0,right:0,bottom:0,left:0},z=600,F=600,G="count",H={count:function(a){return 1},value:function(a){return a.value||a.size},size:function(a){return a.value||a.size}},D=
Math.floor(1E4*Math.random()),J=null,B=e.utils.defaultColor(),O=!1,K=function(a){return"count"===G?a.name+" #"+a.value:a.name+" "+(a.value||a.size)},M=.02,C=function(a,c){return a.name>c.name},p=function(a,c){return a.name},V=!0,R=500,I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),E=d3.scale.linear().range([0,2*Math.PI]),u=d3.scale.sqrt(),N=d3.layout.partition().sort(C),Q,A,l,q,Z={},ca=d3.svg.arc().startAngle(function(a){return Math.max(0,
Math.min(2*Math.PI,E(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,E(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,u(a.y))}).outerRadius(function(a){return Math.max(0,u(a.y+a.dy))}),Y=e.utils.renderWatch(I);k.dispatch=I;k.options=e.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return z},set:function(a){z=a}},height:{get:function(){return F},set:function(a){F=a}},mode:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return D},
set:function(a){D=a}},duration:{get:function(){return R},set:function(a){R=a}},groupColorByParent:{get:function(){return V},set:function(a){V=!!a}},showLabels:{get:function(){return O},set:function(a){O=!!a}},labelFormat:{get:function(){return K},set:function(a){K=a}},labelThreshold:{get:function(){return M},set:function(a){M=a}},sort:{get:function(){return C},set:function(a){C=a}},key:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return w},set:function(a){w.top=void 0!=a.top?
a.top:w.top;w.right=void 0!=a.right?a.right:w.right;w.bottom=void 0!=a.bottom?a.bottom:w.bottom;w.left=void 0!=a.left?a.left:w.left}},color:{get:function(){return B},set:function(a){B=e.utils.getColor(a)}}});e.utils.initOptions(k);return k};e.models.sunburstChart=function(){function a(f){F.reset();F.models(c);f.each(function(f){var h=d3.select(this);e.utils.initSVG(h);var k=e.utils.availableWidth(null,h,n),r=e.utils.availableHeight(null,h,n);a.update=function(){0===w?h.call(a):h.transition().duration(w).call(a)};
a.container=h;if(f&&f.length)h.selectAll(".nv-noData").remove();else return e.utils.noData(a,h),a;c.width(k).height(r).margin(n);h.call(c)});F.renderEnd("sunburstChart immediate");return a}var c=e.models.sunburst(),f=e.models.tooltip(),n={top:30,right:20,bottom:20,left:20},h=e.utils.defaultColor(),r=!1,v=null,k=null,w=250,z=d3.dispatch("stateChange","changeState","renderEnd"),F=e.utils.renderWatch(z);f.duration(0).headerEnabled(!1).valueFormatter(function(a){return a});c.dispatch.on("elementMouseover.tooltip",
function(a){a.series={key:a.data.name,value:a.data.value||a.data.size,color:a.color,percent:a.percent};r||(delete a.percent,delete a.series.percent);f.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){f()});a.dispatch=z;a.sunburst=c;a.tooltip=f;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return v},set:function(a){v=
a}},showTooltipPercent:{get:function(){return r},set:function(a){r=a}},color:{get:function(){return h},set:function(a){h=a;c.color(h)}},duration:{get:function(){return w},set:function(a){w=a;F.reset(w);c.duration(w)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left;c.margin(n)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.version=
"1.8.5"})();
(function(e,a){var c=0;e.widget("s3.timeplot",{options:{ajaxURL:null,autoSubmit:1E3,burnDown:!1,emptyMessage:"No data available",thousandSeparator:" ",thousandGrouping:"3",precision:null,defaultChartType:"linechart",defaultChartAxis:"totals"},_create:function(){this.id=c;c+=1},_init:function(){var a=e(this.element),c=this.options;this.widget_id=a.attr("id");this.input=a.find('input[type="hidden"][name="tp-data"]').first();this.svg=this.data=null;a=a.find(".tp-chart");this.chart=a.length?a.first():
null;this.currentChart={type:null,chart:null,container:null};c.numberFormatter=function(a){var e=c.precision;if(null===a||"undefined"==typeof a)return"-";e=e||0==e?a.toFixed(e):a.toString();e=e.split(".");a=e[0];e=1<e.length?"."+e[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+c.thousandGrouping+"})+(?!\\d))","g"),c.thousandSeparator);return a+e};this.refresh()},_destroy:function(){var a=this.element;this._unbindEvents();this.svg&&(this.svg.remove(),this.svg=null,a.find(".tp-chart").empty());this.data=
null;e.Widget.prototype.destroy.call(this)},refresh:function(){var a=this.element;this._unbindEvents();this._renderChart();this._renderChartOptions();this.options.autoSubmit?a.find(".tp-submit").hide():a.find(".tp-submit").show();this._bindEvents();a.find(".tp-throbber").hide()},_renderChartOptions:function(){var a=e(this.element),c=a.find(".tp-chart-controls").first().empty();if(!this.data.e){var h=a.attr("id"),a=e('<div class="pt-chart-opts">'),r=h+"-bchart-totals",h=h+"-lchart-totals";e(a).append(e('<span id="'+
h+'" class="tp-chart-icon tp-lchart"/><span class="tp-chart-label">Line Chart</span>'));e(a).append(e('<span id="'+r+'" class="tp-chart-icon tp-bchart"/><span class="tp-chart-label">Bar Chart</span>'));e(c).append(a)}},_renderChart:function(a){var c=this.chart;if(c){var e=this.options,f=this.currentChart,v=null,k=null;a?(v=a.type,k=a.axis):(f&&(v=f.type,k=f.axis),v&&k||(v=e.defaultChartType,k=e.defaultChartAxis));f.type==v&&f.axis==k||this._removeChart();a=this.element;e=a.find(".tp-empty");f=this.data;
null===f&&(f=JSON.parse(this.input.val()));f||(f={e:!0});this.data=f;if(f.e)this._removeChart(),a.find(".tp-empty").show();else switch(e.hide(),c.show(),k){case "totals":switch(v){case "barchart":this._renderBarChart(c,f.f,f.p);break;default:this._renderLineChart(c,f.f,f.p)}}}},_removeChart:function(){var a=this.chart;a&&(a.empty().hide(),a=this.currentChart,a.container=null,a.chart=null,a.type=null,a.axis=null,e(window).off("resize.tp"))},_renderBarChart:function(a,c,h){var f=[];for(c=0;c<h.length;c++){var n=
h[c];f.push({start:(new Date(n.t[0])).getTime(),value:n.v[0]})}h=this.currentChart;if(h.chart){var k=h.container;var w=h.chart;k.datum([{key:"reportChart",values:f}]).transition().duration(500).call(w)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),k=d3.select(e(a).get(0)).append("svg").attr("class","nv"),w=nv.models.discreteBarChart().x(function(a){return a.start}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0).forceY([0,
1]),w.tooltip.enabled(!1),a=this.options.numberFormatter,w.valueFormat(a),w.yAxis.tickFormat(a),w.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){k.datum([{key:"reportChart",values:f}]).transition().duration(500).call(w);e(window).off("resize.tp").on("resize.tp",function(a){w.update(a)});return w}),h.container=k,h.chart=w,h.type="barchart",h.axis="totals"},_renderLineChart:function(a,c,h){var f=[],n={},k=0,w=1==c.length,z;for(z=0;z<c.length;z++){var F=
c[z][0];n.hasOwnProperty(F)&&(k=n[F]+1);(n[F]=k)&&(F+=" ["+(k+1)+"]");var G={key:F,label:c[z][0],area:w},H=[];for(F=0;F<h.length;F++){var D=h[F];H.push({start:(new Date(D.t[0])).getTime(),value:D.v[z]})}G.values=H;f.push(G)}c=this.currentChart;if(c.chart){var J=c.container;var B=c.chart;J.datum(f).transition().duration(250).call(B)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),J=d3.select(e(a).get(0)).append("svg").attr("class","nv"),B=nv.models.lineChart().x(function(a){return a.start}).y(function(a){return a.value}).margin({right:50}).duration(250).showLegend(!0).useInteractiveGuideline(!0).forceY([0,
1]),B.yAxis.tickFormat(this.options.numberFormatter),B.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){J.datum(f).transition().duration(500).call(B);e(window).off("resize.tp").on("resize.tp",function(a){B.update(a)});return B}),c.container=J,c.chart=B,c.type="linechart",c.axis="totals"},reload:function(a,c,h){h="undefined"!=typeof h?h:!0;"undefined"==typeof c&&(c=this._getFilters());var f=this,n=!1;e(this.element).find(".tp-throbber").show();if(a||c)n=
this._updateAjaxURL(a,c);n||h?e.ajax({url:this.options.ajaxURL,dataType:"json"}).done(function(a){f.input.val(JSON.stringify(a));f.data=a;f.refresh()}).fail(function(a,c,e){msg="UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText;console.log(msg)}):f.refresh()},_getOptions:function(){var a="#"+e(this.element).attr("id"),c=e(a+"-time").val(),h=a=null,r=null;"custom"!=c&&(c=c.split("|"),3==c.length&&(a=c[0],h=c[1],r=c[2]));return{start:a,end:h,slots:r}},_getFilters:function(){var a=e("#"+this.widget_id+
"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(n){return null}},_updateAjaxURL:function(a,c){var f=this.options.ajaxURL;if(!f)return!1;var n=f.split("?");if(1<n.length){var v=n[1];var k=v.split("&")}else k=[];var w=[],f=!1;if(a)for(var z in a)v=a[z],v=z+"="+v,f||-1!=e.inArray(v,k)||(f=!0),w.push(v);z={};v={};var F;if(c){var G=0;for(F=c.length;G<F;G++){var H=c[G];var D=H[0];H=H[1];null===H?z[D]||(v[D]=!0):(v[D]&&(v[D]=!1),H=D+"="+encodeURIComponent(H),z[D]?z[D].push(H):
z[D]=[H])}}G=0;for(F=k.length;G<F;G++)H=k[G].split("="),1<H.length&&(D=decodeURIComponent(H[0]),H=decodeURIComponent(H[1]),v[D]?f=!0:z[D]?f||-1!=e.inArray(D+"="+H,z[D])||(f=!0):a&&a.hasOwnProperty(D)||w.push(k[G]));for(D in z)for(G=0,F=z[D].length;G<F;G++)f||-1!=e.inArray(z[D][G],k)||(f=!0),w.push(z[D][G]);D=w.join("&");n=n[0];D&&(n=n+"?"+D);this.options.ajaxURL=n;return f},_parseDate:function(a){return d3.time.format("%Y-%m-%dT%H:%M:%S+00:00").parse(a)},_bindEvents:function(){var a=this,c="#"+this.widget_id;
e(c+"-options legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-filters legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-time").on("change.autosubmit",function(){e(c+"-tp-form").trigger("optionChanged")});if(this.options.autoSubmit){var h=this.options.autoSubmit;e(c+"-tp-form").on("optionChanged",function(){var c=e(this);if(!c.data("noAutoSubmit")){var f=c.data("autoSubmitTimeout");f&&clearTimeout(f);f=setTimeout(function(){var c=
a._getOptions(),e=a._getFilters();a.reload(c,e,!1)},h);c.data("autoSubmitTimeout",f)}})}else e(c+"-tp-form input.tp-submit").on("click.timeplot",function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});e(c+"-lchart-totals").click(function(){a._renderChart({type:"linechart",axis:"totals"})});e(c+"-bchart-totals").click(function(){a._renderChart({type:"barchart",axis:"totals"})})},_unbindEvents:function(){var a="#"+this.widget_id;e(window).off("resize.timeplot");e(a+"-tp-form").off("optionChanged");
e(a+"-tp-form input.tp-submit").off("click.timeplot");e(a+"-time").unbind("change.autosubmit");e(a+"-options legend").unbind("click");e(a+"-filters legend").unbind("click");e(a+"-lchart-totals,"+a+"-bchart-totals").unbind("click")}})})(jQuery);
