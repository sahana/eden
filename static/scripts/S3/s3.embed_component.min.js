$(function(){function b(){$(".embedded > td > input").removeAttr("disabled");$(".embedded > td > select").removeAttr("disabled");$(".embedded > td > textarea").removeAttr("disabled")}function i(){$(".embedded > td > input").attr("disabled",!0);$(".embedded > td > select").attr("disabled",!0);$(".embedded > td > textarea").attr("disabled",!0)}$("#select_from_registry_row").attr("controller");var h=$("#select_from_registry_row").attr("component"),k=$("#select_from_registry_row").attr("url"),d=$("#select_from_registry_row").attr("value"),
f=$("#select_from_registry_row").attr("field"),c="#"+f,a="#dummy_"+f,e=$(c).val();$(a).addClass("hide");e>0&&($("#clear_form_link").removeClass("hide"),$("#edit_selected_link").removeClass("hide"),i());$("#select_from_registry").click(function(){$("#select_from_registry_row").addClass("hide");$("#component_autocomplete_row").removeClass("hide");$(a).removeClass("hide");$("#component_autocomplete_label").removeClass("hide");$(a).focus()});$(a).focusout(function(){e=$(c).val();$(a).addClass("hide");
$("#component_autocomplete_label").addClass("hide");$("#select_from_registry_row").removeClass("hide");e>0&&$("#clear_form_link").removeClass("hide")});clear_component_form=function(){b();$(c).val("");$(".embedded > td > input").val("");$(".embedded > td > select").val("");$(".embedded > td > textarea").val("");$("#clear_form_link").addClass("hide");$("#edit_selected_link").addClass("hide")};edit_selected_form=function(){b();$("#edit_selected_link").addClass("hide")};select_component=function(a){$("#select_from_registry").addClass("hide");
$("#clear_form_link").addClass("hide");$("#load_throbber").removeClass("hide");clear_component_form();$.getJSONS3(k+a+".s3json?show_ids=true",function(a){try{var b=a["$_"+h][0];i();$(c).val(b["@id"]);var d=/^[$|@].*/,e=/^[$]k_.*/;for(j in b){if(j.match(d))if(j.match(e))var g="#"+h+"_"+j.slice(3);else continue;else g="#"+h+"_"+j;try{if(a=b[j],a.hasOwnProperty("@id")){var f=eval(a["@id"]);$(g).val(f)}else a.hasOwnProperty("@value")?$(g).val(a["@value"]):$(g).val(a)}catch(k){}}}catch(l){$(c).val("")}$("#load_throbber").addClass("hide");
$("#select_from_registry").removeClass("hide");$("#clear_form_link").removeClass("hide");$("#edit_selected_link").removeClass("hide")});$("#component_autocomplete_row").addClass("hide");$("#select_from_registry_row").removeClass("hide")};d!="None"&&($(c).val(d),select_component(d));$("form").submit(function(){S3ClearNavigateAwayConfirm();b();return!0})});
