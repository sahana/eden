$(function(){function d(){$(".embedded > td > input").prop("disabled",!1);$(".embedded > td > select").prop("disabled",!1);$(".embedded > td > textarea").prop("disabled",!1)}function m(){$(".embedded > td > input").prop("disabled",!0);$(".embedded > td > select").prop("disabled",!0);$(".embedded > td > textarea").prop("disabled",!0)}$("#select_from_registry_row").attr("controller");var h=$("#select_from_registry_row").attr("component"),n=$("#select_from_registry_row").attr("url"),e=$("#select_from_registry_row").attr("value"),
k=$("#select_from_registry_row").attr("field"),c="#"+k,a="#dummy_"+k,f=$(c).val();$(a).addClass("hide");0<f&&($("#clear_form_link").removeClass("hide"),$("#edit_selected_link").removeClass("hide"),m());$("#select_from_registry").click(function(){$("#select_from_registry_row").addClass("hide");$("#component_autocomplete_row").removeClass("hide");$(a).removeClass("hide");$("#component_autocomplete_label").removeClass("hide");$(a).focus()});$(a).focusout(function(){f=$(c).val();$(a).addClass("hide");
$("#component_autocomplete_label").addClass("hide");$("#select_from_registry_row").removeClass("hide");0<f&&$("#clear_form_link").removeClass("hide")});clear_component_form=function(){d();$(c).val("");$(".embedded > td > input").val("");$(".embedded > td > select").val("");$(".embedded > td > textarea").val("");$("#clear_form_link").addClass("hide");$("#edit_selected_link").addClass("hide")};edit_selected_form=function(){d();$("#edit_selected_link").addClass("hide")};select_component=function(a){$("#select_from_registry").addClass("hide");
$("#clear_form_link").addClass("hide");$("#load_throbber").removeClass("hide");clear_component_form();$.getJSONS3(n+a+".s3json?show_ids=true",function(b){try{var a=b["$_"+h][0];m();$(c).val(a["@id"]);var d=/^[$|@].*/,e=/^[$]k_.*/,g;for(j in a){if(j.match(d))if(j.match(e))g="#"+h+"_"+j.slice(3);else continue;else g="#"+h+"_"+j;try{if(b=a[j],b.hasOwnProperty("@id")){var f=eval(b["@id"]);$(g).val(f)}else if(b.hasOwnProperty("@value")){var l;try{l=JSON.parse(b["@value"])}catch(k){l=b["@value"]}$(g).val(l)}else $(g).val(b)}catch(n){}}}catch(p){$(c).val("")}$("#load_throbber").addClass("hide");
$("#select_from_registry").removeClass("hide");$("#clear_form_link").removeClass("hide");$("#edit_selected_link").removeClass("hide")});$("#component_autocomplete_row").addClass("hide");$("#select_from_registry_row").removeClass("hide")};"None"!=e&&($(c).val(e),select_component(e));$("form").submit(function(){S3ClearNavigateAwayConfirm();d();return!0})});
